var Gz=Object.create;var B1=Object.defineProperty;var qz=Object.getOwnPropertyDescriptor;var Hz=Object.getOwnPropertyNames;var jz=Object.getPrototypeOf,Kz=Object.prototype.hasOwnProperty;var An=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Xz=(e,t)=>{for(var n in t)B1(e,n,{get:t[n],enumerable:!0})},X5=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Hz(t))!Kz.call(e,a)&&a!==n&&B1(e,a,{get:()=>t[a],enumerable:!(r=qz(t,a))||r.enumerable});return e};var qo=(e,t,n)=>(n=e!=null?Gz(jz(e)):{},X5(t||!e||!e.__esModule?B1(n,"default",{value:e,enumerable:!0}):n,e)),Yz=e=>X5(B1({},"__esModule",{value:!0}),e);var _8=An((zXe,D8)=>{"use strict";var or={};D8.exports=or;function C8(e){return e<0?-1:1}function jV(e){return e%1===.5&&!(e&1)?Math.floor(e):Math.round(e)}function uu(e,t){t.unsigned||--e;let n=t.unsigned?0:-Math.pow(2,e),r=Math.pow(2,e)-1,a=t.moduloBitLength?Math.pow(2,t.moduloBitLength):Math.pow(2,e),i=t.moduloBitLength?Math.pow(2,t.moduloBitLength-1):Math.pow(2,e-1);return function(o,s){s||(s={});let u=+o;if(s.enforceRange){if(!Number.isFinite(u))throw new TypeError("Argument is not a finite number");if(u=C8(u)*Math.floor(Math.abs(u)),u<n||u>r)throw new TypeError("Argument is not in byte range");return u}if(!isNaN(u)&&s.clamp)return u=jV(u),u<n&&(u=n),u>r&&(u=r),u;if(!Number.isFinite(u)||u===0)return 0;if(u=C8(u)*Math.floor(Math.abs(u)),u=u%a,!t.unsigned&&u>=i)return u-a;if(t.unsigned){if(u<0)u+=a;else if(u===-0)return 0}return u}}or.void=function(){};or.boolean=function(e){return!!e};or.byte=uu(8,{unsigned:!1});or.octet=uu(8,{unsigned:!0});or.short=uu(16,{unsigned:!1});or["unsigned short"]=uu(16,{unsigned:!0});or.long=uu(32,{unsigned:!1});or["unsigned long"]=uu(32,{unsigned:!0});or["long long"]=uu(32,{unsigned:!1,moduloBitLength:64});or["unsigned long long"]=uu(32,{unsigned:!0,moduloBitLength:64});or.double=function(e){let t=+e;if(!Number.isFinite(t))throw new TypeError("Argument is not a finite floating-point value");return t};or["unrestricted double"]=function(e){let t=+e;if(isNaN(t))throw new TypeError("Argument is NaN");return t};or.float=or.double;or["unrestricted float"]=or["unrestricted double"];or.DOMString=function(e,t){return t||(t={}),t.treatNullAsEmptyString&&e===null?"":String(e)};or.ByteString=function(e,t){let n=String(e),r;for(let a=0;(r=n.codePointAt(a))!==void 0;++a)if(r>255)throw new TypeError("Argument is not a valid bytestring");return n};or.USVString=function(e){let t=String(e),n=t.length,r=[];for(let a=0;a<n;++a){let i=t.charCodeAt(a);if(i<55296||i>57343)r.push(String.fromCodePoint(i));else if(56320<=i&&i<=57343)r.push(String.fromCodePoint(65533));else if(a===n-1)r.push(String.fromCodePoint(65533));else{let o=t.charCodeAt(a+1);if(56320<=o&&o<=57343){let s=i&1023,u=o&1023;r.push(String.fromCodePoint(65536+1024*s+u)),++a}else r.push(String.fromCodePoint(65533))}}return r.join("")};or.Date=function(e,t){if(!(e instanceof Date))throw new TypeError("Argument is not a Date object");if(!isNaN(e))return e};or.RegExp=function(e,t){return e instanceof RegExp||(e=new RegExp(e)),e}});var A8=An(($Xe,lu)=>{"use strict";lu.exports.mixin=function(t,n){let r=Object.getOwnPropertyNames(n);for(let a=0;a<r.length;++a)Object.defineProperty(t,r[a],Object.getOwnPropertyDescriptor(n,r[a]))};lu.exports.wrapperSymbol=Symbol("wrapper");lu.exports.implSymbol=Symbol("impl");lu.exports.wrapperForImpl=function(e){return e[lu.exports.wrapperSymbol]};lu.exports.implForWrapper=function(e){return e[lu.exports.implSymbol]}});var F8=An((VXe,KV)=>{KV.exports=[[[0,44],"disallowed_STD3_valid"],[[45,46],"valid"],[[47,47],"disallowed_STD3_valid"],[[48,57],"valid"],[[58,64],"disallowed_STD3_valid"],[[65,65],"mapped",[97]],[[66,66],"mapped",[98]],[[67,67],"mapped",[99]],[[68,68],"mapped",[100]],[[69,69],"mapped",[101]],[[70,70],"mapped",[102]],[[71,71],"mapped",[103]],[[72,72],"mapped",[104]],[[73,73],"mapped",[105]],[[74,74],"mapped",[106]],[[75,75],"mapped",[107]],[[76,76],"mapped",[108]],[[77,77],"mapped",[109]],[[78,78],"mapped",[110]],[[79,79],"mapped",[111]],[[80,80],"mapped",[112]],[[81,81],"mapped",[113]],[[82,82],"mapped",[114]],[[83,83],"mapped",[115]],[[84,84],"mapped",[116]],[[85,85],"mapped",[117]],[[86,86],"mapped",[118]],[[87,87],"mapped",[119]],[[88,88],"mapped",[120]],[[89,89],"mapped",[121]],[[90,90],"mapped",[122]],[[91,96],"disallowed_STD3_valid"],[[97,122],"valid"],[[123,127],"disallowed_STD3_valid"],[[128,159],"disallowed"],[[160,160],"disallowed_STD3_mapped",[32]],[[161,167],"valid",[],"NV8"],[[168,168],"disallowed_STD3_mapped",[32,776]],[[169,169],"valid",[],"NV8"],[[170,170],"mapped",[97]],[[171,172],"valid",[],"NV8"],[[173,173],"ignored"],[[174,174],"valid",[],"NV8"],[[175,175],"disallowed_STD3_mapped",[32,772]],[[176,177],"valid",[],"NV8"],[[178,178],"mapped",[50]],[[179,179],"mapped",[51]],[[180,180],"disallowed_STD3_mapped",[32,769]],[[181,181],"mapped",[956]],[[182,182],"valid",[],"NV8"],[[183,183],"valid"],[[184,184],"disallowed_STD3_mapped",[32,807]],[[185,185],"mapped",[49]],[[186,186],"mapped",[111]],[[187,187],"valid",[],"NV8"],[[188,188],"mapped",[49,8260,52]],[[189,189],"mapped",[49,8260,50]],[[190,190],"mapped",[51,8260,52]],[[191,191],"valid",[],"NV8"],[[192,192],"mapped",[224]],[[193,193],"mapped",[225]],[[194,194],"mapped",[226]],[[195,195],"mapped",[227]],[[196,196],"mapped",[228]],[[197,197],"mapped",[229]],[[198,198],"mapped",[230]],[[199,199],"mapped",[231]],[[200,200],"mapped",[232]],[[201,201],"mapped",[233]],[[202,202],"mapped",[234]],[[203,203],"mapped",[235]],[[204,204],"mapped",[236]],[[205,205],"mapped",[237]],[[206,206],"mapped",[238]],[[207,207],"mapped",[239]],[[208,208],"mapped",[240]],[[209,209],"mapped",[241]],[[210,210],"mapped",[242]],[[211,211],"mapped",[243]],[[212,212],"mapped",[244]],[[213,213],"mapped",[245]],[[214,214],"mapped",[246]],[[215,215],"valid",[],"NV8"],[[216,216],"mapped",[248]],[[217,217],"mapped",[249]],[[218,218],"mapped",[250]],[[219,219],"mapped",[251]],[[220,220],"mapped",[252]],[[221,221],"mapped",[253]],[[222,222],"mapped",[254]],[[223,223],"deviation",[115,115]],[[224,246],"valid"],[[247,247],"valid",[],"NV8"],[[248,255],"valid"],[[256,256],"mapped",[257]],[[257,257],"valid"],[[258,258],"mapped",[259]],[[259,259],"valid"],[[260,260],"mapped",[261]],[[261,261],"valid"],[[262,262],"mapped",[263]],[[263,263],"valid"],[[264,264],"mapped",[265]],[[265,265],"valid"],[[266,266],"mapped",[267]],[[267,267],"valid"],[[268,268],"mapped",[269]],[[269,269],"valid"],[[270,270],"mapped",[271]],[[271,271],"valid"],[[272,272],"mapped",[273]],[[273,273],"valid"],[[274,274],"mapped",[275]],[[275,275],"valid"],[[276,276],"mapped",[277]],[[277,277],"valid"],[[278,278],"mapped",[279]],[[279,279],"valid"],[[280,280],"mapped",[281]],[[281,281],"valid"],[[282,282],"mapped",[283]],[[283,283],"valid"],[[284,284],"mapped",[285]],[[285,285],"valid"],[[286,286],"mapped",[287]],[[287,287],"valid"],[[288,288],"mapped",[289]],[[289,289],"valid"],[[290,290],"mapped",[291]],[[291,291],"valid"],[[292,292],"mapped",[293]],[[293,293],"valid"],[[294,294],"mapped",[295]],[[295,295],"valid"],[[296,296],"mapped",[297]],[[297,297],"valid"],[[298,298],"mapped",[299]],[[299,299],"valid"],[[300,300],"mapped",[301]],[[301,301],"valid"],[[302,302],"mapped",[303]],[[303,303],"valid"],[[304,304],"mapped",[105,775]],[[305,305],"valid"],[[306,307],"mapped",[105,106]],[[308,308],"mapped",[309]],[[309,309],"valid"],[[310,310],"mapped",[311]],[[311,312],"valid"],[[313,313],"mapped",[314]],[[314,314],"valid"],[[315,315],"mapped",[316]],[[316,316],"valid"],[[317,317],"mapped",[318]],[[318,318],"valid"],[[319,320],"mapped",[108,183]],[[321,321],"mapped",[322]],[[322,322],"valid"],[[323,323],"mapped",[324]],[[324,324],"valid"],[[325,325],"mapped",[326]],[[326,326],"valid"],[[327,327],"mapped",[328]],[[328,328],"valid"],[[329,329],"mapped",[700,110]],[[330,330],"mapped",[331]],[[331,331],"valid"],[[332,332],"mapped",[333]],[[333,333],"valid"],[[334,334],"mapped",[335]],[[335,335],"valid"],[[336,336],"mapped",[337]],[[337,337],"valid"],[[338,338],"mapped",[339]],[[339,339],"valid"],[[340,340],"mapped",[341]],[[341,341],"valid"],[[342,342],"mapped",[343]],[[343,343],"valid"],[[344,344],"mapped",[345]],[[345,345],"valid"],[[346,346],"mapped",[347]],[[347,347],"valid"],[[348,348],"mapped",[349]],[[349,349],"valid"],[[350,350],"mapped",[351]],[[351,351],"valid"],[[352,352],"mapped",[353]],[[353,353],"valid"],[[354,354],"mapped",[355]],[[355,355],"valid"],[[356,356],"mapped",[357]],[[357,357],"valid"],[[358,358],"mapped",[359]],[[359,359],"valid"],[[360,360],"mapped",[361]],[[361,361],"valid"],[[362,362],"mapped",[363]],[[363,363],"valid"],[[364,364],"mapped",[365]],[[365,365],"valid"],[[366,366],"mapped",[367]],[[367,367],"valid"],[[368,368],"mapped",[369]],[[369,369],"valid"],[[370,370],"mapped",[371]],[[371,371],"valid"],[[372,372],"mapped",[373]],[[373,373],"valid"],[[374,374],"mapped",[375]],[[375,375],"valid"],[[376,376],"mapped",[255]],[[377,377],"mapped",[378]],[[378,378],"valid"],[[379,379],"mapped",[380]],[[380,380],"valid"],[[381,381],"mapped",[382]],[[382,382],"valid"],[[383,383],"mapped",[115]],[[384,384],"valid"],[[385,385],"mapped",[595]],[[386,386],"mapped",[387]],[[387,387],"valid"],[[388,388],"mapped",[389]],[[389,389],"valid"],[[390,390],"mapped",[596]],[[391,391],"mapped",[392]],[[392,392],"valid"],[[393,393],"mapped",[598]],[[394,394],"mapped",[599]],[[395,395],"mapped",[396]],[[396,397],"valid"],[[398,398],"mapped",[477]],[[399,399],"mapped",[601]],[[400,400],"mapped",[603]],[[401,401],"mapped",[402]],[[402,402],"valid"],[[403,403],"mapped",[608]],[[404,404],"mapped",[611]],[[405,405],"valid"],[[406,406],"mapped",[617]],[[407,407],"mapped",[616]],[[408,408],"mapped",[409]],[[409,411],"valid"],[[412,412],"mapped",[623]],[[413,413],"mapped",[626]],[[414,414],"valid"],[[415,415],"mapped",[629]],[[416,416],"mapped",[417]],[[417,417],"valid"],[[418,418],"mapped",[419]],[[419,419],"valid"],[[420,420],"mapped",[421]],[[421,421],"valid"],[[422,422],"mapped",[640]],[[423,423],"mapped",[424]],[[424,424],"valid"],[[425,425],"mapped",[643]],[[426,427],"valid"],[[428,428],"mapped",[429]],[[429,429],"valid"],[[430,430],"mapped",[648]],[[431,431],"mapped",[432]],[[432,432],"valid"],[[433,433],"mapped",[650]],[[434,434],"mapped",[651]],[[435,435],"mapped",[436]],[[436,436],"valid"],[[437,437],"mapped",[438]],[[438,438],"valid"],[[439,439],"mapped",[658]],[[440,440],"mapped",[441]],[[441,443],"valid"],[[444,444],"mapped",[445]],[[445,451],"valid"],[[452,454],"mapped",[100,382]],[[455,457],"mapped",[108,106]],[[458,460],"mapped",[110,106]],[[461,461],"mapped",[462]],[[462,462],"valid"],[[463,463],"mapped",[464]],[[464,464],"valid"],[[465,465],"mapped",[466]],[[466,466],"valid"],[[467,467],"mapped",[468]],[[468,468],"valid"],[[469,469],"mapped",[470]],[[470,470],"valid"],[[471,471],"mapped",[472]],[[472,472],"valid"],[[473,473],"mapped",[474]],[[474,474],"valid"],[[475,475],"mapped",[476]],[[476,477],"valid"],[[478,478],"mapped",[479]],[[479,479],"valid"],[[480,480],"mapped",[481]],[[481,481],"valid"],[[482,482],"mapped",[483]],[[483,483],"valid"],[[484,484],"mapped",[485]],[[485,485],"valid"],[[486,486],"mapped",[487]],[[487,487],"valid"],[[488,488],"mapped",[489]],[[489,489],"valid"],[[490,490],"mapped",[491]],[[491,491],"valid"],[[492,492],"mapped",[493]],[[493,493],"valid"],[[494,494],"mapped",[495]],[[495,496],"valid"],[[497,499],"mapped",[100,122]],[[500,500],"mapped",[501]],[[501,501],"valid"],[[502,502],"mapped",[405]],[[503,503],"mapped",[447]],[[504,504],"mapped",[505]],[[505,505],"valid"],[[506,506],"mapped",[507]],[[507,507],"valid"],[[508,508],"mapped",[509]],[[509,509],"valid"],[[510,510],"mapped",[511]],[[511,511],"valid"],[[512,512],"mapped",[513]],[[513,513],"valid"],[[514,514],"mapped",[515]],[[515,515],"valid"],[[516,516],"mapped",[517]],[[517,517],"valid"],[[518,518],"mapped",[519]],[[519,519],"valid"],[[520,520],"mapped",[521]],[[521,521],"valid"],[[522,522],"mapped",[523]],[[523,523],"valid"],[[524,524],"mapped",[525]],[[525,525],"valid"],[[526,526],"mapped",[527]],[[527,527],"valid"],[[528,528],"mapped",[529]],[[529,529],"valid"],[[530,530],"mapped",[531]],[[531,531],"valid"],[[532,532],"mapped",[533]],[[533,533],"valid"],[[534,534],"mapped",[535]],[[535,535],"valid"],[[536,536],"mapped",[537]],[[537,537],"valid"],[[538,538],"mapped",[539]],[[539,539],"valid"],[[540,540],"mapped",[541]],[[541,541],"valid"],[[542,542],"mapped",[543]],[[543,543],"valid"],[[544,544],"mapped",[414]],[[545,545],"valid"],[[546,546],"mapped",[547]],[[547,547],"valid"],[[548,548],"mapped",[549]],[[549,549],"valid"],[[550,550],"mapped",[551]],[[551,551],"valid"],[[552,552],"mapped",[553]],[[553,553],"valid"],[[554,554],"mapped",[555]],[[555,555],"valid"],[[556,556],"mapped",[557]],[[557,557],"valid"],[[558,558],"mapped",[559]],[[559,559],"valid"],[[560,560],"mapped",[561]],[[561,561],"valid"],[[562,562],"mapped",[563]],[[563,563],"valid"],[[564,566],"valid"],[[567,569],"valid"],[[570,570],"mapped",[11365]],[[571,571],"mapped",[572]],[[572,572],"valid"],[[573,573],"mapped",[410]],[[574,574],"mapped",[11366]],[[575,576],"valid"],[[577,577],"mapped",[578]],[[578,578],"valid"],[[579,579],"mapped",[384]],[[580,580],"mapped",[649]],[[581,581],"mapped",[652]],[[582,582],"mapped",[583]],[[583,583],"valid"],[[584,584],"mapped",[585]],[[585,585],"valid"],[[586,586],"mapped",[587]],[[587,587],"valid"],[[588,588],"mapped",[589]],[[589,589],"valid"],[[590,590],"mapped",[591]],[[591,591],"valid"],[[592,680],"valid"],[[681,685],"valid"],[[686,687],"valid"],[[688,688],"mapped",[104]],[[689,689],"mapped",[614]],[[690,690],"mapped",[106]],[[691,691],"mapped",[114]],[[692,692],"mapped",[633]],[[693,693],"mapped",[635]],[[694,694],"mapped",[641]],[[695,695],"mapped",[119]],[[696,696],"mapped",[121]],[[697,705],"valid"],[[706,709],"valid",[],"NV8"],[[710,721],"valid"],[[722,727],"valid",[],"NV8"],[[728,728],"disallowed_STD3_mapped",[32,774]],[[729,729],"disallowed_STD3_mapped",[32,775]],[[730,730],"disallowed_STD3_mapped",[32,778]],[[731,731],"disallowed_STD3_mapped",[32,808]],[[732,732],"disallowed_STD3_mapped",[32,771]],[[733,733],"disallowed_STD3_mapped",[32,779]],[[734,734],"valid",[],"NV8"],[[735,735],"valid",[],"NV8"],[[736,736],"mapped",[611]],[[737,737],"mapped",[108]],[[738,738],"mapped",[115]],[[739,739],"mapped",[120]],[[740,740],"mapped",[661]],[[741,745],"valid",[],"NV8"],[[746,747],"valid",[],"NV8"],[[748,748],"valid"],[[749,749],"valid",[],"NV8"],[[750,750],"valid"],[[751,767],"valid",[],"NV8"],[[768,831],"valid"],[[832,832],"mapped",[768]],[[833,833],"mapped",[769]],[[834,834],"valid"],[[835,835],"mapped",[787]],[[836,836],"mapped",[776,769]],[[837,837],"mapped",[953]],[[838,846],"valid"],[[847,847],"ignored"],[[848,855],"valid"],[[856,860],"valid"],[[861,863],"valid"],[[864,865],"valid"],[[866,866],"valid"],[[867,879],"valid"],[[880,880],"mapped",[881]],[[881,881],"valid"],[[882,882],"mapped",[883]],[[883,883],"valid"],[[884,884],"mapped",[697]],[[885,885],"valid"],[[886,886],"mapped",[887]],[[887,887],"valid"],[[888,889],"disallowed"],[[890,890],"disallowed_STD3_mapped",[32,953]],[[891,893],"valid"],[[894,894],"disallowed_STD3_mapped",[59]],[[895,895],"mapped",[1011]],[[896,899],"disallowed"],[[900,900],"disallowed_STD3_mapped",[32,769]],[[901,901],"disallowed_STD3_mapped",[32,776,769]],[[902,902],"mapped",[940]],[[903,903],"mapped",[183]],[[904,904],"mapped",[941]],[[905,905],"mapped",[942]],[[906,906],"mapped",[943]],[[907,907],"disallowed"],[[908,908],"mapped",[972]],[[909,909],"disallowed"],[[910,910],"mapped",[973]],[[911,911],"mapped",[974]],[[912,912],"valid"],[[913,913],"mapped",[945]],[[914,914],"mapped",[946]],[[915,915],"mapped",[947]],[[916,916],"mapped",[948]],[[917,917],"mapped",[949]],[[918,918],"mapped",[950]],[[919,919],"mapped",[951]],[[920,920],"mapped",[952]],[[921,921],"mapped",[953]],[[922,922],"mapped",[954]],[[923,923],"mapped",[955]],[[924,924],"mapped",[956]],[[925,925],"mapped",[957]],[[926,926],"mapped",[958]],[[927,927],"mapped",[959]],[[928,928],"mapped",[960]],[[929,929],"mapped",[961]],[[930,930],"disallowed"],[[931,931],"mapped",[963]],[[932,932],"mapped",[964]],[[933,933],"mapped",[965]],[[934,934],"mapped",[966]],[[935,935],"mapped",[967]],[[936,936],"mapped",[968]],[[937,937],"mapped",[969]],[[938,938],"mapped",[970]],[[939,939],"mapped",[971]],[[940,961],"valid"],[[962,962],"deviation",[963]],[[963,974],"valid"],[[975,975],"mapped",[983]],[[976,976],"mapped",[946]],[[977,977],"mapped",[952]],[[978,978],"mapped",[965]],[[979,979],"mapped",[973]],[[980,980],"mapped",[971]],[[981,981],"mapped",[966]],[[982,982],"mapped",[960]],[[983,983],"valid"],[[984,984],"mapped",[985]],[[985,985],"valid"],[[986,986],"mapped",[987]],[[987,987],"valid"],[[988,988],"mapped",[989]],[[989,989],"valid"],[[990,990],"mapped",[991]],[[991,991],"valid"],[[992,992],"mapped",[993]],[[993,993],"valid"],[[994,994],"mapped",[995]],[[995,995],"valid"],[[996,996],"mapped",[997]],[[997,997],"valid"],[[998,998],"mapped",[999]],[[999,999],"valid"],[[1e3,1e3],"mapped",[1001]],[[1001,1001],"valid"],[[1002,1002],"mapped",[1003]],[[1003,1003],"valid"],[[1004,1004],"mapped",[1005]],[[1005,1005],"valid"],[[1006,1006],"mapped",[1007]],[[1007,1007],"valid"],[[1008,1008],"mapped",[954]],[[1009,1009],"mapped",[961]],[[1010,1010],"mapped",[963]],[[1011,1011],"valid"],[[1012,1012],"mapped",[952]],[[1013,1013],"mapped",[949]],[[1014,1014],"valid",[],"NV8"],[[1015,1015],"mapped",[1016]],[[1016,1016],"valid"],[[1017,1017],"mapped",[963]],[[1018,1018],"mapped",[1019]],[[1019,1019],"valid"],[[1020,1020],"valid"],[[1021,1021],"mapped",[891]],[[1022,1022],"mapped",[892]],[[1023,1023],"mapped",[893]],[[1024,1024],"mapped",[1104]],[[1025,1025],"mapped",[1105]],[[1026,1026],"mapped",[1106]],[[1027,1027],"mapped",[1107]],[[1028,1028],"mapped",[1108]],[[1029,1029],"mapped",[1109]],[[1030,1030],"mapped",[1110]],[[1031,1031],"mapped",[1111]],[[1032,1032],"mapped",[1112]],[[1033,1033],"mapped",[1113]],[[1034,1034],"mapped",[1114]],[[1035,1035],"mapped",[1115]],[[1036,1036],"mapped",[1116]],[[1037,1037],"mapped",[1117]],[[1038,1038],"mapped",[1118]],[[1039,1039],"mapped",[1119]],[[1040,1040],"mapped",[1072]],[[1041,1041],"mapped",[1073]],[[1042,1042],"mapped",[1074]],[[1043,1043],"mapped",[1075]],[[1044,1044],"mapped",[1076]],[[1045,1045],"mapped",[1077]],[[1046,1046],"mapped",[1078]],[[1047,1047],"mapped",[1079]],[[1048,1048],"mapped",[1080]],[[1049,1049],"mapped",[1081]],[[1050,1050],"mapped",[1082]],[[1051,1051],"mapped",[1083]],[[1052,1052],"mapped",[1084]],[[1053,1053],"mapped",[1085]],[[1054,1054],"mapped",[1086]],[[1055,1055],"mapped",[1087]],[[1056,1056],"mapped",[1088]],[[1057,1057],"mapped",[1089]],[[1058,1058],"mapped",[1090]],[[1059,1059],"mapped",[1091]],[[1060,1060],"mapped",[1092]],[[1061,1061],"mapped",[1093]],[[1062,1062],"mapped",[1094]],[[1063,1063],"mapped",[1095]],[[1064,1064],"mapped",[1096]],[[1065,1065],"mapped",[1097]],[[1066,1066],"mapped",[1098]],[[1067,1067],"mapped",[1099]],[[1068,1068],"mapped",[1100]],[[1069,1069],"mapped",[1101]],[[1070,1070],"mapped",[1102]],[[1071,1071],"mapped",[1103]],[[1072,1103],"valid"],[[1104,1104],"valid"],[[1105,1116],"valid"],[[1117,1117],"valid"],[[1118,1119],"valid"],[[1120,1120],"mapped",[1121]],[[1121,1121],"valid"],[[1122,1122],"mapped",[1123]],[[1123,1123],"valid"],[[1124,1124],"mapped",[1125]],[[1125,1125],"valid"],[[1126,1126],"mapped",[1127]],[[1127,1127],"valid"],[[1128,1128],"mapped",[1129]],[[1129,1129],"valid"],[[1130,1130],"mapped",[1131]],[[1131,1131],"valid"],[[1132,1132],"mapped",[1133]],[[1133,1133],"valid"],[[1134,1134],"mapped",[1135]],[[1135,1135],"valid"],[[1136,1136],"mapped",[1137]],[[1137,1137],"valid"],[[1138,1138],"mapped",[1139]],[[1139,1139],"valid"],[[1140,1140],"mapped",[1141]],[[1141,1141],"valid"],[[1142,1142],"mapped",[1143]],[[1143,1143],"valid"],[[1144,1144],"mapped",[1145]],[[1145,1145],"valid"],[[1146,1146],"mapped",[1147]],[[1147,1147],"valid"],[[1148,1148],"mapped",[1149]],[[1149,1149],"valid"],[[1150,1150],"mapped",[1151]],[[1151,1151],"valid"],[[1152,1152],"mapped",[1153]],[[1153,1153],"valid"],[[1154,1154],"valid",[],"NV8"],[[1155,1158],"valid"],[[1159,1159],"valid"],[[1160,1161],"valid",[],"NV8"],[[1162,1162],"mapped",[1163]],[[1163,1163],"valid"],[[1164,1164],"mapped",[1165]],[[1165,1165],"valid"],[[1166,1166],"mapped",[1167]],[[1167,1167],"valid"],[[1168,1168],"mapped",[1169]],[[1169,1169],"valid"],[[1170,1170],"mapped",[1171]],[[1171,1171],"valid"],[[1172,1172],"mapped",[1173]],[[1173,1173],"valid"],[[1174,1174],"mapped",[1175]],[[1175,1175],"valid"],[[1176,1176],"mapped",[1177]],[[1177,1177],"valid"],[[1178,1178],"mapped",[1179]],[[1179,1179],"valid"],[[1180,1180],"mapped",[1181]],[[1181,1181],"valid"],[[1182,1182],"mapped",[1183]],[[1183,1183],"valid"],[[1184,1184],"mapped",[1185]],[[1185,1185],"valid"],[[1186,1186],"mapped",[1187]],[[1187,1187],"valid"],[[1188,1188],"mapped",[1189]],[[1189,1189],"valid"],[[1190,1190],"mapped",[1191]],[[1191,1191],"valid"],[[1192,1192],"mapped",[1193]],[[1193,1193],"valid"],[[1194,1194],"mapped",[1195]],[[1195,1195],"valid"],[[1196,1196],"mapped",[1197]],[[1197,1197],"valid"],[[1198,1198],"mapped",[1199]],[[1199,1199],"valid"],[[1200,1200],"mapped",[1201]],[[1201,1201],"valid"],[[1202,1202],"mapped",[1203]],[[1203,1203],"valid"],[[1204,1204],"mapped",[1205]],[[1205,1205],"valid"],[[1206,1206],"mapped",[1207]],[[1207,1207],"valid"],[[1208,1208],"mapped",[1209]],[[1209,1209],"valid"],[[1210,1210],"mapped",[1211]],[[1211,1211],"valid"],[[1212,1212],"mapped",[1213]],[[1213,1213],"valid"],[[1214,1214],"mapped",[1215]],[[1215,1215],"valid"],[[1216,1216],"disallowed"],[[1217,1217],"mapped",[1218]],[[1218,1218],"valid"],[[1219,1219],"mapped",[1220]],[[1220,1220],"valid"],[[1221,1221],"mapped",[1222]],[[1222,1222],"valid"],[[1223,1223],"mapped",[1224]],[[1224,1224],"valid"],[[1225,1225],"mapped",[1226]],[[1226,1226],"valid"],[[1227,1227],"mapped",[1228]],[[1228,1228],"valid"],[[1229,1229],"mapped",[1230]],[[1230,1230],"valid"],[[1231,1231],"valid"],[[1232,1232],"mapped",[1233]],[[1233,1233],"valid"],[[1234,1234],"mapped",[1235]],[[1235,1235],"valid"],[[1236,1236],"mapped",[1237]],[[1237,1237],"valid"],[[1238,1238],"mapped",[1239]],[[1239,1239],"valid"],[[1240,1240],"mapped",[1241]],[[1241,1241],"valid"],[[1242,1242],"mapped",[1243]],[[1243,1243],"valid"],[[1244,1244],"mapped",[1245]],[[1245,1245],"valid"],[[1246,1246],"mapped",[1247]],[[1247,1247],"valid"],[[1248,1248],"mapped",[1249]],[[1249,1249],"valid"],[[1250,1250],"mapped",[1251]],[[1251,1251],"valid"],[[1252,1252],"mapped",[1253]],[[1253,1253],"valid"],[[1254,1254],"mapped",[1255]],[[1255,1255],"valid"],[[1256,1256],"mapped",[1257]],[[1257,1257],"valid"],[[1258,1258],"mapped",[1259]],[[1259,1259],"valid"],[[1260,1260],"mapped",[1261]],[[1261,1261],"valid"],[[1262,1262],"mapped",[1263]],[[1263,1263],"valid"],[[1264,1264],"mapped",[1265]],[[1265,1265],"valid"],[[1266,1266],"mapped",[1267]],[[1267,1267],"valid"],[[1268,1268],"mapped",[1269]],[[1269,1269],"valid"],[[1270,1270],"mapped",[1271]],[[1271,1271],"valid"],[[1272,1272],"mapped",[1273]],[[1273,1273],"valid"],[[1274,1274],"mapped",[1275]],[[1275,1275],"valid"],[[1276,1276],"mapped",[1277]],[[1277,1277],"valid"],[[1278,1278],"mapped",[1279]],[[1279,1279],"valid"],[[1280,1280],"mapped",[1281]],[[1281,1281],"valid"],[[1282,1282],"mapped",[1283]],[[1283,1283],"valid"],[[1284,1284],"mapped",[1285]],[[1285,1285],"valid"],[[1286,1286],"mapped",[1287]],[[1287,1287],"valid"],[[1288,1288],"mapped",[1289]],[[1289,1289],"valid"],[[1290,1290],"mapped",[1291]],[[1291,1291],"valid"],[[1292,1292],"mapped",[1293]],[[1293,1293],"valid"],[[1294,1294],"mapped",[1295]],[[1295,1295],"valid"],[[1296,1296],"mapped",[1297]],[[1297,1297],"valid"],[[1298,1298],"mapped",[1299]],[[1299,1299],"valid"],[[1300,1300],"mapped",[1301]],[[1301,1301],"valid"],[[1302,1302],"mapped",[1303]],[[1303,1303],"valid"],[[1304,1304],"mapped",[1305]],[[1305,1305],"valid"],[[1306,1306],"mapped",[1307]],[[1307,1307],"valid"],[[1308,1308],"mapped",[1309]],[[1309,1309],"valid"],[[1310,1310],"mapped",[1311]],[[1311,1311],"valid"],[[1312,1312],"mapped",[1313]],[[1313,1313],"valid"],[[1314,1314],"mapped",[1315]],[[1315,1315],"valid"],[[1316,1316],"mapped",[1317]],[[1317,1317],"valid"],[[1318,1318],"mapped",[1319]],[[1319,1319],"valid"],[[1320,1320],"mapped",[1321]],[[1321,1321],"valid"],[[1322,1322],"mapped",[1323]],[[1323,1323],"valid"],[[1324,1324],"mapped",[1325]],[[1325,1325],"valid"],[[1326,1326],"mapped",[1327]],[[1327,1327],"valid"],[[1328,1328],"disallowed"],[[1329,1329],"mapped",[1377]],[[1330,1330],"mapped",[1378]],[[1331,1331],"mapped",[1379]],[[1332,1332],"mapped",[1380]],[[1333,1333],"mapped",[1381]],[[1334,1334],"mapped",[1382]],[[1335,1335],"mapped",[1383]],[[1336,1336],"mapped",[1384]],[[1337,1337],"mapped",[1385]],[[1338,1338],"mapped",[1386]],[[1339,1339],"mapped",[1387]],[[1340,1340],"mapped",[1388]],[[1341,1341],"mapped",[1389]],[[1342,1342],"mapped",[1390]],[[1343,1343],"mapped",[1391]],[[1344,1344],"mapped",[1392]],[[1345,1345],"mapped",[1393]],[[1346,1346],"mapped",[1394]],[[1347,1347],"mapped",[1395]],[[1348,1348],"mapped",[1396]],[[1349,1349],"mapped",[1397]],[[1350,1350],"mapped",[1398]],[[1351,1351],"mapped",[1399]],[[1352,1352],"mapped",[1400]],[[1353,1353],"mapped",[1401]],[[1354,1354],"mapped",[1402]],[[1355,1355],"mapped",[1403]],[[1356,1356],"mapped",[1404]],[[1357,1357],"mapped",[1405]],[[1358,1358],"mapped",[1406]],[[1359,1359],"mapped",[1407]],[[1360,1360],"mapped",[1408]],[[1361,1361],"mapped",[1409]],[[1362,1362],"mapped",[1410]],[[1363,1363],"mapped",[1411]],[[1364,1364],"mapped",[1412]],[[1365,1365],"mapped",[1413]],[[1366,1366],"mapped",[1414]],[[1367,1368],"disallowed"],[[1369,1369],"valid"],[[1370,1375],"valid",[],"NV8"],[[1376,1376],"disallowed"],[[1377,1414],"valid"],[[1415,1415],"mapped",[1381,1410]],[[1416,1416],"disallowed"],[[1417,1417],"valid",[],"NV8"],[[1418,1418],"valid",[],"NV8"],[[1419,1420],"disallowed"],[[1421,1422],"valid",[],"NV8"],[[1423,1423],"valid",[],"NV8"],[[1424,1424],"disallowed"],[[1425,1441],"valid"],[[1442,1442],"valid"],[[1443,1455],"valid"],[[1456,1465],"valid"],[[1466,1466],"valid"],[[1467,1469],"valid"],[[1470,1470],"valid",[],"NV8"],[[1471,1471],"valid"],[[1472,1472],"valid",[],"NV8"],[[1473,1474],"valid"],[[1475,1475],"valid",[],"NV8"],[[1476,1476],"valid"],[[1477,1477],"valid"],[[1478,1478],"valid",[],"NV8"],[[1479,1479],"valid"],[[1480,1487],"disallowed"],[[1488,1514],"valid"],[[1515,1519],"disallowed"],[[1520,1524],"valid"],[[1525,1535],"disallowed"],[[1536,1539],"disallowed"],[[1540,1540],"disallowed"],[[1541,1541],"disallowed"],[[1542,1546],"valid",[],"NV8"],[[1547,1547],"valid",[],"NV8"],[[1548,1548],"valid",[],"NV8"],[[1549,1551],"valid",[],"NV8"],[[1552,1557],"valid"],[[1558,1562],"valid"],[[1563,1563],"valid",[],"NV8"],[[1564,1564],"disallowed"],[[1565,1565],"disallowed"],[[1566,1566],"valid",[],"NV8"],[[1567,1567],"valid",[],"NV8"],[[1568,1568],"valid"],[[1569,1594],"valid"],[[1595,1599],"valid"],[[1600,1600],"valid",[],"NV8"],[[1601,1618],"valid"],[[1619,1621],"valid"],[[1622,1624],"valid"],[[1625,1630],"valid"],[[1631,1631],"valid"],[[1632,1641],"valid"],[[1642,1645],"valid",[],"NV8"],[[1646,1647],"valid"],[[1648,1652],"valid"],[[1653,1653],"mapped",[1575,1652]],[[1654,1654],"mapped",[1608,1652]],[[1655,1655],"mapped",[1735,1652]],[[1656,1656],"mapped",[1610,1652]],[[1657,1719],"valid"],[[1720,1721],"valid"],[[1722,1726],"valid"],[[1727,1727],"valid"],[[1728,1742],"valid"],[[1743,1743],"valid"],[[1744,1747],"valid"],[[1748,1748],"valid",[],"NV8"],[[1749,1756],"valid"],[[1757,1757],"disallowed"],[[1758,1758],"valid",[],"NV8"],[[1759,1768],"valid"],[[1769,1769],"valid",[],"NV8"],[[1770,1773],"valid"],[[1774,1775],"valid"],[[1776,1785],"valid"],[[1786,1790],"valid"],[[1791,1791],"valid"],[[1792,1805],"valid",[],"NV8"],[[1806,1806],"disallowed"],[[1807,1807],"disallowed"],[[1808,1836],"valid"],[[1837,1839],"valid"],[[1840,1866],"valid"],[[1867,1868],"disallowed"],[[1869,1871],"valid"],[[1872,1901],"valid"],[[1902,1919],"valid"],[[1920,1968],"valid"],[[1969,1969],"valid"],[[1970,1983],"disallowed"],[[1984,2037],"valid"],[[2038,2042],"valid",[],"NV8"],[[2043,2047],"disallowed"],[[2048,2093],"valid"],[[2094,2095],"disallowed"],[[2096,2110],"valid",[],"NV8"],[[2111,2111],"disallowed"],[[2112,2139],"valid"],[[2140,2141],"disallowed"],[[2142,2142],"valid",[],"NV8"],[[2143,2207],"disallowed"],[[2208,2208],"valid"],[[2209,2209],"valid"],[[2210,2220],"valid"],[[2221,2226],"valid"],[[2227,2228],"valid"],[[2229,2274],"disallowed"],[[2275,2275],"valid"],[[2276,2302],"valid"],[[2303,2303],"valid"],[[2304,2304],"valid"],[[2305,2307],"valid"],[[2308,2308],"valid"],[[2309,2361],"valid"],[[2362,2363],"valid"],[[2364,2381],"valid"],[[2382,2382],"valid"],[[2383,2383],"valid"],[[2384,2388],"valid"],[[2389,2389],"valid"],[[2390,2391],"valid"],[[2392,2392],"mapped",[2325,2364]],[[2393,2393],"mapped",[2326,2364]],[[2394,2394],"mapped",[2327,2364]],[[2395,2395],"mapped",[2332,2364]],[[2396,2396],"mapped",[2337,2364]],[[2397,2397],"mapped",[2338,2364]],[[2398,2398],"mapped",[2347,2364]],[[2399,2399],"mapped",[2351,2364]],[[2400,2403],"valid"],[[2404,2405],"valid",[],"NV8"],[[2406,2415],"valid"],[[2416,2416],"valid",[],"NV8"],[[2417,2418],"valid"],[[2419,2423],"valid"],[[2424,2424],"valid"],[[2425,2426],"valid"],[[2427,2428],"valid"],[[2429,2429],"valid"],[[2430,2431],"valid"],[[2432,2432],"valid"],[[2433,2435],"valid"],[[2436,2436],"disallowed"],[[2437,2444],"valid"],[[2445,2446],"disallowed"],[[2447,2448],"valid"],[[2449,2450],"disallowed"],[[2451,2472],"valid"],[[2473,2473],"disallowed"],[[2474,2480],"valid"],[[2481,2481],"disallowed"],[[2482,2482],"valid"],[[2483,2485],"disallowed"],[[2486,2489],"valid"],[[2490,2491],"disallowed"],[[2492,2492],"valid"],[[2493,2493],"valid"],[[2494,2500],"valid"],[[2501,2502],"disallowed"],[[2503,2504],"valid"],[[2505,2506],"disallowed"],[[2507,2509],"valid"],[[2510,2510],"valid"],[[2511,2518],"disallowed"],[[2519,2519],"valid"],[[2520,2523],"disallowed"],[[2524,2524],"mapped",[2465,2492]],[[2525,2525],"mapped",[2466,2492]],[[2526,2526],"disallowed"],[[2527,2527],"mapped",[2479,2492]],[[2528,2531],"valid"],[[2532,2533],"disallowed"],[[2534,2545],"valid"],[[2546,2554],"valid",[],"NV8"],[[2555,2555],"valid",[],"NV8"],[[2556,2560],"disallowed"],[[2561,2561],"valid"],[[2562,2562],"valid"],[[2563,2563],"valid"],[[2564,2564],"disallowed"],[[2565,2570],"valid"],[[2571,2574],"disallowed"],[[2575,2576],"valid"],[[2577,2578],"disallowed"],[[2579,2600],"valid"],[[2601,2601],"disallowed"],[[2602,2608],"valid"],[[2609,2609],"disallowed"],[[2610,2610],"valid"],[[2611,2611],"mapped",[2610,2620]],[[2612,2612],"disallowed"],[[2613,2613],"valid"],[[2614,2614],"mapped",[2616,2620]],[[2615,2615],"disallowed"],[[2616,2617],"valid"],[[2618,2619],"disallowed"],[[2620,2620],"valid"],[[2621,2621],"disallowed"],[[2622,2626],"valid"],[[2627,2630],"disallowed"],[[2631,2632],"valid"],[[2633,2634],"disallowed"],[[2635,2637],"valid"],[[2638,2640],"disallowed"],[[2641,2641],"valid"],[[2642,2648],"disallowed"],[[2649,2649],"mapped",[2582,2620]],[[2650,2650],"mapped",[2583,2620]],[[2651,2651],"mapped",[2588,2620]],[[2652,2652],"valid"],[[2653,2653],"disallowed"],[[2654,2654],"mapped",[2603,2620]],[[2655,2661],"disallowed"],[[2662,2676],"valid"],[[2677,2677],"valid"],[[2678,2688],"disallowed"],[[2689,2691],"valid"],[[2692,2692],"disallowed"],[[2693,2699],"valid"],[[2700,2700],"valid"],[[2701,2701],"valid"],[[2702,2702],"disallowed"],[[2703,2705],"valid"],[[2706,2706],"disallowed"],[[2707,2728],"valid"],[[2729,2729],"disallowed"],[[2730,2736],"valid"],[[2737,2737],"disallowed"],[[2738,2739],"valid"],[[2740,2740],"disallowed"],[[2741,2745],"valid"],[[2746,2747],"disallowed"],[[2748,2757],"valid"],[[2758,2758],"disallowed"],[[2759,2761],"valid"],[[2762,2762],"disallowed"],[[2763,2765],"valid"],[[2766,2767],"disallowed"],[[2768,2768],"valid"],[[2769,2783],"disallowed"],[[2784,2784],"valid"],[[2785,2787],"valid"],[[2788,2789],"disallowed"],[[2790,2799],"valid"],[[2800,2800],"valid",[],"NV8"],[[2801,2801],"valid",[],"NV8"],[[2802,2808],"disallowed"],[[2809,2809],"valid"],[[2810,2816],"disallowed"],[[2817,2819],"valid"],[[2820,2820],"disallowed"],[[2821,2828],"valid"],[[2829,2830],"disallowed"],[[2831,2832],"valid"],[[2833,2834],"disallowed"],[[2835,2856],"valid"],[[2857,2857],"disallowed"],[[2858,2864],"valid"],[[2865,2865],"disallowed"],[[2866,2867],"valid"],[[2868,2868],"disallowed"],[[2869,2869],"valid"],[[2870,2873],"valid"],[[2874,2875],"disallowed"],[[2876,2883],"valid"],[[2884,2884],"valid"],[[2885,2886],"disallowed"],[[2887,2888],"valid"],[[2889,2890],"disallowed"],[[2891,2893],"valid"],[[2894,2901],"disallowed"],[[2902,2903],"valid"],[[2904,2907],"disallowed"],[[2908,2908],"mapped",[2849,2876]],[[2909,2909],"mapped",[2850,2876]],[[2910,2910],"disallowed"],[[2911,2913],"valid"],[[2914,2915],"valid"],[[2916,2917],"disallowed"],[[2918,2927],"valid"],[[2928,2928],"valid",[],"NV8"],[[2929,2929],"valid"],[[2930,2935],"valid",[],"NV8"],[[2936,2945],"disallowed"],[[2946,2947],"valid"],[[2948,2948],"disallowed"],[[2949,2954],"valid"],[[2955,2957],"disallowed"],[[2958,2960],"valid"],[[2961,2961],"disallowed"],[[2962,2965],"valid"],[[2966,2968],"disallowed"],[[2969,2970],"valid"],[[2971,2971],"disallowed"],[[2972,2972],"valid"],[[2973,2973],"disallowed"],[[2974,2975],"valid"],[[2976,2978],"disallowed"],[[2979,2980],"valid"],[[2981,2983],"disallowed"],[[2984,2986],"valid"],[[2987,2989],"disallowed"],[[2990,2997],"valid"],[[2998,2998],"valid"],[[2999,3001],"valid"],[[3002,3005],"disallowed"],[[3006,3010],"valid"],[[3011,3013],"disallowed"],[[3014,3016],"valid"],[[3017,3017],"disallowed"],[[3018,3021],"valid"],[[3022,3023],"disallowed"],[[3024,3024],"valid"],[[3025,3030],"disallowed"],[[3031,3031],"valid"],[[3032,3045],"disallowed"],[[3046,3046],"valid"],[[3047,3055],"valid"],[[3056,3058],"valid",[],"NV8"],[[3059,3066],"valid",[],"NV8"],[[3067,3071],"disallowed"],[[3072,3072],"valid"],[[3073,3075],"valid"],[[3076,3076],"disallowed"],[[3077,3084],"valid"],[[3085,3085],"disallowed"],[[3086,3088],"valid"],[[3089,3089],"disallowed"],[[3090,3112],"valid"],[[3113,3113],"disallowed"],[[3114,3123],"valid"],[[3124,3124],"valid"],[[3125,3129],"valid"],[[3130,3132],"disallowed"],[[3133,3133],"valid"],[[3134,3140],"valid"],[[3141,3141],"disallowed"],[[3142,3144],"valid"],[[3145,3145],"disallowed"],[[3146,3149],"valid"],[[3150,3156],"disallowed"],[[3157,3158],"valid"],[[3159,3159],"disallowed"],[[3160,3161],"valid"],[[3162,3162],"valid"],[[3163,3167],"disallowed"],[[3168,3169],"valid"],[[3170,3171],"valid"],[[3172,3173],"disallowed"],[[3174,3183],"valid"],[[3184,3191],"disallowed"],[[3192,3199],"valid",[],"NV8"],[[3200,3200],"disallowed"],[[3201,3201],"valid"],[[3202,3203],"valid"],[[3204,3204],"disallowed"],[[3205,3212],"valid"],[[3213,3213],"disallowed"],[[3214,3216],"valid"],[[3217,3217],"disallowed"],[[3218,3240],"valid"],[[3241,3241],"disallowed"],[[3242,3251],"valid"],[[3252,3252],"disallowed"],[[3253,3257],"valid"],[[3258,3259],"disallowed"],[[3260,3261],"valid"],[[3262,3268],"valid"],[[3269,3269],"disallowed"],[[3270,3272],"valid"],[[3273,3273],"disallowed"],[[3274,3277],"valid"],[[3278,3284],"disallowed"],[[3285,3286],"valid"],[[3287,3293],"disallowed"],[[3294,3294],"valid"],[[3295,3295],"disallowed"],[[3296,3297],"valid"],[[3298,3299],"valid"],[[3300,3301],"disallowed"],[[3302,3311],"valid"],[[3312,3312],"disallowed"],[[3313,3314],"valid"],[[3315,3328],"disallowed"],[[3329,3329],"valid"],[[3330,3331],"valid"],[[3332,3332],"disallowed"],[[3333,3340],"valid"],[[3341,3341],"disallowed"],[[3342,3344],"valid"],[[3345,3345],"disallowed"],[[3346,3368],"valid"],[[3369,3369],"valid"],[[3370,3385],"valid"],[[3386,3386],"valid"],[[3387,3388],"disallowed"],[[3389,3389],"valid"],[[3390,3395],"valid"],[[3396,3396],"valid"],[[3397,3397],"disallowed"],[[3398,3400],"valid"],[[3401,3401],"disallowed"],[[3402,3405],"valid"],[[3406,3406],"valid"],[[3407,3414],"disallowed"],[[3415,3415],"valid"],[[3416,3422],"disallowed"],[[3423,3423],"valid"],[[3424,3425],"valid"],[[3426,3427],"valid"],[[3428,3429],"disallowed"],[[3430,3439],"valid"],[[3440,3445],"valid",[],"NV8"],[[3446,3448],"disallowed"],[[3449,3449],"valid",[],"NV8"],[[3450,3455],"valid"],[[3456,3457],"disallowed"],[[3458,3459],"valid"],[[3460,3460],"disallowed"],[[3461,3478],"valid"],[[3479,3481],"disallowed"],[[3482,3505],"valid"],[[3506,3506],"disallowed"],[[3507,3515],"valid"],[[3516,3516],"disallowed"],[[3517,3517],"valid"],[[3518,3519],"disallowed"],[[3520,3526],"valid"],[[3527,3529],"disallowed"],[[3530,3530],"valid"],[[3531,3534],"disallowed"],[[3535,3540],"valid"],[[3541,3541],"disallowed"],[[3542,3542],"valid"],[[3543,3543],"disallowed"],[[3544,3551],"valid"],[[3552,3557],"disallowed"],[[3558,3567],"valid"],[[3568,3569],"disallowed"],[[3570,3571],"valid"],[[3572,3572],"valid",[],"NV8"],[[3573,3584],"disallowed"],[[3585,3634],"valid"],[[3635,3635],"mapped",[3661,3634]],[[3636,3642],"valid"],[[3643,3646],"disallowed"],[[3647,3647],"valid",[],"NV8"],[[3648,3662],"valid"],[[3663,3663],"valid",[],"NV8"],[[3664,3673],"valid"],[[3674,3675],"valid",[],"NV8"],[[3676,3712],"disallowed"],[[3713,3714],"valid"],[[3715,3715],"disallowed"],[[3716,3716],"valid"],[[3717,3718],"disallowed"],[[3719,3720],"valid"],[[3721,3721],"disallowed"],[[3722,3722],"valid"],[[3723,3724],"disallowed"],[[3725,3725],"valid"],[[3726,3731],"disallowed"],[[3732,3735],"valid"],[[3736,3736],"disallowed"],[[3737,3743],"valid"],[[3744,3744],"disallowed"],[[3745,3747],"valid"],[[3748,3748],"disallowed"],[[3749,3749],"valid"],[[3750,3750],"disallowed"],[[3751,3751],"valid"],[[3752,3753],"disallowed"],[[3754,3755],"valid"],[[3756,3756],"disallowed"],[[3757,3762],"valid"],[[3763,3763],"mapped",[3789,3762]],[[3764,3769],"valid"],[[3770,3770],"disallowed"],[[3771,3773],"valid"],[[3774,3775],"disallowed"],[[3776,3780],"valid"],[[3781,3781],"disallowed"],[[3782,3782],"valid"],[[3783,3783],"disallowed"],[[3784,3789],"valid"],[[3790,3791],"disallowed"],[[3792,3801],"valid"],[[3802,3803],"disallowed"],[[3804,3804],"mapped",[3755,3737]],[[3805,3805],"mapped",[3755,3745]],[[3806,3807],"valid"],[[3808,3839],"disallowed"],[[3840,3840],"valid"],[[3841,3850],"valid",[],"NV8"],[[3851,3851],"valid"],[[3852,3852],"mapped",[3851]],[[3853,3863],"valid",[],"NV8"],[[3864,3865],"valid"],[[3866,3871],"valid",[],"NV8"],[[3872,3881],"valid"],[[3882,3892],"valid",[],"NV8"],[[3893,3893],"valid"],[[3894,3894],"valid",[],"NV8"],[[3895,3895],"valid"],[[3896,3896],"valid",[],"NV8"],[[3897,3897],"valid"],[[3898,3901],"valid",[],"NV8"],[[3902,3906],"valid"],[[3907,3907],"mapped",[3906,4023]],[[3908,3911],"valid"],[[3912,3912],"disallowed"],[[3913,3916],"valid"],[[3917,3917],"mapped",[3916,4023]],[[3918,3921],"valid"],[[3922,3922],"mapped",[3921,4023]],[[3923,3926],"valid"],[[3927,3927],"mapped",[3926,4023]],[[3928,3931],"valid"],[[3932,3932],"mapped",[3931,4023]],[[3933,3944],"valid"],[[3945,3945],"mapped",[3904,4021]],[[3946,3946],"valid"],[[3947,3948],"valid"],[[3949,3952],"disallowed"],[[3953,3954],"valid"],[[3955,3955],"mapped",[3953,3954]],[[3956,3956],"valid"],[[3957,3957],"mapped",[3953,3956]],[[3958,3958],"mapped",[4018,3968]],[[3959,3959],"mapped",[4018,3953,3968]],[[3960,3960],"mapped",[4019,3968]],[[3961,3961],"mapped",[4019,3953,3968]],[[3962,3968],"valid"],[[3969,3969],"mapped",[3953,3968]],[[3970,3972],"valid"],[[3973,3973],"valid",[],"NV8"],[[3974,3979],"valid"],[[3980,3983],"valid"],[[3984,3986],"valid"],[[3987,3987],"mapped",[3986,4023]],[[3988,3989],"valid"],[[3990,3990],"valid"],[[3991,3991],"valid"],[[3992,3992],"disallowed"],[[3993,3996],"valid"],[[3997,3997],"mapped",[3996,4023]],[[3998,4001],"valid"],[[4002,4002],"mapped",[4001,4023]],[[4003,4006],"valid"],[[4007,4007],"mapped",[4006,4023]],[[4008,4011],"valid"],[[4012,4012],"mapped",[4011,4023]],[[4013,4013],"valid"],[[4014,4016],"valid"],[[4017,4023],"valid"],[[4024,4024],"valid"],[[4025,4025],"mapped",[3984,4021]],[[4026,4028],"valid"],[[4029,4029],"disallowed"],[[4030,4037],"valid",[],"NV8"],[[4038,4038],"valid"],[[4039,4044],"valid",[],"NV8"],[[4045,4045],"disallowed"],[[4046,4046],"valid",[],"NV8"],[[4047,4047],"valid",[],"NV8"],[[4048,4049],"valid",[],"NV8"],[[4050,4052],"valid",[],"NV8"],[[4053,4056],"valid",[],"NV8"],[[4057,4058],"valid",[],"NV8"],[[4059,4095],"disallowed"],[[4096,4129],"valid"],[[4130,4130],"valid"],[[4131,4135],"valid"],[[4136,4136],"valid"],[[4137,4138],"valid"],[[4139,4139],"valid"],[[4140,4146],"valid"],[[4147,4149],"valid"],[[4150,4153],"valid"],[[4154,4159],"valid"],[[4160,4169],"valid"],[[4170,4175],"valid",[],"NV8"],[[4176,4185],"valid"],[[4186,4249],"valid"],[[4250,4253],"valid"],[[4254,4255],"valid",[],"NV8"],[[4256,4293],"disallowed"],[[4294,4294],"disallowed"],[[4295,4295],"mapped",[11559]],[[4296,4300],"disallowed"],[[4301,4301],"mapped",[11565]],[[4302,4303],"disallowed"],[[4304,4342],"valid"],[[4343,4344],"valid"],[[4345,4346],"valid"],[[4347,4347],"valid",[],"NV8"],[[4348,4348],"mapped",[4316]],[[4349,4351],"valid"],[[4352,4441],"valid",[],"NV8"],[[4442,4446],"valid",[],"NV8"],[[4447,4448],"disallowed"],[[4449,4514],"valid",[],"NV8"],[[4515,4519],"valid",[],"NV8"],[[4520,4601],"valid",[],"NV8"],[[4602,4607],"valid",[],"NV8"],[[4608,4614],"valid"],[[4615,4615],"valid"],[[4616,4678],"valid"],[[4679,4679],"valid"],[[4680,4680],"valid"],[[4681,4681],"disallowed"],[[4682,4685],"valid"],[[4686,4687],"disallowed"],[[4688,4694],"valid"],[[4695,4695],"disallowed"],[[4696,4696],"valid"],[[4697,4697],"disallowed"],[[4698,4701],"valid"],[[4702,4703],"disallowed"],[[4704,4742],"valid"],[[4743,4743],"valid"],[[4744,4744],"valid"],[[4745,4745],"disallowed"],[[4746,4749],"valid"],[[4750,4751],"disallowed"],[[4752,4782],"valid"],[[4783,4783],"valid"],[[4784,4784],"valid"],[[4785,4785],"disallowed"],[[4786,4789],"valid"],[[4790,4791],"disallowed"],[[4792,4798],"valid"],[[4799,4799],"disallowed"],[[4800,4800],"valid"],[[4801,4801],"disallowed"],[[4802,4805],"valid"],[[4806,4807],"disallowed"],[[4808,4814],"valid"],[[4815,4815],"valid"],[[4816,4822],"valid"],[[4823,4823],"disallowed"],[[4824,4846],"valid"],[[4847,4847],"valid"],[[4848,4878],"valid"],[[4879,4879],"valid"],[[4880,4880],"valid"],[[4881,4881],"disallowed"],[[4882,4885],"valid"],[[4886,4887],"disallowed"],[[4888,4894],"valid"],[[4895,4895],"valid"],[[4896,4934],"valid"],[[4935,4935],"valid"],[[4936,4954],"valid"],[[4955,4956],"disallowed"],[[4957,4958],"valid"],[[4959,4959],"valid"],[[4960,4960],"valid",[],"NV8"],[[4961,4988],"valid",[],"NV8"],[[4989,4991],"disallowed"],[[4992,5007],"valid"],[[5008,5017],"valid",[],"NV8"],[[5018,5023],"disallowed"],[[5024,5108],"valid"],[[5109,5109],"valid"],[[5110,5111],"disallowed"],[[5112,5112],"mapped",[5104]],[[5113,5113],"mapped",[5105]],[[5114,5114],"mapped",[5106]],[[5115,5115],"mapped",[5107]],[[5116,5116],"mapped",[5108]],[[5117,5117],"mapped",[5109]],[[5118,5119],"disallowed"],[[5120,5120],"valid",[],"NV8"],[[5121,5740],"valid"],[[5741,5742],"valid",[],"NV8"],[[5743,5750],"valid"],[[5751,5759],"valid"],[[5760,5760],"disallowed"],[[5761,5786],"valid"],[[5787,5788],"valid",[],"NV8"],[[5789,5791],"disallowed"],[[5792,5866],"valid"],[[5867,5872],"valid",[],"NV8"],[[5873,5880],"valid"],[[5881,5887],"disallowed"],[[5888,5900],"valid"],[[5901,5901],"disallowed"],[[5902,5908],"valid"],[[5909,5919],"disallowed"],[[5920,5940],"valid"],[[5941,5942],"valid",[],"NV8"],[[5943,5951],"disallowed"],[[5952,5971],"valid"],[[5972,5983],"disallowed"],[[5984,5996],"valid"],[[5997,5997],"disallowed"],[[5998,6e3],"valid"],[[6001,6001],"disallowed"],[[6002,6003],"valid"],[[6004,6015],"disallowed"],[[6016,6067],"valid"],[[6068,6069],"disallowed"],[[6070,6099],"valid"],[[6100,6102],"valid",[],"NV8"],[[6103,6103],"valid"],[[6104,6107],"valid",[],"NV8"],[[6108,6108],"valid"],[[6109,6109],"valid"],[[6110,6111],"disallowed"],[[6112,6121],"valid"],[[6122,6127],"disallowed"],[[6128,6137],"valid",[],"NV8"],[[6138,6143],"disallowed"],[[6144,6149],"valid",[],"NV8"],[[6150,6150],"disallowed"],[[6151,6154],"valid",[],"NV8"],[[6155,6157],"ignored"],[[6158,6158],"disallowed"],[[6159,6159],"disallowed"],[[6160,6169],"valid"],[[6170,6175],"disallowed"],[[6176,6263],"valid"],[[6264,6271],"disallowed"],[[6272,6313],"valid"],[[6314,6314],"valid"],[[6315,6319],"disallowed"],[[6320,6389],"valid"],[[6390,6399],"disallowed"],[[6400,6428],"valid"],[[6429,6430],"valid"],[[6431,6431],"disallowed"],[[6432,6443],"valid"],[[6444,6447],"disallowed"],[[6448,6459],"valid"],[[6460,6463],"disallowed"],[[6464,6464],"valid",[],"NV8"],[[6465,6467],"disallowed"],[[6468,6469],"valid",[],"NV8"],[[6470,6509],"valid"],[[6510,6511],"disallowed"],[[6512,6516],"valid"],[[6517,6527],"disallowed"],[[6528,6569],"valid"],[[6570,6571],"valid"],[[6572,6575],"disallowed"],[[6576,6601],"valid"],[[6602,6607],"disallowed"],[[6608,6617],"valid"],[[6618,6618],"valid",[],"XV8"],[[6619,6621],"disallowed"],[[6622,6623],"valid",[],"NV8"],[[6624,6655],"valid",[],"NV8"],[[6656,6683],"valid"],[[6684,6685],"disallowed"],[[6686,6687],"valid",[],"NV8"],[[6688,6750],"valid"],[[6751,6751],"disallowed"],[[6752,6780],"valid"],[[6781,6782],"disallowed"],[[6783,6793],"valid"],[[6794,6799],"disallowed"],[[6800,6809],"valid"],[[6810,6815],"disallowed"],[[6816,6822],"valid",[],"NV8"],[[6823,6823],"valid"],[[6824,6829],"valid",[],"NV8"],[[6830,6831],"disallowed"],[[6832,6845],"valid"],[[6846,6846],"valid",[],"NV8"],[[6847,6911],"disallowed"],[[6912,6987],"valid"],[[6988,6991],"disallowed"],[[6992,7001],"valid"],[[7002,7018],"valid",[],"NV8"],[[7019,7027],"valid"],[[7028,7036],"valid",[],"NV8"],[[7037,7039],"disallowed"],[[7040,7082],"valid"],[[7083,7085],"valid"],[[7086,7097],"valid"],[[7098,7103],"valid"],[[7104,7155],"valid"],[[7156,7163],"disallowed"],[[7164,7167],"valid",[],"NV8"],[[7168,7223],"valid"],[[7224,7226],"disallowed"],[[7227,7231],"valid",[],"NV8"],[[7232,7241],"valid"],[[7242,7244],"disallowed"],[[7245,7293],"valid"],[[7294,7295],"valid",[],"NV8"],[[7296,7359],"disallowed"],[[7360,7367],"valid",[],"NV8"],[[7368,7375],"disallowed"],[[7376,7378],"valid"],[[7379,7379],"valid",[],"NV8"],[[7380,7410],"valid"],[[7411,7414],"valid"],[[7415,7415],"disallowed"],[[7416,7417],"valid"],[[7418,7423],"disallowed"],[[7424,7467],"valid"],[[7468,7468],"mapped",[97]],[[7469,7469],"mapped",[230]],[[7470,7470],"mapped",[98]],[[7471,7471],"valid"],[[7472,7472],"mapped",[100]],[[7473,7473],"mapped",[101]],[[7474,7474],"mapped",[477]],[[7475,7475],"mapped",[103]],[[7476,7476],"mapped",[104]],[[7477,7477],"mapped",[105]],[[7478,7478],"mapped",[106]],[[7479,7479],"mapped",[107]],[[7480,7480],"mapped",[108]],[[7481,7481],"mapped",[109]],[[7482,7482],"mapped",[110]],[[7483,7483],"valid"],[[7484,7484],"mapped",[111]],[[7485,7485],"mapped",[547]],[[7486,7486],"mapped",[112]],[[7487,7487],"mapped",[114]],[[7488,7488],"mapped",[116]],[[7489,7489],"mapped",[117]],[[7490,7490],"mapped",[119]],[[7491,7491],"mapped",[97]],[[7492,7492],"mapped",[592]],[[7493,7493],"mapped",[593]],[[7494,7494],"mapped",[7426]],[[7495,7495],"mapped",[98]],[[7496,7496],"mapped",[100]],[[7497,7497],"mapped",[101]],[[7498,7498],"mapped",[601]],[[7499,7499],"mapped",[603]],[[7500,7500],"mapped",[604]],[[7501,7501],"mapped",[103]],[[7502,7502],"valid"],[[7503,7503],"mapped",[107]],[[7504,7504],"mapped",[109]],[[7505,7505],"mapped",[331]],[[7506,7506],"mapped",[111]],[[7507,7507],"mapped",[596]],[[7508,7508],"mapped",[7446]],[[7509,7509],"mapped",[7447]],[[7510,7510],"mapped",[112]],[[7511,7511],"mapped",[116]],[[7512,7512],"mapped",[117]],[[7513,7513],"mapped",[7453]],[[7514,7514],"mapped",[623]],[[7515,7515],"mapped",[118]],[[7516,7516],"mapped",[7461]],[[7517,7517],"mapped",[946]],[[7518,7518],"mapped",[947]],[[7519,7519],"mapped",[948]],[[7520,7520],"mapped",[966]],[[7521,7521],"mapped",[967]],[[7522,7522],"mapped",[105]],[[7523,7523],"mapped",[114]],[[7524,7524],"mapped",[117]],[[7525,7525],"mapped",[118]],[[7526,7526],"mapped",[946]],[[7527,7527],"mapped",[947]],[[7528,7528],"mapped",[961]],[[7529,7529],"mapped",[966]],[[7530,7530],"mapped",[967]],[[7531,7531],"valid"],[[7532,7543],"valid"],[[7544,7544],"mapped",[1085]],[[7545,7578],"valid"],[[7579,7579],"mapped",[594]],[[7580,7580],"mapped",[99]],[[7581,7581],"mapped",[597]],[[7582,7582],"mapped",[240]],[[7583,7583],"mapped",[604]],[[7584,7584],"mapped",[102]],[[7585,7585],"mapped",[607]],[[7586,7586],"mapped",[609]],[[7587,7587],"mapped",[613]],[[7588,7588],"mapped",[616]],[[7589,7589],"mapped",[617]],[[7590,7590],"mapped",[618]],[[7591,7591],"mapped",[7547]],[[7592,7592],"mapped",[669]],[[7593,7593],"mapped",[621]],[[7594,7594],"mapped",[7557]],[[7595,7595],"mapped",[671]],[[7596,7596],"mapped",[625]],[[7597,7597],"mapped",[624]],[[7598,7598],"mapped",[626]],[[7599,7599],"mapped",[627]],[[7600,7600],"mapped",[628]],[[7601,7601],"mapped",[629]],[[7602,7602],"mapped",[632]],[[7603,7603],"mapped",[642]],[[7604,7604],"mapped",[643]],[[7605,7605],"mapped",[427]],[[7606,7606],"mapped",[649]],[[7607,7607],"mapped",[650]],[[7608,7608],"mapped",[7452]],[[7609,7609],"mapped",[651]],[[7610,7610],"mapped",[652]],[[7611,7611],"mapped",[122]],[[7612,7612],"mapped",[656]],[[7613,7613],"mapped",[657]],[[7614,7614],"mapped",[658]],[[7615,7615],"mapped",[952]],[[7616,7619],"valid"],[[7620,7626],"valid"],[[7627,7654],"valid"],[[7655,7669],"valid"],[[7670,7675],"disallowed"],[[7676,7676],"valid"],[[7677,7677],"valid"],[[7678,7679],"valid"],[[7680,7680],"mapped",[7681]],[[7681,7681],"valid"],[[7682,7682],"mapped",[7683]],[[7683,7683],"valid"],[[7684,7684],"mapped",[7685]],[[7685,7685],"valid"],[[7686,7686],"mapped",[7687]],[[7687,7687],"valid"],[[7688,7688],"mapped",[7689]],[[7689,7689],"valid"],[[7690,7690],"mapped",[7691]],[[7691,7691],"valid"],[[7692,7692],"mapped",[7693]],[[7693,7693],"valid"],[[7694,7694],"mapped",[7695]],[[7695,7695],"valid"],[[7696,7696],"mapped",[7697]],[[7697,7697],"valid"],[[7698,7698],"mapped",[7699]],[[7699,7699],"valid"],[[7700,7700],"mapped",[7701]],[[7701,7701],"valid"],[[7702,7702],"mapped",[7703]],[[7703,7703],"valid"],[[7704,7704],"mapped",[7705]],[[7705,7705],"valid"],[[7706,7706],"mapped",[7707]],[[7707,7707],"valid"],[[7708,7708],"mapped",[7709]],[[7709,7709],"valid"],[[7710,7710],"mapped",[7711]],[[7711,7711],"valid"],[[7712,7712],"mapped",[7713]],[[7713,7713],"valid"],[[7714,7714],"mapped",[7715]],[[7715,7715],"valid"],[[7716,7716],"mapped",[7717]],[[7717,7717],"valid"],[[7718,7718],"mapped",[7719]],[[7719,7719],"valid"],[[7720,7720],"mapped",[7721]],[[7721,7721],"valid"],[[7722,7722],"mapped",[7723]],[[7723,7723],"valid"],[[7724,7724],"mapped",[7725]],[[7725,7725],"valid"],[[7726,7726],"mapped",[7727]],[[7727,7727],"valid"],[[7728,7728],"mapped",[7729]],[[7729,7729],"valid"],[[7730,7730],"mapped",[7731]],[[7731,7731],"valid"],[[7732,7732],"mapped",[7733]],[[7733,7733],"valid"],[[7734,7734],"mapped",[7735]],[[7735,7735],"valid"],[[7736,7736],"mapped",[7737]],[[7737,7737],"valid"],[[7738,7738],"mapped",[7739]],[[7739,7739],"valid"],[[7740,7740],"mapped",[7741]],[[7741,7741],"valid"],[[7742,7742],"mapped",[7743]],[[7743,7743],"valid"],[[7744,7744],"mapped",[7745]],[[7745,7745],"valid"],[[7746,7746],"mapped",[7747]],[[7747,7747],"valid"],[[7748,7748],"mapped",[7749]],[[7749,7749],"valid"],[[7750,7750],"mapped",[7751]],[[7751,7751],"valid"],[[7752,7752],"mapped",[7753]],[[7753,7753],"valid"],[[7754,7754],"mapped",[7755]],[[7755,7755],"valid"],[[7756,7756],"mapped",[7757]],[[7757,7757],"valid"],[[7758,7758],"mapped",[7759]],[[7759,7759],"valid"],[[7760,7760],"mapped",[7761]],[[7761,7761],"valid"],[[7762,7762],"mapped",[7763]],[[7763,7763],"valid"],[[7764,7764],"mapped",[7765]],[[7765,7765],"valid"],[[7766,7766],"mapped",[7767]],[[7767,7767],"valid"],[[7768,7768],"mapped",[7769]],[[7769,7769],"valid"],[[7770,7770],"mapped",[7771]],[[7771,7771],"valid"],[[7772,7772],"mapped",[7773]],[[7773,7773],"valid"],[[7774,7774],"mapped",[7775]],[[7775,7775],"valid"],[[7776,7776],"mapped",[7777]],[[7777,7777],"valid"],[[7778,7778],"mapped",[7779]],[[7779,7779],"valid"],[[7780,7780],"mapped",[7781]],[[7781,7781],"valid"],[[7782,7782],"mapped",[7783]],[[7783,7783],"valid"],[[7784,7784],"mapped",[7785]],[[7785,7785],"valid"],[[7786,7786],"mapped",[7787]],[[7787,7787],"valid"],[[7788,7788],"mapped",[7789]],[[7789,7789],"valid"],[[7790,7790],"mapped",[7791]],[[7791,7791],"valid"],[[7792,7792],"mapped",[7793]],[[7793,7793],"valid"],[[7794,7794],"mapped",[7795]],[[7795,7795],"valid"],[[7796,7796],"mapped",[7797]],[[7797,7797],"valid"],[[7798,7798],"mapped",[7799]],[[7799,7799],"valid"],[[7800,7800],"mapped",[7801]],[[7801,7801],"valid"],[[7802,7802],"mapped",[7803]],[[7803,7803],"valid"],[[7804,7804],"mapped",[7805]],[[7805,7805],"valid"],[[7806,7806],"mapped",[7807]],[[7807,7807],"valid"],[[7808,7808],"mapped",[7809]],[[7809,7809],"valid"],[[7810,7810],"mapped",[7811]],[[7811,7811],"valid"],[[7812,7812],"mapped",[7813]],[[7813,7813],"valid"],[[7814,7814],"mapped",[7815]],[[7815,7815],"valid"],[[7816,7816],"mapped",[7817]],[[7817,7817],"valid"],[[7818,7818],"mapped",[7819]],[[7819,7819],"valid"],[[7820,7820],"mapped",[7821]],[[7821,7821],"valid"],[[7822,7822],"mapped",[7823]],[[7823,7823],"valid"],[[7824,7824],"mapped",[7825]],[[7825,7825],"valid"],[[7826,7826],"mapped",[7827]],[[7827,7827],"valid"],[[7828,7828],"mapped",[7829]],[[7829,7833],"valid"],[[7834,7834],"mapped",[97,702]],[[7835,7835],"mapped",[7777]],[[7836,7837],"valid"],[[7838,7838],"mapped",[115,115]],[[7839,7839],"valid"],[[7840,7840],"mapped",[7841]],[[7841,7841],"valid"],[[7842,7842],"mapped",[7843]],[[7843,7843],"valid"],[[7844,7844],"mapped",[7845]],[[7845,7845],"valid"],[[7846,7846],"mapped",[7847]],[[7847,7847],"valid"],[[7848,7848],"mapped",[7849]],[[7849,7849],"valid"],[[7850,7850],"mapped",[7851]],[[7851,7851],"valid"],[[7852,7852],"mapped",[7853]],[[7853,7853],"valid"],[[7854,7854],"mapped",[7855]],[[7855,7855],"valid"],[[7856,7856],"mapped",[7857]],[[7857,7857],"valid"],[[7858,7858],"mapped",[7859]],[[7859,7859],"valid"],[[7860,7860],"mapped",[7861]],[[7861,7861],"valid"],[[7862,7862],"mapped",[7863]],[[7863,7863],"valid"],[[7864,7864],"mapped",[7865]],[[7865,7865],"valid"],[[7866,7866],"mapped",[7867]],[[7867,7867],"valid"],[[7868,7868],"mapped",[7869]],[[7869,7869],"valid"],[[7870,7870],"mapped",[7871]],[[7871,7871],"valid"],[[7872,7872],"mapped",[7873]],[[7873,7873],"valid"],[[7874,7874],"mapped",[7875]],[[7875,7875],"valid"],[[7876,7876],"mapped",[7877]],[[7877,7877],"valid"],[[7878,7878],"mapped",[7879]],[[7879,7879],"valid"],[[7880,7880],"mapped",[7881]],[[7881,7881],"valid"],[[7882,7882],"mapped",[7883]],[[7883,7883],"valid"],[[7884,7884],"mapped",[7885]],[[7885,7885],"valid"],[[7886,7886],"mapped",[7887]],[[7887,7887],"valid"],[[7888,7888],"mapped",[7889]],[[7889,7889],"valid"],[[7890,7890],"mapped",[7891]],[[7891,7891],"valid"],[[7892,7892],"mapped",[7893]],[[7893,7893],"valid"],[[7894,7894],"mapped",[7895]],[[7895,7895],"valid"],[[7896,7896],"mapped",[7897]],[[7897,7897],"valid"],[[7898,7898],"mapped",[7899]],[[7899,7899],"valid"],[[7900,7900],"mapped",[7901]],[[7901,7901],"valid"],[[7902,7902],"mapped",[7903]],[[7903,7903],"valid"],[[7904,7904],"mapped",[7905]],[[7905,7905],"valid"],[[7906,7906],"mapped",[7907]],[[7907,7907],"valid"],[[7908,7908],"mapped",[7909]],[[7909,7909],"valid"],[[7910,7910],"mapped",[7911]],[[7911,7911],"valid"],[[7912,7912],"mapped",[7913]],[[7913,7913],"valid"],[[7914,7914],"mapped",[7915]],[[7915,7915],"valid"],[[7916,7916],"mapped",[7917]],[[7917,7917],"valid"],[[7918,7918],"mapped",[7919]],[[7919,7919],"valid"],[[7920,7920],"mapped",[7921]],[[7921,7921],"valid"],[[7922,7922],"mapped",[7923]],[[7923,7923],"valid"],[[7924,7924],"mapped",[7925]],[[7925,7925],"valid"],[[7926,7926],"mapped",[7927]],[[7927,7927],"valid"],[[7928,7928],"mapped",[7929]],[[7929,7929],"valid"],[[7930,7930],"mapped",[7931]],[[7931,7931],"valid"],[[7932,7932],"mapped",[7933]],[[7933,7933],"valid"],[[7934,7934],"mapped",[7935]],[[7935,7935],"valid"],[[7936,7943],"valid"],[[7944,7944],"mapped",[7936]],[[7945,7945],"mapped",[7937]],[[7946,7946],"mapped",[7938]],[[7947,7947],"mapped",[7939]],[[7948,7948],"mapped",[7940]],[[7949,7949],"mapped",[7941]],[[7950,7950],"mapped",[7942]],[[7951,7951],"mapped",[7943]],[[7952,7957],"valid"],[[7958,7959],"disallowed"],[[7960,7960],"mapped",[7952]],[[7961,7961],"mapped",[7953]],[[7962,7962],"mapped",[7954]],[[7963,7963],"mapped",[7955]],[[7964,7964],"mapped",[7956]],[[7965,7965],"mapped",[7957]],[[7966,7967],"disallowed"],[[7968,7975],"valid"],[[7976,7976],"mapped",[7968]],[[7977,7977],"mapped",[7969]],[[7978,7978],"mapped",[7970]],[[7979,7979],"mapped",[7971]],[[7980,7980],"mapped",[7972]],[[7981,7981],"mapped",[7973]],[[7982,7982],"mapped",[7974]],[[7983,7983],"mapped",[7975]],[[7984,7991],"valid"],[[7992,7992],"mapped",[7984]],[[7993,7993],"mapped",[7985]],[[7994,7994],"mapped",[7986]],[[7995,7995],"mapped",[7987]],[[7996,7996],"mapped",[7988]],[[7997,7997],"mapped",[7989]],[[7998,7998],"mapped",[7990]],[[7999,7999],"mapped",[7991]],[[8e3,8005],"valid"],[[8006,8007],"disallowed"],[[8008,8008],"mapped",[8e3]],[[8009,8009],"mapped",[8001]],[[8010,8010],"mapped",[8002]],[[8011,8011],"mapped",[8003]],[[8012,8012],"mapped",[8004]],[[8013,8013],"mapped",[8005]],[[8014,8015],"disallowed"],[[8016,8023],"valid"],[[8024,8024],"disallowed"],[[8025,8025],"mapped",[8017]],[[8026,8026],"disallowed"],[[8027,8027],"mapped",[8019]],[[8028,8028],"disallowed"],[[8029,8029],"mapped",[8021]],[[8030,8030],"disallowed"],[[8031,8031],"mapped",[8023]],[[8032,8039],"valid"],[[8040,8040],"mapped",[8032]],[[8041,8041],"mapped",[8033]],[[8042,8042],"mapped",[8034]],[[8043,8043],"mapped",[8035]],[[8044,8044],"mapped",[8036]],[[8045,8045],"mapped",[8037]],[[8046,8046],"mapped",[8038]],[[8047,8047],"mapped",[8039]],[[8048,8048],"valid"],[[8049,8049],"mapped",[940]],[[8050,8050],"valid"],[[8051,8051],"mapped",[941]],[[8052,8052],"valid"],[[8053,8053],"mapped",[942]],[[8054,8054],"valid"],[[8055,8055],"mapped",[943]],[[8056,8056],"valid"],[[8057,8057],"mapped",[972]],[[8058,8058],"valid"],[[8059,8059],"mapped",[973]],[[8060,8060],"valid"],[[8061,8061],"mapped",[974]],[[8062,8063],"disallowed"],[[8064,8064],"mapped",[7936,953]],[[8065,8065],"mapped",[7937,953]],[[8066,8066],"mapped",[7938,953]],[[8067,8067],"mapped",[7939,953]],[[8068,8068],"mapped",[7940,953]],[[8069,8069],"mapped",[7941,953]],[[8070,8070],"mapped",[7942,953]],[[8071,8071],"mapped",[7943,953]],[[8072,8072],"mapped",[7936,953]],[[8073,8073],"mapped",[7937,953]],[[8074,8074],"mapped",[7938,953]],[[8075,8075],"mapped",[7939,953]],[[8076,8076],"mapped",[7940,953]],[[8077,8077],"mapped",[7941,953]],[[8078,8078],"mapped",[7942,953]],[[8079,8079],"mapped",[7943,953]],[[8080,8080],"mapped",[7968,953]],[[8081,8081],"mapped",[7969,953]],[[8082,8082],"mapped",[7970,953]],[[8083,8083],"mapped",[7971,953]],[[8084,8084],"mapped",[7972,953]],[[8085,8085],"mapped",[7973,953]],[[8086,8086],"mapped",[7974,953]],[[8087,8087],"mapped",[7975,953]],[[8088,8088],"mapped",[7968,953]],[[8089,8089],"mapped",[7969,953]],[[8090,8090],"mapped",[7970,953]],[[8091,8091],"mapped",[7971,953]],[[8092,8092],"mapped",[7972,953]],[[8093,8093],"mapped",[7973,953]],[[8094,8094],"mapped",[7974,953]],[[8095,8095],"mapped",[7975,953]],[[8096,8096],"mapped",[8032,953]],[[8097,8097],"mapped",[8033,953]],[[8098,8098],"mapped",[8034,953]],[[8099,8099],"mapped",[8035,953]],[[8100,8100],"mapped",[8036,953]],[[8101,8101],"mapped",[8037,953]],[[8102,8102],"mapped",[8038,953]],[[8103,8103],"mapped",[8039,953]],[[8104,8104],"mapped",[8032,953]],[[8105,8105],"mapped",[8033,953]],[[8106,8106],"mapped",[8034,953]],[[8107,8107],"mapped",[8035,953]],[[8108,8108],"mapped",[8036,953]],[[8109,8109],"mapped",[8037,953]],[[8110,8110],"mapped",[8038,953]],[[8111,8111],"mapped",[8039,953]],[[8112,8113],"valid"],[[8114,8114],"mapped",[8048,953]],[[8115,8115],"mapped",[945,953]],[[8116,8116],"mapped",[940,953]],[[8117,8117],"disallowed"],[[8118,8118],"valid"],[[8119,8119],"mapped",[8118,953]],[[8120,8120],"mapped",[8112]],[[8121,8121],"mapped",[8113]],[[8122,8122],"mapped",[8048]],[[8123,8123],"mapped",[940]],[[8124,8124],"mapped",[945,953]],[[8125,8125],"disallowed_STD3_mapped",[32,787]],[[8126,8126],"mapped",[953]],[[8127,8127],"disallowed_STD3_mapped",[32,787]],[[8128,8128],"disallowed_STD3_mapped",[32,834]],[[8129,8129],"disallowed_STD3_mapped",[32,776,834]],[[8130,8130],"mapped",[8052,953]],[[8131,8131],"mapped",[951,953]],[[8132,8132],"mapped",[942,953]],[[8133,8133],"disallowed"],[[8134,8134],"valid"],[[8135,8135],"mapped",[8134,953]],[[8136,8136],"mapped",[8050]],[[8137,8137],"mapped",[941]],[[8138,8138],"mapped",[8052]],[[8139,8139],"mapped",[942]],[[8140,8140],"mapped",[951,953]],[[8141,8141],"disallowed_STD3_mapped",[32,787,768]],[[8142,8142],"disallowed_STD3_mapped",[32,787,769]],[[8143,8143],"disallowed_STD3_mapped",[32,787,834]],[[8144,8146],"valid"],[[8147,8147],"mapped",[912]],[[8148,8149],"disallowed"],[[8150,8151],"valid"],[[8152,8152],"mapped",[8144]],[[8153,8153],"mapped",[8145]],[[8154,8154],"mapped",[8054]],[[8155,8155],"mapped",[943]],[[8156,8156],"disallowed"],[[8157,8157],"disallowed_STD3_mapped",[32,788,768]],[[8158,8158],"disallowed_STD3_mapped",[32,788,769]],[[8159,8159],"disallowed_STD3_mapped",[32,788,834]],[[8160,8162],"valid"],[[8163,8163],"mapped",[944]],[[8164,8167],"valid"],[[8168,8168],"mapped",[8160]],[[8169,8169],"mapped",[8161]],[[8170,8170],"mapped",[8058]],[[8171,8171],"mapped",[973]],[[8172,8172],"mapped",[8165]],[[8173,8173],"disallowed_STD3_mapped",[32,776,768]],[[8174,8174],"disallowed_STD3_mapped",[32,776,769]],[[8175,8175],"disallowed_STD3_mapped",[96]],[[8176,8177],"disallowed"],[[8178,8178],"mapped",[8060,953]],[[8179,8179],"mapped",[969,953]],[[8180,8180],"mapped",[974,953]],[[8181,8181],"disallowed"],[[8182,8182],"valid"],[[8183,8183],"mapped",[8182,953]],[[8184,8184],"mapped",[8056]],[[8185,8185],"mapped",[972]],[[8186,8186],"mapped",[8060]],[[8187,8187],"mapped",[974]],[[8188,8188],"mapped",[969,953]],[[8189,8189],"disallowed_STD3_mapped",[32,769]],[[8190,8190],"disallowed_STD3_mapped",[32,788]],[[8191,8191],"disallowed"],[[8192,8202],"disallowed_STD3_mapped",[32]],[[8203,8203],"ignored"],[[8204,8205],"deviation",[]],[[8206,8207],"disallowed"],[[8208,8208],"valid",[],"NV8"],[[8209,8209],"mapped",[8208]],[[8210,8214],"valid",[],"NV8"],[[8215,8215],"disallowed_STD3_mapped",[32,819]],[[8216,8227],"valid",[],"NV8"],[[8228,8230],"disallowed"],[[8231,8231],"valid",[],"NV8"],[[8232,8238],"disallowed"],[[8239,8239],"disallowed_STD3_mapped",[32]],[[8240,8242],"valid",[],"NV8"],[[8243,8243],"mapped",[8242,8242]],[[8244,8244],"mapped",[8242,8242,8242]],[[8245,8245],"valid",[],"NV8"],[[8246,8246],"mapped",[8245,8245]],[[8247,8247],"mapped",[8245,8245,8245]],[[8248,8251],"valid",[],"NV8"],[[8252,8252],"disallowed_STD3_mapped",[33,33]],[[8253,8253],"valid",[],"NV8"],[[8254,8254],"disallowed_STD3_mapped",[32,773]],[[8255,8262],"valid",[],"NV8"],[[8263,8263],"disallowed_STD3_mapped",[63,63]],[[8264,8264],"disallowed_STD3_mapped",[63,33]],[[8265,8265],"disallowed_STD3_mapped",[33,63]],[[8266,8269],"valid",[],"NV8"],[[8270,8274],"valid",[],"NV8"],[[8275,8276],"valid",[],"NV8"],[[8277,8278],"valid",[],"NV8"],[[8279,8279],"mapped",[8242,8242,8242,8242]],[[8280,8286],"valid",[],"NV8"],[[8287,8287],"disallowed_STD3_mapped",[32]],[[8288,8288],"ignored"],[[8289,8291],"disallowed"],[[8292,8292],"ignored"],[[8293,8293],"disallowed"],[[8294,8297],"disallowed"],[[8298,8303],"disallowed"],[[8304,8304],"mapped",[48]],[[8305,8305],"mapped",[105]],[[8306,8307],"disallowed"],[[8308,8308],"mapped",[52]],[[8309,8309],"mapped",[53]],[[8310,8310],"mapped",[54]],[[8311,8311],"mapped",[55]],[[8312,8312],"mapped",[56]],[[8313,8313],"mapped",[57]],[[8314,8314],"disallowed_STD3_mapped",[43]],[[8315,8315],"mapped",[8722]],[[8316,8316],"disallowed_STD3_mapped",[61]],[[8317,8317],"disallowed_STD3_mapped",[40]],[[8318,8318],"disallowed_STD3_mapped",[41]],[[8319,8319],"mapped",[110]],[[8320,8320],"mapped",[48]],[[8321,8321],"mapped",[49]],[[8322,8322],"mapped",[50]],[[8323,8323],"mapped",[51]],[[8324,8324],"mapped",[52]],[[8325,8325],"mapped",[53]],[[8326,8326],"mapped",[54]],[[8327,8327],"mapped",[55]],[[8328,8328],"mapped",[56]],[[8329,8329],"mapped",[57]],[[8330,8330],"disallowed_STD3_mapped",[43]],[[8331,8331],"mapped",[8722]],[[8332,8332],"disallowed_STD3_mapped",[61]],[[8333,8333],"disallowed_STD3_mapped",[40]],[[8334,8334],"disallowed_STD3_mapped",[41]],[[8335,8335],"disallowed"],[[8336,8336],"mapped",[97]],[[8337,8337],"mapped",[101]],[[8338,8338],"mapped",[111]],[[8339,8339],"mapped",[120]],[[8340,8340],"mapped",[601]],[[8341,8341],"mapped",[104]],[[8342,8342],"mapped",[107]],[[8343,8343],"mapped",[108]],[[8344,8344],"mapped",[109]],[[8345,8345],"mapped",[110]],[[8346,8346],"mapped",[112]],[[8347,8347],"mapped",[115]],[[8348,8348],"mapped",[116]],[[8349,8351],"disallowed"],[[8352,8359],"valid",[],"NV8"],[[8360,8360],"mapped",[114,115]],[[8361,8362],"valid",[],"NV8"],[[8363,8363],"valid",[],"NV8"],[[8364,8364],"valid",[],"NV8"],[[8365,8367],"valid",[],"NV8"],[[8368,8369],"valid",[],"NV8"],[[8370,8373],"valid",[],"NV8"],[[8374,8376],"valid",[],"NV8"],[[8377,8377],"valid",[],"NV8"],[[8378,8378],"valid",[],"NV8"],[[8379,8381],"valid",[],"NV8"],[[8382,8382],"valid",[],"NV8"],[[8383,8399],"disallowed"],[[8400,8417],"valid",[],"NV8"],[[8418,8419],"valid",[],"NV8"],[[8420,8426],"valid",[],"NV8"],[[8427,8427],"valid",[],"NV8"],[[8428,8431],"valid",[],"NV8"],[[8432,8432],"valid",[],"NV8"],[[8433,8447],"disallowed"],[[8448,8448],"disallowed_STD3_mapped",[97,47,99]],[[8449,8449],"disallowed_STD3_mapped",[97,47,115]],[[8450,8450],"mapped",[99]],[[8451,8451],"mapped",[176,99]],[[8452,8452],"valid",[],"NV8"],[[8453,8453],"disallowed_STD3_mapped",[99,47,111]],[[8454,8454],"disallowed_STD3_mapped",[99,47,117]],[[8455,8455],"mapped",[603]],[[8456,8456],"valid",[],"NV8"],[[8457,8457],"mapped",[176,102]],[[8458,8458],"mapped",[103]],[[8459,8462],"mapped",[104]],[[8463,8463],"mapped",[295]],[[8464,8465],"mapped",[105]],[[8466,8467],"mapped",[108]],[[8468,8468],"valid",[],"NV8"],[[8469,8469],"mapped",[110]],[[8470,8470],"mapped",[110,111]],[[8471,8472],"valid",[],"NV8"],[[8473,8473],"mapped",[112]],[[8474,8474],"mapped",[113]],[[8475,8477],"mapped",[114]],[[8478,8479],"valid",[],"NV8"],[[8480,8480],"mapped",[115,109]],[[8481,8481],"mapped",[116,101,108]],[[8482,8482],"mapped",[116,109]],[[8483,8483],"valid",[],"NV8"],[[8484,8484],"mapped",[122]],[[8485,8485],"valid",[],"NV8"],[[8486,8486],"mapped",[969]],[[8487,8487],"valid",[],"NV8"],[[8488,8488],"mapped",[122]],[[8489,8489],"valid",[],"NV8"],[[8490,8490],"mapped",[107]],[[8491,8491],"mapped",[229]],[[8492,8492],"mapped",[98]],[[8493,8493],"mapped",[99]],[[8494,8494],"valid",[],"NV8"],[[8495,8496],"mapped",[101]],[[8497,8497],"mapped",[102]],[[8498,8498],"disallowed"],[[8499,8499],"mapped",[109]],[[8500,8500],"mapped",[111]],[[8501,8501],"mapped",[1488]],[[8502,8502],"mapped",[1489]],[[8503,8503],"mapped",[1490]],[[8504,8504],"mapped",[1491]],[[8505,8505],"mapped",[105]],[[8506,8506],"valid",[],"NV8"],[[8507,8507],"mapped",[102,97,120]],[[8508,8508],"mapped",[960]],[[8509,8510],"mapped",[947]],[[8511,8511],"mapped",[960]],[[8512,8512],"mapped",[8721]],[[8513,8516],"valid",[],"NV8"],[[8517,8518],"mapped",[100]],[[8519,8519],"mapped",[101]],[[8520,8520],"mapped",[105]],[[8521,8521],"mapped",[106]],[[8522,8523],"valid",[],"NV8"],[[8524,8524],"valid",[],"NV8"],[[8525,8525],"valid",[],"NV8"],[[8526,8526],"valid"],[[8527,8527],"valid",[],"NV8"],[[8528,8528],"mapped",[49,8260,55]],[[8529,8529],"mapped",[49,8260,57]],[[8530,8530],"mapped",[49,8260,49,48]],[[8531,8531],"mapped",[49,8260,51]],[[8532,8532],"mapped",[50,8260,51]],[[8533,8533],"mapped",[49,8260,53]],[[8534,8534],"mapped",[50,8260,53]],[[8535,8535],"mapped",[51,8260,53]],[[8536,8536],"mapped",[52,8260,53]],[[8537,8537],"mapped",[49,8260,54]],[[8538,8538],"mapped",[53,8260,54]],[[8539,8539],"mapped",[49,8260,56]],[[8540,8540],"mapped",[51,8260,56]],[[8541,8541],"mapped",[53,8260,56]],[[8542,8542],"mapped",[55,8260,56]],[[8543,8543],"mapped",[49,8260]],[[8544,8544],"mapped",[105]],[[8545,8545],"mapped",[105,105]],[[8546,8546],"mapped",[105,105,105]],[[8547,8547],"mapped",[105,118]],[[8548,8548],"mapped",[118]],[[8549,8549],"mapped",[118,105]],[[8550,8550],"mapped",[118,105,105]],[[8551,8551],"mapped",[118,105,105,105]],[[8552,8552],"mapped",[105,120]],[[8553,8553],"mapped",[120]],[[8554,8554],"mapped",[120,105]],[[8555,8555],"mapped",[120,105,105]],[[8556,8556],"mapped",[108]],[[8557,8557],"mapped",[99]],[[8558,8558],"mapped",[100]],[[8559,8559],"mapped",[109]],[[8560,8560],"mapped",[105]],[[8561,8561],"mapped",[105,105]],[[8562,8562],"mapped",[105,105,105]],[[8563,8563],"mapped",[105,118]],[[8564,8564],"mapped",[118]],[[8565,8565],"mapped",[118,105]],[[8566,8566],"mapped",[118,105,105]],[[8567,8567],"mapped",[118,105,105,105]],[[8568,8568],"mapped",[105,120]],[[8569,8569],"mapped",[120]],[[8570,8570],"mapped",[120,105]],[[8571,8571],"mapped",[120,105,105]],[[8572,8572],"mapped",[108]],[[8573,8573],"mapped",[99]],[[8574,8574],"mapped",[100]],[[8575,8575],"mapped",[109]],[[8576,8578],"valid",[],"NV8"],[[8579,8579],"disallowed"],[[8580,8580],"valid"],[[8581,8584],"valid",[],"NV8"],[[8585,8585],"mapped",[48,8260,51]],[[8586,8587],"valid",[],"NV8"],[[8588,8591],"disallowed"],[[8592,8682],"valid",[],"NV8"],[[8683,8691],"valid",[],"NV8"],[[8692,8703],"valid",[],"NV8"],[[8704,8747],"valid",[],"NV8"],[[8748,8748],"mapped",[8747,8747]],[[8749,8749],"mapped",[8747,8747,8747]],[[8750,8750],"valid",[],"NV8"],[[8751,8751],"mapped",[8750,8750]],[[8752,8752],"mapped",[8750,8750,8750]],[[8753,8799],"valid",[],"NV8"],[[8800,8800],"disallowed_STD3_valid"],[[8801,8813],"valid",[],"NV8"],[[8814,8815],"disallowed_STD3_valid"],[[8816,8945],"valid",[],"NV8"],[[8946,8959],"valid",[],"NV8"],[[8960,8960],"valid",[],"NV8"],[[8961,8961],"valid",[],"NV8"],[[8962,9e3],"valid",[],"NV8"],[[9001,9001],"mapped",[12296]],[[9002,9002],"mapped",[12297]],[[9003,9082],"valid",[],"NV8"],[[9083,9083],"valid",[],"NV8"],[[9084,9084],"valid",[],"NV8"],[[9085,9114],"valid",[],"NV8"],[[9115,9166],"valid",[],"NV8"],[[9167,9168],"valid",[],"NV8"],[[9169,9179],"valid",[],"NV8"],[[9180,9191],"valid",[],"NV8"],[[9192,9192],"valid",[],"NV8"],[[9193,9203],"valid",[],"NV8"],[[9204,9210],"valid",[],"NV8"],[[9211,9215],"disallowed"],[[9216,9252],"valid",[],"NV8"],[[9253,9254],"valid",[],"NV8"],[[9255,9279],"disallowed"],[[9280,9290],"valid",[],"NV8"],[[9291,9311],"disallowed"],[[9312,9312],"mapped",[49]],[[9313,9313],"mapped",[50]],[[9314,9314],"mapped",[51]],[[9315,9315],"mapped",[52]],[[9316,9316],"mapped",[53]],[[9317,9317],"mapped",[54]],[[9318,9318],"mapped",[55]],[[9319,9319],"mapped",[56]],[[9320,9320],"mapped",[57]],[[9321,9321],"mapped",[49,48]],[[9322,9322],"mapped",[49,49]],[[9323,9323],"mapped",[49,50]],[[9324,9324],"mapped",[49,51]],[[9325,9325],"mapped",[49,52]],[[9326,9326],"mapped",[49,53]],[[9327,9327],"mapped",[49,54]],[[9328,9328],"mapped",[49,55]],[[9329,9329],"mapped",[49,56]],[[9330,9330],"mapped",[49,57]],[[9331,9331],"mapped",[50,48]],[[9332,9332],"disallowed_STD3_mapped",[40,49,41]],[[9333,9333],"disallowed_STD3_mapped",[40,50,41]],[[9334,9334],"disallowed_STD3_mapped",[40,51,41]],[[9335,9335],"disallowed_STD3_mapped",[40,52,41]],[[9336,9336],"disallowed_STD3_mapped",[40,53,41]],[[9337,9337],"disallowed_STD3_mapped",[40,54,41]],[[9338,9338],"disallowed_STD3_mapped",[40,55,41]],[[9339,9339],"disallowed_STD3_mapped",[40,56,41]],[[9340,9340],"disallowed_STD3_mapped",[40,57,41]],[[9341,9341],"disallowed_STD3_mapped",[40,49,48,41]],[[9342,9342],"disallowed_STD3_mapped",[40,49,49,41]],[[9343,9343],"disallowed_STD3_mapped",[40,49,50,41]],[[9344,9344],"disallowed_STD3_mapped",[40,49,51,41]],[[9345,9345],"disallowed_STD3_mapped",[40,49,52,41]],[[9346,9346],"disallowed_STD3_mapped",[40,49,53,41]],[[9347,9347],"disallowed_STD3_mapped",[40,49,54,41]],[[9348,9348],"disallowed_STD3_mapped",[40,49,55,41]],[[9349,9349],"disallowed_STD3_mapped",[40,49,56,41]],[[9350,9350],"disallowed_STD3_mapped",[40,49,57,41]],[[9351,9351],"disallowed_STD3_mapped",[40,50,48,41]],[[9352,9371],"disallowed"],[[9372,9372],"disallowed_STD3_mapped",[40,97,41]],[[9373,9373],"disallowed_STD3_mapped",[40,98,41]],[[9374,9374],"disallowed_STD3_mapped",[40,99,41]],[[9375,9375],"disallowed_STD3_mapped",[40,100,41]],[[9376,9376],"disallowed_STD3_mapped",[40,101,41]],[[9377,9377],"disallowed_STD3_mapped",[40,102,41]],[[9378,9378],"disallowed_STD3_mapped",[40,103,41]],[[9379,9379],"disallowed_STD3_mapped",[40,104,41]],[[9380,9380],"disallowed_STD3_mapped",[40,105,41]],[[9381,9381],"disallowed_STD3_mapped",[40,106,41]],[[9382,9382],"disallowed_STD3_mapped",[40,107,41]],[[9383,9383],"disallowed_STD3_mapped",[40,108,41]],[[9384,9384],"disallowed_STD3_mapped",[40,109,41]],[[9385,9385],"disallowed_STD3_mapped",[40,110,41]],[[9386,9386],"disallowed_STD3_mapped",[40,111,41]],[[9387,9387],"disallowed_STD3_mapped",[40,112,41]],[[9388,9388],"disallowed_STD3_mapped",[40,113,41]],[[9389,9389],"disallowed_STD3_mapped",[40,114,41]],[[9390,9390],"disallowed_STD3_mapped",[40,115,41]],[[9391,9391],"disallowed_STD3_mapped",[40,116,41]],[[9392,9392],"disallowed_STD3_mapped",[40,117,41]],[[9393,9393],"disallowed_STD3_mapped",[40,118,41]],[[9394,9394],"disallowed_STD3_mapped",[40,119,41]],[[9395,9395],"disallowed_STD3_mapped",[40,120,41]],[[9396,9396],"disallowed_STD3_mapped",[40,121,41]],[[9397,9397],"disallowed_STD3_mapped",[40,122,41]],[[9398,9398],"mapped",[97]],[[9399,9399],"mapped",[98]],[[9400,9400],"mapped",[99]],[[9401,9401],"mapped",[100]],[[9402,9402],"mapped",[101]],[[9403,9403],"mapped",[102]],[[9404,9404],"mapped",[103]],[[9405,9405],"mapped",[104]],[[9406,9406],"mapped",[105]],[[9407,9407],"mapped",[106]],[[9408,9408],"mapped",[107]],[[9409,9409],"mapped",[108]],[[9410,9410],"mapped",[109]],[[9411,9411],"mapped",[110]],[[9412,9412],"mapped",[111]],[[9413,9413],"mapped",[112]],[[9414,9414],"mapped",[113]],[[9415,9415],"mapped",[114]],[[9416,9416],"mapped",[115]],[[9417,9417],"mapped",[116]],[[9418,9418],"mapped",[117]],[[9419,9419],"mapped",[118]],[[9420,9420],"mapped",[119]],[[9421,9421],"mapped",[120]],[[9422,9422],"mapped",[121]],[[9423,9423],"mapped",[122]],[[9424,9424],"mapped",[97]],[[9425,9425],"mapped",[98]],[[9426,9426],"mapped",[99]],[[9427,9427],"mapped",[100]],[[9428,9428],"mapped",[101]],[[9429,9429],"mapped",[102]],[[9430,9430],"mapped",[103]],[[9431,9431],"mapped",[104]],[[9432,9432],"mapped",[105]],[[9433,9433],"mapped",[106]],[[9434,9434],"mapped",[107]],[[9435,9435],"mapped",[108]],[[9436,9436],"mapped",[109]],[[9437,9437],"mapped",[110]],[[9438,9438],"mapped",[111]],[[9439,9439],"mapped",[112]],[[9440,9440],"mapped",[113]],[[9441,9441],"mapped",[114]],[[9442,9442],"mapped",[115]],[[9443,9443],"mapped",[116]],[[9444,9444],"mapped",[117]],[[9445,9445],"mapped",[118]],[[9446,9446],"mapped",[119]],[[9447,9447],"mapped",[120]],[[9448,9448],"mapped",[121]],[[9449,9449],"mapped",[122]],[[9450,9450],"mapped",[48]],[[9451,9470],"valid",[],"NV8"],[[9471,9471],"valid",[],"NV8"],[[9472,9621],"valid",[],"NV8"],[[9622,9631],"valid",[],"NV8"],[[9632,9711],"valid",[],"NV8"],[[9712,9719],"valid",[],"NV8"],[[9720,9727],"valid",[],"NV8"],[[9728,9747],"valid",[],"NV8"],[[9748,9749],"valid",[],"NV8"],[[9750,9751],"valid",[],"NV8"],[[9752,9752],"valid",[],"NV8"],[[9753,9753],"valid",[],"NV8"],[[9754,9839],"valid",[],"NV8"],[[9840,9841],"valid",[],"NV8"],[[9842,9853],"valid",[],"NV8"],[[9854,9855],"valid",[],"NV8"],[[9856,9865],"valid",[],"NV8"],[[9866,9873],"valid",[],"NV8"],[[9874,9884],"valid",[],"NV8"],[[9885,9885],"valid",[],"NV8"],[[9886,9887],"valid",[],"NV8"],[[9888,9889],"valid",[],"NV8"],[[9890,9905],"valid",[],"NV8"],[[9906,9906],"valid",[],"NV8"],[[9907,9916],"valid",[],"NV8"],[[9917,9919],"valid",[],"NV8"],[[9920,9923],"valid",[],"NV8"],[[9924,9933],"valid",[],"NV8"],[[9934,9934],"valid",[],"NV8"],[[9935,9953],"valid",[],"NV8"],[[9954,9954],"valid",[],"NV8"],[[9955,9955],"valid",[],"NV8"],[[9956,9959],"valid",[],"NV8"],[[9960,9983],"valid",[],"NV8"],[[9984,9984],"valid",[],"NV8"],[[9985,9988],"valid",[],"NV8"],[[9989,9989],"valid",[],"NV8"],[[9990,9993],"valid",[],"NV8"],[[9994,9995],"valid",[],"NV8"],[[9996,10023],"valid",[],"NV8"],[[10024,10024],"valid",[],"NV8"],[[10025,10059],"valid",[],"NV8"],[[10060,10060],"valid",[],"NV8"],[[10061,10061],"valid",[],"NV8"],[[10062,10062],"valid",[],"NV8"],[[10063,10066],"valid",[],"NV8"],[[10067,10069],"valid",[],"NV8"],[[10070,10070],"valid",[],"NV8"],[[10071,10071],"valid",[],"NV8"],[[10072,10078],"valid",[],"NV8"],[[10079,10080],"valid",[],"NV8"],[[10081,10087],"valid",[],"NV8"],[[10088,10101],"valid",[],"NV8"],[[10102,10132],"valid",[],"NV8"],[[10133,10135],"valid",[],"NV8"],[[10136,10159],"valid",[],"NV8"],[[10160,10160],"valid",[],"NV8"],[[10161,10174],"valid",[],"NV8"],[[10175,10175],"valid",[],"NV8"],[[10176,10182],"valid",[],"NV8"],[[10183,10186],"valid",[],"NV8"],[[10187,10187],"valid",[],"NV8"],[[10188,10188],"valid",[],"NV8"],[[10189,10189],"valid",[],"NV8"],[[10190,10191],"valid",[],"NV8"],[[10192,10219],"valid",[],"NV8"],[[10220,10223],"valid",[],"NV8"],[[10224,10239],"valid",[],"NV8"],[[10240,10495],"valid",[],"NV8"],[[10496,10763],"valid",[],"NV8"],[[10764,10764],"mapped",[8747,8747,8747,8747]],[[10765,10867],"valid",[],"NV8"],[[10868,10868],"disallowed_STD3_mapped",[58,58,61]],[[10869,10869],"disallowed_STD3_mapped",[61,61]],[[10870,10870],"disallowed_STD3_mapped",[61,61,61]],[[10871,10971],"valid",[],"NV8"],[[10972,10972],"mapped",[10973,824]],[[10973,11007],"valid",[],"NV8"],[[11008,11021],"valid",[],"NV8"],[[11022,11027],"valid",[],"NV8"],[[11028,11034],"valid",[],"NV8"],[[11035,11039],"valid",[],"NV8"],[[11040,11043],"valid",[],"NV8"],[[11044,11084],"valid",[],"NV8"],[[11085,11087],"valid",[],"NV8"],[[11088,11092],"valid",[],"NV8"],[[11093,11097],"valid",[],"NV8"],[[11098,11123],"valid",[],"NV8"],[[11124,11125],"disallowed"],[[11126,11157],"valid",[],"NV8"],[[11158,11159],"disallowed"],[[11160,11193],"valid",[],"NV8"],[[11194,11196],"disallowed"],[[11197,11208],"valid",[],"NV8"],[[11209,11209],"disallowed"],[[11210,11217],"valid",[],"NV8"],[[11218,11243],"disallowed"],[[11244,11247],"valid",[],"NV8"],[[11248,11263],"disallowed"],[[11264,11264],"mapped",[11312]],[[11265,11265],"mapped",[11313]],[[11266,11266],"mapped",[11314]],[[11267,11267],"mapped",[11315]],[[11268,11268],"mapped",[11316]],[[11269,11269],"mapped",[11317]],[[11270,11270],"mapped",[11318]],[[11271,11271],"mapped",[11319]],[[11272,11272],"mapped",[11320]],[[11273,11273],"mapped",[11321]],[[11274,11274],"mapped",[11322]],[[11275,11275],"mapped",[11323]],[[11276,11276],"mapped",[11324]],[[11277,11277],"mapped",[11325]],[[11278,11278],"mapped",[11326]],[[11279,11279],"mapped",[11327]],[[11280,11280],"mapped",[11328]],[[11281,11281],"mapped",[11329]],[[11282,11282],"mapped",[11330]],[[11283,11283],"mapped",[11331]],[[11284,11284],"mapped",[11332]],[[11285,11285],"mapped",[11333]],[[11286,11286],"mapped",[11334]],[[11287,11287],"mapped",[11335]],[[11288,11288],"mapped",[11336]],[[11289,11289],"mapped",[11337]],[[11290,11290],"mapped",[11338]],[[11291,11291],"mapped",[11339]],[[11292,11292],"mapped",[11340]],[[11293,11293],"mapped",[11341]],[[11294,11294],"mapped",[11342]],[[11295,11295],"mapped",[11343]],[[11296,11296],"mapped",[11344]],[[11297,11297],"mapped",[11345]],[[11298,11298],"mapped",[11346]],[[11299,11299],"mapped",[11347]],[[11300,11300],"mapped",[11348]],[[11301,11301],"mapped",[11349]],[[11302,11302],"mapped",[11350]],[[11303,11303],"mapped",[11351]],[[11304,11304],"mapped",[11352]],[[11305,11305],"mapped",[11353]],[[11306,11306],"mapped",[11354]],[[11307,11307],"mapped",[11355]],[[11308,11308],"mapped",[11356]],[[11309,11309],"mapped",[11357]],[[11310,11310],"mapped",[11358]],[[11311,11311],"disallowed"],[[11312,11358],"valid"],[[11359,11359],"disallowed"],[[11360,11360],"mapped",[11361]],[[11361,11361],"valid"],[[11362,11362],"mapped",[619]],[[11363,11363],"mapped",[7549]],[[11364,11364],"mapped",[637]],[[11365,11366],"valid"],[[11367,11367],"mapped",[11368]],[[11368,11368],"valid"],[[11369,11369],"mapped",[11370]],[[11370,11370],"valid"],[[11371,11371],"mapped",[11372]],[[11372,11372],"valid"],[[11373,11373],"mapped",[593]],[[11374,11374],"mapped",[625]],[[11375,11375],"mapped",[592]],[[11376,11376],"mapped",[594]],[[11377,11377],"valid"],[[11378,11378],"mapped",[11379]],[[11379,11379],"valid"],[[11380,11380],"valid"],[[11381,11381],"mapped",[11382]],[[11382,11383],"valid"],[[11384,11387],"valid"],[[11388,11388],"mapped",[106]],[[11389,11389],"mapped",[118]],[[11390,11390],"mapped",[575]],[[11391,11391],"mapped",[576]],[[11392,11392],"mapped",[11393]],[[11393,11393],"valid"],[[11394,11394],"mapped",[11395]],[[11395,11395],"valid"],[[11396,11396],"mapped",[11397]],[[11397,11397],"valid"],[[11398,11398],"mapped",[11399]],[[11399,11399],"valid"],[[11400,11400],"mapped",[11401]],[[11401,11401],"valid"],[[11402,11402],"mapped",[11403]],[[11403,11403],"valid"],[[11404,11404],"mapped",[11405]],[[11405,11405],"valid"],[[11406,11406],"mapped",[11407]],[[11407,11407],"valid"],[[11408,11408],"mapped",[11409]],[[11409,11409],"valid"],[[11410,11410],"mapped",[11411]],[[11411,11411],"valid"],[[11412,11412],"mapped",[11413]],[[11413,11413],"valid"],[[11414,11414],"mapped",[11415]],[[11415,11415],"valid"],[[11416,11416],"mapped",[11417]],[[11417,11417],"valid"],[[11418,11418],"mapped",[11419]],[[11419,11419],"valid"],[[11420,11420],"mapped",[11421]],[[11421,11421],"valid"],[[11422,11422],"mapped",[11423]],[[11423,11423],"valid"],[[11424,11424],"mapped",[11425]],[[11425,11425],"valid"],[[11426,11426],"mapped",[11427]],[[11427,11427],"valid"],[[11428,11428],"mapped",[11429]],[[11429,11429],"valid"],[[11430,11430],"mapped",[11431]],[[11431,11431],"valid"],[[11432,11432],"mapped",[11433]],[[11433,11433],"valid"],[[11434,11434],"mapped",[11435]],[[11435,11435],"valid"],[[11436,11436],"mapped",[11437]],[[11437,11437],"valid"],[[11438,11438],"mapped",[11439]],[[11439,11439],"valid"],[[11440,11440],"mapped",[11441]],[[11441,11441],"valid"],[[11442,11442],"mapped",[11443]],[[11443,11443],"valid"],[[11444,11444],"mapped",[11445]],[[11445,11445],"valid"],[[11446,11446],"mapped",[11447]],[[11447,11447],"valid"],[[11448,11448],"mapped",[11449]],[[11449,11449],"valid"],[[11450,11450],"mapped",[11451]],[[11451,11451],"valid"],[[11452,11452],"mapped",[11453]],[[11453,11453],"valid"],[[11454,11454],"mapped",[11455]],[[11455,11455],"valid"],[[11456,11456],"mapped",[11457]],[[11457,11457],"valid"],[[11458,11458],"mapped",[11459]],[[11459,11459],"valid"],[[11460,11460],"mapped",[11461]],[[11461,11461],"valid"],[[11462,11462],"mapped",[11463]],[[11463,11463],"valid"],[[11464,11464],"mapped",[11465]],[[11465,11465],"valid"],[[11466,11466],"mapped",[11467]],[[11467,11467],"valid"],[[11468,11468],"mapped",[11469]],[[11469,11469],"valid"],[[11470,11470],"mapped",[11471]],[[11471,11471],"valid"],[[11472,11472],"mapped",[11473]],[[11473,11473],"valid"],[[11474,11474],"mapped",[11475]],[[11475,11475],"valid"],[[11476,11476],"mapped",[11477]],[[11477,11477],"valid"],[[11478,11478],"mapped",[11479]],[[11479,11479],"valid"],[[11480,11480],"mapped",[11481]],[[11481,11481],"valid"],[[11482,11482],"mapped",[11483]],[[11483,11483],"valid"],[[11484,11484],"mapped",[11485]],[[11485,11485],"valid"],[[11486,11486],"mapped",[11487]],[[11487,11487],"valid"],[[11488,11488],"mapped",[11489]],[[11489,11489],"valid"],[[11490,11490],"mapped",[11491]],[[11491,11492],"valid"],[[11493,11498],"valid",[],"NV8"],[[11499,11499],"mapped",[11500]],[[11500,11500],"valid"],[[11501,11501],"mapped",[11502]],[[11502,11505],"valid"],[[11506,11506],"mapped",[11507]],[[11507,11507],"valid"],[[11508,11512],"disallowed"],[[11513,11519],"valid",[],"NV8"],[[11520,11557],"valid"],[[11558,11558],"disallowed"],[[11559,11559],"valid"],[[11560,11564],"disallowed"],[[11565,11565],"valid"],[[11566,11567],"disallowed"],[[11568,11621],"valid"],[[11622,11623],"valid"],[[11624,11630],"disallowed"],[[11631,11631],"mapped",[11617]],[[11632,11632],"valid",[],"NV8"],[[11633,11646],"disallowed"],[[11647,11647],"valid"],[[11648,11670],"valid"],[[11671,11679],"disallowed"],[[11680,11686],"valid"],[[11687,11687],"disallowed"],[[11688,11694],"valid"],[[11695,11695],"disallowed"],[[11696,11702],"valid"],[[11703,11703],"disallowed"],[[11704,11710],"valid"],[[11711,11711],"disallowed"],[[11712,11718],"valid"],[[11719,11719],"disallowed"],[[11720,11726],"valid"],[[11727,11727],"disallowed"],[[11728,11734],"valid"],[[11735,11735],"disallowed"],[[11736,11742],"valid"],[[11743,11743],"disallowed"],[[11744,11775],"valid"],[[11776,11799],"valid",[],"NV8"],[[11800,11803],"valid",[],"NV8"],[[11804,11805],"valid",[],"NV8"],[[11806,11822],"valid",[],"NV8"],[[11823,11823],"valid"],[[11824,11824],"valid",[],"NV8"],[[11825,11825],"valid",[],"NV8"],[[11826,11835],"valid",[],"NV8"],[[11836,11842],"valid",[],"NV8"],[[11843,11903],"disallowed"],[[11904,11929],"valid",[],"NV8"],[[11930,11930],"disallowed"],[[11931,11934],"valid",[],"NV8"],[[11935,11935],"mapped",[27597]],[[11936,12018],"valid",[],"NV8"],[[12019,12019],"mapped",[40863]],[[12020,12031],"disallowed"],[[12032,12032],"mapped",[19968]],[[12033,12033],"mapped",[20008]],[[12034,12034],"mapped",[20022]],[[12035,12035],"mapped",[20031]],[[12036,12036],"mapped",[20057]],[[12037,12037],"mapped",[20101]],[[12038,12038],"mapped",[20108]],[[12039,12039],"mapped",[20128]],[[12040,12040],"mapped",[20154]],[[12041,12041],"mapped",[20799]],[[12042,12042],"mapped",[20837]],[[12043,12043],"mapped",[20843]],[[12044,12044],"mapped",[20866]],[[12045,12045],"mapped",[20886]],[[12046,12046],"mapped",[20907]],[[12047,12047],"mapped",[20960]],[[12048,12048],"mapped",[20981]],[[12049,12049],"mapped",[20992]],[[12050,12050],"mapped",[21147]],[[12051,12051],"mapped",[21241]],[[12052,12052],"mapped",[21269]],[[12053,12053],"mapped",[21274]],[[12054,12054],"mapped",[21304]],[[12055,12055],"mapped",[21313]],[[12056,12056],"mapped",[21340]],[[12057,12057],"mapped",[21353]],[[12058,12058],"mapped",[21378]],[[12059,12059],"mapped",[21430]],[[12060,12060],"mapped",[21448]],[[12061,12061],"mapped",[21475]],[[12062,12062],"mapped",[22231]],[[12063,12063],"mapped",[22303]],[[12064,12064],"mapped",[22763]],[[12065,12065],"mapped",[22786]],[[12066,12066],"mapped",[22794]],[[12067,12067],"mapped",[22805]],[[12068,12068],"mapped",[22823]],[[12069,12069],"mapped",[22899]],[[12070,12070],"mapped",[23376]],[[12071,12071],"mapped",[23424]],[[12072,12072],"mapped",[23544]],[[12073,12073],"mapped",[23567]],[[12074,12074],"mapped",[23586]],[[12075,12075],"mapped",[23608]],[[12076,12076],"mapped",[23662]],[[12077,12077],"mapped",[23665]],[[12078,12078],"mapped",[24027]],[[12079,12079],"mapped",[24037]],[[12080,12080],"mapped",[24049]],[[12081,12081],"mapped",[24062]],[[12082,12082],"mapped",[24178]],[[12083,12083],"mapped",[24186]],[[12084,12084],"mapped",[24191]],[[12085,12085],"mapped",[24308]],[[12086,12086],"mapped",[24318]],[[12087,12087],"mapped",[24331]],[[12088,12088],"mapped",[24339]],[[12089,12089],"mapped",[24400]],[[12090,12090],"mapped",[24417]],[[12091,12091],"mapped",[24435]],[[12092,12092],"mapped",[24515]],[[12093,12093],"mapped",[25096]],[[12094,12094],"mapped",[25142]],[[12095,12095],"mapped",[25163]],[[12096,12096],"mapped",[25903]],[[12097,12097],"mapped",[25908]],[[12098,12098],"mapped",[25991]],[[12099,12099],"mapped",[26007]],[[12100,12100],"mapped",[26020]],[[12101,12101],"mapped",[26041]],[[12102,12102],"mapped",[26080]],[[12103,12103],"mapped",[26085]],[[12104,12104],"mapped",[26352]],[[12105,12105],"mapped",[26376]],[[12106,12106],"mapped",[26408]],[[12107,12107],"mapped",[27424]],[[12108,12108],"mapped",[27490]],[[12109,12109],"mapped",[27513]],[[12110,12110],"mapped",[27571]],[[12111,12111],"mapped",[27595]],[[12112,12112],"mapped",[27604]],[[12113,12113],"mapped",[27611]],[[12114,12114],"mapped",[27663]],[[12115,12115],"mapped",[27668]],[[12116,12116],"mapped",[27700]],[[12117,12117],"mapped",[28779]],[[12118,12118],"mapped",[29226]],[[12119,12119],"mapped",[29238]],[[12120,12120],"mapped",[29243]],[[12121,12121],"mapped",[29247]],[[12122,12122],"mapped",[29255]],[[12123,12123],"mapped",[29273]],[[12124,12124],"mapped",[29275]],[[12125,12125],"mapped",[29356]],[[12126,12126],"mapped",[29572]],[[12127,12127],"mapped",[29577]],[[12128,12128],"mapped",[29916]],[[12129,12129],"mapped",[29926]],[[12130,12130],"mapped",[29976]],[[12131,12131],"mapped",[29983]],[[12132,12132],"mapped",[29992]],[[12133,12133],"mapped",[3e4]],[[12134,12134],"mapped",[30091]],[[12135,12135],"mapped",[30098]],[[12136,12136],"mapped",[30326]],[[12137,12137],"mapped",[30333]],[[12138,12138],"mapped",[30382]],[[12139,12139],"mapped",[30399]],[[12140,12140],"mapped",[30446]],[[12141,12141],"mapped",[30683]],[[12142,12142],"mapped",[30690]],[[12143,12143],"mapped",[30707]],[[12144,12144],"mapped",[31034]],[[12145,12145],"mapped",[31160]],[[12146,12146],"mapped",[31166]],[[12147,12147],"mapped",[31348]],[[12148,12148],"mapped",[31435]],[[12149,12149],"mapped",[31481]],[[12150,12150],"mapped",[31859]],[[12151,12151],"mapped",[31992]],[[12152,12152],"mapped",[32566]],[[12153,12153],"mapped",[32593]],[[12154,12154],"mapped",[32650]],[[12155,12155],"mapped",[32701]],[[12156,12156],"mapped",[32769]],[[12157,12157],"mapped",[32780]],[[12158,12158],"mapped",[32786]],[[12159,12159],"mapped",[32819]],[[12160,12160],"mapped",[32895]],[[12161,12161],"mapped",[32905]],[[12162,12162],"mapped",[33251]],[[12163,12163],"mapped",[33258]],[[12164,12164],"mapped",[33267]],[[12165,12165],"mapped",[33276]],[[12166,12166],"mapped",[33292]],[[12167,12167],"mapped",[33307]],[[12168,12168],"mapped",[33311]],[[12169,12169],"mapped",[33390]],[[12170,12170],"mapped",[33394]],[[12171,12171],"mapped",[33400]],[[12172,12172],"mapped",[34381]],[[12173,12173],"mapped",[34411]],[[12174,12174],"mapped",[34880]],[[12175,12175],"mapped",[34892]],[[12176,12176],"mapped",[34915]],[[12177,12177],"mapped",[35198]],[[12178,12178],"mapped",[35211]],[[12179,12179],"mapped",[35282]],[[12180,12180],"mapped",[35328]],[[12181,12181],"mapped",[35895]],[[12182,12182],"mapped",[35910]],[[12183,12183],"mapped",[35925]],[[12184,12184],"mapped",[35960]],[[12185,12185],"mapped",[35997]],[[12186,12186],"mapped",[36196]],[[12187,12187],"mapped",[36208]],[[12188,12188],"mapped",[36275]],[[12189,12189],"mapped",[36523]],[[12190,12190],"mapped",[36554]],[[12191,12191],"mapped",[36763]],[[12192,12192],"mapped",[36784]],[[12193,12193],"mapped",[36789]],[[12194,12194],"mapped",[37009]],[[12195,12195],"mapped",[37193]],[[12196,12196],"mapped",[37318]],[[12197,12197],"mapped",[37324]],[[12198,12198],"mapped",[37329]],[[12199,12199],"mapped",[38263]],[[12200,12200],"mapped",[38272]],[[12201,12201],"mapped",[38428]],[[12202,12202],"mapped",[38582]],[[12203,12203],"mapped",[38585]],[[12204,12204],"mapped",[38632]],[[12205,12205],"mapped",[38737]],[[12206,12206],"mapped",[38750]],[[12207,12207],"mapped",[38754]],[[12208,12208],"mapped",[38761]],[[12209,12209],"mapped",[38859]],[[12210,12210],"mapped",[38893]],[[12211,12211],"mapped",[38899]],[[12212,12212],"mapped",[38913]],[[12213,12213],"mapped",[39080]],[[12214,12214],"mapped",[39131]],[[12215,12215],"mapped",[39135]],[[12216,12216],"mapped",[39318]],[[12217,12217],"mapped",[39321]],[[12218,12218],"mapped",[39340]],[[12219,12219],"mapped",[39592]],[[12220,12220],"mapped",[39640]],[[12221,12221],"mapped",[39647]],[[12222,12222],"mapped",[39717]],[[12223,12223],"mapped",[39727]],[[12224,12224],"mapped",[39730]],[[12225,12225],"mapped",[39740]],[[12226,12226],"mapped",[39770]],[[12227,12227],"mapped",[40165]],[[12228,12228],"mapped",[40565]],[[12229,12229],"mapped",[40575]],[[12230,12230],"mapped",[40613]],[[12231,12231],"mapped",[40635]],[[12232,12232],"mapped",[40643]],[[12233,12233],"mapped",[40653]],[[12234,12234],"mapped",[40657]],[[12235,12235],"mapped",[40697]],[[12236,12236],"mapped",[40701]],[[12237,12237],"mapped",[40718]],[[12238,12238],"mapped",[40723]],[[12239,12239],"mapped",[40736]],[[12240,12240],"mapped",[40763]],[[12241,12241],"mapped",[40778]],[[12242,12242],"mapped",[40786]],[[12243,12243],"mapped",[40845]],[[12244,12244],"mapped",[40860]],[[12245,12245],"mapped",[40864]],[[12246,12271],"disallowed"],[[12272,12283],"disallowed"],[[12284,12287],"disallowed"],[[12288,12288],"disallowed_STD3_mapped",[32]],[[12289,12289],"valid",[],"NV8"],[[12290,12290],"mapped",[46]],[[12291,12292],"valid",[],"NV8"],[[12293,12295],"valid"],[[12296,12329],"valid",[],"NV8"],[[12330,12333],"valid"],[[12334,12341],"valid",[],"NV8"],[[12342,12342],"mapped",[12306]],[[12343,12343],"valid",[],"NV8"],[[12344,12344],"mapped",[21313]],[[12345,12345],"mapped",[21316]],[[12346,12346],"mapped",[21317]],[[12347,12347],"valid",[],"NV8"],[[12348,12348],"valid"],[[12349,12349],"valid",[],"NV8"],[[12350,12350],"valid",[],"NV8"],[[12351,12351],"valid",[],"NV8"],[[12352,12352],"disallowed"],[[12353,12436],"valid"],[[12437,12438],"valid"],[[12439,12440],"disallowed"],[[12441,12442],"valid"],[[12443,12443],"disallowed_STD3_mapped",[32,12441]],[[12444,12444],"disallowed_STD3_mapped",[32,12442]],[[12445,12446],"valid"],[[12447,12447],"mapped",[12424,12426]],[[12448,12448],"valid",[],"NV8"],[[12449,12542],"valid"],[[12543,12543],"mapped",[12467,12488]],[[12544,12548],"disallowed"],[[12549,12588],"valid"],[[12589,12589],"valid"],[[12590,12592],"disallowed"],[[12593,12593],"mapped",[4352]],[[12594,12594],"mapped",[4353]],[[12595,12595],"mapped",[4522]],[[12596,12596],"mapped",[4354]],[[12597,12597],"mapped",[4524]],[[12598,12598],"mapped",[4525]],[[12599,12599],"mapped",[4355]],[[12600,12600],"mapped",[4356]],[[12601,12601],"mapped",[4357]],[[12602,12602],"mapped",[4528]],[[12603,12603],"mapped",[4529]],[[12604,12604],"mapped",[4530]],[[12605,12605],"mapped",[4531]],[[12606,12606],"mapped",[4532]],[[12607,12607],"mapped",[4533]],[[12608,12608],"mapped",[4378]],[[12609,12609],"mapped",[4358]],[[12610,12610],"mapped",[4359]],[[12611,12611],"mapped",[4360]],[[12612,12612],"mapped",[4385]],[[12613,12613],"mapped",[4361]],[[12614,12614],"mapped",[4362]],[[12615,12615],"mapped",[4363]],[[12616,12616],"mapped",[4364]],[[12617,12617],"mapped",[4365]],[[12618,12618],"mapped",[4366]],[[12619,12619],"mapped",[4367]],[[12620,12620],"mapped",[4368]],[[12621,12621],"mapped",[4369]],[[12622,12622],"mapped",[4370]],[[12623,12623],"mapped",[4449]],[[12624,12624],"mapped",[4450]],[[12625,12625],"mapped",[4451]],[[12626,12626],"mapped",[4452]],[[12627,12627],"mapped",[4453]],[[12628,12628],"mapped",[4454]],[[12629,12629],"mapped",[4455]],[[12630,12630],"mapped",[4456]],[[12631,12631],"mapped",[4457]],[[12632,12632],"mapped",[4458]],[[12633,12633],"mapped",[4459]],[[12634,12634],"mapped",[4460]],[[12635,12635],"mapped",[4461]],[[12636,12636],"mapped",[4462]],[[12637,12637],"mapped",[4463]],[[12638,12638],"mapped",[4464]],[[12639,12639],"mapped",[4465]],[[12640,12640],"mapped",[4466]],[[12641,12641],"mapped",[4467]],[[12642,12642],"mapped",[4468]],[[12643,12643],"mapped",[4469]],[[12644,12644],"disallowed"],[[12645,12645],"mapped",[4372]],[[12646,12646],"mapped",[4373]],[[12647,12647],"mapped",[4551]],[[12648,12648],"mapped",[4552]],[[12649,12649],"mapped",[4556]],[[12650,12650],"mapped",[4558]],[[12651,12651],"mapped",[4563]],[[12652,12652],"mapped",[4567]],[[12653,12653],"mapped",[4569]],[[12654,12654],"mapped",[4380]],[[12655,12655],"mapped",[4573]],[[12656,12656],"mapped",[4575]],[[12657,12657],"mapped",[4381]],[[12658,12658],"mapped",[4382]],[[12659,12659],"mapped",[4384]],[[12660,12660],"mapped",[4386]],[[12661,12661],"mapped",[4387]],[[12662,12662],"mapped",[4391]],[[12663,12663],"mapped",[4393]],[[12664,12664],"mapped",[4395]],[[12665,12665],"mapped",[4396]],[[12666,12666],"mapped",[4397]],[[12667,12667],"mapped",[4398]],[[12668,12668],"mapped",[4399]],[[12669,12669],"mapped",[4402]],[[12670,12670],"mapped",[4406]],[[12671,12671],"mapped",[4416]],[[12672,12672],"mapped",[4423]],[[12673,12673],"mapped",[4428]],[[12674,12674],"mapped",[4593]],[[12675,12675],"mapped",[4594]],[[12676,12676],"mapped",[4439]],[[12677,12677],"mapped",[4440]],[[12678,12678],"mapped",[4441]],[[12679,12679],"mapped",[4484]],[[12680,12680],"mapped",[4485]],[[12681,12681],"mapped",[4488]],[[12682,12682],"mapped",[4497]],[[12683,12683],"mapped",[4498]],[[12684,12684],"mapped",[4500]],[[12685,12685],"mapped",[4510]],[[12686,12686],"mapped",[4513]],[[12687,12687],"disallowed"],[[12688,12689],"valid",[],"NV8"],[[12690,12690],"mapped",[19968]],[[12691,12691],"mapped",[20108]],[[12692,12692],"mapped",[19977]],[[12693,12693],"mapped",[22235]],[[12694,12694],"mapped",[19978]],[[12695,12695],"mapped",[20013]],[[12696,12696],"mapped",[19979]],[[12697,12697],"mapped",[30002]],[[12698,12698],"mapped",[20057]],[[12699,12699],"mapped",[19993]],[[12700,12700],"mapped",[19969]],[[12701,12701],"mapped",[22825]],[[12702,12702],"mapped",[22320]],[[12703,12703],"mapped",[20154]],[[12704,12727],"valid"],[[12728,12730],"valid"],[[12731,12735],"disallowed"],[[12736,12751],"valid",[],"NV8"],[[12752,12771],"valid",[],"NV8"],[[12772,12783],"disallowed"],[[12784,12799],"valid"],[[12800,12800],"disallowed_STD3_mapped",[40,4352,41]],[[12801,12801],"disallowed_STD3_mapped",[40,4354,41]],[[12802,12802],"disallowed_STD3_mapped",[40,4355,41]],[[12803,12803],"disallowed_STD3_mapped",[40,4357,41]],[[12804,12804],"disallowed_STD3_mapped",[40,4358,41]],[[12805,12805],"disallowed_STD3_mapped",[40,4359,41]],[[12806,12806],"disallowed_STD3_mapped",[40,4361,41]],[[12807,12807],"disallowed_STD3_mapped",[40,4363,41]],[[12808,12808],"disallowed_STD3_mapped",[40,4364,41]],[[12809,12809],"disallowed_STD3_mapped",[40,4366,41]],[[12810,12810],"disallowed_STD3_mapped",[40,4367,41]],[[12811,12811],"disallowed_STD3_mapped",[40,4368,41]],[[12812,12812],"disallowed_STD3_mapped",[40,4369,41]],[[12813,12813],"disallowed_STD3_mapped",[40,4370,41]],[[12814,12814],"disallowed_STD3_mapped",[40,44032,41]],[[12815,12815],"disallowed_STD3_mapped",[40,45208,41]],[[12816,12816],"disallowed_STD3_mapped",[40,45796,41]],[[12817,12817],"disallowed_STD3_mapped",[40,46972,41]],[[12818,12818],"disallowed_STD3_mapped",[40,47560,41]],[[12819,12819],"disallowed_STD3_mapped",[40,48148,41]],[[12820,12820],"disallowed_STD3_mapped",[40,49324,41]],[[12821,12821],"disallowed_STD3_mapped",[40,50500,41]],[[12822,12822],"disallowed_STD3_mapped",[40,51088,41]],[[12823,12823],"disallowed_STD3_mapped",[40,52264,41]],[[12824,12824],"disallowed_STD3_mapped",[40,52852,41]],[[12825,12825],"disallowed_STD3_mapped",[40,53440,41]],[[12826,12826],"disallowed_STD3_mapped",[40,54028,41]],[[12827,12827],"disallowed_STD3_mapped",[40,54616,41]],[[12828,12828],"disallowed_STD3_mapped",[40,51452,41]],[[12829,12829],"disallowed_STD3_mapped",[40,50724,51204,41]],[[12830,12830],"disallowed_STD3_mapped",[40,50724,54980,41]],[[12831,12831],"disallowed"],[[12832,12832],"disallowed_STD3_mapped",[40,19968,41]],[[12833,12833],"disallowed_STD3_mapped",[40,20108,41]],[[12834,12834],"disallowed_STD3_mapped",[40,19977,41]],[[12835,12835],"disallowed_STD3_mapped",[40,22235,41]],[[12836,12836],"disallowed_STD3_mapped",[40,20116,41]],[[12837,12837],"disallowed_STD3_mapped",[40,20845,41]],[[12838,12838],"disallowed_STD3_mapped",[40,19971,41]],[[12839,12839],"disallowed_STD3_mapped",[40,20843,41]],[[12840,12840],"disallowed_STD3_mapped",[40,20061,41]],[[12841,12841],"disallowed_STD3_mapped",[40,21313,41]],[[12842,12842],"disallowed_STD3_mapped",[40,26376,41]],[[12843,12843],"disallowed_STD3_mapped",[40,28779,41]],[[12844,12844],"disallowed_STD3_mapped",[40,27700,41]],[[12845,12845],"disallowed_STD3_mapped",[40,26408,41]],[[12846,12846],"disallowed_STD3_mapped",[40,37329,41]],[[12847,12847],"disallowed_STD3_mapped",[40,22303,41]],[[12848,12848],"disallowed_STD3_mapped",[40,26085,41]],[[12849,12849],"disallowed_STD3_mapped",[40,26666,41]],[[12850,12850],"disallowed_STD3_mapped",[40,26377,41]],[[12851,12851],"disallowed_STD3_mapped",[40,31038,41]],[[12852,12852],"disallowed_STD3_mapped",[40,21517,41]],[[12853,12853],"disallowed_STD3_mapped",[40,29305,41]],[[12854,12854],"disallowed_STD3_mapped",[40,36001,41]],[[12855,12855],"disallowed_STD3_mapped",[40,31069,41]],[[12856,12856],"disallowed_STD3_mapped",[40,21172,41]],[[12857,12857],"disallowed_STD3_mapped",[40,20195,41]],[[12858,12858],"disallowed_STD3_mapped",[40,21628,41]],[[12859,12859],"disallowed_STD3_mapped",[40,23398,41]],[[12860,12860],"disallowed_STD3_mapped",[40,30435,41]],[[12861,12861],"disallowed_STD3_mapped",[40,20225,41]],[[12862,12862],"disallowed_STD3_mapped",[40,36039,41]],[[12863,12863],"disallowed_STD3_mapped",[40,21332,41]],[[12864,12864],"disallowed_STD3_mapped",[40,31085,41]],[[12865,12865],"disallowed_STD3_mapped",[40,20241,41]],[[12866,12866],"disallowed_STD3_mapped",[40,33258,41]],[[12867,12867],"disallowed_STD3_mapped",[40,33267,41]],[[12868,12868],"mapped",[21839]],[[12869,12869],"mapped",[24188]],[[12870,12870],"mapped",[25991]],[[12871,12871],"mapped",[31631]],[[12872,12879],"valid",[],"NV8"],[[12880,12880],"mapped",[112,116,101]],[[12881,12881],"mapped",[50,49]],[[12882,12882],"mapped",[50,50]],[[12883,12883],"mapped",[50,51]],[[12884,12884],"mapped",[50,52]],[[12885,12885],"mapped",[50,53]],[[12886,12886],"mapped",[50,54]],[[12887,12887],"mapped",[50,55]],[[12888,12888],"mapped",[50,56]],[[12889,12889],"mapped",[50,57]],[[12890,12890],"mapped",[51,48]],[[12891,12891],"mapped",[51,49]],[[12892,12892],"mapped",[51,50]],[[12893,12893],"mapped",[51,51]],[[12894,12894],"mapped",[51,52]],[[12895,12895],"mapped",[51,53]],[[12896,12896],"mapped",[4352]],[[12897,12897],"mapped",[4354]],[[12898,12898],"mapped",[4355]],[[12899,12899],"mapped",[4357]],[[12900,12900],"mapped",[4358]],[[12901,12901],"mapped",[4359]],[[12902,12902],"mapped",[4361]],[[12903,12903],"mapped",[4363]],[[12904,12904],"mapped",[4364]],[[12905,12905],"mapped",[4366]],[[12906,12906],"mapped",[4367]],[[12907,12907],"mapped",[4368]],[[12908,12908],"mapped",[4369]],[[12909,12909],"mapped",[4370]],[[12910,12910],"mapped",[44032]],[[12911,12911],"mapped",[45208]],[[12912,12912],"mapped",[45796]],[[12913,12913],"mapped",[46972]],[[12914,12914],"mapped",[47560]],[[12915,12915],"mapped",[48148]],[[12916,12916],"mapped",[49324]],[[12917,12917],"mapped",[50500]],[[12918,12918],"mapped",[51088]],[[12919,12919],"mapped",[52264]],[[12920,12920],"mapped",[52852]],[[12921,12921],"mapped",[53440]],[[12922,12922],"mapped",[54028]],[[12923,12923],"mapped",[54616]],[[12924,12924],"mapped",[52280,44256]],[[12925,12925],"mapped",[51452,51032]],[[12926,12926],"mapped",[50864]],[[12927,12927],"valid",[],"NV8"],[[12928,12928],"mapped",[19968]],[[12929,12929],"mapped",[20108]],[[12930,12930],"mapped",[19977]],[[12931,12931],"mapped",[22235]],[[12932,12932],"mapped",[20116]],[[12933,12933],"mapped",[20845]],[[12934,12934],"mapped",[19971]],[[12935,12935],"mapped",[20843]],[[12936,12936],"mapped",[20061]],[[12937,12937],"mapped",[21313]],[[12938,12938],"mapped",[26376]],[[12939,12939],"mapped",[28779]],[[12940,12940],"mapped",[27700]],[[12941,12941],"mapped",[26408]],[[12942,12942],"mapped",[37329]],[[12943,12943],"mapped",[22303]],[[12944,12944],"mapped",[26085]],[[12945,12945],"mapped",[26666]],[[12946,12946],"mapped",[26377]],[[12947,12947],"mapped",[31038]],[[12948,12948],"mapped",[21517]],[[12949,12949],"mapped",[29305]],[[12950,12950],"mapped",[36001]],[[12951,12951],"mapped",[31069]],[[12952,12952],"mapped",[21172]],[[12953,12953],"mapped",[31192]],[[12954,12954],"mapped",[30007]],[[12955,12955],"mapped",[22899]],[[12956,12956],"mapped",[36969]],[[12957,12957],"mapped",[20778]],[[12958,12958],"mapped",[21360]],[[12959,12959],"mapped",[27880]],[[12960,12960],"mapped",[38917]],[[12961,12961],"mapped",[20241]],[[12962,12962],"mapped",[20889]],[[12963,12963],"mapped",[27491]],[[12964,12964],"mapped",[19978]],[[12965,12965],"mapped",[20013]],[[12966,12966],"mapped",[19979]],[[12967,12967],"mapped",[24038]],[[12968,12968],"mapped",[21491]],[[12969,12969],"mapped",[21307]],[[12970,12970],"mapped",[23447]],[[12971,12971],"mapped",[23398]],[[12972,12972],"mapped",[30435]],[[12973,12973],"mapped",[20225]],[[12974,12974],"mapped",[36039]],[[12975,12975],"mapped",[21332]],[[12976,12976],"mapped",[22812]],[[12977,12977],"mapped",[51,54]],[[12978,12978],"mapped",[51,55]],[[12979,12979],"mapped",[51,56]],[[12980,12980],"mapped",[51,57]],[[12981,12981],"mapped",[52,48]],[[12982,12982],"mapped",[52,49]],[[12983,12983],"mapped",[52,50]],[[12984,12984],"mapped",[52,51]],[[12985,12985],"mapped",[52,52]],[[12986,12986],"mapped",[52,53]],[[12987,12987],"mapped",[52,54]],[[12988,12988],"mapped",[52,55]],[[12989,12989],"mapped",[52,56]],[[12990,12990],"mapped",[52,57]],[[12991,12991],"mapped",[53,48]],[[12992,12992],"mapped",[49,26376]],[[12993,12993],"mapped",[50,26376]],[[12994,12994],"mapped",[51,26376]],[[12995,12995],"mapped",[52,26376]],[[12996,12996],"mapped",[53,26376]],[[12997,12997],"mapped",[54,26376]],[[12998,12998],"mapped",[55,26376]],[[12999,12999],"mapped",[56,26376]],[[13e3,13e3],"mapped",[57,26376]],[[13001,13001],"mapped",[49,48,26376]],[[13002,13002],"mapped",[49,49,26376]],[[13003,13003],"mapped",[49,50,26376]],[[13004,13004],"mapped",[104,103]],[[13005,13005],"mapped",[101,114,103]],[[13006,13006],"mapped",[101,118]],[[13007,13007],"mapped",[108,116,100]],[[13008,13008],"mapped",[12450]],[[13009,13009],"mapped",[12452]],[[13010,13010],"mapped",[12454]],[[13011,13011],"mapped",[12456]],[[13012,13012],"mapped",[12458]],[[13013,13013],"mapped",[12459]],[[13014,13014],"mapped",[12461]],[[13015,13015],"mapped",[12463]],[[13016,13016],"mapped",[12465]],[[13017,13017],"mapped",[12467]],[[13018,13018],"mapped",[12469]],[[13019,13019],"mapped",[12471]],[[13020,13020],"mapped",[12473]],[[13021,13021],"mapped",[12475]],[[13022,13022],"mapped",[12477]],[[13023,13023],"mapped",[12479]],[[13024,13024],"mapped",[12481]],[[13025,13025],"mapped",[12484]],[[13026,13026],"mapped",[12486]],[[13027,13027],"mapped",[12488]],[[13028,13028],"mapped",[12490]],[[13029,13029],"mapped",[12491]],[[13030,13030],"mapped",[12492]],[[13031,13031],"mapped",[12493]],[[13032,13032],"mapped",[12494]],[[13033,13033],"mapped",[12495]],[[13034,13034],"mapped",[12498]],[[13035,13035],"mapped",[12501]],[[13036,13036],"mapped",[12504]],[[13037,13037],"mapped",[12507]],[[13038,13038],"mapped",[12510]],[[13039,13039],"mapped",[12511]],[[13040,13040],"mapped",[12512]],[[13041,13041],"mapped",[12513]],[[13042,13042],"mapped",[12514]],[[13043,13043],"mapped",[12516]],[[13044,13044],"mapped",[12518]],[[13045,13045],"mapped",[12520]],[[13046,13046],"mapped",[12521]],[[13047,13047],"mapped",[12522]],[[13048,13048],"mapped",[12523]],[[13049,13049],"mapped",[12524]],[[13050,13050],"mapped",[12525]],[[13051,13051],"mapped",[12527]],[[13052,13052],"mapped",[12528]],[[13053,13053],"mapped",[12529]],[[13054,13054],"mapped",[12530]],[[13055,13055],"disallowed"],[[13056,13056],"mapped",[12450,12497,12540,12488]],[[13057,13057],"mapped",[12450,12523,12501,12449]],[[13058,13058],"mapped",[12450,12531,12506,12450]],[[13059,13059],"mapped",[12450,12540,12523]],[[13060,13060],"mapped",[12452,12491,12531,12464]],[[13061,13061],"mapped",[12452,12531,12481]],[[13062,13062],"mapped",[12454,12457,12531]],[[13063,13063],"mapped",[12456,12473,12463,12540,12489]],[[13064,13064],"mapped",[12456,12540,12459,12540]],[[13065,13065],"mapped",[12458,12531,12473]],[[13066,13066],"mapped",[12458,12540,12512]],[[13067,13067],"mapped",[12459,12452,12522]],[[13068,13068],"mapped",[12459,12521,12483,12488]],[[13069,13069],"mapped",[12459,12525,12522,12540]],[[13070,13070],"mapped",[12460,12525,12531]],[[13071,13071],"mapped",[12460,12531,12510]],[[13072,13072],"mapped",[12462,12460]],[[13073,13073],"mapped",[12462,12491,12540]],[[13074,13074],"mapped",[12461,12517,12522,12540]],[[13075,13075],"mapped",[12462,12523,12480,12540]],[[13076,13076],"mapped",[12461,12525]],[[13077,13077],"mapped",[12461,12525,12464,12521,12512]],[[13078,13078],"mapped",[12461,12525,12513,12540,12488,12523]],[[13079,13079],"mapped",[12461,12525,12527,12483,12488]],[[13080,13080],"mapped",[12464,12521,12512]],[[13081,13081],"mapped",[12464,12521,12512,12488,12531]],[[13082,13082],"mapped",[12463,12523,12476,12452,12525]],[[13083,13083],"mapped",[12463,12525,12540,12493]],[[13084,13084],"mapped",[12465,12540,12473]],[[13085,13085],"mapped",[12467,12523,12490]],[[13086,13086],"mapped",[12467,12540,12509]],[[13087,13087],"mapped",[12469,12452,12463,12523]],[[13088,13088],"mapped",[12469,12531,12481,12540,12512]],[[13089,13089],"mapped",[12471,12522,12531,12464]],[[13090,13090],"mapped",[12475,12531,12481]],[[13091,13091],"mapped",[12475,12531,12488]],[[13092,13092],"mapped",[12480,12540,12473]],[[13093,13093],"mapped",[12487,12471]],[[13094,13094],"mapped",[12489,12523]],[[13095,13095],"mapped",[12488,12531]],[[13096,13096],"mapped",[12490,12494]],[[13097,13097],"mapped",[12494,12483,12488]],[[13098,13098],"mapped",[12495,12452,12484]],[[13099,13099],"mapped",[12497,12540,12475,12531,12488]],[[13100,13100],"mapped",[12497,12540,12484]],[[13101,13101],"mapped",[12496,12540,12524,12523]],[[13102,13102],"mapped",[12500,12450,12473,12488,12523]],[[13103,13103],"mapped",[12500,12463,12523]],[[13104,13104],"mapped",[12500,12467]],[[13105,13105],"mapped",[12499,12523]],[[13106,13106],"mapped",[12501,12449,12521,12483,12489]],[[13107,13107],"mapped",[12501,12451,12540,12488]],[[13108,13108],"mapped",[12502,12483,12471,12455,12523]],[[13109,13109],"mapped",[12501,12521,12531]],[[13110,13110],"mapped",[12504,12463,12479,12540,12523]],[[13111,13111],"mapped",[12506,12477]],[[13112,13112],"mapped",[12506,12491,12498]],[[13113,13113],"mapped",[12504,12523,12484]],[[13114,13114],"mapped",[12506,12531,12473]],[[13115,13115],"mapped",[12506,12540,12472]],[[13116,13116],"mapped",[12505,12540,12479]],[[13117,13117],"mapped",[12509,12452,12531,12488]],[[13118,13118],"mapped",[12508,12523,12488]],[[13119,13119],"mapped",[12507,12531]],[[13120,13120],"mapped",[12509,12531,12489]],[[13121,13121],"mapped",[12507,12540,12523]],[[13122,13122],"mapped",[12507,12540,12531]],[[13123,13123],"mapped",[12510,12452,12463,12525]],[[13124,13124],"mapped",[12510,12452,12523]],[[13125,13125],"mapped",[12510,12483,12495]],[[13126,13126],"mapped",[12510,12523,12463]],[[13127,13127],"mapped",[12510,12531,12471,12519,12531]],[[13128,13128],"mapped",[12511,12463,12525,12531]],[[13129,13129],"mapped",[12511,12522]],[[13130,13130],"mapped",[12511,12522,12496,12540,12523]],[[13131,13131],"mapped",[12513,12460]],[[13132,13132],"mapped",[12513,12460,12488,12531]],[[13133,13133],"mapped",[12513,12540,12488,12523]],[[13134,13134],"mapped",[12516,12540,12489]],[[13135,13135],"mapped",[12516,12540,12523]],[[13136,13136],"mapped",[12518,12450,12531]],[[13137,13137],"mapped",[12522,12483,12488,12523]],[[13138,13138],"mapped",[12522,12521]],[[13139,13139],"mapped",[12523,12500,12540]],[[13140,13140],"mapped",[12523,12540,12502,12523]],[[13141,13141],"mapped",[12524,12512]],[[13142,13142],"mapped",[12524,12531,12488,12466,12531]],[[13143,13143],"mapped",[12527,12483,12488]],[[13144,13144],"mapped",[48,28857]],[[13145,13145],"mapped",[49,28857]],[[13146,13146],"mapped",[50,28857]],[[13147,13147],"mapped",[51,28857]],[[13148,13148],"mapped",[52,28857]],[[13149,13149],"mapped",[53,28857]],[[13150,13150],"mapped",[54,28857]],[[13151,13151],"mapped",[55,28857]],[[13152,13152],"mapped",[56,28857]],[[13153,13153],"mapped",[57,28857]],[[13154,13154],"mapped",[49,48,28857]],[[13155,13155],"mapped",[49,49,28857]],[[13156,13156],"mapped",[49,50,28857]],[[13157,13157],"mapped",[49,51,28857]],[[13158,13158],"mapped",[49,52,28857]],[[13159,13159],"mapped",[49,53,28857]],[[13160,13160],"mapped",[49,54,28857]],[[13161,13161],"mapped",[49,55,28857]],[[13162,13162],"mapped",[49,56,28857]],[[13163,13163],"mapped",[49,57,28857]],[[13164,13164],"mapped",[50,48,28857]],[[13165,13165],"mapped",[50,49,28857]],[[13166,13166],"mapped",[50,50,28857]],[[13167,13167],"mapped",[50,51,28857]],[[13168,13168],"mapped",[50,52,28857]],[[13169,13169],"mapped",[104,112,97]],[[13170,13170],"mapped",[100,97]],[[13171,13171],"mapped",[97,117]],[[13172,13172],"mapped",[98,97,114]],[[13173,13173],"mapped",[111,118]],[[13174,13174],"mapped",[112,99]],[[13175,13175],"mapped",[100,109]],[[13176,13176],"mapped",[100,109,50]],[[13177,13177],"mapped",[100,109,51]],[[13178,13178],"mapped",[105,117]],[[13179,13179],"mapped",[24179,25104]],[[13180,13180],"mapped",[26157,21644]],[[13181,13181],"mapped",[22823,27491]],[[13182,13182],"mapped",[26126,27835]],[[13183,13183],"mapped",[26666,24335,20250,31038]],[[13184,13184],"mapped",[112,97]],[[13185,13185],"mapped",[110,97]],[[13186,13186],"mapped",[956,97]],[[13187,13187],"mapped",[109,97]],[[13188,13188],"mapped",[107,97]],[[13189,13189],"mapped",[107,98]],[[13190,13190],"mapped",[109,98]],[[13191,13191],"mapped",[103,98]],[[13192,13192],"mapped",[99,97,108]],[[13193,13193],"mapped",[107,99,97,108]],[[13194,13194],"mapped",[112,102]],[[13195,13195],"mapped",[110,102]],[[13196,13196],"mapped",[956,102]],[[13197,13197],"mapped",[956,103]],[[13198,13198],"mapped",[109,103]],[[13199,13199],"mapped",[107,103]],[[13200,13200],"mapped",[104,122]],[[13201,13201],"mapped",[107,104,122]],[[13202,13202],"mapped",[109,104,122]],[[13203,13203],"mapped",[103,104,122]],[[13204,13204],"mapped",[116,104,122]],[[13205,13205],"mapped",[956,108]],[[13206,13206],"mapped",[109,108]],[[13207,13207],"mapped",[100,108]],[[13208,13208],"mapped",[107,108]],[[13209,13209],"mapped",[102,109]],[[13210,13210],"mapped",[110,109]],[[13211,13211],"mapped",[956,109]],[[13212,13212],"mapped",[109,109]],[[13213,13213],"mapped",[99,109]],[[13214,13214],"mapped",[107,109]],[[13215,13215],"mapped",[109,109,50]],[[13216,13216],"mapped",[99,109,50]],[[13217,13217],"mapped",[109,50]],[[13218,13218],"mapped",[107,109,50]],[[13219,13219],"mapped",[109,109,51]],[[13220,13220],"mapped",[99,109,51]],[[13221,13221],"mapped",[109,51]],[[13222,13222],"mapped",[107,109,51]],[[13223,13223],"mapped",[109,8725,115]],[[13224,13224],"mapped",[109,8725,115,50]],[[13225,13225],"mapped",[112,97]],[[13226,13226],"mapped",[107,112,97]],[[13227,13227],"mapped",[109,112,97]],[[13228,13228],"mapped",[103,112,97]],[[13229,13229],"mapped",[114,97,100]],[[13230,13230],"mapped",[114,97,100,8725,115]],[[13231,13231],"mapped",[114,97,100,8725,115,50]],[[13232,13232],"mapped",[112,115]],[[13233,13233],"mapped",[110,115]],[[13234,13234],"mapped",[956,115]],[[13235,13235],"mapped",[109,115]],[[13236,13236],"mapped",[112,118]],[[13237,13237],"mapped",[110,118]],[[13238,13238],"mapped",[956,118]],[[13239,13239],"mapped",[109,118]],[[13240,13240],"mapped",[107,118]],[[13241,13241],"mapped",[109,118]],[[13242,13242],"mapped",[112,119]],[[13243,13243],"mapped",[110,119]],[[13244,13244],"mapped",[956,119]],[[13245,13245],"mapped",[109,119]],[[13246,13246],"mapped",[107,119]],[[13247,13247],"mapped",[109,119]],[[13248,13248],"mapped",[107,969]],[[13249,13249],"mapped",[109,969]],[[13250,13250],"disallowed"],[[13251,13251],"mapped",[98,113]],[[13252,13252],"mapped",[99,99]],[[13253,13253],"mapped",[99,100]],[[13254,13254],"mapped",[99,8725,107,103]],[[13255,13255],"disallowed"],[[13256,13256],"mapped",[100,98]],[[13257,13257],"mapped",[103,121]],[[13258,13258],"mapped",[104,97]],[[13259,13259],"mapped",[104,112]],[[13260,13260],"mapped",[105,110]],[[13261,13261],"mapped",[107,107]],[[13262,13262],"mapped",[107,109]],[[13263,13263],"mapped",[107,116]],[[13264,13264],"mapped",[108,109]],[[13265,13265],"mapped",[108,110]],[[13266,13266],"mapped",[108,111,103]],[[13267,13267],"mapped",[108,120]],[[13268,13268],"mapped",[109,98]],[[13269,13269],"mapped",[109,105,108]],[[13270,13270],"mapped",[109,111,108]],[[13271,13271],"mapped",[112,104]],[[13272,13272],"disallowed"],[[13273,13273],"mapped",[112,112,109]],[[13274,13274],"mapped",[112,114]],[[13275,13275],"mapped",[115,114]],[[13276,13276],"mapped",[115,118]],[[13277,13277],"mapped",[119,98]],[[13278,13278],"mapped",[118,8725,109]],[[13279,13279],"mapped",[97,8725,109]],[[13280,13280],"mapped",[49,26085]],[[13281,13281],"mapped",[50,26085]],[[13282,13282],"mapped",[51,26085]],[[13283,13283],"mapped",[52,26085]],[[13284,13284],"mapped",[53,26085]],[[13285,13285],"mapped",[54,26085]],[[13286,13286],"mapped",[55,26085]],[[13287,13287],"mapped",[56,26085]],[[13288,13288],"mapped",[57,26085]],[[13289,13289],"mapped",[49,48,26085]],[[13290,13290],"mapped",[49,49,26085]],[[13291,13291],"mapped",[49,50,26085]],[[13292,13292],"mapped",[49,51,26085]],[[13293,13293],"mapped",[49,52,26085]],[[13294,13294],"mapped",[49,53,26085]],[[13295,13295],"mapped",[49,54,26085]],[[13296,13296],"mapped",[49,55,26085]],[[13297,13297],"mapped",[49,56,26085]],[[13298,13298],"mapped",[49,57,26085]],[[13299,13299],"mapped",[50,48,26085]],[[13300,13300],"mapped",[50,49,26085]],[[13301,13301],"mapped",[50,50,26085]],[[13302,13302],"mapped",[50,51,26085]],[[13303,13303],"mapped",[50,52,26085]],[[13304,13304],"mapped",[50,53,26085]],[[13305,13305],"mapped",[50,54,26085]],[[13306,13306],"mapped",[50,55,26085]],[[13307,13307],"mapped",[50,56,26085]],[[13308,13308],"mapped",[50,57,26085]],[[13309,13309],"mapped",[51,48,26085]],[[13310,13310],"mapped",[51,49,26085]],[[13311,13311],"mapped",[103,97,108]],[[13312,19893],"valid"],[[19894,19903],"disallowed"],[[19904,19967],"valid",[],"NV8"],[[19968,40869],"valid"],[[40870,40891],"valid"],[[40892,40899],"valid"],[[40900,40907],"valid"],[[40908,40908],"valid"],[[40909,40917],"valid"],[[40918,40959],"disallowed"],[[40960,42124],"valid"],[[42125,42127],"disallowed"],[[42128,42145],"valid",[],"NV8"],[[42146,42147],"valid",[],"NV8"],[[42148,42163],"valid",[],"NV8"],[[42164,42164],"valid",[],"NV8"],[[42165,42176],"valid",[],"NV8"],[[42177,42177],"valid",[],"NV8"],[[42178,42180],"valid",[],"NV8"],[[42181,42181],"valid",[],"NV8"],[[42182,42182],"valid",[],"NV8"],[[42183,42191],"disallowed"],[[42192,42237],"valid"],[[42238,42239],"valid",[],"NV8"],[[42240,42508],"valid"],[[42509,42511],"valid",[],"NV8"],[[42512,42539],"valid"],[[42540,42559],"disallowed"],[[42560,42560],"mapped",[42561]],[[42561,42561],"valid"],[[42562,42562],"mapped",[42563]],[[42563,42563],"valid"],[[42564,42564],"mapped",[42565]],[[42565,42565],"valid"],[[42566,42566],"mapped",[42567]],[[42567,42567],"valid"],[[42568,42568],"mapped",[42569]],[[42569,42569],"valid"],[[42570,42570],"mapped",[42571]],[[42571,42571],"valid"],[[42572,42572],"mapped",[42573]],[[42573,42573],"valid"],[[42574,42574],"mapped",[42575]],[[42575,42575],"valid"],[[42576,42576],"mapped",[42577]],[[42577,42577],"valid"],[[42578,42578],"mapped",[42579]],[[42579,42579],"valid"],[[42580,42580],"mapped",[42581]],[[42581,42581],"valid"],[[42582,42582],"mapped",[42583]],[[42583,42583],"valid"],[[42584,42584],"mapped",[42585]],[[42585,42585],"valid"],[[42586,42586],"mapped",[42587]],[[42587,42587],"valid"],[[42588,42588],"mapped",[42589]],[[42589,42589],"valid"],[[42590,42590],"mapped",[42591]],[[42591,42591],"valid"],[[42592,42592],"mapped",[42593]],[[42593,42593],"valid"],[[42594,42594],"mapped",[42595]],[[42595,42595],"valid"],[[42596,42596],"mapped",[42597]],[[42597,42597],"valid"],[[42598,42598],"mapped",[42599]],[[42599,42599],"valid"],[[42600,42600],"mapped",[42601]],[[42601,42601],"valid"],[[42602,42602],"mapped",[42603]],[[42603,42603],"valid"],[[42604,42604],"mapped",[42605]],[[42605,42607],"valid"],[[42608,42611],"valid",[],"NV8"],[[42612,42619],"valid"],[[42620,42621],"valid"],[[42622,42622],"valid",[],"NV8"],[[42623,42623],"valid"],[[42624,42624],"mapped",[42625]],[[42625,42625],"valid"],[[42626,42626],"mapped",[42627]],[[42627,42627],"valid"],[[42628,42628],"mapped",[42629]],[[42629,42629],"valid"],[[42630,42630],"mapped",[42631]],[[42631,42631],"valid"],[[42632,42632],"mapped",[42633]],[[42633,42633],"valid"],[[42634,42634],"mapped",[42635]],[[42635,42635],"valid"],[[42636,42636],"mapped",[42637]],[[42637,42637],"valid"],[[42638,42638],"mapped",[42639]],[[42639,42639],"valid"],[[42640,42640],"mapped",[42641]],[[42641,42641],"valid"],[[42642,42642],"mapped",[42643]],[[42643,42643],"valid"],[[42644,42644],"mapped",[42645]],[[42645,42645],"valid"],[[42646,42646],"mapped",[42647]],[[42647,42647],"valid"],[[42648,42648],"mapped",[42649]],[[42649,42649],"valid"],[[42650,42650],"mapped",[42651]],[[42651,42651],"valid"],[[42652,42652],"mapped",[1098]],[[42653,42653],"mapped",[1100]],[[42654,42654],"valid"],[[42655,42655],"valid"],[[42656,42725],"valid"],[[42726,42735],"valid",[],"NV8"],[[42736,42737],"valid"],[[42738,42743],"valid",[],"NV8"],[[42744,42751],"disallowed"],[[42752,42774],"valid",[],"NV8"],[[42775,42778],"valid"],[[42779,42783],"valid"],[[42784,42785],"valid",[],"NV8"],[[42786,42786],"mapped",[42787]],[[42787,42787],"valid"],[[42788,42788],"mapped",[42789]],[[42789,42789],"valid"],[[42790,42790],"mapped",[42791]],[[42791,42791],"valid"],[[42792,42792],"mapped",[42793]],[[42793,42793],"valid"],[[42794,42794],"mapped",[42795]],[[42795,42795],"valid"],[[42796,42796],"mapped",[42797]],[[42797,42797],"valid"],[[42798,42798],"mapped",[42799]],[[42799,42801],"valid"],[[42802,42802],"mapped",[42803]],[[42803,42803],"valid"],[[42804,42804],"mapped",[42805]],[[42805,42805],"valid"],[[42806,42806],"mapped",[42807]],[[42807,42807],"valid"],[[42808,42808],"mapped",[42809]],[[42809,42809],"valid"],[[42810,42810],"mapped",[42811]],[[42811,42811],"valid"],[[42812,42812],"mapped",[42813]],[[42813,42813],"valid"],[[42814,42814],"mapped",[42815]],[[42815,42815],"valid"],[[42816,42816],"mapped",[42817]],[[42817,42817],"valid"],[[42818,42818],"mapped",[42819]],[[42819,42819],"valid"],[[42820,42820],"mapped",[42821]],[[42821,42821],"valid"],[[42822,42822],"mapped",[42823]],[[42823,42823],"valid"],[[42824,42824],"mapped",[42825]],[[42825,42825],"valid"],[[42826,42826],"mapped",[42827]],[[42827,42827],"valid"],[[42828,42828],"mapped",[42829]],[[42829,42829],"valid"],[[42830,42830],"mapped",[42831]],[[42831,42831],"valid"],[[42832,42832],"mapped",[42833]],[[42833,42833],"valid"],[[42834,42834],"mapped",[42835]],[[42835,42835],"valid"],[[42836,42836],"mapped",[42837]],[[42837,42837],"valid"],[[42838,42838],"mapped",[42839]],[[42839,42839],"valid"],[[42840,42840],"mapped",[42841]],[[42841,42841],"valid"],[[42842,42842],"mapped",[42843]],[[42843,42843],"valid"],[[42844,42844],"mapped",[42845]],[[42845,42845],"valid"],[[42846,42846],"mapped",[42847]],[[42847,42847],"valid"],[[42848,42848],"mapped",[42849]],[[42849,42849],"valid"],[[42850,42850],"mapped",[42851]],[[42851,42851],"valid"],[[42852,42852],"mapped",[42853]],[[42853,42853],"valid"],[[42854,42854],"mapped",[42855]],[[42855,42855],"valid"],[[42856,42856],"mapped",[42857]],[[42857,42857],"valid"],[[42858,42858],"mapped",[42859]],[[42859,42859],"valid"],[[42860,42860],"mapped",[42861]],[[42861,42861],"valid"],[[42862,42862],"mapped",[42863]],[[42863,42863],"valid"],[[42864,42864],"mapped",[42863]],[[42865,42872],"valid"],[[42873,42873],"mapped",[42874]],[[42874,42874],"valid"],[[42875,42875],"mapped",[42876]],[[42876,42876],"valid"],[[42877,42877],"mapped",[7545]],[[42878,42878],"mapped",[42879]],[[42879,42879],"valid"],[[42880,42880],"mapped",[42881]],[[42881,42881],"valid"],[[42882,42882],"mapped",[42883]],[[42883,42883],"valid"],[[42884,42884],"mapped",[42885]],[[42885,42885],"valid"],[[42886,42886],"mapped",[42887]],[[42887,42888],"valid"],[[42889,42890],"valid",[],"NV8"],[[42891,42891],"mapped",[42892]],[[42892,42892],"valid"],[[42893,42893],"mapped",[613]],[[42894,42894],"valid"],[[42895,42895],"valid"],[[42896,42896],"mapped",[42897]],[[42897,42897],"valid"],[[42898,42898],"mapped",[42899]],[[42899,42899],"valid"],[[42900,42901],"valid"],[[42902,42902],"mapped",[42903]],[[42903,42903],"valid"],[[42904,42904],"mapped",[42905]],[[42905,42905],"valid"],[[42906,42906],"mapped",[42907]],[[42907,42907],"valid"],[[42908,42908],"mapped",[42909]],[[42909,42909],"valid"],[[42910,42910],"mapped",[42911]],[[42911,42911],"valid"],[[42912,42912],"mapped",[42913]],[[42913,42913],"valid"],[[42914,42914],"mapped",[42915]],[[42915,42915],"valid"],[[42916,42916],"mapped",[42917]],[[42917,42917],"valid"],[[42918,42918],"mapped",[42919]],[[42919,42919],"valid"],[[42920,42920],"mapped",[42921]],[[42921,42921],"valid"],[[42922,42922],"mapped",[614]],[[42923,42923],"mapped",[604]],[[42924,42924],"mapped",[609]],[[42925,42925],"mapped",[620]],[[42926,42927],"disallowed"],[[42928,42928],"mapped",[670]],[[42929,42929],"mapped",[647]],[[42930,42930],"mapped",[669]],[[42931,42931],"mapped",[43859]],[[42932,42932],"mapped",[42933]],[[42933,42933],"valid"],[[42934,42934],"mapped",[42935]],[[42935,42935],"valid"],[[42936,42998],"disallowed"],[[42999,42999],"valid"],[[43e3,43e3],"mapped",[295]],[[43001,43001],"mapped",[339]],[[43002,43002],"valid"],[[43003,43007],"valid"],[[43008,43047],"valid"],[[43048,43051],"valid",[],"NV8"],[[43052,43055],"disallowed"],[[43056,43065],"valid",[],"NV8"],[[43066,43071],"disallowed"],[[43072,43123],"valid"],[[43124,43127],"valid",[],"NV8"],[[43128,43135],"disallowed"],[[43136,43204],"valid"],[[43205,43213],"disallowed"],[[43214,43215],"valid",[],"NV8"],[[43216,43225],"valid"],[[43226,43231],"disallowed"],[[43232,43255],"valid"],[[43256,43258],"valid",[],"NV8"],[[43259,43259],"valid"],[[43260,43260],"valid",[],"NV8"],[[43261,43261],"valid"],[[43262,43263],"disallowed"],[[43264,43309],"valid"],[[43310,43311],"valid",[],"NV8"],[[43312,43347],"valid"],[[43348,43358],"disallowed"],[[43359,43359],"valid",[],"NV8"],[[43360,43388],"valid",[],"NV8"],[[43389,43391],"disallowed"],[[43392,43456],"valid"],[[43457,43469],"valid",[],"NV8"],[[43470,43470],"disallowed"],[[43471,43481],"valid"],[[43482,43485],"disallowed"],[[43486,43487],"valid",[],"NV8"],[[43488,43518],"valid"],[[43519,43519],"disallowed"],[[43520,43574],"valid"],[[43575,43583],"disallowed"],[[43584,43597],"valid"],[[43598,43599],"disallowed"],[[43600,43609],"valid"],[[43610,43611],"disallowed"],[[43612,43615],"valid",[],"NV8"],[[43616,43638],"valid"],[[43639,43641],"valid",[],"NV8"],[[43642,43643],"valid"],[[43644,43647],"valid"],[[43648,43714],"valid"],[[43715,43738],"disallowed"],[[43739,43741],"valid"],[[43742,43743],"valid",[],"NV8"],[[43744,43759],"valid"],[[43760,43761],"valid",[],"NV8"],[[43762,43766],"valid"],[[43767,43776],"disallowed"],[[43777,43782],"valid"],[[43783,43784],"disallowed"],[[43785,43790],"valid"],[[43791,43792],"disallowed"],[[43793,43798],"valid"],[[43799,43807],"disallowed"],[[43808,43814],"valid"],[[43815,43815],"disallowed"],[[43816,43822],"valid"],[[43823,43823],"disallowed"],[[43824,43866],"valid"],[[43867,43867],"valid",[],"NV8"],[[43868,43868],"mapped",[42791]],[[43869,43869],"mapped",[43831]],[[43870,43870],"mapped",[619]],[[43871,43871],"mapped",[43858]],[[43872,43875],"valid"],[[43876,43877],"valid"],[[43878,43887],"disallowed"],[[43888,43888],"mapped",[5024]],[[43889,43889],"mapped",[5025]],[[43890,43890],"mapped",[5026]],[[43891,43891],"mapped",[5027]],[[43892,43892],"mapped",[5028]],[[43893,43893],"mapped",[5029]],[[43894,43894],"mapped",[5030]],[[43895,43895],"mapped",[5031]],[[43896,43896],"mapped",[5032]],[[43897,43897],"mapped",[5033]],[[43898,43898],"mapped",[5034]],[[43899,43899],"mapped",[5035]],[[43900,43900],"mapped",[5036]],[[43901,43901],"mapped",[5037]],[[43902,43902],"mapped",[5038]],[[43903,43903],"mapped",[5039]],[[43904,43904],"mapped",[5040]],[[43905,43905],"mapped",[5041]],[[43906,43906],"mapped",[5042]],[[43907,43907],"mapped",[5043]],[[43908,43908],"mapped",[5044]],[[43909,43909],"mapped",[5045]],[[43910,43910],"mapped",[5046]],[[43911,43911],"mapped",[5047]],[[43912,43912],"mapped",[5048]],[[43913,43913],"mapped",[5049]],[[43914,43914],"mapped",[5050]],[[43915,43915],"mapped",[5051]],[[43916,43916],"mapped",[5052]],[[43917,43917],"mapped",[5053]],[[43918,43918],"mapped",[5054]],[[43919,43919],"mapped",[5055]],[[43920,43920],"mapped",[5056]],[[43921,43921],"mapped",[5057]],[[43922,43922],"mapped",[5058]],[[43923,43923],"mapped",[5059]],[[43924,43924],"mapped",[5060]],[[43925,43925],"mapped",[5061]],[[43926,43926],"mapped",[5062]],[[43927,43927],"mapped",[5063]],[[43928,43928],"mapped",[5064]],[[43929,43929],"mapped",[5065]],[[43930,43930],"mapped",[5066]],[[43931,43931],"mapped",[5067]],[[43932,43932],"mapped",[5068]],[[43933,43933],"mapped",[5069]],[[43934,43934],"mapped",[5070]],[[43935,43935],"mapped",[5071]],[[43936,43936],"mapped",[5072]],[[43937,43937],"mapped",[5073]],[[43938,43938],"mapped",[5074]],[[43939,43939],"mapped",[5075]],[[43940,43940],"mapped",[5076]],[[43941,43941],"mapped",[5077]],[[43942,43942],"mapped",[5078]],[[43943,43943],"mapped",[5079]],[[43944,43944],"mapped",[5080]],[[43945,43945],"mapped",[5081]],[[43946,43946],"mapped",[5082]],[[43947,43947],"mapped",[5083]],[[43948,43948],"mapped",[5084]],[[43949,43949],"mapped",[5085]],[[43950,43950],"mapped",[5086]],[[43951,43951],"mapped",[5087]],[[43952,43952],"mapped",[5088]],[[43953,43953],"mapped",[5089]],[[43954,43954],"mapped",[5090]],[[43955,43955],"mapped",[5091]],[[43956,43956],"mapped",[5092]],[[43957,43957],"mapped",[5093]],[[43958,43958],"mapped",[5094]],[[43959,43959],"mapped",[5095]],[[43960,43960],"mapped",[5096]],[[43961,43961],"mapped",[5097]],[[43962,43962],"mapped",[5098]],[[43963,43963],"mapped",[5099]],[[43964,43964],"mapped",[5100]],[[43965,43965],"mapped",[5101]],[[43966,43966],"mapped",[5102]],[[43967,43967],"mapped",[5103]],[[43968,44010],"valid"],[[44011,44011],"valid",[],"NV8"],[[44012,44013],"valid"],[[44014,44015],"disallowed"],[[44016,44025],"valid"],[[44026,44031],"disallowed"],[[44032,55203],"valid"],[[55204,55215],"disallowed"],[[55216,55238],"valid",[],"NV8"],[[55239,55242],"disallowed"],[[55243,55291],"valid",[],"NV8"],[[55292,55295],"disallowed"],[[55296,57343],"disallowed"],[[57344,63743],"disallowed"],[[63744,63744],"mapped",[35912]],[[63745,63745],"mapped",[26356]],[[63746,63746],"mapped",[36554]],[[63747,63747],"mapped",[36040]],[[63748,63748],"mapped",[28369]],[[63749,63749],"mapped",[20018]],[[63750,63750],"mapped",[21477]],[[63751,63752],"mapped",[40860]],[[63753,63753],"mapped",[22865]],[[63754,63754],"mapped",[37329]],[[63755,63755],"mapped",[21895]],[[63756,63756],"mapped",[22856]],[[63757,63757],"mapped",[25078]],[[63758,63758],"mapped",[30313]],[[63759,63759],"mapped",[32645]],[[63760,63760],"mapped",[34367]],[[63761,63761],"mapped",[34746]],[[63762,63762],"mapped",[35064]],[[63763,63763],"mapped",[37007]],[[63764,63764],"mapped",[27138]],[[63765,63765],"mapped",[27931]],[[63766,63766],"mapped",[28889]],[[63767,63767],"mapped",[29662]],[[63768,63768],"mapped",[33853]],[[63769,63769],"mapped",[37226]],[[63770,63770],"mapped",[39409]],[[63771,63771],"mapped",[20098]],[[63772,63772],"mapped",[21365]],[[63773,63773],"mapped",[27396]],[[63774,63774],"mapped",[29211]],[[63775,63775],"mapped",[34349]],[[63776,63776],"mapped",[40478]],[[63777,63777],"mapped",[23888]],[[63778,63778],"mapped",[28651]],[[63779,63779],"mapped",[34253]],[[63780,63780],"mapped",[35172]],[[63781,63781],"mapped",[25289]],[[63782,63782],"mapped",[33240]],[[63783,63783],"mapped",[34847]],[[63784,63784],"mapped",[24266]],[[63785,63785],"mapped",[26391]],[[63786,63786],"mapped",[28010]],[[63787,63787],"mapped",[29436]],[[63788,63788],"mapped",[37070]],[[63789,63789],"mapped",[20358]],[[63790,63790],"mapped",[20919]],[[63791,63791],"mapped",[21214]],[[63792,63792],"mapped",[25796]],[[63793,63793],"mapped",[27347]],[[63794,63794],"mapped",[29200]],[[63795,63795],"mapped",[30439]],[[63796,63796],"mapped",[32769]],[[63797,63797],"mapped",[34310]],[[63798,63798],"mapped",[34396]],[[63799,63799],"mapped",[36335]],[[63800,63800],"mapped",[38706]],[[63801,63801],"mapped",[39791]],[[63802,63802],"mapped",[40442]],[[63803,63803],"mapped",[30860]],[[63804,63804],"mapped",[31103]],[[63805,63805],"mapped",[32160]],[[63806,63806],"mapped",[33737]],[[63807,63807],"mapped",[37636]],[[63808,63808],"mapped",[40575]],[[63809,63809],"mapped",[35542]],[[63810,63810],"mapped",[22751]],[[63811,63811],"mapped",[24324]],[[63812,63812],"mapped",[31840]],[[63813,63813],"mapped",[32894]],[[63814,63814],"mapped",[29282]],[[63815,63815],"mapped",[30922]],[[63816,63816],"mapped",[36034]],[[63817,63817],"mapped",[38647]],[[63818,63818],"mapped",[22744]],[[63819,63819],"mapped",[23650]],[[63820,63820],"mapped",[27155]],[[63821,63821],"mapped",[28122]],[[63822,63822],"mapped",[28431]],[[63823,63823],"mapped",[32047]],[[63824,63824],"mapped",[32311]],[[63825,63825],"mapped",[38475]],[[63826,63826],"mapped",[21202]],[[63827,63827],"mapped",[32907]],[[63828,63828],"mapped",[20956]],[[63829,63829],"mapped",[20940]],[[63830,63830],"mapped",[31260]],[[63831,63831],"mapped",[32190]],[[63832,63832],"mapped",[33777]],[[63833,63833],"mapped",[38517]],[[63834,63834],"mapped",[35712]],[[63835,63835],"mapped",[25295]],[[63836,63836],"mapped",[27138]],[[63837,63837],"mapped",[35582]],[[63838,63838],"mapped",[20025]],[[63839,63839],"mapped",[23527]],[[63840,63840],"mapped",[24594]],[[63841,63841],"mapped",[29575]],[[63842,63842],"mapped",[30064]],[[63843,63843],"mapped",[21271]],[[63844,63844],"mapped",[30971]],[[63845,63845],"mapped",[20415]],[[63846,63846],"mapped",[24489]],[[63847,63847],"mapped",[19981]],[[63848,63848],"mapped",[27852]],[[63849,63849],"mapped",[25976]],[[63850,63850],"mapped",[32034]],[[63851,63851],"mapped",[21443]],[[63852,63852],"mapped",[22622]],[[63853,63853],"mapped",[30465]],[[63854,63854],"mapped",[33865]],[[63855,63855],"mapped",[35498]],[[63856,63856],"mapped",[27578]],[[63857,63857],"mapped",[36784]],[[63858,63858],"mapped",[27784]],[[63859,63859],"mapped",[25342]],[[63860,63860],"mapped",[33509]],[[63861,63861],"mapped",[25504]],[[63862,63862],"mapped",[30053]],[[63863,63863],"mapped",[20142]],[[63864,63864],"mapped",[20841]],[[63865,63865],"mapped",[20937]],[[63866,63866],"mapped",[26753]],[[63867,63867],"mapped",[31975]],[[63868,63868],"mapped",[33391]],[[63869,63869],"mapped",[35538]],[[63870,63870],"mapped",[37327]],[[63871,63871],"mapped",[21237]],[[63872,63872],"mapped",[21570]],[[63873,63873],"mapped",[22899]],[[63874,63874],"mapped",[24300]],[[63875,63875],"mapped",[26053]],[[63876,63876],"mapped",[28670]],[[63877,63877],"mapped",[31018]],[[63878,63878],"mapped",[38317]],[[63879,63879],"mapped",[39530]],[[63880,63880],"mapped",[40599]],[[63881,63881],"mapped",[40654]],[[63882,63882],"mapped",[21147]],[[63883,63883],"mapped",[26310]],[[63884,63884],"mapped",[27511]],[[63885,63885],"mapped",[36706]],[[63886,63886],"mapped",[24180]],[[63887,63887],"mapped",[24976]],[[63888,63888],"mapped",[25088]],[[63889,63889],"mapped",[25754]],[[63890,63890],"mapped",[28451]],[[63891,63891],"mapped",[29001]],[[63892,63892],"mapped",[29833]],[[63893,63893],"mapped",[31178]],[[63894,63894],"mapped",[32244]],[[63895,63895],"mapped",[32879]],[[63896,63896],"mapped",[36646]],[[63897,63897],"mapped",[34030]],[[63898,63898],"mapped",[36899]],[[63899,63899],"mapped",[37706]],[[63900,63900],"mapped",[21015]],[[63901,63901],"mapped",[21155]],[[63902,63902],"mapped",[21693]],[[63903,63903],"mapped",[28872]],[[63904,63904],"mapped",[35010]],[[63905,63905],"mapped",[35498]],[[63906,63906],"mapped",[24265]],[[63907,63907],"mapped",[24565]],[[63908,63908],"mapped",[25467]],[[63909,63909],"mapped",[27566]],[[63910,63910],"mapped",[31806]],[[63911,63911],"mapped",[29557]],[[63912,63912],"mapped",[20196]],[[63913,63913],"mapped",[22265]],[[63914,63914],"mapped",[23527]],[[63915,63915],"mapped",[23994]],[[63916,63916],"mapped",[24604]],[[63917,63917],"mapped",[29618]],[[63918,63918],"mapped",[29801]],[[63919,63919],"mapped",[32666]],[[63920,63920],"mapped",[32838]],[[63921,63921],"mapped",[37428]],[[63922,63922],"mapped",[38646]],[[63923,63923],"mapped",[38728]],[[63924,63924],"mapped",[38936]],[[63925,63925],"mapped",[20363]],[[63926,63926],"mapped",[31150]],[[63927,63927],"mapped",[37300]],[[63928,63928],"mapped",[38584]],[[63929,63929],"mapped",[24801]],[[63930,63930],"mapped",[20102]],[[63931,63931],"mapped",[20698]],[[63932,63932],"mapped",[23534]],[[63933,63933],"mapped",[23615]],[[63934,63934],"mapped",[26009]],[[63935,63935],"mapped",[27138]],[[63936,63936],"mapped",[29134]],[[63937,63937],"mapped",[30274]],[[63938,63938],"mapped",[34044]],[[63939,63939],"mapped",[36988]],[[63940,63940],"mapped",[40845]],[[63941,63941],"mapped",[26248]],[[63942,63942],"mapped",[38446]],[[63943,63943],"mapped",[21129]],[[63944,63944],"mapped",[26491]],[[63945,63945],"mapped",[26611]],[[63946,63946],"mapped",[27969]],[[63947,63947],"mapped",[28316]],[[63948,63948],"mapped",[29705]],[[63949,63949],"mapped",[30041]],[[63950,63950],"mapped",[30827]],[[63951,63951],"mapped",[32016]],[[63952,63952],"mapped",[39006]],[[63953,63953],"mapped",[20845]],[[63954,63954],"mapped",[25134]],[[63955,63955],"mapped",[38520]],[[63956,63956],"mapped",[20523]],[[63957,63957],"mapped",[23833]],[[63958,63958],"mapped",[28138]],[[63959,63959],"mapped",[36650]],[[63960,63960],"mapped",[24459]],[[63961,63961],"mapped",[24900]],[[63962,63962],"mapped",[26647]],[[63963,63963],"mapped",[29575]],[[63964,63964],"mapped",[38534]],[[63965,63965],"mapped",[21033]],[[63966,63966],"mapped",[21519]],[[63967,63967],"mapped",[23653]],[[63968,63968],"mapped",[26131]],[[63969,63969],"mapped",[26446]],[[63970,63970],"mapped",[26792]],[[63971,63971],"mapped",[27877]],[[63972,63972],"mapped",[29702]],[[63973,63973],"mapped",[30178]],[[63974,63974],"mapped",[32633]],[[63975,63975],"mapped",[35023]],[[63976,63976],"mapped",[35041]],[[63977,63977],"mapped",[37324]],[[63978,63978],"mapped",[38626]],[[63979,63979],"mapped",[21311]],[[63980,63980],"mapped",[28346]],[[63981,63981],"mapped",[21533]],[[63982,63982],"mapped",[29136]],[[63983,63983],"mapped",[29848]],[[63984,63984],"mapped",[34298]],[[63985,63985],"mapped",[38563]],[[63986,63986],"mapped",[40023]],[[63987,63987],"mapped",[40607]],[[63988,63988],"mapped",[26519]],[[63989,63989],"mapped",[28107]],[[63990,63990],"mapped",[33256]],[[63991,63991],"mapped",[31435]],[[63992,63992],"mapped",[31520]],[[63993,63993],"mapped",[31890]],[[63994,63994],"mapped",[29376]],[[63995,63995],"mapped",[28825]],[[63996,63996],"mapped",[35672]],[[63997,63997],"mapped",[20160]],[[63998,63998],"mapped",[33590]],[[63999,63999],"mapped",[21050]],[[64e3,64e3],"mapped",[20999]],[[64001,64001],"mapped",[24230]],[[64002,64002],"mapped",[25299]],[[64003,64003],"mapped",[31958]],[[64004,64004],"mapped",[23429]],[[64005,64005],"mapped",[27934]],[[64006,64006],"mapped",[26292]],[[64007,64007],"mapped",[36667]],[[64008,64008],"mapped",[34892]],[[64009,64009],"mapped",[38477]],[[64010,64010],"mapped",[35211]],[[64011,64011],"mapped",[24275]],[[64012,64012],"mapped",[20800]],[[64013,64013],"mapped",[21952]],[[64014,64015],"valid"],[[64016,64016],"mapped",[22618]],[[64017,64017],"valid"],[[64018,64018],"mapped",[26228]],[[64019,64020],"valid"],[[64021,64021],"mapped",[20958]],[[64022,64022],"mapped",[29482]],[[64023,64023],"mapped",[30410]],[[64024,64024],"mapped",[31036]],[[64025,64025],"mapped",[31070]],[[64026,64026],"mapped",[31077]],[[64027,64027],"mapped",[31119]],[[64028,64028],"mapped",[38742]],[[64029,64029],"mapped",[31934]],[[64030,64030],"mapped",[32701]],[[64031,64031],"valid"],[[64032,64032],"mapped",[34322]],[[64033,64033],"valid"],[[64034,64034],"mapped",[35576]],[[64035,64036],"valid"],[[64037,64037],"mapped",[36920]],[[64038,64038],"mapped",[37117]],[[64039,64041],"valid"],[[64042,64042],"mapped",[39151]],[[64043,64043],"mapped",[39164]],[[64044,64044],"mapped",[39208]],[[64045,64045],"mapped",[40372]],[[64046,64046],"mapped",[37086]],[[64047,64047],"mapped",[38583]],[[64048,64048],"mapped",[20398]],[[64049,64049],"mapped",[20711]],[[64050,64050],"mapped",[20813]],[[64051,64051],"mapped",[21193]],[[64052,64052],"mapped",[21220]],[[64053,64053],"mapped",[21329]],[[64054,64054],"mapped",[21917]],[[64055,64055],"mapped",[22022]],[[64056,64056],"mapped",[22120]],[[64057,64057],"mapped",[22592]],[[64058,64058],"mapped",[22696]],[[64059,64059],"mapped",[23652]],[[64060,64060],"mapped",[23662]],[[64061,64061],"mapped",[24724]],[[64062,64062],"mapped",[24936]],[[64063,64063],"mapped",[24974]],[[64064,64064],"mapped",[25074]],[[64065,64065],"mapped",[25935]],[[64066,64066],"mapped",[26082]],[[64067,64067],"mapped",[26257]],[[64068,64068],"mapped",[26757]],[[64069,64069],"mapped",[28023]],[[64070,64070],"mapped",[28186]],[[64071,64071],"mapped",[28450]],[[64072,64072],"mapped",[29038]],[[64073,64073],"mapped",[29227]],[[64074,64074],"mapped",[29730]],[[64075,64075],"mapped",[30865]],[[64076,64076],"mapped",[31038]],[[64077,64077],"mapped",[31049]],[[64078,64078],"mapped",[31048]],[[64079,64079],"mapped",[31056]],[[64080,64080],"mapped",[31062]],[[64081,64081],"mapped",[31069]],[[64082,64082],"mapped",[31117]],[[64083,64083],"mapped",[31118]],[[64084,64084],"mapped",[31296]],[[64085,64085],"mapped",[31361]],[[64086,64086],"mapped",[31680]],[[64087,64087],"mapped",[32244]],[[64088,64088],"mapped",[32265]],[[64089,64089],"mapped",[32321]],[[64090,64090],"mapped",[32626]],[[64091,64091],"mapped",[32773]],[[64092,64092],"mapped",[33261]],[[64093,64094],"mapped",[33401]],[[64095,64095],"mapped",[33879]],[[64096,64096],"mapped",[35088]],[[64097,64097],"mapped",[35222]],[[64098,64098],"mapped",[35585]],[[64099,64099],"mapped",[35641]],[[64100,64100],"mapped",[36051]],[[64101,64101],"mapped",[36104]],[[64102,64102],"mapped",[36790]],[[64103,64103],"mapped",[36920]],[[64104,64104],"mapped",[38627]],[[64105,64105],"mapped",[38911]],[[64106,64106],"mapped",[38971]],[[64107,64107],"mapped",[24693]],[[64108,64108],"mapped",[148206]],[[64109,64109],"mapped",[33304]],[[64110,64111],"disallowed"],[[64112,64112],"mapped",[20006]],[[64113,64113],"mapped",[20917]],[[64114,64114],"mapped",[20840]],[[64115,64115],"mapped",[20352]],[[64116,64116],"mapped",[20805]],[[64117,64117],"mapped",[20864]],[[64118,64118],"mapped",[21191]],[[64119,64119],"mapped",[21242]],[[64120,64120],"mapped",[21917]],[[64121,64121],"mapped",[21845]],[[64122,64122],"mapped",[21913]],[[64123,64123],"mapped",[21986]],[[64124,64124],"mapped",[22618]],[[64125,64125],"mapped",[22707]],[[64126,64126],"mapped",[22852]],[[64127,64127],"mapped",[22868]],[[64128,64128],"mapped",[23138]],[[64129,64129],"mapped",[23336]],[[64130,64130],"mapped",[24274]],[[64131,64131],"mapped",[24281]],[[64132,64132],"mapped",[24425]],[[64133,64133],"mapped",[24493]],[[64134,64134],"mapped",[24792]],[[64135,64135],"mapped",[24910]],[[64136,64136],"mapped",[24840]],[[64137,64137],"mapped",[24974]],[[64138,64138],"mapped",[24928]],[[64139,64139],"mapped",[25074]],[[64140,64140],"mapped",[25140]],[[64141,64141],"mapped",[25540]],[[64142,64142],"mapped",[25628]],[[64143,64143],"mapped",[25682]],[[64144,64144],"mapped",[25942]],[[64145,64145],"mapped",[26228]],[[64146,64146],"mapped",[26391]],[[64147,64147],"mapped",[26395]],[[64148,64148],"mapped",[26454]],[[64149,64149],"mapped",[27513]],[[64150,64150],"mapped",[27578]],[[64151,64151],"mapped",[27969]],[[64152,64152],"mapped",[28379]],[[64153,64153],"mapped",[28363]],[[64154,64154],"mapped",[28450]],[[64155,64155],"mapped",[28702]],[[64156,64156],"mapped",[29038]],[[64157,64157],"mapped",[30631]],[[64158,64158],"mapped",[29237]],[[64159,64159],"mapped",[29359]],[[64160,64160],"mapped",[29482]],[[64161,64161],"mapped",[29809]],[[64162,64162],"mapped",[29958]],[[64163,64163],"mapped",[30011]],[[64164,64164],"mapped",[30237]],[[64165,64165],"mapped",[30239]],[[64166,64166],"mapped",[30410]],[[64167,64167],"mapped",[30427]],[[64168,64168],"mapped",[30452]],[[64169,64169],"mapped",[30538]],[[64170,64170],"mapped",[30528]],[[64171,64171],"mapped",[30924]],[[64172,64172],"mapped",[31409]],[[64173,64173],"mapped",[31680]],[[64174,64174],"mapped",[31867]],[[64175,64175],"mapped",[32091]],[[64176,64176],"mapped",[32244]],[[64177,64177],"mapped",[32574]],[[64178,64178],"mapped",[32773]],[[64179,64179],"mapped",[33618]],[[64180,64180],"mapped",[33775]],[[64181,64181],"mapped",[34681]],[[64182,64182],"mapped",[35137]],[[64183,64183],"mapped",[35206]],[[64184,64184],"mapped",[35222]],[[64185,64185],"mapped",[35519]],[[64186,64186],"mapped",[35576]],[[64187,64187],"mapped",[35531]],[[64188,64188],"mapped",[35585]],[[64189,64189],"mapped",[35582]],[[64190,64190],"mapped",[35565]],[[64191,64191],"mapped",[35641]],[[64192,64192],"mapped",[35722]],[[64193,64193],"mapped",[36104]],[[64194,64194],"mapped",[36664]],[[64195,64195],"mapped",[36978]],[[64196,64196],"mapped",[37273]],[[64197,64197],"mapped",[37494]],[[64198,64198],"mapped",[38524]],[[64199,64199],"mapped",[38627]],[[64200,64200],"mapped",[38742]],[[64201,64201],"mapped",[38875]],[[64202,64202],"mapped",[38911]],[[64203,64203],"mapped",[38923]],[[64204,64204],"mapped",[38971]],[[64205,64205],"mapped",[39698]],[[64206,64206],"mapped",[40860]],[[64207,64207],"mapped",[141386]],[[64208,64208],"mapped",[141380]],[[64209,64209],"mapped",[144341]],[[64210,64210],"mapped",[15261]],[[64211,64211],"mapped",[16408]],[[64212,64212],"mapped",[16441]],[[64213,64213],"mapped",[152137]],[[64214,64214],"mapped",[154832]],[[64215,64215],"mapped",[163539]],[[64216,64216],"mapped",[40771]],[[64217,64217],"mapped",[40846]],[[64218,64255],"disallowed"],[[64256,64256],"mapped",[102,102]],[[64257,64257],"mapped",[102,105]],[[64258,64258],"mapped",[102,108]],[[64259,64259],"mapped",[102,102,105]],[[64260,64260],"mapped",[102,102,108]],[[64261,64262],"mapped",[115,116]],[[64263,64274],"disallowed"],[[64275,64275],"mapped",[1396,1398]],[[64276,64276],"mapped",[1396,1381]],[[64277,64277],"mapped",[1396,1387]],[[64278,64278],"mapped",[1406,1398]],[[64279,64279],"mapped",[1396,1389]],[[64280,64284],"disallowed"],[[64285,64285],"mapped",[1497,1460]],[[64286,64286],"valid"],[[64287,64287],"mapped",[1522,1463]],[[64288,64288],"mapped",[1506]],[[64289,64289],"mapped",[1488]],[[64290,64290],"mapped",[1491]],[[64291,64291],"mapped",[1492]],[[64292,64292],"mapped",[1499]],[[64293,64293],"mapped",[1500]],[[64294,64294],"mapped",[1501]],[[64295,64295],"mapped",[1512]],[[64296,64296],"mapped",[1514]],[[64297,64297],"disallowed_STD3_mapped",[43]],[[64298,64298],"mapped",[1513,1473]],[[64299,64299],"mapped",[1513,1474]],[[64300,64300],"mapped",[1513,1468,1473]],[[64301,64301],"mapped",[1513,1468,1474]],[[64302,64302],"mapped",[1488,1463]],[[64303,64303],"mapped",[1488,1464]],[[64304,64304],"mapped",[1488,1468]],[[64305,64305],"mapped",[1489,1468]],[[64306,64306],"mapped",[1490,1468]],[[64307,64307],"mapped",[1491,1468]],[[64308,64308],"mapped",[1492,1468]],[[64309,64309],"mapped",[1493,1468]],[[64310,64310],"mapped",[1494,1468]],[[64311,64311],"disallowed"],[[64312,64312],"mapped",[1496,1468]],[[64313,64313],"mapped",[1497,1468]],[[64314,64314],"mapped",[1498,1468]],[[64315,64315],"mapped",[1499,1468]],[[64316,64316],"mapped",[1500,1468]],[[64317,64317],"disallowed"],[[64318,64318],"mapped",[1502,1468]],[[64319,64319],"disallowed"],[[64320,64320],"mapped",[1504,1468]],[[64321,64321],"mapped",[1505,1468]],[[64322,64322],"disallowed"],[[64323,64323],"mapped",[1507,1468]],[[64324,64324],"mapped",[1508,1468]],[[64325,64325],"disallowed"],[[64326,64326],"mapped",[1510,1468]],[[64327,64327],"mapped",[1511,1468]],[[64328,64328],"mapped",[1512,1468]],[[64329,64329],"mapped",[1513,1468]],[[64330,64330],"mapped",[1514,1468]],[[64331,64331],"mapped",[1493,1465]],[[64332,64332],"mapped",[1489,1471]],[[64333,64333],"mapped",[1499,1471]],[[64334,64334],"mapped",[1508,1471]],[[64335,64335],"mapped",[1488,1500]],[[64336,64337],"mapped",[1649]],[[64338,64341],"mapped",[1659]],[[64342,64345],"mapped",[1662]],[[64346,64349],"mapped",[1664]],[[64350,64353],"mapped",[1658]],[[64354,64357],"mapped",[1663]],[[64358,64361],"mapped",[1657]],[[64362,64365],"mapped",[1700]],[[64366,64369],"mapped",[1702]],[[64370,64373],"mapped",[1668]],[[64374,64377],"mapped",[1667]],[[64378,64381],"mapped",[1670]],[[64382,64385],"mapped",[1671]],[[64386,64387],"mapped",[1677]],[[64388,64389],"mapped",[1676]],[[64390,64391],"mapped",[1678]],[[64392,64393],"mapped",[1672]],[[64394,64395],"mapped",[1688]],[[64396,64397],"mapped",[1681]],[[64398,64401],"mapped",[1705]],[[64402,64405],"mapped",[1711]],[[64406,64409],"mapped",[1715]],[[64410,64413],"mapped",[1713]],[[64414,64415],"mapped",[1722]],[[64416,64419],"mapped",[1723]],[[64420,64421],"mapped",[1728]],[[64422,64425],"mapped",[1729]],[[64426,64429],"mapped",[1726]],[[64430,64431],"mapped",[1746]],[[64432,64433],"mapped",[1747]],[[64434,64449],"valid",[],"NV8"],[[64450,64466],"disallowed"],[[64467,64470],"mapped",[1709]],[[64471,64472],"mapped",[1735]],[[64473,64474],"mapped",[1734]],[[64475,64476],"mapped",[1736]],[[64477,64477],"mapped",[1735,1652]],[[64478,64479],"mapped",[1739]],[[64480,64481],"mapped",[1733]],[[64482,64483],"mapped",[1737]],[[64484,64487],"mapped",[1744]],[[64488,64489],"mapped",[1609]],[[64490,64491],"mapped",[1574,1575]],[[64492,64493],"mapped",[1574,1749]],[[64494,64495],"mapped",[1574,1608]],[[64496,64497],"mapped",[1574,1735]],[[64498,64499],"mapped",[1574,1734]],[[64500,64501],"mapped",[1574,1736]],[[64502,64504],"mapped",[1574,1744]],[[64505,64507],"mapped",[1574,1609]],[[64508,64511],"mapped",[1740]],[[64512,64512],"mapped",[1574,1580]],[[64513,64513],"mapped",[1574,1581]],[[64514,64514],"mapped",[1574,1605]],[[64515,64515],"mapped",[1574,1609]],[[64516,64516],"mapped",[1574,1610]],[[64517,64517],"mapped",[1576,1580]],[[64518,64518],"mapped",[1576,1581]],[[64519,64519],"mapped",[1576,1582]],[[64520,64520],"mapped",[1576,1605]],[[64521,64521],"mapped",[1576,1609]],[[64522,64522],"mapped",[1576,1610]],[[64523,64523],"mapped",[1578,1580]],[[64524,64524],"mapped",[1578,1581]],[[64525,64525],"mapped",[1578,1582]],[[64526,64526],"mapped",[1578,1605]],[[64527,64527],"mapped",[1578,1609]],[[64528,64528],"mapped",[1578,1610]],[[64529,64529],"mapped",[1579,1580]],[[64530,64530],"mapped",[1579,1605]],[[64531,64531],"mapped",[1579,1609]],[[64532,64532],"mapped",[1579,1610]],[[64533,64533],"mapped",[1580,1581]],[[64534,64534],"mapped",[1580,1605]],[[64535,64535],"mapped",[1581,1580]],[[64536,64536],"mapped",[1581,1605]],[[64537,64537],"mapped",[1582,1580]],[[64538,64538],"mapped",[1582,1581]],[[64539,64539],"mapped",[1582,1605]],[[64540,64540],"mapped",[1587,1580]],[[64541,64541],"mapped",[1587,1581]],[[64542,64542],"mapped",[1587,1582]],[[64543,64543],"mapped",[1587,1605]],[[64544,64544],"mapped",[1589,1581]],[[64545,64545],"mapped",[1589,1605]],[[64546,64546],"mapped",[1590,1580]],[[64547,64547],"mapped",[1590,1581]],[[64548,64548],"mapped",[1590,1582]],[[64549,64549],"mapped",[1590,1605]],[[64550,64550],"mapped",[1591,1581]],[[64551,64551],"mapped",[1591,1605]],[[64552,64552],"mapped",[1592,1605]],[[64553,64553],"mapped",[1593,1580]],[[64554,64554],"mapped",[1593,1605]],[[64555,64555],"mapped",[1594,1580]],[[64556,64556],"mapped",[1594,1605]],[[64557,64557],"mapped",[1601,1580]],[[64558,64558],"mapped",[1601,1581]],[[64559,64559],"mapped",[1601,1582]],[[64560,64560],"mapped",[1601,1605]],[[64561,64561],"mapped",[1601,1609]],[[64562,64562],"mapped",[1601,1610]],[[64563,64563],"mapped",[1602,1581]],[[64564,64564],"mapped",[1602,1605]],[[64565,64565],"mapped",[1602,1609]],[[64566,64566],"mapped",[1602,1610]],[[64567,64567],"mapped",[1603,1575]],[[64568,64568],"mapped",[1603,1580]],[[64569,64569],"mapped",[1603,1581]],[[64570,64570],"mapped",[1603,1582]],[[64571,64571],"mapped",[1603,1604]],[[64572,64572],"mapped",[1603,1605]],[[64573,64573],"mapped",[1603,1609]],[[64574,64574],"mapped",[1603,1610]],[[64575,64575],"mapped",[1604,1580]],[[64576,64576],"mapped",[1604,1581]],[[64577,64577],"mapped",[1604,1582]],[[64578,64578],"mapped",[1604,1605]],[[64579,64579],"mapped",[1604,1609]],[[64580,64580],"mapped",[1604,1610]],[[64581,64581],"mapped",[1605,1580]],[[64582,64582],"mapped",[1605,1581]],[[64583,64583],"mapped",[1605,1582]],[[64584,64584],"mapped",[1605,1605]],[[64585,64585],"mapped",[1605,1609]],[[64586,64586],"mapped",[1605,1610]],[[64587,64587],"mapped",[1606,1580]],[[64588,64588],"mapped",[1606,1581]],[[64589,64589],"mapped",[1606,1582]],[[64590,64590],"mapped",[1606,1605]],[[64591,64591],"mapped",[1606,1609]],[[64592,64592],"mapped",[1606,1610]],[[64593,64593],"mapped",[1607,1580]],[[64594,64594],"mapped",[1607,1605]],[[64595,64595],"mapped",[1607,1609]],[[64596,64596],"mapped",[1607,1610]],[[64597,64597],"mapped",[1610,1580]],[[64598,64598],"mapped",[1610,1581]],[[64599,64599],"mapped",[1610,1582]],[[64600,64600],"mapped",[1610,1605]],[[64601,64601],"mapped",[1610,1609]],[[64602,64602],"mapped",[1610,1610]],[[64603,64603],"mapped",[1584,1648]],[[64604,64604],"mapped",[1585,1648]],[[64605,64605],"mapped",[1609,1648]],[[64606,64606],"disallowed_STD3_mapped",[32,1612,1617]],[[64607,64607],"disallowed_STD3_mapped",[32,1613,1617]],[[64608,64608],"disallowed_STD3_mapped",[32,1614,1617]],[[64609,64609],"disallowed_STD3_mapped",[32,1615,1617]],[[64610,64610],"disallowed_STD3_mapped",[32,1616,1617]],[[64611,64611],"disallowed_STD3_mapped",[32,1617,1648]],[[64612,64612],"mapped",[1574,1585]],[[64613,64613],"mapped",[1574,1586]],[[64614,64614],"mapped",[1574,1605]],[[64615,64615],"mapped",[1574,1606]],[[64616,64616],"mapped",[1574,1609]],[[64617,64617],"mapped",[1574,1610]],[[64618,64618],"mapped",[1576,1585]],[[64619,64619],"mapped",[1576,1586]],[[64620,64620],"mapped",[1576,1605]],[[64621,64621],"mapped",[1576,1606]],[[64622,64622],"mapped",[1576,1609]],[[64623,64623],"mapped",[1576,1610]],[[64624,64624],"mapped",[1578,1585]],[[64625,64625],"mapped",[1578,1586]],[[64626,64626],"mapped",[1578,1605]],[[64627,64627],"mapped",[1578,1606]],[[64628,64628],"mapped",[1578,1609]],[[64629,64629],"mapped",[1578,1610]],[[64630,64630],"mapped",[1579,1585]],[[64631,64631],"mapped",[1579,1586]],[[64632,64632],"mapped",[1579,1605]],[[64633,64633],"mapped",[1579,1606]],[[64634,64634],"mapped",[1579,1609]],[[64635,64635],"mapped",[1579,1610]],[[64636,64636],"mapped",[1601,1609]],[[64637,64637],"mapped",[1601,1610]],[[64638,64638],"mapped",[1602,1609]],[[64639,64639],"mapped",[1602,1610]],[[64640,64640],"mapped",[1603,1575]],[[64641,64641],"mapped",[1603,1604]],[[64642,64642],"mapped",[1603,1605]],[[64643,64643],"mapped",[1603,1609]],[[64644,64644],"mapped",[1603,1610]],[[64645,64645],"mapped",[1604,1605]],[[64646,64646],"mapped",[1604,1609]],[[64647,64647],"mapped",[1604,1610]],[[64648,64648],"mapped",[1605,1575]],[[64649,64649],"mapped",[1605,1605]],[[64650,64650],"mapped",[1606,1585]],[[64651,64651],"mapped",[1606,1586]],[[64652,64652],"mapped",[1606,1605]],[[64653,64653],"mapped",[1606,1606]],[[64654,64654],"mapped",[1606,1609]],[[64655,64655],"mapped",[1606,1610]],[[64656,64656],"mapped",[1609,1648]],[[64657,64657],"mapped",[1610,1585]],[[64658,64658],"mapped",[1610,1586]],[[64659,64659],"mapped",[1610,1605]],[[64660,64660],"mapped",[1610,1606]],[[64661,64661],"mapped",[1610,1609]],[[64662,64662],"mapped",[1610,1610]],[[64663,64663],"mapped",[1574,1580]],[[64664,64664],"mapped",[1574,1581]],[[64665,64665],"mapped",[1574,1582]],[[64666,64666],"mapped",[1574,1605]],[[64667,64667],"mapped",[1574,1607]],[[64668,64668],"mapped",[1576,1580]],[[64669,64669],"mapped",[1576,1581]],[[64670,64670],"mapped",[1576,1582]],[[64671,64671],"mapped",[1576,1605]],[[64672,64672],"mapped",[1576,1607]],[[64673,64673],"mapped",[1578,1580]],[[64674,64674],"mapped",[1578,1581]],[[64675,64675],"mapped",[1578,1582]],[[64676,64676],"mapped",[1578,1605]],[[64677,64677],"mapped",[1578,1607]],[[64678,64678],"mapped",[1579,1605]],[[64679,64679],"mapped",[1580,1581]],[[64680,64680],"mapped",[1580,1605]],[[64681,64681],"mapped",[1581,1580]],[[64682,64682],"mapped",[1581,1605]],[[64683,64683],"mapped",[1582,1580]],[[64684,64684],"mapped",[1582,1605]],[[64685,64685],"mapped",[1587,1580]],[[64686,64686],"mapped",[1587,1581]],[[64687,64687],"mapped",[1587,1582]],[[64688,64688],"mapped",[1587,1605]],[[64689,64689],"mapped",[1589,1581]],[[64690,64690],"mapped",[1589,1582]],[[64691,64691],"mapped",[1589,1605]],[[64692,64692],"mapped",[1590,1580]],[[64693,64693],"mapped",[1590,1581]],[[64694,64694],"mapped",[1590,1582]],[[64695,64695],"mapped",[1590,1605]],[[64696,64696],"mapped",[1591,1581]],[[64697,64697],"mapped",[1592,1605]],[[64698,64698],"mapped",[1593,1580]],[[64699,64699],"mapped",[1593,1605]],[[64700,64700],"mapped",[1594,1580]],[[64701,64701],"mapped",[1594,1605]],[[64702,64702],"mapped",[1601,1580]],[[64703,64703],"mapped",[1601,1581]],[[64704,64704],"mapped",[1601,1582]],[[64705,64705],"mapped",[1601,1605]],[[64706,64706],"mapped",[1602,1581]],[[64707,64707],"mapped",[1602,1605]],[[64708,64708],"mapped",[1603,1580]],[[64709,64709],"mapped",[1603,1581]],[[64710,64710],"mapped",[1603,1582]],[[64711,64711],"mapped",[1603,1604]],[[64712,64712],"mapped",[1603,1605]],[[64713,64713],"mapped",[1604,1580]],[[64714,64714],"mapped",[1604,1581]],[[64715,64715],"mapped",[1604,1582]],[[64716,64716],"mapped",[1604,1605]],[[64717,64717],"mapped",[1604,1607]],[[64718,64718],"mapped",[1605,1580]],[[64719,64719],"mapped",[1605,1581]],[[64720,64720],"mapped",[1605,1582]],[[64721,64721],"mapped",[1605,1605]],[[64722,64722],"mapped",[1606,1580]],[[64723,64723],"mapped",[1606,1581]],[[64724,64724],"mapped",[1606,1582]],[[64725,64725],"mapped",[1606,1605]],[[64726,64726],"mapped",[1606,1607]],[[64727,64727],"mapped",[1607,1580]],[[64728,64728],"mapped",[1607,1605]],[[64729,64729],"mapped",[1607,1648]],[[64730,64730],"mapped",[1610,1580]],[[64731,64731],"mapped",[1610,1581]],[[64732,64732],"mapped",[1610,1582]],[[64733,64733],"mapped",[1610,1605]],[[64734,64734],"mapped",[1610,1607]],[[64735,64735],"mapped",[1574,1605]],[[64736,64736],"mapped",[1574,1607]],[[64737,64737],"mapped",[1576,1605]],[[64738,64738],"mapped",[1576,1607]],[[64739,64739],"mapped",[1578,1605]],[[64740,64740],"mapped",[1578,1607]],[[64741,64741],"mapped",[1579,1605]],[[64742,64742],"mapped",[1579,1607]],[[64743,64743],"mapped",[1587,1605]],[[64744,64744],"mapped",[1587,1607]],[[64745,64745],"mapped",[1588,1605]],[[64746,64746],"mapped",[1588,1607]],[[64747,64747],"mapped",[1603,1604]],[[64748,64748],"mapped",[1603,1605]],[[64749,64749],"mapped",[1604,1605]],[[64750,64750],"mapped",[1606,1605]],[[64751,64751],"mapped",[1606,1607]],[[64752,64752],"mapped",[1610,1605]],[[64753,64753],"mapped",[1610,1607]],[[64754,64754],"mapped",[1600,1614,1617]],[[64755,64755],"mapped",[1600,1615,1617]],[[64756,64756],"mapped",[1600,1616,1617]],[[64757,64757],"mapped",[1591,1609]],[[64758,64758],"mapped",[1591,1610]],[[64759,64759],"mapped",[1593,1609]],[[64760,64760],"mapped",[1593,1610]],[[64761,64761],"mapped",[1594,1609]],[[64762,64762],"mapped",[1594,1610]],[[64763,64763],"mapped",[1587,1609]],[[64764,64764],"mapped",[1587,1610]],[[64765,64765],"mapped",[1588,1609]],[[64766,64766],"mapped",[1588,1610]],[[64767,64767],"mapped",[1581,1609]],[[64768,64768],"mapped",[1581,1610]],[[64769,64769],"mapped",[1580,1609]],[[64770,64770],"mapped",[1580,1610]],[[64771,64771],"mapped",[1582,1609]],[[64772,64772],"mapped",[1582,1610]],[[64773,64773],"mapped",[1589,1609]],[[64774,64774],"mapped",[1589,1610]],[[64775,64775],"mapped",[1590,1609]],[[64776,64776],"mapped",[1590,1610]],[[64777,64777],"mapped",[1588,1580]],[[64778,64778],"mapped",[1588,1581]],[[64779,64779],"mapped",[1588,1582]],[[64780,64780],"mapped",[1588,1605]],[[64781,64781],"mapped",[1588,1585]],[[64782,64782],"mapped",[1587,1585]],[[64783,64783],"mapped",[1589,1585]],[[64784,64784],"mapped",[1590,1585]],[[64785,64785],"mapped",[1591,1609]],[[64786,64786],"mapped",[1591,1610]],[[64787,64787],"mapped",[1593,1609]],[[64788,64788],"mapped",[1593,1610]],[[64789,64789],"mapped",[1594,1609]],[[64790,64790],"mapped",[1594,1610]],[[64791,64791],"mapped",[1587,1609]],[[64792,64792],"mapped",[1587,1610]],[[64793,64793],"mapped",[1588,1609]],[[64794,64794],"mapped",[1588,1610]],[[64795,64795],"mapped",[1581,1609]],[[64796,64796],"mapped",[1581,1610]],[[64797,64797],"mapped",[1580,1609]],[[64798,64798],"mapped",[1580,1610]],[[64799,64799],"mapped",[1582,1609]],[[64800,64800],"mapped",[1582,1610]],[[64801,64801],"mapped",[1589,1609]],[[64802,64802],"mapped",[1589,1610]],[[64803,64803],"mapped",[1590,1609]],[[64804,64804],"mapped",[1590,1610]],[[64805,64805],"mapped",[1588,1580]],[[64806,64806],"mapped",[1588,1581]],[[64807,64807],"mapped",[1588,1582]],[[64808,64808],"mapped",[1588,1605]],[[64809,64809],"mapped",[1588,1585]],[[64810,64810],"mapped",[1587,1585]],[[64811,64811],"mapped",[1589,1585]],[[64812,64812],"mapped",[1590,1585]],[[64813,64813],"mapped",[1588,1580]],[[64814,64814],"mapped",[1588,1581]],[[64815,64815],"mapped",[1588,1582]],[[64816,64816],"mapped",[1588,1605]],[[64817,64817],"mapped",[1587,1607]],[[64818,64818],"mapped",[1588,1607]],[[64819,64819],"mapped",[1591,1605]],[[64820,64820],"mapped",[1587,1580]],[[64821,64821],"mapped",[1587,1581]],[[64822,64822],"mapped",[1587,1582]],[[64823,64823],"mapped",[1588,1580]],[[64824,64824],"mapped",[1588,1581]],[[64825,64825],"mapped",[1588,1582]],[[64826,64826],"mapped",[1591,1605]],[[64827,64827],"mapped",[1592,1605]],[[64828,64829],"mapped",[1575,1611]],[[64830,64831],"valid",[],"NV8"],[[64832,64847],"disallowed"],[[64848,64848],"mapped",[1578,1580,1605]],[[64849,64850],"mapped",[1578,1581,1580]],[[64851,64851],"mapped",[1578,1581,1605]],[[64852,64852],"mapped",[1578,1582,1605]],[[64853,64853],"mapped",[1578,1605,1580]],[[64854,64854],"mapped",[1578,1605,1581]],[[64855,64855],"mapped",[1578,1605,1582]],[[64856,64857],"mapped",[1580,1605,1581]],[[64858,64858],"mapped",[1581,1605,1610]],[[64859,64859],"mapped",[1581,1605,1609]],[[64860,64860],"mapped",[1587,1581,1580]],[[64861,64861],"mapped",[1587,1580,1581]],[[64862,64862],"mapped",[1587,1580,1609]],[[64863,64864],"mapped",[1587,1605,1581]],[[64865,64865],"mapped",[1587,1605,1580]],[[64866,64867],"mapped",[1587,1605,1605]],[[64868,64869],"mapped",[1589,1581,1581]],[[64870,64870],"mapped",[1589,1605,1605]],[[64871,64872],"mapped",[1588,1581,1605]],[[64873,64873],"mapped",[1588,1580,1610]],[[64874,64875],"mapped",[1588,1605,1582]],[[64876,64877],"mapped",[1588,1605,1605]],[[64878,64878],"mapped",[1590,1581,1609]],[[64879,64880],"mapped",[1590,1582,1605]],[[64881,64882],"mapped",[1591,1605,1581]],[[64883,64883],"mapped",[1591,1605,1605]],[[64884,64884],"mapped",[1591,1605,1610]],[[64885,64885],"mapped",[1593,1580,1605]],[[64886,64887],"mapped",[1593,1605,1605]],[[64888,64888],"mapped",[1593,1605,1609]],[[64889,64889],"mapped",[1594,1605,1605]],[[64890,64890],"mapped",[1594,1605,1610]],[[64891,64891],"mapped",[1594,1605,1609]],[[64892,64893],"mapped",[1601,1582,1605]],[[64894,64894],"mapped",[1602,1605,1581]],[[64895,64895],"mapped",[1602,1605,1605]],[[64896,64896],"mapped",[1604,1581,1605]],[[64897,64897],"mapped",[1604,1581,1610]],[[64898,64898],"mapped",[1604,1581,1609]],[[64899,64900],"mapped",[1604,1580,1580]],[[64901,64902],"mapped",[1604,1582,1605]],[[64903,64904],"mapped",[1604,1605,1581]],[[64905,64905],"mapped",[1605,1581,1580]],[[64906,64906],"mapped",[1605,1581,1605]],[[64907,64907],"mapped",[1605,1581,1610]],[[64908,64908],"mapped",[1605,1580,1581]],[[64909,64909],"mapped",[1605,1580,1605]],[[64910,64910],"mapped",[1605,1582,1580]],[[64911,64911],"mapped",[1605,1582,1605]],[[64912,64913],"disallowed"],[[64914,64914],"mapped",[1605,1580,1582]],[[64915,64915],"mapped",[1607,1605,1580]],[[64916,64916],"mapped",[1607,1605,1605]],[[64917,64917],"mapped",[1606,1581,1605]],[[64918,64918],"mapped",[1606,1581,1609]],[[64919,64920],"mapped",[1606,1580,1605]],[[64921,64921],"mapped",[1606,1580,1609]],[[64922,64922],"mapped",[1606,1605,1610]],[[64923,64923],"mapped",[1606,1605,1609]],[[64924,64925],"mapped",[1610,1605,1605]],[[64926,64926],"mapped",[1576,1582,1610]],[[64927,64927],"mapped",[1578,1580,1610]],[[64928,64928],"mapped",[1578,1580,1609]],[[64929,64929],"mapped",[1578,1582,1610]],[[64930,64930],"mapped",[1578,1582,1609]],[[64931,64931],"mapped",[1578,1605,1610]],[[64932,64932],"mapped",[1578,1605,1609]],[[64933,64933],"mapped",[1580,1605,1610]],[[64934,64934],"mapped",[1580,1581,1609]],[[64935,64935],"mapped",[1580,1605,1609]],[[64936,64936],"mapped",[1587,1582,1609]],[[64937,64937],"mapped",[1589,1581,1610]],[[64938,64938],"mapped",[1588,1581,1610]],[[64939,64939],"mapped",[1590,1581,1610]],[[64940,64940],"mapped",[1604,1580,1610]],[[64941,64941],"mapped",[1604,1605,1610]],[[64942,64942],"mapped",[1610,1581,1610]],[[64943,64943],"mapped",[1610,1580,1610]],[[64944,64944],"mapped",[1610,1605,1610]],[[64945,64945],"mapped",[1605,1605,1610]],[[64946,64946],"mapped",[1602,1605,1610]],[[64947,64947],"mapped",[1606,1581,1610]],[[64948,64948],"mapped",[1602,1605,1581]],[[64949,64949],"mapped",[1604,1581,1605]],[[64950,64950],"mapped",[1593,1605,1610]],[[64951,64951],"mapped",[1603,1605,1610]],[[64952,64952],"mapped",[1606,1580,1581]],[[64953,64953],"mapped",[1605,1582,1610]],[[64954,64954],"mapped",[1604,1580,1605]],[[64955,64955],"mapped",[1603,1605,1605]],[[64956,64956],"mapped",[1604,1580,1605]],[[64957,64957],"mapped",[1606,1580,1581]],[[64958,64958],"mapped",[1580,1581,1610]],[[64959,64959],"mapped",[1581,1580,1610]],[[64960,64960],"mapped",[1605,1580,1610]],[[64961,64961],"mapped",[1601,1605,1610]],[[64962,64962],"mapped",[1576,1581,1610]],[[64963,64963],"mapped",[1603,1605,1605]],[[64964,64964],"mapped",[1593,1580,1605]],[[64965,64965],"mapped",[1589,1605,1605]],[[64966,64966],"mapped",[1587,1582,1610]],[[64967,64967],"mapped",[1606,1580,1610]],[[64968,64975],"disallowed"],[[64976,65007],"disallowed"],[[65008,65008],"mapped",[1589,1604,1746]],[[65009,65009],"mapped",[1602,1604,1746]],[[65010,65010],"mapped",[1575,1604,1604,1607]],[[65011,65011],"mapped",[1575,1603,1576,1585]],[[65012,65012],"mapped",[1605,1581,1605,1583]],[[65013,65013],"mapped",[1589,1604,1593,1605]],[[65014,65014],"mapped",[1585,1587,1608,1604]],[[65015,65015],"mapped",[1593,1604,1610,1607]],[[65016,65016],"mapped",[1608,1587,1604,1605]],[[65017,65017],"mapped",[1589,1604,1609]],[[65018,65018],"disallowed_STD3_mapped",[1589,1604,1609,32,1575,1604,1604,1607,32,1593,1604,1610,1607,32,1608,1587,1604,1605]],[[65019,65019],"disallowed_STD3_mapped",[1580,1604,32,1580,1604,1575,1604,1607]],[[65020,65020],"mapped",[1585,1740,1575,1604]],[[65021,65021],"valid",[],"NV8"],[[65022,65023],"disallowed"],[[65024,65039],"ignored"],[[65040,65040],"disallowed_STD3_mapped",[44]],[[65041,65041],"mapped",[12289]],[[65042,65042],"disallowed"],[[65043,65043],"disallowed_STD3_mapped",[58]],[[65044,65044],"disallowed_STD3_mapped",[59]],[[65045,65045],"disallowed_STD3_mapped",[33]],[[65046,65046],"disallowed_STD3_mapped",[63]],[[65047,65047],"mapped",[12310]],[[65048,65048],"mapped",[12311]],[[65049,65049],"disallowed"],[[65050,65055],"disallowed"],[[65056,65059],"valid"],[[65060,65062],"valid"],[[65063,65069],"valid"],[[65070,65071],"valid"],[[65072,65072],"disallowed"],[[65073,65073],"mapped",[8212]],[[65074,65074],"mapped",[8211]],[[65075,65076],"disallowed_STD3_mapped",[95]],[[65077,65077],"disallowed_STD3_mapped",[40]],[[65078,65078],"disallowed_STD3_mapped",[41]],[[65079,65079],"disallowed_STD3_mapped",[123]],[[65080,65080],"disallowed_STD3_mapped",[125]],[[65081,65081],"mapped",[12308]],[[65082,65082],"mapped",[12309]],[[65083,65083],"mapped",[12304]],[[65084,65084],"mapped",[12305]],[[65085,65085],"mapped",[12298]],[[65086,65086],"mapped",[12299]],[[65087,65087],"mapped",[12296]],[[65088,65088],"mapped",[12297]],[[65089,65089],"mapped",[12300]],[[65090,65090],"mapped",[12301]],[[65091,65091],"mapped",[12302]],[[65092,65092],"mapped",[12303]],[[65093,65094],"valid",[],"NV8"],[[65095,65095],"disallowed_STD3_mapped",[91]],[[65096,65096],"disallowed_STD3_mapped",[93]],[[65097,65100],"disallowed_STD3_mapped",[32,773]],[[65101,65103],"disallowed_STD3_mapped",[95]],[[65104,65104],"disallowed_STD3_mapped",[44]],[[65105,65105],"mapped",[12289]],[[65106,65106],"disallowed"],[[65107,65107],"disallowed"],[[65108,65108],"disallowed_STD3_mapped",[59]],[[65109,65109],"disallowed_STD3_mapped",[58]],[[65110,65110],"disallowed_STD3_mapped",[63]],[[65111,65111],"disallowed_STD3_mapped",[33]],[[65112,65112],"mapped",[8212]],[[65113,65113],"disallowed_STD3_mapped",[40]],[[65114,65114],"disallowed_STD3_mapped",[41]],[[65115,65115],"disallowed_STD3_mapped",[123]],[[65116,65116],"disallowed_STD3_mapped",[125]],[[65117,65117],"mapped",[12308]],[[65118,65118],"mapped",[12309]],[[65119,65119],"disallowed_STD3_mapped",[35]],[[65120,65120],"disallowed_STD3_mapped",[38]],[[65121,65121],"disallowed_STD3_mapped",[42]],[[65122,65122],"disallowed_STD3_mapped",[43]],[[65123,65123],"mapped",[45]],[[65124,65124],"disallowed_STD3_mapped",[60]],[[65125,65125],"disallowed_STD3_mapped",[62]],[[65126,65126],"disallowed_STD3_mapped",[61]],[[65127,65127],"disallowed"],[[65128,65128],"disallowed_STD3_mapped",[92]],[[65129,65129],"disallowed_STD3_mapped",[36]],[[65130,65130],"disallowed_STD3_mapped",[37]],[[65131,65131],"disallowed_STD3_mapped",[64]],[[65132,65135],"disallowed"],[[65136,65136],"disallowed_STD3_mapped",[32,1611]],[[65137,65137],"mapped",[1600,1611]],[[65138,65138],"disallowed_STD3_mapped",[32,1612]],[[65139,65139],"valid"],[[65140,65140],"disallowed_STD3_mapped",[32,1613]],[[65141,65141],"disallowed"],[[65142,65142],"disallowed_STD3_mapped",[32,1614]],[[65143,65143],"mapped",[1600,1614]],[[65144,65144],"disallowed_STD3_mapped",[32,1615]],[[65145,65145],"mapped",[1600,1615]],[[65146,65146],"disallowed_STD3_mapped",[32,1616]],[[65147,65147],"mapped",[1600,1616]],[[65148,65148],"disallowed_STD3_mapped",[32,1617]],[[65149,65149],"mapped",[1600,1617]],[[65150,65150],"disallowed_STD3_mapped",[32,1618]],[[65151,65151],"mapped",[1600,1618]],[[65152,65152],"mapped",[1569]],[[65153,65154],"mapped",[1570]],[[65155,65156],"mapped",[1571]],[[65157,65158],"mapped",[1572]],[[65159,65160],"mapped",[1573]],[[65161,65164],"mapped",[1574]],[[65165,65166],"mapped",[1575]],[[65167,65170],"mapped",[1576]],[[65171,65172],"mapped",[1577]],[[65173,65176],"mapped",[1578]],[[65177,65180],"mapped",[1579]],[[65181,65184],"mapped",[1580]],[[65185,65188],"mapped",[1581]],[[65189,65192],"mapped",[1582]],[[65193,65194],"mapped",[1583]],[[65195,65196],"mapped",[1584]],[[65197,65198],"mapped",[1585]],[[65199,65200],"mapped",[1586]],[[65201,65204],"mapped",[1587]],[[65205,65208],"mapped",[1588]],[[65209,65212],"mapped",[1589]],[[65213,65216],"mapped",[1590]],[[65217,65220],"mapped",[1591]],[[65221,65224],"mapped",[1592]],[[65225,65228],"mapped",[1593]],[[65229,65232],"mapped",[1594]],[[65233,65236],"mapped",[1601]],[[65237,65240],"mapped",[1602]],[[65241,65244],"mapped",[1603]],[[65245,65248],"mapped",[1604]],[[65249,65252],"mapped",[1605]],[[65253,65256],"mapped",[1606]],[[65257,65260],"mapped",[1607]],[[65261,65262],"mapped",[1608]],[[65263,65264],"mapped",[1609]],[[65265,65268],"mapped",[1610]],[[65269,65270],"mapped",[1604,1570]],[[65271,65272],"mapped",[1604,1571]],[[65273,65274],"mapped",[1604,1573]],[[65275,65276],"mapped",[1604,1575]],[[65277,65278],"disallowed"],[[65279,65279],"ignored"],[[65280,65280],"disallowed"],[[65281,65281],"disallowed_STD3_mapped",[33]],[[65282,65282],"disallowed_STD3_mapped",[34]],[[65283,65283],"disallowed_STD3_mapped",[35]],[[65284,65284],"disallowed_STD3_mapped",[36]],[[65285,65285],"disallowed_STD3_mapped",[37]],[[65286,65286],"disallowed_STD3_mapped",[38]],[[65287,65287],"disallowed_STD3_mapped",[39]],[[65288,65288],"disallowed_STD3_mapped",[40]],[[65289,65289],"disallowed_STD3_mapped",[41]],[[65290,65290],"disallowed_STD3_mapped",[42]],[[65291,65291],"disallowed_STD3_mapped",[43]],[[65292,65292],"disallowed_STD3_mapped",[44]],[[65293,65293],"mapped",[45]],[[65294,65294],"mapped",[46]],[[65295,65295],"disallowed_STD3_mapped",[47]],[[65296,65296],"mapped",[48]],[[65297,65297],"mapped",[49]],[[65298,65298],"mapped",[50]],[[65299,65299],"mapped",[51]],[[65300,65300],"mapped",[52]],[[65301,65301],"mapped",[53]],[[65302,65302],"mapped",[54]],[[65303,65303],"mapped",[55]],[[65304,65304],"mapped",[56]],[[65305,65305],"mapped",[57]],[[65306,65306],"disallowed_STD3_mapped",[58]],[[65307,65307],"disallowed_STD3_mapped",[59]],[[65308,65308],"disallowed_STD3_mapped",[60]],[[65309,65309],"disallowed_STD3_mapped",[61]],[[65310,65310],"disallowed_STD3_mapped",[62]],[[65311,65311],"disallowed_STD3_mapped",[63]],[[65312,65312],"disallowed_STD3_mapped",[64]],[[65313,65313],"mapped",[97]],[[65314,65314],"mapped",[98]],[[65315,65315],"mapped",[99]],[[65316,65316],"mapped",[100]],[[65317,65317],"mapped",[101]],[[65318,65318],"mapped",[102]],[[65319,65319],"mapped",[103]],[[65320,65320],"mapped",[104]],[[65321,65321],"mapped",[105]],[[65322,65322],"mapped",[106]],[[65323,65323],"mapped",[107]],[[65324,65324],"mapped",[108]],[[65325,65325],"mapped",[109]],[[65326,65326],"mapped",[110]],[[65327,65327],"mapped",[111]],[[65328,65328],"mapped",[112]],[[65329,65329],"mapped",[113]],[[65330,65330],"mapped",[114]],[[65331,65331],"mapped",[115]],[[65332,65332],"mapped",[116]],[[65333,65333],"mapped",[117]],[[65334,65334],"mapped",[118]],[[65335,65335],"mapped",[119]],[[65336,65336],"mapped",[120]],[[65337,65337],"mapped",[121]],[[65338,65338],"mapped",[122]],[[65339,65339],"disallowed_STD3_mapped",[91]],[[65340,65340],"disallowed_STD3_mapped",[92]],[[65341,65341],"disallowed_STD3_mapped",[93]],[[65342,65342],"disallowed_STD3_mapped",[94]],[[65343,65343],"disallowed_STD3_mapped",[95]],[[65344,65344],"disallowed_STD3_mapped",[96]],[[65345,65345],"mapped",[97]],[[65346,65346],"mapped",[98]],[[65347,65347],"mapped",[99]],[[65348,65348],"mapped",[100]],[[65349,65349],"mapped",[101]],[[65350,65350],"mapped",[102]],[[65351,65351],"mapped",[103]],[[65352,65352],"mapped",[104]],[[65353,65353],"mapped",[105]],[[65354,65354],"mapped",[106]],[[65355,65355],"mapped",[107]],[[65356,65356],"mapped",[108]],[[65357,65357],"mapped",[109]],[[65358,65358],"mapped",[110]],[[65359,65359],"mapped",[111]],[[65360,65360],"mapped",[112]],[[65361,65361],"mapped",[113]],[[65362,65362],"mapped",[114]],[[65363,65363],"mapped",[115]],[[65364,65364],"mapped",[116]],[[65365,65365],"mapped",[117]],[[65366,65366],"mapped",[118]],[[65367,65367],"mapped",[119]],[[65368,65368],"mapped",[120]],[[65369,65369],"mapped",[121]],[[65370,65370],"mapped",[122]],[[65371,65371],"disallowed_STD3_mapped",[123]],[[65372,65372],"disallowed_STD3_mapped",[124]],[[65373,65373],"disallowed_STD3_mapped",[125]],[[65374,65374],"disallowed_STD3_mapped",[126]],[[65375,65375],"mapped",[10629]],[[65376,65376],"mapped",[10630]],[[65377,65377],"mapped",[46]],[[65378,65378],"mapped",[12300]],[[65379,65379],"mapped",[12301]],[[65380,65380],"mapped",[12289]],[[65381,65381],"mapped",[12539]],[[65382,65382],"mapped",[12530]],[[65383,65383],"mapped",[12449]],[[65384,65384],"mapped",[12451]],[[65385,65385],"mapped",[12453]],[[65386,65386],"mapped",[12455]],[[65387,65387],"mapped",[12457]],[[65388,65388],"mapped",[12515]],[[65389,65389],"mapped",[12517]],[[65390,65390],"mapped",[12519]],[[65391,65391],"mapped",[12483]],[[65392,65392],"mapped",[12540]],[[65393,65393],"mapped",[12450]],[[65394,65394],"mapped",[12452]],[[65395,65395],"mapped",[12454]],[[65396,65396],"mapped",[12456]],[[65397,65397],"mapped",[12458]],[[65398,65398],"mapped",[12459]],[[65399,65399],"mapped",[12461]],[[65400,65400],"mapped",[12463]],[[65401,65401],"mapped",[12465]],[[65402,65402],"mapped",[12467]],[[65403,65403],"mapped",[12469]],[[65404,65404],"mapped",[12471]],[[65405,65405],"mapped",[12473]],[[65406,65406],"mapped",[12475]],[[65407,65407],"mapped",[12477]],[[65408,65408],"mapped",[12479]],[[65409,65409],"mapped",[12481]],[[65410,65410],"mapped",[12484]],[[65411,65411],"mapped",[12486]],[[65412,65412],"mapped",[12488]],[[65413,65413],"mapped",[12490]],[[65414,65414],"mapped",[12491]],[[65415,65415],"mapped",[12492]],[[65416,65416],"mapped",[12493]],[[65417,65417],"mapped",[12494]],[[65418,65418],"mapped",[12495]],[[65419,65419],"mapped",[12498]],[[65420,65420],"mapped",[12501]],[[65421,65421],"mapped",[12504]],[[65422,65422],"mapped",[12507]],[[65423,65423],"mapped",[12510]],[[65424,65424],"mapped",[12511]],[[65425,65425],"mapped",[12512]],[[65426,65426],"mapped",[12513]],[[65427,65427],"mapped",[12514]],[[65428,65428],"mapped",[12516]],[[65429,65429],"mapped",[12518]],[[65430,65430],"mapped",[12520]],[[65431,65431],"mapped",[12521]],[[65432,65432],"mapped",[12522]],[[65433,65433],"mapped",[12523]],[[65434,65434],"mapped",[12524]],[[65435,65435],"mapped",[12525]],[[65436,65436],"mapped",[12527]],[[65437,65437],"mapped",[12531]],[[65438,65438],"mapped",[12441]],[[65439,65439],"mapped",[12442]],[[65440,65440],"disallowed"],[[65441,65441],"mapped",[4352]],[[65442,65442],"mapped",[4353]],[[65443,65443],"mapped",[4522]],[[65444,65444],"mapped",[4354]],[[65445,65445],"mapped",[4524]],[[65446,65446],"mapped",[4525]],[[65447,65447],"mapped",[4355]],[[65448,65448],"mapped",[4356]],[[65449,65449],"mapped",[4357]],[[65450,65450],"mapped",[4528]],[[65451,65451],"mapped",[4529]],[[65452,65452],"mapped",[4530]],[[65453,65453],"mapped",[4531]],[[65454,65454],"mapped",[4532]],[[65455,65455],"mapped",[4533]],[[65456,65456],"mapped",[4378]],[[65457,65457],"mapped",[4358]],[[65458,65458],"mapped",[4359]],[[65459,65459],"mapped",[4360]],[[65460,65460],"mapped",[4385]],[[65461,65461],"mapped",[4361]],[[65462,65462],"mapped",[4362]],[[65463,65463],"mapped",[4363]],[[65464,65464],"mapped",[4364]],[[65465,65465],"mapped",[4365]],[[65466,65466],"mapped",[4366]],[[65467,65467],"mapped",[4367]],[[65468,65468],"mapped",[4368]],[[65469,65469],"mapped",[4369]],[[65470,65470],"mapped",[4370]],[[65471,65473],"disallowed"],[[65474,65474],"mapped",[4449]],[[65475,65475],"mapped",[4450]],[[65476,65476],"mapped",[4451]],[[65477,65477],"mapped",[4452]],[[65478,65478],"mapped",[4453]],[[65479,65479],"mapped",[4454]],[[65480,65481],"disallowed"],[[65482,65482],"mapped",[4455]],[[65483,65483],"mapped",[4456]],[[65484,65484],"mapped",[4457]],[[65485,65485],"mapped",[4458]],[[65486,65486],"mapped",[4459]],[[65487,65487],"mapped",[4460]],[[65488,65489],"disallowed"],[[65490,65490],"mapped",[4461]],[[65491,65491],"mapped",[4462]],[[65492,65492],"mapped",[4463]],[[65493,65493],"mapped",[4464]],[[65494,65494],"mapped",[4465]],[[65495,65495],"mapped",[4466]],[[65496,65497],"disallowed"],[[65498,65498],"mapped",[4467]],[[65499,65499],"mapped",[4468]],[[65500,65500],"mapped",[4469]],[[65501,65503],"disallowed"],[[65504,65504],"mapped",[162]],[[65505,65505],"mapped",[163]],[[65506,65506],"mapped",[172]],[[65507,65507],"disallowed_STD3_mapped",[32,772]],[[65508,65508],"mapped",[166]],[[65509,65509],"mapped",[165]],[[65510,65510],"mapped",[8361]],[[65511,65511],"disallowed"],[[65512,65512],"mapped",[9474]],[[65513,65513],"mapped",[8592]],[[65514,65514],"mapped",[8593]],[[65515,65515],"mapped",[8594]],[[65516,65516],"mapped",[8595]],[[65517,65517],"mapped",[9632]],[[65518,65518],"mapped",[9675]],[[65519,65528],"disallowed"],[[65529,65531],"disallowed"],[[65532,65532],"disallowed"],[[65533,65533],"disallowed"],[[65534,65535],"disallowed"],[[65536,65547],"valid"],[[65548,65548],"disallowed"],[[65549,65574],"valid"],[[65575,65575],"disallowed"],[[65576,65594],"valid"],[[65595,65595],"disallowed"],[[65596,65597],"valid"],[[65598,65598],"disallowed"],[[65599,65613],"valid"],[[65614,65615],"disallowed"],[[65616,65629],"valid"],[[65630,65663],"disallowed"],[[65664,65786],"valid"],[[65787,65791],"disallowed"],[[65792,65794],"valid",[],"NV8"],[[65795,65798],"disallowed"],[[65799,65843],"valid",[],"NV8"],[[65844,65846],"disallowed"],[[65847,65855],"valid",[],"NV8"],[[65856,65930],"valid",[],"NV8"],[[65931,65932],"valid",[],"NV8"],[[65933,65935],"disallowed"],[[65936,65947],"valid",[],"NV8"],[[65948,65951],"disallowed"],[[65952,65952],"valid",[],"NV8"],[[65953,65999],"disallowed"],[[66e3,66044],"valid",[],"NV8"],[[66045,66045],"valid"],[[66046,66175],"disallowed"],[[66176,66204],"valid"],[[66205,66207],"disallowed"],[[66208,66256],"valid"],[[66257,66271],"disallowed"],[[66272,66272],"valid"],[[66273,66299],"valid",[],"NV8"],[[66300,66303],"disallowed"],[[66304,66334],"valid"],[[66335,66335],"valid"],[[66336,66339],"valid",[],"NV8"],[[66340,66351],"disallowed"],[[66352,66368],"valid"],[[66369,66369],"valid",[],"NV8"],[[66370,66377],"valid"],[[66378,66378],"valid",[],"NV8"],[[66379,66383],"disallowed"],[[66384,66426],"valid"],[[66427,66431],"disallowed"],[[66432,66461],"valid"],[[66462,66462],"disallowed"],[[66463,66463],"valid",[],"NV8"],[[66464,66499],"valid"],[[66500,66503],"disallowed"],[[66504,66511],"valid"],[[66512,66517],"valid",[],"NV8"],[[66518,66559],"disallowed"],[[66560,66560],"mapped",[66600]],[[66561,66561],"mapped",[66601]],[[66562,66562],"mapped",[66602]],[[66563,66563],"mapped",[66603]],[[66564,66564],"mapped",[66604]],[[66565,66565],"mapped",[66605]],[[66566,66566],"mapped",[66606]],[[66567,66567],"mapped",[66607]],[[66568,66568],"mapped",[66608]],[[66569,66569],"mapped",[66609]],[[66570,66570],"mapped",[66610]],[[66571,66571],"mapped",[66611]],[[66572,66572],"mapped",[66612]],[[66573,66573],"mapped",[66613]],[[66574,66574],"mapped",[66614]],[[66575,66575],"mapped",[66615]],[[66576,66576],"mapped",[66616]],[[66577,66577],"mapped",[66617]],[[66578,66578],"mapped",[66618]],[[66579,66579],"mapped",[66619]],[[66580,66580],"mapped",[66620]],[[66581,66581],"mapped",[66621]],[[66582,66582],"mapped",[66622]],[[66583,66583],"mapped",[66623]],[[66584,66584],"mapped",[66624]],[[66585,66585],"mapped",[66625]],[[66586,66586],"mapped",[66626]],[[66587,66587],"mapped",[66627]],[[66588,66588],"mapped",[66628]],[[66589,66589],"mapped",[66629]],[[66590,66590],"mapped",[66630]],[[66591,66591],"mapped",[66631]],[[66592,66592],"mapped",[66632]],[[66593,66593],"mapped",[66633]],[[66594,66594],"mapped",[66634]],[[66595,66595],"mapped",[66635]],[[66596,66596],"mapped",[66636]],[[66597,66597],"mapped",[66637]],[[66598,66598],"mapped",[66638]],[[66599,66599],"mapped",[66639]],[[66600,66637],"valid"],[[66638,66717],"valid"],[[66718,66719],"disallowed"],[[66720,66729],"valid"],[[66730,66815],"disallowed"],[[66816,66855],"valid"],[[66856,66863],"disallowed"],[[66864,66915],"valid"],[[66916,66926],"disallowed"],[[66927,66927],"valid",[],"NV8"],[[66928,67071],"disallowed"],[[67072,67382],"valid"],[[67383,67391],"disallowed"],[[67392,67413],"valid"],[[67414,67423],"disallowed"],[[67424,67431],"valid"],[[67432,67583],"disallowed"],[[67584,67589],"valid"],[[67590,67591],"disallowed"],[[67592,67592],"valid"],[[67593,67593],"disallowed"],[[67594,67637],"valid"],[[67638,67638],"disallowed"],[[67639,67640],"valid"],[[67641,67643],"disallowed"],[[67644,67644],"valid"],[[67645,67646],"disallowed"],[[67647,67647],"valid"],[[67648,67669],"valid"],[[67670,67670],"disallowed"],[[67671,67679],"valid",[],"NV8"],[[67680,67702],"valid"],[[67703,67711],"valid",[],"NV8"],[[67712,67742],"valid"],[[67743,67750],"disallowed"],[[67751,67759],"valid",[],"NV8"],[[67760,67807],"disallowed"],[[67808,67826],"valid"],[[67827,67827],"disallowed"],[[67828,67829],"valid"],[[67830,67834],"disallowed"],[[67835,67839],"valid",[],"NV8"],[[67840,67861],"valid"],[[67862,67865],"valid",[],"NV8"],[[67866,67867],"valid",[],"NV8"],[[67868,67870],"disallowed"],[[67871,67871],"valid",[],"NV8"],[[67872,67897],"valid"],[[67898,67902],"disallowed"],[[67903,67903],"valid",[],"NV8"],[[67904,67967],"disallowed"],[[67968,68023],"valid"],[[68024,68027],"disallowed"],[[68028,68029],"valid",[],"NV8"],[[68030,68031],"valid"],[[68032,68047],"valid",[],"NV8"],[[68048,68049],"disallowed"],[[68050,68095],"valid",[],"NV8"],[[68096,68099],"valid"],[[68100,68100],"disallowed"],[[68101,68102],"valid"],[[68103,68107],"disallowed"],[[68108,68115],"valid"],[[68116,68116],"disallowed"],[[68117,68119],"valid"],[[68120,68120],"disallowed"],[[68121,68147],"valid"],[[68148,68151],"disallowed"],[[68152,68154],"valid"],[[68155,68158],"disallowed"],[[68159,68159],"valid"],[[68160,68167],"valid",[],"NV8"],[[68168,68175],"disallowed"],[[68176,68184],"valid",[],"NV8"],[[68185,68191],"disallowed"],[[68192,68220],"valid"],[[68221,68223],"valid",[],"NV8"],[[68224,68252],"valid"],[[68253,68255],"valid",[],"NV8"],[[68256,68287],"disallowed"],[[68288,68295],"valid"],[[68296,68296],"valid",[],"NV8"],[[68297,68326],"valid"],[[68327,68330],"disallowed"],[[68331,68342],"valid",[],"NV8"],[[68343,68351],"disallowed"],[[68352,68405],"valid"],[[68406,68408],"disallowed"],[[68409,68415],"valid",[],"NV8"],[[68416,68437],"valid"],[[68438,68439],"disallowed"],[[68440,68447],"valid",[],"NV8"],[[68448,68466],"valid"],[[68467,68471],"disallowed"],[[68472,68479],"valid",[],"NV8"],[[68480,68497],"valid"],[[68498,68504],"disallowed"],[[68505,68508],"valid",[],"NV8"],[[68509,68520],"disallowed"],[[68521,68527],"valid",[],"NV8"],[[68528,68607],"disallowed"],[[68608,68680],"valid"],[[68681,68735],"disallowed"],[[68736,68736],"mapped",[68800]],[[68737,68737],"mapped",[68801]],[[68738,68738],"mapped",[68802]],[[68739,68739],"mapped",[68803]],[[68740,68740],"mapped",[68804]],[[68741,68741],"mapped",[68805]],[[68742,68742],"mapped",[68806]],[[68743,68743],"mapped",[68807]],[[68744,68744],"mapped",[68808]],[[68745,68745],"mapped",[68809]],[[68746,68746],"mapped",[68810]],[[68747,68747],"mapped",[68811]],[[68748,68748],"mapped",[68812]],[[68749,68749],"mapped",[68813]],[[68750,68750],"mapped",[68814]],[[68751,68751],"mapped",[68815]],[[68752,68752],"mapped",[68816]],[[68753,68753],"mapped",[68817]],[[68754,68754],"mapped",[68818]],[[68755,68755],"mapped",[68819]],[[68756,68756],"mapped",[68820]],[[68757,68757],"mapped",[68821]],[[68758,68758],"mapped",[68822]],[[68759,68759],"mapped",[68823]],[[68760,68760],"mapped",[68824]],[[68761,68761],"mapped",[68825]],[[68762,68762],"mapped",[68826]],[[68763,68763],"mapped",[68827]],[[68764,68764],"mapped",[68828]],[[68765,68765],"mapped",[68829]],[[68766,68766],"mapped",[68830]],[[68767,68767],"mapped",[68831]],[[68768,68768],"mapped",[68832]],[[68769,68769],"mapped",[68833]],[[68770,68770],"mapped",[68834]],[[68771,68771],"mapped",[68835]],[[68772,68772],"mapped",[68836]],[[68773,68773],"mapped",[68837]],[[68774,68774],"mapped",[68838]],[[68775,68775],"mapped",[68839]],[[68776,68776],"mapped",[68840]],[[68777,68777],"mapped",[68841]],[[68778,68778],"mapped",[68842]],[[68779,68779],"mapped",[68843]],[[68780,68780],"mapped",[68844]],[[68781,68781],"mapped",[68845]],[[68782,68782],"mapped",[68846]],[[68783,68783],"mapped",[68847]],[[68784,68784],"mapped",[68848]],[[68785,68785],"mapped",[68849]],[[68786,68786],"mapped",[68850]],[[68787,68799],"disallowed"],[[68800,68850],"valid"],[[68851,68857],"disallowed"],[[68858,68863],"valid",[],"NV8"],[[68864,69215],"disallowed"],[[69216,69246],"valid",[],"NV8"],[[69247,69631],"disallowed"],[[69632,69702],"valid"],[[69703,69709],"valid",[],"NV8"],[[69710,69713],"disallowed"],[[69714,69733],"valid",[],"NV8"],[[69734,69743],"valid"],[[69744,69758],"disallowed"],[[69759,69759],"valid"],[[69760,69818],"valid"],[[69819,69820],"valid",[],"NV8"],[[69821,69821],"disallowed"],[[69822,69825],"valid",[],"NV8"],[[69826,69839],"disallowed"],[[69840,69864],"valid"],[[69865,69871],"disallowed"],[[69872,69881],"valid"],[[69882,69887],"disallowed"],[[69888,69940],"valid"],[[69941,69941],"disallowed"],[[69942,69951],"valid"],[[69952,69955],"valid",[],"NV8"],[[69956,69967],"disallowed"],[[69968,70003],"valid"],[[70004,70005],"valid",[],"NV8"],[[70006,70006],"valid"],[[70007,70015],"disallowed"],[[70016,70084],"valid"],[[70085,70088],"valid",[],"NV8"],[[70089,70089],"valid",[],"NV8"],[[70090,70092],"valid"],[[70093,70093],"valid",[],"NV8"],[[70094,70095],"disallowed"],[[70096,70105],"valid"],[[70106,70106],"valid"],[[70107,70107],"valid",[],"NV8"],[[70108,70108],"valid"],[[70109,70111],"valid",[],"NV8"],[[70112,70112],"disallowed"],[[70113,70132],"valid",[],"NV8"],[[70133,70143],"disallowed"],[[70144,70161],"valid"],[[70162,70162],"disallowed"],[[70163,70199],"valid"],[[70200,70205],"valid",[],"NV8"],[[70206,70271],"disallowed"],[[70272,70278],"valid"],[[70279,70279],"disallowed"],[[70280,70280],"valid"],[[70281,70281],"disallowed"],[[70282,70285],"valid"],[[70286,70286],"disallowed"],[[70287,70301],"valid"],[[70302,70302],"disallowed"],[[70303,70312],"valid"],[[70313,70313],"valid",[],"NV8"],[[70314,70319],"disallowed"],[[70320,70378],"valid"],[[70379,70383],"disallowed"],[[70384,70393],"valid"],[[70394,70399],"disallowed"],[[70400,70400],"valid"],[[70401,70403],"valid"],[[70404,70404],"disallowed"],[[70405,70412],"valid"],[[70413,70414],"disallowed"],[[70415,70416],"valid"],[[70417,70418],"disallowed"],[[70419,70440],"valid"],[[70441,70441],"disallowed"],[[70442,70448],"valid"],[[70449,70449],"disallowed"],[[70450,70451],"valid"],[[70452,70452],"disallowed"],[[70453,70457],"valid"],[[70458,70459],"disallowed"],[[70460,70468],"valid"],[[70469,70470],"disallowed"],[[70471,70472],"valid"],[[70473,70474],"disallowed"],[[70475,70477],"valid"],[[70478,70479],"disallowed"],[[70480,70480],"valid"],[[70481,70486],"disallowed"],[[70487,70487],"valid"],[[70488,70492],"disallowed"],[[70493,70499],"valid"],[[70500,70501],"disallowed"],[[70502,70508],"valid"],[[70509,70511],"disallowed"],[[70512,70516],"valid"],[[70517,70783],"disallowed"],[[70784,70853],"valid"],[[70854,70854],"valid",[],"NV8"],[[70855,70855],"valid"],[[70856,70863],"disallowed"],[[70864,70873],"valid"],[[70874,71039],"disallowed"],[[71040,71093],"valid"],[[71094,71095],"disallowed"],[[71096,71104],"valid"],[[71105,71113],"valid",[],"NV8"],[[71114,71127],"valid",[],"NV8"],[[71128,71133],"valid"],[[71134,71167],"disallowed"],[[71168,71232],"valid"],[[71233,71235],"valid",[],"NV8"],[[71236,71236],"valid"],[[71237,71247],"disallowed"],[[71248,71257],"valid"],[[71258,71295],"disallowed"],[[71296,71351],"valid"],[[71352,71359],"disallowed"],[[71360,71369],"valid"],[[71370,71423],"disallowed"],[[71424,71449],"valid"],[[71450,71452],"disallowed"],[[71453,71467],"valid"],[[71468,71471],"disallowed"],[[71472,71481],"valid"],[[71482,71487],"valid",[],"NV8"],[[71488,71839],"disallowed"],[[71840,71840],"mapped",[71872]],[[71841,71841],"mapped",[71873]],[[71842,71842],"mapped",[71874]],[[71843,71843],"mapped",[71875]],[[71844,71844],"mapped",[71876]],[[71845,71845],"mapped",[71877]],[[71846,71846],"mapped",[71878]],[[71847,71847],"mapped",[71879]],[[71848,71848],"mapped",[71880]],[[71849,71849],"mapped",[71881]],[[71850,71850],"mapped",[71882]],[[71851,71851],"mapped",[71883]],[[71852,71852],"mapped",[71884]],[[71853,71853],"mapped",[71885]],[[71854,71854],"mapped",[71886]],[[71855,71855],"mapped",[71887]],[[71856,71856],"mapped",[71888]],[[71857,71857],"mapped",[71889]],[[71858,71858],"mapped",[71890]],[[71859,71859],"mapped",[71891]],[[71860,71860],"mapped",[71892]],[[71861,71861],"mapped",[71893]],[[71862,71862],"mapped",[71894]],[[71863,71863],"mapped",[71895]],[[71864,71864],"mapped",[71896]],[[71865,71865],"mapped",[71897]],[[71866,71866],"mapped",[71898]],[[71867,71867],"mapped",[71899]],[[71868,71868],"mapped",[71900]],[[71869,71869],"mapped",[71901]],[[71870,71870],"mapped",[71902]],[[71871,71871],"mapped",[71903]],[[71872,71913],"valid"],[[71914,71922],"valid",[],"NV8"],[[71923,71934],"disallowed"],[[71935,71935],"valid"],[[71936,72383],"disallowed"],[[72384,72440],"valid"],[[72441,73727],"disallowed"],[[73728,74606],"valid"],[[74607,74648],"valid"],[[74649,74649],"valid"],[[74650,74751],"disallowed"],[[74752,74850],"valid",[],"NV8"],[[74851,74862],"valid",[],"NV8"],[[74863,74863],"disallowed"],[[74864,74867],"valid",[],"NV8"],[[74868,74868],"valid",[],"NV8"],[[74869,74879],"disallowed"],[[74880,75075],"valid"],[[75076,77823],"disallowed"],[[77824,78894],"valid"],[[78895,82943],"disallowed"],[[82944,83526],"valid"],[[83527,92159],"disallowed"],[[92160,92728],"valid"],[[92729,92735],"disallowed"],[[92736,92766],"valid"],[[92767,92767],"disallowed"],[[92768,92777],"valid"],[[92778,92781],"disallowed"],[[92782,92783],"valid",[],"NV8"],[[92784,92879],"disallowed"],[[92880,92909],"valid"],[[92910,92911],"disallowed"],[[92912,92916],"valid"],[[92917,92917],"valid",[],"NV8"],[[92918,92927],"disallowed"],[[92928,92982],"valid"],[[92983,92991],"valid",[],"NV8"],[[92992,92995],"valid"],[[92996,92997],"valid",[],"NV8"],[[92998,93007],"disallowed"],[[93008,93017],"valid"],[[93018,93018],"disallowed"],[[93019,93025],"valid",[],"NV8"],[[93026,93026],"disallowed"],[[93027,93047],"valid"],[[93048,93052],"disallowed"],[[93053,93071],"valid"],[[93072,93951],"disallowed"],[[93952,94020],"valid"],[[94021,94031],"disallowed"],[[94032,94078],"valid"],[[94079,94094],"disallowed"],[[94095,94111],"valid"],[[94112,110591],"disallowed"],[[110592,110593],"valid"],[[110594,113663],"disallowed"],[[113664,113770],"valid"],[[113771,113775],"disallowed"],[[113776,113788],"valid"],[[113789,113791],"disallowed"],[[113792,113800],"valid"],[[113801,113807],"disallowed"],[[113808,113817],"valid"],[[113818,113819],"disallowed"],[[113820,113820],"valid",[],"NV8"],[[113821,113822],"valid"],[[113823,113823],"valid",[],"NV8"],[[113824,113827],"ignored"],[[113828,118783],"disallowed"],[[118784,119029],"valid",[],"NV8"],[[119030,119039],"disallowed"],[[119040,119078],"valid",[],"NV8"],[[119079,119080],"disallowed"],[[119081,119081],"valid",[],"NV8"],[[119082,119133],"valid",[],"NV8"],[[119134,119134],"mapped",[119127,119141]],[[119135,119135],"mapped",[119128,119141]],[[119136,119136],"mapped",[119128,119141,119150]],[[119137,119137],"mapped",[119128,119141,119151]],[[119138,119138],"mapped",[119128,119141,119152]],[[119139,119139],"mapped",[119128,119141,119153]],[[119140,119140],"mapped",[119128,119141,119154]],[[119141,119154],"valid",[],"NV8"],[[119155,119162],"disallowed"],[[119163,119226],"valid",[],"NV8"],[[119227,119227],"mapped",[119225,119141]],[[119228,119228],"mapped",[119226,119141]],[[119229,119229],"mapped",[119225,119141,119150]],[[119230,119230],"mapped",[119226,119141,119150]],[[119231,119231],"mapped",[119225,119141,119151]],[[119232,119232],"mapped",[119226,119141,119151]],[[119233,119261],"valid",[],"NV8"],[[119262,119272],"valid",[],"NV8"],[[119273,119295],"disallowed"],[[119296,119365],"valid",[],"NV8"],[[119366,119551],"disallowed"],[[119552,119638],"valid",[],"NV8"],[[119639,119647],"disallowed"],[[119648,119665],"valid",[],"NV8"],[[119666,119807],"disallowed"],[[119808,119808],"mapped",[97]],[[119809,119809],"mapped",[98]],[[119810,119810],"mapped",[99]],[[119811,119811],"mapped",[100]],[[119812,119812],"mapped",[101]],[[119813,119813],"mapped",[102]],[[119814,119814],"mapped",[103]],[[119815,119815],"mapped",[104]],[[119816,119816],"mapped",[105]],[[119817,119817],"mapped",[106]],[[119818,119818],"mapped",[107]],[[119819,119819],"mapped",[108]],[[119820,119820],"mapped",[109]],[[119821,119821],"mapped",[110]],[[119822,119822],"mapped",[111]],[[119823,119823],"mapped",[112]],[[119824,119824],"mapped",[113]],[[119825,119825],"mapped",[114]],[[119826,119826],"mapped",[115]],[[119827,119827],"mapped",[116]],[[119828,119828],"mapped",[117]],[[119829,119829],"mapped",[118]],[[119830,119830],"mapped",[119]],[[119831,119831],"mapped",[120]],[[119832,119832],"mapped",[121]],[[119833,119833],"mapped",[122]],[[119834,119834],"mapped",[97]],[[119835,119835],"mapped",[98]],[[119836,119836],"mapped",[99]],[[119837,119837],"mapped",[100]],[[119838,119838],"mapped",[101]],[[119839,119839],"mapped",[102]],[[119840,119840],"mapped",[103]],[[119841,119841],"mapped",[104]],[[119842,119842],"mapped",[105]],[[119843,119843],"mapped",[106]],[[119844,119844],"mapped",[107]],[[119845,119845],"mapped",[108]],[[119846,119846],"mapped",[109]],[[119847,119847],"mapped",[110]],[[119848,119848],"mapped",[111]],[[119849,119849],"mapped",[112]],[[119850,119850],"mapped",[113]],[[119851,119851],"mapped",[114]],[[119852,119852],"mapped",[115]],[[119853,119853],"mapped",[116]],[[119854,119854],"mapped",[117]],[[119855,119855],"mapped",[118]],[[119856,119856],"mapped",[119]],[[119857,119857],"mapped",[120]],[[119858,119858],"mapped",[121]],[[119859,119859],"mapped",[122]],[[119860,119860],"mapped",[97]],[[119861,119861],"mapped",[98]],[[119862,119862],"mapped",[99]],[[119863,119863],"mapped",[100]],[[119864,119864],"mapped",[101]],[[119865,119865],"mapped",[102]],[[119866,119866],"mapped",[103]],[[119867,119867],"mapped",[104]],[[119868,119868],"mapped",[105]],[[119869,119869],"mapped",[106]],[[119870,119870],"mapped",[107]],[[119871,119871],"mapped",[108]],[[119872,119872],"mapped",[109]],[[119873,119873],"mapped",[110]],[[119874,119874],"mapped",[111]],[[119875,119875],"mapped",[112]],[[119876,119876],"mapped",[113]],[[119877,119877],"mapped",[114]],[[119878,119878],"mapped",[115]],[[119879,119879],"mapped",[116]],[[119880,119880],"mapped",[117]],[[119881,119881],"mapped",[118]],[[119882,119882],"mapped",[119]],[[119883,119883],"mapped",[120]],[[119884,119884],"mapped",[121]],[[119885,119885],"mapped",[122]],[[119886,119886],"mapped",[97]],[[119887,119887],"mapped",[98]],[[119888,119888],"mapped",[99]],[[119889,119889],"mapped",[100]],[[119890,119890],"mapped",[101]],[[119891,119891],"mapped",[102]],[[119892,119892],"mapped",[103]],[[119893,119893],"disallowed"],[[119894,119894],"mapped",[105]],[[119895,119895],"mapped",[106]],[[119896,119896],"mapped",[107]],[[119897,119897],"mapped",[108]],[[119898,119898],"mapped",[109]],[[119899,119899],"mapped",[110]],[[119900,119900],"mapped",[111]],[[119901,119901],"mapped",[112]],[[119902,119902],"mapped",[113]],[[119903,119903],"mapped",[114]],[[119904,119904],"mapped",[115]],[[119905,119905],"mapped",[116]],[[119906,119906],"mapped",[117]],[[119907,119907],"mapped",[118]],[[119908,119908],"mapped",[119]],[[119909,119909],"mapped",[120]],[[119910,119910],"mapped",[121]],[[119911,119911],"mapped",[122]],[[119912,119912],"mapped",[97]],[[119913,119913],"mapped",[98]],[[119914,119914],"mapped",[99]],[[119915,119915],"mapped",[100]],[[119916,119916],"mapped",[101]],[[119917,119917],"mapped",[102]],[[119918,119918],"mapped",[103]],[[119919,119919],"mapped",[104]],[[119920,119920],"mapped",[105]],[[119921,119921],"mapped",[106]],[[119922,119922],"mapped",[107]],[[119923,119923],"mapped",[108]],[[119924,119924],"mapped",[109]],[[119925,119925],"mapped",[110]],[[119926,119926],"mapped",[111]],[[119927,119927],"mapped",[112]],[[119928,119928],"mapped",[113]],[[119929,119929],"mapped",[114]],[[119930,119930],"mapped",[115]],[[119931,119931],"mapped",[116]],[[119932,119932],"mapped",[117]],[[119933,119933],"mapped",[118]],[[119934,119934],"mapped",[119]],[[119935,119935],"mapped",[120]],[[119936,119936],"mapped",[121]],[[119937,119937],"mapped",[122]],[[119938,119938],"mapped",[97]],[[119939,119939],"mapped",[98]],[[119940,119940],"mapped",[99]],[[119941,119941],"mapped",[100]],[[119942,119942],"mapped",[101]],[[119943,119943],"mapped",[102]],[[119944,119944],"mapped",[103]],[[119945,119945],"mapped",[104]],[[119946,119946],"mapped",[105]],[[119947,119947],"mapped",[106]],[[119948,119948],"mapped",[107]],[[119949,119949],"mapped",[108]],[[119950,119950],"mapped",[109]],[[119951,119951],"mapped",[110]],[[119952,119952],"mapped",[111]],[[119953,119953],"mapped",[112]],[[119954,119954],"mapped",[113]],[[119955,119955],"mapped",[114]],[[119956,119956],"mapped",[115]],[[119957,119957],"mapped",[116]],[[119958,119958],"mapped",[117]],[[119959,119959],"mapped",[118]],[[119960,119960],"mapped",[119]],[[119961,119961],"mapped",[120]],[[119962,119962],"mapped",[121]],[[119963,119963],"mapped",[122]],[[119964,119964],"mapped",[97]],[[119965,119965],"disallowed"],[[119966,119966],"mapped",[99]],[[119967,119967],"mapped",[100]],[[119968,119969],"disallowed"],[[119970,119970],"mapped",[103]],[[119971,119972],"disallowed"],[[119973,119973],"mapped",[106]],[[119974,119974],"mapped",[107]],[[119975,119976],"disallowed"],[[119977,119977],"mapped",[110]],[[119978,119978],"mapped",[111]],[[119979,119979],"mapped",[112]],[[119980,119980],"mapped",[113]],[[119981,119981],"disallowed"],[[119982,119982],"mapped",[115]],[[119983,119983],"mapped",[116]],[[119984,119984],"mapped",[117]],[[119985,119985],"mapped",[118]],[[119986,119986],"mapped",[119]],[[119987,119987],"mapped",[120]],[[119988,119988],"mapped",[121]],[[119989,119989],"mapped",[122]],[[119990,119990],"mapped",[97]],[[119991,119991],"mapped",[98]],[[119992,119992],"mapped",[99]],[[119993,119993],"mapped",[100]],[[119994,119994],"disallowed"],[[119995,119995],"mapped",[102]],[[119996,119996],"disallowed"],[[119997,119997],"mapped",[104]],[[119998,119998],"mapped",[105]],[[119999,119999],"mapped",[106]],[[12e4,12e4],"mapped",[107]],[[120001,120001],"mapped",[108]],[[120002,120002],"mapped",[109]],[[120003,120003],"mapped",[110]],[[120004,120004],"disallowed"],[[120005,120005],"mapped",[112]],[[120006,120006],"mapped",[113]],[[120007,120007],"mapped",[114]],[[120008,120008],"mapped",[115]],[[120009,120009],"mapped",[116]],[[120010,120010],"mapped",[117]],[[120011,120011],"mapped",[118]],[[120012,120012],"mapped",[119]],[[120013,120013],"mapped",[120]],[[120014,120014],"mapped",[121]],[[120015,120015],"mapped",[122]],[[120016,120016],"mapped",[97]],[[120017,120017],"mapped",[98]],[[120018,120018],"mapped",[99]],[[120019,120019],"mapped",[100]],[[120020,120020],"mapped",[101]],[[120021,120021],"mapped",[102]],[[120022,120022],"mapped",[103]],[[120023,120023],"mapped",[104]],[[120024,120024],"mapped",[105]],[[120025,120025],"mapped",[106]],[[120026,120026],"mapped",[107]],[[120027,120027],"mapped",[108]],[[120028,120028],"mapped",[109]],[[120029,120029],"mapped",[110]],[[120030,120030],"mapped",[111]],[[120031,120031],"mapped",[112]],[[120032,120032],"mapped",[113]],[[120033,120033],"mapped",[114]],[[120034,120034],"mapped",[115]],[[120035,120035],"mapped",[116]],[[120036,120036],"mapped",[117]],[[120037,120037],"mapped",[118]],[[120038,120038],"mapped",[119]],[[120039,120039],"mapped",[120]],[[120040,120040],"mapped",[121]],[[120041,120041],"mapped",[122]],[[120042,120042],"mapped",[97]],[[120043,120043],"mapped",[98]],[[120044,120044],"mapped",[99]],[[120045,120045],"mapped",[100]],[[120046,120046],"mapped",[101]],[[120047,120047],"mapped",[102]],[[120048,120048],"mapped",[103]],[[120049,120049],"mapped",[104]],[[120050,120050],"mapped",[105]],[[120051,120051],"mapped",[106]],[[120052,120052],"mapped",[107]],[[120053,120053],"mapped",[108]],[[120054,120054],"mapped",[109]],[[120055,120055],"mapped",[110]],[[120056,120056],"mapped",[111]],[[120057,120057],"mapped",[112]],[[120058,120058],"mapped",[113]],[[120059,120059],"mapped",[114]],[[120060,120060],"mapped",[115]],[[120061,120061],"mapped",[116]],[[120062,120062],"mapped",[117]],[[120063,120063],"mapped",[118]],[[120064,120064],"mapped",[119]],[[120065,120065],"mapped",[120]],[[120066,120066],"mapped",[121]],[[120067,120067],"mapped",[122]],[[120068,120068],"mapped",[97]],[[120069,120069],"mapped",[98]],[[120070,120070],"disallowed"],[[120071,120071],"mapped",[100]],[[120072,120072],"mapped",[101]],[[120073,120073],"mapped",[102]],[[120074,120074],"mapped",[103]],[[120075,120076],"disallowed"],[[120077,120077],"mapped",[106]],[[120078,120078],"mapped",[107]],[[120079,120079],"mapped",[108]],[[120080,120080],"mapped",[109]],[[120081,120081],"mapped",[110]],[[120082,120082],"mapped",[111]],[[120083,120083],"mapped",[112]],[[120084,120084],"mapped",[113]],[[120085,120085],"disallowed"],[[120086,120086],"mapped",[115]],[[120087,120087],"mapped",[116]],[[120088,120088],"mapped",[117]],[[120089,120089],"mapped",[118]],[[120090,120090],"mapped",[119]],[[120091,120091],"mapped",[120]],[[120092,120092],"mapped",[121]],[[120093,120093],"disallowed"],[[120094,120094],"mapped",[97]],[[120095,120095],"mapped",[98]],[[120096,120096],"mapped",[99]],[[120097,120097],"mapped",[100]],[[120098,120098],"mapped",[101]],[[120099,120099],"mapped",[102]],[[120100,120100],"mapped",[103]],[[120101,120101],"mapped",[104]],[[120102,120102],"mapped",[105]],[[120103,120103],"mapped",[106]],[[120104,120104],"mapped",[107]],[[120105,120105],"mapped",[108]],[[120106,120106],"mapped",[109]],[[120107,120107],"mapped",[110]],[[120108,120108],"mapped",[111]],[[120109,120109],"mapped",[112]],[[120110,120110],"mapped",[113]],[[120111,120111],"mapped",[114]],[[120112,120112],"mapped",[115]],[[120113,120113],"mapped",[116]],[[120114,120114],"mapped",[117]],[[120115,120115],"mapped",[118]],[[120116,120116],"mapped",[119]],[[120117,120117],"mapped",[120]],[[120118,120118],"mapped",[121]],[[120119,120119],"mapped",[122]],[[120120,120120],"mapped",[97]],[[120121,120121],"mapped",[98]],[[120122,120122],"disallowed"],[[120123,120123],"mapped",[100]],[[120124,120124],"mapped",[101]],[[120125,120125],"mapped",[102]],[[120126,120126],"mapped",[103]],[[120127,120127],"disallowed"],[[120128,120128],"mapped",[105]],[[120129,120129],"mapped",[106]],[[120130,120130],"mapped",[107]],[[120131,120131],"mapped",[108]],[[120132,120132],"mapped",[109]],[[120133,120133],"disallowed"],[[120134,120134],"mapped",[111]],[[120135,120137],"disallowed"],[[120138,120138],"mapped",[115]],[[120139,120139],"mapped",[116]],[[120140,120140],"mapped",[117]],[[120141,120141],"mapped",[118]],[[120142,120142],"mapped",[119]],[[120143,120143],"mapped",[120]],[[120144,120144],"mapped",[121]],[[120145,120145],"disallowed"],[[120146,120146],"mapped",[97]],[[120147,120147],"mapped",[98]],[[120148,120148],"mapped",[99]],[[120149,120149],"mapped",[100]],[[120150,120150],"mapped",[101]],[[120151,120151],"mapped",[102]],[[120152,120152],"mapped",[103]],[[120153,120153],"mapped",[104]],[[120154,120154],"mapped",[105]],[[120155,120155],"mapped",[106]],[[120156,120156],"mapped",[107]],[[120157,120157],"mapped",[108]],[[120158,120158],"mapped",[109]],[[120159,120159],"mapped",[110]],[[120160,120160],"mapped",[111]],[[120161,120161],"mapped",[112]],[[120162,120162],"mapped",[113]],[[120163,120163],"mapped",[114]],[[120164,120164],"mapped",[115]],[[120165,120165],"mapped",[116]],[[120166,120166],"mapped",[117]],[[120167,120167],"mapped",[118]],[[120168,120168],"mapped",[119]],[[120169,120169],"mapped",[120]],[[120170,120170],"mapped",[121]],[[120171,120171],"mapped",[122]],[[120172,120172],"mapped",[97]],[[120173,120173],"mapped",[98]],[[120174,120174],"mapped",[99]],[[120175,120175],"mapped",[100]],[[120176,120176],"mapped",[101]],[[120177,120177],"mapped",[102]],[[120178,120178],"mapped",[103]],[[120179,120179],"mapped",[104]],[[120180,120180],"mapped",[105]],[[120181,120181],"mapped",[106]],[[120182,120182],"mapped",[107]],[[120183,120183],"mapped",[108]],[[120184,120184],"mapped",[109]],[[120185,120185],"mapped",[110]],[[120186,120186],"mapped",[111]],[[120187,120187],"mapped",[112]],[[120188,120188],"mapped",[113]],[[120189,120189],"mapped",[114]],[[120190,120190],"mapped",[115]],[[120191,120191],"mapped",[116]],[[120192,120192],"mapped",[117]],[[120193,120193],"mapped",[118]],[[120194,120194],"mapped",[119]],[[120195,120195],"mapped",[120]],[[120196,120196],"mapped",[121]],[[120197,120197],"mapped",[122]],[[120198,120198],"mapped",[97]],[[120199,120199],"mapped",[98]],[[120200,120200],"mapped",[99]],[[120201,120201],"mapped",[100]],[[120202,120202],"mapped",[101]],[[120203,120203],"mapped",[102]],[[120204,120204],"mapped",[103]],[[120205,120205],"mapped",[104]],[[120206,120206],"mapped",[105]],[[120207,120207],"mapped",[106]],[[120208,120208],"mapped",[107]],[[120209,120209],"mapped",[108]],[[120210,120210],"mapped",[109]],[[120211,120211],"mapped",[110]],[[120212,120212],"mapped",[111]],[[120213,120213],"mapped",[112]],[[120214,120214],"mapped",[113]],[[120215,120215],"mapped",[114]],[[120216,120216],"mapped",[115]],[[120217,120217],"mapped",[116]],[[120218,120218],"mapped",[117]],[[120219,120219],"mapped",[118]],[[120220,120220],"mapped",[119]],[[120221,120221],"mapped",[120]],[[120222,120222],"mapped",[121]],[[120223,120223],"mapped",[122]],[[120224,120224],"mapped",[97]],[[120225,120225],"mapped",[98]],[[120226,120226],"mapped",[99]],[[120227,120227],"mapped",[100]],[[120228,120228],"mapped",[101]],[[120229,120229],"mapped",[102]],[[120230,120230],"mapped",[103]],[[120231,120231],"mapped",[104]],[[120232,120232],"mapped",[105]],[[120233,120233],"mapped",[106]],[[120234,120234],"mapped",[107]],[[120235,120235],"mapped",[108]],[[120236,120236],"mapped",[109]],[[120237,120237],"mapped",[110]],[[120238,120238],"mapped",[111]],[[120239,120239],"mapped",[112]],[[120240,120240],"mapped",[113]],[[120241,120241],"mapped",[114]],[[120242,120242],"mapped",[115]],[[120243,120243],"mapped",[116]],[[120244,120244],"mapped",[117]],[[120245,120245],"mapped",[118]],[[120246,120246],"mapped",[119]],[[120247,120247],"mapped",[120]],[[120248,120248],"mapped",[121]],[[120249,120249],"mapped",[122]],[[120250,120250],"mapped",[97]],[[120251,120251],"mapped",[98]],[[120252,120252],"mapped",[99]],[[120253,120253],"mapped",[100]],[[120254,120254],"mapped",[101]],[[120255,120255],"mapped",[102]],[[120256,120256],"mapped",[103]],[[120257,120257],"mapped",[104]],[[120258,120258],"mapped",[105]],[[120259,120259],"mapped",[106]],[[120260,120260],"mapped",[107]],[[120261,120261],"mapped",[108]],[[120262,120262],"mapped",[109]],[[120263,120263],"mapped",[110]],[[120264,120264],"mapped",[111]],[[120265,120265],"mapped",[112]],[[120266,120266],"mapped",[113]],[[120267,120267],"mapped",[114]],[[120268,120268],"mapped",[115]],[[120269,120269],"mapped",[116]],[[120270,120270],"mapped",[117]],[[120271,120271],"mapped",[118]],[[120272,120272],"mapped",[119]],[[120273,120273],"mapped",[120]],[[120274,120274],"mapped",[121]],[[120275,120275],"mapped",[122]],[[120276,120276],"mapped",[97]],[[120277,120277],"mapped",[98]],[[120278,120278],"mapped",[99]],[[120279,120279],"mapped",[100]],[[120280,120280],"mapped",[101]],[[120281,120281],"mapped",[102]],[[120282,120282],"mapped",[103]],[[120283,120283],"mapped",[104]],[[120284,120284],"mapped",[105]],[[120285,120285],"mapped",[106]],[[120286,120286],"mapped",[107]],[[120287,120287],"mapped",[108]],[[120288,120288],"mapped",[109]],[[120289,120289],"mapped",[110]],[[120290,120290],"mapped",[111]],[[120291,120291],"mapped",[112]],[[120292,120292],"mapped",[113]],[[120293,120293],"mapped",[114]],[[120294,120294],"mapped",[115]],[[120295,120295],"mapped",[116]],[[120296,120296],"mapped",[117]],[[120297,120297],"mapped",[118]],[[120298,120298],"mapped",[119]],[[120299,120299],"mapped",[120]],[[120300,120300],"mapped",[121]],[[120301,120301],"mapped",[122]],[[120302,120302],"mapped",[97]],[[120303,120303],"mapped",[98]],[[120304,120304],"mapped",[99]],[[120305,120305],"mapped",[100]],[[120306,120306],"mapped",[101]],[[120307,120307],"mapped",[102]],[[120308,120308],"mapped",[103]],[[120309,120309],"mapped",[104]],[[120310,120310],"mapped",[105]],[[120311,120311],"mapped",[106]],[[120312,120312],"mapped",[107]],[[120313,120313],"mapped",[108]],[[120314,120314],"mapped",[109]],[[120315,120315],"mapped",[110]],[[120316,120316],"mapped",[111]],[[120317,120317],"mapped",[112]],[[120318,120318],"mapped",[113]],[[120319,120319],"mapped",[114]],[[120320,120320],"mapped",[115]],[[120321,120321],"mapped",[116]],[[120322,120322],"mapped",[117]],[[120323,120323],"mapped",[118]],[[120324,120324],"mapped",[119]],[[120325,120325],"mapped",[120]],[[120326,120326],"mapped",[121]],[[120327,120327],"mapped",[122]],[[120328,120328],"mapped",[97]],[[120329,120329],"mapped",[98]],[[120330,120330],"mapped",[99]],[[120331,120331],"mapped",[100]],[[120332,120332],"mapped",[101]],[[120333,120333],"mapped",[102]],[[120334,120334],"mapped",[103]],[[120335,120335],"mapped",[104]],[[120336,120336],"mapped",[105]],[[120337,120337],"mapped",[106]],[[120338,120338],"mapped",[107]],[[120339,120339],"mapped",[108]],[[120340,120340],"mapped",[109]],[[120341,120341],"mapped",[110]],[[120342,120342],"mapped",[111]],[[120343,120343],"mapped",[112]],[[120344,120344],"mapped",[113]],[[120345,120345],"mapped",[114]],[[120346,120346],"mapped",[115]],[[120347,120347],"mapped",[116]],[[120348,120348],"mapped",[117]],[[120349,120349],"mapped",[118]],[[120350,120350],"mapped",[119]],[[120351,120351],"mapped",[120]],[[120352,120352],"mapped",[121]],[[120353,120353],"mapped",[122]],[[120354,120354],"mapped",[97]],[[120355,120355],"mapped",[98]],[[120356,120356],"mapped",[99]],[[120357,120357],"mapped",[100]],[[120358,120358],"mapped",[101]],[[120359,120359],"mapped",[102]],[[120360,120360],"mapped",[103]],[[120361,120361],"mapped",[104]],[[120362,120362],"mapped",[105]],[[120363,120363],"mapped",[106]],[[120364,120364],"mapped",[107]],[[120365,120365],"mapped",[108]],[[120366,120366],"mapped",[109]],[[120367,120367],"mapped",[110]],[[120368,120368],"mapped",[111]],[[120369,120369],"mapped",[112]],[[120370,120370],"mapped",[113]],[[120371,120371],"mapped",[114]],[[120372,120372],"mapped",[115]],[[120373,120373],"mapped",[116]],[[120374,120374],"mapped",[117]],[[120375,120375],"mapped",[118]],[[120376,120376],"mapped",[119]],[[120377,120377],"mapped",[120]],[[120378,120378],"mapped",[121]],[[120379,120379],"mapped",[122]],[[120380,120380],"mapped",[97]],[[120381,120381],"mapped",[98]],[[120382,120382],"mapped",[99]],[[120383,120383],"mapped",[100]],[[120384,120384],"mapped",[101]],[[120385,120385],"mapped",[102]],[[120386,120386],"mapped",[103]],[[120387,120387],"mapped",[104]],[[120388,120388],"mapped",[105]],[[120389,120389],"mapped",[106]],[[120390,120390],"mapped",[107]],[[120391,120391],"mapped",[108]],[[120392,120392],"mapped",[109]],[[120393,120393],"mapped",[110]],[[120394,120394],"mapped",[111]],[[120395,120395],"mapped",[112]],[[120396,120396],"mapped",[113]],[[120397,120397],"mapped",[114]],[[120398,120398],"mapped",[115]],[[120399,120399],"mapped",[116]],[[120400,120400],"mapped",[117]],[[120401,120401],"mapped",[118]],[[120402,120402],"mapped",[119]],[[120403,120403],"mapped",[120]],[[120404,120404],"mapped",[121]],[[120405,120405],"mapped",[122]],[[120406,120406],"mapped",[97]],[[120407,120407],"mapped",[98]],[[120408,120408],"mapped",[99]],[[120409,120409],"mapped",[100]],[[120410,120410],"mapped",[101]],[[120411,120411],"mapped",[102]],[[120412,120412],"mapped",[103]],[[120413,120413],"mapped",[104]],[[120414,120414],"mapped",[105]],[[120415,120415],"mapped",[106]],[[120416,120416],"mapped",[107]],[[120417,120417],"mapped",[108]],[[120418,120418],"mapped",[109]],[[120419,120419],"mapped",[110]],[[120420,120420],"mapped",[111]],[[120421,120421],"mapped",[112]],[[120422,120422],"mapped",[113]],[[120423,120423],"mapped",[114]],[[120424,120424],"mapped",[115]],[[120425,120425],"mapped",[116]],[[120426,120426],"mapped",[117]],[[120427,120427],"mapped",[118]],[[120428,120428],"mapped",[119]],[[120429,120429],"mapped",[120]],[[120430,120430],"mapped",[121]],[[120431,120431],"mapped",[122]],[[120432,120432],"mapped",[97]],[[120433,120433],"mapped",[98]],[[120434,120434],"mapped",[99]],[[120435,120435],"mapped",[100]],[[120436,120436],"mapped",[101]],[[120437,120437],"mapped",[102]],[[120438,120438],"mapped",[103]],[[120439,120439],"mapped",[104]],[[120440,120440],"mapped",[105]],[[120441,120441],"mapped",[106]],[[120442,120442],"mapped",[107]],[[120443,120443],"mapped",[108]],[[120444,120444],"mapped",[109]],[[120445,120445],"mapped",[110]],[[120446,120446],"mapped",[111]],[[120447,120447],"mapped",[112]],[[120448,120448],"mapped",[113]],[[120449,120449],"mapped",[114]],[[120450,120450],"mapped",[115]],[[120451,120451],"mapped",[116]],[[120452,120452],"mapped",[117]],[[120453,120453],"mapped",[118]],[[120454,120454],"mapped",[119]],[[120455,120455],"mapped",[120]],[[120456,120456],"mapped",[121]],[[120457,120457],"mapped",[122]],[[120458,120458],"mapped",[97]],[[120459,120459],"mapped",[98]],[[120460,120460],"mapped",[99]],[[120461,120461],"mapped",[100]],[[120462,120462],"mapped",[101]],[[120463,120463],"mapped",[102]],[[120464,120464],"mapped",[103]],[[120465,120465],"mapped",[104]],[[120466,120466],"mapped",[105]],[[120467,120467],"mapped",[106]],[[120468,120468],"mapped",[107]],[[120469,120469],"mapped",[108]],[[120470,120470],"mapped",[109]],[[120471,120471],"mapped",[110]],[[120472,120472],"mapped",[111]],[[120473,120473],"mapped",[112]],[[120474,120474],"mapped",[113]],[[120475,120475],"mapped",[114]],[[120476,120476],"mapped",[115]],[[120477,120477],"mapped",[116]],[[120478,120478],"mapped",[117]],[[120479,120479],"mapped",[118]],[[120480,120480],"mapped",[119]],[[120481,120481],"mapped",[120]],[[120482,120482],"mapped",[121]],[[120483,120483],"mapped",[122]],[[120484,120484],"mapped",[305]],[[120485,120485],"mapped",[567]],[[120486,120487],"disallowed"],[[120488,120488],"mapped",[945]],[[120489,120489],"mapped",[946]],[[120490,120490],"mapped",[947]],[[120491,120491],"mapped",[948]],[[120492,120492],"mapped",[949]],[[120493,120493],"mapped",[950]],[[120494,120494],"mapped",[951]],[[120495,120495],"mapped",[952]],[[120496,120496],"mapped",[953]],[[120497,120497],"mapped",[954]],[[120498,120498],"mapped",[955]],[[120499,120499],"mapped",[956]],[[120500,120500],"mapped",[957]],[[120501,120501],"mapped",[958]],[[120502,120502],"mapped",[959]],[[120503,120503],"mapped",[960]],[[120504,120504],"mapped",[961]],[[120505,120505],"mapped",[952]],[[120506,120506],"mapped",[963]],[[120507,120507],"mapped",[964]],[[120508,120508],"mapped",[965]],[[120509,120509],"mapped",[966]],[[120510,120510],"mapped",[967]],[[120511,120511],"mapped",[968]],[[120512,120512],"mapped",[969]],[[120513,120513],"mapped",[8711]],[[120514,120514],"mapped",[945]],[[120515,120515],"mapped",[946]],[[120516,120516],"mapped",[947]],[[120517,120517],"mapped",[948]],[[120518,120518],"mapped",[949]],[[120519,120519],"mapped",[950]],[[120520,120520],"mapped",[951]],[[120521,120521],"mapped",[952]],[[120522,120522],"mapped",[953]],[[120523,120523],"mapped",[954]],[[120524,120524],"mapped",[955]],[[120525,120525],"mapped",[956]],[[120526,120526],"mapped",[957]],[[120527,120527],"mapped",[958]],[[120528,120528],"mapped",[959]],[[120529,120529],"mapped",[960]],[[120530,120530],"mapped",[961]],[[120531,120532],"mapped",[963]],[[120533,120533],"mapped",[964]],[[120534,120534],"mapped",[965]],[[120535,120535],"mapped",[966]],[[120536,120536],"mapped",[967]],[[120537,120537],"mapped",[968]],[[120538,120538],"mapped",[969]],[[120539,120539],"mapped",[8706]],[[120540,120540],"mapped",[949]],[[120541,120541],"mapped",[952]],[[120542,120542],"mapped",[954]],[[120543,120543],"mapped",[966]],[[120544,120544],"mapped",[961]],[[120545,120545],"mapped",[960]],[[120546,120546],"mapped",[945]],[[120547,120547],"mapped",[946]],[[120548,120548],"mapped",[947]],[[120549,120549],"mapped",[948]],[[120550,120550],"mapped",[949]],[[120551,120551],"mapped",[950]],[[120552,120552],"mapped",[951]],[[120553,120553],"mapped",[952]],[[120554,120554],"mapped",[953]],[[120555,120555],"mapped",[954]],[[120556,120556],"mapped",[955]],[[120557,120557],"mapped",[956]],[[120558,120558],"mapped",[957]],[[120559,120559],"mapped",[958]],[[120560,120560],"mapped",[959]],[[120561,120561],"mapped",[960]],[[120562,120562],"mapped",[961]],[[120563,120563],"mapped",[952]],[[120564,120564],"mapped",[963]],[[120565,120565],"mapped",[964]],[[120566,120566],"mapped",[965]],[[120567,120567],"mapped",[966]],[[120568,120568],"mapped",[967]],[[120569,120569],"mapped",[968]],[[120570,120570],"mapped",[969]],[[120571,120571],"mapped",[8711]],[[120572,120572],"mapped",[945]],[[120573,120573],"mapped",[946]],[[120574,120574],"mapped",[947]],[[120575,120575],"mapped",[948]],[[120576,120576],"mapped",[949]],[[120577,120577],"mapped",[950]],[[120578,120578],"mapped",[951]],[[120579,120579],"mapped",[952]],[[120580,120580],"mapped",[953]],[[120581,120581],"mapped",[954]],[[120582,120582],"mapped",[955]],[[120583,120583],"mapped",[956]],[[120584,120584],"mapped",[957]],[[120585,120585],"mapped",[958]],[[120586,120586],"mapped",[959]],[[120587,120587],"mapped",[960]],[[120588,120588],"mapped",[961]],[[120589,120590],"mapped",[963]],[[120591,120591],"mapped",[964]],[[120592,120592],"mapped",[965]],[[120593,120593],"mapped",[966]],[[120594,120594],"mapped",[967]],[[120595,120595],"mapped",[968]],[[120596,120596],"mapped",[969]],[[120597,120597],"mapped",[8706]],[[120598,120598],"mapped",[949]],[[120599,120599],"mapped",[952]],[[120600,120600],"mapped",[954]],[[120601,120601],"mapped",[966]],[[120602,120602],"mapped",[961]],[[120603,120603],"mapped",[960]],[[120604,120604],"mapped",[945]],[[120605,120605],"mapped",[946]],[[120606,120606],"mapped",[947]],[[120607,120607],"mapped",[948]],[[120608,120608],"mapped",[949]],[[120609,120609],"mapped",[950]],[[120610,120610],"mapped",[951]],[[120611,120611],"mapped",[952]],[[120612,120612],"mapped",[953]],[[120613,120613],"mapped",[954]],[[120614,120614],"mapped",[955]],[[120615,120615],"mapped",[956]],[[120616,120616],"mapped",[957]],[[120617,120617],"mapped",[958]],[[120618,120618],"mapped",[959]],[[120619,120619],"mapped",[960]],[[120620,120620],"mapped",[961]],[[120621,120621],"mapped",[952]],[[120622,120622],"mapped",[963]],[[120623,120623],"mapped",[964]],[[120624,120624],"mapped",[965]],[[120625,120625],"mapped",[966]],[[120626,120626],"mapped",[967]],[[120627,120627],"mapped",[968]],[[120628,120628],"mapped",[969]],[[120629,120629],"mapped",[8711]],[[120630,120630],"mapped",[945]],[[120631,120631],"mapped",[946]],[[120632,120632],"mapped",[947]],[[120633,120633],"mapped",[948]],[[120634,120634],"mapped",[949]],[[120635,120635],"mapped",[950]],[[120636,120636],"mapped",[951]],[[120637,120637],"mapped",[952]],[[120638,120638],"mapped",[953]],[[120639,120639],"mapped",[954]],[[120640,120640],"mapped",[955]],[[120641,120641],"mapped",[956]],[[120642,120642],"mapped",[957]],[[120643,120643],"mapped",[958]],[[120644,120644],"mapped",[959]],[[120645,120645],"mapped",[960]],[[120646,120646],"mapped",[961]],[[120647,120648],"mapped",[963]],[[120649,120649],"mapped",[964]],[[120650,120650],"mapped",[965]],[[120651,120651],"mapped",[966]],[[120652,120652],"mapped",[967]],[[120653,120653],"mapped",[968]],[[120654,120654],"mapped",[969]],[[120655,120655],"mapped",[8706]],[[120656,120656],"mapped",[949]],[[120657,120657],"mapped",[952]],[[120658,120658],"mapped",[954]],[[120659,120659],"mapped",[966]],[[120660,120660],"mapped",[961]],[[120661,120661],"mapped",[960]],[[120662,120662],"mapped",[945]],[[120663,120663],"mapped",[946]],[[120664,120664],"mapped",[947]],[[120665,120665],"mapped",[948]],[[120666,120666],"mapped",[949]],[[120667,120667],"mapped",[950]],[[120668,120668],"mapped",[951]],[[120669,120669],"mapped",[952]],[[120670,120670],"mapped",[953]],[[120671,120671],"mapped",[954]],[[120672,120672],"mapped",[955]],[[120673,120673],"mapped",[956]],[[120674,120674],"mapped",[957]],[[120675,120675],"mapped",[958]],[[120676,120676],"mapped",[959]],[[120677,120677],"mapped",[960]],[[120678,120678],"mapped",[961]],[[120679,120679],"mapped",[952]],[[120680,120680],"mapped",[963]],[[120681,120681],"mapped",[964]],[[120682,120682],"mapped",[965]],[[120683,120683],"mapped",[966]],[[120684,120684],"mapped",[967]],[[120685,120685],"mapped",[968]],[[120686,120686],"mapped",[969]],[[120687,120687],"mapped",[8711]],[[120688,120688],"mapped",[945]],[[120689,120689],"mapped",[946]],[[120690,120690],"mapped",[947]],[[120691,120691],"mapped",[948]],[[120692,120692],"mapped",[949]],[[120693,120693],"mapped",[950]],[[120694,120694],"mapped",[951]],[[120695,120695],"mapped",[952]],[[120696,120696],"mapped",[953]],[[120697,120697],"mapped",[954]],[[120698,120698],"mapped",[955]],[[120699,120699],"mapped",[956]],[[120700,120700],"mapped",[957]],[[120701,120701],"mapped",[958]],[[120702,120702],"mapped",[959]],[[120703,120703],"mapped",[960]],[[120704,120704],"mapped",[961]],[[120705,120706],"mapped",[963]],[[120707,120707],"mapped",[964]],[[120708,120708],"mapped",[965]],[[120709,120709],"mapped",[966]],[[120710,120710],"mapped",[967]],[[120711,120711],"mapped",[968]],[[120712,120712],"mapped",[969]],[[120713,120713],"mapped",[8706]],[[120714,120714],"mapped",[949]],[[120715,120715],"mapped",[952]],[[120716,120716],"mapped",[954]],[[120717,120717],"mapped",[966]],[[120718,120718],"mapped",[961]],[[120719,120719],"mapped",[960]],[[120720,120720],"mapped",[945]],[[120721,120721],"mapped",[946]],[[120722,120722],"mapped",[947]],[[120723,120723],"mapped",[948]],[[120724,120724],"mapped",[949]],[[120725,120725],"mapped",[950]],[[120726,120726],"mapped",[951]],[[120727,120727],"mapped",[952]],[[120728,120728],"mapped",[953]],[[120729,120729],"mapped",[954]],[[120730,120730],"mapped",[955]],[[120731,120731],"mapped",[956]],[[120732,120732],"mapped",[957]],[[120733,120733],"mapped",[958]],[[120734,120734],"mapped",[959]],[[120735,120735],"mapped",[960]],[[120736,120736],"mapped",[961]],[[120737,120737],"mapped",[952]],[[120738,120738],"mapped",[963]],[[120739,120739],"mapped",[964]],[[120740,120740],"mapped",[965]],[[120741,120741],"mapped",[966]],[[120742,120742],"mapped",[967]],[[120743,120743],"mapped",[968]],[[120744,120744],"mapped",[969]],[[120745,120745],"mapped",[8711]],[[120746,120746],"mapped",[945]],[[120747,120747],"mapped",[946]],[[120748,120748],"mapped",[947]],[[120749,120749],"mapped",[948]],[[120750,120750],"mapped",[949]],[[120751,120751],"mapped",[950]],[[120752,120752],"mapped",[951]],[[120753,120753],"mapped",[952]],[[120754,120754],"mapped",[953]],[[120755,120755],"mapped",[954]],[[120756,120756],"mapped",[955]],[[120757,120757],"mapped",[956]],[[120758,120758],"mapped",[957]],[[120759,120759],"mapped",[958]],[[120760,120760],"mapped",[959]],[[120761,120761],"mapped",[960]],[[120762,120762],"mapped",[961]],[[120763,120764],"mapped",[963]],[[120765,120765],"mapped",[964]],[[120766,120766],"mapped",[965]],[[120767,120767],"mapped",[966]],[[120768,120768],"mapped",[967]],[[120769,120769],"mapped",[968]],[[120770,120770],"mapped",[969]],[[120771,120771],"mapped",[8706]],[[120772,120772],"mapped",[949]],[[120773,120773],"mapped",[952]],[[120774,120774],"mapped",[954]],[[120775,120775],"mapped",[966]],[[120776,120776],"mapped",[961]],[[120777,120777],"mapped",[960]],[[120778,120779],"mapped",[989]],[[120780,120781],"disallowed"],[[120782,120782],"mapped",[48]],[[120783,120783],"mapped",[49]],[[120784,120784],"mapped",[50]],[[120785,120785],"mapped",[51]],[[120786,120786],"mapped",[52]],[[120787,120787],"mapped",[53]],[[120788,120788],"mapped",[54]],[[120789,120789],"mapped",[55]],[[120790,120790],"mapped",[56]],[[120791,120791],"mapped",[57]],[[120792,120792],"mapped",[48]],[[120793,120793],"mapped",[49]],[[120794,120794],"mapped",[50]],[[120795,120795],"mapped",[51]],[[120796,120796],"mapped",[52]],[[120797,120797],"mapped",[53]],[[120798,120798],"mapped",[54]],[[120799,120799],"mapped",[55]],[[120800,120800],"mapped",[56]],[[120801,120801],"mapped",[57]],[[120802,120802],"mapped",[48]],[[120803,120803],"mapped",[49]],[[120804,120804],"mapped",[50]],[[120805,120805],"mapped",[51]],[[120806,120806],"mapped",[52]],[[120807,120807],"mapped",[53]],[[120808,120808],"mapped",[54]],[[120809,120809],"mapped",[55]],[[120810,120810],"mapped",[56]],[[120811,120811],"mapped",[57]],[[120812,120812],"mapped",[48]],[[120813,120813],"mapped",[49]],[[120814,120814],"mapped",[50]],[[120815,120815],"mapped",[51]],[[120816,120816],"mapped",[52]],[[120817,120817],"mapped",[53]],[[120818,120818],"mapped",[54]],[[120819,120819],"mapped",[55]],[[120820,120820],"mapped",[56]],[[120821,120821],"mapped",[57]],[[120822,120822],"mapped",[48]],[[120823,120823],"mapped",[49]],[[120824,120824],"mapped",[50]],[[120825,120825],"mapped",[51]],[[120826,120826],"mapped",[52]],[[120827,120827],"mapped",[53]],[[120828,120828],"mapped",[54]],[[120829,120829],"mapped",[55]],[[120830,120830],"mapped",[56]],[[120831,120831],"mapped",[57]],[[120832,121343],"valid",[],"NV8"],[[121344,121398],"valid"],[[121399,121402],"valid",[],"NV8"],[[121403,121452],"valid"],[[121453,121460],"valid",[],"NV8"],[[121461,121461],"valid"],[[121462,121475],"valid",[],"NV8"],[[121476,121476],"valid"],[[121477,121483],"valid",[],"NV8"],[[121484,121498],"disallowed"],[[121499,121503],"valid"],[[121504,121504],"disallowed"],[[121505,121519],"valid"],[[121520,124927],"disallowed"],[[124928,125124],"valid"],[[125125,125126],"disallowed"],[[125127,125135],"valid",[],"NV8"],[[125136,125142],"valid"],[[125143,126463],"disallowed"],[[126464,126464],"mapped",[1575]],[[126465,126465],"mapped",[1576]],[[126466,126466],"mapped",[1580]],[[126467,126467],"mapped",[1583]],[[126468,126468],"disallowed"],[[126469,126469],"mapped",[1608]],[[126470,126470],"mapped",[1586]],[[126471,126471],"mapped",[1581]],[[126472,126472],"mapped",[1591]],[[126473,126473],"mapped",[1610]],[[126474,126474],"mapped",[1603]],[[126475,126475],"mapped",[1604]],[[126476,126476],"mapped",[1605]],[[126477,126477],"mapped",[1606]],[[126478,126478],"mapped",[1587]],[[126479,126479],"mapped",[1593]],[[126480,126480],"mapped",[1601]],[[126481,126481],"mapped",[1589]],[[126482,126482],"mapped",[1602]],[[126483,126483],"mapped",[1585]],[[126484,126484],"mapped",[1588]],[[126485,126485],"mapped",[1578]],[[126486,126486],"mapped",[1579]],[[126487,126487],"mapped",[1582]],[[126488,126488],"mapped",[1584]],[[126489,126489],"mapped",[1590]],[[126490,126490],"mapped",[1592]],[[126491,126491],"mapped",[1594]],[[126492,126492],"mapped",[1646]],[[126493,126493],"mapped",[1722]],[[126494,126494],"mapped",[1697]],[[126495,126495],"mapped",[1647]],[[126496,126496],"disallowed"],[[126497,126497],"mapped",[1576]],[[126498,126498],"mapped",[1580]],[[126499,126499],"disallowed"],[[126500,126500],"mapped",[1607]],[[126501,126502],"disallowed"],[[126503,126503],"mapped",[1581]],[[126504,126504],"disallowed"],[[126505,126505],"mapped",[1610]],[[126506,126506],"mapped",[1603]],[[126507,126507],"mapped",[1604]],[[126508,126508],"mapped",[1605]],[[126509,126509],"mapped",[1606]],[[126510,126510],"mapped",[1587]],[[126511,126511],"mapped",[1593]],[[126512,126512],"mapped",[1601]],[[126513,126513],"mapped",[1589]],[[126514,126514],"mapped",[1602]],[[126515,126515],"disallowed"],[[126516,126516],"mapped",[1588]],[[126517,126517],"mapped",[1578]],[[126518,126518],"mapped",[1579]],[[126519,126519],"mapped",[1582]],[[126520,126520],"disallowed"],[[126521,126521],"mapped",[1590]],[[126522,126522],"disallowed"],[[126523,126523],"mapped",[1594]],[[126524,126529],"disallowed"],[[126530,126530],"mapped",[1580]],[[126531,126534],"disallowed"],[[126535,126535],"mapped",[1581]],[[126536,126536],"disallowed"],[[126537,126537],"mapped",[1610]],[[126538,126538],"disallowed"],[[126539,126539],"mapped",[1604]],[[126540,126540],"disallowed"],[[126541,126541],"mapped",[1606]],[[126542,126542],"mapped",[1587]],[[126543,126543],"mapped",[1593]],[[126544,126544],"disallowed"],[[126545,126545],"mapped",[1589]],[[126546,126546],"mapped",[1602]],[[126547,126547],"disallowed"],[[126548,126548],"mapped",[1588]],[[126549,126550],"disallowed"],[[126551,126551],"mapped",[1582]],[[126552,126552],"disallowed"],[[126553,126553],"mapped",[1590]],[[126554,126554],"disallowed"],[[126555,126555],"mapped",[1594]],[[126556,126556],"disallowed"],[[126557,126557],"mapped",[1722]],[[126558,126558],"disallowed"],[[126559,126559],"mapped",[1647]],[[126560,126560],"disallowed"],[[126561,126561],"mapped",[1576]],[[126562,126562],"mapped",[1580]],[[126563,126563],"disallowed"],[[126564,126564],"mapped",[1607]],[[126565,126566],"disallowed"],[[126567,126567],"mapped",[1581]],[[126568,126568],"mapped",[1591]],[[126569,126569],"mapped",[1610]],[[126570,126570],"mapped",[1603]],[[126571,126571],"disallowed"],[[126572,126572],"mapped",[1605]],[[126573,126573],"mapped",[1606]],[[126574,126574],"mapped",[1587]],[[126575,126575],"mapped",[1593]],[[126576,126576],"mapped",[1601]],[[126577,126577],"mapped",[1589]],[[126578,126578],"mapped",[1602]],[[126579,126579],"disallowed"],[[126580,126580],"mapped",[1588]],[[126581,126581],"mapped",[1578]],[[126582,126582],"mapped",[1579]],[[126583,126583],"mapped",[1582]],[[126584,126584],"disallowed"],[[126585,126585],"mapped",[1590]],[[126586,126586],"mapped",[1592]],[[126587,126587],"mapped",[1594]],[[126588,126588],"mapped",[1646]],[[126589,126589],"disallowed"],[[126590,126590],"mapped",[1697]],[[126591,126591],"disallowed"],[[126592,126592],"mapped",[1575]],[[126593,126593],"mapped",[1576]],[[126594,126594],"mapped",[1580]],[[126595,126595],"mapped",[1583]],[[126596,126596],"mapped",[1607]],[[126597,126597],"mapped",[1608]],[[126598,126598],"mapped",[1586]],[[126599,126599],"mapped",[1581]],[[126600,126600],"mapped",[1591]],[[126601,126601],"mapped",[1610]],[[126602,126602],"disallowed"],[[126603,126603],"mapped",[1604]],[[126604,126604],"mapped",[1605]],[[126605,126605],"mapped",[1606]],[[126606,126606],"mapped",[1587]],[[126607,126607],"mapped",[1593]],[[126608,126608],"mapped",[1601]],[[126609,126609],"mapped",[1589]],[[126610,126610],"mapped",[1602]],[[126611,126611],"mapped",[1585]],[[126612,126612],"mapped",[1588]],[[126613,126613],"mapped",[1578]],[[126614,126614],"mapped",[1579]],[[126615,126615],"mapped",[1582]],[[126616,126616],"mapped",[1584]],[[126617,126617],"mapped",[1590]],[[126618,126618],"mapped",[1592]],[[126619,126619],"mapped",[1594]],[[126620,126624],"disallowed"],[[126625,126625],"mapped",[1576]],[[126626,126626],"mapped",[1580]],[[126627,126627],"mapped",[1583]],[[126628,126628],"disallowed"],[[126629,126629],"mapped",[1608]],[[126630,126630],"mapped",[1586]],[[126631,126631],"mapped",[1581]],[[126632,126632],"mapped",[1591]],[[126633,126633],"mapped",[1610]],[[126634,126634],"disallowed"],[[126635,126635],"mapped",[1604]],[[126636,126636],"mapped",[1605]],[[126637,126637],"mapped",[1606]],[[126638,126638],"mapped",[1587]],[[126639,126639],"mapped",[1593]],[[126640,126640],"mapped",[1601]],[[126641,126641],"mapped",[1589]],[[126642,126642],"mapped",[1602]],[[126643,126643],"mapped",[1585]],[[126644,126644],"mapped",[1588]],[[126645,126645],"mapped",[1578]],[[126646,126646],"mapped",[1579]],[[126647,126647],"mapped",[1582]],[[126648,126648],"mapped",[1584]],[[126649,126649],"mapped",[1590]],[[126650,126650],"mapped",[1592]],[[126651,126651],"mapped",[1594]],[[126652,126703],"disallowed"],[[126704,126705],"valid",[],"NV8"],[[126706,126975],"disallowed"],[[126976,127019],"valid",[],"NV8"],[[127020,127023],"disallowed"],[[127024,127123],"valid",[],"NV8"],[[127124,127135],"disallowed"],[[127136,127150],"valid",[],"NV8"],[[127151,127152],"disallowed"],[[127153,127166],"valid",[],"NV8"],[[127167,127167],"valid",[],"NV8"],[[127168,127168],"disallowed"],[[127169,127183],"valid",[],"NV8"],[[127184,127184],"disallowed"],[[127185,127199],"valid",[],"NV8"],[[127200,127221],"valid",[],"NV8"],[[127222,127231],"disallowed"],[[127232,127232],"disallowed"],[[127233,127233],"disallowed_STD3_mapped",[48,44]],[[127234,127234],"disallowed_STD3_mapped",[49,44]],[[127235,127235],"disallowed_STD3_mapped",[50,44]],[[127236,127236],"disallowed_STD3_mapped",[51,44]],[[127237,127237],"disallowed_STD3_mapped",[52,44]],[[127238,127238],"disallowed_STD3_mapped",[53,44]],[[127239,127239],"disallowed_STD3_mapped",[54,44]],[[127240,127240],"disallowed_STD3_mapped",[55,44]],[[127241,127241],"disallowed_STD3_mapped",[56,44]],[[127242,127242],"disallowed_STD3_mapped",[57,44]],[[127243,127244],"valid",[],"NV8"],[[127245,127247],"disallowed"],[[127248,127248],"disallowed_STD3_mapped",[40,97,41]],[[127249,127249],"disallowed_STD3_mapped",[40,98,41]],[[127250,127250],"disallowed_STD3_mapped",[40,99,41]],[[127251,127251],"disallowed_STD3_mapped",[40,100,41]],[[127252,127252],"disallowed_STD3_mapped",[40,101,41]],[[127253,127253],"disallowed_STD3_mapped",[40,102,41]],[[127254,127254],"disallowed_STD3_mapped",[40,103,41]],[[127255,127255],"disallowed_STD3_mapped",[40,104,41]],[[127256,127256],"disallowed_STD3_mapped",[40,105,41]],[[127257,127257],"disallowed_STD3_mapped",[40,106,41]],[[127258,127258],"disallowed_STD3_mapped",[40,107,41]],[[127259,127259],"disallowed_STD3_mapped",[40,108,41]],[[127260,127260],"disallowed_STD3_mapped",[40,109,41]],[[127261,127261],"disallowed_STD3_mapped",[40,110,41]],[[127262,127262],"disallowed_STD3_mapped",[40,111,41]],[[127263,127263],"disallowed_STD3_mapped",[40,112,41]],[[127264,127264],"disallowed_STD3_mapped",[40,113,41]],[[127265,127265],"disallowed_STD3_mapped",[40,114,41]],[[127266,127266],"disallowed_STD3_mapped",[40,115,41]],[[127267,127267],"disallowed_STD3_mapped",[40,116,41]],[[127268,127268],"disallowed_STD3_mapped",[40,117,41]],[[127269,127269],"disallowed_STD3_mapped",[40,118,41]],[[127270,127270],"disallowed_STD3_mapped",[40,119,41]],[[127271,127271],"disallowed_STD3_mapped",[40,120,41]],[[127272,127272],"disallowed_STD3_mapped",[40,121,41]],[[127273,127273],"disallowed_STD3_mapped",[40,122,41]],[[127274,127274],"mapped",[12308,115,12309]],[[127275,127275],"mapped",[99]],[[127276,127276],"mapped",[114]],[[127277,127277],"mapped",[99,100]],[[127278,127278],"mapped",[119,122]],[[127279,127279],"disallowed"],[[127280,127280],"mapped",[97]],[[127281,127281],"mapped",[98]],[[127282,127282],"mapped",[99]],[[127283,127283],"mapped",[100]],[[127284,127284],"mapped",[101]],[[127285,127285],"mapped",[102]],[[127286,127286],"mapped",[103]],[[127287,127287],"mapped",[104]],[[127288,127288],"mapped",[105]],[[127289,127289],"mapped",[106]],[[127290,127290],"mapped",[107]],[[127291,127291],"mapped",[108]],[[127292,127292],"mapped",[109]],[[127293,127293],"mapped",[110]],[[127294,127294],"mapped",[111]],[[127295,127295],"mapped",[112]],[[127296,127296],"mapped",[113]],[[127297,127297],"mapped",[114]],[[127298,127298],"mapped",[115]],[[127299,127299],"mapped",[116]],[[127300,127300],"mapped",[117]],[[127301,127301],"mapped",[118]],[[127302,127302],"mapped",[119]],[[127303,127303],"mapped",[120]],[[127304,127304],"mapped",[121]],[[127305,127305],"mapped",[122]],[[127306,127306],"mapped",[104,118]],[[127307,127307],"mapped",[109,118]],[[127308,127308],"mapped",[115,100]],[[127309,127309],"mapped",[115,115]],[[127310,127310],"mapped",[112,112,118]],[[127311,127311],"mapped",[119,99]],[[127312,127318],"valid",[],"NV8"],[[127319,127319],"valid",[],"NV8"],[[127320,127326],"valid",[],"NV8"],[[127327,127327],"valid",[],"NV8"],[[127328,127337],"valid",[],"NV8"],[[127338,127338],"mapped",[109,99]],[[127339,127339],"mapped",[109,100]],[[127340,127343],"disallowed"],[[127344,127352],"valid",[],"NV8"],[[127353,127353],"valid",[],"NV8"],[[127354,127354],"valid",[],"NV8"],[[127355,127356],"valid",[],"NV8"],[[127357,127358],"valid",[],"NV8"],[[127359,127359],"valid",[],"NV8"],[[127360,127369],"valid",[],"NV8"],[[127370,127373],"valid",[],"NV8"],[[127374,127375],"valid",[],"NV8"],[[127376,127376],"mapped",[100,106]],[[127377,127386],"valid",[],"NV8"],[[127387,127461],"disallowed"],[[127462,127487],"valid",[],"NV8"],[[127488,127488],"mapped",[12411,12363]],[[127489,127489],"mapped",[12467,12467]],[[127490,127490],"mapped",[12469]],[[127491,127503],"disallowed"],[[127504,127504],"mapped",[25163]],[[127505,127505],"mapped",[23383]],[[127506,127506],"mapped",[21452]],[[127507,127507],"mapped",[12487]],[[127508,127508],"mapped",[20108]],[[127509,127509],"mapped",[22810]],[[127510,127510],"mapped",[35299]],[[127511,127511],"mapped",[22825]],[[127512,127512],"mapped",[20132]],[[127513,127513],"mapped",[26144]],[[127514,127514],"mapped",[28961]],[[127515,127515],"mapped",[26009]],[[127516,127516],"mapped",[21069]],[[127517,127517],"mapped",[24460]],[[127518,127518],"mapped",[20877]],[[127519,127519],"mapped",[26032]],[[127520,127520],"mapped",[21021]],[[127521,127521],"mapped",[32066]],[[127522,127522],"mapped",[29983]],[[127523,127523],"mapped",[36009]],[[127524,127524],"mapped",[22768]],[[127525,127525],"mapped",[21561]],[[127526,127526],"mapped",[28436]],[[127527,127527],"mapped",[25237]],[[127528,127528],"mapped",[25429]],[[127529,127529],"mapped",[19968]],[[127530,127530],"mapped",[19977]],[[127531,127531],"mapped",[36938]],[[127532,127532],"mapped",[24038]],[[127533,127533],"mapped",[20013]],[[127534,127534],"mapped",[21491]],[[127535,127535],"mapped",[25351]],[[127536,127536],"mapped",[36208]],[[127537,127537],"mapped",[25171]],[[127538,127538],"mapped",[31105]],[[127539,127539],"mapped",[31354]],[[127540,127540],"mapped",[21512]],[[127541,127541],"mapped",[28288]],[[127542,127542],"mapped",[26377]],[[127543,127543],"mapped",[26376]],[[127544,127544],"mapped",[30003]],[[127545,127545],"mapped",[21106]],[[127546,127546],"mapped",[21942]],[[127547,127551],"disallowed"],[[127552,127552],"mapped",[12308,26412,12309]],[[127553,127553],"mapped",[12308,19977,12309]],[[127554,127554],"mapped",[12308,20108,12309]],[[127555,127555],"mapped",[12308,23433,12309]],[[127556,127556],"mapped",[12308,28857,12309]],[[127557,127557],"mapped",[12308,25171,12309]],[[127558,127558],"mapped",[12308,30423,12309]],[[127559,127559],"mapped",[12308,21213,12309]],[[127560,127560],"mapped",[12308,25943,12309]],[[127561,127567],"disallowed"],[[127568,127568],"mapped",[24471]],[[127569,127569],"mapped",[21487]],[[127570,127743],"disallowed"],[[127744,127776],"valid",[],"NV8"],[[127777,127788],"valid",[],"NV8"],[[127789,127791],"valid",[],"NV8"],[[127792,127797],"valid",[],"NV8"],[[127798,127798],"valid",[],"NV8"],[[127799,127868],"valid",[],"NV8"],[[127869,127869],"valid",[],"NV8"],[[127870,127871],"valid",[],"NV8"],[[127872,127891],"valid",[],"NV8"],[[127892,127903],"valid",[],"NV8"],[[127904,127940],"valid",[],"NV8"],[[127941,127941],"valid",[],"NV8"],[[127942,127946],"valid",[],"NV8"],[[127947,127950],"valid",[],"NV8"],[[127951,127955],"valid",[],"NV8"],[[127956,127967],"valid",[],"NV8"],[[127968,127984],"valid",[],"NV8"],[[127985,127991],"valid",[],"NV8"],[[127992,127999],"valid",[],"NV8"],[[128e3,128062],"valid",[],"NV8"],[[128063,128063],"valid",[],"NV8"],[[128064,128064],"valid",[],"NV8"],[[128065,128065],"valid",[],"NV8"],[[128066,128247],"valid",[],"NV8"],[[128248,128248],"valid",[],"NV8"],[[128249,128252],"valid",[],"NV8"],[[128253,128254],"valid",[],"NV8"],[[128255,128255],"valid",[],"NV8"],[[128256,128317],"valid",[],"NV8"],[[128318,128319],"valid",[],"NV8"],[[128320,128323],"valid",[],"NV8"],[[128324,128330],"valid",[],"NV8"],[[128331,128335],"valid",[],"NV8"],[[128336,128359],"valid",[],"NV8"],[[128360,128377],"valid",[],"NV8"],[[128378,128378],"disallowed"],[[128379,128419],"valid",[],"NV8"],[[128420,128420],"disallowed"],[[128421,128506],"valid",[],"NV8"],[[128507,128511],"valid",[],"NV8"],[[128512,128512],"valid",[],"NV8"],[[128513,128528],"valid",[],"NV8"],[[128529,128529],"valid",[],"NV8"],[[128530,128532],"valid",[],"NV8"],[[128533,128533],"valid",[],"NV8"],[[128534,128534],"valid",[],"NV8"],[[128535,128535],"valid",[],"NV8"],[[128536,128536],"valid",[],"NV8"],[[128537,128537],"valid",[],"NV8"],[[128538,128538],"valid",[],"NV8"],[[128539,128539],"valid",[],"NV8"],[[128540,128542],"valid",[],"NV8"],[[128543,128543],"valid",[],"NV8"],[[128544,128549],"valid",[],"NV8"],[[128550,128551],"valid",[],"NV8"],[[128552,128555],"valid",[],"NV8"],[[128556,128556],"valid",[],"NV8"],[[128557,128557],"valid",[],"NV8"],[[128558,128559],"valid",[],"NV8"],[[128560,128563],"valid",[],"NV8"],[[128564,128564],"valid",[],"NV8"],[[128565,128576],"valid",[],"NV8"],[[128577,128578],"valid",[],"NV8"],[[128579,128580],"valid",[],"NV8"],[[128581,128591],"valid",[],"NV8"],[[128592,128639],"valid",[],"NV8"],[[128640,128709],"valid",[],"NV8"],[[128710,128719],"valid",[],"NV8"],[[128720,128720],"valid",[],"NV8"],[[128721,128735],"disallowed"],[[128736,128748],"valid",[],"NV8"],[[128749,128751],"disallowed"],[[128752,128755],"valid",[],"NV8"],[[128756,128767],"disallowed"],[[128768,128883],"valid",[],"NV8"],[[128884,128895],"disallowed"],[[128896,128980],"valid",[],"NV8"],[[128981,129023],"disallowed"],[[129024,129035],"valid",[],"NV8"],[[129036,129039],"disallowed"],[[129040,129095],"valid",[],"NV8"],[[129096,129103],"disallowed"],[[129104,129113],"valid",[],"NV8"],[[129114,129119],"disallowed"],[[129120,129159],"valid",[],"NV8"],[[129160,129167],"disallowed"],[[129168,129197],"valid",[],"NV8"],[[129198,129295],"disallowed"],[[129296,129304],"valid",[],"NV8"],[[129305,129407],"disallowed"],[[129408,129412],"valid",[],"NV8"],[[129413,129471],"disallowed"],[[129472,129472],"valid",[],"NV8"],[[129473,131069],"disallowed"],[[131070,131071],"disallowed"],[[131072,173782],"valid"],[[173783,173823],"disallowed"],[[173824,177972],"valid"],[[177973,177983],"disallowed"],[[177984,178205],"valid"],[[178206,178207],"disallowed"],[[178208,183969],"valid"],[[183970,194559],"disallowed"],[[194560,194560],"mapped",[20029]],[[194561,194561],"mapped",[20024]],[[194562,194562],"mapped",[20033]],[[194563,194563],"mapped",[131362]],[[194564,194564],"mapped",[20320]],[[194565,194565],"mapped",[20398]],[[194566,194566],"mapped",[20411]],[[194567,194567],"mapped",[20482]],[[194568,194568],"mapped",[20602]],[[194569,194569],"mapped",[20633]],[[194570,194570],"mapped",[20711]],[[194571,194571],"mapped",[20687]],[[194572,194572],"mapped",[13470]],[[194573,194573],"mapped",[132666]],[[194574,194574],"mapped",[20813]],[[194575,194575],"mapped",[20820]],[[194576,194576],"mapped",[20836]],[[194577,194577],"mapped",[20855]],[[194578,194578],"mapped",[132380]],[[194579,194579],"mapped",[13497]],[[194580,194580],"mapped",[20839]],[[194581,194581],"mapped",[20877]],[[194582,194582],"mapped",[132427]],[[194583,194583],"mapped",[20887]],[[194584,194584],"mapped",[20900]],[[194585,194585],"mapped",[20172]],[[194586,194586],"mapped",[20908]],[[194587,194587],"mapped",[20917]],[[194588,194588],"mapped",[168415]],[[194589,194589],"mapped",[20981]],[[194590,194590],"mapped",[20995]],[[194591,194591],"mapped",[13535]],[[194592,194592],"mapped",[21051]],[[194593,194593],"mapped",[21062]],[[194594,194594],"mapped",[21106]],[[194595,194595],"mapped",[21111]],[[194596,194596],"mapped",[13589]],[[194597,194597],"mapped",[21191]],[[194598,194598],"mapped",[21193]],[[194599,194599],"mapped",[21220]],[[194600,194600],"mapped",[21242]],[[194601,194601],"mapped",[21253]],[[194602,194602],"mapped",[21254]],[[194603,194603],"mapped",[21271]],[[194604,194604],"mapped",[21321]],[[194605,194605],"mapped",[21329]],[[194606,194606],"mapped",[21338]],[[194607,194607],"mapped",[21363]],[[194608,194608],"mapped",[21373]],[[194609,194611],"mapped",[21375]],[[194612,194612],"mapped",[133676]],[[194613,194613],"mapped",[28784]],[[194614,194614],"mapped",[21450]],[[194615,194615],"mapped",[21471]],[[194616,194616],"mapped",[133987]],[[194617,194617],"mapped",[21483]],[[194618,194618],"mapped",[21489]],[[194619,194619],"mapped",[21510]],[[194620,194620],"mapped",[21662]],[[194621,194621],"mapped",[21560]],[[194622,194622],"mapped",[21576]],[[194623,194623],"mapped",[21608]],[[194624,194624],"mapped",[21666]],[[194625,194625],"mapped",[21750]],[[194626,194626],"mapped",[21776]],[[194627,194627],"mapped",[21843]],[[194628,194628],"mapped",[21859]],[[194629,194630],"mapped",[21892]],[[194631,194631],"mapped",[21913]],[[194632,194632],"mapped",[21931]],[[194633,194633],"mapped",[21939]],[[194634,194634],"mapped",[21954]],[[194635,194635],"mapped",[22294]],[[194636,194636],"mapped",[22022]],[[194637,194637],"mapped",[22295]],[[194638,194638],"mapped",[22097]],[[194639,194639],"mapped",[22132]],[[194640,194640],"mapped",[20999]],[[194641,194641],"mapped",[22766]],[[194642,194642],"mapped",[22478]],[[194643,194643],"mapped",[22516]],[[194644,194644],"mapped",[22541]],[[194645,194645],"mapped",[22411]],[[194646,194646],"mapped",[22578]],[[194647,194647],"mapped",[22577]],[[194648,194648],"mapped",[22700]],[[194649,194649],"mapped",[136420]],[[194650,194650],"mapped",[22770]],[[194651,194651],"mapped",[22775]],[[194652,194652],"mapped",[22790]],[[194653,194653],"mapped",[22810]],[[194654,194654],"mapped",[22818]],[[194655,194655],"mapped",[22882]],[[194656,194656],"mapped",[136872]],[[194657,194657],"mapped",[136938]],[[194658,194658],"mapped",[23020]],[[194659,194659],"mapped",[23067]],[[194660,194660],"mapped",[23079]],[[194661,194661],"mapped",[23e3]],[[194662,194662],"mapped",[23142]],[[194663,194663],"mapped",[14062]],[[194664,194664],"disallowed"],[[194665,194665],"mapped",[23304]],[[194666,194667],"mapped",[23358]],[[194668,194668],"mapped",[137672]],[[194669,194669],"mapped",[23491]],[[194670,194670],"mapped",[23512]],[[194671,194671],"mapped",[23527]],[[194672,194672],"mapped",[23539]],[[194673,194673],"mapped",[138008]],[[194674,194674],"mapped",[23551]],[[194675,194675],"mapped",[23558]],[[194676,194676],"disallowed"],[[194677,194677],"mapped",[23586]],[[194678,194678],"mapped",[14209]],[[194679,194679],"mapped",[23648]],[[194680,194680],"mapped",[23662]],[[194681,194681],"mapped",[23744]],[[194682,194682],"mapped",[23693]],[[194683,194683],"mapped",[138724]],[[194684,194684],"mapped",[23875]],[[194685,194685],"mapped",[138726]],[[194686,194686],"mapped",[23918]],[[194687,194687],"mapped",[23915]],[[194688,194688],"mapped",[23932]],[[194689,194689],"mapped",[24033]],[[194690,194690],"mapped",[24034]],[[194691,194691],"mapped",[14383]],[[194692,194692],"mapped",[24061]],[[194693,194693],"mapped",[24104]],[[194694,194694],"mapped",[24125]],[[194695,194695],"mapped",[24169]],[[194696,194696],"mapped",[14434]],[[194697,194697],"mapped",[139651]],[[194698,194698],"mapped",[14460]],[[194699,194699],"mapped",[24240]],[[194700,194700],"mapped",[24243]],[[194701,194701],"mapped",[24246]],[[194702,194702],"mapped",[24266]],[[194703,194703],"mapped",[172946]],[[194704,194704],"mapped",[24318]],[[194705,194706],"mapped",[140081]],[[194707,194707],"mapped",[33281]],[[194708,194709],"mapped",[24354]],[[194710,194710],"mapped",[14535]],[[194711,194711],"mapped",[144056]],[[194712,194712],"mapped",[156122]],[[194713,194713],"mapped",[24418]],[[194714,194714],"mapped",[24427]],[[194715,194715],"mapped",[14563]],[[194716,194716],"mapped",[24474]],[[194717,194717],"mapped",[24525]],[[194718,194718],"mapped",[24535]],[[194719,194719],"mapped",[24569]],[[194720,194720],"mapped",[24705]],[[194721,194721],"mapped",[14650]],[[194722,194722],"mapped",[14620]],[[194723,194723],"mapped",[24724]],[[194724,194724],"mapped",[141012]],[[194725,194725],"mapped",[24775]],[[194726,194726],"mapped",[24904]],[[194727,194727],"mapped",[24908]],[[194728,194728],"mapped",[24910]],[[194729,194729],"mapped",[24908]],[[194730,194730],"mapped",[24954]],[[194731,194731],"mapped",[24974]],[[194732,194732],"mapped",[25010]],[[194733,194733],"mapped",[24996]],[[194734,194734],"mapped",[25007]],[[194735,194735],"mapped",[25054]],[[194736,194736],"mapped",[25074]],[[194737,194737],"mapped",[25078]],[[194738,194738],"mapped",[25104]],[[194739,194739],"mapped",[25115]],[[194740,194740],"mapped",[25181]],[[194741,194741],"mapped",[25265]],[[194742,194742],"mapped",[25300]],[[194743,194743],"mapped",[25424]],[[194744,194744],"mapped",[142092]],[[194745,194745],"mapped",[25405]],[[194746,194746],"mapped",[25340]],[[194747,194747],"mapped",[25448]],[[194748,194748],"mapped",[25475]],[[194749,194749],"mapped",[25572]],[[194750,194750],"mapped",[142321]],[[194751,194751],"mapped",[25634]],[[194752,194752],"mapped",[25541]],[[194753,194753],"mapped",[25513]],[[194754,194754],"mapped",[14894]],[[194755,194755],"mapped",[25705]],[[194756,194756],"mapped",[25726]],[[194757,194757],"mapped",[25757]],[[194758,194758],"mapped",[25719]],[[194759,194759],"mapped",[14956]],[[194760,194760],"mapped",[25935]],[[194761,194761],"mapped",[25964]],[[194762,194762],"mapped",[143370]],[[194763,194763],"mapped",[26083]],[[194764,194764],"mapped",[26360]],[[194765,194765],"mapped",[26185]],[[194766,194766],"mapped",[15129]],[[194767,194767],"mapped",[26257]],[[194768,194768],"mapped",[15112]],[[194769,194769],"mapped",[15076]],[[194770,194770],"mapped",[20882]],[[194771,194771],"mapped",[20885]],[[194772,194772],"mapped",[26368]],[[194773,194773],"mapped",[26268]],[[194774,194774],"mapped",[32941]],[[194775,194775],"mapped",[17369]],[[194776,194776],"mapped",[26391]],[[194777,194777],"mapped",[26395]],[[194778,194778],"mapped",[26401]],[[194779,194779],"mapped",[26462]],[[194780,194780],"mapped",[26451]],[[194781,194781],"mapped",[144323]],[[194782,194782],"mapped",[15177]],[[194783,194783],"mapped",[26618]],[[194784,194784],"mapped",[26501]],[[194785,194785],"mapped",[26706]],[[194786,194786],"mapped",[26757]],[[194787,194787],"mapped",[144493]],[[194788,194788],"mapped",[26766]],[[194789,194789],"mapped",[26655]],[[194790,194790],"mapped",[26900]],[[194791,194791],"mapped",[15261]],[[194792,194792],"mapped",[26946]],[[194793,194793],"mapped",[27043]],[[194794,194794],"mapped",[27114]],[[194795,194795],"mapped",[27304]],[[194796,194796],"mapped",[145059]],[[194797,194797],"mapped",[27355]],[[194798,194798],"mapped",[15384]],[[194799,194799],"mapped",[27425]],[[194800,194800],"mapped",[145575]],[[194801,194801],"mapped",[27476]],[[194802,194802],"mapped",[15438]],[[194803,194803],"mapped",[27506]],[[194804,194804],"mapped",[27551]],[[194805,194805],"mapped",[27578]],[[194806,194806],"mapped",[27579]],[[194807,194807],"mapped",[146061]],[[194808,194808],"mapped",[138507]],[[194809,194809],"mapped",[146170]],[[194810,194810],"mapped",[27726]],[[194811,194811],"mapped",[146620]],[[194812,194812],"mapped",[27839]],[[194813,194813],"mapped",[27853]],[[194814,194814],"mapped",[27751]],[[194815,194815],"mapped",[27926]],[[194816,194816],"mapped",[27966]],[[194817,194817],"mapped",[28023]],[[194818,194818],"mapped",[27969]],[[194819,194819],"mapped",[28009]],[[194820,194820],"mapped",[28024]],[[194821,194821],"mapped",[28037]],[[194822,194822],"mapped",[146718]],[[194823,194823],"mapped",[27956]],[[194824,194824],"mapped",[28207]],[[194825,194825],"mapped",[28270]],[[194826,194826],"mapped",[15667]],[[194827,194827],"mapped",[28363]],[[194828,194828],"mapped",[28359]],[[194829,194829],"mapped",[147153]],[[194830,194830],"mapped",[28153]],[[194831,194831],"mapped",[28526]],[[194832,194832],"mapped",[147294]],[[194833,194833],"mapped",[147342]],[[194834,194834],"mapped",[28614]],[[194835,194835],"mapped",[28729]],[[194836,194836],"mapped",[28702]],[[194837,194837],"mapped",[28699]],[[194838,194838],"mapped",[15766]],[[194839,194839],"mapped",[28746]],[[194840,194840],"mapped",[28797]],[[194841,194841],"mapped",[28791]],[[194842,194842],"mapped",[28845]],[[194843,194843],"mapped",[132389]],[[194844,194844],"mapped",[28997]],[[194845,194845],"mapped",[148067]],[[194846,194846],"mapped",[29084]],[[194847,194847],"disallowed"],[[194848,194848],"mapped",[29224]],[[194849,194849],"mapped",[29237]],[[194850,194850],"mapped",[29264]],[[194851,194851],"mapped",[149e3]],[[194852,194852],"mapped",[29312]],[[194853,194853],"mapped",[29333]],[[194854,194854],"mapped",[149301]],[[194855,194855],"mapped",[149524]],[[194856,194856],"mapped",[29562]],[[194857,194857],"mapped",[29579]],[[194858,194858],"mapped",[16044]],[[194859,194859],"mapped",[29605]],[[194860,194861],"mapped",[16056]],[[194862,194862],"mapped",[29767]],[[194863,194863],"mapped",[29788]],[[194864,194864],"mapped",[29809]],[[194865,194865],"mapped",[29829]],[[194866,194866],"mapped",[29898]],[[194867,194867],"mapped",[16155]],[[194868,194868],"mapped",[29988]],[[194869,194869],"mapped",[150582]],[[194870,194870],"mapped",[30014]],[[194871,194871],"mapped",[150674]],[[194872,194872],"mapped",[30064]],[[194873,194873],"mapped",[139679]],[[194874,194874],"mapped",[30224]],[[194875,194875],"mapped",[151457]],[[194876,194876],"mapped",[151480]],[[194877,194877],"mapped",[151620]],[[194878,194878],"mapped",[16380]],[[194879,194879],"mapped",[16392]],[[194880,194880],"mapped",[30452]],[[194881,194881],"mapped",[151795]],[[194882,194882],"mapped",[151794]],[[194883,194883],"mapped",[151833]],[[194884,194884],"mapped",[151859]],[[194885,194885],"mapped",[30494]],[[194886,194887],"mapped",[30495]],[[194888,194888],"mapped",[30538]],[[194889,194889],"mapped",[16441]],[[194890,194890],"mapped",[30603]],[[194891,194891],"mapped",[16454]],[[194892,194892],"mapped",[16534]],[[194893,194893],"mapped",[152605]],[[194894,194894],"mapped",[30798]],[[194895,194895],"mapped",[30860]],[[194896,194896],"mapped",[30924]],[[194897,194897],"mapped",[16611]],[[194898,194898],"mapped",[153126]],[[194899,194899],"mapped",[31062]],[[194900,194900],"mapped",[153242]],[[194901,194901],"mapped",[153285]],[[194902,194902],"mapped",[31119]],[[194903,194903],"mapped",[31211]],[[194904,194904],"mapped",[16687]],[[194905,194905],"mapped",[31296]],[[194906,194906],"mapped",[31306]],[[194907,194907],"mapped",[31311]],[[194908,194908],"mapped",[153980]],[[194909,194910],"mapped",[154279]],[[194911,194911],"disallowed"],[[194912,194912],"mapped",[16898]],[[194913,194913],"mapped",[154539]],[[194914,194914],"mapped",[31686]],[[194915,194915],"mapped",[31689]],[[194916,194916],"mapped",[16935]],[[194917,194917],"mapped",[154752]],[[194918,194918],"mapped",[31954]],[[194919,194919],"mapped",[17056]],[[194920,194920],"mapped",[31976]],[[194921,194921],"mapped",[31971]],[[194922,194922],"mapped",[32e3]],[[194923,194923],"mapped",[155526]],[[194924,194924],"mapped",[32099]],[[194925,194925],"mapped",[17153]],[[194926,194926],"mapped",[32199]],[[194927,194927],"mapped",[32258]],[[194928,194928],"mapped",[32325]],[[194929,194929],"mapped",[17204]],[[194930,194930],"mapped",[156200]],[[194931,194931],"mapped",[156231]],[[194932,194932],"mapped",[17241]],[[194933,194933],"mapped",[156377]],[[194934,194934],"mapped",[32634]],[[194935,194935],"mapped",[156478]],[[194936,194936],"mapped",[32661]],[[194937,194937],"mapped",[32762]],[[194938,194938],"mapped",[32773]],[[194939,194939],"mapped",[156890]],[[194940,194940],"mapped",[156963]],[[194941,194941],"mapped",[32864]],[[194942,194942],"mapped",[157096]],[[194943,194943],"mapped",[32880]],[[194944,194944],"mapped",[144223]],[[194945,194945],"mapped",[17365]],[[194946,194946],"mapped",[32946]],[[194947,194947],"mapped",[33027]],[[194948,194948],"mapped",[17419]],[[194949,194949],"mapped",[33086]],[[194950,194950],"mapped",[23221]],[[194951,194951],"mapped",[157607]],[[194952,194952],"mapped",[157621]],[[194953,194953],"mapped",[144275]],[[194954,194954],"mapped",[144284]],[[194955,194955],"mapped",[33281]],[[194956,194956],"mapped",[33284]],[[194957,194957],"mapped",[36766]],[[194958,194958],"mapped",[17515]],[[194959,194959],"mapped",[33425]],[[194960,194960],"mapped",[33419]],[[194961,194961],"mapped",[33437]],[[194962,194962],"mapped",[21171]],[[194963,194963],"mapped",[33457]],[[194964,194964],"mapped",[33459]],[[194965,194965],"mapped",[33469]],[[194966,194966],"mapped",[33510]],[[194967,194967],"mapped",[158524]],[[194968,194968],"mapped",[33509]],[[194969,194969],"mapped",[33565]],[[194970,194970],"mapped",[33635]],[[194971,194971],"mapped",[33709]],[[194972,194972],"mapped",[33571]],[[194973,194973],"mapped",[33725]],[[194974,194974],"mapped",[33767]],[[194975,194975],"mapped",[33879]],[[194976,194976],"mapped",[33619]],[[194977,194977],"mapped",[33738]],[[194978,194978],"mapped",[33740]],[[194979,194979],"mapped",[33756]],[[194980,194980],"mapped",[158774]],[[194981,194981],"mapped",[159083]],[[194982,194982],"mapped",[158933]],[[194983,194983],"mapped",[17707]],[[194984,194984],"mapped",[34033]],[[194985,194985],"mapped",[34035]],[[194986,194986],"mapped",[34070]],[[194987,194987],"mapped",[160714]],[[194988,194988],"mapped",[34148]],[[194989,194989],"mapped",[159532]],[[194990,194990],"mapped",[17757]],[[194991,194991],"mapped",[17761]],[[194992,194992],"mapped",[159665]],[[194993,194993],"mapped",[159954]],[[194994,194994],"mapped",[17771]],[[194995,194995],"mapped",[34384]],[[194996,194996],"mapped",[34396]],[[194997,194997],"mapped",[34407]],[[194998,194998],"mapped",[34409]],[[194999,194999],"mapped",[34473]],[[195e3,195e3],"mapped",[34440]],[[195001,195001],"mapped",[34574]],[[195002,195002],"mapped",[34530]],[[195003,195003],"mapped",[34681]],[[195004,195004],"mapped",[34600]],[[195005,195005],"mapped",[34667]],[[195006,195006],"mapped",[34694]],[[195007,195007],"disallowed"],[[195008,195008],"mapped",[34785]],[[195009,195009],"mapped",[34817]],[[195010,195010],"mapped",[17913]],[[195011,195011],"mapped",[34912]],[[195012,195012],"mapped",[34915]],[[195013,195013],"mapped",[161383]],[[195014,195014],"mapped",[35031]],[[195015,195015],"mapped",[35038]],[[195016,195016],"mapped",[17973]],[[195017,195017],"mapped",[35066]],[[195018,195018],"mapped",[13499]],[[195019,195019],"mapped",[161966]],[[195020,195020],"mapped",[162150]],[[195021,195021],"mapped",[18110]],[[195022,195022],"mapped",[18119]],[[195023,195023],"mapped",[35488]],[[195024,195024],"mapped",[35565]],[[195025,195025],"mapped",[35722]],[[195026,195026],"mapped",[35925]],[[195027,195027],"mapped",[162984]],[[195028,195028],"mapped",[36011]],[[195029,195029],"mapped",[36033]],[[195030,195030],"mapped",[36123]],[[195031,195031],"mapped",[36215]],[[195032,195032],"mapped",[163631]],[[195033,195033],"mapped",[133124]],[[195034,195034],"mapped",[36299]],[[195035,195035],"mapped",[36284]],[[195036,195036],"mapped",[36336]],[[195037,195037],"mapped",[133342]],[[195038,195038],"mapped",[36564]],[[195039,195039],"mapped",[36664]],[[195040,195040],"mapped",[165330]],[[195041,195041],"mapped",[165357]],[[195042,195042],"mapped",[37012]],[[195043,195043],"mapped",[37105]],[[195044,195044],"mapped",[37137]],[[195045,195045],"mapped",[165678]],[[195046,195046],"mapped",[37147]],[[195047,195047],"mapped",[37432]],[[195048,195048],"mapped",[37591]],[[195049,195049],"mapped",[37592]],[[195050,195050],"mapped",[37500]],[[195051,195051],"mapped",[37881]],[[195052,195052],"mapped",[37909]],[[195053,195053],"mapped",[166906]],[[195054,195054],"mapped",[38283]],[[195055,195055],"mapped",[18837]],[[195056,195056],"mapped",[38327]],[[195057,195057],"mapped",[167287]],[[195058,195058],"mapped",[18918]],[[195059,195059],"mapped",[38595]],[[195060,195060],"mapped",[23986]],[[195061,195061],"mapped",[38691]],[[195062,195062],"mapped",[168261]],[[195063,195063],"mapped",[168474]],[[195064,195064],"mapped",[19054]],[[195065,195065],"mapped",[19062]],[[195066,195066],"mapped",[38880]],[[195067,195067],"mapped",[168970]],[[195068,195068],"mapped",[19122]],[[195069,195069],"mapped",[169110]],[[195070,195071],"mapped",[38923]],[[195072,195072],"mapped",[38953]],[[195073,195073],"mapped",[169398]],[[195074,195074],"mapped",[39138]],[[195075,195075],"mapped",[19251]],[[195076,195076],"mapped",[39209]],[[195077,195077],"mapped",[39335]],[[195078,195078],"mapped",[39362]],[[195079,195079],"mapped",[39422]],[[195080,195080],"mapped",[19406]],[[195081,195081],"mapped",[170800]],[[195082,195082],"mapped",[39698]],[[195083,195083],"mapped",[4e4]],[[195084,195084],"mapped",[40189]],[[195085,195085],"mapped",[19662]],[[195086,195086],"mapped",[19693]],[[195087,195087],"mapped",[40295]],[[195088,195088],"mapped",[172238]],[[195089,195089],"mapped",[19704]],[[195090,195090],"mapped",[172293]],[[195091,195091],"mapped",[172558]],[[195092,195092],"mapped",[172689]],[[195093,195093],"mapped",[40635]],[[195094,195094],"mapped",[19798]],[[195095,195095],"mapped",[40697]],[[195096,195096],"mapped",[40702]],[[195097,195097],"mapped",[40709]],[[195098,195098],"mapped",[40719]],[[195099,195099],"mapped",[40726]],[[195100,195100],"mapped",[40763]],[[195101,195101],"mapped",[173568]],[[195102,196605],"disallowed"],[[196606,196607],"disallowed"],[[196608,262141],"disallowed"],[[262142,262143],"disallowed"],[[262144,327677],"disallowed"],[[327678,327679],"disallowed"],[[327680,393213],"disallowed"],[[393214,393215],"disallowed"],[[393216,458749],"disallowed"],[[458750,458751],"disallowed"],[[458752,524285],"disallowed"],[[524286,524287],"disallowed"],[[524288,589821],"disallowed"],[[589822,589823],"disallowed"],[[589824,655357],"disallowed"],[[655358,655359],"disallowed"],[[655360,720893],"disallowed"],[[720894,720895],"disallowed"],[[720896,786429],"disallowed"],[[786430,786431],"disallowed"],[[786432,851965],"disallowed"],[[851966,851967],"disallowed"],[[851968,917501],"disallowed"],[[917502,917503],"disallowed"],[[917504,917504],"disallowed"],[[917505,917505],"disallowed"],[[917506,917535],"disallowed"],[[917536,917631],"disallowed"],[[917632,917759],"disallowed"],[[917760,917999],"ignored"],[[918e3,983037],"disallowed"],[[983038,983039],"disallowed"],[[983040,1048573],"disallowed"],[[1048574,1048575],"disallowed"],[[1048576,1114109],"disallowed"],[[1114110,1114111],"disallowed"]]});var L8=An((WXe,Z1)=>{"use strict";var O8=require("punycode"),R8=F8(),$c={TRANSITIONAL:0,NONTRANSITIONAL:1};function M8(e){return e.split("\0").map(function(t){return t.normalize("NFC")}).join("\0")}function P8(e){for(var t=0,n=R8.length-1;t<=n;){var r=Math.floor((t+n)/2),a=R8[r];if(a[0][0]<=e&&a[0][1]>=e)return a;a[0][0]>e?n=r-1:t=r+1}return null}var XV=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;function B8(e){return e.replace(XV,"_").length}function YV(e,t,n){for(var r=!1,a="",i=B8(e),o=0;o<i;++o){var s=e.codePointAt(o),u=P8(s);switch(u[1]){case"disallowed":r=!0,a+=String.fromCodePoint(s);break;case"ignored":break;case"mapped":a+=String.fromCodePoint.apply(String,u[2]);break;case"deviation":n===$c.TRANSITIONAL?a+=String.fromCodePoint.apply(String,u[2]):a+=String.fromCodePoint(s);break;case"valid":a+=String.fromCodePoint(s);break;case"disallowed_STD3_mapped":t?(r=!0,a+=String.fromCodePoint(s)):a+=String.fromCodePoint.apply(String,u[2]);break;case"disallowed_STD3_valid":t&&(r=!0),a+=String.fromCodePoint(s);break}}return{string:a,error:r}}var JV=/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E4-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D01-\u0D03\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u192B\u1930-\u193B\u19B0-\u19C0\u19C8\u19C9\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2D]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC7F-\uDC82\uDCB0-\uDCBA\uDD00-\uDD02\uDD27-\uDD34\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDE2C-\uDE37\uDEDF-\uDEEA\uDF01-\uDF03\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDE30-\uDE40\uDEAB-\uDEB7]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF51-\uDF7E\uDF8F-\uDF92]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD83A[\uDCD0-\uDCD6]|\uDB40[\uDD00-\uDDEF]/;function ZV(e,t){e.substr(0,4)==="xn--"&&(e=O8.toUnicode(e),t=$c.NONTRANSITIONAL);var n=!1;(M8(e)!==e||e[3]==="-"&&e[4]==="-"||e[0]==="-"||e[e.length-1]==="-"||e.indexOf(".")!==-1||e.search(JV)===0)&&(n=!0);for(var r=B8(e),a=0;a<r;++a){var i=P8(e.codePointAt(a));if(J1===$c.TRANSITIONAL&&i[1]!=="valid"||J1===$c.NONTRANSITIONAL&&i[1]!=="valid"&&i[1]!=="deviation"){n=!0;break}}return{label:e,error:n}}function J1(e,t,n){var r=YV(e,t,n);r.string=M8(r.string);for(var a=r.string.split("."),i=0;i<a.length;++i)try{var o=ZV(a[i]);a[i]=o.label,r.error=r.error||o.error}catch{r.error=!0}return{string:a.join("."),error:r.error}}Z1.exports.toASCII=function(e,t,n,r){var a=J1(e,t,n),i=a.string.split(".");if(i=i.map(function(u){try{return O8.toASCII(u)}catch{return a.error=!0,u}}),r){var o=i.slice(0,i.length-1).join(".").length;(o.length>253||o.length===0)&&(a.error=!0);for(var s=0;s<i.length;++s)if(i.length>63||i.length===0){a.error=!0;break}}return a.error?null:i.join(".")};Z1.exports.toUnicode=function(e,t){var n=J1(e,t,$c.NONTRANSITIONAL);return{domain:n.string,error:n.error}};Z1.exports.PROCESSING_OPTIONS=$c});var Xo=An((UXe,ci)=>{"use strict";var Vc=require("punycode"),z8=L8(),U8={ftp:21,file:null,gopher:70,http:80,https:443,ws:80,wss:443},zt=Symbol("failure");function $8(e){return Vc.ucs2.decode(e).length}function V8(e,t){let n=e[t];return isNaN(n)?void 0:String.fromCodePoint(n)}function qd(e){return e>=48&&e<=57}function Hd(e){return e>=65&&e<=90||e>=97&&e<=122}function QV(e){return Hd(e)||qd(e)}function mo(e){return qd(e)||e>=65&&e<=70||e>=97&&e<=102}function W8(e){return e==="."||e.toLowerCase()==="%2e"}function eW(e){return e=e.toLowerCase(),e===".."||e==="%2e."||e===".%2e"||e==="%2e%2e"}function tW(e,t){return Hd(e)&&(t===58||t===124)}function G8(e){return e.length===2&&Hd(e.codePointAt(0))&&(e[1]===":"||e[1]==="|")}function nW(e){return e.length===2&&Hd(e.codePointAt(0))&&e[1]===":"}function rW(e){return e.search(/\u0000|\u0009|\u000A|\u000D|\u0020|#|%|\/|:|\?|@|\[|\\|\]/)!==-1}function aW(e){return e.search(/\u0000|\u0009|\u000A|\u000D|\u0020|#|\/|:|\?|@|\[|\\|\]/)!==-1}function tg(e){return U8[e]!==void 0}function Cr(e){return tg(e.scheme)}function iW(e){return U8[e]}function q8(e){let t=e.toString(16).toUpperCase();return t.length===1&&(t="0"+t),"%"+t}function oW(e){let t=new Buffer(e),n="";for(let r=0;r<t.length;++r)n+=q8(t[r]);return n}function sW(e){let t=new Buffer(e),n=[];for(let r=0;r<t.length;++r)t[r]!==37?n.push(t[r]):t[r]===37&&mo(t[r+1])&&mo(t[r+2])?(n.push(parseInt(t.slice(r+1,r+3).toString(),16)),r+=2):n.push(t[r]);return new Buffer(n).toString()}function Q1(e){return e<=31||e>126}var uW=new Set([32,34,35,60,62,63,96,123,125]);function H8(e){return Q1(e)||uW.has(e)}var lW=new Set([47,58,59,61,64,91,92,93,94,124]);function rg(e){return H8(e)||lW.has(e)}function ul(e,t){let n=String.fromCodePoint(e);return t(e)?oW(n):n}function cW(e){let t=10;return e.length>=2&&e.charAt(0)==="0"&&e.charAt(1).toLowerCase()==="x"?(e=e.substring(2),t=16):e.length>=2&&e.charAt(0)==="0"&&(e=e.substring(1),t=8),e===""?0:(t===10?/[^0-9]/:t===16?/[^0-9A-Fa-f]/:/[^0-7]/).test(e)?zt:parseInt(e,t)}function pW(e){let t=e.split(".");if(t[t.length-1]===""&&t.length>1&&t.pop(),t.length>4)return e;let n=[];for(let i of t){if(i==="")return e;let o=cW(i);if(o===zt)return e;n.push(o)}for(let i=0;i<n.length-1;++i)if(n[i]>255)return zt;if(n[n.length-1]>=Math.pow(256,5-n.length))return zt;let r=n.pop(),a=0;for(let i of n)r+=i*Math.pow(256,3-a),++a;return r}function dW(e){let t="",n=e;for(let r=1;r<=4;++r)t=String(n%256)+t,r!==4&&(t="."+t),n=Math.floor(n/256);return t}function fW(e){let t=[0,0,0,0,0,0,0,0],n=0,r=null,a=0;if(e=Vc.ucs2.decode(e),e[a]===58){if(e[a+1]!==58)return zt;a+=2,++n,r=n}for(;a<e.length;){if(n===8)return zt;if(e[a]===58){if(r!==null)return zt;++a,++n,r=n;continue}let i=0,o=0;for(;o<4&&mo(e[a]);)i=i*16+parseInt(V8(e,a),16),++a,++o;if(e[a]===46){if(o===0||(a-=o,n>6))return zt;let s=0;for(;e[a]!==void 0;){let u=null;if(s>0)if(e[a]===46&&s<4)++a;else return zt;if(!qd(e[a]))return zt;for(;qd(e[a]);){let l=parseInt(V8(e,a));if(u===null)u=l;else{if(u===0)return zt;u=u*10+l}if(u>255)return zt;++a}t[n]=t[n]*256+u,++s,(s===2||s===4)&&++n}if(s!==4)return zt;break}else if(e[a]===58){if(++a,e[a]===void 0)return zt}else if(e[a]!==void 0)return zt;t[n]=i,++n}if(r!==null){let i=n-r;for(n=7;n!==0&&i>0;){let o=t[r+i-1];t[r+i-1]=t[n],t[n]=o,--n,--i}}else if(r===null&&n!==8)return zt;return t}function hW(e){let t="",r=vW(e).idx,a=!1;for(let i=0;i<=7;++i)if(!(a&&e[i]===0)){if(a&&(a=!1),r===i){t+=i===0?"::":":",a=!0;continue}t+=e[i].toString(16),i!==7&&(t+=":")}return t}function ng(e,t){if(e[0]==="[")return e[e.length-1]!=="]"?zt:fW(e.substring(1,e.length-1));if(!t)return mW(e);let n=sW(e),r=z8.toASCII(n,!1,z8.PROCESSING_OPTIONS.NONTRANSITIONAL,!1);if(r===null||rW(r))return zt;let a=pW(r);return typeof a=="number"||a===zt?a:r}function mW(e){if(aW(e))return zt;let t="",n=Vc.ucs2.decode(e);for(let r=0;r<n.length;++r)t+=ul(n[r],Q1);return t}function vW(e){let t=null,n=1,r=null,a=0;for(let i=0;i<e.length;++i)e[i]!==0?(a>n&&(t=r,n=a),r=null,a=0):(r===null&&(r=i),++a);return a>n&&(t=r,n=a),{idx:t,len:n}}function ag(e){return typeof e=="number"?dW(e):e instanceof Array?"["+hW(e)+"]":e}function gW(e){return e.replace(/^[\u0000-\u001F\u0020]+|[\u0000-\u001F\u0020]+$/g,"")}function yW(e){return e.replace(/\u0009|\u000A|\u000D/g,"")}function j8(e){let t=e.path;t.length!==0&&(e.scheme==="file"&&t.length===1&&wW(t[0])||t.pop())}function K8(e){return e.username!==""||e.password!==""}function bW(e){return e.host===null||e.host===""||e.cannotBeABaseURL||e.scheme==="file"}function wW(e){return/^[A-Za-z]:$/.test(e)}function sr(e,t,n,r,a){if(this.pointer=0,this.input=e,this.base=t||null,this.encodingOverride=n||"utf-8",this.stateOverride=a,this.url=r,this.failure=!1,this.parseError=!1,!this.url){this.url={scheme:"",username:"",password:"",host:null,port:null,path:[],query:null,fragment:null,cannotBeABaseURL:!1};let o=gW(this.input);o!==this.input&&(this.parseError=!0),this.input=o}let i=yW(this.input);for(i!==this.input&&(this.parseError=!0),this.input=i,this.state=a||"scheme start",this.buffer="",this.atFlag=!1,this.arrFlag=!1,this.passwordTokenSeenFlag=!1,this.input=Vc.ucs2.decode(this.input);this.pointer<=this.input.length;++this.pointer){let o=this.input[this.pointer],s=isNaN(o)?void 0:String.fromCodePoint(o),u=this["parse "+this.state](o,s);if(u){if(u===zt){this.failure=!0;break}}else break}}sr.prototype["parse scheme start"]=function(t,n){if(Hd(t))this.buffer+=n.toLowerCase(),this.state="scheme";else if(!this.stateOverride)this.state="no scheme",--this.pointer;else return this.parseError=!0,zt;return!0};sr.prototype["parse scheme"]=function(t,n){if(QV(t)||t===43||t===45||t===46)this.buffer+=n.toLowerCase();else if(t===58){if(this.stateOverride&&(Cr(this.url)&&!tg(this.buffer)||!Cr(this.url)&&tg(this.buffer)||(K8(this.url)||this.url.port!==null)&&this.buffer==="file"||this.url.scheme==="file"&&(this.url.host===""||this.url.host===null))||(this.url.scheme=this.buffer,this.buffer="",this.stateOverride))return!1;this.url.scheme==="file"?((this.input[this.pointer+1]!==47||this.input[this.pointer+2]!==47)&&(this.parseError=!0),this.state="file"):Cr(this.url)&&this.base!==null&&this.base.scheme===this.url.scheme?this.state="special relative or authority":Cr(this.url)?this.state="special authority slashes":this.input[this.pointer+1]===47?(this.state="path or authority",++this.pointer):(this.url.cannotBeABaseURL=!0,this.url.path.push(""),this.state="cannot-be-a-base-URL path")}else if(!this.stateOverride)this.buffer="",this.state="no scheme",this.pointer=-1;else return this.parseError=!0,zt;return!0};sr.prototype["parse no scheme"]=function(t){return this.base===null||this.base.cannotBeABaseURL&&t!==35?zt:(this.base.cannotBeABaseURL&&t===35?(this.url.scheme=this.base.scheme,this.url.path=this.base.path.slice(),this.url.query=this.base.query,this.url.fragment="",this.url.cannotBeABaseURL=!0,this.state="fragment"):this.base.scheme==="file"?(this.state="file",--this.pointer):(this.state="relative",--this.pointer),!0)};sr.prototype["parse special relative or authority"]=function(t){return t===47&&this.input[this.pointer+1]===47?(this.state="special authority ignore slashes",++this.pointer):(this.parseError=!0,this.state="relative",--this.pointer),!0};sr.prototype["parse path or authority"]=function(t){return t===47?this.state="authority":(this.state="path",--this.pointer),!0};sr.prototype["parse relative"]=function(t){return this.url.scheme=this.base.scheme,isNaN(t)?(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query=this.base.query):t===47?this.state="relative slash":t===63?(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query="",this.state="query"):t===35?(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query=this.base.query,this.url.fragment="",this.state="fragment"):Cr(this.url)&&t===92?(this.parseError=!0,this.state="relative slash"):(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(0,this.base.path.length-1),this.state="path",--this.pointer),!0};sr.prototype["parse relative slash"]=function(t){return Cr(this.url)&&(t===47||t===92)?(t===92&&(this.parseError=!0),this.state="special authority ignore slashes"):t===47?this.state="authority":(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.state="path",--this.pointer),!0};sr.prototype["parse special authority slashes"]=function(t){return t===47&&this.input[this.pointer+1]===47?(this.state="special authority ignore slashes",++this.pointer):(this.parseError=!0,this.state="special authority ignore slashes",--this.pointer),!0};sr.prototype["parse special authority ignore slashes"]=function(t){return t!==47&&t!==92?(this.state="authority",--this.pointer):this.parseError=!0,!0};sr.prototype["parse authority"]=function(t,n){if(t===64){this.parseError=!0,this.atFlag&&(this.buffer="%40"+this.buffer),this.atFlag=!0;let r=$8(this.buffer);for(let a=0;a<r;++a){let i=this.buffer.codePointAt(a);if(i===58&&!this.passwordTokenSeenFlag){this.passwordTokenSeenFlag=!0;continue}let o=ul(i,rg);this.passwordTokenSeenFlag?this.url.password+=o:this.url.username+=o}this.buffer=""}else if(isNaN(t)||t===47||t===63||t===35||Cr(this.url)&&t===92){if(this.atFlag&&this.buffer==="")return this.parseError=!0,zt;this.pointer-=$8(this.buffer)+1,this.buffer="",this.state="host"}else this.buffer+=n;return!0};sr.prototype["parse hostname"]=sr.prototype["parse host"]=function(t,n){if(this.stateOverride&&this.url.scheme==="file")--this.pointer,this.state="file host";else if(t===58&&!this.arrFlag){if(this.buffer==="")return this.parseError=!0,zt;let r=ng(this.buffer,Cr(this.url));if(r===zt)return zt;if(this.url.host=r,this.buffer="",this.state="port",this.stateOverride==="hostname")return!1}else if(isNaN(t)||t===47||t===63||t===35||Cr(this.url)&&t===92){if(--this.pointer,Cr(this.url)&&this.buffer==="")return this.parseError=!0,zt;if(this.stateOverride&&this.buffer===""&&(K8(this.url)||this.url.port!==null))return this.parseError=!0,!1;let r=ng(this.buffer,Cr(this.url));if(r===zt)return zt;if(this.url.host=r,this.buffer="",this.state="path start",this.stateOverride)return!1}else t===91?this.arrFlag=!0:t===93&&(this.arrFlag=!1),this.buffer+=n;return!0};sr.prototype["parse port"]=function(t,n){if(qd(t))this.buffer+=n;else if(isNaN(t)||t===47||t===63||t===35||Cr(this.url)&&t===92||this.stateOverride){if(this.buffer!==""){let r=parseInt(this.buffer);if(r>Math.pow(2,16)-1)return this.parseError=!0,zt;this.url.port=r===iW(this.url.scheme)?null:r,this.buffer=""}if(this.stateOverride)return!1;this.state="path start",--this.pointer}else return this.parseError=!0,zt;return!0};var xW=new Set([47,92,63,35]);sr.prototype["parse file"]=function(t){return this.url.scheme="file",t===47||t===92?(t===92&&(this.parseError=!0),this.state="file slash"):this.base!==null&&this.base.scheme==="file"?isNaN(t)?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query=this.base.query):t===63?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query="",this.state="query"):t===35?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query=this.base.query,this.url.fragment="",this.state="fragment"):(this.input.length-this.pointer-1===0||!tW(t,this.input[this.pointer+1])||this.input.length-this.pointer-1>=2&&!xW.has(this.input[this.pointer+2])?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),j8(this.url)):this.parseError=!0,this.state="path",--this.pointer):(this.state="path",--this.pointer),!0};sr.prototype["parse file slash"]=function(t){return t===47||t===92?(t===92&&(this.parseError=!0),this.state="file host"):(this.base!==null&&this.base.scheme==="file"&&(nW(this.base.path[0])?this.url.path.push(this.base.path[0]):this.url.host=this.base.host),this.state="path",--this.pointer),!0};sr.prototype["parse file host"]=function(t,n){if(isNaN(t)||t===47||t===92||t===63||t===35)if(--this.pointer,!this.stateOverride&&G8(this.buffer))this.parseError=!0,this.state="path";else if(this.buffer===""){if(this.url.host="",this.stateOverride)return!1;this.state="path start"}else{let r=ng(this.buffer,Cr(this.url));if(r===zt)return zt;if(r==="localhost"&&(r=""),this.url.host=r,this.stateOverride)return!1;this.buffer="",this.state="path start"}else this.buffer+=n;return!0};sr.prototype["parse path start"]=function(t){return Cr(this.url)?(t===92&&(this.parseError=!0),this.state="path",t!==47&&t!==92&&--this.pointer):!this.stateOverride&&t===63?(this.url.query="",this.state="query"):!this.stateOverride&&t===35?(this.url.fragment="",this.state="fragment"):t!==void 0&&(this.state="path",t!==47&&--this.pointer),!0};sr.prototype["parse path"]=function(t){if(isNaN(t)||t===47||Cr(this.url)&&t===92||!this.stateOverride&&(t===63||t===35)){if(Cr(this.url)&&t===92&&(this.parseError=!0),eW(this.buffer)?(j8(this.url),t!==47&&!(Cr(this.url)&&t===92)&&this.url.path.push("")):W8(this.buffer)&&t!==47&&!(Cr(this.url)&&t===92)?this.url.path.push(""):W8(this.buffer)||(this.url.scheme==="file"&&this.url.path.length===0&&G8(this.buffer)&&(this.url.host!==""&&this.url.host!==null&&(this.parseError=!0,this.url.host=""),this.buffer=this.buffer[0]+":"),this.url.path.push(this.buffer)),this.buffer="",this.url.scheme==="file"&&(t===void 0||t===63||t===35))for(;this.url.path.length>1&&this.url.path[0]==="";)this.parseError=!0,this.url.path.shift();t===63&&(this.url.query="",this.state="query"),t===35&&(this.url.fragment="",this.state="fragment")}else t===37&&(!mo(this.input[this.pointer+1])||!mo(this.input[this.pointer+2]))&&(this.parseError=!0),this.buffer+=ul(t,H8);return!0};sr.prototype["parse cannot-be-a-base-URL path"]=function(t){return t===63?(this.url.query="",this.state="query"):t===35?(this.url.fragment="",this.state="fragment"):(!isNaN(t)&&t!==37&&(this.parseError=!0),t===37&&(!mo(this.input[this.pointer+1])||!mo(this.input[this.pointer+2]))&&(this.parseError=!0),isNaN(t)||(this.url.path[0]=this.url.path[0]+ul(t,Q1))),!0};sr.prototype["parse query"]=function(t,n){if(isNaN(t)||!this.stateOverride&&t===35){(!Cr(this.url)||this.url.scheme==="ws"||this.url.scheme==="wss")&&(this.encodingOverride="utf-8");let r=new Buffer(this.buffer);for(let a=0;a<r.length;++a)r[a]<33||r[a]>126||r[a]===34||r[a]===35||r[a]===60||r[a]===62?this.url.query+=q8(r[a]):this.url.query+=String.fromCodePoint(r[a]);this.buffer="",t===35&&(this.url.fragment="",this.state="fragment")}else t===37&&(!mo(this.input[this.pointer+1])||!mo(this.input[this.pointer+2]))&&(this.parseError=!0),this.buffer+=n;return!0};sr.prototype["parse fragment"]=function(t){return isNaN(t)||(t===0?this.parseError=!0:(t===37&&(!mo(this.input[this.pointer+1])||!mo(this.input[this.pointer+2]))&&(this.parseError=!0),this.url.fragment+=ul(t,Q1))),!0};function SW(e,t){let n=e.scheme+":";if(e.host!==null?(n+="//",(e.username!==""||e.password!=="")&&(n+=e.username,e.password!==""&&(n+=":"+e.password),n+="@"),n+=ag(e.host),e.port!==null&&(n+=":"+e.port)):e.host===null&&e.scheme==="file"&&(n+="//"),e.cannotBeABaseURL)n+=e.path[0];else for(let r of e.path)n+="/"+r;return e.query!==null&&(n+="?"+e.query),!t&&e.fragment!==null&&(n+="#"+e.fragment),n}function kW(e){let t=e.scheme+"://";return t+=ag(e.host),e.port!==null&&(t+=":"+e.port),t}ci.exports.serializeURL=SW;ci.exports.serializeURLOrigin=function(e){switch(e.scheme){case"blob":try{return ci.exports.serializeURLOrigin(ci.exports.parseURL(e.path[0]))}catch{return"null"}case"ftp":case"gopher":case"http":case"https":case"ws":case"wss":return kW({scheme:e.scheme,host:e.host,port:e.port});case"file":return"file://";default:return"null"}};ci.exports.basicURLParse=function(e,t){t===void 0&&(t={});let n=new sr(e,t.baseURL,t.encodingOverride,t.url,t.stateOverride);return n.failure?"failure":n.url};ci.exports.setTheUsername=function(e,t){e.username="";let n=Vc.ucs2.decode(t);for(let r=0;r<n.length;++r)e.username+=ul(n[r],rg)};ci.exports.setThePassword=function(e,t){e.password="";let n=Vc.ucs2.decode(t);for(let r=0;r<n.length;++r)e.password+=ul(n[r],rg)};ci.exports.serializeHost=ag;ci.exports.cannotHaveAUsernamePasswordPort=bW;ci.exports.serializeInteger=function(e){return String(e)};ci.exports.parseURL=function(e,t){return t===void 0&&(t={}),ci.exports.basicURLParse(e,{baseURL:t.baseURL,encodingOverride:t.encodingOverride})}});var Y8=An(X8=>{"use strict";var ur=Xo();X8.implementation=class{constructor(t){let n=t[0],r=t[1],a=null;if(r!==void 0&&(a=ur.basicURLParse(r),a==="failure"))throw new TypeError("Invalid base URL");let i=ur.basicURLParse(n,{baseURL:a});if(i==="failure")throw new TypeError("Invalid URL");this._url=i}get href(){return ur.serializeURL(this._url)}set href(t){let n=ur.basicURLParse(t);if(n==="failure")throw new TypeError("Invalid URL");this._url=n}get origin(){return ur.serializeURLOrigin(this._url)}get protocol(){return this._url.scheme+":"}set protocol(t){ur.basicURLParse(t+":",{url:this._url,stateOverride:"scheme start"})}get username(){return this._url.username}set username(t){ur.cannotHaveAUsernamePasswordPort(this._url)||ur.setTheUsername(this._url,t)}get password(){return this._url.password}set password(t){ur.cannotHaveAUsernamePasswordPort(this._url)||ur.setThePassword(this._url,t)}get host(){let t=this._url;return t.host===null?"":t.port===null?ur.serializeHost(t.host):ur.serializeHost(t.host)+":"+ur.serializeInteger(t.port)}set host(t){this._url.cannotBeABaseURL||ur.basicURLParse(t,{url:this._url,stateOverride:"host"})}get hostname(){return this._url.host===null?"":ur.serializeHost(this._url.host)}set hostname(t){this._url.cannotBeABaseURL||ur.basicURLParse(t,{url:this._url,stateOverride:"hostname"})}get port(){return this._url.port===null?"":ur.serializeInteger(this._url.port)}set port(t){ur.cannotHaveAUsernamePasswordPort(this._url)||(t===""?this._url.port=null:ur.basicURLParse(t,{url:this._url,stateOverride:"port"}))}get pathname(){return this._url.cannotBeABaseURL?this._url.path[0]:this._url.path.length===0?"":"/"+this._url.path.join("/")}set pathname(t){this._url.cannotBeABaseURL||(this._url.path=[],ur.basicURLParse(t,{url:this._url,stateOverride:"path start"}))}get search(){return this._url.query===null||this._url.query===""?"":"?"+this._url.query}set search(t){let n=this._url;if(t===""){n.query=null;return}let r=t[0]==="?"?t.substring(1):t;n.query="",ur.basicURLParse(r,{url:n,stateOverride:"query"})}get hash(){return this._url.fragment===null||this._url.fragment===""?"":"#"+this._url.fragment}set hash(t){if(t===""){this._url.fragment=null;return}let n=t[0]==="#"?t.substring(1):t;this._url.fragment="",ur.basicURLParse(n,{url:this._url,stateOverride:"fragment"})}toJSON(){return this.href}}});var Q8=An((HXe,jd)=>{"use strict";var Ri=_8(),Z8=A8(),J8=Y8(),sn=Z8.implSymbol;function Vr(e){if(!this||this[sn]||!(this instanceof Vr))throw new TypeError("Failed to construct 'URL': Please use the 'new' operator, this DOM object constructor cannot be called as a function.");if(arguments.length<1)throw new TypeError("Failed to construct 'URL': 1 argument required, but only "+arguments.length+" present.");let t=[];for(let n=0;n<arguments.length&&n<2;++n)t[n]=arguments[n];t[0]=Ri.USVString(t[0]),t[1]!==void 0&&(t[1]=Ri.USVString(t[1])),jd.exports.setup(this,t)}Vr.prototype.toJSON=function(){if(!this||!jd.exports.is(this))throw new TypeError("Illegal invocation");let t=[];for(let n=0;n<arguments.length&&n<0;++n)t[n]=arguments[n];return this[sn].toJSON.apply(this[sn],t)};Object.defineProperty(Vr.prototype,"href",{get(){return this[sn].href},set(e){e=Ri.USVString(e),this[sn].href=e},enumerable:!0,configurable:!0});Vr.prototype.toString=function(){if(!this||!jd.exports.is(this))throw new TypeError("Illegal invocation");return this.href};Object.defineProperty(Vr.prototype,"origin",{get(){return this[sn].origin},enumerable:!0,configurable:!0});Object.defineProperty(Vr.prototype,"protocol",{get(){return this[sn].protocol},set(e){e=Ri.USVString(e),this[sn].protocol=e},enumerable:!0,configurable:!0});Object.defineProperty(Vr.prototype,"username",{get(){return this[sn].username},set(e){e=Ri.USVString(e),this[sn].username=e},enumerable:!0,configurable:!0});Object.defineProperty(Vr.prototype,"password",{get(){return this[sn].password},set(e){e=Ri.USVString(e),this[sn].password=e},enumerable:!0,configurable:!0});Object.defineProperty(Vr.prototype,"host",{get(){return this[sn].host},set(e){e=Ri.USVString(e),this[sn].host=e},enumerable:!0,configurable:!0});Object.defineProperty(Vr.prototype,"hostname",{get(){return this[sn].hostname},set(e){e=Ri.USVString(e),this[sn].hostname=e},enumerable:!0,configurable:!0});Object.defineProperty(Vr.prototype,"port",{get(){return this[sn].port},set(e){e=Ri.USVString(e),this[sn].port=e},enumerable:!0,configurable:!0});Object.defineProperty(Vr.prototype,"pathname",{get(){return this[sn].pathname},set(e){e=Ri.USVString(e),this[sn].pathname=e},enumerable:!0,configurable:!0});Object.defineProperty(Vr.prototype,"search",{get(){return this[sn].search},set(e){e=Ri.USVString(e),this[sn].search=e},enumerable:!0,configurable:!0});Object.defineProperty(Vr.prototype,"hash",{get(){return this[sn].hash},set(e){e=Ri.USVString(e),this[sn].hash=e},enumerable:!0,configurable:!0});jd.exports={is(e){return!!e&&e[sn]instanceof J8.implementation},create(e,t){let n=Object.create(Vr.prototype);return this.setup(n,e,t),n},setup(e,t,n){n||(n={}),n.wrapper=e,e[sn]=new J8.implementation(t,n),e[sn][Z8.wrapperSymbol]=e},interface:Vr,expose:{Window:{URL:Vr},Worker:{URL:Vr}}}});var e9=An(Yo=>{"use strict";Yo.URL=Q8().interface;Yo.serializeURL=Xo().serializeURL;Yo.serializeURLOrigin=Xo().serializeURLOrigin;Yo.basicURLParse=Xo().basicURLParse;Yo.setTheUsername=Xo().setTheUsername;Yo.setThePassword=Xo().setThePassword;Yo.serializeHost=Xo().serializeHost;Yo.serializeInteger=Xo().serializeInteger;Yo.parseURL=Xo().parseURL});var d9=An((Jo,p9)=>{"use strict";Object.defineProperty(Jo,"__esModule",{value:!0});function Gc(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var vo=Gc(require("stream")),a9=Gc(require("http")),tm=Gc(require("url")),i9=Gc(e9()),NW=Gc(require("https")),ll=Gc(require("zlib")),TW=vo.Readable,Is=Symbol("buffer"),ig=Symbol("type"),Xd=class e{constructor(){this[ig]="";let t=arguments[0],n=arguments[1],r=[],a=0;if(t){let o=t,s=Number(o.length);for(let u=0;u<s;u++){let l=o[u],c;l instanceof Buffer?c=l:ArrayBuffer.isView(l)?c=Buffer.from(l.buffer,l.byteOffset,l.byteLength):l instanceof ArrayBuffer?c=Buffer.from(l):l instanceof e?c=l[Is]:c=Buffer.from(typeof l=="string"?l:String(l)),a+=c.length,r.push(c)}}this[Is]=Buffer.concat(r);let i=n&&n.type!==void 0&&String(n.type).toLowerCase();i&&!/[^\u0020-\u007E]/.test(i)&&(this[ig]=i)}get size(){return this[Is].length}get type(){return this[ig]}text(){return Promise.resolve(this[Is].toString())}arrayBuffer(){let t=this[Is],n=t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);return Promise.resolve(n)}stream(){let t=new TW;return t._read=function(){},t.push(this[Is]),t.push(null),t}toString(){return"[object Blob]"}slice(){let t=this.size,n=arguments[0],r=arguments[1],a,i;n===void 0?a=0:n<0?a=Math.max(t+n,0):a=Math.min(n,t),r===void 0?i=t:r<0?i=Math.max(t+r,0):i=Math.min(r,t);let o=Math.max(i-a,0),u=this[Is].slice(a,a+o),l=new e([],{type:arguments[2]});return l[Is]=u,l}};Object.defineProperties(Xd.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});Object.defineProperty(Xd.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0});function ea(e,t,n){Error.call(this,e),this.message=e,this.type=t,n&&(this.code=this.errno=n.code),Error.captureStackTrace(this,this.constructor)}ea.prototype=Object.create(Error.prototype);ea.prototype.constructor=ea;ea.prototype.name="FetchError";var lg;try{lg=require("encoding").convert}catch{}var Ds=Symbol("Body internals"),t9=vo.PassThrough;function Wr(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.size;let a=r===void 0?0:r;var i=n.timeout;let o=i===void 0?0:i;e==null?e=null:o9(e)?e=Buffer.from(e.toString()):Zd(e)||Buffer.isBuffer(e)||(Object.prototype.toString.call(e)==="[object ArrayBuffer]"?e=Buffer.from(e):ArrayBuffer.isView(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof vo||(e=Buffer.from(String(e)))),this[Ds]={body:e,disturbed:!1,error:null},this.size=a,this.timeout=o,e instanceof vo&&e.on("error",function(s){let u=s.name==="AbortError"?s:new ea(`Invalid response body while trying to fetch ${t.url}: ${s.message}`,"system",s);t[Ds].error=u})}Wr.prototype={get body(){return this[Ds].body},get bodyUsed(){return this[Ds].disturbed},arrayBuffer(){return Wc.call(this).then(function(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)})},blob(){let e=this.headers&&this.headers.get("content-type")||"";return Wc.call(this).then(function(t){return Object.assign(new Xd([],{type:e.toLowerCase()}),{[Is]:t})})},json(){var e=this;return Wc.call(this).then(function(t){try{return JSON.parse(t.toString())}catch(n){return Wr.Promise.reject(new ea(`invalid json response body at ${e.url} reason: ${n.message}`,"invalid-json"))}})},text(){return Wc.call(this).then(function(e){return e.toString()})},buffer(){return Wc.call(this)},textConverted(){var e=this;return Wc.call(this).then(function(t){return EW(t,e.headers)})}};Object.defineProperties(Wr.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});Wr.mixIn=function(e){for(let t of Object.getOwnPropertyNames(Wr.prototype))if(!(t in e)){let n=Object.getOwnPropertyDescriptor(Wr.prototype,t);Object.defineProperty(e,t,n)}};function Wc(){var e=this;if(this[Ds].disturbed)return Wr.Promise.reject(new TypeError(`body used already for: ${this.url}`));if(this[Ds].disturbed=!0,this[Ds].error)return Wr.Promise.reject(this[Ds].error);let t=this.body;if(t===null)return Wr.Promise.resolve(Buffer.alloc(0));if(Zd(t)&&(t=t.stream()),Buffer.isBuffer(t))return Wr.Promise.resolve(t);if(!(t instanceof vo))return Wr.Promise.resolve(Buffer.alloc(0));let n=[],r=0,a=!1;return new Wr.Promise(function(i,o){let s;e.timeout&&(s=setTimeout(function(){a=!0,o(new ea(`Response timeout while trying to fetch ${e.url} (over ${e.timeout}ms)`,"body-timeout"))},e.timeout)),t.on("error",function(u){u.name==="AbortError"?(a=!0,o(u)):o(new ea(`Invalid response body while trying to fetch ${e.url}: ${u.message}`,"system",u))}),t.on("data",function(u){if(!(a||u===null)){if(e.size&&r+u.length>e.size){a=!0,o(new ea(`content size at ${e.url} over limit: ${e.size}`,"max-size"));return}r+=u.length,n.push(u)}}),t.on("end",function(){if(!a){clearTimeout(s);try{i(Buffer.concat(n,r))}catch(u){o(new ea(`Could not create Buffer from response body for ${e.url}: ${u.message}`,"system",u))}}})})}function EW(e,t){if(typeof lg!="function")throw new Error("The package `encoding` must be installed to use the textConverted() function");let n=t.get("content-type"),r="utf-8",a,i;return n&&(a=/charset=([^;]*)/i.exec(n)),i=e.slice(0,1024).toString(),!a&&i&&(a=/<meta.+?charset=(['"])(.+?)\1/i.exec(i)),!a&&i&&(a=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(i),a||(a=/<meta[\s]+?content=(['"])(.+?)\1[\s]+?http-equiv=(['"])content-type\3/i.exec(i),a&&a.pop()),a&&(a=/charset=(.*)/i.exec(a.pop()))),!a&&i&&(a=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(i)),a&&(r=a.pop(),(r==="gb2312"||r==="gbk")&&(r="gb18030")),lg(e,"UTF-8",r).toString()}function o9(e){return typeof e!="object"||typeof e.append!="function"||typeof e.delete!="function"||typeof e.get!="function"||typeof e.getAll!="function"||typeof e.has!="function"||typeof e.set!="function"?!1:e.constructor.name==="URLSearchParams"||Object.prototype.toString.call(e)==="[object URLSearchParams]"||typeof e.sort=="function"}function Zd(e){return typeof e=="object"&&typeof e.arrayBuffer=="function"&&typeof e.type=="string"&&typeof e.stream=="function"&&typeof e.constructor=="function"&&typeof e.constructor.name=="string"&&/^(Blob|File)$/.test(e.constructor.name)&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}function s9(e){let t,n,r=e.body;if(e.bodyUsed)throw new Error("cannot clone body after it is used");return r instanceof vo&&typeof r.getBoundary!="function"&&(t=new t9,n=new t9,r.pipe(t),r.pipe(n),e[Ds].body=t,r=n),r}function u9(e){return e===null?null:typeof e=="string"?"text/plain;charset=UTF-8":o9(e)?"application/x-www-form-urlencoded;charset=UTF-8":Zd(e)?e.type||null:Buffer.isBuffer(e)||Object.prototype.toString.call(e)==="[object ArrayBuffer]"||ArrayBuffer.isView(e)?null:typeof e.getBoundary=="function"?`multipart/form-data;boundary=${e.getBoundary()}`:e instanceof vo?null:"text/plain;charset=UTF-8"}function l9(e){let t=e.body;return t===null?0:Zd(t)?t.size:Buffer.isBuffer(t)?t.length:t&&typeof t.getLengthSync=="function"&&(t._lengthRetrievers&&t._lengthRetrievers.length==0||t.hasKnownLength&&t.hasKnownLength())?t.getLengthSync():null}function IW(e,t){let n=t.body;n===null?e.end():Zd(n)?n.stream().pipe(e):Buffer.isBuffer(n)?(e.write(n),e.end()):n.pipe(e)}Wr.Promise=global.Promise;var c9=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,cg=/[^\t\x20-\x7e\x80-\xff]/;function Kd(e){if(e=`${e}`,c9.test(e)||e==="")throw new TypeError(`${e} is not a legal HTTP header name`)}function n9(e){if(e=`${e}`,cg.test(e))throw new TypeError(`${e} is not a legal HTTP header value`)}function Uc(e,t){t=t.toLowerCase();for(let n in e)if(n.toLowerCase()===t)return n}var vr=Symbol("map"),Mi=class e{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;if(this[vr]=Object.create(null),t instanceof e){let n=t.raw(),r=Object.keys(n);for(let a of r)for(let i of n[a])this.append(a,i);return}if(t!=null)if(typeof t=="object"){let n=t[Symbol.iterator];if(n!=null){if(typeof n!="function")throw new TypeError("Header pairs must be iterable");let r=[];for(let a of t){if(typeof a!="object"||typeof a[Symbol.iterator]!="function")throw new TypeError("Each header pair must be iterable");r.push(Array.from(a))}for(let a of r){if(a.length!==2)throw new TypeError("Each header pair must be a name/value tuple");this.append(a[0],a[1])}}else for(let r of Object.keys(t)){let a=t[r];this.append(r,a)}}else throw new TypeError("Provided initializer must be an object")}get(t){t=`${t}`,Kd(t);let n=Uc(this[vr],t);return n===void 0?null:this[vr][n].join(", ")}forEach(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,r=pg(this),a=0;for(;a<r.length;){var i=r[a];let o=i[0],s=i[1];t.call(n,s,o,this),r=pg(this),a++}}set(t,n){t=`${t}`,n=`${n}`,Kd(t),n9(n);let r=Uc(this[vr],t);this[vr][r!==void 0?r:t]=[n]}append(t,n){t=`${t}`,n=`${n}`,Kd(t),n9(n);let r=Uc(this[vr],t);r!==void 0?this[vr][r].push(n):this[vr][t]=[n]}has(t){return t=`${t}`,Kd(t),Uc(this[vr],t)!==void 0}delete(t){t=`${t}`,Kd(t);let n=Uc(this[vr],t);n!==void 0&&delete this[vr][n]}raw(){return this[vr]}keys(){return og(this,"key")}values(){return og(this,"value")}[Symbol.iterator](){return og(this,"key+value")}};Mi.prototype.entries=Mi.prototype[Symbol.iterator];Object.defineProperty(Mi.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0});Object.defineProperties(Mi.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});function pg(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"key+value";return Object.keys(e[vr]).sort().map(t==="key"?function(r){return r.toLowerCase()}:t==="value"?function(r){return e[vr][r].join(", ")}:function(r){return[r.toLowerCase(),e[vr][r].join(", ")]})}var dg=Symbol("internal");function og(e,t){let n=Object.create(fg);return n[dg]={target:e,kind:t,index:0},n}var fg=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==fg)throw new TypeError("Value of `this` is not a HeadersIterator");var e=this[dg];let t=e.target,n=e.kind,r=e.index,a=pg(t,n),i=a.length;return r>=i?{value:void 0,done:!0}:(this[dg].index=r+1,{value:a[r],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));Object.defineProperty(fg,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});function CW(e){let t=Object.assign({__proto__:null},e[vr]),n=Uc(e[vr],"Host");return n!==void 0&&(t[n]=t[n][0]),t}function DW(e){let t=new Mi;for(let n of Object.keys(e))if(!c9.test(n))if(Array.isArray(e[n]))for(let r of e[n])cg.test(r)||(t[vr][n]===void 0?t[vr][n]=[r]:t[vr][n].push(r));else cg.test(e[n])||(t[vr][n]=[e[n]]);return t}var cu=Symbol("Response internals"),_W=a9.STATUS_CODES,Oi=class e{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Wr.call(this,t,n);let r=n.status||200,a=new Mi(n.headers);if(t!=null&&!a.has("Content-Type")){let i=u9(t);i&&a.append("Content-Type",i)}this[cu]={url:n.url,status:r,statusText:n.statusText||_W[r],headers:a,counter:n.counter}}get url(){return this[cu].url||""}get status(){return this[cu].status}get ok(){return this[cu].status>=200&&this[cu].status<300}get redirected(){return this[cu].counter>0}get statusText(){return this[cu].statusText}get headers(){return this[cu].headers}clone(){return new e(s9(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}};Wr.mixIn(Oi.prototype);Object.defineProperties(Oi.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});Object.defineProperty(Oi.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});var Cs=Symbol("Request internals"),AW=tm.URL||i9.URL,FW=tm.parse,RW=tm.format;function sg(e){return/^[a-zA-Z][a-zA-Z\d+\-.]*:/.exec(e)&&(e=new AW(e).toString()),FW(e)}var OW="destroy"in vo.Readable.prototype;function em(e){return typeof e=="object"&&typeof e[Cs]=="object"}function MW(e){let t=e&&typeof e=="object"&&Object.getPrototypeOf(e);return!!(t&&t.constructor.name==="AbortSignal")}var du=class e{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r;em(t)?r=sg(t.url):(t&&t.href?r=sg(t.href):r=sg(`${t}`),t={});let a=n.method||t.method||"GET";if(a=a.toUpperCase(),(n.body!=null||em(t)&&t.body!==null)&&(a==="GET"||a==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let i=n.body!=null?n.body:em(t)&&t.body!==null?s9(t):null;Wr.call(this,i,{timeout:n.timeout||t.timeout||0,size:n.size||t.size||0});let o=new Mi(n.headers||t.headers||{});if(i!=null&&!o.has("Content-Type")){let u=u9(i);u&&o.append("Content-Type",u)}let s=em(t)?t.signal:null;if("signal"in n&&(s=n.signal),s!=null&&!MW(s))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[Cs]={method:a,redirect:n.redirect||t.redirect||"follow",headers:o,parsedURL:r,signal:s},this.follow=n.follow!==void 0?n.follow:t.follow!==void 0?t.follow:20,this.compress=n.compress!==void 0?n.compress:t.compress!==void 0?t.compress:!0,this.counter=n.counter||t.counter||0,this.agent=n.agent||t.agent}get method(){return this[Cs].method}get url(){return RW(this[Cs].parsedURL)}get headers(){return this[Cs].headers}get redirect(){return this[Cs].redirect}get signal(){return this[Cs].signal}clone(){return new e(this)}};Wr.mixIn(du.prototype);Object.defineProperty(du.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0});Object.defineProperties(du.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});function PW(e){let t=e[Cs].parsedURL,n=new Mi(e[Cs].headers);if(n.has("Accept")||n.set("Accept","*/*"),!t.protocol||!t.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(t.protocol))throw new TypeError("Only HTTP(S) protocols are supported");if(e.signal&&e.body instanceof vo.Readable&&!OW)throw new Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let r=null;if(e.body==null&&/^(POST|PUT)$/i.test(e.method)&&(r="0"),e.body!=null){let i=l9(e);typeof i=="number"&&(r=String(i))}r&&n.set("Content-Length",r),n.has("User-Agent")||n.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),e.compress&&!n.has("Accept-Encoding")&&n.set("Accept-Encoding","gzip,deflate");let a=e.agent;return typeof a=="function"&&(a=a(t)),Object.assign({},t,{method:e.method,headers:CW(n),agent:a})}function Yd(e){Error.call(this,e),this.type="aborted",this.message=e,Error.captureStackTrace(this,this.constructor)}Yd.prototype=Object.create(Error.prototype);Yd.prototype.constructor=Yd;Yd.prototype.name="AbortError";var Jd=tm.URL||i9.URL,r9=vo.PassThrough,BW=function(t,n){let r=new Jd(n).hostname,a=new Jd(t).hostname;return r===a||r[r.length-a.length-1]==="."&&r.endsWith(a)},LW=function(t,n){let r=new Jd(n).protocol,a=new Jd(t).protocol;return r===a};function pu(e,t){if(!pu.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return Wr.Promise=pu.Promise,new pu.Promise(function(n,r){let a=new du(e,t),i=PW(a),o=(i.protocol==="https:"?NW:a9).request,s=a.signal,u=null,l=function(){let m=new Yd("The user aborted a request.");r(m),a.body&&a.body instanceof vo.Readable&&ug(a.body,m),!(!u||!u.body)&&u.body.emit("error",m)};if(s&&s.aborted){l();return}let c=function(){l(),f()},p=o(i),d;s&&s.addEventListener("abort",c);function f(){p.abort(),s&&s.removeEventListener("abort",c),clearTimeout(d)}a.timeout&&p.once("socket",function(h){d=setTimeout(function(){r(new ea(`network timeout at: ${a.url}`,"request-timeout")),f()},a.timeout)}),p.on("error",function(h){r(new ea(`request to ${a.url} failed, reason: ${h.message}`,"system",h)),u&&u.body&&ug(u.body,h),f()}),zW(p,function(h){s&&s.aborted||u&&u.body&&ug(u.body,h)}),parseInt(process.version.substring(1))<14&&p.on("socket",function(h){h.addListener("close",function(m){let v=h.listenerCount("data")>0;if(u&&v&&!m&&!(s&&s.aborted)){let g=new Error("Premature close");g.code="ERR_STREAM_PREMATURE_CLOSE",u.body.emit("error",g)}})}),p.on("response",function(h){clearTimeout(d);let m=DW(h.headers);if(pu.isRedirect(h.statusCode)){let b=m.get("Location"),x=null;try{x=b===null?null:new Jd(b,a.url).toString()}catch{if(a.redirect!=="manual"){r(new ea(`uri requested responds with an invalid redirect URL: ${b}`,"invalid-redirect")),f();return}}switch(a.redirect){case"error":r(new ea(`uri requested responds with a redirect, redirect mode is set to error: ${a.url}`,"no-redirect")),f();return;case"manual":if(x!==null)try{m.set("Location",x)}catch(N){r(N)}break;case"follow":if(x===null)break;if(a.counter>=a.follow){r(new ea(`maximum redirect reached at: ${a.url}`,"max-redirect")),f();return}let k={headers:new Mi(a.headers),follow:a.follow,counter:a.counter+1,agent:a.agent,compress:a.compress,method:a.method,body:a.body,signal:a.signal,timeout:a.timeout,size:a.size};if(!BW(a.url,x)||!LW(a.url,x))for(let N of["authorization","www-authenticate","cookie","cookie2"])k.headers.delete(N);if(h.statusCode!==303&&a.body&&l9(a)===null){r(new ea("Cannot follow redirect with body being a readable stream","unsupported-redirect")),f();return}(h.statusCode===303||(h.statusCode===301||h.statusCode===302)&&a.method==="POST")&&(k.method="GET",k.body=void 0,k.headers.delete("content-length")),n(pu(new du(x,k))),f();return}}h.once("end",function(){s&&s.removeEventListener("abort",c)});let v=h.pipe(new r9),g={url:a.url,status:h.statusCode,statusText:h.statusMessage,headers:m,size:a.size,timeout:a.timeout,counter:a.counter},y=m.get("Content-Encoding");if(!a.compress||a.method==="HEAD"||y===null||h.statusCode===204||h.statusCode===304){u=new Oi(v,g),n(u);return}let w={flush:ll.Z_SYNC_FLUSH,finishFlush:ll.Z_SYNC_FLUSH};if(y=="gzip"||y=="x-gzip"){v=v.pipe(ll.createGunzip(w)),u=new Oi(v,g),n(u);return}if(y=="deflate"||y=="x-deflate"){let b=h.pipe(new r9);b.once("data",function(x){(x[0]&15)===8?v=v.pipe(ll.createInflate()):v=v.pipe(ll.createInflateRaw()),u=new Oi(v,g),n(u)}),b.on("end",function(){u||(u=new Oi(v,g),n(u))});return}if(y=="br"&&typeof ll.createBrotliDecompress=="function"){v=v.pipe(ll.createBrotliDecompress()),u=new Oi(v,g),n(u);return}u=new Oi(v,g),n(u)}),IW(p,a)})}function zW(e,t){let n;e.on("socket",function(r){n=r}),e.on("response",function(r){let a=r.headers;a["transfer-encoding"]==="chunked"&&!a["content-length"]&&r.once("close",function(i){if(n&&n.listenerCount("data")>0&&!i){let s=new Error("Premature close");s.code="ERR_STREAM_PREMATURE_CLOSE",t(s)}})})}function ug(e,t){e.destroy?e.destroy(t):(e.emit("error",t),e.end())}pu.isRedirect=function(e){return e===301||e===302||e===303||e===307||e===308};pu.Promise=global.Promise;p9.exports=Jo=pu;Object.defineProperty(Jo,"__esModule",{value:!0});Jo.default=Jo;Jo.Headers=Mi;Jo.Request=du;Jo.Response=Oi;Jo.FetchError=ea});var Il=An(_=>{"use strict";function $W(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in e)){var a=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,a.get?a:{enumerable:!0,get:function(){return n[r]}})}})}),e}var wg=function(e,t){return wg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},wg(e,t)};function Rs(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");wg(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function tt(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function s(c){try{l(r.next(c))}catch(p){o(p)}}function u(c){try{l(r.throw(c))}catch(p){o(p)}}function l(c){c.done?i(c.value):a(c.value).then(s,u)}l((r=r.apply(e,t||[])).next())})}function nt(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,a,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,a&&(i=l[0]&2?a.return:l[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,l[1])).done)return i;switch(a=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,a=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],a=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Ur(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ie(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function Mt(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var VW=1e-7,WW=1e-4,UW=function(){function e(t,n){this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return e.prototype.get=function(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)},e.prototype.set=function(t,n){this.dataIdsCount++,this.data.set(t,n)},e.prototype.has=function(t){return this.data.has(t)},e.prototype.delete=function(t){return this.dataIdsCount--,this.data.delete(t)},e.prototype.numDataIds=function(){return this.dataIdsCount},e}(),O9=function(){function e(){}return e.prototype.refCount=function(t){return Ba("refCount")},e.prototype.incRef=function(t){return Ba("incRef")},e.prototype.timerAvailable=function(){return!0},e.prototype.time=function(t){return Ba("time")},e.prototype.read=function(t){return Ba("read")},e.prototype.readSync=function(t){return Ba("readSync")},e.prototype.readToGPU=function(t,n){return Ba("readToGPU")},e.prototype.numDataIds=function(){return Ba("numDataIds")},e.prototype.disposeData=function(t,n){return Ba("disposeData")},e.prototype.write=function(t,n,r){return Ba("write")},e.prototype.move=function(t,n,r,a,i){return Ba("move")},e.prototype.createTensorFromGPUData=function(t,n,r){return Ba("createTensorFromGPUData")},e.prototype.memory=function(){return Ba("memory")},e.prototype.floatPrecision=function(){return Ba("floatPrecision")},e.prototype.epsilon=function(){return this.floatPrecision()===32?VW:WW},e.prototype.dispose=function(){return Ba("dispose")},e}();function Ba(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}function M9(e){for(var t=e.length,n=0;t>0;)n=Math.random()*t|0,t--,um(e,t,n)}function GW(e,t){if(e.length!==t.length)throw new Error("Array sizes must match to be shuffled together "+"First array length was ".concat(e.length)+"Second array length was ".concat(t.length));for(var n=e.length,r=0;n>0;)r=Math.random()*n|0,n--,um(e,n,r),um(t,n,r)}function of(e,t,n){return Math.max(e,Math.min(t,n))}function qW(e){return e%2===0?e:e+1}function um(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function HW(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function jW(e,t){var n=Math.random();return t*n+(1-n)*e}function KW(e,t){for(var n=0,r=0;r<e.length;r++){var a=Number(e[r])-Number(t[r]);n+=a*a}return n}function V(e,t){if(!e)throw new Error(typeof t=="string"?t:t())}function pa(e,t,n){n===void 0&&(n=""),V(Os(e,t),function(){return n+" Shapes ".concat(e," and ").concat(t," must match")})}function kl(e){V(e!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function Qt(e){if(e.length===0)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function XW(e){return e.length===0}function P9(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==null&&t[n]!==null&&e[n]!==t[n])return!1;return!0}function Os(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function tp(e){return e%1===0}function YW(e){if(Math.tanh!=null)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function JW(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function ZW(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return M9(t),t}function nf(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function QW(e,t,n,r){return t===void 0&&(t=function(a){return 0}),new Promise(function(a,i){var o=0,s=function(){if(e()){a();return}o++;var u=t(o);if(n!=null&&o>=n){i();return}r!=null?r(s,u):setTimeout(s,u)};s()})}function eU(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(e[a]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(r," and dim ").concat(a));r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found ".concat(e[a]," at dim ").concat(a));if(r===-1){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(n===0)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));var i=e.slice();return i[r]=t/n,i}function xf(e,t){var n=t.length;return e=e==null?t.map(function(r,a){return a}):[].concat(e),V(e.every(function(r){return r>=-n&&r<n}),function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e)}),V(e.every(function(r){return tp(r)}),function(){return"All values in axis param must be integers but "+"got axis ".concat(e)}),e.map(function(r){return r<0?n+r:r})}function B9(e,t){for(var n=[],r=[],a=t!=null&&Array.isArray(t)&&t.length===0,i=t==null||a?null:xf(t,e).sort(),o=0,s=0;s<e.length;++s){if(i!=null){if(i[o]===s&&e[s]!==1)throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(e[s],"' is not 1"));(i[o]==null||i[o]>s)&&e[s]===1&&(n.push(e[s]),r.push(s)),i[o]<=s&&o++}e[s]!==1&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function L9(e,t){return Hg(e,t)}function Hg(e,t){var n=null;if(e==null||e==="float32")n=new Float32Array(t);else if(e==="int32")n=new Int32Array(t);else if(e==="bool")n=new Uint8Array(t);else if(e==="string")n=new Array(t);else throw new Error("Unknown data type ".concat(e));return n}function z9(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}function $9(e){return e==="bool"||e==="complex64"||e==="float32"||e==="int32"||e==="string"}function tU(e,t){return!(t==="complex64"||t==="float32"&&e!=="complex64"||t==="int32"&&e!=="float32"&&e!=="complex64"||t==="bool"&&e==="bool")}function lm(e){if(e==="float32"||e==="int32")return 4;if(e==="complex64")return 8;if(e==="bool")return 1;throw new Error("Unknown dtype ".concat(e))}function V9(e){if(e==null)return 0;var t=0;return e.forEach(function(n){return t+=n.length}),t}function mu(e){return typeof e=="string"||e instanceof String}function W9(e){return typeof e=="boolean"}function U9(e){return typeof e=="number"}function Sf(e){return Array.isArray(e)?Sf(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":U9(e)?"float32":mu(e)?"string":W9(e)?"bool":"float32"}function bu(e){return!!(e&&e.constructor&&e.call&&e.apply)}function cm(e,t){for(var n=t;n<e;++n)if(e%n===0)return n;return e}function ip(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function G9(e,t,n,r){r===void 0&&(r=!1);var a=new Array;if(t.length===1)for(var i=t[0]*(r?2:1),o=0;o<i;o++)a[o]=n[e+o];else for(var i=t[0],s=t.slice(1),u=s.reduce(function(c,p){return c*p})*(r?2:1),o=0;o<i;o++)a[o]=G9(e+o*u,s,n,r);return a}function Xc(e,t,n){if(n===void 0&&(n=!1),e.length===0)return t[0];var r=e.reduce(function(a,i){return a*i})*(n?2:1);if(r===0)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return G9(0,e,t,n)}function nU(e,t){if(Array.isArray(e))return e;if(t==="float32")return e instanceof Float32Array?e:new Float32Array(e);if(t==="int32")return e instanceof Int32Array?e:new Int32Array(e);if(t==="bool"||t==="string")return Uint8Array.from(new Int32Array(e));throw new Error("Unknown dtype ".concat(t))}function jg(e,t){for(var n=xm(e,t),r=0;r<n.length;r++)n[r]=1;return n}function xm(e,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool")return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function rU(e,t){var n=e.reduce(function(r,a){return r*a},1);if(t==null||t==="float32")return Xc(e,new Float32Array(n));if(t==="int32")return Xc(e,new Int32Array(n));if(t==="bool")return Xc(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function $a(e){e.forEach(function(t){V(Number.isInteger(t)&&t>=0,function(){return"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"].")})})}function aU(e,t,n){if(t===0)return 0;if(t===1)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function iU(e,t,n){if(t===0)return[];if(t===1)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function Sm(e){return e&&e.then&&typeof e.then=="function"}var f9="tfjsflags",q9=function(){function e(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=oU,this.populateURLFlags()}return e.prototype.setPlatform=function(t,n){this.platform!=null&&(Ct().getBool("IS_TEST")||Ct().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(t,"."))),this.platformName=t,this.platform=n},e.prototype.registerFlag=function(t,n,r){if(this.flagRegistry[t]={evaluationFn:n,setHook:r},this.urlFlags[t]!=null){var a=this.urlFlags[t];Ct().getBool("IS_TEST")||Ct().getBool("PROD")||console.warn("Setting feature override from URL ".concat(t,": ").concat(a,".")),this.set(t,a)}},e.prototype.getAsync=function(t){return tt(this,void 0,void 0,function(){var n,r;return nt(this,function(a){switch(a.label){case 0:return t in this.flags?[2,this.flags[t]]:(n=this.flags,r=t,[4,this.evaluateFlag(t)]);case 1:return n[r]=a.sent(),[2,this.flags[t]]}})})},e.prototype.get=function(t){if(t in this.flags)return this.flags[t];var n=this.evaluateFlag(t);if(Sm(n))throw new Error("Flag ".concat(t," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[t]=n,this.flags[t]},e.prototype.getNumber=function(t){return this.get(t)},e.prototype.getBool=function(t){return this.get(t)},e.prototype.getString=function(t){return this.get(t)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"features",{get:function(){return this.flags},enumerable:!1,configurable:!0}),e.prototype.set=function(t,n){if(this.flagRegistry[t]==null)throw new Error("Cannot set flag ".concat(t," as it has not been registered."));this.flags[t]=n,this.flagRegistry[t].setHook!=null&&this.flagRegistry[t].setHook(n)},e.prototype.evaluateFlag=function(t){if(this.flagRegistry[t]==null)throw new Error("Cannot evaluate flag '".concat(t,"': no evaluation function found."));return this.flagRegistry[t].evaluationFn()},e.prototype.setFlags=function(t){this.flags=Object.assign({},t)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var t=this;if(!(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")){var n=this.getQueryParams(this.global.location.search);if(f9 in n){var r=n[f9].split(",");r.forEach(function(a){var i=Ie(a.split(":"),2),o=i[0],s=i[1];t.urlFlags[o]=uU(o,s)})}}},e}();function oU(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(n){for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];return sU(t,r[0],r[1]),r.join("=")}),t}function sU(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function uU(e,t){var n=t.toLowerCase();return n==="true"||n==="false"?n==="true":"".concat(+n)===n?+n:t}function Ct(){return _.ENV}_.ENV=null;function lU(e){_.ENV=e}var hg;function H9(){if(hg==null){var e=void 0;if(typeof window<"u")e=window;else if(typeof global<"u")e=global;else if(typeof process<"u")e=process;else if(typeof self<"u")e=self;else throw new Error("Could not find a global object");hg=e}return hg}function cU(){var e=H9();return e._tfGlobals==null&&(e._tfGlobals=new Map),e._tfGlobals}function Kg(e,t){var n=cU();if(n.has(e))return n.get(e);var r=t();return n.set(e,r),n.get(e)}var j9="Abs",K9="Acos",X9="Acosh",Xg="Add",Y9="AddN",J9="All",Z9="Any",Q9="ArgMax",e7="ArgMin",t7="Asin",n7="Asinh",r7="Atan",a7="Atanh",i7="Atan2",o7="AvgPool",pU="AvgPoolGrad",s7="AvgPool3D",dU="AvgPool3DGrad",u7="BatchMatMul",l7="BatchToSpaceND",c7="Bincount",p7="BitwiseAnd",fU="BroadcastTo",d7="BroadcastArgs",Yg="Cast",f7="Ceil",h7="ClipByValue",m7="Complex",v7="ComplexAbs",g7="Concat",y7="Conv2D",b7="Conv2DBackpropFilter",w7="Conv2DBackpropInput",x7="Conv3D",hU="Conv3DBackpropFilterV2",S7="Conv3DBackpropInputV2",k7="Cos",N7="Cosh",T7="Cumprod",E7="Cumsum",I7="CropAndResize",C7="DenseBincount",D7="DepthToSpace",_7="DepthwiseConv2dNative",A7="DepthwiseConv2dNativeBackpropFilter",F7="DepthwiseConv2dNativeBackpropInput",R7="Diag",O7="Dilation2D",mU="Dilation2DBackpropInput",vU="Dilation2DBackpropFilter",Jg="Draw",M7="RealDiv",P7="Einsum",B7="Elu",gU="EluGrad",L7="Erf",z7="Equal",$7="Exp",V7="ExpandDims",W7="Expm1",U7="FFT",G7="Fill",q7="FlipLeftRight",H7="Floor",j7="FloorDiv",K7="FusedBatchNorm",X7="GatherV2",Y7="GatherNd",J7="Greater",Z7="GreaterEqual",Zg="Identity",Q7="IFFT",ex="Imag",tx="IsFinite",nx="IsInf",rx="IsNan",ax="LeakyRelu",ix="Less",ox="LessEqual",sx="LinSpace",ux="Log",lx="Log1p",cx="LogicalAnd",px="LogicalNot",dx="LogicalOr",yU="LogicalXor",bU="LogSoftmax",wU="LowerBound",fx="LRN",xU="LRNGrad",SU="MatrixBandPart",hx="Max",mx="Maximum",vx="MaxPool",kU="MaxPoolGrad",gx="MaxPool3D",NU="MaxPool3DGrad",yx="MaxPoolWithArgmax",bx="Mean",wx="Min",xx="Minimum",Sx="MirrorPad",kx="Mod",Nx="Multinomial",Tx="Multiply",Ex="Neg",Ix="NotEqual",Cx="NonMaxSuppressionV3",Dx="NonMaxSuppressionV4",_x="NonMaxSuppressionV5",Ax="OnesLike",Fx="OneHot",Rx="Pack",Ox="PadV2",TU="Pool",Mx="Pow",Px="Prelu",Bx="Prod",Lx="RaggedGather",zx="RaggedRange",$x="RaggedTensorToTensor",Vx="Range",Wx="Real",Ux="Reciprocal",Gx="Relu",qx="Reshape",Hx="ResizeNearestNeighbor",EU="ResizeNearestNeighborGrad",jx="ResizeBilinear",IU="ResizeBilinearGrad",Kx="Relu6",Xx="Reverse",Yx="Round",Jx="Rsqrt",Zx="ScatterNd",Qx="TensorScatterUpdate",eS="SearchSorted",tS="Select",nS="Selu",rS="Slice",aS="Sin",iS="Sinh",oS="Sign",sS="Sigmoid",uS="Softplus",lS="Sqrt",cS="Sum",pS="SpaceToBatchND",dS="SplitV",fS="Softmax",hS="SparseFillEmptyRows",mS="SparseReshape",vS="SparseSegmentMean",gS="SparseSegmentSum",yS="SparseToDense",bS="SquaredDifference",CU="Square",wS="StaticRegexReplace",xS="StridedSlice",SS="StringNGrams",kS="StringSplit",NS="StringToHashBucketFast",TS="Sub",ES="Tan",IS="Tanh",Qg="Tile",CS="TopK",DS="Transform",am="Transpose",_S="Unique",AS="Unpack",FS="UnsortedSegmentSum",DU="UpperBound",RS="ZerosLike",OS="Step",xg="FromPixels",MS="RotateWithOffset",Sg="_FusedMatMul",kg="FusedConv2D",Ng="FusedDepthwiseConv2D";function hu(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Ct().getBool("IS_TEST")||Ct().getBool("PROD")||console.warn.apply(console,Mt([],Ie(e),!1))}function _U(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Ct().getBool("IS_TEST")||Ct().getBool("PROD")||console.log.apply(console,Mt([],Ie(e),!1))}var np=Kg("kernelRegistry",function(){return new Map}),sf=Kg("gradRegistry",function(){return new Map});function uf(e,t){var n=ey(e,t);return np.get(n)}function Tg(e){return sf.get(e)}function pm(e){for(var t=np.entries(),n=[];;){var r=t.next(),a=r.done,i=r.value;if(a)break;var o=Ie(i,2),s=o[0],u=o[1],l=Ie(s.split("_"),1),c=l[0];c===e&&n.push(u)}return n}function PS(e){var t=e.kernelName,n=e.backendName,r=ey(t,n);np.has(r)&&hu("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),np.set(r,e)}function AU(e){var t=e.kernelName;sf.has(t)&&Ct().getBool("DEBUG")&&hu("Overriding the gradient for '".concat(t,"'")),sf.set(t,e)}function FU(e,t){var n=ey(e,t);if(!np.has(n))throw new Error("The kernel '".concat(e,"' for backend ")+"'".concat(t,"' is not registered"));np.delete(n)}function RU(e){if(!sf.has(e))throw new Error("The gradient '".concat(e,"' for backend is not registered"));sf.delete(e)}function OU(e,t){var n=pm(e);n.forEach(function(r){var a=Object.assign({},r,{backendName:t});PS(a)})}function ey(e,t){return"".concat(t,"_").concat(e)}function BS(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}var Nl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function MU(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var LS=gn,Pi=null;try{Pi=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function gn(e,t,n){this.low=e|0,this.high=t|0,this.unsigned=!!n}gn.prototype.__isLong__;Object.defineProperty(gn.prototype,"__isLong__",{value:!0});function Va(e){return(e&&e.__isLong__)===!0}gn.isLong=Va;var h9={},m9={};function Tl(e,t){var n,r,a;return t?(e>>>=0,(a=0<=e&&e<256)&&(r=m9[e],r)?r:(n=yn(e,(e|0)<0?-1:0,!0),a&&(m9[e]=n),n)):(e|=0,(a=-128<=e&&e<128)&&(r=h9[e],r)?r:(n=yn(e,e<0?-1:0,!1),a&&(h9[e]=n),n))}gn.fromInt=Tl;function Bi(e,t){if(isNaN(e))return t?fl:Li;if(t){if(e<0)return fl;if(e>=zS)return WS}else{if(e<=-g9)return La;if(e+1>=g9)return VS}return e<0?Bi(-e,t).neg():yn(e%rp|0,e/rp|0,t)}gn.fromNumber=Bi;function yn(e,t,n){return new gn(e,t,n)}gn.fromBits=yn;var dm=Math.pow;function ty(e,t,n){if(e.length===0)throw Error("empty string");if(e==="NaN"||e==="Infinity"||e==="+Infinity"||e==="-Infinity")return Li;if(typeof t=="number"?(n=t,t=!1):t=!!t,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return ty(e.substring(1),t,n).neg();for(var a=Bi(dm(n,8)),i=Li,o=0;o<e.length;o+=8){var s=Math.min(8,e.length-o),u=parseInt(e.substring(o,o+s),n);if(s<8){var l=Bi(dm(n,s));i=i.mul(l).add(Bi(u))}else i=i.mul(a),i=i.add(Bi(u))}return i.unsigned=t,i}gn.fromString=ty;function bo(e,t){return typeof e=="number"?Bi(e,t):typeof e=="string"?ty(e,t):yn(e.low,e.high,typeof t=="boolean"?t:e.unsigned)}gn.fromValue=bo;var v9=65536,PU=1<<24,rp=v9*v9,zS=rp*rp,g9=zS/2,y9=Tl(PU),Li=Tl(0);gn.ZERO=Li;var fl=Tl(0,!0);gn.UZERO=fl;var Kc=Tl(1);gn.ONE=Kc;var $S=Tl(1,!0);gn.UONE=$S;var Eg=Tl(-1);gn.NEG_ONE=Eg;var VS=yn(-1,2147483647,!1);gn.MAX_VALUE=VS;var WS=yn(-1,-1,!0);gn.MAX_UNSIGNED_VALUE=WS;var La=yn(0,-2147483648,!1);gn.MIN_VALUE=La;var Ve=gn.prototype;Ve.toInt=function(){return this.unsigned?this.low>>>0:this.low};Ve.toNumber=function(){return this.unsigned?(this.high>>>0)*rp+(this.low>>>0):this.high*rp+(this.low>>>0)};Ve.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(La)){var n=Bi(t),r=this.div(n),a=r.mul(n).sub(this);return r.toString(t)+a.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var i=Bi(dm(t,6),this.unsigned),o=this,s="";;){var u=o.div(i),l=o.sub(u.mul(i)).toInt()>>>0,c=l.toString(t);if(o=u,o.isZero())return c+s;for(;c.length<6;)c="0"+c;s=""+c+s}};Ve.getHighBits=function(){return this.high};Ve.getHighBitsUnsigned=function(){return this.high>>>0};Ve.getLowBits=function(){return this.low};Ve.getLowBitsUnsigned=function(){return this.low>>>0};Ve.getNumBitsAbs=function(){if(this.isNegative())return this.eq(La)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,n=31;n>0&&!(t&1<<n);n--);return this.high!=0?n+33:n+1};Ve.isZero=function(){return this.high===0&&this.low===0};Ve.eqz=Ve.isZero;Ve.isNegative=function(){return!this.unsigned&&this.high<0};Ve.isPositive=function(){return this.unsigned||this.high>=0};Ve.isOdd=function(){return(this.low&1)===1};Ve.isEven=function(){return(this.low&1)===0};Ve.equals=function(t){return Va(t)||(t=bo(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low};Ve.eq=Ve.equals;Ve.notEquals=function(t){return!this.eq(t)};Ve.neq=Ve.notEquals;Ve.ne=Ve.notEquals;Ve.lessThan=function(t){return this.comp(t)<0};Ve.lt=Ve.lessThan;Ve.lessThanOrEqual=function(t){return this.comp(t)<=0};Ve.lte=Ve.lessThanOrEqual;Ve.le=Ve.lessThanOrEqual;Ve.greaterThan=function(t){return this.comp(t)>0};Ve.gt=Ve.greaterThan;Ve.greaterThanOrEqual=function(t){return this.comp(t)>=0};Ve.gte=Ve.greaterThanOrEqual;Ve.ge=Ve.greaterThanOrEqual;Ve.compare=function(t){if(Va(t)||(t=bo(t)),this.eq(t))return 0;var n=this.isNegative(),r=t.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1};Ve.comp=Ve.compare;Ve.negate=function(){return!this.unsigned&&this.eq(La)?La:this.not().add(Kc)};Ve.neg=Ve.negate;Ve.add=function(t){Va(t)||(t=bo(t));var n=this.high>>>16,r=this.high&65535,a=this.low>>>16,i=this.low&65535,o=t.high>>>16,s=t.high&65535,u=t.low>>>16,l=t.low&65535,c=0,p=0,d=0,f=0;return f+=i+l,d+=f>>>16,f&=65535,d+=a+u,p+=d>>>16,d&=65535,p+=r+s,c+=p>>>16,p&=65535,c+=n+o,c&=65535,yn(d<<16|f,c<<16|p,this.unsigned)};Ve.subtract=function(t){return Va(t)||(t=bo(t)),this.add(t.neg())};Ve.sub=Ve.subtract;Ve.multiply=function(t){if(this.isZero())return Li;if(Va(t)||(t=bo(t)),Pi){var n=Pi.mul(this.low,this.high,t.low,t.high);return yn(n,Pi.get_high(),this.unsigned)}if(t.isZero())return Li;if(this.eq(La))return t.isOdd()?La:Li;if(t.eq(La))return this.isOdd()?La:Li;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(y9)&&t.lt(y9))return Bi(this.toNumber()*t.toNumber(),this.unsigned);var r=this.high>>>16,a=this.high&65535,i=this.low>>>16,o=this.low&65535,s=t.high>>>16,u=t.high&65535,l=t.low>>>16,c=t.low&65535,p=0,d=0,f=0,h=0;return h+=o*c,f+=h>>>16,h&=65535,f+=i*c,d+=f>>>16,f&=65535,f+=o*l,d+=f>>>16,f&=65535,d+=a*c,p+=d>>>16,d&=65535,d+=i*l,p+=d>>>16,d&=65535,d+=o*u,p+=d>>>16,d&=65535,p+=r*c+a*l+i*u+o*s,p&=65535,yn(f<<16|h,p<<16|d,this.unsigned)};Ve.mul=Ve.multiply;Ve.divide=function(t){if(Va(t)||(t=bo(t)),t.isZero())throw Error("division by zero");if(Pi){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var n=(this.unsigned?Pi.div_u:Pi.div_s)(this.low,this.high,t.low,t.high);return yn(n,Pi.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?fl:Li;var r,a,i;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return fl;if(t.gt(this.shru(1)))return $S;i=fl}else{if(this.eq(La)){if(t.eq(Kc)||t.eq(Eg))return La;if(t.eq(La))return Kc;var o=this.shr(1);return r=o.div(t).shl(1),r.eq(Li)?t.isNegative()?Kc:Eg:(a=this.sub(t.mul(r)),i=r.add(a.div(t)),i)}else if(t.eq(La))return this.unsigned?fl:Li;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();i=Li}for(a=this;a.gte(t);){r=Math.max(1,Math.floor(a.toNumber()/t.toNumber()));for(var s=Math.ceil(Math.log(r)/Math.LN2),u=s<=48?1:dm(2,s-48),l=Bi(r),c=l.mul(t);c.isNegative()||c.gt(a);)r-=u,l=Bi(r,this.unsigned),c=l.mul(t);l.isZero()&&(l=Kc),i=i.add(l),a=a.sub(c)}return i};Ve.div=Ve.divide;Ve.modulo=function(t){if(Va(t)||(t=bo(t)),Pi){var n=(this.unsigned?Pi.rem_u:Pi.rem_s)(this.low,this.high,t.low,t.high);return yn(n,Pi.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))};Ve.mod=Ve.modulo;Ve.rem=Ve.modulo;Ve.not=function(){return yn(~this.low,~this.high,this.unsigned)};Ve.and=function(t){return Va(t)||(t=bo(t)),yn(this.low&t.low,this.high&t.high,this.unsigned)};Ve.or=function(t){return Va(t)||(t=bo(t)),yn(this.low|t.low,this.high|t.high,this.unsigned)};Ve.xor=function(t){return Va(t)||(t=bo(t)),yn(this.low^t.low,this.high^t.high,this.unsigned)};Ve.shiftLeft=function(t){return Va(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?yn(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):yn(0,this.low<<t-32,this.unsigned)};Ve.shl=Ve.shiftLeft;Ve.shiftRight=function(t){return Va(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?yn(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):yn(this.high>>t-32,this.high>=0?0:-1,this.unsigned)};Ve.shr=Ve.shiftRight;Ve.shiftRightUnsigned=function(t){if(Va(t)&&(t=t.toInt()),t&=63,t===0)return this;var n=this.high;if(t<32){var r=this.low;return yn(r>>>t|n<<32-t,n>>>t,this.unsigned)}else return t===32?yn(n,0,this.unsigned):yn(n>>>t-32,0,this.unsigned)};Ve.shru=Ve.shiftRightUnsigned;Ve.shr_u=Ve.shiftRightUnsigned;Ve.toSigned=function(){return this.unsigned?yn(this.low,this.high,!1):this};Ve.toUnsigned=function(){return this.unsigned?this:yn(this.low,this.high,!0)};Ve.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()};Ve.toBytesLE=function(){var t=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]};Ve.toBytesBE=function(){var t=this.high,n=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};gn.fromBytes=function(t,n,r){return r?gn.fromBytesLE(t,n):gn.fromBytesBE(t,n)};gn.fromBytesLE=function(t,n){return new gn(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,n)};gn.fromBytesBE=function(t,n){return new gn(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],n)};var US=MU(LS),BU=$W({__proto__:null,default:US},[LS]),dl=US||BU;function kf(e){return dl.fromString(e,!0,16)}var GS=kf("c3a5c85c97cb3127"),pl=kf("b492b66fbe98f273"),ca=kf("9ae16a3b2f90404f");function Ig(e){return e.xor(e.shru(47))}function qS(e,t,n){var r=e.slice(t,t+n);return dl.fromBytes(Array.from(r),!0,!0)}function un(e,t){return qS(e,t,8)}function b9(e,t){return qS(e,t,4)}function Dr(e,t){return t===0?e:e.shru(t).or(e.shl(64-t))}function gu(e,t,n){n===void 0&&(n=kf("9ddfea08eb382d69"));var r=e.xor(t).mul(n);r=r.xor(r.shru(47));var a=t.xor(r).mul(n);return a=a.xor(a.shru(47)),a=a.mul(n),a}function LU(e,t,n,r,a,i){a=a.add(e),i=Dr(i.add(a).add(r),21);var o=a;return a=a.add(t),a=a.add(n),i=i.add(Dr(a,44)),[a.add(r),i.add(o)]}function nm(e,t,n,r){return LU(un(e,t),un(e,t+8),un(e,t+16),un(e,t+24),n,r)}function zU(e,t){if(t===void 0&&(t=e.length),t>=8){var n=ca.add(t*2),r=un(e,0).add(ca),a=un(e,t-8),i=Dr(a,37).mul(n).add(r),o=Dr(r,25).add(a).mul(n);return gu(i,o,n)}if(t>=4){var n=ca.add(t*2),r=b9(e,0);return gu(r.shl(3).add(t),b9(e,t-4),n)}if(t>0){var r=e[0],a=e[t>>1],i=e[t-1],s=r+(a<<8),u=t+(i<<2);return Ig(ca.mul(s).xor(GS.mul(u))).mul(ca)}return ca}function $U(e,t){t===void 0&&(t=e.length);var n=ca.add(t*2),r=un(e,0).mul(pl),a=un(e,8),i=un(e,t-8).mul(n),o=un(e,t-16).mul(ca);return gu(Dr(r.add(a),43).add(Dr(i,30)).add(o),r.add(Dr(a.add(ca),18)).add(i),n)}function VU(e,t){t===void 0&&(t=e.length);var n=ca.add(t*2),r=un(e,0).mul(ca),a=un(e,8),i=un(e,t-8).mul(n),o=un(e,t-16).mul(ca),s=Dr(r.add(a),43).add(Dr(i,30)).add(o),u=gu(s,r.add(Dr(a.add(ca),18)).add(i),n),l=un(e,16).mul(n),c=un(e,24),p=s.add(un(e,t-32)).mul(n),d=u.add(un(e,t-24)).mul(n);return gu(Dr(l.add(c),43).add(Dr(p,30)).add(d),l.add(Dr(c.add(r),18)).add(p),n)}function WU(e,t){var n,r;t===void 0&&(t=e.length);var a=dl.fromNumber(81,!0);if(t<=32)return t<=16?zU(e,t):$U(e,t);if(t<=64)return VU(e,t);var i=a,o=a.mul(pl).add(113),s=Ig(o.mul(ca).add(113)).mul(ca),u=[dl.UZERO,dl.UZERO],l=[dl.UZERO,dl.UZERO];i=i.mul(ca).add(un(e,0));var c=0,p=(t-1>>6)*64,d=p+(t-1&63)-63;do i=Dr(i.add(o).add(u[0]).add(un(e,c+8)),37).mul(pl),o=Dr(o.add(u[1]).add(un(e,c+48)),42).mul(pl),i=i.xor(l[1]),o=o.add(u[0]).add(un(e,c+40)),s=Dr(s.add(l[0]),33).mul(pl),u=nm(e,c,u[1].mul(pl),i.add(l[0])),l=nm(e,c+32,s.add(l[1]),o.add(un(e,c+16))),n=Ie([i,s],2),s=n[0],i=n[1],c+=64;while(c!==p);var f=pl.add(s.and(255).shl(1));return c=d,l[0]=l[0].add(t-1&63),u[0]=u[0].add(l[0]),l[0]=l[0].add(u[0]),i=Dr(i.add(o).add(u[0]).add(un(e,c+8)),37).mul(f),o=Dr(o.add(u[1]).add(un(e,c+48)),42).mul(f),i=i.xor(l[1].mul(9)),o=o.add(u[0].mul(9).add(un(e,c+40))),s=Dr(s.add(l[0]),33).mul(f),u=nm(e,c,u[1].mul(f),i.add(l[0])),l=nm(e,c+32,s.add(l[1]),o.add(un(e,c+16))),r=Ie([i,s],2),s=r[0],i=r[1],gu(gu(u[0],l[0],f).add(Ig(o).mul(GS)).add(s),gu(u[1],l[1],f).add(i),f)}function UU(e,t){return t==="string"?Nf(e):km([e],t)}function GU(e,t){return e instanceof Float32Array&&t==="float32"||e instanceof Int32Array&&t==="int32"||e instanceof Uint8Array&&t==="bool"}function km(e,t){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=wu(e)),Ct().getBool("DEBUG")&&z9(e,t),GU(e,t))return e;if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool"){for(var n=new Uint8Array(e.length),r=0;r<n.length;++r)Math.round(e[r])!==0&&(n[r]=1);return n}else throw new Error("Unknown data type ".concat(t))}function lf(){return Ct().platform.now()}function qU(e,t){return Ct().platform.fetch(e,t)}function Nf(e,t){return t===void 0&&(t="utf-8"),t=t||"utf-8",Ct().platform.encode(e,t)}function fm(e,t){return t===void 0&&(t="utf-8"),t=t||"utf-8",Ct().platform.decode(e,t)}function _r(e){return Ct().platform.isTypedArray!=null?Ct().platform.isTypedArray(e):BS(e)}function wu(e,t,n){var r,a;if(t===void 0&&(t=[]),n===void 0&&(n=!1),t==null&&(t=[]),typeof e=="boolean"||typeof e=="number"||typeof e=="string"||Sm(e)||e==null||_r(e)&&n)t.push(e);else if(Array.isArray(e)||_r(e))for(var i=0;i<e.length;++i)wu(e[i],t,n);else{var o=-1;try{for(var s=Ur(Object.keys(e)),u=s.next();!u.done;u=s.next()){var l=u.value;/^([1-9]+[0-9]*|0)$/.test(l)&&(o=Math.max(o,Number(l)))}}catch(c){r={error:c}}finally{try{u&&!u.done&&(a=s.return)&&a.call(s)}finally{if(r)throw r.error}}for(var i=0;i<=o;i++)wu(e[i],t,n)}return t}var HU={__proto__:null,arraysEqual:Os,arraysEqualWithNull:P9,assert:V,assertNonNegativeIntegerDimensions:$a,assertNonNull:kl,assertShapesMatch:pa,bytesFromStringArray:V9,bytesPerElement:lm,checkConversionForErrors:z9,clamp:of,computeStrides:ip,convertBackendValuesAndArrayBuffer:nU,createScalarValue:UU,createShuffledIndices:ZW,decodeString:fm,distSquared:KW,encodeString:Nf,fetch:qU,fingerPrint64:WU,flatten:wu,getArrayFromDType:Hg,getTypedArrayFromDType:L9,hasEncodingLoss:tU,hexToLong:kf,indexToLoc:iU,inferDtype:Sf,inferFromImplicitShape:eU,isBoolean:W9,isFunction:bu,isInt:tp,isNumber:U9,isPromise:Sm,isScalarShape:XW,isString:mu,isTypedArray:_r,isValidDtype:$9,locToIndex:aU,makeOnesTypedArray:jg,makeZerosNestedTypedArray:rU,makeZerosTypedArray:xm,nearestDivisor:cm,nearestLargerEven:qW,now:lf,parseAxisParam:xf,randUniform:jW,repeatedTry:QW,rightPad:nf,shuffle:M9,shuffleCombo:GW,sizeFromShape:Qt,sizeToSquarishShape:JW,squeezeShape:B9,sum:HW,swap:um,tanh:YW,toNestedArray:Xc,toTypedArray:km},jU=function(){function e(t,n){this.backendTimer=t,this.logger=n,n==null&&(this.logger=new XU)}return e.prototype.profileKernel=function(t,n,r){var a,i,o,s=function(){o=r()},u,l=lf();if(this.backendTimer.timerAvailable())u=this.backendTimer.time(s);else{s();try{for(var c=Ur(o),p=c.next();!p.done;p=c.next()){var d=p.value;d.dataSync()}}catch(v){a={error:v}}finally{try{p&&!p.done&&(i=c.return)&&i.call(c)}finally{if(a)throw a.error}}u=Promise.resolve({kernelMs:lf()-l})}if(Ct().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var f=function(v){var g=o[v];g.data().then(function(y){KU(y,g.dtype,t)})},h=0;h<o.length;h++)f(h);var m={kernelName:t,outputs:o,inputs:n,timeMs:u.then(function(v){return v.kernelMs}),extraInfo:u.then(function(v){return v.getExtraProfileInfo!=null?v.getExtraProfileInfo():""})};return m},e.prototype.logKernelProfile=function(t){var n=this,r=t.kernelName,a=t.outputs,i=t.timeMs,o=t.inputs,s=t.extraInfo;a.forEach(function(u){Promise.all([u.data(),i,s]).then(function(l){n.logger.logKernelProfile(r,u,l[0],l[1],o,l[2])})})},e}();function KU(e,t,n){if(t!=="float32")return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}return!1}var XU=function(){function e(){}return e.prototype.logKernelProfile=function(t,n,r,a,i,o){var s=typeof a=="number"?nf("".concat(a,"ms"),9):a.error,u=nf(t,25),l=n.rank,c=n.size,p=nf(n.shape.toString(),14),d="";for(var f in i){var h=i[f];if(h!=null){var m=h.shape||n.shape,v=m.length;d+="".concat(f,": ").concat(v,"D ").concat(v>0?m:""," ")}}console.log("%c".concat(u,"	%c").concat(s,"	%c").concat(l,"D ").concat(p,"	%c").concat(c,"	%c").concat(d,"	%c").concat(o),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},e}();function YU(e,t,n){for(var r={},a={},i=0;i<t.length;i++)r[t[i].id]=!0;for(var i=0;i<e.length;i++){var o=e[i],s=o.inputs;for(var u in s){for(var l=s[u],c=!1,p=0;p<t.length;p++)if(r[l.id]){o.outputs.forEach(function(w){return r[w.id]=!0}),c=!0,a[o.id]=!0;break}if(c)break}}var d={};d[n.id]=!0;for(var f={},i=e.length-1;i>=0;i--)for(var o=e[i],s=o.inputs,p=0;p<o.outputs.length;p++)if(d[o.outputs[p].id]){for(var u in s)d[s[u].id]=!0,f[o.id]=!0;break}for(var h=[],i=0;i<e.length;i++){var o=e[i];if(a[o.id]&&f[o.id]){var m={};for(var u in o.inputs){var v=o.inputs[u];r[v.id]&&(m[u]=v)}var g=Object.assign({},o);g.inputs=m,g.outputs=o.outputs,h.push(g)}}return h}function JU(e,t,n,r){for(var a=function(o){var s=t[o],u=[];if(s.outputs.forEach(function(d){var f=e[d.id];f!=null?u.push(f):u.push(null)}),s.gradient==null)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(s.kernelName,"."));var l=s.gradient(u),c=function(d){if(!(d in l))throw new Error("Cannot backprop through input ".concat(d,". ")+"Available gradients found: ".concat(Object.keys(l),"."));var f=n(function(){return l[d]()});if(f.dtype!=="float32")throw new Error("Error in gradient for op ".concat(s.kernelName,". The gradient of input ")+"".concat(d," must have 'float32' dtype, but has '").concat(f.dtype,"'"));var h=s.inputs[d];if(!Os(f.shape,h.shape))throw new Error("Error in gradient for op ".concat(s.kernelName,". The gradient of input ")+"'".concat(d,"' has shape '").concat(f.shape,"', which does not match ")+"the shape of the input '".concat(h.shape,"'"));if(e[h.id]==null)e[h.id]=f;else{var m=e[h.id];e[h.id]=r(m,f),m.dispose()}};for(var p in s.inputs)c(p)},i=t.length-1;i>=0;i--)a(i)}var w9=20,Qd=3,mg=7;function ZU(e,t,n,r){var a=ip(t),i=QU(e,t,n,a),o=t.length,s=im(e,t,n,a,i),u=["Tensor"];return r&&(u.push("  dtype: ".concat(n)),u.push("  rank: ".concat(o)),u.push("  shape: [".concat(t,"]")),u.push("  values:")),u.push(s.map(function(l){return"    "+l}).join(`
`)),u.join(`
`)}function QU(e,t,n,r){var a=Qt(t),i=r[r.length-1],o=new Array(i).fill(0),s=t.length,u=n==="complex64"?tf(e):e;if(s>1)for(var l=0;l<a/i;l++)for(var c=l*i,p=0;p<i;p++)o[p]=Math.max(o[p],ef(u[c+p],0,n).length);return o}function ef(e,t,n){var r;return Array.isArray(e)?r="".concat(parseFloat(e[0].toFixed(mg))," + ")+"".concat(parseFloat(e[1].toFixed(mg)),"j"):mu(e)?r="'".concat(e,"'"):n==="bool"?r=HS(e):r=parseFloat(e.toFixed(mg)).toString(),nf(r,t)}function HS(e){return e===0?"false":"true"}function im(e,t,n,r,a,i){i===void 0&&(i=!0);var o=n==="complex64"?2:1,s=t[0],u=t.length;if(u===0){if(n==="complex64"){var l=tf(e);return[ef(l[0],0,n)]}return n==="bool"?[HS(e[0])]:[e[0].toString()]}if(u===1){if(s>w9){var c=Qd*o,p=Array.from(e.slice(0,c)),d=Array.from(e.slice((s-Qd)*o,s*o));return n==="complex64"&&(p=tf(p),d=tf(d)),["["+p.map(function(N,E){return ef(N,a[E],n)}).join(", ")+", ..., "+d.map(function(N,E){return ef(N,a[s-Qd+E],n)}).join(", ")+"]"]}var f=n==="complex64"?tf(e):Array.from(e);return["["+f.map(function(N,E){return ef(N,a[E],n)}).join(", ")+"]"]}var h=t.slice(1),m=r.slice(1),v=r[0]*o,g=[];if(s>w9){for(var y=0;y<Qd;y++){var w=y*v,b=w+v;g.push.apply(g,Mt([],Ie(im(e.slice(w,b),h,n,m,a,!1)),!1))}g.push("...");for(var y=s-Qd;y<s;y++){var w=y*v,b=w+v;g.push.apply(g,Mt([],Ie(im(e.slice(w,b),h,n,m,a,y===s-1)),!1))}}else for(var y=0;y<s;y++){var w=y*v,b=w+v;g.push.apply(g,Mt([],Ie(im(e.slice(w,b),h,n,m,a,y===s-1)),!1))}var x=u===2?",":"";g[0]="["+(s>0?g[0]+x:"");for(var y=1;y<g.length-1;y++)g[y]=" "+g[y]+x;for(var k=`,
`,y=2;y<u;y++)k+=`
`;return g[g.length-1]=" "+g[g.length-1]+"]"+(i?"":k),g}function tf(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var hm=function(){function e(t,n,r){var a=this;if(this.dtype=n,this.shape=t.slice(),this.size=Qt(t),r!=null){var i=r.length;V(i===this.size,function(){return"Length of values '".concat(i,"' does not match the size ")+"inferred by the shape '".concat(a.size,"'.")})}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Hg(n,this.size),this.strides=ip(t)}return e.prototype.set=function(t){for(var n=this,r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];r.length===0&&(r=[0]),V(r.length===this.rank,function(){return"The number of provided coordinates (".concat(r.length,") must ")+"match the rank (".concat(n.rank,")")});var i=this.locToIndex(r);this.values[i]=t},e.prototype.get=function(){for(var t,n,r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];r.length===0&&(r=[0]);var i=0;try{for(var o=Ur(r),s=o.next();!s.done;s=o.next()){var u=s.value;if(u<0||u>=this.shape[i]){var l="Requested out of range element at ".concat(r,". ")+"  Buffer shape=".concat(this.shape);throw new Error(l)}i++}}catch(d){t={error:d}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}for(var c=r[r.length-1],p=0;p<r.length-1;++p)c+=this.strides[p]*r[p];return this.values[c]},e.prototype.locToIndex=function(t){if(this.rank===0)return 0;if(this.rank===1)return t[0];for(var n=t[t.length-1],r=0;r<t.length-1;++r)n+=this.strides[r]*t[r];return n},e.prototype.indexToLoc=function(t){if(this.rank===0)return[];if(this.rank===1)return[t];for(var n=new Array(this.shape.length),r=0;r<n.length-1;++r)n[r]=Math.floor(t/this.strides[r]),t-=n[r]*this.strides[r];return n[n.length-1]=t,n},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!1,configurable:!0}),e.prototype.toTensor=function(){return go().makeTensor(this.values,this.shape,this.dtype)},e}(),go=null,qc=null;function eG(e){go=e}function tG(e){qc=e}var gr=function(){function e(t,n,r,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=Qt(t),this.strides=ip(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!1,configurable:!0}),e.prototype.buffer=function(){return tt(this,void 0,void 0,function(){var t;return nt(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return t=n.sent(),[2,qc.buffer(this.shape,this.dtype,t)]}})})},e.prototype.bufferSync=function(){return qc.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return tt(this,void 0,void 0,function(){var t;return nt(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return t=n.sent(),[2,Xc(this.shape,t,this.dtype==="complex64")]}})})},e.prototype.arraySync=function(){return Xc(this.shape,this.dataSync(),this.dtype==="complex64")},e.prototype.data=function(){return tt(this,void 0,void 0,function(){var t,n;return nt(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),t=go().read(this.dataId),this.dtype!=="string"?[3,2]:[4,t];case 1:n=r.sent();try{return[2,n.map(function(a){return fm(a)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,t]}})})},e.prototype.dataToGPU=function(t){return this.throwIfDisposed(),go().readToGPU(this.dataId,t)},e.prototype.dataSync=function(){this.throwIfDisposed();var t=go().readSync(this.dataId);if(this.dtype==="string")try{return t.map(function(n){return fm(n)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t},e.prototype.bytes=function(){return tt(this,void 0,void 0,function(){var t;return nt(this,function(n){switch(n.label){case 0:return this.throwIfDisposed(),[4,go().read(this.dataId)];case 1:return t=n.sent(),this.dtype==="string"?[2,t]:[2,new Uint8Array(t.buffer)]}})})},e.prototype.dispose=function(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),go().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!1,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.print=function(t){return t===void 0&&(t=!1),qc.print(this,t)},e.prototype.clone=function(){return this.throwIfDisposed(),qc.clone(this)},e.prototype.toString=function(t){t===void 0&&(t=!1);var n=this.dataSync();return ZU(n,this.shape,this.dtype,t)},e.prototype.cast=function(t){return this.throwIfDisposed(),qc.cast(this,t)},e.prototype.variable=function(t,n,r){return t===void 0&&(t=!0),this.throwIfDisposed(),go().makeVariable(this,t,n,r)},e}();Object.defineProperty(gr,Symbol.hasInstance,{value:function(e){return!!e&&e.data!=null&&e.dataSync!=null&&e.throwIfDisposed!=null}});function jS(){return Kg("Tensor",function(){return gr})}jS();var cf=function(e){Rs(t,e);function t(n,r,a,i){var o=e.call(this,n.shape,n.dtype,n.dataId,i)||this;return o.trainable=r,o.name=a,o}return t.prototype.assign=function(n){if(n.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(n.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!Os(n.shape,this.shape))throw new Error("shape of the new value (".concat(n.shape,") and ")+"previous value (".concat(this.shape,") must match"));go().disposeTensor(this),this.dataId=n.dataId,go().incRef(this,null)},t.prototype.dispose=function(){go().disposeVariable(this),this.isDisposedInternal=!0},t}(gr);Object.defineProperty(cf,Symbol.hasInstance,{value:function(e){return e instanceof gr&&e.assign!=null&&e.assign instanceof Function}});_.Rank=void 0;(function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"})(_.Rank||(_.Rank={}));var Cg;(function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"})(Cg||(Cg={}));var Dg;(function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"})(Dg||(Dg={}));var _g;(function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"})(_g||(_g={}));var Ag;(function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"})(Ag||(Ag={}));var nG={float32:_g,int32:Cg,bool:Dg,complex64:Ag};function Nm(e,t){if(e==="string"||t==="string"){if(e==="string"&&t==="string")return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return nG[e][t]}function rG(e){return Nm(e,"int32")}function KS(e){return e!=null&&typeof e=="object"&&"texture"in e&&e.texture instanceof WebGLTexture}function XS(e){return typeof GPUBuffer<"u"&&e!=null&&typeof e=="object"&&"buffer"in e&&e.buffer instanceof GPUBuffer}function Gn(e,t){if(e.dtype===t.dtype)return[e,t];var n=Nm(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function YS(e,t){V(e.dtype===t.dtype,function(){return"The dtypes of the first(".concat(e.dtype,") and")+" second(".concat(t.dtype,") input must match")})}function aG(e,t){return t.some(function(n){return n.id===e.id})}function ny(e){var t=[],n=new Set;return JS(e,t,n),t}function JS(e,t,n){if(e!=null){if(e instanceof gr){t.push(e);return}if(iG(e)){var r=e;for(var a in r){var i=r[a];n.has(i)||(n.add(i),JS(i,t,n))}}}}function iG(e){return Array.isArray(e)||typeof e=="object"}var oG={__proto__:null,assertTypesMatch:YS,getTensorsInContainer:ny,isTensorInList:aG,makeTypesMatch:Gn};function vg(e){return e.kernelName!=null}var x9=function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(function(t){return t.name})))}}}return e.prototype.dispose=function(){for(var t in this.registeredVariables)this.registeredVariables[t].dispose()},e}(),ry=function(){function e(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new x9}return e.prototype.ready=function(){return tt(this,void 0,void 0,function(){var t,n,r,a;return nt(this,function(i){switch(i.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];t=this.getSortedBackends(),n=0,i.label=1;case 1:return n<t.length?(r=t[n],[4,this.initializeBackend(r).success]):[3,5];case 2:return a=i.sent(),a?[4,this.setBackend(r)]:[3,4];case 3:return i.sent(),[2];case 4:return n++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(e.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var t=this.initializeBackendsAndReturnBest(),n=t.name,r=t.asyncInit;if(r)throw new Error("The highest priority backend '".concat(n,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(n)}return this.backendInstance},enumerable:!1,configurable:!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(t){if(!(t in this.registry))if(t in this.registryFactory){var n=this.initializeBackend(t).asyncInit;if(n)return null}else return null;return this.registry[t]},e.prototype.findBackendFactory=function(t){return t in this.registryFactory?this.registryFactory[t].factory:null},e.prototype.registerBackend=function(t,n,r){return r===void 0&&(r=1),t in this.registryFactory?(hu("".concat(t," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[t]={factory:n,priority:r},!0)},e.prototype.setBackend=function(t){return tt(this,void 0,void 0,function(){var n,r,a,i,o;return nt(this,function(s){switch(s.label){case 0:if(this.registryFactory[t]==null)throw new Error("Backend name '".concat(t,"' not found in registry"));return this.backendName=t,this.registry[t]!=null?[3,4]:(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,a=n.asyncInit,a?[4,r]:[3,2]);case 1:return o=s.sent(),[3,3];case 2:o=r,s.label=3;case 3:if(i=o,!i)return[2,!1];s.label=4;case 4:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new jU(this.backendInstance),[2,!0]}})})},e.prototype.setupRegisteredKernels=function(){var t=this,n=pm(this.backendName);n.forEach(function(r){r.setupFunc!=null&&r.setupFunc(t.backendInstance)})},e.prototype.disposeRegisteredKernels=function(t){var n=this,r=pm(t);r.forEach(function(a){a.disposeFunc!=null&&a.disposeFunc(n.registry[t])})},e.prototype.initializeBackend=function(t){var n=this,r=this.registryFactory[t];if(r==null)throw new Error("Cannot initialize backend ".concat(t,", no registration found."));try{var a=r.factory();if(a&&!(a instanceof O9)&&typeof a.then=="function"){var i=++this.pendingBackendInitId,o=a.then(function(s){return i<n.pendingBackendInitId?!1:(n.registry[t]=s,n.pendingBackendInit=null,!0)}).catch(function(s){return i<n.pendingBackendInitId||(n.pendingBackendInit=null,hu("Initialization of backend ".concat(t," failed")),hu(s.stack||s.message)),!1});return this.pendingBackendInit=o,{success:o,asyncInit:!0}}else return this.registry[t]=a,{success:!0,asyncInit:!1}}catch(s){return hu("Initialization of backend ".concat(t," failed")),hu(s.stack||s.message),{success:!1,asyncInit:!1}}},e.prototype.removeBackend=function(t){if(!(t in this.registryFactory))throw new Error("".concat(t," backend not found in registry"));this.backendName===t&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var t=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(n,r){return t.registryFactory[r].priority-t.registryFactory[n].priority})},e.prototype.initializeBackendsAndReturnBest=function(){for(var t=this.getSortedBackends(),n=0;n<t.length;n++){var r=t[n],a=this.initializeBackend(r),i=a.success,o=a.asyncInit;if(o||i)return{name:r,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")},e.prototype.moveData=function(t,n){var r=this.state.tensorInfo.get(n),a=r.backend,i=this.readSync(n),o=a.refCount(n);a.disposeData(n,!0),r.backend=t,t.move(n,i,r.shape,r.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},e.prototype.tidy=function(t,n){var r=this,a=null;if(n==null){if(typeof t!="function")throw new Error("Please provide a function to tidy()");n=t}else{if(typeof t!="string"&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=t}var i;return this.scopedRun(function(){return r.startScope(a)},function(){return r.endScope(i)},function(){return i=n(),i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),i})},e.prototype.scopedRun=function(t,n,r){t();try{var a=r();return n(),a}catch(i){throw n(),i}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(t){var n=j.runKernel(Zg,{x:t}),r={x:t},a=function(o){return{x:function(){var s="float32",u={x:o},l={dtype:s};return j.runKernel(Yg,u,l)}}},i=[];return this.addTapeNode(this.state.activeScope.name,r,[n],a,i,{}),n},e.prototype.runKernel=function(t,n,r){this.backendName==null&&this.backend;var a=uf(t,this.backendName)!=null;if(!a)throw new Error("Kernel '".concat(t,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:t,inputs:n,attrs:r})},e.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},e.prototype.checkKernelForMemLeak=function(t,n,r){var a=this.backend.numDataIds(),i=0;r.forEach(function(u){i+=u.dtype==="complex64"?3:1});var o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=a-n-i-o;if(s>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(s," data ids) after running '").concat(t,"'"))},e.prototype.runKernelFunc=function(t){var n=this,r,a=[],i=this.isTapeOn(),o=this.state.numBytes,s=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var u;this.backendName==null&&this.backend;var l,c=vg(t)?t.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(vg(t)){var p=t.kernelName,d=t.inputs,f=t.attrs;this.backendName==null&&this.backend;var h=uf(p,this.backendName);V(h!=null,function(){return"Cannot find registered kernel '".concat(p,"' for backend '").concat(n.backendName,"'")}),u=function(){var x=n.backend.numDataIds();l=h.kernelFunc({inputs:d,attrs:f,backend:n.backend});var k=Array.isArray(l)?l:[l];n.shouldCheckForMemLeaks()&&n.checkKernelForMemLeak(p,x,k);var N=k.map(function(C){return C.rank!=null?C:n.makeTensorFromTensorInfo(C)});if(i){var E=n.getTensorsForGradient(p,d,N);a=n.saveTensorsForBackwardMode(E)}return N}}else{var m=t.forwardFunc,v=function(x){i&&(a=x.map(function(k){return n.keep(n.clone(k))}))};u=function(){var x=n.backend.numDataIds();l=n.tidy(function(){return m(n.backend,v)});var k=Array.isArray(l)?l:[l];return n.shouldCheckForMemLeaks()&&n.checkKernelForMemLeak(c,x,k),k}}var g=t.inputs,y=t.attrs,w=vg(t)?null:t.backwardsFunc,b;return this.scopedRun(function(){return n.state.kernelDepth++},function(){return n.state.kernelDepth--},function(){!n.ENV.getBool("DEBUG")&&!n.state.profiling?r=u():(b=n.profiler.profileKernel(c,g,function(){return u()}),n.ENV.getBool("DEBUG")&&n.profiler.logKernelProfile(b),r=b.outputs)}),i&&this.addTapeNode(c,g,r,w,a,y),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-o,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-s,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(g).map(function(x){return g[x]!=null?g[x].shape:null}),outputShapes:r.map(function(x){return x.shape}),kernelTimeMs:b.timeMs,extraInfo:b.extraInfo}),Array.isArray(l)?r:r[0]},e.prototype.saveTensorsForBackwardMode=function(t){var n=this,r=t.map(function(a){return n.keep(n.clone(a))});return r},e.prototype.getTensorsForGradient=function(t,n,r){var a=Tg(t);if(a!=null){var i=a.inputsToSave||[],o=a.outputsToSave||[],s=void 0;a.saveAllInputs?(V(Array.isArray(n),function(){return"saveAllInputs is true, expected inputs to be an array."}),s=Object.keys(n).map(function(l){return n[l]})):s=i.map(function(l){return n[l]});var u=r.filter(function(l,c){return o[c]});return s.concat(u)}return[]},e.prototype.makeTensor=function(t,n,r,a){if(t==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",a=a||this.backend;var i=t;r==="string"&&mu(t[0])&&(i=t.map(function(c){return Nf(c)}));var o=a.write(i,n,r),s=new gr(n,r,o,this.nextTensorId());if(this.trackTensor(s,a),r==="string"){var u=this.state.tensorInfo.get(o),l=V9(i);this.state.numBytes+=l-u.bytes,u.bytes=l}return s},e.prototype.makeTensorFromDataId=function(t,n,r,a){r=r||"float32";var i={dataId:t,shape:n,dtype:r};return this.makeTensorFromTensorInfo(i,a)},e.prototype.makeTensorFromTensorInfo=function(t,n){var r=t.dataId,a=t.shape,i=t.dtype,o=new gr(a,i,r,this.nextTensorId());return this.trackTensor(o,n),o},e.prototype.makeVariable=function(t,n,r,a){n===void 0&&(n=!0),r=r||this.nextVariableId().toString(),a!=null&&a!==t.dtype&&(t=t.cast(a));var i=new cf(t,n,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error("Variable with name ".concat(i.name," was already registered"));return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i},e.prototype.trackTensor=function(t,n){this.state.numTensors++,t.dtype==="string"&&this.state.numStringTensors++;var r=0;t.dtype!=="complex64"&&t.dtype!=="string"&&(r=t.size*lm(t.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(t.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(t.dataId,{backend:n||this.backend,dtype:t.dtype,shape:t.shape,bytes:r})),t instanceof cf||this.track(t)},e.prototype.incRef=function(t,n){this.trackTensor(t,n),this.backend.incRef(t.dataId)},e.prototype.removeDataId=function(t,n){this.state.tensorInfo.has(t)&&this.state.tensorInfo.get(t).backend===n&&(this.state.tensorInfo.delete(t),this.state.numDataBuffers--)},e.prototype.disposeTensor=function(t){if(this.state.tensorInfo.has(t.dataId)){var n=this.state.tensorInfo.get(t.dataId);if(this.state.numTensors--,t.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),t.dtype!=="complex64"&&t.dtype!=="string"){var r=t.size*lm(t.dtype);this.state.numBytes-=r}n.backend.disposeData(t.dataId)&&this.removeDataId(t.dataId,n.backend)}},e.prototype.disposeVariables=function(){for(var t in this.state.registeredVariables){var n=this.state.registeredVariables[t];this.disposeVariable(n)}},e.prototype.disposeVariable=function(t){this.disposeTensor(t),this.state.registeredVariables[t.name]!=null&&delete this.state.registeredVariables[t.name]},e.prototype.memory=function(){var t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,t.reasons==null&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t},e.prototype.profile=function(t){return tt(this,void 0,void 0,function(){var n,r,a,i,o,s,u,l,c,p,d;return nt(this,function(f){switch(f.label){case 0:return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],a=this.state.activeProfile,[4,t()];case 1:a.result=f.sent(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,Mt([],Ie(this.state.activeProfile.kernels.map(function(h){return h.totalBytesSnapshot})),!1)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,f.label=2;case 2:f.trys.push([2,8,9,10]),i=Ur(this.state.activeProfile.kernels),o=i.next(),f.label=3;case 3:return o.done?[3,7]:(s=o.value,u=s,[4,s.kernelTimeMs]);case 4:return u.kernelTimeMs=f.sent(),l=s,[4,s.extraInfo];case 5:l.extraInfo=f.sent(),f.label=6;case 6:return o=i.next(),[3,3];case 7:return[3,10];case 8:return c=f.sent(),p={error:c},[3,10];case 9:try{o&&!o.done&&(d=i.return)&&d.call(i)}finally{if(p)throw p.error}return[7];case 10:return[2,this.state.activeProfile]}})})},e.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},e.prototype.addTapeNode=function(t,n,r,a,i,o){var s=this,u={id:this.state.nextTapeNodeId++,kernelName:t,inputs:n,outputs:r,saved:i},l=Tg(t);l!=null&&(a=l.gradFunc),a!=null&&(u.gradient=function(c){return c=c.map(function(p,d){if(p==null){var f=r[d],h=xm(f.size,f.dtype);return s.makeTensor(h,f.shape,f.dtype)}return p}),a(c.length>1?c:c[0],i,o)}),this.state.activeTape.push(u)},e.prototype.keep=function(t){return t.kept=!0,t},e.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(t){var n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(n.name=t),this.state.scopeStack.push(n),this.state.activeScope=n},e.prototype.endScope=function(t){for(var n=this,r=ny(t),a=new Set(r.map(function(u){return u.id})),i=0;i<this.state.activeScope.track.length;i++){var o=this.state.activeScope.track[i];!o.kept&&!a.has(o.id)&&o.dispose()}var s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(function(u){!u.kept&&u.scopeId===s.id&&n.track(u)})},e.prototype.gradients=function(t,n,r,a){var i=this;if(a===void 0&&(a=!1),V(n.length>0,function(){return"gradients() received an empty list of xs."}),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '".concat(r.dtype,"'"));var o=this.scopedRun(function(){return i.startTape()},function(){return i.endTape()},function(){return i.tidy("forward",t)});V(o instanceof gr,function(){return"The result y returned by f() must be a tensor."});var s=YU(this.state.activeTape,n,o);if(!a&&s.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var u={};u[o.id]=r??sG(o.shape),JU(u,s,function(c){return i.tidy(c)},uG);var l=n.map(function(c){return u[c.id]});return i.state.gradientDepth===0&&(i.state.activeTape.forEach(function(c){var p,d;try{for(var f=Ur(c.saved),h=f.next();!h.done;h=f.next()){var m=h.value;m.dispose()}}catch(v){p={error:v}}finally{try{h&&!h.done&&(d=f.return)&&d.call(f)}finally{if(p)throw p.error}}}),i.state.activeTape=null),{value:o,grads:l}})},e.prototype.customGrad=function(t){var n=this;return V(bu(t),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];V(r.every(function(l){return l instanceof gr}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var i,o={};r.forEach(function(l,c){o[c]=l});var s=function(l,c){return i=t.apply(void 0,Mt([],Ie(Mt(Mt([],Ie(r),!1),[c],!1)),!1)),V(i.value instanceof gr,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),V(bu(i.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),i.value},u=function(l,c){var p=i.gradFunc(l,c),d=Array.isArray(p)?p:[p];V(d.length===r.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),V(d.every(function(h){return h instanceof gr}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var f={};return d.forEach(function(h,m){f[m]=function(){return h}}),f};return n.runKernelFunc({forwardFunc:s,backwardsFunc:u,inputs:o})}},e.prototype.readSync=function(t){var n=this.state.tensorInfo.get(t);return n.backend.readSync(t)},e.prototype.read=function(t){var n=this.state.tensorInfo.get(t);return n.backend.read(t)},e.prototype.readToGPU=function(t,n){var r=this.state.tensorInfo.get(t);return r.backend.readToGPU(t,n)},e.prototype.time=function(t){return tt(this,void 0,void 0,function(){var n,r;return nt(this,function(a){switch(a.label){case 0:return n=lf(),[4,this.backend.time(t)];case 1:return r=a.sent(),r.wallMs=lf()-n,[2,r]}})})},e.prototype.track=function(t){return this.state.activeScope!=null&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t},Object.defineProperty(e.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new x9;for(var t in this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e}();ry.nextTensorId=0;ry.nextVariableId=0;function sG(e){var t=jg(Qt(e),"float32");return j.makeTensor(t,e,"float32")}function ZS(){var e=H9();if(e._tfengine==null){var t=new q9(e);e._tfengine=new ry(t)}return lU(e._tfengine.ENV),eG(function(){return e._tfengine}),e._tfengine}var j=ZS();function uG(e,t){var n={a:e,b:t};return j.runKernel(Xg,n)}function lG(){return typeof navigator<"u"&&navigator!=null}var Fg;function cG(e){Fg=e}function pG(e){if(Fg!==void 0)return Fg;if(e||lG()){if(e||(e=navigator),e.product==="ReactNative")return!0;var t=e.userAgent||e.vendor||(typeof window<"u"?window.opera:"");if(!t){var n=e;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function QS(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var dG={__proto__:null,isBrowser:QS,isMobile:pG,mockIsMobile:cG};var Sa=Ct();Sa.registerFlag("DEBUG",function(){return!1},function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Sa.registerFlag("IS_BROWSER",function(){return QS()});Sa.registerFlag("IS_NODE",function(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"});Sa.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)});Sa.registerFlag("IS_SAFARI",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)});Sa.registerFlag("PROD",function(){return!1});Sa.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return Sa.getBool("DEBUG")});Sa.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0});Sa.registerFlag("IS_TEST",function(){return!1});Sa.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",function(){return Sa.getBool("DEBUG")});Sa.registerFlag("WRAP_TO_IMAGEBITMAP",function(){return!1});Sa.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",function(){return!1});Sa.registerFlag("USE_SETTIMEOUTCUSTOM",function(){return!1});function es(e,t){var n=e;if(_r(e))return t==="string"?[]:[e.length];if(KS(e)){var r=e.channels||"RGBA";return[e.height,e.width*r.length]}else if(XS(e))return[e.buffer.size/(t==null?4:lm(t))];if(!Array.isArray(e))return[];for(var a=[];Array.isArray(n)||_r(n)&&t!=="string";)a.push(n.length),n=n[0];return Array.isArray(e)&&Ct().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&ek(e,a,[]),a}function ek(e,t,n){if(n=n||[],!Array.isArray(e)&&!_r(e)){V(t.length===0,function(){return"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements")});return}V(t.length>0,function(){return"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements")}),V(e.length===t[0],function(){return"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements")});for(var r=t.slice(1),a=0;a<e.length;++a)ek(e[a],r,n.concat(a))}function S9(e,t,n,r){if(e!=="string_or_numeric"){if(e==null)throw new Error("Expected dtype cannot be null.");if(e!=="numeric"&&e!==t||e==="numeric"&&t==="string")throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function O(e,t,n,r){if(r===void 0&&(r="numeric"),e instanceof jS())return S9(r,e.dtype,t,n),e;var a=Sf(e);if(a!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),S9(r,a,t,n),e==null||!_r(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string"){var i=e==null?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(i,"'"))}var o=es(e,a);!_r(e)&&!Array.isArray(e)&&(e=[e]);var s=!0,u=a!=="string"?km(e,a):wu(e,[],s);return j.makeTensor(u,o,a)}function pf(e,t,n,r){if(r===void 0&&(r="numeric"),!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");var a=e;return a.map(function(i,o){return O(i,"".concat(t,"[").concat(o,"]"),n,r)})}var tk="__op";function H(e){var t=Object.keys(e);if(t.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+tk;var a=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];j.startScope(n);try{var s=r.apply(void 0,Mt([],Ie(i),!1));return Sm(s)&&console.error("Cannot return a Promise inside of tidy."),j.endScope(s),s}catch(u){throw j.endScope(null),u}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}function fG(e,t){var n=O(e,"real","complex"),r=O(t,"imag","complex");pa(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", ")+"must match in call to tf.complex().");var a={real:n,imag:r};return j.runKernel(m7,a)}var xu=H({complex_:fG});function Nu(e,t,n,r){if(r==null)r=Sf(e);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(XS(e)||KS(e)){if(r!=="float32"&&r!=="int32")throw new Error("Creating tensor from GPU data only supports "+"'float32'|'int32' dtype, while the dtype is ".concat(r,"."));return j.backend.createTensorFromGPUData(e,t||n,r)}if(!_r(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){$a(t);var a=Qt(t),i=Qt(n);V(a===i,function(){return"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(a," values but has ").concat(i)});for(var o=0;o<n.length;++o){var s=n[o],u=o===n.length-1?s!==Qt(t.slice(o)):!0;V(n[o]===t[o]||!u,function(){return"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). ")})}}return!_r(e)&&!Array.isArray(e)&&(e=[e]),t=t||n,e=r!=="string"?km(e,r):wu(e,[],!0),j.makeTensor(e,t,r)}function Yc(e,t,n){var r=es(e,n);return Nu(e,t,r,n)}var gl={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8},Ms=function(){function e(t){if(this.shards=[],this.previousShardIndex=0,t!=null&&(t instanceof Array||(t=[t]),t=t.map(function(o){return _r(o)?o.buffer:o}),t.length!==0)){this.bufferUniformSize=t[0].byteLength;for(var n=0,r=0;r<t.length;r++){var a=t[r];r!==t.length-1&&a.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);var i=n+a.byteLength;this.shards.push({buffer:a,start:n,end:i}),n=i}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}}return e.join=function(t){return new e(t).slice()},e.prototype.slice=function(t,n){if(t===void 0&&(t=0),n===void 0&&(n=this.byteLength),this.shards.length===0)return new ArrayBuffer(0);if(t=isNaN(Number(t))?0:t,n=isNaN(Number(n))?0:n,t=Math.max(0,t),n=Math.min(this.byteLength,n),n<=t)return new ArrayBuffer(0);var r=this.findShardForByte(t);if(r===-1)throw new Error("Could not find start shard for byte ".concat(t));for(var a=n-t,i=new ArrayBuffer(a),o=new Uint8Array(i),s=0,u=r;u<this.shards.length;u++){var l=this.shards[u],c=t+s,p=c-l.start,d=s,f=Math.min(n,l.end),h=f-l.start,m=new Uint8Array(l.buffer,p,h-p);if(o.set(m,d),s+=m.length,n<l.end)break}return i},e.prototype.findShardForByte=function(t){if(this.shards.length===0||t<0||t>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(t/this.bufferUniformSize),this.previousShardIndex;function n(a){return t<a.start?-1:t>=a.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;var r=hG(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)},e}();function hG(e,t){for(var n=0,r=e.length;n<=r;){var a=Math.floor((r-n)/2)+n,i=t(e[a]);if(i===0)return a;i<0?r=a:n=a+1}return-1}function mG(){Ct().set("PROD",!0)}function vG(){Ct().set("DEBUG",!0)}function gG(){Ct().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function yG(e){Ct().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function bG(){j.disposeVariables()}function wG(){return j}function xG(){return j.memory()}function SG(e){return j.profile(e)}function yr(e,t){return j.tidy(e,t)}function xa(e){var t=ny(e);t.forEach(function(n){return n.dispose()})}function nk(e){return j.keep(e)}function kG(e){return j.time(e)}function NG(e){return j.setBackend(e)}function TG(){return j.ready()}function rk(){return j.backendName}function EG(e){j.removeBackend(e)}function IG(e){return j.findBackend(e)}function CG(e){return j.findBackendFactory(e)}function DG(e,t,n){return n===void 0&&(n=1),j.registerBackend(e,t,n)}function ak(){return j.backend}function _G(e,t){Ct().setPlatform(e,t)}var Su=4;function AG(e,t){return tt(this,void 0,void 0,function(){var n,r,a,i,o,s,u=this;return nt(this,function(l){switch(l.label){case 0:for(n=[],r=[],a=Array.isArray(e)?e.map(function(c){return c.name}):Object.keys(e),i=function(c){var p=a[c],d=Array.isArray(e)?e[c].tensor:e[p];if(d.dtype!=="float32"&&d.dtype!=="int32"&&d.dtype!=="bool"&&d.dtype!=="string"&&d.dtype!=="complex64")throw new Error("Unsupported dtype in weight '".concat(p,"': ").concat(d.dtype));var f={name:p,shape:d.shape,dtype:d.dtype};if(d.dtype==="string"){var h=new Promise(function(m){return tt(u,void 0,void 0,function(){var v,g,y,w,b,x,k;return nt(this,function(N){switch(N.label){case 0:return[4,d.bytes()];case 1:for(v=N.sent(),g=v.reduce(function(E,C){return E+C.length},0)+Su*v.length,y=new Uint8Array(g),w=0,b=0;b<v.length;b++)x=v[b],k=new Uint8Array(new Uint32Array([x.length]).buffer),y.set(k,w),w+=Su,y.set(x,w),w+=x.length;return m(y),[2]}})})});r.push(h)}else r.push(d.data());t!=null&&(f.group=t),n.push(f)},o=0;o<a.length;++o)i(o);return[4,Promise.all(r)];case 1:return s=l.sent(),[2,{data:MG(s),specs:n}]}})})}function ik(e,t){var n,r,a=new Ms(e),i={},o=0;try{for(var s=Ur(t),u=s.next();!u.done;u=s.next()){var l=u.value,c=FG(l,function(p,d){return a.slice(o+p,o+d)});i[l.name]=ok(l,a.slice(o,o+c)),o+=c}}catch(p){n={error:p}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i}function FG(e,t){var n=Qt(e.shape),r;if("quantization"in e){var a=e.quantization;r=gl[a.dtype]}else if(e.dtype==="string"){for(var i=0,o=0;o<n;o++)i+=Su+new Uint32Array(t(i,i+Su))[0];return i}else r=gl[e.dtype];return n*r}function RG(e,t){return tt(this,void 0,void 0,function(){var n,r,a,i,o,s,u,l;return nt(this,function(c){switch(c.label){case 0:return n=Qt(e.shape),"quantization"in e?(a=e.quantization,r=gl[a.dtype],[3,7]):[3,1];case 1:if(e.dtype!=="string")return[3,6];i=0,o=0,c.label=2;case 2:return o<n?(s=i,u=Su,l=Uint32Array.bind,[4,t(i,i+Su)]):[3,5];case 3:i=s+(u+new(l.apply(Uint32Array,[void 0,c.sent()]))()[0]),c.label=4;case 4:return o++,[3,2];case 5:return[2,i];case 6:r=gl[e.dtype],c.label=7;case 7:return[2,n*r]}})})}function ok(e,t){var n=e.name,r=e.dtype,a=e.shape,i=Qt(a),o,s=0;if("quantization"in e){var u=e.quantization;if(u.dtype==="uint8"||u.dtype==="uint16"){if(!("min"in u&&"scale"in u))throw new Error("Weight ".concat(e.name," with quantization ").concat(u.dtype," ")+"doesn't have corresponding metadata min and scale.")}else if(u.dtype==="float16"){if(r!=="float32")throw new Error("Weight ".concat(e.name," is quantized with ").concat(u.dtype," ")+"which only supports weights of type float32 not ".concat(r,"."))}else throw new Error("Weight ".concat(e.name," has unknown ")+"quantization dtype ".concat(u.dtype,". ")+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");var l=gl[u.dtype],c=u.dtype==="uint8"?new Uint8Array(t):new Uint16Array(t);if(r==="float32")if(u.dtype==="uint8"||u.dtype==="uint16"){o=new Float32Array(c.length);for(var p=0;p<c.length;p++){var d=c[p];o[p]=d*u.scale+u.min}}else if(u.dtype==="float16"){var f=WG();o=f(c)}else throw new Error("Unsupported quantization type ".concat(u.dtype," ")+"for weight type float32.");else if(r==="int32"){if(u.dtype!=="uint8"&&u.dtype!=="uint16")throw new Error("Unsupported quantization type ".concat(u.dtype," ")+"for weight type int32.");o=new Int32Array(c.length);for(var p=0;p<c.length;p++){var d=c[p];o[p]=Math.round(d*u.scale+u.min)}}else throw new Error("Unsupported dtype in weight '".concat(n,"': ").concat(r));s+=i*l}else if(r==="string"){var h=Qt(e.shape);o=[];for(var p=0;p<h;p++){var m=new Uint32Array(t.slice(s,s+Su))[0];s+=Su;var v=new Uint8Array(t.slice(s,s+m));o.push(v),s+=m}}else{var g=gl[r];if(r==="float32")o=new Float32Array(t);else if(r==="int32")o=new Int32Array(t);else if(r==="bool")o=new Uint8Array(t);else if(r==="complex64"){o=new Float32Array(t);for(var y=new Float32Array(o.length/2),w=new Float32Array(o.length/2),p=0;p<y.length;p++)y[p]=o[p*2],w[p]=o[p*2+1];var b=Yc(y,a,"float32"),x=Yc(w,a,"float32"),k=xu(b,x);return b.dispose(),x.dispose(),k}else throw new Error("Unsupported dtype in weight '".concat(n,"': ").concat(r));s+=i*g}return Yc(o,a,r)}function k9(e,t,n){return tt(this,void 0,void 0,function(){var r,a,i,o,s,u;return nt(this,function(l){switch(l.label){case 0:r=new Uint8Array(t),l.label=1;case 1:return r.byteLength<n?[4,e.read()]:[3,3];case 2:if(a=l.sent(),i=a.done,o=a.value,i&&o==null)throw s=n-r.byteLength,new Error("Reader is done but ".concat(s," bytes are still expected"));return u=new Uint8Array(r.length+o.byteLength),u.set(r,0),u.set(new Uint8Array(o),r.length),r=u,[3,1];case 3:return[2,r.buffer]}})})}function OG(e,t){return tt(this,void 0,void 0,function(){var n,r,a,i,o,s,u,l,c,p,d,f,h,m=this;return nt(this,function(v){switch(v.label){case 0:n={},r=e.getReader(),a=new ArrayBuffer(0),v.label=1;case 1:v.trys.push([1,7,8,9]),i=Ur(t),o=i.next(),v.label=2;case 2:return o.done?[3,6]:(s=o.value,[4,RG(s,function(g,y){return tt(m,void 0,void 0,function(){return nt(this,function(w){switch(w.label){case 0:return[4,k9(r,a,y)];case 1:return a=w.sent(),[2,a.slice(g,y)]}})})})]);case 3:return u=v.sent(),[4,k9(r,a,u)];case 4:a=v.sent(),l=a.slice(0,u),a=a.slice(u),c=ok(s,l),n[s.name]=c,rk()==="webgpu"&&(p=ak(),"uploadToGPU"in p&&Qt(c.shape)>=Ct().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&p.uploadToGPU(c.dataId)),v.label=5;case 5:return o=i.next(),[3,2];case 6:return[3,9];case 7:return d=v.sent(),f={error:d},[3,9];case 8:try{o&&!o.done&&(h=i.return)&&h.call(i)}finally{if(f)throw f.error}return[7];case 9:return[2,n]}})})}function MG(e){if(e===null)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));var t=0,n=[];e.forEach(function(i){if(t+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(i.constructor.name))});var r=new Uint8Array(t),a=0;return n.forEach(function(i){r.set(new Uint8Array(i.buffer),a),a+=i.byteLength}),r.buffer}var ay=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function N9(e){return ay?Buffer.byteLength(e,"utf8"):new Blob([e]).size}function PG(e){if(ay)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function BG(e){if(ay){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}function LG(e){return Ms.join(e)}function T9(e){var t="/";for(e=e.trim();e.endsWith(t);)e=e.slice(0,e.length-1);var n=e.split(t);return n[n.length-1]}function sk(e,t){var n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return e.signature!=null&&(n.signature=e.signature),e.userDefinedMetadata!=null&&(n.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(n.modelInitializer=e.modelInitializer),e.initializerSignature!=null&&(n.initializerSignature=e.initializerSignature),e.trainingConfig!=null&&(n.trainingConfig=e.trainingConfig),n}function uk(e,t,n){var r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(e.trainingConfig!=null&&(r.trainingConfig=e.trainingConfig),e.weightsManifest!=null){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return e.signature!=null&&(r.signature=e.signature),e.userDefinedMetadata!=null&&(r.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(r.modelInitializer=e.modelInitializer),e.initializerSignature!=null&&(r.initializerSignature=e.initializerSignature),r}function iy(e,t){return tt(this,void 0,void 0,function(){var n,r,a;return nt(this,function(i){switch(i.label){case 0:return e.weightsManifest==null?[3,2]:[4,t(e.weightsManifest)];case 1:a=Ie.apply(void 0,[i.sent(),2]),n=a[0],r=a[1],i.label=2;case 2:return[2,uk(e,n,r)]}})})}function Tf(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:e.modelTopology==null?0:N9(JSON.stringify(e.modelTopology)),weightSpecsBytes:e.weightSpecs==null?0:N9(JSON.stringify(e.weightSpecs)),weightDataBytes:e.weightData==null?0:new Ms(e.weightData).byteLength}}function Rg(e){var t,n,r=[];try{for(var a=Ur(e),i=a.next();!i.done;i=a.next()){var o=i.value;r.push.apply(r,Mt([],Ie(o.weights),!1))}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return r}function zG(){var e=function(r){for(var a=r<<13,i=0;!(a&8388608);)i-=8388608,a<<=1;return a&=-8388609,i+=947912704,a|i},t=new Uint32Array(2048);t[0]=0;for(var n=1;n<1024;n++)t[n]=e(n);for(var n=1024;n<2048;n++)t[n]=939524096+(n-1024<<13);return t}function $G(){var e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(var t=1;t<31;t++)e[t]=t<<23;for(var t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}function VG(){for(var e=new Uint32Array(64),t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}function WG(){var e=zG(),t=$G(),n=VG();return function(r){for(var a=new ArrayBuffer(4*r.length),i=new Uint32Array(a),o=0;o<r.length;o++){var s=r[o],u=e[n[s>>10]+(s&1023)]+t[s>>10];i[o]=u}return new Float32Array(a)}}var fi=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return e.instance==null&&(e.instance=new e),e.instance},e.registerSaveRouter=function(t){e.getInstance().saveRouters.push(t)},e.registerLoadRouter=function(t){e.getInstance().loadRouters.push(t)},e.getSaveHandlers=function(t){return e.getHandlers(t,"save")},e.getLoadHandlers=function(t,n){return e.getHandlers(t,"load",n)},e.getHandlers=function(t,n,r){var a=[],i=n==="load"?e.getInstance().loadRouters:e.getInstance().saveRouters;return i.forEach(function(o){var s=o(t,r);s!==null&&a.push(s)}),a},e}(),UG=function(e){return fi.registerSaveRouter(e)},GG=function(e){return fi.registerLoadRouter(e)},qG=function(e){return fi.getSaveHandlers(e)},HG=function(e,t){return fi.getLoadHandlers(e,t)},Og="tensorflowjs",Mg=1,hl="models_store",vu="model_info_store";function lk(){if(!Ct().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=typeof window>"u"?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function Pg(e){var t=e.result;t.createObjectStore(hl,{keyPath:"modelPath"}),t.createObjectStore(vu,{keyPath:"modelPath"})}var yl=function(){function e(t){if(this.indexedDB=lk(),t==null||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return e.prototype.save=function(t){return tt(this,void 0,void 0,function(){return nt(this,function(n){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,t)]})})},e.prototype.load=function(){return tt(this,void 0,void 0,function(){return nt(this,function(t){return[2,this.databaseAction(this.modelPath)]})})},e.prototype.databaseAction=function(t,n){var r=this;return new Promise(function(a,i){var o=r.indexedDB.open(Og,Mg);o.onupgradeneeded=function(){return Pg(o)},o.onsuccess=function(){var s=o.result;if(n==null){var u=s.transaction(hl,"readonly"),l=u.objectStore(hl),c=l.get(r.modelPath);c.onsuccess=function(){if(c.result==null)return s.close(),i(new Error("Cannot find model with path '".concat(r.modelPath,"' ")+"in IndexedDB."));a(c.result.modelArtifacts)},c.onerror=function(v){return s.close(),i(c.error)},u.oncomplete=function(){return s.close()}}else{n.weightData=Ms.join(n.weightData);var p=Tf(n),d=s.transaction(vu,"readwrite"),f=d.objectStore(vu),h;try{h=f.put({modelPath:r.modelPath,modelArtifactsInfo:p})}catch(v){return i(v)}var m;h.onsuccess=function(){m=s.transaction(hl,"readwrite");var v=m.objectStore(hl),g;try{g=v.put({modelPath:r.modelPath,modelArtifacts:n,modelArtifactsInfo:p})}catch(y){return i(y)}g.onsuccess=function(){return a({modelArtifactsInfo:p})},g.onerror=function(y){f=d.objectStore(vu);var w=f.delete(r.modelPath);w.onsuccess=function(){return s.close(),i(g.error)},w.onerror=function(b){return s.close(),i(g.error)}}},h.onerror=function(v){return s.close(),i(h.error)},d.oncomplete=function(){m==null?s.close():m.oncomplete=function(){return s.close()}}}},o.onerror=function(s){return i(o.error)}})},e}();yl.URL_SCHEME="indexeddb://";var ck=function(e){return Ct().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(yl.URL_SCHEME)?jG(e.slice(yl.URL_SCHEME.length)):null};fi.registerSaveRouter(ck);fi.registerLoadRouter(ck);function jG(e){return new yl(e)}function KG(e){return e.startsWith(yl.URL_SCHEME)?e.slice(yl.URL_SCHEME.length):e}var XG=function(){function e(){this.indexedDB=lk()}return e.prototype.listModels=function(){return tt(this,void 0,void 0,function(){var t=this;return nt(this,function(n){return[2,new Promise(function(r,a){var i=t.indexedDB.open(Og,Mg);i.onupgradeneeded=function(){return Pg(i)},i.onsuccess=function(){var o=i.result,s=o.transaction(vu,"readonly"),u=s.objectStore(vu),l=u.getAll();l.onsuccess=function(){var c,p,d={};try{for(var f=Ur(l.result),h=f.next();!h.done;h=f.next()){var m=h.value;d[m.modelPath]=m.modelArtifactsInfo}}catch(v){c={error:v}}finally{try{h&&!h.done&&(p=f.return)&&p.call(f)}finally{if(c)throw c.error}}r(d)},l.onerror=function(c){return o.close(),a(l.error)},s.oncomplete=function(){return o.close()}},i.onerror=function(o){return a(i.error)}})]})})},e.prototype.removeModel=function(t){return tt(this,void 0,void 0,function(){var n=this;return nt(this,function(r){return t=KG(t),[2,new Promise(function(a,i){var o=n.indexedDB.open(Og,Mg);o.onupgradeneeded=function(){return Pg(o)},o.onsuccess=function(){var s=o.result,u=s.transaction(vu,"readwrite"),l=u.objectStore(vu),c=l.get(t),p;c.onsuccess=function(){if(c.result==null)return s.close(),i(new Error("Cannot find model with path '".concat(t,"' ")+"in IndexedDB."));var d=l.delete(t),f=function(){p=s.transaction(hl,"readwrite");var h=p.objectStore(hl),m=h.delete(t);m.onsuccess=function(){return a(c.result.modelArtifactsInfo)},m.onerror=function(v){return i(c.error)}};d.onsuccess=f,d.onerror=function(h){return f(),s.close(),i(c.error)}},c.onerror=function(d){return s.close(),i(c.error)},u.oncomplete=function(){p==null?s.close():p.oncomplete=function(){return s.close()}}},o.onerror=function(s){return i(o.error)}})]})})},e}(),_s="/",Hc="tensorflowjs_models",pk="info",YG="model_topology",JG="weight_specs",ZG="weight_data",QG="model_metadata";function dk(e){return{info:[Hc,e,pk].join(_s),topology:[Hc,e,YG].join(_s),weightSpecs:[Hc,e,JG].join(_s),weightData:[Hc,e,ZG].join(_s),modelMetadata:[Hc,e,QG].join(_s)}}function fk(e){var t,n;try{for(var r=Ur(Object.values(e)),a=r.next();!a.done;a=r.next()){var i=a.value;window.localStorage.removeItem(i)}}catch(o){t={error:o}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}function eq(e){var t=e.split(_s);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(_s)}function tq(e){return e.startsWith(bl.URL_SCHEME)?e.slice(bl.URL_SCHEME.length):e}var bl=function(){function e(t){if(!Ct().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,t==null||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=dk(this.modelPath)}return e.prototype.save=function(t){return tt(this,void 0,void 0,function(){var n,r,a,i,o;return nt(this,function(s){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=Tf(t),i=Ms.join(t.weightData);try{return this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,PG(i)),o={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:t.signature!=null?t.signature:void 0,userDefinedMetadata:t.userDefinedMetadata!=null?t.userDefinedMetadata:void 0,modelInitializer:t.modelInitializer!=null?t.modelInitializer:void 0,initializerSignature:t.initializerSignature!=null?t.initializerSignature:void 0,trainingConfig:t.trainingConfig!=null?t.trainingConfig:void 0},this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),[2,{modelArtifactsInfo:a}]}catch{throw fk(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(a.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(a.weightSpecsBytes,", ")+"weightDataBytes=".concat(a.weightDataBytes,"."))}return[2]})})},e.prototype.load=function(){return tt(this,void 0,void 0,function(){var t,n,r,a,i,o,s;return nt(this,function(u){if(t=JSON.parse(this.LS.getItem(this.keys.info)),t==null)throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));if(t.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(n={},r=JSON.parse(this.LS.getItem(this.keys.topology)),r==null)throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");if(n.modelTopology=r,a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)),a==null)throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");if(n.weightSpecs=a,i=this.LS.getItem(this.keys.modelMetadata),i!=null&&(o=JSON.parse(i),n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,o.signature!=null&&(n.signature=o.signature),o.userDefinedMetadata!=null&&(n.userDefinedMetadata=o.userDefinedMetadata),o.modelInitializer!=null&&(n.modelInitializer=o.modelInitializer),o.initializerSignature!=null&&(n.initializerSignature=o.initializerSignature),o.trainingConfig!=null&&(n.trainingConfig=o.trainingConfig)),s=this.LS.getItem(this.keys.weightData),s==null)throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));return n.weightData=BG(s),[2,n]})})},e}();bl.URL_SCHEME="localstorage://";var hk=function(e){return Ct().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(bl.URL_SCHEME)?nq(e.slice(bl.URL_SCHEME.length)):null};fi.registerSaveRouter(hk);fi.registerLoadRouter(hk);function nq(e){return new bl(e)}var rq=function(){function e(){V(Ct().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),V(typeof window>"u"||typeof window.localStorage<"u",function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return e.prototype.listModels=function(){return tt(this,void 0,void 0,function(){var t,n,r,a,i,o;return nt(this,function(s){for(t={},n=Hc+_s,r=_s+pk,a=0;a<this.LS.length;++a)i=this.LS.key(a),i.startsWith(n)&&i.endsWith(r)&&(o=eq(i),t[o]=JSON.parse(this.LS.getItem(i)));return[2,t]})})},e.prototype.removeModel=function(t){return tt(this,void 0,void 0,function(){var n,r;return nt(this,function(a){if(t=tq(t),n=dk(t),this.LS.getItem(n.info)==null)throw new Error("Cannot find model at path '".concat(t,"'"));return r=JSON.parse(this.LS.getItem(n.info)),fk(n),[2,r]})})},e}(),Jc="://",ku=function(){function e(){this.managers={}}return e.getInstance=function(){return e.instance==null&&(e.instance=new e),e.instance},e.registerManager=function(t,n){V(t!=null,function(){return"scheme must not be undefined or null."}),t.endsWith(Jc)&&(t=t.slice(0,t.indexOf(Jc))),V(t.length>0,function(){return"scheme must not be an empty string."});var r=e.getInstance();V(r.managers[t]==null,function(){return"A model store manager is already registered for scheme '".concat(t,"'.")}),r.managers[t]=n},e.getManager=function(t){var n=e.getInstance().managers[t];if(n==null)throw new Error("Cannot find model manager for scheme '".concat(t,"'"));return n},e.getSchemes=function(){return Object.keys(e.getInstance().managers)},e}();function om(e){if(e.indexOf(Jc)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+"".concat(ku.getSchemes().join(",")));return{scheme:e.split(Jc)[0],path:e.split(Jc)[1]}}function mk(e,t,n){return n===void 0&&(n=!1),tt(this,void 0,void 0,function(){var r,a,i,o,s,u,l,c,p;return nt(this,function(d){switch(d.label){case 0:return V(e!==t,function(){return"Old path and new path are the same: '".concat(e,"'")}),r=fi.getLoadHandlers(e),V(r.length>0,function(){return"Copying failed because no load handler is found for source URL ".concat(e,".")}),V(r.length<2,function(){return"Copying failed because more than one (".concat(r.length,") ")+"load handlers for source URL ".concat(e,".")}),a=r[0],i=fi.getSaveHandlers(t),V(i.length>0,function(){return"Copying failed because no save handler is found for destination "+"URL ".concat(t,".")}),V(i.length<2,function(){return"Copying failed because more than one (".concat(r.length,") ")+"save handlers for destination URL ".concat(t,".")}),o=i[0],s=om(e).scheme,u=om(e).path,l=s===om(e).scheme,[4,a.load()];case 1:return c=d.sent(),n&&l?[4,ku.getManager(s).removeModel(u)]:[3,3];case 2:d.sent(),d.label=3;case 3:return[4,o.save(c)];case 4:return p=d.sent(),n&&!l?[4,ku.getManager(s).removeModel(u)]:[3,6];case 5:d.sent(),d.label=6;case 6:return[2,p.modelArtifactsInfo]}})})}function aq(){return tt(this,void 0,void 0,function(){var e,t,n,r,a,i,o,s,u,l,c;return nt(this,function(p){switch(p.label){case 0:e=ku.getSchemes(),t={},p.label=1;case 1:p.trys.push([1,6,7,8]),n=Ur(e),r=n.next(),p.label=2;case 2:return r.done?[3,5]:(a=r.value,[4,ku.getManager(a).listModels()]);case 3:i=p.sent();for(o in i)s=a+Jc+o,t[s]=i[o];p.label=4;case 4:return r=n.next(),[3,2];case 5:return[3,8];case 6:return u=p.sent(),l={error:u},[3,8];case 7:try{r&&!r.done&&(c=n.return)&&c.call(n)}finally{if(l)throw l.error}return[7];case 8:return[2,t]}})})}function iq(e){return tt(this,void 0,void 0,function(){var t,n;return nt(this,function(r){return t=om(e),n=ku.getManager(t.scheme),[2,n.removeModel(t.path)]})})}function oq(e,t){return tt(this,void 0,void 0,function(){var n;return nt(this,function(r){return n=!1,[2,mk(e,t,n)]})})}function sq(e,t){return tt(this,void 0,void 0,function(){var n;return nt(this,function(r){return n=!0,[2,mk(e,t,n)]})})}var uq=function(){function e(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}return e.prototype.fetch=function(t,n){return fetch(t,n)},e.prototype.now=function(){return performance.now()},e.prototype.encode=function(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got ".concat(n));return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)},e.prototype.decode=function(t,n){return new TextDecoder(n).decode(t)},e.prototype.setTimeoutCustom=function(t,n){var r=this;if(typeof window>"u"||!Ct().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(t,n);return}this.functionRefs.push(t),setTimeout(function(){window.postMessage({name:r.messageName,index:r.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",function(a){if(a.source===window&&a.data.name===r.messageName){a.stopPropagation();var i=r.functionRefs[a.data.index];i(),r.handledMessageCount++,r.handledMessageCount===r.functionRefs.length&&(r.functionRefs=[],r.handledMessageCount=0)}},!0))},e.prototype.isTypedArray=function(t){return BS(t)},e}();if(Ct().get("IS_BROWSER")){Ct().setPlatform("browser",new uq);try{ku.registerManager(bl.URL_SCHEME,new rq)}catch{}try{ku.registerManager(yl.URL_SCHEME,new XG)}catch{}}var lq={importFetch:function(){return d9()}},gg,cq=function(){function e(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return e.prototype.fetch=function(t,n){return Ct().global.fetch!=null?Ct().global.fetch(t,n):(gg==null&&(gg=lq.importFetch()),gg(t,n))},e.prototype.now=function(){var t=process.hrtime();return t[0]*1e3+t[1]/1e6},e.prototype.encode=function(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got ".concat(n));return this.textEncoder.encode(t)},e.prototype.decode=function(t,n){return t.length===0?"":new this.util.TextDecoder(n).decode(t)},e.prototype.isTypedArray=function(t){return this.util.types.isFloat32Array(t)||this.util.types.isInt32Array(t)||this.util.types.isUint8Array(t)||this.util.types.isUint8ClampedArray(t)},e}();Ct().get("IS_NODE")&&!Ct().get("IS_BROWSER")&&Ct().setPlatform("node",new cq);function As(e,t,n){return t===void 0&&(t="float32"),t=t||"float32",$a(e),new hm(e,t,n)}function pq(e,t){var n=O(e,"x","cast");if(!$9(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if(t==="string"&&n.dtype!=="string"||t!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");var r={x:n},a={dtype:t};return j.runKernel(Yg,r,a)}var bn=H({cast_:pq});function dq(e){var t=O(e,"x","clone","string_or_numeric"),n={x:t};return j.runKernel(Zg,n)}var vl=H({clone_:dq});function vk(e,t){t===void 0&&(t=!1),console.log(e.toString(t))}ZS();var fq={buffer:As,cast:bn,clone:vl,print:vk};tG(fq);function hq(e,t){var n,r=O(e,"a","add"),a=O(t,"b","add");n=Ie(Gn(r,a),2),r=n[0],a=n[1];var i={a:r,b:a};return j.runKernel(Xg,i)}var Tt=H({add_:hq});function mq(e,t){var n,r=O(e,"a","floorDiv"),a=O(t,"b","floorDiv");n=Ie(Gn(r,a),2),r=n[0],a=n[1];var i={a:r,b:a};return j.runKernel(j7,i)}var gk=H({floorDiv_:mq});function vq(e,t){var n,r=O(e,"a","div"),a=O(t,"b","div");if(n=Ie(Gn(r,a),2),r=n[0],a=n[1],r.dtype==="int32"&&a.dtype==="int32")return gk(r,a);var i={a:r,b:a},o={};return j.runKernel(M7,i,o)}var vn=H({div_:vq});function gq(e,t){var n,r=O(e,"a","mul"),a=O(t,"b","mul");n=Ie(Gn(r,a),2),r=n[0],a=n[1];var i={a:r,b:a};return j.runKernel(Tx,i)}var je=H({mul_:gq});function yq(e){var t=O(e,"x","abs");if(t.dtype==="complex64"){var n={x:t};return j.runKernel(v7,n)}else{var n={x:t};return j.runKernel(j9,n)}}var pi=H({abs_:yq});function bq(e){var t=O(e,"x","acos"),n={x:t};return j.runKernel(K9,n)}var wq=H({acos_:bq});function xq(e){var t=O(e,"x","acosh"),n={x:t};return j.runKernel(X9,n)}var Sq=H({acosh_:xq});function kq(e){V(Array.isArray(e),function(){return"The argument passed to tf.addN() must be a list of tensors"}),V(e.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+"".concat(e.length)});var t=e.map(function(a,i){return O(a,"tensors".concat(i),"addN")}),n=t[0];t.forEach(function(a){if(a.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(function(a){if(!Os(a.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=t;return j.runKernel(Y9,r)}var Nq=H({addN_:kq});function Tq(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=O(e,"x","all","bool"),a={x:r},i={axis:t,keepDims:n};return j.runKernel(J9,a,i)}var Eq=H({all_:Tq});function Iq(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=O(e,"x","any","bool"),a={x:r},i={axis:t,keepDims:n};return j.runKernel(Z9,a,i)}var Cq=H({any_:Iq});function Dq(e,t){t===void 0&&(t=0);var n=O(e,"x","argMax"),r={x:n},a={axis:t};return j.runKernel(Q9,r,a)}var _q=H({argMax_:Dq});function Aq(e,t){t===void 0&&(t=0);var n=O(e,"x","argMin"),r={x:n},a={axis:t};return j.runKernel(e7,r,a)}var Fq=H({argMin_:Aq});function Rq(e){var t=O(e,"x","asin"),n={x:t};return j.runKernel(t7,n)}var Oq=H({asin_:Rq});function Mq(e){var t=O(e,"x","asinh"),n={x:t};return j.runKernel(n7,n)}var Pq=H({asinh_:Mq});function Bq(e){var t=O(e,"x","atan"),n={x:t};return j.runKernel(r7,n)}var Lq=H({atan_:Bq});function zq(e,t){var n,r=O(e,"a","atan2"),a=O(t,"b","atan2");n=Ie(Gn(r,a),2),r=n[0],a=n[1];var i={a:r,b:a};return j.runKernel(i7,i)}var $q=H({atan2_:zq});function Vq(e){var t=O(e,"x","atanh"),n={x:t};return j.runKernel(a7,n)}var Wq=H({atanh_:Vq});function Uq(e,t,n,r,a,i){a===void 0&&(a="NHWC");var o=e[3],s=Mt(Mt([],Ie(t),!1),[o],!1),u=wk(a);return Ef(e,s,n,i,r,null,null,u)}function yk(e,t,n,r,a,i,o){o===void 0&&(o="channelsLast");var s=Ie(df(t),2),u=s[0],l=s[1],c;if(o==="channelsLast")c=[u,l,e[3],e[3]];else if(o==="channelsFirst")c=[u,l,e[1],e[1]];else throw new Error("Unknown dataFormat ".concat(o));return Ef(e,c,n,r,a,i,!1,o)}function Gq(e,t,n,r,a,i,o){o===void 0&&(o="NDHWC");var s=Ie(Bg(t),3),u=s[0],l=s[1],c=s[2],p,d;if(o==="NDHWC")d="channelsLast",p=[u,l,c,e[4],e[4]];else if(o==="NCDHW")d="channelsFirst",p=[u,l,c,e[1],e[1]];else throw new Error("Unknown dataFormat ".concat(o));return bk(e,p,n,r,a,!1,d,i)}function Ef(e,t,n,r,a,i,o,s){var u,l;o===void 0&&(o=!1),s===void 0&&(s="channelsLast");var c=Ie([-1,-1,-1,-1],4),p=c[0],d=c[1],f=c[2],h=c[3];if(s==="channelsLast")u=Ie(e,4),p=u[0],d=u[1],f=u[2],h=u[3];else if(s==="channelsFirst")l=Ie(e,4),p=l[0],h=l[1],d=l[2],f=l[3];else throw new Error("Unknown dataFormat ".concat(s));var m=Ie(t,4),v=m[0],g=m[1],y=m[3],w=Ie(df(n),2),b=w[0],x=w[1],k=Ie(df(r),2),N=k[0],E=k[1],C=Zc(v,N),R=Zc(g,E),A=jq(a,d,f,b,x,C,R,i,s),M=A.padInfo,$=A.outHeight,z=A.outWidth,L=o?y*h:y,B;return s==="channelsFirst"?B=[p,L,$,z]:s==="channelsLast"&&(B=[p,$,z,L]),{batchSize:p,dataFormat:s,inHeight:d,inWidth:f,inChannels:h,outHeight:$,outWidth:z,outChannels:L,padInfo:M,strideHeight:b,strideWidth:x,filterHeight:v,filterWidth:g,effectiveFilterHeight:C,effectiveFilterWidth:R,dilationHeight:N,dilationWidth:E,inShape:e,outShape:B,filterShape:t}}function bk(e,t,n,r,a,i,o,s){var u,l;i===void 0&&(i=!1),o===void 0&&(o="channelsLast");var c=Ie([-1,-1,-1,-1,-1],5),p=c[0],d=c[1],f=c[2],h=c[3],m=c[4];if(o==="channelsLast")u=Ie(e,5),p=u[0],d=u[1],f=u[2],h=u[3],m=u[4];else if(o==="channelsFirst")l=Ie(e,5),p=l[0],m=l[1],d=l[2],f=l[3],h=l[4];else throw new Error("Unknown dataFormat ".concat(o));var v=Ie(t,5),g=v[0],y=v[1],w=v[2],b=v[4],x=Ie(Bg(n),3),k=x[0],N=x[1],E=x[2],C=Ie(Bg(r),3),R=C[0],A=C[1],M=C[2],$=Zc(g,R),z=Zc(y,A),L=Zc(w,M),B=Kq(a,d,f,h,k,N,E,$,z,L,s),W=B.padInfo,Y=B.outDepth,Q=B.outHeight,G=B.outWidth,X=i?b*m:b,ie;return o==="channelsFirst"?ie=[p,X,Y,Q,G]:o==="channelsLast"&&(ie=[p,Y,Q,G,X]),{batchSize:p,dataFormat:o,inDepth:d,inHeight:f,inWidth:h,inChannels:m,outDepth:Y,outHeight:Q,outWidth:G,outChannels:X,padInfo:W,strideDepth:k,strideHeight:N,strideWidth:E,filterDepth:g,filterHeight:y,filterWidth:w,effectiveFilterDepth:$,effectiveFilterHeight:z,effectiveFilterWidth:L,dilationDepth:R,dilationHeight:A,dilationWidth:M,inShape:e,outShape:ie,filterShape:t}}function qq(e,t,n,r,a){r==null&&(r=oy(e,t,n));var i=e[0],o=e[1],s=ff((i-t+2*r)/n+1,a),u=ff((o-t+2*r)/n+1,a);return[s,u]}function Hq(e,t,n,r,a,i){a==null&&(a=oy(e,t[0],r[0]));for(var o=[0,0,0,n],s=0;s<3;s++)e[s]+2*a>=t[s]&&(o[s]=ff((e[s]-t[s]+2*a)/r[s]+1,i));return o}function oy(e,t,n,r){r===void 0&&(r=1);var a=Zc(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function df(e){return typeof e=="number"?[e,e,e]:e.length===2?[e[0],e[1],1]:e}function Bg(e){return typeof e=="number"?[e,e,e]:e}function Zc(e,t){return t<=1?e:e+(e-1)*(t-1)}function jq(e,t,n,r,a,i,o,s,u){var l,c,p;if(typeof e=="number"){var d=e===0?"VALID":"NUMBER";l={top:e,bottom:e,left:e,right:e,type:d};var f=qq([t,n],i,r,e,s);c=f[0],p=f[1]}else if(e==="same"){c=Math.ceil(t/r),p=Math.ceil(n/a);var h=Math.max(0,(c-1)*r+i-t),m=Math.max(0,(p-1)*a+o-n),v=Math.floor(h/2),g=h-v,y=Math.floor(m/2),w=m-y;l={top:v,bottom:g,left:y,right:w,type:"SAME"}}else if(e==="valid")l={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-i+1)/r),p=Math.ceil((n-o+1)/a);else if(typeof e=="object"){var v=u==="channelsLast"?e[1][0]:e[2][0],g=u==="channelsLast"?e[1][1]:e[2][1],y=u==="channelsLast"?e[2][0]:e[3][0],w=u==="channelsLast"?e[2][1]:e[3][1],d=v===0&&g===0&&y===0&&w===0?"VALID":"EXPLICIT";l={top:v,bottom:g,left:y,right:w,type:d},c=ff((t-i+v+g)/r+1,s),p=ff((n-o+y+w)/a+1,s)}else throw Error("Unknown padding parameter: ".concat(e));return{padInfo:l,outHeight:c,outWidth:p}}function Kq(e,t,n,r,a,i,o,s,u,l,c){var p,d,f,h;if(e==="valid"&&(e=0),typeof e=="number"){var m=e===0?"VALID":"NUMBER";p={top:e,bottom:e,left:e,right:e,front:e,back:e,type:m};var v=Hq([t,n,r,1],[s,u,l],1,[a,i,o],e,c);d=v[0],f=v[1],h=v[2]}else if(e==="same"){d=Math.ceil(t/a),f=Math.ceil(n/i),h=Math.ceil(r/o);var g=(d-1)*a+s-t,y=(f-1)*i+u-n,w=(h-1)*o+l-r,b=Math.floor(g/2),x=g-b,k=Math.floor(y/2),N=y-k,E=Math.floor(w/2),C=w-E;p={top:k,bottom:N,left:E,right:C,front:b,back:x,type:"SAME"}}else throw Error("Unknown padding parameter: ".concat(e));return{padInfo:p,outDepth:d,outHeight:f,outWidth:h}}function ff(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function hf(e){var t=Ie(df(e),3),n=t[0],r=t[1],a=t[2];return n===1&&r===1&&a===1}function Ps(e,t){return hf(e)||hf(t)}function wl(e){return df(e).every(function(t){return t>0})}function wk(e){if(e==="NHWC")return"channelsLast";if(e==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}function $i(e,t,n){if(n!=null){if(typeof t=="string")throw Error("Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."));if(typeof t=="number")V(tp(t),function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")});else if(typeof t=="object")t.forEach(function(r){r.forEach(function(a){V(tp(a),function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(a,".")})})});else throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t))}}function Xq(e,t){var n=O(e,"x","reshape","string_or_numeric"),r={x:n},a={shape:t};return j.runKernel(qx,r,a)}var be=H({reshape_:Xq});function Yq(e,t,n,r,a){var i=O(e,"x","avgPool","float32"),o=1;V(Ps(n,o),function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(o,"'")});var s=i,u=!1;i.rank===3&&(u=!0,s=be(i,[1,i.shape[0],i.shape[1],i.shape[2]])),V(s.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank ".concat(s.rank,".")}),$i("avgPool",r,a);var l={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a},p=j.runKernel(o7,l,c);return p=bn(p,i.dtype),u?be(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var xk=H({avgPool_:Yq});function Jq(e,t,n,r,a,i){i===void 0&&(i="NDHWC");var o=O(e,"x","avgPool3d","float32"),s=o,u=!1;o.rank===4&&(u=!0,s=be(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),V(s.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank ".concat(s.rank,".")}),V(i==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i)}),V(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,function(){return"Error in avgPool3d: Stride must be > 0, but got '".concat(n,"'")}),$i("avgPool3d",r,a);var l={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},p=j.runKernel(s7,l,c);return p=bn(p,s.dtype),u?be(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var Zq=H({avgPool3d_:Jq});function Qq(e,t){t===void 0&&(t=0),V(e.length>=1,function(){return"Pass at least one tensor to concat"});var n=pf(e,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(function(i){if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `.concat(i.dtype,". "))}),n.length===1)return vl(n[0]);var r=n,a={axis:t};return j.runKernel(g7,r,a)}var za=H({concat_:Qq});function eH(e,t,n,r){var a;n===void 0&&(n=!1),r===void 0&&(r=!1);var i=O(e,"a","matMul"),o=O(t,"b","matMul");a=Ie(Gn(i,o),2),i=a[0],o=a[1];var s={a:i,b:o},u={transposeA:n,transposeB:r};return j.runKernel(u7,s,u)}var Xt=H({matMul_:eH});function tH(e){var t=O(e,"x","sigmoid","float32"),n={x:t};return j.runKernel(sS,n)}var Qc=H({sigmoid_:tH});function nH(e,t,n){var r=O(e,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");var a={x:r},i={begin:t,size:n};return j.runKernel(rS,a,i)}var Rn=H({slice_:nH});function rH(e){var t=O(e,"x","tanh","float32"),n={x:t};return j.runKernel(IS,n)}var Lg=H({tanh_:rH});function aH(e,t,n,r,a,i){var o=O(e,"forgetBias","basicLSTMCell"),s=O(t,"lstmKernel","basicLSTMCell"),u=O(n,"lstmBias","basicLSTMCell"),l=O(r,"data","basicLSTMCell"),c=O(a,"c","basicLSTMCell"),p=O(i,"h","basicLSTMCell"),d=za([l,p],1),f=Xt(d,s),h=Tt(f,u),m=h.shape[0],v=h.shape[1]/4,g=[m,v],y=Rn(h,[0,0],g),w=Rn(h,[0,v],g),b=Rn(h,[0,v*2],g),x=Rn(h,[0,v*3],g),k=Tt(je(Qc(y),Lg(w)),je(c,Qc(Tt(o,b)))),N=je(Lg(k),Qc(x));return[k,N]}var iH=H({basicLSTMCell_:aH});function oH(e,t,n){var r=O(e,"x","batchToSpaceND"),a=t.reduce(function(s,u){return s*u});V(r.rank>=1+t.length,function(){return"input rank is ".concat(r.rank," but should be > than blockShape.length ").concat(t.length)}),V(n.length===t.length,function(){return"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)}),V(r.shape[0]%a===0,function(){return"input tensor batch is ".concat(r.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(a)});var i={x:r},o={blockShape:t,crops:n};return j.runKernel(l7,i,o)}var Sk=H({batchToSpaceND_:oH});function sH(e){var t;return e.rank===0||e.rank===1?t=be(e,[1,1,1,e.size]):e.rank===2?t=be(e,[1,1,e.shape[0],e.shape[1]]):e.rank===3?t=be(e,[1,e.shape[0],e.shape[1],e.shape[2]]):t=e,t}function uH(e,t,n,r,a,i){i==null&&(i=.001);var o=O(e,"x","batchNorm"),s=O(t,"mean","batchNorm"),u=O(n,"variance","batchNorm"),l;a!=null&&(l=O(a,"scale","batchNorm"));var c;r!=null&&(c=O(r,"offset","batchNorm")),V(s.rank===u.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),V(c==null||s.rank===c.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),V(l==null||s.rank===l.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."});var p=sH(o),d={x:p,scale:l,offset:c,mean:s,variance:u},f={varianceEpsilon:i},h=j.runKernel(K7,d,f);return be(h,o.shape)}var Tm=H({batchNorm_:uH});function lH(e,t,n,r,a,i){var o=O(e,"x","batchNorm"),s=O(t,"mean","batchNorm"),u=O(n,"variance","batchNorm"),l;a!=null&&(l=O(a,"scale","batchNorm"));var c;return r!=null&&(c=O(r,"offset","batchNorm")),V(o.rank===2,function(){return"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(o.rank,".")}),V(s.rank===2||s.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(s.rank,".")}),V(u.rank===2||u.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(u.rank,".")}),l!=null&&V(l.rank===2||l.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(l.rank,".")}),c!=null&&V(c.rank===2||c.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(c.rank,".")}),Tm(o,s,u,c,l,i)}var cH=H({batchNorm2d_:lH});function pH(e,t,n,r,a,i){var o=O(e,"x","batchNorm"),s=O(t,"mean","batchNorm"),u=O(n,"variance","batchNorm"),l;a!=null&&(l=O(a,"scale","batchNorm"));var c;return r!=null&&(c=O(r,"offset","batchNorm")),V(o.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(o.rank,".")}),V(s.rank===3||s.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(s.rank,".")}),V(u.rank===3||u.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(u.rank,".")}),l!=null&&V(l.rank===3||l.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(l.rank,".")}),c!=null&&V(c.rank===3||c.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(c.rank,".")}),Tm(o,s,u,c,l,i)}var dH=H({batchNorm3d_:pH});function fH(e,t,n,r,a,i){var o=O(e,"x","batchNorm"),s=O(t,"mean","batchNorm"),u=O(n,"variance","batchNorm"),l;a!=null&&(l=O(a,"scale","batchNorm"));var c;return r!=null&&(c=O(r,"offset","batchNorm")),V(o.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(o.rank,".")}),V(s.rank===4||s.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(s.rank,".")}),V(u.rank===4||u.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(u.rank,".")}),l!=null&&V(l.rank===4||l.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(l.rank,".")}),c!=null&&V(c.rank===4||c.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(c.rank,".")}),Tm(o,s,u,c,l,i)}var hH=H({batchNorm4d_:fH});function mH(e,t,n){var r=O(e,"x","bincount"),a=O(t,"weights","bincount");V(r.dtype==="int32",function(){return"Error in bincount: input "+"dtype must be int32, but got ".concat(r.dtype)}),V(n>=0,function(){return"size must be non-negative, but got ".concat(n,".")}),V(a.size===r.size||a.size===0,function(){return"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(r.shape,", weights shape: ")+"".concat(a.shape,".")});var i={x:r,weights:a},o={size:n};return j.runKernel(c7,i,o)}var kk=H({bincount_:mH});function vH(e,t){var n=O(e,"x","bitwiseAnd"),r=O(t,"y","bitwiseAnd");if(!Os(n.shape,r.shape))throw new Error("BitwiseAnd: Tensors must have the same shape. x: ".concat(n.shape,", y: ").concat(r.shape));if(n.dtype!=="int32"||r.dtype!=="int32")throw new Error("BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ".concat(n.dtype," and type of y: ").concat(r.dtype));var a={a:n,b:r};return j.runKernel(p7,a)}var gH=H({bitwiseAnd_:vH});function yH(e,t){var n=O(e,"s0","broadcastArgs","int32"),r=O(t,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error("broadcastArgs(): first input must be a vector (rank=1). "+"Has rank ".concat(n.rank));if(r.rank!==1)throw new Error("broadcastArgs(): second input must be a vector (rank=1). "+"Has rank ".concat(r.rank));var a={s0:n,s1:r};return j.runKernel(d7,a)}var bH=H({broadcastArgs_:yH});function wH(e,t){var n=O(e,"broadcastTo","x"),r=n.shape;if($a(t),t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){for(var a=n.shape.slice();a.length<t.length;)a.unshift(1);n=be(n,a)}for(var i=n.shape,o=Array.from(t),s=t.length-1;s>=0;s--)if(i[s]===t[s])o[s]=1;else if(n.shape[s]!==1)throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(t,"]."));var u=o.map(function(p,d){return p>1?d:-1}).filter(function(p){return p>=0});if(u.length===0)return vl(n);var l={x:n},c={reps:o};return j.runKernel(Qg,l,c)}var sm=H({broadcastTo_:wH});function xH(e){var t=O(e,"x","ceil","float32"),n={x:t};return j.runKernel(f7,n)}var SH=H({ceil_:xH});function If(e,t,n){$a(e),n=n||Sf(t);var r={shape:e,value:t,dtype:n};return j.runKernel(G7,{},r)}function kH(e,t,n){var r=O(e,"x","clipByValue");if(V(t<=n,function(){return"Error in clip: min (".concat(t,") must be ")+"less than or equal to max (".concat(n,").")}),t===n)return If(r.shape,t,r.dtype);var a={x:r},i={clipValueMin:t,clipValueMax:n};return j.runKernel(h7,a,i)}var NH=H({clipByValue_:kH});function TH(e){return za(e,0)}var EH=H({concat1d_:TH});function IH(e,t){return za(e,t)}var CH=H({concat2d_:IH});function DH(e,t){return za(e,t)}var _H=H({concat3d_:DH});function AH(e,t){return za(e,t)}var FH=H({concat4d_:AH});function RH(e,t,n,r,a,i,o){a===void 0&&(a="NHWC"),i===void 0&&(i=[1,1]);var s=O(e,"x","conv2d","float32"),u=O(t,"filter","conv2d","float32"),l=s,c=!1;s.rank===3&&(c=!0,l=be(s,[1,s.shape[0],s.shape[1],s.shape[2]])),V(l.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank ".concat(l.rank,".")}),V(u.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+"".concat(u.rank,".")}),$i("conv2d",r,o);var p=a==="NHWC"?l.shape[3]:l.shape[1];V(p===u.shape[2],function(){return"Error in conv2d: depth of input (".concat(p,") must match ")+"input depth for filter ".concat(u.shape[2],".")}),V(Ps(n,i),function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")}),V(wl(i),function(){return"Error in conv2D: Dilated rates should be larger than 0."}),V(wl(n),function(){return"Error in conv2D: Strides should be larger than 0."});var d={x:l,filter:u},f={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},h=j.runKernel(y7,d,f);return c?be(h,[h.shape[1],h.shape[2],h.shape[3]]):h}var Em=H({conv2d_:RH});function OH(e,t,n,r,a,i,o){a===void 0&&(a="NWC"),i===void 0&&(i=1);var s=O(e,"x","conv1d"),u=O(t,"filter","conv1d"),l=s,c=!1;s.rank===2&&(c=!0,l=be(s,[1,s.shape[0],s.shape[1]])),V(l.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank ".concat(l.rank,".")}),V(u.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+"".concat(u.rank,".")}),$i("conv1d",r,o),V(l.shape[2]===u.shape[1],function(){return"Error in conv1d: depth of input (".concat(l.shape[2],") must match ")+"input depth for filter ".concat(u.shape[1],".")}),V(Ps(n,i),function(){return"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(i,"'")}),V(wl(i),function(){return"Error in conv1D: Dilated rates should be larger than 0."}),V(wl(n),function(){return"Error in conv1D: Stride should be larger than 0."}),V(a==="NWC",function(){return"Error in conv1d: got dataFormat of ".concat(a," but only NWC is currently supported.")});var p=be(u,[1,u.shape[0],u.shape[1],u.shape[2]]),d=be(l,[l.shape[0],1,l.shape[1],l.shape[2]]),f=[1,n],h=[1,i],m="NHWC",v=Em(d,p,f,r,m,h,o);return c?be(v,[v.shape[2],v.shape[3]]):be(v,[v.shape[0],v.shape[2],v.shape[3]])}var MH=H({conv1d_:OH});function PH(e,t,n,r,a,i,o){i===void 0&&(i="NHWC"),V(e.length===t.rank,function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")});var s=e,u=t,l=!1;t.rank===3&&(l=!0,u=be(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),V(s.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(s.length,".")}),V(u.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(u.rank)}),V(n.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank)});var c=i==="NHWC"?s[3]:s[1],p=i==="NHWC"?u.shape[3]:u.shape[1];V(c===n.shape[2],function(){return"Error in conv2dDerInput: depth of input (".concat(c,") must ")+"match input depth for filter ".concat(n.shape[2],".")}),V(p===n.shape[3],function(){return"Error in conv2dDerInput: depth of output (".concat(p,") must ")+"match output depth for filter ".concat(n.shape[3],".")}),$i("conv2dDerInput",a,o);var d={dy:u,filter:n},f={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,inputShape:s},h=j.runKernel(w7,d,f);return l?be(h,[h.shape[1],h.shape[2],h.shape[3]]):h}var Nk=H({conv2DBackpropInput_:PH});function BH(e,t,n,r,a,i){var o=O(e,"x","conv2dTranspose"),s=O(t,"filter","conv2dTranspose");return Nk(n,o,s,r,a,"NHWC",i)}var LH=H({conv2dTranspose_:BH});function zH(e,t,n,r,a,i){a===void 0&&(a="NDHWC"),i===void 0&&(i=[1,1,1]);var o=O(e,"x","conv3d"),s=O(t,"filter","conv3d"),u=o,l=!1;o.rank===4&&(l=!0,u=be(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),V(u.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank ".concat(u.rank,".")}),V(s.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+"".concat(s.rank,".")}),V(u.shape[4]===s.shape[3],function(){return"Error in conv3d: depth of input (".concat(u.shape[4],") must match ")+"input depth for filter ".concat(s.shape[3],".")}),V(Ps(n,i),function(){return"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")}),V(a==="NDHWC",function(){return"Error in conv3d: got dataFormat of ".concat(a," but only NDHWC is currently supported.")}),V(wl(i),function(){return"Error in conv3D: Dilated rates should be larger than 0."}),V(wl(n),function(){return"Error in conv3D: Strides should be larger than 0."});var c={x:u,filter:s},p={strides:n,pad:r,dataFormat:a,dilations:i},d=j.runKernel(x7,c,p);return l?be(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}var $H=H({conv3d_:zH});function VH(e,t,n,r,a){V(e.length===t.rank,function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")});var i=e,o=t,s=!1;t.rank===4&&(s=!0,o=be(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),i=[1,e[0],e[1],e[2],e[3]]);var u=i[4],l=o.shape[4];V(i.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(i.length,".")}),V(o.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(o.rank)}),V(n.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank)}),V(u===n.shape[3],function(){return"Error in conv3dDerInput: depth of input (".concat(u,") must ")+"match input depth for filter ".concat(n.shape[3],".")}),V(l===n.shape[4],function(){return"Error in conv3dDerInput: depth of output (".concat(l,") must ")+"match output depth for filter ".concat(n.shape[4],".")});var c={dy:o,filter:n},p={pad:a,strides:r,inputShape:i},d=j.runKernel(S7,c,p);return s?be(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}var WH=H({conv3DBackpropInput_:VH});function UH(e,t,n,r,a){var i=O(e,"x","conv3dTranspose"),o=O(t,"filter","conv3dTranspose");return WH(n,i,o,r,a)}var GH=H({conv3dTranspose_:UH});function qH(e){var t=O(e,"x","cos","float32"),n={x:t};return j.runKernel(k7,n)}var HH=H({cos_:qH});function jH(e){var t=O(e,"x","cosh","float32"),n={x:t};return j.runKernel(N7,n)}var KH=H({cosh_:jH});function XH(e,t,n,r){t===void 0&&(t=0),n===void 0&&(n=!1),r===void 0&&(r=!1);var a=O(e,"x","cumprod"),i={x:a},o={axis:t,exclusive:n,reverse:r};return j.runKernel(T7,i,o)}var YH=H({cumprod_:XH});function JH(e,t,n,r){t===void 0&&(t=0),n===void 0&&(n=!1),r===void 0&&(r=!1);var a=O(e,"x","cumsum"),i={x:a},o={axis:t,exclusive:n,reverse:r};return j.runKernel(E7,i,o)}var ZH=H({cumsum_:JH});function QH(e,t,n,r){r===void 0&&(r=!1);var a=O(e,"x","denseBincount"),i=O(t,"weights","denseBincount");V(a.dtype==="int32",function(){return"Error in denseBincount: input "+"dtype must be int32, but got ".concat(a.dtype)}),V(a.rank<=2,function(){return"Error in denseBincount: input must be at most rank 2, but got "+"rank ".concat(a.rank,".")}),V(n>=0,function(){return"size must be non-negative, but got ".concat(n,".")}),V(i.size===a.size||i.size===0,function(){return"Error in denseBincount: weights must have the same shape as x or "+"0-length, but got x shape: ".concat(a.shape,", weights shape: ")+"".concat(i.shape,".")});var o={x:a,weights:i},s={size:n,binaryOutput:r};return j.runKernel(C7,o,s)}var ej=H({denseBincount_:QH});function tj(e,t,n){n===void 0&&(n="NHWC");var r=O(e,"x","depthToSpace","float32"),a=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],o=n==="NHWC"?r.shape[3]:r.shape[1];V(t>1,function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(t)}),V(a*t>=0,function(){return`Negative dimension size caused by overflow when multiplying
    `.concat(a," and ").concat(t,`  for depthToSpace with input shape
    `).concat(r.shape)}),V(i*t>=0,function(){return`Negative dimension size caused by overflow when multiplying
    `.concat(i," and ").concat(t,` for depthToSpace with input shape
        `).concat(r.shape)}),V(o%(t*t)===0,function(){return"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(o," for depthToSpace with input shape ").concat(r.shape)});var s={x:r},u={blockSize:t,dataFormat:n};return j.runKernel(D7,s,u)}var nj=H({depthToSpace_:tj});function rj(e,t,n,r,a,i,o){a===void 0&&(a="NHWC"),i===void 0&&(i=[1,1]);var s=O(e,"x","depthwiseConv2d","float32"),u=O(t,"filter","depthwiseConv2d","float32"),l=s,c=!1;s.rank===3&&(c=!0,l=be(s,[1,s.shape[0],s.shape[1],s.shape[2]])),V(l.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(l.rank,".")}),V(u.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(u.rank,".")});var p=a==="NHWC"?l.shape[3]:l.shape[1];V(p===u.shape[2],function(){return"Error in depthwiseConv2d: number of input channels "+"(".concat(p,") must match the inChannels dimension in ")+"filter ".concat(u.shape[2],".")}),$i("depthwiseConv2d",r,o);var d={x:l,filter:u},f={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},h=j.runKernel(_7,d,f);return c?be(h,[h.shape[1],h.shape[2],h.shape[3]]):h}var sy=H({depthwiseConv2d_:rj});function aj(e){var t=O(e,"x","diag"),n={x:t};return j.runKernel(R7,n)}var ij=H({diag_:aj});function oj(e,t,n,r,a,i){a===void 0&&(a=[1,1]),i===void 0&&(i="NHWC");var o=O(e,"x","dilation2d"),s=O(t,"filter","dilation2d");V(o.rank===3||o.rank===4,function(){return"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(o.rank,".")}),V(s.rank===3,function(){return"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(s.rank,".")}),V(i==="NHWC",function(){return"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(i)});var u=o,l=!1;o.rank===3&&(u=be(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=!0),V(u.shape[3]===s.shape[2],function(){return"Error in dilation2d:  input and filter must have the same depth: ".concat(u.shape[3]," vs ").concat(s.shape[2])});var c={x:u,filter:s},p={strides:n,pad:r,dilations:a},d=j.runKernel(O7,c,p);return l?be(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var sj=H({dilation2d_:oj});function Tk(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var i=n-1-a,o=e[i]||1,s=t[t.length-1-a]||1;s>1&&o===1&&r.unshift(i)}return r}function uy(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],i=t.length-r-1,o=t[i];(a==null||a===1&&o>1)&&n.unshift(i)}return n}function br(e,t){for(var n=Math.max(e.length,t.length),r=new Array(n),a=0;a<n;a++){var i=e[e.length-a-1];i==null&&(i=1);var o=t[t.length-a-1];if(o==null&&(o=1),i===1)r[n-a-1]=o;else if(o===1)r[n-a-1]=i;else if(i!==o){var s="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(s)}else r[n-a-1]=i}return r}var uj={__proto__:null,assertAndGetBroadcastShape:br,getBroadcastDims:Tk,getReductionAxes:uy};function lj(e,t){var n,r=O(e,"a","equal","string_or_numeric"),a=O(t,"b","equal","string_or_numeric");n=Ie(Gn(r,a),2),r=n[0],a=n[1],br(r.shape,a.shape);var i={a:r,b:a};return j.runKernel(z7,i)}var Ek=H({equal_:lj});function cj(e,t,n){var r=O(t,"a","where"),a=O(n,"b","where"),i=O(e,"condition","where","bool"),o=br(br(i.shape,r.shape),a.shape),s=sm(i,o),u=sm(r,o),l=sm(a,o),c={condition:s,t:u,e:l};return j.runKernel(tS,c)}var yu=H({where_:cj});function pj(e){var t=O(e,"x","zerosLike"),n={x:t};return j.runKernel(RS,n)}var di=H({zerosLike_:pj});function dj(e,t){var n,r=O(e,"a","div"),a=O(t,"b","div");n=Ie(Gn(r,a),2),r=n[0],a=n[1];var i=vn(r,a),o=di(i),s=Ek(a,o);return yu(s,o,i)}var fj=H({divNoNan_:dj});function hj(e,t){var n=O(e,"t1","dot"),r=O(t,"t2","dot");V((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")});var a=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];if(V(a===i,function(){return"Error in dot: inner dimensions of inputs must match, but got "+"".concat(a," and ").concat(i,".")}),n.rank===1&&r.rank===1){var o=be(n,[1,-1]),s=be(r,[-1,1]),u=Xt(o,s);return be(u,[])}else if(n.rank===1&&r.rank===2){var o=be(n,[1,-1]),s=be(r,[r.shape[0],r.shape[1]]),u=Xt(o,s);return be(u,[u.size])}else if(n.rank===2&&r.rank===1){var s=be(r,[-1,1]),u=Xt(n,s);return be(u,[u.size])}else{var s=be(r,[r.shape[0],r.shape[1]]),u=Xt(n,s);return u}}var mj=H({dot_:hj});function vj(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t.map(function(i,o){return O(i,"tensors".concat(o),"einsum")}),a={equation:e};return j.runKernel(P7,r,a)}var jc=H({einsum_:vj});function gj(e){var t=O(e,"x","elu","float32"),n={x:t};return j.runKernel(B7,n)}var Ik=H({elu_:gj});function yj(e,t){var n=O(e,"x","ensureShape","string_or_numeric");if(!P9(n.shape,t))throw new Error("EnsureShape: Shape of tensor ".concat(n.shape," is not compatible with expected shape ").concat(t));return e}var bj=H({ensureShape_:yj});function wj(e){var t=O(e,"x","erf");V(t.dtype==="int32"||t.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),t.dtype==="int32"&&(t=bn(t,"float32"));var n={x:t};return j.runKernel(L7,n)}var xj=H({erf_:wj});function ly(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function Ck(e,t,n){for(var r=e.length+t.length,a=[],i=0,o=0,s=0;s<r;s++)n.indexOf(s)===-1?a.push(e[i++]):a.push(t[o++]);return a}function Sj(e,t){for(var n=[],r=e.length,a=0;a<r;a++)t.indexOf(a)===-1&&n.push(e[a]);var i=t.map(function(o){return e[o]});return[n,i]}function Cf(e,t){var n=t.map(function(r){return 1});return Ck(e,n,t)}function kj(e,t,n){V(ly(t,n),function(){return"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input.")})}function Nj(e,t){if(ly(e,t))return null;for(var n=[],r=0;r<t;++r)e.indexOf(r)===-1&&n.push(r);return e.forEach(function(a){return n.push(a)}),n}function Tj(e){return e.map(function(t,n){return[n,t]}).sort(function(t,n){return t[1]-n[1]}).map(function(t){return t[0]})}function Ej(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}function Ij(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=O(e,"x","max"),a={x:r},i={reductionIndices:t,keepDims:n};return j.runKernel(hx,a,i)}var ep=H({max_:Ij});function Cj(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=O(e,"x","min"),a={x:r},i={axis:t,keepDims:n};return j.runKernel(wx,a,i)}var zg=H({min_:Cj});function Dj(e,t){var n,r=O(e,"base","pow"),a=O(t,"exp","pow");n=Ie(Gn(r,a),2),r=n[0],a=n[1];var i={a:r,b:a};return j.runKernel(Mx,i)}var mf=H({pow_:Dj});function rn(e,t){if((_r(e)&&t!=="string"||Array.isArray(e))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&_r(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");var n=[],r=[];return Nu(e,n,r,t)}function _j(e){var t=O(e,"x","sqrt","float32"),n={x:t};return j.runKernel(lS,n)}var Fs=H({sqrt_:_j});function Aj(e){var t=O(e,"x","square"),n={};return j.runKernel("Square",{x:t},n)}var yo=H({square_:Aj});function Fj(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=O(e,"x","sum");r.dtype==="bool"&&(r=bn(r,"int32"));var a={x:r},i={axis:t,keepDims:n};return j.runKernel(cS,a,i)}var mn=H({sum_:Fj});function Rj(e,t,n,r){t===void 0&&(t="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1),e=O(e,"x","norm");var a=Dk(e,t,n),i=a.shape;if(r){var o=xf(n,e.shape);i=Cf(a.shape,o)}return be(a,i)}function Dk(e,t,n){if(n===void 0&&(n=null),e.rank===0)return pi(e);if(e.rank!==1&&n===null)return Dk(be(e,[-1]),t,n);if(e.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(t===1)return mn(pi(e),n);if(t===1/0)return ep(pi(e),n);if(t===-1/0)return zg(pi(e),n);if(t==="euclidean"||t===2)return Fs(mn(mf(pi(e),rn(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&n.length===2){if(t===1)return ep(mn(pi(e),n[0]),n[1]-1);if(t===1/0)return ep(mn(pi(e),n[1]),n[0]);if(t===-1/0)return zg(mn(pi(e),n[1]),n[0]);if(t==="fro"||t==="euclidean")return Fs(mn(yo(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}var Im=H({norm_:Rj});function Oj(e,t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),Im(e,"euclidean",t,n)}var Mj=H({euclideanNorm_:Oj});function Pj(e){var t=O(e,"x","exp"),n={x:t};return j.runKernel($7,n)}var xl=H({exp_:Pj});function Bj(e,t){t===void 0&&(t=0);var n=O(e,"x","expandDims","string_or_numeric");V(t<=n.rank,function(){return"Axis must be <= rank of the tensor"});var r={input:n},a={dim:t};return j.runKernel(V7,r,a)}var fu=H({expandDims_:Bj});function Lj(e){var t=O(e,"x","expm1"),n={x:t};return j.runKernel(W7,n)}var zj=H({expm1_:Lj});function $j(e,t){var n=O(e,"x","tile","string_or_numeric");V(n.rank===t.length,function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,".")});var r={x:n},a={reps:t};return j.runKernel(Qg,r,a)}var rf=H({tile_:$j});function Vj(e,t,n,r){r===void 0&&(r="float32"),t==null&&(t=e);for(var a=As([e,t],r),i=e<=t?e:t,o=0;o<i;++o)a.set(1,o,o);var s=be(a.toTensor(),[e,t]);if(n==null)return s;if(n.length===1)return rf(fu(s,0),[n[0],1,1]);if(n.length===2)return rf(fu(fu(s,0),0),[n[0],n[1],1,1]);if(n.length===3)return rf(fu(fu(fu(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}var _k=H({eye_:Vj});function Wj(e){var t=O(e,"x","floor","float32"),n={x:t};return j.runKernel(H7,n)}var Ak=H({floor_:Wj});function Uj(e,t,n,r){n===void 0&&(n=0),r===void 0&&(r=0);var a=O(e,"x","gather"),i=O(t,"indices","gather","int32"),o={x:a,indices:i},s={axis:n,batchDims:r};return j.runKernel(X7,o,s)}var Fk=H({gather_:Uj});function Gj(e,t){var n,r=O(e,"a","greater","string_or_numeric"),a=O(t,"b","greater","string_or_numeric");n=Ie(Gn(r,a),2),r=n[0],a=n[1],br(r.shape,a.shape);var i={a:r,b:a};return j.runKernel(J7,i)}var Cm=H({greater_:Gj});function qj(e,t){var n,r=O(e,"a","greaterEqual","string_or_numeric"),a=O(t,"b","greaterEqual","string_or_numeric");n=Ie(Gn(r,a),2),r=n[0],a=n[1],br(r.shape,a.shape);var i={a:r,b:a};return j.runKernel(Z7,i)}var Rk=H({greaterEqual_:qj});function Hj(e){var t=O(e,"input","imag"),n={input:t};return j.runKernel(ex,n)}var Dm=H({imag_:Hj});function jj(e){var t=O(e,"x","isFinite"),n={x:t};return j.runKernel(tx,n)}var Kj=H({isFinite_:jj});function Xj(e){var t=O(e,"x","isInf"),n={x:t};return j.runKernel(nx,n)}var Yj=H({isInf_:Xj});function Jj(e){var t=O(e,"x","isNaN"),n={x:t};return j.runKernel(rx,n)}var Zj=H({isNaN_:Jj});function Qj(e,t){t===void 0&&(t=.2);var n=O(e,"x","leakyRelu"),r={x:n},a={alpha:t};return j.runKernel(ax,r,a)}var Ok=H({leakyRelu_:Qj});function eK(e,t){var n,r=O(e,"a","less","string_or_numeric"),a=O(t,"b","less","string_or_numeric");n=Ie(Gn(r,a),2),r=n[0],a=n[1],br(r.shape,a.shape);var i={a:r,b:a};return j.runKernel(ix,i)}var $g=H({less_:eK});function tK(e,t){var n,r=O(e,"a","lessEqual","string_or_numeric"),a=O(t,"b","lessEqual","string_or_numeric");n=Ie(Gn(r,a),2),r=n[0],a=n[1],br(r.shape,a.shape);var i={a:r,b:a};return j.runKernel(ox,i)}var cy=H({lessEqual_:tK});function nK(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");var r={start:e,stop:t,num:n};return j.runKernel(sx,{},r)}function rK(e,t,n,r,a){t===void 0&&(t=5),n===void 0&&(n=1),r===void 0&&(r=1),a===void 0&&(a=.5);var i=O(e,"x","localResponseNormalization");V(i.rank===4||i.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `.concat(i.rank,".")}),V(tp(t),function(){return"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(t,".")});var o=i,s=!1;i.rank===3&&(s=!0,o=be(i,[1,i.shape[0],i.shape[1],i.shape[2]]));var u={x:o},l={depthRadius:t,bias:n,alpha:r,beta:a},c=j.runKernel(fx,u,l);return s?be(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var aK=H({localResponseNormalization_:rK});function iK(e){var t=O(e,"x","log","float32"),n={x:t};return j.runKernel(ux,n)}var vf=H({log_:iK});function oK(e){var t=O(e,"x","log1p"),n={x:t};return j.runKernel(lx,n)}var Mk=H({log1p_:oK});function sK(e){return V(bu(e),function(){return"The f passed in grad(f) must be a function"}),function(t,n){var r=O(t,"x","tf.grad","string_or_numeric"),a=n!=null?O(n,"dy","tf.grad"):null;return j.tidy(function(){var i=j.gradients(function(){return e(r)},[r],a),o=i.value,s=i.grads;return a!=null&&pa(o.shape,a.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),_m(s),s[0]})}}function uK(e){return V(bu(e),function(){return"The f passed in grads(f) must be a function"}),function(t,n){V(Array.isArray(t),function(){return"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s"});var r=pf(t,"args","tf.grads","string_or_numeric"),a=n!=null?O(n,"dy","tf.grads"):null;return j.tidy(function(){var i=j.gradients(function(){return e.apply(void 0,Mt([],Ie(r),!1))},r,a),o=i.value,s=i.grads;return a!=null&&pa(o.shape,a.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),_m(s),s})}}function lK(e){return V(bu(e),function(){return"The f passed in valueAndGrad(f) must be a function"}),function(t,n){V(t instanceof gr,function(){return"The x passed in valueAndGrad(f)(x) must be a tensor"}),V(n==null||n instanceof gr,function(){return"The dy passed in valueAndGrad(f)(x, dy) must be a tensor"});var r=j.gradients(function(){return e(t)},[t],n),a=r.grads,i=r.value;return _m(a),{grad:a[0],value:i}}}function cK(e){return V(bu(e),function(){return"The f passed in valueAndGrads(f) must be a function"}),function(t,n){V(Array.isArray(t)&&t.every(function(a){return a instanceof gr}),function(){return"The args passed in valueAndGrads(f)(args) must be array of tensors"}),V(n==null||n instanceof gr,function(){return"The dy passed in valueAndGrads(f)(args, dy) must be a tensor"});var r=j.gradients(function(){return e.apply(void 0,Mt([],Ie(t),!1))},t,n);return n!=null&&pa(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),_m(r.grads),r}}function Pk(e,t){V(bu(e),function(){return"The f passed in variableGrads(f) must be a function"}),V(t==null||Array.isArray(t)&&t.every(function(p){return p instanceof cf}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var n=t!=null;if(!n){t=[];for(var r in j.registeredVariables)t.push(j.registeredVariables[r])}var a=n?t.filter(function(p){return!p.trainable}):null,i=t.length;t=t.filter(function(p){return p.trainable}),V(t.length>0,function(){return"variableGrads() expects at least one of the input variables to "+"be trainable, but none of the ".concat(i," variables is ")+"trainable."});var o=!0,s=j.gradients(e,t,null,o),u=s.value,l=s.grads;V(l.some(function(p){return p!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),V(u.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it "+"returned a rank-".concat(u.rank," tensor")});var c={};return t.forEach(function(p,d){l[d]!=null&&(c[p.name]=l[d])}),a?.forEach(function(p){return c[p.name]=null}),{value:u,grads:c}}function ts(e){return j.customGrad(e)}function _m(e){var t=e.filter(function(n){return n==null}).length;if(t>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}function pK(e){var t=O(e,"x","neg"),n={x:t};return j.runKernel(Ex,n)}var Qo=H({neg_:pK});function dK(e){var t=O(e,"x","softplus"),n={x:t};return j.runKernel(uS,n)}var Bk=H({softplus_:dK});function fK(e){var t=O(e,"x","logSigmoid"),n=ts(function(r){var a=Qo(Bk(Qo(r))),i=function(o){var s=je(o,Qc(Qo(r)));return s};return{value:a,gradFunc:i}});return n(t)}var hK=H({logSigmoid_:fK});function mK(e,t){var n,r=O(e,"a","sub"),a=O(t,"b","sub");n=Ie(Gn(r,a),2),r=n[0],a=n[1];var i={a:r,b:a};return j.runKernel(TS,i)}var Ot=H({sub_:mK});function vK(e,t){t===void 0&&(t=-1);var n=O(e,"logits","logSoftmax");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(t));var r=ts(function(a,i){var o=!0,s=ep(a,t,!0),u=Ot(a,s),l=Ot(bn(u,"float32"),vf(mn(xl(u),t,o)));i([l]);var c=function(p,d){var f=Ie(d,1),h=f[0],m=!0,v=xl(h);return Ot(p,je(mn(p,t,m),v))};return{value:l,gradFunc:c}});return r(n)}var gK=H({logSoftmax_:vK});function yK(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=O(e,"x","logSumExp"),a=xf(t,r.shape),i=ep(r,a,!0),o=Ot(r,i),s=xl(o),u=mn(s,a),l=vf(u),c=Tt(be(i,l.shape),l);if(n){var p=Cf(c.shape,a);return be(c,p)}return c}var Lk=H({logSumExp_:yK});function bK(e,t){var n=O(e,"a","logicalAnd","bool"),r=O(t,"b","logicalAnd","bool");br(n.shape,r.shape);var a={a:n,b:r};return j.runKernel(cx,a)}var mm=H({logicalAnd_:bK});function wK(e){var t=O(e,"x","logicalNot","bool"),n={x:t};return j.runKernel(px,n)}var zk=H({logicalNot_:wK});function xK(e,t){var n=O(e,"a","logicalOr","bool"),r=O(t,"b","logicalOr","bool");br(n.shape,r.shape);var a={a:n,b:r};return j.runKernel(dx,a)}var $k=H({logicalOr_:xK});function SK(e,t){var n=O(e,"a","logicalXor","bool"),r=O(t,"b","logicalXor","bool");return br(n.shape,r.shape),mm($k(e,t),zk(mm(e,t)))}var kK=H({logicalXor_:SK});var rm=2147483648;function NK(e,t,n){n===void 0&&(n="left");var r=O(e,"sortedSequence","searchSorted"),a=O(t,"values","searchSorted"),i=r.shape[r.shape.length-1],o=a.shape[a.shape.length-1],s=be(r,[-1,i]),u=be(a,[-1,o]);if(s.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(s.shape[0]!==u.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(Qt(u.shape)>=rm)throw new Error("values tensor size must less than ".concat(rm));if(s.shape[1]>=rm)throw new Error("trailing dim_size must less than ".concat(rm," for int32 output type, was ").concat(s.shape[1]));var l={sortedSequence:s,values:u},c={side:n};return j.runKernel(eS,l,c)}var py=H({searchSorted_:NK});function TK(e,t){return py(e,t,"left")}function EK(e,t,n,r,a){var i=O(e,"x","maxPool"),o=1,s=i,u=!1;i.rank===3&&(u=!0,s=be(i,[1,i.shape[0],i.shape[1],i.shape[2]])),V(s.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(s.rank,".")}),V(Ps(n,o),function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(o,"'")}),$i("maxPool",r,a);var l={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a},p=j.runKernel(vx,l,c);return u?be(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var Vk=H({maxPool_:EK});function IK(e,t,n,r,a,i){t===void 0&&(t=[1,1,1]),i===void 0&&(i="NDHWC");var o=O(e,"x","maxPool3d"),s=o,u=!1;o.rank===4&&(u=!0,s=be(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),V(s.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank ".concat(s.rank,".")}),V(i==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i)}),$i("maxPool3d",r,a);var l={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},p=j.runKernel(gx,l,c);return u?be(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var CK=H({maxPool3d_:IK});function DK(e,t,n,r,a){a===void 0&&(a=!1);var i=O(e,"x","maxPoolWithArgmax"),o={x:i},s={filterSize:t,strides:n,pad:r,includeBatchInIndex:a},u=j.runKernel(yx,o,s);return{result:u[0],indexes:u[1]}}var _K=H({maxPoolWithArgmax_:DK});function AK(e,t){var n,r=O(e,"a","maximum"),a=O(t,"b","maximum");n=Ie(Gn(r,a),2),r=n[0],a=n[1],r.dtype==="bool"&&(r=bn(r,"int32"),a=bn(a,"int32")),br(r.shape,a.shape);var i={a:r,b:a};return j.runKernel(mx,i)}var Wk=H({maximum_:AK});function FK(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=O(e,"x","mean"),a={x:r},i={axis:t,keepDims:n};return j.runKernel(bx,a,i)}var vm=H({mean_:FK});function ap(e,t){if(t===void 0&&(t="float32"),$a(e),t==="complex64"){var n=ap(e,"float32"),r=ap(e,"float32");return xu(n,r)}var a=xm(Qt(e),t);return j.makeTensor(a,e,t)}function ml(e,t){if(t===void 0&&(t="float32"),$a(e),t==="complex64"){var n=ml(e,"float32"),r=ap(e,"float32");return xu(n,r)}var a=jg(Qt(e),t);return j.makeTensor(a,e,t)}function RK(e,t,n){var r=n===void 0?{}:n,a=r.indexing,i=a===void 0?"xy":a;if(i!=="xy"&&i!=="ij")throw new TypeError("".concat(i," is not a valid third argument to meshgrid"));if(e===void 0)return[];var o=O(e,"x","meshgrid",e instanceof gr?e.dtype:"float32");if(t===void 0)return[o];var s=O(t,"y","meshgrid",t instanceof gr?t.dtype:"float32"),u=Qt(o.shape),l=Qt(s.shape);return i==="xy"?(o=be(o,[1,-1]),s=be(s,[-1,1]),[Xt(ml([l,1],o.dtype),o),Xt(s,ml([1,u],s.dtype))]):(o=be(o,[-1,1]),s=be(s,[1,-1]),[Xt(o,ml([1,l],o.dtype)),Xt(ml([u,1],s.dtype),s)])}function OK(e,t){var n,r=O(e,"a","minimum"),a=O(t,"b","minimum");n=Ie(Gn(r,a),2),r=n[0],a=n[1],r.dtype==="bool"&&(r=bn(r,"int32"),a=bn(a,"int32")),br(r.shape,a.shape);var i={a:r,b:a};return j.runKernel(xx,i)}var gm=H({minimum_:OK});function MK(e,t,n){V(n==="reflect"||n==="symmetric",function(){return"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,".")});var r=O(e,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");V(t.length===r.rank,function(){return"Padding doesn't match input. Must be ".concat(r.rank,". ")+"Got ".concat(t.length,".")});for(var a=n==="reflect"?1:0,i=function(l){V(t[l].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),V(t[l][0]>=0&&t[l][0]<=r.shape[l]-a&&t[l][1]>=0&&t[l][1]<=r.shape[l]-a,function(){return"Padding in dimension ".concat(l," cannot be greater than or equal ")+"to ".concat(r.shape[l]-a," or less than 0 for input of ")+"shape ".concat(r.shape)})},o=0;o<r.rank;o++)i(o);var s={paddings:t,mode:n},u={x:r};return j.runKernel(Sx,u,s)}var PK=H({mirrorPad_:MK});function BK(e,t){var n,r=O(e,"a","mod"),a=O(t,"b","mod");n=Ie(Gn(r,a),2),r=n[0],a=n[1];var i={a:r,b:a};return j.runKernel(kx,i)}var LK=H({mod_:BK});function zK(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1),e=O(e,"x","moments");var r=xf(t,e.shape),a=vm(e,r,n),i=a.shape;n||(i=Cf(a.shape,r));var o=yo(Ot(bn(e,"float32"),be(a,i))),s=vm(o,r,n);return{mean:a,variance:s}}var $K=H({moments_:zK});function VK(e,t,n,r){for(var a=O(t,"data","multiRNNCell"),i=pf(n,"c","multiRNNCell"),o=pf(r,"h","multiRNNCell"),s=a,u=[],l=0;l<e.length;l++){var c=e[l](s,i[l],o[l]);u.push(c[0]),u.push(c[1]),s=c[1]}for(var p=[],d=[],l=0;l<u.length;l+=2)p.push(u[l]),d.push(u[l+1]);return[p,d]}var WK=H({multiRNNCell_:VK});function UK(e,t,n,r){r===void 0&&(r=!1);var a=O(e,"logits","multinomial"),i=a.size,o=a.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+"".concat(i,"."));if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is ".concat(o));n=n||Math.random();var s=o===1?be(a,[1,-1]):a,u={logits:s},l={numSamples:t,seed:n,normalized:r},c=j.runKernel(Nx,u,l);return o===1?be(c,[c.size]):c}var GK=H({multinomial_:UK});function qK(e,t){var n,r=O(e,"a","notEqual","string_or_numeric"),a=O(t,"b","notEqual","string_or_numeric");n=Ie(Gn(r,a),2),r=n[0],a=n[1],br(r.shape,a.shape);var i={a:r,b:a};return j.runKernel(Ix,i)}var Uk=H({notEqual_:qK});function HK(e,t,n,r,a){if(n===void 0&&(n=1),r===void 0&&(r=0),a===void 0&&(a="int32"),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));var i=O(e,"indices","oneHot","int32"),o={indices:i},s={dtype:a,depth:t,onValue:n,offValue:r};return j.runKernel(Fx,o,s)}var Vg=H({oneHot_:HK});function jK(e){var t=O(e,"x","onesLike"),n={x:t};return j.runKernel(Ax,n)}var KK=H({onesLike_:jK});function XK(e,t){var n=O(e,"v1","outerProduct"),r=O(t,"v2","outerProduct");V(n.rank===1&&r.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")});var a=be(n,[-1,1]),i=be(r,[1,-1]);return Xt(a,i)}var YK=H({outerProduct_:XK});function JK(e,t,n){n===void 0&&(n=0);var r=O(e,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:t,constantValue:n},i={x:r};return j.runKernel(Ox,i,a)}var Df=H({pad_:JK});function ZK(e,t,n){return n===void 0&&(n=0),V(t.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),Df(e,[t],n)}var QK=H({pad1d_:ZK});function eX(e,t,n){return n===void 0&&(n=0),V(t.length===2&&t[0].length===2&&t[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Df(e,t,n)}var tX=H({pad2d_:eX});function nX(e,t,n){return n===void 0&&(n=0),V(t.length===3&&t[0].length===2&&t[1].length===2&&t[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Df(e,t,n)}var rX=H({pad3d_:nX});function aX(e,t,n){return n===void 0&&(n=0),V(t.length===4&&t[0].length===2&&t[1].length===2&&t[2].length===2&&t[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Df(e,t,n)}var iX=H({pad4d_:aX});function oX(e,t,n){var r=O(e,"x","spaceToBatchND");V(r.rank>=1+t.length,function(){return"input rank ".concat(r.rank," should be > than [blockShape] ").concat(t.length)}),V(n.length===t.length,function(){return"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)}),V(r.shape.reduce(function(o,s,u){return u>0&&u<=t.length?o&&(s+n[u-1][0]+n[u-1][1])%t[u-1]===0:o},!0),function(){return"input spatial dimensions ".concat(r.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())});var a={x:r},i={blockShape:t,paddings:n};return j.runKernel(pS,a,i)}var Gk=H({spaceToBatchND_:oX});function sX(e,t,n,r,a,i,o){a==null&&(a=[1,1]),i==null&&(i=1),r===0&&(r="valid");var s=O(e,"x","maxPool"),u=s,l=!1;s.rank===3&&(l=!0,u=be(s,[1,s.shape[0],s.shape[1],s.shape[2]])),V(Ps(i,a),function(){return"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(a,"'")});var c=yk(u.shape,t,i,a,r),p=[c.dilationHeight,c.dilationWidth],d;r==="same"?d=lX([c.filterHeight,c.filterWidth],p):d=[[0,0],[0,0]];var f=p[0]===1&&p[1]===1,h=Ie(uX([c.inHeight,c.inWidth],p,d),2),m=h[0],v=h[1],g=f?r:"valid",y=f?u:Gk(u,p,m),w=n==="avg"?function(){return xk(y,t,i,g,o)}:function(){return Vk(y,t,i,g,o)},b=w(),x=f?b:Sk(b,p,v);return l?be(x,[x.shape[1],x.shape[2],x.shape[3]]):x}function uX(e,t,n){var r=n.map(function(c){return c[0]}),a=n.map(function(c){return c[1]}),i=e.concat(r,a),o=t.map(function(c,p){return(c-i[p]%c)%c}),s=a.map(function(c,p){return c+o[p]}),u=t.map(function(c,p){return[r[p],s[p]]}),l=t.map(function(c,p){return[0,o[p]]});return[u,l]}function lX(e,t){var n=e.map(function(o,s){return o+(o-1)*(t[s]-1)}),r=n.map(function(o){return o-1}),a=r.map(function(o){return Math.floor(o/2)}),i=r.map(function(o,s){return o-a[s]});return r.map(function(o,s){return[a[s],i[s]]})}var cX=H({pool_:sX});function pX(e,t){var n=O(e,"x","prelu"),r=O(t,"alpha","prelu"),a={x:n,alpha:r};return j.runKernel(Px,a)}var qk=H({prelu_:pX});function dX(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=O(e,"x","prod");r.dtype==="bool"&&(r=bn(r,"int32"));var a={x:r},i={axis:t,keepDims:n};return j.runKernel(Bx,a,i)}var fX=H({prod_:dX});function hX(e,t,n,r){var a=e.map(function(c,p){return O(c,"tensors".concat(p),"raggedGather","int32")}),i=O(t,"paramsDenseValues","raggedGather"),o=O(n,"indices","raggedGather","int32"),s={paramsNestedSplits:a,paramsDenseValues:i,indices:o},u={outputRaggedRank:r},l=j.runKernel(Lx,s,u);return{outputNestedSplits:l.slice(0,l.length-1),outputDenseValues:l[l.length-1]}}var mX=H({raggedGather_:hX});function vX(e,t,n){var r=O(e,"starts","raggedRange"),a=O(t,"limits","raggedRange",r.dtype),i=O(n,"deltas","raggedRange",r.dtype),o={starts:r,limits:a,deltas:i},s=j.runKernel(zx,o);return{rtNestedSplits:s[0],rtDenseValues:s[1]}}var gX=H({raggedRange_:vX});function yX(e,t,n,r,a){var i=O(e,"shape","raggedTensorToTensor","int32"),o=O(t,"values","raggedTensorToTensor"),s=O(n,"defaultValue","raggedTensorToTensor",o.dtype),u=r.map(function(p,d){return O(p,"tensors".concat(d),"raggedTensorToTensor","int32")}),l={shape:i,values:o,defaultValue:s,rowPartitionTensors:u},c={rowPartitionTypes:a};return j.runKernel($x,l,c)}var bX=H({raggedTensorToTensor_:yX});function wX(e,t,n){$a(e);var r=Qt(e),a=null;if(n==null||n==="float32")a=new Float32Array(r);else if(n==="int32")a=new Int32Array(r);else if(n==="bool")a=new Uint8Array(r);else throw new Error("Unknown data type ".concat(n));for(var i=0;i<r;i++)a[i]=t();return j.makeTensor(a,e,n)}var xX=H({rand_:wX}),Hk={exports:{}};(function(e){(function(t,n,r){function a(u){var l=this,c=s();l.next=function(){var p=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=p-(l.c=p|0)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(u),l.s0<0&&(l.s0+=1),l.s1-=c(u),l.s1<0&&(l.s1+=1),l.s2-=c(u),l.s2<0&&(l.s2+=1),c=null}function i(u,l){return l.c=u.c,l.s0=u.s0,l.s1=u.s1,l.s2=u.s2,l}function o(u,l){var c=new a(u),p=l&&l.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,p&&(typeof p=="object"&&i(p,c),d.state=function(){return i(c,{})}),d}function s(){var u=4022871197,l=function(c){c=String(c);for(var p=0;p<c.length;p++){u+=c.charCodeAt(p);var d=.02519603282416938*u;u=d>>>0,d-=u,d*=u,u=d>>>0,d-=u,u+=d*4294967296}return(u>>>0)*23283064365386963e-26};return l}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.alea=o})(Nl,e,!1)})(Hk);var SX=Hk.exports,jk={exports:{}};(function(e){(function(t,n,r){function a(s){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var p=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^p^p>>>8},s===(s|0)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,u.next()}function i(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u}function o(s,u){var l=new a(s),c=u&&u.state,p=function(){return(l.next()>>>0)/4294967296};return p.double=function(){do var d=l.next()>>>11,f=(l.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},p.int32=l.next,p.quick=p,c&&(typeof c=="object"&&i(c,l),p.state=function(){return i(l,{})}),p}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor128=o})(Nl,e,!1)})(jk);var kX=jk.exports,Kk={exports:{}};(function(e){(function(t,n,r){function a(s){var u=this,l="";u.next=function(){var p=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^(p^p<<1))|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,s===(s|0)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,c==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function i(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u.v=s.v,u.d=s.d,u}function o(s,u){var l=new a(s),c=u&&u.state,p=function(){return(l.next()>>>0)/4294967296};return p.double=function(){do var d=l.next()>>>11,f=(l.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},p.int32=l.next,p.quick=p,c&&(typeof c=="object"&&i(c,l),p.state=function(){return i(l,{})}),p}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorwow=o})(Nl,e,!1)})(Kk);var NX=Kk.exports,Xk={exports:{}};(function(e){(function(t,n,r){function a(s){var u=this;u.next=function(){var c=u.x,p=u.i,d,f;return d=c[p],d^=d>>>7,f=d^d<<24,d=c[p+1&7],f^=d^d>>>10,d=c[p+3&7],f^=d^d>>>3,d=c[p+4&7],f^=d^d<<7,d=c[p+7&7],d=d^d<<13,f^=d^d<<9,c[p]=f,u.i=p+1&7,f};function l(c,p){var d,f=[];if(p===(p|0))f[0]=p;else for(p=""+p,d=0;d<p.length;++d)f[d&7]=f[d&7]<<15^p.charCodeAt(d)+f[d+1&7]<<13;for(;f.length<8;)f.push(0);for(d=0;d<8&&f[d]===0;++d);for(d==8?f[7]=-1:f[d],c.x=f,c.i=0,d=256;d>0;--d)c.next()}l(u,s)}function i(s,u){return u.x=s.x.slice(),u.i=s.i,u}function o(s,u){s==null&&(s=+new Date);var l=new a(s),c=u&&u.state,p=function(){return(l.next()>>>0)/4294967296};return p.double=function(){do var d=l.next()>>>11,f=(l.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},p.int32=l.next,p.quick=p,c&&(c.x&&i(c,l),p.state=function(){return i(l,{})}),p}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorshift7=o})(Nl,e,!1)})(Xk);var TX=Xk.exports,Yk={exports:{}};(function(e){(function(t,n,r){function a(s){var u=this;u.next=function(){var c=u.w,p=u.X,d=u.i,f,h;return u.w=c=c+1640531527|0,h=p[d+34&127],f=p[d=d+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,h=p[d]=h^f,u.i=d,h+(c^c>>>16)|0};function l(c,p){var d,f,h,m,v,g=[],y=128;for(p===(p|0)?(f=p,p=null):(p=p+"\0",f=0,y=Math.max(y,p.length)),h=0,m=-32;m<y;++m)p&&(f^=p.charCodeAt((m+32)%p.length)),m===0&&(v=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,m>=0&&(v=v+1640531527|0,d=g[m&127]^=f+v,h=d==0?h+1:0);for(h>=128&&(g[(p&&p.length||0)&127]=-1),h=127,m=4*128;m>0;--m)f=g[h+34&127],d=g[h=h+1&127],f^=f<<13,d^=d<<17,f^=f>>>15,d^=d>>>12,g[h]=f^d;c.w=v,c.X=g,c.i=h}l(u,s)}function i(s,u){return u.i=s.i,u.w=s.w,u.X=s.X.slice(),u}function o(s,u){s==null&&(s=+new Date);var l=new a(s),c=u&&u.state,p=function(){return(l.next()>>>0)/4294967296};return p.double=function(){do var d=l.next()>>>11,f=(l.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},p.int32=l.next,p.quick=p,c&&(c.X&&i(c,l),p.state=function(){return i(l,{})}),p}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor4096=o})(Nl,e,!1)})(Yk);var EX=Yk.exports,Jk={exports:{}};(function(e){(function(t,n,r){function a(s){var u=this,l="";u.next=function(){var p=u.b,d=u.c,f=u.d,h=u.a;return p=p<<25^p>>>7^d,d=d-f|0,f=f<<24^f>>>8^h,h=h-p|0,u.b=p=p<<20^p>>>12^d,u.c=d=d-f|0,u.d=f<<16^d>>>16^h,u.a=h-p|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,s===Math.floor(s)?(u.a=s/4294967296|0,u.b=s|0):l+=s;for(var c=0;c<l.length+20;c++)u.b^=l.charCodeAt(c)|0,u.next()}function i(s,u){return u.a=s.a,u.b=s.b,u.c=s.c,u.d=s.d,u}function o(s,u){var l=new a(s),c=u&&u.state,p=function(){return(l.next()>>>0)/4294967296};return p.double=function(){do var d=l.next()>>>11,f=(l.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},p.int32=l.next,p.quick=p,c&&(typeof c=="object"&&i(c,l),p.state=function(){return i(l,{})}),p}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.tychei=o})(Nl,e,!1)})(Jk);var IX=Jk.exports,Zk={exports:{}};(function(e){(function(t,n,r){var a=256,i=6,o=52,s="random",u=r.pow(a,i),l=r.pow(2,o),c=l*2,p=a-1,d;function f(b,x,k){var N=[];x=x==!0?{entropy:!0}:x||{};var E=g(v(x.entropy?[b,w(n)]:b??y(),3),N),C=new h(N),R=function(){for(var A=C.g(i),M=u,$=0;A<l;)A=(A+$)*a,M*=a,$=C.g(1);for(;A>=c;)A/=2,M/=2,$>>>=1;return(A+$)/M};return R.int32=function(){return C.g(4)|0},R.quick=function(){return C.g(4)/4294967296},R.double=R,g(w(C.S),n),(x.pass||k||function(A,M,$,z){return z&&(z.S&&m(z,C),A.state=function(){return m(C,{})}),$?(r[s]=A,M):A})(R,E,"global"in x?x.global:this==r,x.state)}function h(b){var x,k=b.length,N=this,E=0,C=N.i=N.j=0,R=N.S=[];for(k||(b=[k++]);E<a;)R[E]=E++;for(E=0;E<a;E++)R[E]=R[C=p&C+b[E%k]+(x=R[E])],R[C]=x;(N.g=function(A){for(var M,$=0,z=N.i,L=N.j,B=N.S;A--;)M=B[z=p&z+1],$=$*a+B[p&(B[z]=B[L=p&L+M])+(B[L]=M)];return N.i=z,N.j=L,$})(a)}function m(b,x){return x.i=b.i,x.j=b.j,x.S=b.S.slice(),x}function v(b,x){var k=[],N=typeof b,E;if(x&&N=="object")for(E in b)try{k.push(v(b[E],x-1))}catch{}return k.length?k:N=="string"?b:b+"\0"}function g(b,x){for(var k=b+"",N,E=0;E<k.length;)x[p&E]=p&(N^=x[p&E]*19)+k.charCodeAt(E++);return w(x)}function y(){try{var b;return d&&(b=d.randomBytes)?b=b(a):(b=new Uint8Array(a),(t.crypto||t.msCrypto).getRandomValues(b)),w(b)}catch{var x=t.navigator,k=x&&x.plugins;return[+new Date,t,k,t.screen,w(n)]}}function w(b){return String.fromCharCode.apply(0,b)}if(g(r.random(),n),e.exports){e.exports=f;try{d=require("crypto")}catch{}}else r["seed"+s]=f})(typeof self<"u"?self:Nl,[],Math)})(Zk);var CX=Zk.exports,DX=SX,_X=kX,AX=NX,FX=TX,RX=EX,OX=IX,El=CX;El.alea=DX;El.xor128=_X;El.xorwow=AX;El.xorshift7=FX;El.xor4096=RX;El.tychei=OX;var dy=El,MX=.001,Qk=.1;function PX(e,t,n){return n==null&&(n=fy()),Wg(e,t,function(r,a){return hy(r,a,n)})}function fy(){return j.backend.floatPrecision()===32?MX:Qk}function Wg(e,t,n){var r=!0;if((_r(e)||_r(t))&&(r=!1),_r(e)&&_r(t)&&(r=!0),r){var a=e.constructor.name,i=t.constructor.name;if(a!==i)throw new Error("Arrays are of different type. Actual: ".concat(a,". ")+"Expected: ".concat(i))}if(Array.isArray(e)&&Array.isArray(t)){var o=es(e),s=es(t);if(!Os(o,s))throw new Error("Arrays have different shapes. "+"Actual: [".concat(o,"]. Expected: [").concat(s,"]"))}var u=_r(e)?e:wu(e),l=_r(t)?t:wu(t);if(u.length!==l.length)throw new Error("Arrays have different lengths actual: ".concat(u.length," vs ")+"expected: ".concat(l.length,`.
`)+"Actual:   ".concat(u,`.
`)+"Expected: ".concat(l,"."));for(var c=0;c<l.length;++c){var p=u[c],d=l[c];if(!n(p,d))throw new Error("Arrays differ: actual[".concat(c,"] = ").concat(p,", expected[").concat(c,"] = ").concat(d,`.
`)+"Actual:   ".concat(u,`.
`)+"Expected: ".concat(l,"."))}typeof expect<"u"&&expect().nothing()}function BX(e,t){e().then(function(){return t.fail()},function(){return t()}),typeof expect<"u"&&expect().nothing()}function LX(e,t){var n=typeof t=="string"||typeof t=="number"||typeof t=="boolean"?[t]:t;return mu(e)||mu(e[0])||mu(t)||mu(t[0])?Wg(e,n,function(r,a){return r==a}):Wg(e,t,function(r,a){return hy(r,a,0)})}function zX(e,t,n){if(n==null&&(n=fy()),!hy(e,t,n))throw new Error("Numbers differ: actual === ".concat(e,", expected === ").concat(t));typeof expect<"u"&&expect().nothing()}function hy(e,t,n){return!isFinite(e)&&!isFinite(t)?!0:!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}function $X(e,t,n){for(var r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:".concat(e[r]," low: ").concat(t,", high: ").concat(n))}function VX(e,t){var n=new Float32Array(e),r=new Float32Array(t);if(n.length!==r.length)throw new Error("Expected ArrayBuffer to be of length "+"".concat(r.length,", but it was ").concat(n.length));for(var a=0;a<r.length;a++)if(n[a]!==r[a])throw new Error("Expected ArrayBuffer value at ".concat(a," to be ")+"".concat(r[a]," but got ").concat(n[a]," instead"))}function eN(e){for(var t=0;t<e.length;t++){var n=e[t];Array.isArray(n)?eN(n):e[t]=Nf(n)}return e}function WX(e){var t=document.createElement("video");return"playsInline"in t&&(t.playsInline=!0),t.muted=!0,t.loop=!0,t.style.position="fixed",t.style.left="0px",t.style.top="0px",t.preload="auto",t.appendChild(e),new Promise(function(n){t.addEventListener("loadeddata",function(r){return n(t)}),t.load()})}function UX(e){return tt(this,void 0,void 0,function(){return nt(this,function(t){switch(t.label){case 0:return[4,e.play()];case 1:return t.sent(),"requestVideoFrameCallback"in e?[4,new Promise(function(n){e.requestVideoFrameCallback(n)})]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})}var GX={__proto__:null,TEST_EPSILON_FLOAT16:Qk,createVideoElement:WX,encodeStrings:eN,expectArrayBuffersEqual:VX,expectArraysClose:PX,expectArraysEqual:LX,expectNumbersClose:zX,expectPromiseToFail:BX,expectValuesInRange:$X,play:UX,testEpsilon:fy};var my=function(){function e(t,n,r,a,i){this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);var o=i||Math.random();this.random=dy.alea(o.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var t=this.nextVal;return this.nextVal=NaN,t}for(var n,r,a=!1;!a;){var i=void 0,o=void 0,s=void 0;do i=2*this.random()-1,o=2*this.random()-1,s=i*i+o*o;while(s>=1||s===0);var u=Math.sqrt(-2*Math.log(s)/s);n=this.mean+this.stdDev*i*u,r=this.mean+this.stdDev*o*u,(!this.truncated||this.isValidTruncated(n))&&(a=!0)}return(!this.truncated||this.isValidTruncated(r))&&(this.nextVal=this.convertValue(r)),this.convertValue(n)},e.prototype.convertValue=function(t){return this.dtype==null||this.dtype==="float32"?t:Math.round(t)},e.prototype.isValidTruncated=function(t){return t<=this.upper&&t>=this.lower},e}(),qX=function(){function e(t,n,r,a){this.alpha=t,this.beta=1/n,this.dtype=r;var i=a||Math.random();this.randu=dy.alea(i.toString()),this.randn=new my(0,1,r,!1,this.randu()),t<1?this.d=t+2/3:this.d=t-1/3,this.c=1/Math.sqrt(9*this.d)}return e.prototype.nextValue=function(){for(var t,n,r,a,i,o;;){do a=this.randn.nextValue(),o=1+this.c*a;while(o<=0);if(o*=o*o,t=a*a,n=1-.331*t*t,r=.5*t+this.d*(1-o+Math.log(o)),i=this.randu(),i<n||Math.log(i)<r)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)},e.prototype.convertValue=function(t){return this.dtype==="float32"?t:Math.round(t)},e}(),HX=function(){function e(t,n,r,a){t===void 0&&(t=0),n===void 0&&(n=1);var i=this;if(this.canReturnFloat=function(){return i.dtype==null||i.dtype==="float32"},this.min=t,this.range=n-t,this.dtype=r,a==null&&(a=Math.random()),typeof a=="number"&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(t," - ").concat(n," <= 1 and dtype is not float"));this.random=dy.alea(a)}return e.prototype.convertValue=function(t){return this.canReturnFloat()?t:Math.round(t)},e.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},e}();function jX(e,t,n,r,a){if(n===void 0&&(n=1),r===void 0&&(r="float32"),$a(e),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type ".concat(r));for(var i=new qX(t,n,r,a),o=As(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}var KX=H({randomGamma_:jX});function XX(e,t,n,r,a){if(t===void 0&&(t=0),n===void 0&&(n=1),$a(e),r!=null&&r==="bool")throw new Error("Unsupported data type ".concat(r));for(var i=new my(t,n,r,!1,a),o=As(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}var tN=H({randomNormal_:XX});function YX(e,t,n){if(t!=null&&t==="bool")throw new Error("Unsupported data type ".concat(t));return tN(e,0,1,t,n)}var JX=H({randomStandardNormal_:YX});function ZX(e,t,n,r,a){t===void 0&&(t=0),n===void 0&&(n=1),r===void 0&&(r="float32"),$a(e);for(var i=As(e,r),o=new HX(t,n,null,a),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}var vy=H({randomUniform_:ZX});function QX(e,t,n,r){return vy(e,t,n,"int32",r)}var eY=H({randomUniformInt_:QX});function gf(e,t,n,r){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n===0)throw new Error("Cannot have a step of zero");var a={start:e,stop:t,step:n,dtype:r};return j.runKernel(Vx,{},a)}function tY(e){var t=O(e,"input","real"),n={input:t};return j.runKernel(Wx,n)}var yf=H({real_:tY});function nY(e){var t=O(e,"x","reciprocal"),n={x:t};return j.runKernel(Ux,n)}var rY=H({reciprocal_:nY});function aY(e){var t=O(e,"x","relu"),n={x:t};return j.runKernel(Gx,n)}var Am=H({relu_:aY});function iY(e){var t=O(e,"x","relu6"),n={x:t};return j.runKernel(Kx,n)}var nN=H({relu6_:iY});function oY(e,t){var n=O(e,"x","reverse"),r={x:n},a={dims:t};return j.runKernel(Xx,r,a)}var Sl=H({reverse_:oY});function sY(e){var t=O(e,"x","reverse");return V(t.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank ".concat(t.rank,".")}),Sl(t,0)}var uY=H({reverse1d_:sY});function lY(e,t){var n=O(e,"x","reverse");return V(n.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank ".concat(n.rank,".")}),Sl(n,t)}var cY=H({reverse2d_:lY});function pY(e,t){var n=O(e,"x","reverse");return V(n.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank ".concat(n.rank,".")}),Sl(n,t)}var dY=H({reverse3d_:pY});function fY(e,t){var n=O(e,"x","reverse");return V(n.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank ".concat(n.rank,".")}),Sl(n,t)}var hY=H({reverse4d_:fY});function mY(e){var t=O(e,"x","round"),n={x:t};return j.runKernel(Yx,n)}var rN=H({round_:mY});function vY(e){var t=O(e,"x","rsqrt","float32"),n={x:t};return j.runKernel(Jx,n)}var gY=H({rsqrt_:vY});function yY(e){var t=O(e,"x","selu"),n={x:t};return j.runKernel(nS,n)}var bY=H({selu_:yY});function wY(e,t,n,r,a,i,o){i===void 0&&(i=[1,1]),o===void 0&&(o="NHWC");var s=O(e,"x","separableConv2d"),u=O(t,"depthwiseFilter","separableConv2d"),l=O(n,"pointwiseFilter","separableConv2d"),c=s,p=!1;if(s.rank===3&&(p=!0,c=be(s,[1,s.shape[0],s.shape[1],s.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");V(c.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(c.rank,".")}),V(u.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(u.rank,".")}),V(l.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(u.rank,".")}),V(l.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(l.shape[0],".")}),V(l.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(l.shape[1],".")});var d=u.shape[2],f=u.shape[3];V(l.shape[2]===d*f,function(){return"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(d*f,", ")+"but got ".concat(l.shape[2],".")});var h=sy(c,u,r,a,o,i),m=1,v=Em(h,l,m,"valid",o);return p?be(v,[v.shape[1],v.shape[2],v.shape[3]]):v}var xY=H({separableConv2d_:wY});function SY(e,t){return tt(this,void 0,void 0,function(){var n,r,a,i,o,s,c,u,l,c,p;return nt(this,function(d){switch(d.label){case 0:return n=O(e,"x","setdiff1d"),r=O(t,"y","setdiff1d"),V(n.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x (".concat(n.dtype,") and y (").concat(r.dtype,").")}),V(n.rank===1,function(){return"x should be 1D tensor, but got x (".concat(n.shape,").")}),V(r.rank===1,function(){return"y should be 1D tensor, but got y (".concat(r.shape,").")}),[4,n.data()];case 1:return a=d.sent(),[4,r.data()];case 2:for(i=d.sent(),o=new Set(i),s=0,c=0;c<a.length;c++)o.has(a[c])||s++;for(u=new hm([s],n.dtype),l=new hm([s],"int32"),c=0,p=0;c<a.length;c++)o.has(a[c])||(u.values[p]=a[c],l.values[p]=c,p++);return[2,[u.toTensor(),l.toTensor()]]}})})}var kY=SY;function NY(e){var t=O(e,"x","sign"),n={x:t};return j.runKernel(oS,n)}var TY=H({sign_:NY});function EY(e){var t=O(e,"x","sin","float32"),n={x:t};return j.runKernel(aS,n)}var IY=H({sin_:EY});function CY(e){var t=O(e,"x","sinh"),n={x:t};return j.runKernel(iS,n)}var DY=H({sinh_:CY});function _Y(e,t,n){var r=O(e,"x","slice1d");return V(r.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor")}),Rn(r,[t],[n])}var AY=H({slice1d_:_Y});function FY(e,t,n){var r=O(e,"x","slice2d");return V(r.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor")}),Rn(r,t,n)}var RY=H({slice2d_:FY});function OY(e,t,n){var r=O(e,"x","slice3d");return V(r.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor")}),Rn(r,t,n)}var MY=H({slice3d_:OY});function PY(e,t,n){var r=O(e,"x","slice4d");return V(r.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor")}),Rn(r,t,n)}var BY=H({slice4d_:PY});function LY(e,t){t===void 0&&(t=-1);var n=O(e,"logits","softmax","float32");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(t));var r={logits:n},a={dim:t};return j.runKernel(fS,r,a)}var zY=H({softmax_:LY});function $Y(e){V(e.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,".")});var t={input:e};return j.runKernel(U7,t)}var gy=H({fft_:$Y});function VY(e){V(e.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,".")});var t={input:e};return j.runKernel(Q7,t)}var ym=H({ifft_:VY});function WY(e){var t=e.shape[e.shape.length-1],n=e.size/t,r;if(t<=2){var a=be(e,[n,t]);r=ym(a)}else{var i=[n,2*(t-1)],o=be(yf(e),[n,t]),s=be(Dm(e),[n,t]),u=Sl(Rn(o,[0,1],[n,t-2]),1),l=je(Sl(Rn(s,[0,1],[n,t-2]),1),rn(-1)),c=za([o,u],1),p=za([s,l],1),a=be(xu(c,p),[i[0],i[1]]);r=ym(a)}if(r=yf(r),e.rank===3&&e.shape[0]!==0){var d=r,f=e.shape[0];r=be(r,[f,r.shape[0]/f,r.shape[1]]),d.dispose()}return r}var aN=H({irfft_:WY});function UY(e,t,n){n===void 0&&(n=0);var r=O(e,"x","split"),a={x:r},i={numOrSizeSplits:t,axis:n};return j.runKernel(dS,a,i)}var bf=H({split_:UY});function GY(e,t){V(e.dtype==="float32",function(){return"The dtype for rfft() must be real value but got ".concat(e.dtype)});var n=e.shape[e.shape.length-1],r=e.size/n,a;if(t!=null&&t<n){var i=e.shape.map(function(g){return 0}),o=e.shape.map(function(g){return g});o[e.shape.length-1]=t,a=Rn(e,i,o),n=t}else if(t!=null&&t>n){var s=e.shape.map(function(g){return g});s[e.shape.length-1]=t-n,a=za([e,ap(s)],e.shape.length-1),n=t}else a=e;var u=di(a),l=be(xu(a,u),[r,n]),c=gy(l),p=Math.floor(n/2)+1,d=yf(c),f=Dm(c),h=bf(d,[p,n-p],d.shape.length-1),m=bf(f,[p,n-p],f.shape.length-1),v=a.shape.slice();return v[a.shape.length-1]=p,be(xu(h[0],m[0]),v)}var yy=H({rfft_:GY});function qY(e,t){var n,r=O(e,"a","squaredDifference"),a=O(t,"b","squaredDifference");n=Ie(Gn(r,a),2),r=n[0],a=n[1],br(r.shape,a.shape);var i={a:r,b:a},o={};return j.runKernel(bS,i,o)}var iN=H({squaredDifference_:qY});function HY(e,t){var n=O(e,"x","squeeze","string_or_numeric");return be(n,B9(n.shape,t).newShape)}var by=H({squeeze_:HY});function jY(e,t){t===void 0&&(t=0);var n=pf(e,"tensors","stack","string_or_numeric");V(n.length>=1,function(){return"Pass at least one tensor to tf.stack"}),n.length>0&&V(t<=n[0].rank,function(){return"Axis must be <= rank of the tensor"});var r=n,a={axis:t};return j.runKernel(Rx,r,a)}var wf=H({stack_:jY});function KY(e,t){t===void 0&&(t=0);var n=O(e,"x","step"),r={x:n},a={alpha:t};return j.runKernel(OS,r,a)}var oN=H({step_:KY});function XY(e,t,n,r,a,i,o,s,u){a===void 0&&(a=0),i===void 0&&(i=0),o===void 0&&(o=0),s===void 0&&(s=0),u===void 0&&(u=0);var l=O(e,"x","stridedSlice","string_or_numeric"),c={x:l},p={begin:t,end:n,strides:r,beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u};return j.runKernel(xS,c,p)}var YY=H({stridedSlice_:XY});function JY(e){var t=O(e,"x","tan","float32"),n={x:t};return j.runKernel(ES,n)}var ZY=H({tan_:JY});function zi(e,t){kl(e);var n=es(e,t);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");var r=null;return Nu(e,r,n,t)}function af(e,t,n){if(kl(e),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=es(e,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Nu(e,t,r,n)}function sN(e,t,n){if(kl(e),t!=null&&t.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=es(e,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Nu(e,t,r,n)}function QY(e,t,n){if(kl(e),t!=null&&t.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=es(e,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Nu(e,t,r,n)}function eJ(e,t,n){if(kl(e),t!=null&&t.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=es(e,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Nu(e,t,r,n)}function tJ(e,t,n){if(kl(e),t!=null&&t.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=es(e,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return t=t||r,Nu(e,t,r,n)}function wy(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + "+"shape[sliceDim:], got updates.shape: ".concat(n.shape)+", indices.shape: ".concat(t.shape,", shape: ").concat(e)+", sliceDim: ".concat(r,", and batchDim: ").concat(a,".");if(n.rank<a)throw new Error(i+" update.rank < ".concat(a,". "));if(e.length<r+(n.rank-a))throw new Error(i+" Output shape length < ".concat(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(i+" update.rank != ".concat(a+e.length-r));for(var o=0;o<a;++o)if(n.shape[o]!==t.shape[o])throw new Error(i+" updates.shape[".concat(o,"] (").concat(n.shape[o],") != indices.shape[").concat(o,"] (").concat(t.shape[o],")."));for(var o=0;o<n.rank-a;++o)if(n.shape[o+a]!==e[o+r])throw new Error(i+" updates.shape[".concat(o+a,"] (").concat(n.shape[o+a],") != shape[").concat(o+a,"] (").concat(e[o+a],")"))}function Fm(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+" but the rank was ".concat(e.rank,"."));if(t.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(n.length===0){if(t.size===0)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(e.size===0)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}wy(n,t,e)}function uN(e,t,n){for(var r=t.shape.length,a=r>1?t.shape[r-1]:1,i=n.length,o=1,s=a;s<i;++s)o*=n[s];var u=a<1?1:a,l=Qt(t.shape)/u,c=Mt(Mt([],Ie(ip(n.slice(0,a))),!1),[1],!1),p=Qt(n);return{sliceRank:a,numUpdates:l,sliceSize:o,strides:c,outputSize:p}}var nJ={__proto__:null,calculateShapes:uN,validateInput:Fm,validateUpdateShape:wy};function rJ(e,t,n){var r=O(e,"tensor","tensorScatterupdate"),a=O(t,"indices","tensorScatterupdate","int32"),i=O(n,"updates","tensorScatterupdate");if(Fm(i,a,r.shape),r.dtype!==i.dtype)throw new Error("tensor and updates must have the same dtype, instead they are ".concat(r.dtype," and ").concat(i.dtype,"."));var o={tensor:r,indices:a,updates:i},s={};return j.runKernel(Qx,o,s)}var aJ=H({tensorScatterUpdate_:rJ});function iJ(e,t,n){t===void 0&&(t=1),n===void 0&&(n=!0);var r=O(e,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(a,") ")+"but got ".concat(t));var i={x:r},o={k:t,sorted:n},s=Ie(j.runKernel(CS,i,o),2),u=s[0],l=s[1];return{values:u,indices:l}}var oJ=H({topk_:iJ});function sJ(e,t,n,r,a){if(t===void 0&&(t=0),n===void 0&&(n=1),$a(e),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");for(var i=new my(t,n,r,!0,a),o=As(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}var uJ=H({truncatedNormal_:sJ});function lJ(e,t){t===void 0&&(t=0);var n=O(e,"x","unique","string_or_numeric");V(n.rank>0,function(){return"The input tensor must be at least 1D"});var r={x:n},a={axis:t},i=Ie(j.runKernel(_S,r,a),2),o=i[0],s=i[1];return{values:o,indices:s}}var cJ=H({unique_:lJ});function pJ(e,t,n){var r=O(e,"x","unsortedSegmentSum"),a=O(t,"segmentIds","unsortedSegmentSum","int32");V(tp(n),function(){return"numSegments must be of dtype int"});var i={x:r,segmentIds:a},o={numSegments:n};return j.runKernel(FS,i,o)}var dJ=H({unsortedSegmentSum_:pJ});function fJ(e,t){t===void 0&&(t=0);var n=O(e,"x","unstack","string_or_numeric");V(t>=-n.shape.length&&t<n.shape.length,function(){return"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")});var r={value:n},a={axis:t};return j.runKernel(AS,r,a)}var xy=H({unstack_:fJ});function hJ(e,t){return py(e,t,"right")}function mJ(e,t,n,r){return t===void 0&&(t=!0),j.makeVariable(e,t,n,r)}function lN(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);for(var a=As(e,"int32"),i=As([n.length,e.length],"int32"),r=0;r<n.length;r++){var o=a.indexToLoc(n[r]),s=r*e.length;i.values.set(o,s)}return i.toTensor()}function vJ(e){return tt(this,void 0,void 0,function(){var t,n,r;return nt(this,function(a){switch(a.label){case 0:return t=O(e,"condition","whereAsync","bool"),[4,t.data()];case 1:return n=a.sent(),r=lN(t.shape,n),e!==t&&t.dispose(),[2,r]}})})}var cN=vJ;function gJ(e,t,n){return tt(this,void 0,void 0,function(){var r,a,i,o,s,u,l,c,p,d,f,h,m;return nt(this,function(v){switch(v.label){case 0:for(r=O(e,"tensor","boolMask"),a=O(t,"mask","boolMask","bool"),i=n??0,o=a.rank,s=r.shape,V(o>0,function(){return"mask cannot be scalar"}),pa(s.slice(i,i+o),a.shape,"mask's shape must match the first K dimensions of tensor's shape,"),u=1,l=i;l<i+o;l++)u*=s[l];return c=s.slice(0,i).concat([u],s.slice(i+o)),p=be(r,c),d=be(a,[-1]),[4,cN(d)];case 1:return f=v.sent(),h=by(f,[1]),m=Fk(p,h,i),e!==r&&r.dispose(),t!==a&&a.dispose(),h.dispose(),p.dispose(),d.dispose(),f.dispose(),[2,m]}})})}var yJ=gJ;function bJ(e,t,n){var r=O(e,"x","transpose");if(t==null&&(t=r.shape.map(function(o,s){return s}).reverse()),V(r.rank===t.length,function(){return"Error in transpose: rank of input ".concat(r.rank," ")+"must match length of perm ".concat(t,".")}),t.forEach(function(o){V(o>=0&&o<r.rank,function(){return"All entries in 'perm' must be between 0 and ".concat(r.rank-1)+" but got ".concat(t)})}),r.rank<=1)return r.clone();var a={x:r},i={perm:t};return r.dtype==="complex64"?yr(function(){var o=yf(r),s=Dm(r);return o=j.runKernel(am,{x:o},i),s=j.runKernel(am,{x:s},i),n&&(s=Qo(s)),xu(o,s)}):j.runKernel(am,a,i)}var bm=H({transpose_:bJ});function wJ(e,t,n,r,a){a===void 0&&(a=!0);var i=O(e,"v","movingAverage"),o=O(t,"x","movingAverage"),s=O(n,"decay","movingAverage");YS(i,o),V(Os(i.shape,o.shape),function(){return"Shape mismatch in v and x"});var u=rn(1),l=Ot(u,s),c=je(Ot(o,i),l);if(a){V(r!=null,function(){return"When using zeroDebias: true, step is required."});var p=O(r,"step","movingAverage");c=vn(c,Ot(u,mf(s,p)))}return Tt(i,c)}var xJ=H({movingAverage_:wJ});function SJ(e,t,n){$a(n);var r=O(e,"indices","scatterND","int32"),a=O(t,"updates","scatterND");Fm(a,r,n);var i={indices:r,updates:a},o={shape:n};return j.runKernel(Zx,i,o)}var kJ=H({scatterND_:SJ});function NJ(e,t,n,r){if(e.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type,"+" but the dtype was ".concat(e.dtype,"."));if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix,"+" but got shape ".concat(e.shape,"."));var a=e.rank>0?e.shape[0]:1,i=e.rank>1?e.shape[1]:1;if(n.length!==i)throw new Error("outputShape has incorrect number of elements:,"+" ".concat(n.length,", should be: ").concat(i,"."));var o=t.size;if(!(t.rank===0||t.rank===1&&o===a))throw new Error("sparseValues has incorrect shape "+"".concat(t.shape,", should be [] or [").concat(a,"]"));if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}function TJ(e,t,n,r){r===void 0&&(r=0),$a(n);var a=O(e,"sparseIndices","sparseToDense","int32"),i=O(t,"sparseValues","sparseToDense","string_or_numeric"),o=O(r,"defaultValue","sparseToDense",i.dtype);NJ(a,i,n,o);var s={sparseIndices:a,sparseValues:i,defaultValue:o},u={outputShape:n};return j.runKernel(yS,s,u)}var EJ=H({sparseToDense_:TJ});function IJ(e,t){var n=O(t,"indices","gatherND","int32"),r=O(e,"x","gatherND","string_or_numeric"),a={params:r,indices:n};return j.runKernel(Y7,a)}var CJ=H({gatherND_:IJ});function DJ(e,t){if(t==null)return e.shape.slice();if(Os(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)t[r]==null&&e.shape[r]!=null?n.push(e.shape[r]):n.push(t[r]);return n}return t}function _J(e,t,n,r){var a=O(e,"x","dropout");if(V(a.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(a.dtype," tensor instead.")}),V(t>=0&&t<1,function(){return"rate must be a float in the range [0, 1), but got ".concat(t,".")}),t===0)return e instanceof gr?a.clone():a;var i=DJ(a,n),o=1-t,s=vn(Ak(Tt(vy(i,0,1,"float32",r),o)),o);return je(a,s)}var AJ=H({dropout_:_J});function pN(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function Sy(e,t,n){for(var r=1-e%2,a=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+r-1);a[i]=t-n*Math.cos(o)}return zi(a,"float32")}function FJ(e,t,n){return n===void 0&&(n=1),tt(this,void 0,void 0,function(){var r,a,i,o,s,u,l,c,p,d,f,h,m,v,v;return nt(this,function(g){switch(g.label){case 0:return r=O(e,"predictions","inTopK"),a=O(t,"targets","inTopK"),V(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, "+"but got ".concat(r.rank)}),V(r.rank-1===a.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+"".concat(r.rank," and targets rank ").concat(a.rank)}),pa(r.shape.slice(0,r.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),i=r.shape[r.shape.length-1],V(n>0&&n<=i,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last "+"dimension (".concat(i,"), but got ").concat(n)}),[4,r.data()];case 1:return o=g.sent(),[4,a.data()];case 2:for(s=g.sent(),u=Ie([o.length/i,i],2),l=u[0],c=u[1],p=L9("bool",l),d=0;d<l;d++){for(f=d*c,h=o.subarray(f,f+c),m=[],v=0;v<h.length;v++)m.push({value:h[v],index:v});for(m.sort(function(y,w){return w.value-y.value}),p[d]=0,v=0;v<n;v++)if(m[v].index===s[d]){p[d]=1;break}}return e!==r&&r.dispose(),t!==a&&a.dispose(),[2,Yc(p,a.shape,"bool")]}})})}var RJ=FJ;function OJ(e,t,n,r,a,i,o){i===void 0&&(i="NHWC");var s=e;e.rank===3&&(s=be(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;u.rank===3&&(u=be(t,[1,t.shape[0],t.shape[1],t.shape[2]])),V(s.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(s.shape,".")}),V(u.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(u.shape,".")}),V(n.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,".")});var l=i==="NHWC"?s.shape[3]:s.shape[1],c=i==="NHWC"?u.shape[3]:u.shape[1];V(l===n[2],function(){return"Error in conv2dDerFilter: depth of input ".concat(l,") must ")+"match input depth in filter (".concat(n[2],".")}),V(c===n[3],function(){return"Error in conv2dDerFilter: depth of dy (".concat(c,") must ")+"match output depth for filter (".concat(n[3],").")}),$i("conv2dDerFilter",a,o);var p={x:s,dy:u},d={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,filterShape:n};return j.runKernel(b7,p,d)}var MJ=H({conv2DBackpropFilter_:OJ});function Rm(e,t,n){if(n==null||n==="linear")return e;if(n==="relu")return je(e,oN(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function Om(e,t){var n=t,r=uy(e.shape,t.shape);return r.length>0&&(n=mn(n,r)),be(n,e.shape)}function Mm(e,t,n,r){if(t==="linear")return e;if(t==="relu")return Am(e);if(t==="elu")return Ik(e);if(t==="relu6")return nN(e);if(t==="prelu")return qk(e,n);if(t==="leakyrelu")return Ok(e,r);if(t==="sigmoid")return Qc(e);throw new Error("Unknown fused activation ".concat(t,"."))}var Pm=function(e,t){var n=e>0;return!n||t==="linear"};function PJ(e){var t,n=e.x,r=e.filter,a=e.strides,i=e.pad,o=e.dataFormat,s=o===void 0?"NHWC":o,u=e.dilations,l=u===void 0?[1,1]:u,c=e.dimRoundingMode,p=e.bias,d=e.activation,f=d===void 0?"linear":d,h=e.preluActivationWeights,m=e.leakyreluAlpha;if(f=f||"linear",Pm(j.state.gradientDepth,f)===!1){V(s==="NHWC",function(){return"Error in fused conv2d: got dataFormat of ".concat(s," but ")+"only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear."});var v=Em(n,r,a,i,s,l,c);return p!=null&&(v=Tt(v,p)),Mm(v,f,h,m)}var g=O(n,"x","conv2d","float32"),y=O(r,"filter","conv2d","float32"),w=g,b=!1;g.rank===3&&(b=!0,w=be(g,[1,g.shape[0],g.shape[1],g.shape[2]])),V(w.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(w.rank,".")}),V(y.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(y.rank,".")}),$i("fused conv2d",i,c);var x=s==="NHWC"?w.shape[3]:w.shape[1];V(y.shape[2]===x,function(){return"Error in conv2d: depth of input (".concat(x,") must match ")+"input depth for filter ".concat(y.shape[2],".")}),V(Ps(a,l),function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(a," and dilations '").concat(l,"'")});var k=Ef(w.shape,y.shape,a,l,i,c),N;p!=null&&(N=O(p,"bias","fused conv2d"),t=Ie(Gn(N,g),1),N=t[0],s==="NHWC"?br(k.outShape,N.shape):(V(N.shape.length<=1,function(){return"Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of "+"rank-".concat(N.shape.length,".")}),V(N.shape.length===0||N.shape[0]===k.outChannels||N.shape[0]===1,function(){return"Error in fused conv2d: bias shape (".concat(N.shape,") is not ")+"compatible with the number of output channels "+"(".concat(k.outChannels,")")})));var E;if(h!=null){var C=h.shape;if(V(C.length<=1||C.length===3,function(){return"Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of "+"rank-".concat(C.length,".")}),C.length===1)V(C[0]===1||C[0]===k.outChannels,function(){return"Error in fused conv2d: PReLU activation weights "+"(".concat(C,") is not compatible with the number of output ")+"channels (".concat(k.outChannels,").")});else if(C.length===3)try{br(C,k.outShape)}catch{var R="Error in fused conv2d: PReLU activation weights (".concat(C,") ")+"is not compatible with the output shape of the conv2d "+"(".concat(k.outShape,").");throw Error(R)}E=O(h,"prelu weights","fused conv2d")}var A=function(B,W){V(s==="NHWC",function(){return"Error in gradient of fused conv2D: got dataFormat of ".concat(s," but only NHWC is currently supported.")});var Y=Ie(W,4),Q=Y[0],G=Y[1],X=Y[2],ie=Y[3],ae=Rm(B,X,f);V(hf(l),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(l,"'")});var le=Nk(G.shape,ae,Q,a,i),de=MJ(G,ae,Q.shape,a,i),ge=[le,de];if(ie!=null){var Ee=Om(ie,ae);ge.push(Ee)}return ge},M={x:w,filter:y,bias:N,preluActivationWeights:E},$={strides:a,pad:i,dataFormat:s,dilations:l,dimRoundingMode:c,activation:f,leakyreluAlpha:m};if(p==null){var z=ts(function(B,W,Y){var Q=j.runKernel(kg,M,$);return Y([W,B,Q]),b&&(Q=be(Q,[Q.shape[1],Q.shape[2],Q.shape[3]])),{value:Q,gradFunc:A}});return z(w,y)}else{var L=ts(function(B,W,Y,Q){var G=j.runKernel(kg,M,$);return Q([W,B,G,Y]),b&&(G=be(G,[G.shape[1],G.shape[2],G.shape[3]])),{value:G,gradFunc:A}});return L(w,y,N)}}var BJ=H({fusedConv2d_:PJ});function LJ(e,t,n,r,a,i,o){i===void 0&&(i=[1,1]);var s=e;e.rank===3&&(s=be(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;u.rank===3&&(u=be(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var l={x:s,dy:u},c={strides:r,pad:a,dimRoundingMode:o,dilations:i,filterShape:n};return j.runKernel(A7,l,c)}var zJ=H({depthwiseConv2dNativeBackpropFilter_:LJ});function $J(e,t,n,r,a,i,o){i===void 0&&(i=[1,1]);var s=t,u=!1;t.rank===3&&(u=!0,s=be(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var l={dy:s,filter:n},c={strides:r,pad:a,dimRoundingMode:o,dilations:i,inputShape:e},p=j.runKernel(F7,l,c);return u?be(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var VJ=H({depthwiseConv2dNativeBackpropInput_:$J});function WJ(e){var t,n=e.x,r=e.filter,a=e.strides,i=e.pad,o=e.dataFormat,s=o===void 0?"NHWC":o,u=e.dilations,l=u===void 0?[1,1]:u,c=e.dimRoundingMode,p=e.bias,d=e.activation,f=d===void 0?"linear":d,h=e.preluActivationWeights,m=e.leakyreluAlpha;if(Pm(j.state.gradientDepth,f)===!1){var v=sy(n,r,a,i,s,l,c);return p!=null&&(v=Tt(v,p)),Mm(v,f,h,m)}var g=O(n,"x","depthwiseConv2d","float32"),y=O(r,"filter","depthwiseConv2d","float32"),w=g,b=!1;g.rank===3&&(b=!0,w=be(g,[1,g.shape[0],g.shape[1],g.shape[2]])),V(w.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(w.rank,".")}),V(y.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, "+"but got rank ".concat(y.rank,".")}),V(w.shape[3]===y.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels "+"(".concat(w.shape[3],") must match the inChannels dimension in ")+"filter ".concat(y.shape[2],".")}),l==null&&(l=[1,1]),V(Ps(a,l),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must "+"be 1. Got strides ".concat(a," and dilations '").concat(l,"'")}),$i("fused depthwiseConv2d",i,c);var x=Ef(w.shape,y.shape,a,l,i,c,!0),k;p!=null&&(k=O(p,"bias","fused conv2d"),t=Ie(Gn(k,g),1),k=t[0],br(x.outShape,k.shape));var N;h!=null&&(N=O(h,"prelu weights","fused depthwiseConv2d"));var E=function($,z){V(hf(l),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(l,"'")});var L=Ie(z,4),B=L[0],W=L[1],Y=L[2],Q=L[3],G=Rm($,Y,f),X=VJ(W.shape,G,B,a,i,l,c),ie=zJ(W,G,B.shape,a,i,l,c);if(Q!=null){var ae=Om(k,G);return[X,ie,ae]}return[X,ie]},C={x:w,filter:y,bias:k,preluActivationWeights:N},R={strides:a,pad:i,dataFormat:s,dilations:l,dimRoundingMode:c,activation:f,leakyreluAlpha:m};if(p==null){var A=ts(function($,z,L){var B=j.runKernel(Ng,C,R);return L([z,$,B]),b&&(B=be(B,[B.shape[1],B.shape[2],B.shape[3]])),{value:B,gradFunc:E}});return A(w,y)}else{var M=ts(function($,z,L,B){var W=j.runKernel(Ng,C,R);return B([z,$,W,L]),b&&(W=be(W,[W.shape[1],W.shape[2],W.shape[3]])),{value:W,gradFunc:E}});return M(w,y,k)}}var UJ=H({fusedDepthwiseConv2d_:WJ});function GJ(e){var t,n,r=e.a,a=e.b,i=e.transposeA,o=i===void 0?!1:i,s=e.transposeB,u=s===void 0?!1:s,l=e.bias,c=e.activation,p=c===void 0?"linear":c,d=e.preluActivationWeights,f=e.leakyreluAlpha,h=f===void 0?.2:f;if(Pm(j.state.gradientDepth,p)===!1){var m=Xt(r,a,o,u);return l!=null&&(m=Tt(m,l)),Mm(m,p,d,h)}var v=O(r,"a","fused matMul"),g=O(a,"b","fused matMul");t=Ie(Gn(v,g),2),v=t[0],g=t[1];var y=o?v.shape[v.rank-2]:v.shape[v.rank-1],w=u?g.shape[g.rank-1]:g.shape[g.rank-2],b=o?v.shape[v.rank-1]:v.shape[v.rank-2],x=u?g.shape[g.rank-2]:g.shape[g.rank-1],k=v.shape.slice(0,-2),N=g.shape.slice(0,-2),E=Qt(k),C=Qt(N);V(y===w,function(){return"Error in fused matMul: inner shapes (".concat(y,") and (")+"".concat(w,") of Tensors with shapes ").concat(v.shape," and ")+"".concat(g.shape," and transposeA=").concat(o)+" and transposeB=".concat(u," must match.")});var R=br(v.shape.slice(0,-2),g.shape.slice(0,-2)),A=R.concat([b,x]),M=o?be(v,[E,y,b]):be(v,[E,b,y]),$=u?be(g,[C,x,w]):be(g,[C,w,x]),z;l!=null&&(z=O(l,"bias","fused matMul"),n=Ie(Gn(z,v),1),z=n[0],br(A,z.shape));var L;d!=null&&(L=O(d,"prelu weights","fused matMul"));var B=function(X,ie){var ae=Ie(ie,4),le=ae[0],de=ae[1],ge=ae[2],Ee=ae[3],he=Rm(be(X,ge.shape),ge,p),xe,Ne;if(!o&&!u?(xe=Xt(he,de,!1,!0),Ne=Xt(le,he,!0,!1)):!o&&u?(xe=Xt(he,de,!1,!1),Ne=Xt(he,le,!0,!1)):o&&!u?(xe=Xt(de,he,!1,!0),Ne=Xt(le,he,!1,!1)):(xe=Xt(de,he,!0,!0),Ne=Xt(he,le,!0,!0)),l!=null){var $e=Om(Ee,he);return[xe,Ne,$e]}else return[xe,Ne]},W={a:M,b:$,bias:z,preluActivationWeights:L},Y={transposeA:o,transposeB:u,activation:p,leakyreluAlpha:h};if(l==null){var Q=ts(function(X,ie,ae){var le=j.runKernel(Sg,W,Y);return ae([X,ie,le]),{value:be(le,A),gradFunc:B}});return Q(M,$)}else{var G=ts(function(X,ie,ae,le){var de=j.runKernel(Sg,W,Y);return le([X,ie,de,ae]),{value:be(de,A),gradFunc:B}});return G(M,$,z)}}var qJ=H({fusedMatMul_:GJ});var HJ={__proto__:null,conv2d:BJ,depthwiseConv2d:UJ,matMul:qJ};function jJ(e){return Sy(e,.54,.46)}var KJ=H({hammingWindow_:jJ});function XJ(e){return Sy(e,.5,.5)}var dN=H({hannWindow_:XJ});function YJ(e,t,n,r,a){r===void 0&&(r=!1),a===void 0&&(a=0);for(var i=0,o=[];i+t<=e.size;)o.push(Rn(e,i,t)),i+=n;if(r)for(;i<e.size;){var s=i+t-e.size,u=za([Rn(e,i,t-s),If([s],a)]);o.push(u),i+=n}return o.length===0?af([],[0,t]):be(za(o),[o.length,t])}var fN=H({frame_:YJ});function JJ(e,t,n,r,a){a===void 0&&(a=dN),r==null&&(r=pN(t));var i=fN(e,t,n),o=je(i,a(t));return yy(o,r)}var ZJ=H({stft_:JJ});function QJ(e,t,n,r,a,i){a===void 0&&(a="bilinear"),i===void 0&&(i=0);var o=O(e,"image","cropAndResize"),s=O(t,"boxes","cropAndResize","float32"),u=O(n,"boxInd","cropAndResize","int32"),l=s.shape[0];V(o.rank===4,function(){return"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(o.rank,".")}),V(s.rank===2&&s.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size [".concat(l,",4] ")+"but had shape ".concat(s.shape,".")}),V(u.rank===1&&u.shape[0]===l,function(){return"Error in cropAndResize: boxInd must be have size [".concat(l,"] ")+"but had shape ".concat(s.shape,".")}),V(r.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(r.length,".")}),V(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was ".concat(r)}),V(a==="bilinear"||a==="nearest",function(){return"method must be bilinear or nearest, but was ".concat(a)});var c={image:o,boxes:s,boxInd:u},p={method:a,extrapolationValue:i,cropSize:r},d=j.runKernel(I7,c,p);return d}var eZ=H({cropAndResize_:QJ});function tZ(e){var t=O(e,"image","flipLeftRight","float32");V(t.rank===4,function(){return"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,".")});var n={image:t},r=j.runKernel(q7,n,{});return r}var nZ=H({flipLeftRight_:tZ});function rZ(e){var t=O(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];V(t.rank>=2,function(){return"Error in grayscaleToRGB: images must be at least rank 2, "+"but got rank ".concat(t.rank,".")}),V(r===1,function(){return"Error in grayscaleToRGB: last dimension of a grayscale image "+"should be size 1, but got size ".concat(r,".")});var a=new Array(t.rank);return a.fill(1,0,n),a[n]=3,rf(t,a)}var aZ=H({grayscaleToRGB_:rZ});function iZ(e){var t=O(e,"image","RGBToGrayscale"),n=t.rank-1,r=t.shape[n];V(t.rank>=2,function(){return"Error in RGBToGrayscale: images must be at least rank 2, "+"but got rank ".concat(t.rank,".")}),V(r===3,function(){return"Error in RGBToGrayscale: last dimension of an RGB image "+"should be size 3, but got size ".concat(r,".")});var a=t.dtype,i=bn(t,"float32"),o=zi([.2989,.587,.114]),s;switch(t.rank){case 2:s=jc("ij,j->i",i,o);break;case 3:s=jc("ijk,k->ij",i,o);break;case 4:s=jc("ijkl,l->ijk",i,o);break;case 5:s=jc("ijklm,m->ijkl",i,o);break;case 6:s=jc("ijklmn,n->ijklm",i,o);break;default:throw new Error("Not a valid tensor rank.")}return s=fu(s,-1),bn(s,a)}var oZ=H({rgbToGrayscale_:iZ});function sZ(e,t,n,r){n===void 0&&(n=0),r===void 0&&(r=.5);var a=O(e,"image","rotateWithOffset","float32");V(a.rank===4,function(){return"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(a.rank,".")});var i={image:a},o={radians:t,fillValue:n,center:r},s=j.runKernel(MS,i,o);return s}var uZ=H({rotateWithOffset_:sZ});function op(e,t,n,r,a,i){r==null&&(r=.5),a==null&&(a=Number.NEGATIVE_INFINITY),i==null&&(i=0);var o=e.shape[0];return n=Math.min(n,o),V(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '".concat(r,"'")}),V(e.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")}),V(e.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])}),V(t.rank===1,function(){return"scores must be a 1D tensor"}),V(t.shape[0]===o,function(){return"scores has incompatible shape with boxes. Expected ".concat(o,", ")+"but was ".concat(t.shape[0])}),V(0<=i&&i<=1,function(){return"softNmsSigma must be in [0, 1], but was '".concat(i,"'")}),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}function lZ(e,t,n,r,a){r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY);var i=O(e,"boxes","nonMaxSuppression","float32"),o=O(t,"scores","nonMaxSuppression","float32"),s=op(i,o,n,r,a);n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold;var u={maxOutputSize:n,iouThreshold:r,scoreThreshold:a};return j.runKernel(Cx,{boxes:i,scores:o},u)}var cZ=H({nonMaxSuppression_:lZ});function pZ(e,t,n){var r=dZ(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function dZ(e,t,n){return hZ(e,t,n||fZ)}function fZ(e,t){return e>t?1:e<t?-1:0}function hZ(e,t,n){for(var r=0,a=e.length,i=0,o=!1;r<a;){i=r+(a-r>>>1);var s=n(t,e[i]);s>0?r=i+1:(a=i,o=!s)}return o?r:-r-1}function hN(e,t,n,r,a){return ky(e,t,n,r,a,0)}function mN(e,t,n,r,a,i){return ky(e,t,n,r,a,0,!1,i,!0)}function vN(e,t,n,r,a,i){return ky(e,t,n,r,a,i,!0)}function ky(e,t,n,r,a,i,o,s,u){o===void 0&&(o=!1),s===void 0&&(s=!1),u===void 0&&(u=!1);for(var l=[],c=0;c<t.length;c++)t[c]>a&&l.push({score:t[c],boxIndex:c,suppressBeginIndex:0});l.sort(E9);for(var p=i>0?-.5/i:0,d=[],f=[];d.length<n&&l.length>0;){var h=l.pop(),m=h.score,v=h.boxIndex,g=h.suppressBeginIndex;if(m<a)break;for(var y=!1,w=d.length-1;w>=g;--w){var b=mZ(e,v,d[w]);if(b>=r){y=!0;break}if(h.score=h.score*vZ(r,p,b),h.score<=a)break}h.suppressBeginIndex=d.length,y||(h.score===m?(d.push(v),f.push(h.score)):h.score>a&&pZ(l,h,E9))}var x=d.length,k=n-x;s&&k>0&&(d.push.apply(d,Mt([],Ie(new Array(k).fill(0)),!1)),f.push.apply(f,Mt([],Ie(new Array(k).fill(0)),!1)));var N={selectedIndices:d};return o&&(N.selectedScores=f),u&&(N.validOutputs=x),N}function mZ(e,t,n){var r=e.subarray(t*4,t*4+4),a=e.subarray(n*4,n*4+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(a[0],a[2]),c=Math.min(a[1],a[3]),p=Math.max(a[0],a[2]),d=Math.max(a[1],a[3]),f=(s-i)*(u-o),h=(p-l)*(d-c);if(f<=0||h<=0)return 0;var m=Math.max(i,l),v=Math.max(o,c),g=Math.min(s,p),y=Math.min(u,d),w=Math.max(g-m,0)*Math.max(y-v,0);return w/(f+h-w)}function vZ(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function E9(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function gZ(e,t,n,r,a){return r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),tt(this,void 0,void 0,function(){var i,o,s,u,l,c,p;return nt(this,function(d){switch(d.label){case 0:return i=O(e,"boxes","nonMaxSuppressionAsync"),o=O(t,"scores","nonMaxSuppressionAsync"),s=op(i,o,n,r,a),n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold,[4,Promise.all([i.data(),o.data()])];case 1:return u=d.sent(),l=u[0],c=u[1],p=hN(l,c,n,r,a).selectedIndices,i!==e&&i.dispose(),o!==t&&o.dispose(),[2,zi(p,"int32")]}})})}var yZ=gZ;function bZ(e,t,n,r,a,i){r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),i===void 0&&(i=0);var o=O(e,"boxes","nonMaxSuppression"),s=O(t,"scores","nonMaxSuppression"),u=op(o,s,n,r,a,i);n=u.maxOutputSize,r=u.iouThreshold,a=u.scoreThreshold,i=u.softNmsSigma;var l={boxes:o,scores:s},c={maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i},p=j.runKernel(_x,l,c);return{selectedIndices:p[0],selectedScores:p[1]}}var wZ=H({nonMaxSuppressionWithScore_:bZ});function xZ(e,t,n,r,a,i){return r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),i===void 0&&(i=0),tt(this,void 0,void 0,function(){var o,s,u,l,c,p,d,f,h;return nt(this,function(m){switch(m.label){case 0:return o=O(e,"boxes","nonMaxSuppressionAsync"),s=O(t,"scores","nonMaxSuppressionAsync"),u=op(o,s,n,r,a,i),n=u.maxOutputSize,r=u.iouThreshold,a=u.scoreThreshold,i=u.softNmsSigma,[4,Promise.all([o.data(),s.data()])];case 1:return l=m.sent(),c=l[0],p=l[1],d=vN(c,p,n,r,a,i),f=d.selectedIndices,h=d.selectedScores,o!==e&&o.dispose(),s!==t&&s.dispose(),[2,{selectedIndices:zi(f,"int32"),selectedScores:zi(h)}]}})})}var SZ=xZ;function kZ(e,t,n,r,a,i){r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),i===void 0&&(i=!1);var o=O(e,"boxes","nonMaxSuppression"),s=O(t,"scores","nonMaxSuppression"),u=op(o,s,n,r,a,null),l=u.maxOutputSize,c=u.iouThreshold,p=u.scoreThreshold,d={boxes:o,scores:s},f={maxOutputSize:l,iouThreshold:c,scoreThreshold:p,padToMaxOutputSize:i},h=j.runKernel(Dx,d,f);return{selectedIndices:h[0],validOutputs:h[1]}}var NZ=H({nonMaxSuppressionPadded_:kZ});function TZ(e,t,n,r,a,i){return r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),i===void 0&&(i=!1),tt(this,void 0,void 0,function(){var o,s,u,l,c,p,d,f,h,m,v,g;return nt(this,function(y){switch(y.label){case 0:return o=O(e,"boxes","nonMaxSuppressionAsync"),s=O(t,"scores","nonMaxSuppressionAsync"),u=op(o,s,n,r,a,null),l=u.maxOutputSize,c=u.iouThreshold,p=u.scoreThreshold,[4,Promise.all([o.data(),s.data()])];case 1:return d=Ie.apply(void 0,[y.sent(),2]),f=d[0],h=d[1],m=mN(f,h,l,c,p,i),v=m.selectedIndices,g=m.validOutputs,o!==e&&o.dispose(),s!==t&&s.dispose(),[2,{selectedIndices:zi(v,"int32"),validOutputs:rn(g,"int32")}]}})})}var EZ=TZ;function IZ(e,t,n,r){n===void 0&&(n=!1),r===void 0&&(r=!1);var a=O(e,"images","resizeBilinear");V(a.rank===3||a.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")}),V(t.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,".")}),V(r===!1||n===!1,function(){return"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."});var i=a,o=!1;a.rank===3&&(o=!0,i=be(a,[1,a.shape[0],a.shape[1],a.shape[2]])),Ie(t,0);var s={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},l=j.runKernel(jx,s,u);return o?be(l,[l.shape[1],l.shape[2],l.shape[3]]):l}var CZ=H({resizeBilinear_:IZ});function DZ(e,t,n,r){n===void 0&&(n=!1),r===void 0&&(r=!1);var a=O(e,"images","resizeNearestNeighbor");V(a.rank===3||a.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")}),V(t.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,".")}),V(a.dtype==="float32"||a.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"}),V(r===!1||n===!1,function(){return"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."});var i=a,o=!1;a.rank===3&&(o=!0,i=be(a,[1,a.shape[0],a.shape[1],a.shape[2]])),Ie(t,0);var s={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},l=j.runKernel(Hx,s,u);return o?be(l,[l.shape[1],l.shape[2],l.shape[3]]):l}var _Z=H({resizeNearestNeighbor_:DZ});function AZ(e,t,n,r){var a;t===void 0&&(t="binary"),n===void 0&&(n=!1),r===void 0&&(r=.5);var i=O(e,"image","threshold"),o=.2989,s=.587,u=.114,l=i.shape[0]*i.shape[1],c=je(zi([r]),255),p,d,f,h;if(V(i.rank===3,function(){return"Error in threshold: image must be rank 3,"+"but got rank ".concat(i.rank,".")}),V(i.shape[2]===3||i.shape[2]===1,function(){return"Error in threshold: image color channel must be equal to 3 or 1"+"but got ".concat(i.shape[2],".")}),V(i.dtype==="int32"||i.dtype==="float32",function(){return"Error in dtype: image dtype must be int32 or float32,"+"but got dtype ".concat(i.dtype,".")}),V(t==="otsu"||t==="binary",function(){return"Method must be binary or otsu, but was ".concat(t)}),i.shape[2]===3){a=Ie(bf(i,[1,1,1],-1),3),p=a[0],d=a[1],f=a[2];var m=je(p,o),v=je(d,s),g=je(f,u);h=Tt(Tt(m,v),g)}else h=e;if(t==="otsu"){var y=kk(bn(rN(h),"int32"),Yc([]),256);c=FZ(y,l)}var w=n?cy(h,c):Cm(h,c),b=bn(je(w,255),"int32");return b}function FZ(e,t){for(var n=zi([-1]),r=zi([0]),a=zi([0]),i,o,s,u,l,c,p=0;p<e.size-1;p++){i=Rn(e,0,p+1),o=Rn(e,p+1),l=vn(mn(i),t),c=vn(mn(o),t);var d=mn(je(i,gf(0,i.size)));s=vn(d,mn(i));var f=If(o.shape,i.size),h=Tt(gf(0,o.size),f),m=je(o,h);u=vn(mn(m),mn(o));var v=Ot(s,u),g=Ot(s,u),y=je(l,c);a=je(je(y,v),g);var w=Cm(a,r);r=yu(w,a,r),n=yu(w,zi([p]),n)}return n}var RZ=H({threshold_:AZ});function OZ(e,t,n,r,a,i){n===void 0&&(n="nearest"),r===void 0&&(r="constant"),a===void 0&&(a=0);var o=O(e,"image","transform","float32"),s=O(t,"transforms","transform","float32");V(o.rank===4,function(){return"Error in transform: image must be rank 4,"+"but got rank ".concat(o.rank,".")}),V(s.rank===2&&(s.shape[0]===o.shape[0]||s.shape[0]===1)&&s.shape[1]===8,function(){return"Error in transform: Input transform should be batch x 8 or 1 x 8"}),V(i==null||i.length===2,function(){return"Error in transform: outputShape must be [height, width] or null, "+"but got ".concat(i,".")});var u={image:o,transforms:s},l={interpolation:n,fillMode:r,fillValue:a,outputShape:i};return j.runKernel(DS,u,l)}var MZ=H({transform_:OZ});function PZ(e,t,n){var r=O(e,"a","bandPart");V(r.rank>=2,function(){return"bandPart(): Rank must be at least 2, got ".concat(r.rank,".")});var a=r.shape,i=Ie(r.shape.slice(-2),2),o=i[0],s=i[1],u,l;typeof t=="number"?(V(t%1===0,function(){return"bandPart(): numLower must be an integer, got ".concat(t,".")}),V(t<=o,function(){return"bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(o,").")}),u=O(t<0?o:t,"numLower","bandPart")):(V(t.dtype==="int32",function(){return"bandPart(): numLower's dtype must be an int32."}),u=yu($g(t,0),o,gm(t,o))),typeof n=="number"?(V(n%1===0,function(){return"bandPart(): numUpper must be an integer, got ".concat(n,".")}),V(n<=s,function(){return"bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(s,").")}),l=O(n<0?s:n,"numUpper","bandPart")):(V(n.dtype==="int32",function(){return"bandPart(): numUpper's dtype must be an int32."}),l=yu($g(n,0),s,gm(n,s)));var c=be(gf(0,o,1,"int32"),[-1,1]),p=gf(0,s,1,"int32"),d=Ot(c,p),f=mm(cy(d,u),Rk(d,Qo(l))),h=ap([o,s],r.dtype);return be(wf(xy(be(r,[-1,o,s])).map(function(m){return yu(f,m,h)})),a)}var BZ=H({bandPart_:PZ});function LZ(e){var t;if(Array.isArray(e)){t=!1,V(e!=null&&e.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var n=e[0].shape[0],r=function(u){V(e[u].shape[0]===n,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[u].shape[0]," vs. ").concat(n,")")})},a=1;a<e.length;++a)r(a)}else t=!0,e=bf(e,e.shape[0],0).map(function(u){return by(u,[0])});V(e.length<=e[0].shape[0],function(){return"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],").")});for(var i=[],o=e,s=function(u){i.push(j.tidy(function(){var l=o[u];if(u>0)for(var c=0;c<u;++c){var p=je(mn(je(i[c],l)),i[c]);l=Ot(l,p)}return vn(l,Im(l,"euclidean"))}))},a=0;a<e.length;++a)s(a);return t?wf(i,0):i}var zZ=H({gramSchmidt_:LZ});function $Z(e,t){if(t===void 0&&(t=!1),V(e.rank>=2,function(){return"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)}),e.rank===2)return I9(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce(function(u,l){return u*l}),r=xy(be(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];r.forEach(function(u){var l=Ie(I9(u,t),2),c=l[0],p=l[1];a.push(c),i.push(p)});var o=be(wf(a,0),e.shape),s=be(wf(i,0),e.shape);return[o,s]}function I9(e,t){return t===void 0&&(t=!1),j.tidy(function(){V(e.shape.length===2,function(){return"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor.")});for(var n=e.shape[0],r=e.shape[1],a=_k(n),i=vl(e),o=af([[1]],[1,1]),s=vl(o),u=n>=r?r:n,l=function(p){var d,f=i,h=s,m=a;d=Ie(j.tidy(function(){var v=Rn(i,[p,p],[n-p,1]),g=Im(v),y=Rn(i,[p,p],[1,1]),w=yu(Cm(y,0),af([[-1]]),af([[1]])),b=Ot(y,je(w,g)),x=vn(v,b);x.shape[0]===1?s=vl(o):s=za([o,Rn(x,[1,0],[x.shape[0]-1,x.shape[1]])],0);var k=Qo(vn(Xt(w,b),g)),N=Rn(i,[p,0],[n-p,r]),E=je(k,s),C=bm(s);if(p===0)i=Ot(N,Xt(E,Xt(C,N)));else{var R=Ot(N,Xt(E,Xt(C,N)));i=za([Rn(i,[0,0],[p,r]),R],0)}var A=bm(E),M=Rn(a,[0,p],[n,a.shape[1]-p]);if(p===0)a=Ot(M,Xt(Xt(M,s),A));else{var $=Ot(M,Xt(Xt(M,s),A));a=za([Rn(a,[0,0],[n,p]),$],1)}return[s,i,a]}),3),s=d[0],i=d[1],a=d[2],xa([f,h,m])},c=0;c<u;++c)l(c);return!t&&n>r&&(a=Rn(a,[0,0],[n,r]),i=Rn(i,[0,0],[r,r])),[a,i]})}var VZ=H({qr_:$Z});_.Reduction=void 0;(function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(_.Reduction||(_.Reduction={}));function WZ(e,t,n){n===void 0&&(n=_.Reduction.SUM_BY_NONZERO_WEIGHTS);var r=O(e,"losses","computeWeightedLoss"),a=null;t!=null&&(a=O(t,"weights","computeWeightedLoss"));var i=a==null?r:je(r,a);if(n===_.Reduction.NONE)return i;if(n===_.Reduction.SUM)return mn(i);if(n===_.Reduction.MEAN){if(a==null)return vm(i);var o=r.size/a.size,s=vn(mn(i),mn(a));return o>1?vn(s,rn(o)):s}if(n===_.Reduction.SUM_BY_NONZERO_WEIGHTS){if(a==null)return vn(mn(i),rn(r.size));var u=je(a,ml(r.shape)),l=bn(mn(Uk(u,rn(0))),"float32");return vn(mn(i),l)}throw Error("Unknown reduction: ".concat(n))}var Bs=H({computeWeightedLoss_:WZ});function UZ(e,t,n,r){r===void 0&&(r=_.Reduction.SUM_BY_NONZERO_WEIGHTS);var a=O(e,"labels","absoluteDifference"),i=O(t,"predictions","absoluteDifference"),o=null;n!=null&&(o=O(n,"weights","absoluteDifference")),pa(a.shape,i.shape,"Error in absoluteDifference: ");var s=pi(Ot(a,i));return Bs(s,o,r)}var GZ=H({absoluteDifference_:UZ});function qZ(e,t,n,r,a){a===void 0&&(a=_.Reduction.SUM_BY_NONZERO_WEIGHTS);var i=O(e,"labels","cosineDistance"),o=O(t,"predictions","cosineDistance"),s=null;r!=null&&(s=O(r,"weights","cosineDistance")),pa(i.shape,o.shape,"Error in cosineDistance: ");var u=rn(1),l=Ot(u,mn(je(i,o),n,!0));return Bs(l,s,a)}var HZ=H({cosineDistance_:qZ});function jZ(e,t,n,r){r===void 0&&(r=_.Reduction.SUM_BY_NONZERO_WEIGHTS);var a=O(e,"labels","hingeLoss"),i=O(t,"predictions","hingeLoss"),o=null;n!=null&&(o=O(n,"weights","hingeLoss")),pa(a.shape,i.shape,"Error in hingeLoss: ");var s=rn(1);a=Ot(je(rn(2),a),s);var u=Am(Ot(s,je(a,i)));return Bs(u,o,r)}var KZ=H({hingeLoss_:jZ});function XZ(e,t,n,r,a){r===void 0&&(r=1),a===void 0&&(a=_.Reduction.SUM_BY_NONZERO_WEIGHTS);var i=O(e,"labels","huberLoss"),o=O(t,"predictions","huberLoss"),s=null;n!=null&&(s=O(n,"weights","huberLoss")),pa(i.shape,o.shape,"Error in huberLoss: ");var u=rn(r),l=pi(Ot(o,i)),c=gm(l,u),p=Ot(l,c),d=Tt(je(rn(.5),yo(c)),je(u,p));return Bs(d,s,a)}var YZ=H({huberLoss_:XZ});function JZ(e,t,n,r,a){r===void 0&&(r=1e-7),a===void 0&&(a=_.Reduction.SUM_BY_NONZERO_WEIGHTS);var i=O(e,"labels","logLoss"),o=O(t,"predictions","logLoss"),s=null;n!=null&&(s=O(n,"weights","logLoss")),pa(i.shape,o.shape,"Error in logLoss: ");var u=rn(1),l=rn(r),c=Qo(je(i,vf(Tt(o,l)))),p=je(Ot(u,i),vf(Tt(Ot(u,o),l))),d=Ot(c,p);return Bs(d,s,a)}var ZZ=H({logLoss_:JZ});function QZ(e,t,n,r){r===void 0&&(r=_.Reduction.SUM_BY_NONZERO_WEIGHTS);var a=O(e,"labels","meanSquaredError"),i=O(t,"predictions","meanSquaredError"),o=null;n!=null&&(o=O(n,"weights","meanSquaredError")),pa(a.shape,i.shape,"Error in meanSquaredError: ");var s=iN(a,i);return Bs(s,o,r)}var eQ=H({meanSquaredError_:QZ});function tQ(e,t){var n=O(e,"labels","sigmoidCrossEntropyWithLogits"),r=O(t,"logits","sigmoidCrossEntropyWithLogits");pa(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var a=Am(r),i=je(r,n),o=Mk(xl(Qo(pi(r))));return Tt(Ot(a,i),o)}function nQ(e,t,n,r,a){r===void 0&&(r=0),a===void 0&&(a=_.Reduction.SUM_BY_NONZERO_WEIGHTS);var i=O(e,"multiClassLabels","sigmoidCrossEntropy"),o=O(t,"logits","sigmoidCrossEntropy"),s=null;if(n!=null&&(s=O(n,"weights","sigmoidCrossEntropy")),pa(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=rn(r),l=rn(1),c=rn(.5);i=Tt(je(i,Ot(l,u)),je(c,u))}var p=tQ(i,o);return Bs(p,s,a)}var rQ=H({sigmoidCrossEntropy_:nQ});function aQ(e,t,n){if(n===void 0&&(n=-1),n===-1&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+"supported. Labels / logits was rank ".concat(t.rank," ")+"and dim was ".concat(n));var r=ts(function(a,i,o){var s=!0,u=Lk(i,[n],s),l=Ot(bn(i,"float32"),u);o([a,l]);var c=Qo(je(l,a)),p=mn(c,[n]),d=function(f,h){var m=Ie(h,2),v=m[0],g=m[1],y=Cf(f.shape,[n]);return[je(be(f,y),Ot(bn(v,"float32"),xl(g))),je(be(f,y),Ot(xl(g),bn(v,"float32")))]};return{value:p,gradFunc:d}});return r(e,t)}function iQ(e,t,n,r,a){r===void 0&&(r=0),a===void 0&&(a=_.Reduction.SUM_BY_NONZERO_WEIGHTS);var i=O(e,"onehotLabels","softmaxCrossEntropy"),o=O(t,"logits","softmaxCrossEntropy"),s=null;if(n!=null&&(s=O(n,"weights","softmaxCrossEntropy")),pa(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var u=rn(r),l=rn(1),c=rn(i.shape[1]);i=Tt(je(i,Ot(l,u)),vn(u,c))}var p=aQ(i,o);return Bs(p,s,a)}var oQ=H({softmaxCrossEntropy_:iQ});function sQ(e,t,n,r){var a=O(e,"indices","sparseFillEmptyRows","int32"),i=O(t,"values","sparseFillEmptyRows"),o=O(n,"denseShape","sparseFillEmptyRows","int32"),s=O(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(a.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        `.concat(a.shape));if(i.rank!==1)throw new Error("Values should be Tensor1D but received shape ".concat(i.shape));if(o.rank!==1)throw new Error("Dense shape should be Tensor1D but received shape ".concat(o.shape));if(s.rank!==0)throw new Error("Default value should be a scalar but received shape ".concat(s.shape));var u={indices:a,values:i,denseShape:o,defaultValue:s},l=j.runKernel(hS,u);return{outputIndices:l[0],outputValues:l[1],emptyRowIndicator:l[2],reverseIndexMap:l[3]}}var uQ=H({sparseFillEmptyRows_:sQ});function lQ(e,t,n){var r=O(e,"inputIndices","sparseReshape","int32"),a=O(t,"inputShape","sparseReshape","int32"),i=O(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        `.concat(r.shape));if(a.rank!==1)throw new Error("Input shape should be Tensor1D but received shape ".concat(a.shape));if(i.rank!==1)throw new Error("New shape should be Tensor1D but received shape ".concat(i.shape));var o={inputIndices:r,inputShape:a,newShape:i},s=j.runKernel(mS,o);return{outputIndices:s[0],outputShape:s[1]}}var cQ=H({sparseReshape_:lQ});function pQ(e,t,n){var r=O(e,"data","sparseSegmentMean"),a=O(t,"indices","sparseSegmentMean","int32"),i=O(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          `.concat(a.shape));if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          `.concat(i.shape));var o={data:r,indices:a,segmentIds:i};return j.runKernel(vS,o)}var dQ=H({sparseSegmentMean_:pQ});function fQ(e,t,n){var r=O(e,"data","sparseSegmentSum"),a=O(t,"indices","sparseSegmentSum","int32"),i=O(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         `.concat(a.shape));if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         `.concat(i.shape));var o={data:r,indices:a,segmentIds:i};return j.runKernel(gS,o)}var hQ=H({sparseSegmentSum_:fQ});function mQ(e,t,n,r,a,i,o,s){var u=O(e,"data","stringNGrams","string");if(u.dtype!=="string")throw new Error("Data must be of datatype string");if(u.shape.length!==1)throw new Error("Data must be a vector, saw: ".concat(u.shape));var l=O(t,"dataSplits","stringNGrams");if(l.dtype!=="int32")throw new Error("Data splits must be of datatype int32");var c={separator:n,nGramWidths:r,leftPad:a,rightPad:i,padWidth:o,preserveShortSequences:s},p={data:u,dataSplits:l},d=j.runKernel(SS,p,c);return{nGrams:d[0],nGramsSplits:d[1]}}var vQ=H({stringNGrams_:mQ});function gQ(e,t,n){n===void 0&&(n=!0);var r=O(e,"input","stringSplit","string"),a=O(t,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error("Input should be Tensor1D but received shape ".concat(r.shape));if(a.rank!==0)throw new Error("Delimiter should be a scalar but received shape ".concat(a.shape));var i={skipEmpty:n},o={input:r,delimiter:a},s=j.runKernel(kS,o,i);return{indices:s[0],values:s[1],shape:s[2]}}var yQ=H({stringSplit_:gQ});function bQ(e,t){var n=O(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");var a={input:n};return j.runKernel(NS,a,r)}var wQ=H({stringToHashBucketFast_:bQ});function xQ(e,t,n,r){r===void 0&&(r=!0);var a=O(e,"input","staticRegexReplace","string"),i={pattern:t,rewrite:n,replaceGlobal:r};return j.runKernel(wS,{x:a},i)}var SQ=H({staticRegexReplace_:xQ});var kQ={fft:gy,ifft:ym,rfft:yy,irfft:aN},NQ={hammingWindow:KJ,hannWindow:dN,frame:fN,stft:ZJ},TQ={flipLeftRight:nZ,grayscaleToRGB:aZ,resizeNearestNeighbor:_Z,resizeBilinear:CZ,rgbToGrayscale:oZ,rotateWithOffset:uZ,cropAndResize:eZ,nonMaxSuppression:cZ,nonMaxSuppressionAsync:yZ,nonMaxSuppressionWithScore:wZ,nonMaxSuppressionWithScoreAsync:SZ,nonMaxSuppressionPadded:NZ,nonMaxSuppressionPaddedAsync:EZ,threshold:RZ,transform:MZ},EQ={bandPart:BZ,gramSchmidt:zZ,qr:VZ},IQ={absoluteDifference:GZ,computeWeightedLoss:Bs,cosineDistance:HZ,hingeLoss:KZ,huberLoss:YZ,logLoss:ZZ,meanSquaredError:eQ,sigmoidCrossEntropy:rQ,softmaxCrossEntropy:oQ},CQ={sparseFillEmptyRows:uQ,sparseReshape:cQ,sparseSegmentMean:dQ,sparseSegmentSum:hQ},DQ={stringNGrams:vQ,stringSplit:yQ,stringToHashBucketFast:wQ,staticRegexReplace:SQ};var _Q=new Map,Ug=new Map,gN=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(t,n){return new t(n)},e}(),yN=function(){function e(){this.classNameMap={}}return e.getMap=function(){return e.instance==null&&(e.instance=new e),e.instance},e.register=function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]},e}();function bN(e,t,n){V(e.className!=null,function(){return"Class being registered does not have the static className property defined."}),V(typeof e.className=="string",function(){return"className is required to be a string, but got type "+typeof e.className}),V(e.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),typeof t>"u"&&(t="Custom"),typeof n>"u"&&(n=e.className);var r=n,a=t+">"+r;return yN.register(e),_Q.set(a,e),Ug.set(e,a),e}function AQ(e){return Ug.has(e)?Ug.get(e):e.className}var FQ={__proto__:null,Serializable:gN,SerializationMap:yN,getRegisteredName:AQ,registerClass:bN},Tu=function(e){Rs(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.minimize=function(n,r,a){r===void 0&&(r=!1);var i=this.computeGradients(n,a),o=i.value,s=i.grads;if(a!=null){var u=a.map(function(l){return{name:l.name,tensor:s[l.name]}});this.applyGradients(u)}else this.applyGradients(s);return xa(s),r?o:(o.dispose(),null)},Object.defineProperty(t.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!1,configurable:!0}),t.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},t.prototype.computeGradients=function(n,r){return Pk(n,r)},t.prototype.dispose=function(){this.iterations_!=null&&xa(this.iterations_)},t.prototype.saveIterations=function(){return tt(this,void 0,void 0,function(){return nt(this,function(n){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:rn(this.iterations_,"int32")}]})})},t.prototype.getWeights=function(){return tt(this,void 0,void 0,function(){return nt(this,function(n){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},t.prototype.setWeights=function(n){return tt(this,void 0,void 0,function(){return nt(this,function(r){throw new Error("setWeights() is not implemented for this optimizer class "+"".concat(this.getClassName()))})})},t.prototype.extractIterations=function(n){return tt(this,void 0,void 0,function(){var r;return nt(this,function(a){switch(a.label){case 0:return r=this,[4,n[0].tensor.data()];case 1:return r.iterations_=a.sent()[0],[2,n.slice(1)]}})})},t}(gN);Object.defineProperty(Tu,Symbol.hasInstance,{value:function(e){return e.minimize!=null&&e.computeGradients!=null&&e.applyGradients!=null}});var Ny=function(e){Rs(t,e);function t(n,r,a){a===void 0&&(a=null);var i=e.call(this)||this;return i.learningRate=n,i.rho=r,i.epsilon=a,i.accumulatedGrads=[],i.accumulatedUpdates=[],a==null&&(i.epsilon=j.backend.epsilon()),i}return Object.defineProperty(t,"className",{get:function(){return"Adadelta"},enumerable:!1,configurable:!0}),t.prototype.applyGradients=function(n){var r=this,a=Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n);a.forEach(function(i,o){var s=j.registeredVariables[i],u=!1;r.accumulatedGrads[o]==null&&(r.accumulatedGrads[o]={originalName:"".concat(i,"/accum_grad"),variable:yr(function(){return di(s).variable(u)})}),r.accumulatedUpdates[o]==null&&(r.accumulatedUpdates[o]={originalName:"".concat(i,"/accum_var"),variable:yr(function(){return di(s).variable(u)})});var l=Array.isArray(n)?n[o].tensor:n[i];if(l!=null){var c=r.accumulatedGrads[o].variable,p=r.accumulatedUpdates[o].variable;yr(function(){var d=Tt(je(c,r.rho),je(yo(l),1-r.rho)),f=je(vn(Fs(Tt(p,r.epsilon)),Fs(Tt(c,r.epsilon))),l),h=Tt(je(p,r.rho),je(yo(f),1-r.rho));c.assign(d),p.assign(h);var m=Tt(je(f,-r.learningRate),s);s.assign(m)})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedUpdates!=null&&(xa(this.accumulatedGrads.map(function(n){return n.variable})),xa(this.accumulatedUpdates.map(function(n){return n.variable})))},t.prototype.getWeights=function(){return tt(this,void 0,void 0,function(){var n;return nt(this,function(r){switch(r.label){case 0:return n=Mt(Mt([],Ie(this.accumulatedGrads),!1),Ie(this.accumulatedUpdates),!1),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(a){return{name:a.originalName,tensor:a.variable}}))]}})})},t.prototype.setWeights=function(n){return tt(this,void 0,void 0,function(){var r,a;return nt(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(n)];case 1:return n=i.sent(),r=n.length/2,a=!1,this.accumulatedGrads=n.slice(0,r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(a)}}),this.accumulatedUpdates=n.slice(r,r*2).map(function(o){return{originalName:o.name,variable:o.tensor.variable(a)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(n,r){return new n(r.learningRate,r.rho,r.epsilon)},t}(Tu),Ty=function(e){Rs(t,e);function t(n,r){r===void 0&&(r=.1);var a=e.call(this)||this;return a.learningRate=n,a.initialAccumulatorValue=r,a.accumulatedGrads=[],a}return Object.defineProperty(t,"className",{get:function(){return"Adagrad"},enumerable:!1,configurable:!0}),t.prototype.applyGradients=function(n){var r=this,a=Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n);a.forEach(function(i,o){var s=j.registeredVariables[i];if(r.accumulatedGrads[o]==null){var u=!1;r.accumulatedGrads[o]={originalName:"".concat(i,"/accumulator"),variable:yr(function(){return If(s.shape,r.initialAccumulatorValue).variable(u)})}}var l=Array.isArray(n)?n[o].tensor:n[i];if(l!=null){var c=r.accumulatedGrads[o].variable;yr(function(){var p=Tt(c,yo(l));c.assign(p);var d=Tt(je(vn(l,Fs(Tt(p,j.backend.epsilon()))),-r.learningRate),s);s.assign(d)})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedGrads!=null&&xa(this.accumulatedGrads.map(function(n){return n.variable}))},t.prototype.getWeights=function(){return tt(this,void 0,void 0,function(){return nt(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulatedGrads.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},t.prototype.setWeights=function(n){return tt(this,void 0,void 0,function(){var r;return nt(this,function(a){switch(a.label){case 0:return[4,this.extractIterations(n)];case 1:return n=a.sent(),r=!1,this.accumulatedGrads=n.map(function(i){return{originalName:i.name,variable:i.tensor.variable(r)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(n,r){return new n(r.learningRate,r.initialAccumulatorValue)},t}(Tu),Ey=function(e){Rs(t,e);function t(n,r,a,i){i===void 0&&(i=null);var o=e.call(this)||this;return o.learningRate=n,o.beta1=r,o.beta2=a,o.epsilon=i,o.accumulatedFirstMoment=[],o.accumulatedSecondMoment=[],yr(function(){o.accBeta1=rn(r).variable(),o.accBeta2=rn(a).variable()}),i==null&&(o.epsilon=j.backend.epsilon()),o}return Object.defineProperty(t,"className",{get:function(){return"Adam"},enumerable:!1,configurable:!0}),t.prototype.applyGradients=function(n){var r=this,a=Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n);yr(function(){var i=Ot(1,r.accBeta1),o=Ot(1,r.accBeta2);a.forEach(function(s,u){var l=j.registeredVariables[s],c=!1;r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:"".concat(s,"/m"),variable:yr(function(){return di(l).variable(c)})}),r.accumulatedSecondMoment[u]==null&&(r.accumulatedSecondMoment[u]={originalName:"".concat(s,"/v"),variable:yr(function(){return di(l).variable(c)})});var p=Array.isArray(n)?n[u].tensor:n[s];if(p!=null){var d=r.accumulatedFirstMoment[u].variable,f=r.accumulatedSecondMoment[u].variable,h=Tt(je(d,r.beta1),je(p,1-r.beta1)),m=Tt(je(f,r.beta2),je(yo(p),1-r.beta2)),v=vn(h,i),g=vn(m,o);d.assign(h),f.assign(m);var y=Tt(je(vn(v,Tt(Fs(g),r.epsilon)),-r.learningRate),l);l.assign(y)}}),r.accBeta1.assign(je(r.accBeta1,r.beta1)),r.accBeta2.assign(je(r.accBeta2,r.beta2))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&xa(this.accumulatedFirstMoment.map(function(n){return n.variable})),this.accumulatedSecondMoment!=null&&xa(this.accumulatedSecondMoment.map(function(n){return n.variable}))},t.prototype.getWeights=function(){return tt(this,void 0,void 0,function(){var n;return nt(this,function(r){switch(r.label){case 0:return n=Mt(Mt([],Ie(this.accumulatedFirstMoment),!1),Ie(this.accumulatedSecondMoment),!1),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(a){return{name:a.originalName,tensor:a.variable}}))]}})})},t.prototype.setWeights=function(n){return tt(this,void 0,void 0,function(){var r,a,i=this;return nt(this,function(o){switch(o.label){case 0:return[4,this.extractIterations(n)];case 1:return n=o.sent(),yr(function(){i.accBeta1.assign(mf(i.beta1,i.iterations_+1)),i.accBeta2.assign(mf(i.beta2,i.iterations_+1))}),r=n.length/2,a=!1,this.accumulatedFirstMoment=n.slice(0,r).map(function(s){return{originalName:s.name,variable:s.tensor.variable(a)}}),this.accumulatedSecondMoment=n.slice(r,r*2).map(function(s){return{originalName:s.name,variable:s.tensor.variable(a)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon)},t}(Tu),Iy=function(e){Rs(t,e);function t(n,r,a,i,o){i===void 0&&(i=null),o===void 0&&(o=0);var s=e.call(this)||this;return s.learningRate=n,s.beta1=r,s.beta2=a,s.epsilon=i,s.decay=o,s.accumulatedFirstMoment=[],s.accumulatedWeightedInfNorm=[],yr(function(){s.iteration=rn(0).variable(),s.accBeta1=rn(r).variable()}),i==null&&(s.epsilon=j.backend.epsilon()),s}return Object.defineProperty(t,"className",{get:function(){return"Adamax"},enumerable:!1,configurable:!0}),t.prototype.applyGradients=function(n){var r=this,a=Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n);yr(function(){var i=Ot(1,r.accBeta1),o=vn(-r.learningRate,Tt(je(r.iteration,r.decay),1));a.forEach(function(s,u){var l=j.registeredVariables[s],c=!1;r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:"".concat(s,"/m"),variable:di(l).variable(c)}),r.accumulatedWeightedInfNorm[u]==null&&(r.accumulatedWeightedInfNorm[u]={originalName:"".concat(s,"/v"),variable:di(l).variable(c)});var p=Array.isArray(n)?n[u].tensor:n[s];if(p!=null){var d=r.accumulatedFirstMoment[u].variable,f=r.accumulatedWeightedInfNorm[u].variable,h=Tt(je(d,r.beta1),je(p,1-r.beta1)),m=je(f,r.beta2),v=pi(p),g=Wk(m,v);d.assign(h),f.assign(g);var y=Tt(je(vn(o,i),vn(h,Tt(g,r.epsilon))),l);l.assign(y)}}),r.iteration.assign(Tt(r.iteration,1)),r.accBeta1.assign(je(r.accBeta1,r.beta1))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&xa(this.accumulatedFirstMoment.map(function(n){return n.variable})),this.accumulatedWeightedInfNorm!=null&&xa(this.accumulatedWeightedInfNorm.map(function(n){return n.variable}))},t.prototype.getWeights=function(){return tt(this,void 0,void 0,function(){return nt(this,function(n){throw new Error("getWeights() is not implemented for Adamax yet.")})})},t.prototype.setWeights=function(n){return tt(this,void 0,void 0,function(){return nt(this,function(r){throw new Error("setWeights() is not implemented for Adamax yet.")})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},t}(Tu),Bm=function(e){Rs(t,e);function t(n){var r=e.call(this)||this;return r.learningRate=n,r.setLearningRate(n),r}return Object.defineProperty(t,"className",{get:function(){return"SGD"},enumerable:!1,configurable:!0}),t.prototype.applyGradients=function(n){var r=this,a=Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n);a.forEach(function(i,o){var s=Array.isArray(n)?n[o].tensor:n[i];if(s!=null){var u=j.registeredVariables[i];yr(function(){var l=Tt(je(r.c,s),u);u.assign(l)})}}),this.incrementIterations()},t.prototype.setLearningRate=function(n){this.learningRate=n,this.c!=null&&this.c.dispose(),this.c=nk(rn(-n))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getWeights=function(){return tt(this,void 0,void 0,function(){return nt(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()]]}})})},t.prototype.setWeights=function(n){return tt(this,void 0,void 0,function(){return nt(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:if(n=r.sent(),n.length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(n,r){return new n(r.learningRate)},t}(Tu),Cy=function(e){Rs(t,e);function t(n,r,a){a===void 0&&(a=!1);var i=e.call(this,n)||this;return i.learningRate=n,i.momentum=r,i.useNesterov=a,i.accumulations=[],i.m=rn(i.momentum),i}return Object.defineProperty(t,"className",{get:function(){return"Momentum"},enumerable:!1,configurable:!0}),t.prototype.applyGradients=function(n){var r=this,a=Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n);a.forEach(function(i,o){var s=j.registeredVariables[i];if(r.accumulations[o]==null){var u=!1;r.accumulations[o]={originalName:"".concat(i,"/momentum"),variable:yr(function(){return di(s).variable(u)})}}var l=r.accumulations[o].variable,c=Array.isArray(n)?n[o].tensor:n[i];c!=null&&yr(function(){var p,d=Tt(je(r.m,l),c);r.useNesterov?p=Tt(je(r.c,Tt(c,je(d,r.m))),s):p=Tt(je(r.c,d),s),l.assign(d),s.assign(p)})}),this.incrementIterations()},t.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&xa(this.accumulations.map(function(n){return n.variable}))},t.prototype.setMomentum=function(n){this.momentum=n},t.prototype.getWeights=function(){return tt(this,void 0,void 0,function(){return nt(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulations.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},t.prototype.setWeights=function(n){return tt(this,void 0,void 0,function(){var r;return nt(this,function(a){switch(a.label){case 0:return[4,this.extractIterations(n)];case 1:return n=a.sent(),r=!1,this.accumulations=n.map(function(i){return{originalName:i.name,variable:i.tensor.variable(r)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(n,r){return new n(r.learningRate,r.momentum,r.useNesterov)},t}(Bm),Dy=function(e){Rs(t,e);function t(n,r,a,i,o){r===void 0&&(r=.9),a===void 0&&(a=0),i===void 0&&(i=null),o===void 0&&(o=!1);var s=e.call(this)||this;if(s.learningRate=n,s.decay=r,s.momentum=a,s.epsilon=i,s.accumulatedMeanSquares=[],s.accumulatedMoments=[],s.accumulatedMeanGrads=[],s.centered=o,i==null&&(s.epsilon=j.backend.epsilon()),n==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return s}return Object.defineProperty(t,"className",{get:function(){return"RMSProp"},enumerable:!1,configurable:!0}),t.prototype.applyGradients=function(n){var r=this,a=Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n);a.forEach(function(i,o){var s=j.registeredVariables[i],u=!1;r.accumulatedMeanSquares[o]==null&&(r.accumulatedMeanSquares[o]={originalName:"".concat(i,"/rms"),variable:yr(function(){return di(s).variable(u)})}),r.accumulatedMoments[o]==null&&(r.accumulatedMoments[o]={originalName:"".concat(i,"/momentum"),variable:yr(function(){return di(s).variable(u)})}),r.accumulatedMeanGrads[o]==null&&r.centered&&(r.accumulatedMeanGrads[o]={originalName:"".concat(i,"/mg"),variable:yr(function(){return di(s).variable(u)})});var l=Array.isArray(n)?n[o].tensor:n[i];if(l!=null){var c=r.accumulatedMeanSquares[o].variable,p=r.accumulatedMoments[o].variable;yr(function(){var d=Tt(je(c,r.decay),je(yo(l),1-r.decay));if(r.centered){var f=r.accumulatedMeanGrads[o].variable,h=Tt(je(f,r.decay),je(l,1-r.decay)),m=vn(je(l,r.learningRate),Fs(Ot(d,Tt(yo(h),r.epsilon)))),v=Tt(je(p,r.momentum),m);c.assign(d),f.assign(h),p.assign(v);var g=Ot(s,v);s.assign(g)}else{var y=Tt(je(c,r.decay),je(yo(l),1-r.decay)),v=Tt(je(p,r.momentum),vn(je(l,r.learningRate),Fs(Tt(y,r.epsilon))));c.assign(y),p.assign(v);var g=Ot(s,v);s.assign(g)}})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&xa(this.accumulatedMeanSquares.map(function(n){return n.variable})),this.accumulatedMeanGrads!=null&&this.centered&&xa(this.accumulatedMeanGrads.map(function(n){return n.variable})),this.accumulatedMoments!=null&&xa(this.accumulatedMoments.map(function(n){return n.variable}))},t.prototype.getWeights=function(){return tt(this,void 0,void 0,function(){var n;return nt(this,function(r){switch(r.label){case 0:return n=Mt(Mt([],Ie(this.accumulatedMeanSquares),!1),Ie(this.accumulatedMoments),!1),this.centered&&n.push.apply(n,Mt([],Ie(this.accumulatedMeanGrads),!1)),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(a){return{name:a.originalName,tensor:a.variable}}))]}})})},t.prototype.setWeights=function(n){return tt(this,void 0,void 0,function(){var r,a;return nt(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(n)];case 1:return n=i.sent(),r=this.centered?n.length/3:n.length/2,a=!1,this.accumulatedMeanSquares=n.slice(0,r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(a)}}),this.accumulatedMoments=n.slice(r,r*2).map(function(o){return{originalName:o.name,variable:o.tensor.variable(a)}}),this.centered&&(this.accumulatedMeanGrads=n.slice(r*2,r*3).map(function(o){return{originalName:o.name,variable:o.tensor.variable(a)}})),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(n,r){return new n(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},t}(Tu),RQ=[Ny,Ty,Ey,Iy,Cy,Dy,Bm];function OQ(){var e,t;try{for(var n=Ur(RQ),r=n.next();!r.done;r=n.next()){var a=r.value;bN(a)}}catch(i){e={error:i}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}}var MQ="model",PQ=".json",BQ=".weights.bin";function C9(e){return new Promise(function(t){return setTimeout(t)}).then(e)}var wm=function(){function e(t){if(!Ct().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),(t==null||t.length===0)&&(t=MQ),this.modelJsonFileName=t+PQ,this.weightDataFileName=t+BQ}return e.prototype.save=function(t){return tt(this,void 0,void 0,function(){var n,r,a,i,o,s,u;return nt(this,function(l){switch(l.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(n=Ms.join(t.weightData),r=window.URL.createObjectURL(new Blob([n],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return a=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],i=sk(t,a),o=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),s=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor,s.download=this.modelJsonFileName,s.href=o,[4,C9(function(){return s.dispatchEvent(new MouseEvent("click"))})];case 2:return l.sent(),t.weightData==null?[3,4]:(u=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor,u.download=this.weightDataFileName,u.href=r,[4,C9(function(){return u.dispatchEvent(new MouseEvent("click"))})]);case 3:l.sent(),l.label=4;case 4:return[2,{modelArtifactsInfo:Tf(t)}]}})})},e}();wm.URL_SCHEME="downloads://";var LQ=function(){function e(t){if(t==null||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+"but received ".concat(t));this.jsonFile=t[0],this.weightsFiles=t.slice(1)}return e.prototype.load=function(){return tt(this,void 0,void 0,function(){var t=this;return nt(this,function(n){return[2,new Promise(function(r,a){var i=new FileReader;i.onload=function(o){var s=JSON.parse(o.target.result),u=s.modelTopology;if(u==null){a(new Error("modelTopology field is missing from file ".concat(t.jsonFile.name)));return}var l=s.weightsManifest;if(l==null){a(new Error("weightManifest field is missing from file ".concat(t.jsonFile.name)));return}if(t.weightsFiles.length===0){r({modelTopology:u});return}var c=iy(s,function(p){return t.loadWeights(p)});r(c)},i.onerror=function(o){return a("Failed to read model topology and weights manifest JSON "+"from file '".concat(t.jsonFile.name,"'. BrowserFiles supports loading ")+"Keras-style tf.Model artifacts only.")},i.readAsText(t.jsonFile)})]})})},e.prototype.loadWeights=function(t){var n,r,a=this,i=[],o=[];try{for(var s=Ur(t),u=s.next();!u.done;u=s.next()){var l=u.value;i.push.apply(i,Mt([],Ie(l.weights),!1)),o.push.apply(o,Mt([],Ie(l.paths),!1))}}catch(d){n={error:d}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}var c=this.checkManifestAndWeightFiles(t),p=o.map(function(d){return a.loadWeightsFile(d,c[d])});return Promise.all(p).then(function(d){return[i,d]})},e.prototype.loadWeightsFile=function(t,n){return new Promise(function(r,a){var i=new FileReader;i.onload=function(o){var s=o.target.result;r(s)},i.onerror=function(o){return a("Failed to weights data from file of path '".concat(t,"'."))},i.readAsArrayBuffer(n)})},e.prototype.checkManifestAndWeightFiles=function(t){var n,r,a=this,i=[],o=this.weightsFiles.map(function(p){return T9(p.name)}),s={};try{for(var u=Ur(t),l=u.next();!l.done;l=u.next()){var c=l.value;c.paths.forEach(function(p){var d=T9(p);if(i.indexOf(d)!==-1)throw new Error("Duplicate file basename found in weights manifest: "+"'".concat(d,"'"));if(i.push(d),o.indexOf(d)===-1)throw new Error("Weight file with basename '".concat(d,"' is not provided."));s[p]=a.weightsFiles[o.indexOf(d)]})}}catch(p){n={error:p}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}if(i.length!==this.weightsFiles.length)throw new Error("Mismatch in the number of files in weights manifest "+"(".concat(i.length,") and the number of weight files provided ")+"(".concat(this.weightsFiles.length,")."));return s},e}(),zQ=function(e){return Ct().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(wm.URL_SCHEME)?$Q(e.slice(wm.URL_SCHEME.length)):null};fi.registerSaveRouter(zQ);function $Q(e){return e===void 0&&(e="model"),new wm(e)}function VQ(e){return new LQ(e)}function D9(e,t,n,r){o(e),n=n??0,r=r??1,s(n,r);var a=0,i=function(u){return u.then(function(l){var c=n+ ++a/e.length*(r-n);return t(c),l}),u};function o(u){V(u!=null&&Array.isArray(u)&&u.length>0,function(){return"promises must be a none empty array"})}function s(u,l){V(u>=0&&u<=1,function(){return"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(u)}),V(l>=0&&l<=1,function(){return"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(l)}),V(l>=u,function(){return"startFraction must be no more than endFraction, but "+"got startFraction ".concat(u," and endFraction ")+"".concat(l)})}return Promise.all(e.map(i))}function wN(e,t){return tt(this,void 0,void 0,function(){var n,r,a,i,o,s,u,l,c,p,d;return nt(this,function(f){switch(f.label){case 0:return t==null&&(t={}),n=t.fetchFunc==null?Ct().platform.fetch:t.fetchFunc,r=e.map(function(h){return n(h,t.requestInit,{isBinary:!0})}),a=0,i=.5,t.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return s=f.sent(),[3,4];case 2:return[4,D9(r,t.onProgress,a,i)];case 3:s=f.sent(),f.label=4;case 4:return o=s,u=o.map(function(h){return h.arrayBuffer()}),l=.5,c=1,t.onProgress!=null?[3,6]:[4,Promise.all(u)];case 5:return d=f.sent(),[3,8];case 6:return[4,D9(u,t.onProgress,l,c)];case 7:d=f.sent(),f.label=8;case 8:return p=d,[2,p]}})})}function WQ(e,t){var n=this,r,a=t.fetchFunc==null?Ct().platform.fetch:t.fetchFunc,i=0,o;return(r=t.onProgress)===null||r===void 0||r.call(t,0),new ReadableStream({pull:function(s){return tt(n,void 0,void 0,function(){var u,l,c,p,d;return nt(this,function(f){switch(f.label){case 0:return i<e.length?o?[3,2]:[4,a(e[i],t.requestInit,{isBinary:!0})]:[3,4];case 1:l=f.sent().body,o=l.getReader(),f.label=2;case 2:return[4,o.read()];case 3:return c=f.sent(),p=c.done,d=c.value,p?(i++,o=void 0,(u=t.onProgress)===null||u===void 0||u.call(t,i/e.length),[3,0]):(s.enqueue(d),[2]);case 4:return s.close(),[2]}})})}})}function UQ(e,t,n,r){return t===void 0&&(t=""),tt(this,void 0,void 0,function(){var a,i;return nt(this,function(o){return a=function(s){return wN(s,{requestInit:r})},i=xN(a),[2,i(e,t,n)]})})}function xN(e){var t=this;return function(n,r,a){return r===void 0&&(r=""),tt(t,void 0,void 0,function(){var i,o,s,u,l,c,p,d,f,h;return nt(this,function(m){switch(m.label){case 0:if(i=n.map(function(){return!1}),o={},s=a!=null?a.map(function(){return!1}):[],u=[],n.forEach(function(v,g){var y=0;v.weights.forEach(function(w){var b="quantization"in w?w.quantization.dtype:w.dtype,x=gl[b]*Qt(w.shape),k=function(){i[g]=!0,o[g]==null&&(o[g]=[]),o[g].push({manifestEntry:w,groupOffset:y,sizeBytes:x})};a!=null?a.forEach(function(N,E){N===w.name&&(k(),s[E]=!0)}):k(),u.push(w.name),y+=x})}),!s.every(function(v){return v}))throw l=a.filter(function(v,g){return!s[g]}),new Error("Could not find weights in manifest with names: "+"".concat(l.join(", "),`. 
`)+"Manifest JSON has weights with names: "+"".concat(u.join(", "),"."));return c=i.reduce(function(v,g,y){return g&&v.push(y),v},[]),p=[],c.forEach(function(v){n[v].paths.forEach(function(g){var y=r+(r.endsWith("/")?"":"/")+g;p.push(y)})}),[4,e(p)];case 1:return d=m.sent(),f={},h=0,c.forEach(function(v){var g=n[v].paths.length,y=new Ms(d.slice(h,h+g)),w=o[v];w.forEach(function(b){var x=y.slice(b.groupOffset,b.groupOffset+b.sizeBytes),k=ik(x,[b.manifestEntry]);for(var N in k)f[N]=k[N]}),h+=g}),[2,f]}})})}}var GQ="application/octet-stream",qQ="application/json",_y=function(){function e(t,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(V(typeof n.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=n.fetchFunc):this.fetch=Ct().platform.fetch,V(t!=null&&t.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(t)&&V(t.length===2,function(){return"URL paths for http must have a length of 2, "+"(actual length is ".concat(t.length,").")}),this.path=t,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{},this.loadOptions=n}return e.prototype.save=function(t){return tt(this,void 0,void 0,function(){var n,r,a,i,o;return nt(this,function(s){switch(s.label){case 0:if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit),n.body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],a=sk(t,r),n.body.append("model.json",new Blob([JSON.stringify(a)],{type:qQ}),"model.json"),t.weightData!=null&&(i=Ms.join(t.weightData),n.body.append("model.weights.bin",new Blob([i],{type:GQ}),"model.weights.bin")),[4,this.fetch(this.path,n)];case 1:if(o=s.sent(),o.ok)return[2,{modelArtifactsInfo:Tf(t),responses:[o]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(o.status,"."))}})})},e.prototype.loadModelJSON=function(){return tt(this,void 0,void 0,function(){var t,n,r,a,i;return nt(this,function(o){switch(o.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(t=o.sent(),!t.ok)throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(t.status,". Please verify this URL points to ")+"the model JSON of the model to load.");o.label=2;case 2:return o.trys.push([2,4,,5]),[4,t.json()];case 3:return n=o.sent(),[3,5];case 4:throw o.sent(),r="Failed to parse model JSON of response from ".concat(this.path,"."),this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(a=n.modelTopology,i=n.weightsManifest,a==null&&i==null)throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");return[2,n]}})})},e.prototype.load=function(){return tt(this,void 0,void 0,function(){var t,n=this;return nt(this,function(r){switch(r.label){case 0:return this.loadOptions.streamWeights?[2,this.loadStream()]:[4,this.loadModelJSON()];case 1:return t=r.sent(),[2,iy(t,function(a){return n.loadWeights(a)})]}})})},e.prototype.loadStream=function(){return tt(this,void 0,void 0,function(){var t,n,r,a,i=this;return nt(this,function(o){switch(o.label){case 0:return[4,this.loadModelJSON()];case 1:return t=o.sent(),[4,this.getWeightUrls(t.weightsManifest)];case 2:return n=o.sent(),r=Rg(t.weightsManifest),a=function(){return WQ(n,i.loadOptions)},[2,Object.assign(Object.assign({},t),{weightSpecs:r,getWeightStream:a})]}})})},e.prototype.getWeightUrls=function(t){return tt(this,void 0,void 0,function(){var n,r,a,i,o,s,u,l,c,p,d,f,h,m,v,g,y,w,b,x,k;return nt(this,function(N){switch(N.label){case 0:n=Array.isArray(this.path)?this.path[1]:this.path,r=Ie(HQ(n),2),a=r[0],i=r[1],o=this.weightPathPrefix||a,s=[],u=[];try{for(l=Ur(t),c=l.next();!c.done;c=l.next()){p=c.value;try{for(d=(x=void 0,Ur(p.paths)),f=d.next();!f.done;f=d.next())h=f.value,this.weightUrlConverter!=null?u.push(this.weightUrlConverter(h)):s.push(o+h+i)}catch(E){x={error:E}}finally{try{f&&!f.done&&(k=d.return)&&k.call(d)}finally{if(x)throw x.error}}}}catch(E){w={error:E}}finally{try{c&&!c.done&&(b=l.return)&&b.call(l)}finally{if(w)throw w.error}}return this.weightUrlConverter?(v=(m=s.push).apply,g=[s],y=[[]],[4,Promise.all(u)]):[3,2];case 1:v.apply(m,g.concat([Mt.apply(void 0,y.concat([Ie.apply(void 0,[N.sent()]),!1]))])),N.label=2;case 2:return[2,s]}})})},e.prototype.loadWeights=function(t){return tt(this,void 0,void 0,function(){var n,r,a;return nt(this,function(i){switch(i.label){case 0:return[4,this.getWeightUrls(t)];case 1:return n=i.sent(),r=Rg(t),[4,wN(n,this.loadOptions)];case 2:return a=i.sent(),[2,[r,a]]}})})},e}();_y.URL_SCHEME_REGEX=/^https?:\/\//;function HQ(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),r=e.substring(0,t),a=n>t?e.substring(n):"";return[r+"/",a]}function Gg(e){return e.match(_y.URL_SCHEME_REGEX)!=null}var SN=function(e,t){if(typeof fetch>"u"&&(t==null||t.fetchFunc==null))return null;var n=!0;return Array.isArray(e)?n=e.every(function(r){return Gg(r)}):n=Gg(e),n?Ay(e,t):null};fi.registerSaveRouter(SN);fi.registerLoadRouter(SN);function Ay(e,t){return new _y(e,t)}function jQ(e,t){return Ay(e,t)}var yg=function(){function e(t){this.modelArtifacts=t}return e.prototype.load=function(){return this.modelArtifacts},e}(),kN=function(){function e(t){this.saveHandler=t}return e.prototype.save=function(t){return this.saveHandler(t)},e}(),KQ=function(){function e(t){t.load&&(this.load=function(){return Promise.resolve(t.load())}),t.save&&(this.save=function(n){return Promise.resolve(t.save(n))})}return e}();function XQ(e,t,n,r){var a=arguments;return new KQ(NN.apply(void 0,Mt([],Ie(a),!1)))}function NN(e,t,n,r){if(arguments.length===1){var a=e.modelTopology!=null||e.weightSpecs!=null;return a?new yg(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new yg({modelTopology:e}))}else return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new yg({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r})}function YQ(e){return new kN(e)}function JQ(e){return new kN(e)}var ZQ={__proto__:null,CompositeArrayBuffer:Ms,browserFiles:VQ,browserHTTPRequest:jQ,concatenateArrayBuffers:LG,copyModel:oq,decodeWeights:ik,decodeWeightsStream:OG,encodeWeights:AG,fromMemory:XQ,fromMemorySync:NN,getLoadHandlers:HG,getModelArtifactsForJSON:iy,getModelArtifactsForJSONSync:uk,getModelArtifactsInfoForJSON:Tf,getSaveHandlers:qG,getWeightSpecs:Rg,http:Ay,isHTTPScheme:Gg,listModels:aq,loadWeights:UQ,moveModel:sq,registerLoadRouter:GG,registerSaveRouter:UG,removeModel:iq,weightsLoaderFactory:xN,withSaveHandler:YQ,withSaveHandlerSync:JQ};function QQ(e,t,n){var r=O(e,"labels","confusionMatrix"),a=O(t,"predictions","confusionMatrix");V(n==null||n>0&&Number.isInteger(n),function(){return"If provided, numClasses must be a positive integer, "+"but got ".concat(n)}),V(r.rank===1,function(){return"Expected the rank of labels to be 1, but got ".concat(r.rank)}),V(a.rank===1,function(){return"Expected the rank of predictions to be 1, "+"but got ".concat(a.rank)}),V(r.shape[0]===a.shape[0],function(){return"Mismatch in the number of examples: "+"".concat(r.shape[0]," vs. ").concat(a.shape[0],". ")+"Labels and predictions should have the same number of elements."}),V(n>0&&Number.isInteger(n),function(){return"numClasses is required to be a positive integer, but got "+"".concat(n)});var i=Vg(bn(r,"int32"),n),o=Vg(bn(a,"int32"),n),s=bm(i),u=Xt(s,o);return bn(u,"int32")}var eee=H({confusionMatrix_:QQ});var tee={__proto__:null,confusionMatrix:eee},cl,_9=!1;function TN(e,t){if(t===void 0&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,a=!1,i=!1,o=!1,s=!1;if(e.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&e instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement)a=!0;else if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement)i=!0;else if(e.getContext!=null)o=!0;else if(typeof ImageBitmap<"u"&&e instanceof ImageBitmap)s=!0;else throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, "+"but was ".concat(e.constructor.name));var u=uf(xg,j.backendName);if(u!=null){var l={pixels:e},c={numChannels:t};return j.runKernel(xg,l,c)}var p=Ie(a?[e.videoWidth,e.videoHeight]:[e.width,e.height],2),d=p[0],f=p[1],h;if(o)h=e.getContext("2d").getImageData(0,0,d,f).data;else if(r||n)h=e.data;else if(i||a||s){if(cl==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")cl=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else cl=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});cl.canvas.width=d,cl.canvas.height=f,cl.drawImage(e,0,0,d,f),h=cl.getImageData(0,0,d,f).data}var m;if(t===4)m=new Int32Array(h);else{var v=d*f;m=new Int32Array(v*t);for(var g=0;g<v;g++)for(var y=0;y<t;++y)m[g*t+y]=h[g*4+y]}var w=[f,d,t];return sN(m,w,"int32")}function nee(e){return e!=null&&e.data instanceof Uint8Array}function ree(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function aee(e){return e!=null&&e.width!==0&&e.height!==0}function iee(e){return ree()&&!(e instanceof ImageBitmap)&&aee(e)&&!nee(e)}function oee(e,t){return t===void 0&&(t=3),tt(this,void 0,void 0,function(){var n,r;return nt(this,function(a){switch(a.label){case 0:if(n=null,!(Ct().getBool("WRAP_TO_IMAGEBITMAP")&&iee(e)))return[3,5];r=void 0,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,createImageBitmap(e,{premultiplyAlpha:"none"})];case 2:return r=a.sent(),[3,4];case 3:return a.sent(),r=null,[3,4];case 4:return r!=null&&r.width===e.width&&r.height===e.height?n=r:n=e,[3,6];case 5:n=e,a.label=6;case 6:return[2,TN(n,t)]}})})}function EN(e){if(e.rank!==2&&e.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank ".concat(e.rank,"."));var t=e.rank===2?1:e.shape[2];if(t>4||t===2)throw new Error("toPixels only supports depth of size "+"1, 3 or 4 but got ".concat(t));if(e.dtype!=="float32"&&e.dtype!=="int32")throw new Error("Unsupported type for toPixels: ".concat(e.dtype,".")+" Please use float32 or int32 tensors.")}function see(e){var t=e?.alpha||1;if(t>1||t<0)throw new Error("Alpha value ".concat(t," is suppoed to be in range [0 - 1]."))}function uee(e,t){return tt(this,void 0,void 0,function(){var n,r,a,i,o,s,u,l,c,p,d,f,h,m,v,g,y;return nt(this,function(w){switch(w.label){case 0:return n=O(e,"img","toPixels"),e instanceof gr||(r=n,n=bn(r,"int32"),r.dispose()),EN(n),a=Ie(n.shape.slice(0,2),2),i=a[0],o=a[1],s=n.rank===2?1:n.shape[2],[4,n.data()];case 1:for(u=w.sent(),l=n.dtype==="float32"?255:1,c=new Uint8ClampedArray(o*i*4),p=0;p<i*o;++p){for(d=[0,0,0,255],f=0;f<s;f++){if(h=u[p*s+f],n.dtype==="float32"){if(h<0||h>1)throw new Error("Tensor values for a float32 Tensor must be in the "+"range [0 - 1] but encountered ".concat(h,"."))}else if(n.dtype==="int32"&&(h<0||h>255))throw new Error("Tensor values for a int32 Tensor must be in the "+"range [0 - 255] but encountered ".concat(h,"."));s===1?(d[0]=h*l,d[1]=h*l,d[2]=h*l):d[f]=h*l}m=p*4,c[m+0]=Math.round(d[0]),c[m+1]=Math.round(d[1]),c[m+2]=Math.round(d[2]),c[m+3]=Math.round(d[3])}return t!=null&&(_9||(v=uf(Jg,j.backendName),v!=null&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),_9=!0)),t.width=o,t.height=i,g=t.getContext("2d"),y=new ImageData(c,o,i),g.putImageData(y,0,0)),n!==e&&n.dispose(),[2,c]}})})}function lee(e,t,n){var r=O(e,"img","draw");if(!(e instanceof gr)){var a=r;r=bn(a,"int32"),a.dispose()}EN(r),see(n?.imageOptions);var i={image:r},o={canvas:t,options:n};j.runKernel(Jg,i,o)}var cee=H({fromPixels_:TN}),pee={__proto__:null,draw:lee,fromPixels:cee,fromPixelsAsync:oee,toPixels:uee};function IN(e,t){var n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(r,"."));if(t.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[r-1]," vs. ").concat(n));if(Qt(e.shape)===0)throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));for(var a=t.shape,i=a[a.length-1],o=1,s=0;s<a.length-1;++s)o*=a[s];var u=e.shape,l=a.slice();l.pop();for(var c=1,s=i;s<n;++s)c*=u[s],l.push(u[s]);var p=Mt(Mt([],Ie(ip(e.shape).map(function(d){return d/c})),!1),[1],!1).slice(0,i);return[l,o,c,p]}var dee={__proto__:null,prepareAndValidate:IN},qg=-2,fee=-1;function hee(e,t,n){var r=e.shape.length;V(r===t.length,function(){return"Error in slice".concat(r,"D: Length of begin ").concat(t," must ")+"match the rank of the array (".concat(r,").")}),V(r===n.length,function(){return"Error in slice".concat(r,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(r,").")});for(var a=function(o){V(t[o]+n[o]<=e.shape[o],function(){return"Error in slice".concat(r,"D: begin[").concat(o,"] + size[").concat(o,"] ")+"(".concat(t[o]+n[o],") would overflow input.shape[").concat(o,"] (").concat(e.shape[o],")")})},i=0;i<r;++i)a(i)}function mee(e){for(var t=[],n=0;e>0;)e&1&&t.push(n),e/=2,n++;return t}function vee(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function CN(e,t,n,r){for(var a=Mt([],Ie(e),!1),i=a.length;i<r.length;i++)a.push(1);for(var i=0;i<n;i++)i===0?a[t]=1:(a.splice(t,0,1),a.pop());return a}function DN(e,t,n){return n<=e?n:n-(t-1)}function _N(e,t){for(var n=[],r=0;r<e;r++)n.push(t+r);return n}function gee(e,t,n,r,a,i,o,s,u){var l=e.length,c=new Array(l),p=new Array(l),d=new Array(l);if(t.length&&n>0){var f=t[0],h=n+1;c=AN(o,f,h,r,e),p=FN(s,f,h,a,e),d=CN(i,f,h,e)}else for(var m=0;m<l;m++)c[m]=ON(o,r,i,e,m,u),p[m]=MN(s,a,i,e,m,u),d[m]=RN(i,m,u);return{begin:c,end:p,strides:d}}function AN(e,t,n,r,a){for(var i=Mt([],Ie(a),!1),o=_N(n,t),s=0;s<i.length;s++)if(o.indexOf(s)>-1)i[s]=0;else{var u=DN(t,n,s),l=r[u];e&1<<u&&(l=0),i[s]=l}return i}function FN(e,t,n,r,a){for(var i=Mt([],Ie(a),!1),o=_N(n,t),s=0;s<i.length;s++)if(o.indexOf(s)>-1)i[s]=Number.MAX_SAFE_INTEGER;else{var u=DN(t,n,s),l=r[u];e&1<<u&&(l=Number.MAX_SAFE_INTEGER),i[s]=l}for(var c=0;c<i.length;c++){var p=a[c];i[c]<0&&(i[c]+=p),i[c]=of(0,i[c],a[c])}return i}function RN(e,t,n){var r=e[t];return(n&1<<t||r==null)&&(r=1),r}function ON(e,t,n,r,a,i){var o=t[a],s=n[a]||1;(e&1<<a||i&1<<a||o==null)&&(s>0?o=Number.MIN_SAFE_INTEGER:o=Number.MAX_SAFE_INTEGER);var u=r[a];return o<0&&(o+=u),o=of(0,o,u-1),o}function MN(e,t,n,r,a,i){var o=t[a],s=n[a]||1;(e&1<<a||i&1<<a||o==null)&&(s>0?o=Number.MAX_SAFE_INTEGER:o=Number.MIN_SAFE_INTEGER);var u=r[a];return o<0&&(o+=u),s>0?o=of(0,o,u):o=of(-1,o,u-1),o}function yee(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(var a=r+1;a<n.length;a++)if(t[a]>0||n[a]!==e[a])return!1;return!0}function bee(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function wee(e,t,n){var r,a=e.shape.length;typeof t=="number"?r=Mt([t],Ie(new Array(a-1).fill(0)),!1):t.length<a?r=t.concat(new Array(a-t.length).fill(0)):r=t.slice(),r.forEach(function(o){V(o!==-1,function(){return"slice() does not support negative begin indexing."})});var i;return n==null?i=new Array(a).fill(-1):typeof n=="number"?i=Mt([n],Ie(new Array(a-1).fill(-1)),!1):n.length<a?i=n.concat(new Array(a-n.length).fill(-1)):i=n,i=i.map(function(o,s){return o>=0?o:(V(o===-1,function(){return"Negative size values should be exactly -1 but got "+"".concat(o," for the slice() size at index ").concat(s,".")}),e.shape[s]-r[s])}),[r,i]}function xee(e,t,n,r,a,i,o,s,u){var l;if(r==null?(l=new Array(t.length),l.fill(1)):l=r,o!=null&&o&o-1)throw new Error("Multiple ellipses in slice is not allowed.");for(var c=!1,p={dims:l.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:l.slice(),beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u},d=0;d<p.dims;d++)c&&1<<d&s&&p.numAddAxisAfterEllipsis++,1<<d&o&&(c=!0);c||(p.ellipsisMask|=1<<p.dims,p.dims++);var f={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};See(p,f);for(var h=!0,m=!0,v=!0,g=[],y=[],d=0;d<e.length;++d){if(f.strides[d]===0)throw Error("strides[".concat(d,"] must be non-zero"));var w=!!(f.shrinkAxisMask&1<<d),b=e[d];if(b===-1){g.push(w?1:-1);continue}var x=[f.beginMask&1<<d,f.endMask&1<<d],k=[f.strides[d]>0?0:-1,f.strides[d]>0?b:b-1];if(w&&f.strides[d]<=0)throw Error("only stride 1 allowed on non-range indexing.");v=v&&f.strides[d]===1;var N=!!(f.beginMask&1<<d&&f.endMask&1<<d);if(f.beginValid&&f.endValid){if(w){var E=f.begin[d]<0?b+f.begin[d]:f.begin[d];if(f.begin[d]=E,f.end[d]=f.begin[d]+1,E<0||E>=b)throw Error("slice index ".concat(f.begin[d]," of dimension ").concat(d," out of bounds."))}else f.begin[d]=A9(f.begin[d],0,f.strides[d],b,x,k),f.end[d]=A9(f.end[d],1,f.strides[d],b,x,k);var C=f.strides[d]===1&&f.begin[d]===0&&f.end[d]===b;h=h&&C,m=m&&(d===0&&f.strides[d]===1||C)}else h=h&&f.strides[d]===1&&N,m=m&&(d===0&&f.strides[d]===1||N);var R=void 0,A=!1;if(f.beginValid&&f.endValid?(R=f.end[d]-f.begin[d],A=!0):w?(R=1,A=!0):N&&b>=0&&(f.strides[d]<0?R=-b:R=b,A=!0),A){var M=void 0;R===0||R<0!=f.strides[d]<0?M=0:M=Math.trunc(R/f.strides[d])+(R%f.strides[d]!==0?1:0),g.push(M)}else g.push(-1)}for(var $=0;$<f.finalShapeGatherIndices.length;++$){var z=f.finalShapeGatherIndices[$];z>=0?y.push(g[z]):z===qg&&y.push(1)}var L=y.filter(function(B,W){return f.finalShapeGatherIndices[W]!==qg});return{finalShapeSparse:L,finalShape:y,isIdentity:h,sliceDim0:m,isSimpleSlice:v,begin:f.begin,end:f.end,strides:f.strides}}function See(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;var n=0;t.beginValid=e.begin!=null,t.endValid=e.end!=null,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(var r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask)for(var a=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);n<a;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r;else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(qg),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input ")+"has only ".concat(t.dims," dims, ").concat(t.begin.length,"."));e.begin!=null&&(t.begin[n]=e.begin[r]),e.end!=null&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(fee),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}function A9(e,t,n,r,a,i){if(a[t])return n>0?i[t]:i[t+1&1];var o=e<0?r+e:e;return o<i[0]?i[0]:o>i[1]?i[1]:o}var PN={__proto__:null,assertParamsValid:hee,computeFlatOffset:bee,computeOutShape:vee,getNormalizedAxes:gee,isSliceContinous:yee,maskToAxes:mee,parseSliceParams:wee,sliceInfo:xee,startForAxis:ON,startIndicesWithElidedDims:AN,stopForAxis:MN,stopIndicesWithElidedDims:FN,stridesForAxis:RN,stridesWithElidedDims:CN};var kee="4.21.0";var BN=function(){function e(){}return e.sgd=function(t){return new Bm(t)},e.momentum=function(t,n,r){return r===void 0&&(r=!1),new Cy(t,n,r)},e.rmsprop=function(t,n,r,a,i){return n===void 0&&(n=.9),r===void 0&&(r=0),a===void 0&&(a=null),i===void 0&&(i=!1),new Dy(t,n,r,a,i)},e.adam=function(t,n,r,a){return t===void 0&&(t=.001),n===void 0&&(n=.9),r===void 0&&(r=.999),a===void 0&&(a=null),new Ey(t,n,r,a)},e.adadelta=function(t,n,r){return t===void 0&&(t=.001),n===void 0&&(n=.95),r===void 0&&(r=null),new Ny(t,n,r)},e.adamax=function(t,n,r,a,i){return t===void 0&&(t=.002),n===void 0&&(n=.9),r===void 0&&(r=.999),a===void 0&&(a=null),i===void 0&&(i=0),new Iy(t,n,r,a,i)},e.adagrad=function(t,n){return n===void 0&&(n=.1),new Ty(t,n)},e}();var Nee=BN;var Tee=function(){return typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:function(e){return e()}}();function Eee(){return new Promise(function(e){return Tee(function(){return e()})})}function Iee(e,t){var n=e[0].length;e.forEach(function(a,i){V(a.length===n,function(){return"Error in concat".concat(n,"D: rank of tensors[").concat(i,"] must be the same ")+"as the rank of the rest (".concat(n,")")})}),V(t>=0&&t<n,function(){return"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")});var r=e[0];e.forEach(function(a,i){for(var o=0;o<n;o++)V(o===t||a[o]===r[o],function(){return"Error in concat".concat(n,"D: Shape of tensors[").concat(i,"] (").concat(a,") ")+"does not match the shape of the rest (".concat(r,") ")+"along the non-concatenated axis ".concat(i,".")})})}function Cee(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}var Zo;(function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"})(Zo||(Zo={}));function Dee(e,t,n){var r=new Array;if(n==null&&t==null)return r;if(t==null)for(;r.length<e+n.length;)r.push(-1);else r=t.slice();if(n==null)return r;if(e+n.length!==r.length)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.rank = ").concat(e+n.length,", but shape.rank = ").concat(r.length));for(var a=1;a<n.length;++a){var i=n[a],o=r[r.length-n.length+a],s=r[o];if(i>=0)if(s>=0){if(s!==i)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.shape[").concat(a+e,"] = ").concat(i," but shape[").concat(a+e,"] = ").concat(s))}else r[o]=i}return r}function _ee(e){var t,n,r={FIRST_DIM_SIZE:Zo.FIRST_DIM_SIZE,VALUE_ROWIDS:Zo.VALUE_ROWIDS,ROW_LENGTHS:Zo.ROW_LENGTHS,ROW_SPLITS:Zo.ROW_SPLITS,ROW_LIMITS:Zo.ROW_LIMITS,ROW_STARTS:Zo.ROW_STARTS},a=[];try{for(var i=Ur(e),o=i.next();!o.done;o=i.next()){var s=o.value;if(s in r)a.push(r[s]);else break}}catch(u){t={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return a}function Aee(e){return e.length===0?0:e[0]===Zo.FIRST_DIM_SIZE?e.length-1:e.length}function Fee(e,t){if(!(e==null||t==null)){var n=e.length,r=t.length;if(n>=r)throw new Error("defaultValue.shape=".concat(e," and ragged tensor flatValues.shape=").concat(t,", are incompatible: defaultValue.rank = ").concat(n," must be less than ragged tensor input flatValues.rank = ").concat(r,")"));for(var a=0;a<Math.min(n,r-1);++a){var i=e[a],o=t[a+1];if(i>=0&&o>=0&&i!==1&&i!==o)throw new Error("defaultValue.shape=".concat(e,", and ragged tensor input flatValues.shape=").concat(t," are incompatible: defaultValue.shape[").concat(a-e.length,"] = ").concat(i," but ragged tensor input.flatValues.shape[").concat(a-e.length,"] = ").concat(o))}}}var Fy=30;function Ree(e){return e<=Fy?e:cm(e,Math.floor(Math.sqrt(e)))}function Oee(e,t,n){var r=n*(typeof e=="number"?e:e[0]),a=t*(typeof e=="number"?e:e[1]);return[r,a]}function Mee(e,t,n,r){r===void 0&&(r=!0);var a=[];if(r)a=a.concat(t.slice(0)),a.push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var i=t.length,o=0;o<i;++o)a=a.concat([e[o+1]/t[o],t[o]]);a=a.concat(e.slice(i+1))}return a}function Pee(e,t,n){n===void 0&&(n=!0);var r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{for(var i=[],o=[],a=1;a<e;++a)a>=t*2+1||a%2===1?o.push(a):i.push(a);r.push.apply(r,Mt([],Ie(i),!1)),r.push(0),r.push.apply(r,Mt([],Ie(o),!1))}return r}function Bee(e,t,n,r){r===void 0&&(r=!0);var a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var i=1;i<e.length;++i)i<=t.length?r?a.push(t[i-1]*e[i]):a.push(e[i]/t[i-1]):a.push(e[i]);return a}function Lee(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function zee(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}var $ee=1.7580993408473768,Vee=1.0507009873554805;var Wee=.3275911,Uee=.254829592,Gee=-.284496736,qee=1.421413741,Hee=-1.453152027,jee=1.061405429;function Kee(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(e.length,", imag: ").concat(t.length,"."));for(var n=new Float32Array(e.length*2),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function Xee(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function Yee(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function Jee(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function Zee(e,t){var n=e[t*2],r=e[t*2+1];return{real:n,imag:r}}function Qee(e,t,n,r){e[r*2]=t,e[r*2+1]=n}function ete(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),a=0;a<Math.ceil(e/2);a++){var i=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}function tte(e,t,n){var r=(n?2:-2)*Math.PI*(e/t),a=Math.cos(r),i=Math.sin(r);return{real:a,imag:i}}var bg="->",nte=/->/g,F9=",",R9="...";function rte(e,t){e=e.replace(/\s/g,"");var n=(e.length-e.replace(nte,"").length)/bg.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(bg,'").'));var r=Ie(e.split(bg),2),a=r[0],i=r[1];V(a.indexOf(R9)===-1,function(){return'The ellipsis notation ("'.concat(R9,'") is not supported yet.')});var o=a.split(F9),s=o.length;if(t!==s)throw new Error("Expected ".concat(s," input tensors, received ").concat(t));if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");for(var u=[],l=function(g){var y=i[g];if(!o.some(function(w){return w.indexOf(y)!==-1}))throw new Error("Output subscripts contain the label ".concat(y," ")+"not present in the input subscripts.");u.indexOf(y)===-1&&u.push(y)},c=0;c<i.length;++c)l(c);for(var c=0;c<a.length;++c){var p=a[c];u.indexOf(p)===-1&&p!==F9&&u.push(p)}for(var d=new Array(o.length),c=0;c<s;++c){if(new Set(o[c].split("")).size!==o[c].length)throw new Error("Found duplicate axes in input component ".concat(o[c],". ")+"Support for duplicate axes in input is not implemented yet.");d[c]=[];for(var f=0;f<o[c].length;++f)d[c].push(u.indexOf(o[c][f]))}for(var h=u.length,m=i.length,v=[],c=m;c<h;++c)v.push(c);return{allDims:u,summedDims:v,idDims:d}}function ate(e,t){var n=new Array(e);n.fill(-1);for(var r=0;r<t.length;++r)n[t[r]]=r;for(var a=[],r=0;r<e;++r)n[r]===-1&&a.push(r);return n=n.filter(function(i){return i!==-1}),{permutationIndices:n,expandDims:a}}function ite(e,t,n){for(var r=new Array(e),a=function(o){for(var s=n[o].shape,u=function(c){r[t[o][c]]===void 0?r[t[o][c]]=s[c]:V(r[t[o][c]]===s[c],function(){return"Expected dimension ".concat(r[t[o][c]]," at axis ").concat(c," ")+"of input shaped ".concat(JSON.stringify(s),", ")+"but got dimension ".concat(s[c])})},l=0;l<t[o].length;++l)u(l)},i=0;i<n.length;++i)a(i)}function ote(e,t){var n,r,a=e,i=[],o=0;e.length===0&&a.push(-1),o=e.length+1;for(var s=0;s<o;++s)i.push([]);for(var u=[],s=0;s<a.length;++s){var l=a[s],c=ute(t,l);try{for(var p=(n=void 0,Ur(c)),d=p.next();!d.done;d=p.next()){var f=d.value;u.indexOf(f)===-1&&(i[s].push(f),u.push(f))}}catch(m){n={error:m}}finally{try{d&&!d.done&&(r=p.return)&&r.call(p)}finally{if(n)throw n.error}}}return{path:a,steps:i}}function ste(e){return e.every(function(t,n){return t===n})}function ute(e,t){for(var n=[],r=0;r<e.length;++r)(e[r].length===0||e[r].indexOf(t)!==-1||t===-1)&&n.push(r);return n}function lte(e,t,n){n===void 0&&(n=0);var r=[];if(typeof t=="number")V(e.shape[n]%t===0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(t).fill(e.shape[n]/t);else{var a=t.reduce(function(s,u){return u===-1&&(s+=1),s},0);V(a<=1,function(){return"There should be only one negative value in split array."});var i=t.indexOf(-1);if(i!==-1){var o=t.reduce(function(s,u){return u>0?s+u:s});t[i]=e.shape[n]-o}V(e.shape[n]===t.reduce(function(s,u){return s+u}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=t}return r}function cte(e){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = `.concat(e)}function pte(e,t){return"indices(".concat(e,", 0) is invalid: ").concat(t," < 0")}function dte(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}function fte(e,t){return"only one output dimension may be -1, not both ".concat(e," and ").concat(t)}function hte(e,t){return"size ".concat(e," must be non-negative, not ").concat(t)}function mte(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function vte(e,t){var n=Qt(e),r=Qt(t);return"Input to reshape is a SparseTensor with ".concat(n,`
  dense values, but the requested shape requires a multiple of `).concat(r,". inputShape=").concat(e," outputShape= ").concat(t)}function gte(e,t){var n=Qt(e),r=Qt(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(r,". inputShape=").concat(e," outputShape=").concat(t)}function yte(){return"segment ids must be >= 0"}function bte(){return"segment ids are not increasing"}function wte(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}function xte(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}function Ste(e,t){var n=!1,r;for(e<=Fy?(r=e,n=!0):r=cm(e,Math.floor(Math.sqrt(e)));!n;)r>t||r===e?n=!0:r=cm(e,r+1);return r}function kte(e,t,n){for(var r=[],a=e.length,i=0;i<a;i++)i!==t?r.push(e[i]):r.push(n);return r}function Nte(e,t,n,r){var a=t.shape.length,i=e.shape.length;if(r!==0&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>i)throw new Error("batchDims (".concat(r,`) must be less than rank(x) (
    `).concat(i,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(var o=0;o<r;++o)if(e.shape[o]!==t.shape[o])throw new Error("x.shape[".concat(o,"]: ").concat(e.shape[o]," should be equal to indices.shape[").concat(o,"]: ").concat(t.shape[o],"."));for(var s=e.shape[n],u=[],l=1,c=1,p=1,o=0;o<r;++o)u.push(e.shape[o]),l*=e.shape[o];for(var o=r;o<n;o++)u.push(e.shape[o]),c*=e.shape[o];for(var o=r;o<a;o++)u.push(t.shape[o]);for(var o=n+1;o<i;o++)u.push(e.shape[o]),p*=e.shape[o];return{batchSize:l,sliceSize:p,outerSize:c,dimSize:s,outputShape:u}}var Tte={__proto__:null,collectGatherOpShapeInfo:Nte,computeOutShape:kte,segOpComputeOptimalWindowSize:Ste};function Ete(e){try{return e.map(function(t){return fm(t)})}catch(t){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(t))}}function Ite(e){return e.map(function(t){return Nf(t)})}var Cte={__proto__:null,ERF_A1:Uee,ERF_A2:Gee,ERF_A3:qee,ERF_A4:Hee,ERF_A5:jee,ERF_P:Wee,PARALLELIZE_THRESHOLD:Fy,get RowPartitionType(){return Zo},SELU_SCALE:Vee,SELU_SCALEALPHA:$ee,applyActivation:Mm,assertAndGetBroadcastShape:br,assertAxesAreInnerMostDims:kj,assertParamsConsistent:Iee,assignToTypedArray:Qee,axesAreInnerMostDims:ly,calculateShapes:uN,checkEinsumDimSizes:ite,checkPadOnDimRoundingMode:$i,combineLocations:Ck,combineRaggedTensorToTensorShapes:Dee,complexWithEvenIndex:Yee,complexWithOddIndex:Jee,computeConv2DInfo:Ef,computeConv3DInfo:bk,computeDefaultPad:oy,computeDilation2DInfo:Uq,computeOptimalWindowSize:Ree,computeOutAndReduceShapes:Sj,computeOutShape:Cee,computePool2DInfo:yk,computePool3DInfo:Gq,convertConv2DDataFormat:wk,decodeEinsumEquation:rte,eitherStridesOrDilationsAreOne:Ps,expandShapeToKeepDim:Cf,exponent:tte,exponents:ete,fromStringArrayToUint8:Ite,fromUint8ToStringArray:Ete,getAxesPermutation:Nj,getBroadcastDims:Tk,getComplexWithIndex:Zee,getEinsumComputePath:ote,getEinsumPermutation:ate,getFusedBiasGradient:Om,getFusedDyActivation:Rm,getImageCenter:Oee,getInnerMostAxes:Ej,getPermuted:Pee,getRaggedRank:Aee,getReductionAxes:uy,getReshaped:Mee,getReshapedPermuted:Bee,getRowPartitionTypesHelper:_ee,getSliceBeginCoords:Lee,getSliceSize:zee,getSparseFillEmptyRowsIndicesDenseShapeMismatch:cte,getSparseFillEmptyRowsNegativeIndexErrorMessage:pte,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:dte,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:mte,getSparseReshapeInputOutputMismatchErrorMessage:gte,getSparseReshapeInputOutputMultipleErrorMessage:vte,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:fte,getSparseReshapeNegativeOutputDimErrorMessage:hte,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:xte,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:yte,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:bte,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:wte,getUndoAxesPermutation:Tj,isIdentityPermutation:ste,log:_U,mergeRealAndImagArrays:Kee,prepareAndValidate:IN,prepareSplitSize:lte,segment_util:Tte,shouldFuse:Pm,slice_util:PN,splitRealAndImagArrays:Xee,stridesOrDilationsArePositive:wl,tupleValuesAreOne:hf,upcastType:Nm,validateDefaultValueShape:Fee,validateInput:Fm,validateUpdateShape:wy,warn:hu};var Dte={__proto__:null,nonMaxSuppressionV3Impl:hN,nonMaxSuppressionV4Impl:mN,nonMaxSuppressionV5Impl:vN,whereImpl:lN};OQ();_.Abs=j9;_.Acos=K9;_.Acosh=X9;_.AdadeltaOptimizer=Ny;_.AdagradOptimizer=Ty;_.AdamOptimizer=Ey;_.AdamaxOptimizer=Iy;_.Add=Xg;_.AddN=Y9;_.All=J9;_.Any=Z9;_.ArgMax=Q9;_.ArgMin=e7;_.Asin=t7;_.Asinh=n7;_.Atan=r7;_.Atan2=i7;_.Atanh=a7;_.AvgPool=o7;_.AvgPool3D=s7;_.AvgPool3DGrad=dU;_.AvgPoolGrad=pU;_.BatchMatMul=u7;_.BatchToSpaceND=l7;_.Bincount=c7;_.BitwiseAnd=p7;_.BroadcastArgs=d7;_.BroadcastTo=fU;_.Cast=Yg;_.Ceil=f7;_.ClipByValue=h7;_.Complex=m7;_.ComplexAbs=v7;_.Concat=g7;_.Conv2D=y7;_.Conv2DBackpropFilter=b7;_.Conv2DBackpropInput=w7;_.Conv3D=x7;_.Conv3DBackpropFilterV2=hU;_.Conv3DBackpropInputV2=S7;_.Cos=k7;_.Cosh=N7;_.CropAndResize=I7;_.Cumprod=T7;_.Cumsum=E7;_.DataStorage=UW;_.DenseBincount=C7;_.DepthToSpace=D7;_.DepthwiseConv2dNative=_7;_.DepthwiseConv2dNativeBackpropFilter=A7;_.DepthwiseConv2dNativeBackpropInput=F7;_.Diag=R7;_.Dilation2D=O7;_.Dilation2DBackpropFilter=vU;_.Dilation2DBackpropInput=mU;_.Draw=Jg;_.Einsum=P7;_.Elu=B7;_.EluGrad=gU;_.Environment=q9;_.Equal=z7;_.Erf=L7;_.Exp=$7;_.ExpandDims=V7;_.Expm1=W7;_.FFT=U7;_.Fill=G7;_.FlipLeftRight=q7;_.Floor=H7;_.FloorDiv=j7;_.FromPixels=xg;_.FusedBatchNorm=K7;_.FusedConv2D=kg;_.FusedDepthwiseConv2D=Ng;_.GatherNd=Y7;_.GatherV2=X7;_.Greater=J7;_.GreaterEqual=Z7;_.IFFT=Q7;_.Identity=Zg;_.Imag=ex;_.IsFinite=tx;_.IsInf=nx;_.IsNan=rx;_.KernelBackend=O9;_.LRN=fx;_.LRNGrad=xU;_.LeakyRelu=ax;_.Less=ix;_.LessEqual=ox;_.LinSpace=sx;_.Log=ux;_.Log1p=lx;_.LogSoftmax=bU;_.LogicalAnd=cx;_.LogicalNot=px;_.LogicalOr=dx;_.LogicalXor=yU;_.LowerBound=wU;_.MatrixBandPart=SU;_.Max=hx;_.MaxPool=vx;_.MaxPool3D=gx;_.MaxPool3DGrad=NU;_.MaxPoolGrad=kU;_.MaxPoolWithArgmax=yx;_.Maximum=mx;_.Mean=bx;_.Min=wx;_.Minimum=xx;_.MirrorPad=Sx;_.Mod=kx;_.MomentumOptimizer=Cy;_.Multinomial=Nx;_.Multiply=Tx;_.Neg=Ex;_.NonMaxSuppressionV3=Cx;_.NonMaxSuppressionV4=Dx;_.NonMaxSuppressionV5=_x;_.NotEqual=Ix;_.OP_SCOPE_SUFFIX=tk;_.OneHot=Fx;_.OnesLike=Ax;_.Optimizer=Tu;_.OptimizerConstructors=BN;_.Pack=Rx;_.PadV2=Ox;_.Pool=TU;_.Pow=Mx;_.Prelu=Px;_.Prod=Bx;_.RMSPropOptimizer=Dy;_.RaggedGather=Lx;_.RaggedRange=zx;_.RaggedTensorToTensor=$x;_.Range=Vx;_.Real=Wx;_.RealDiv=M7;_.Reciprocal=Ux;_.Relu=Gx;_.Relu6=Kx;_.Reshape=qx;_.ResizeBilinear=jx;_.ResizeBilinearGrad=IU;_.ResizeNearestNeighbor=Hx;_.ResizeNearestNeighborGrad=EU;_.Reverse=Xx;_.RotateWithOffset=MS;_.Round=Yx;_.Rsqrt=Jx;_.SGDOptimizer=Bm;_.ScatterNd=Zx;_.SearchSorted=eS;_.Select=tS;_.Selu=nS;_.Sigmoid=sS;_.Sign=oS;_.Sin=aS;_.Sinh=iS;_.Slice=rS;_.Softmax=fS;_.Softplus=uS;_.SpaceToBatchND=pS;_.SparseFillEmptyRows=hS;_.SparseReshape=mS;_.SparseSegmentMean=vS;_.SparseSegmentSum=gS;_.SparseToDense=yS;_.SplitV=dS;_.Sqrt=lS;_.Square=CU;_.SquaredDifference=bS;_.StaticRegexReplace=wS;_.Step=OS;_.StridedSlice=xS;_.StringNGrams=SS;_.StringSplit=kS;_.StringToHashBucketFast=NS;_.Sub=TS;_.Sum=cS;_.Tan=ES;_.Tanh=IS;_.Tensor=gr;_.TensorBuffer=hm;_.TensorScatterUpdate=Qx;_.Tile=Qg;_.TopK=CS;_.Transform=DS;_.Transpose=am;_.Unique=_S;_.Unpack=AS;_.UnsortedSegmentSum=FS;_.UpperBound=DU;_.Variable=cf;_.ZerosLike=RS;_._FusedMatMul=Sg;_.abs=pi;_.acos=wq;_.acosh=Sq;_.add=Tt;_.addN=Nq;_.all=Eq;_.any=Cq;_.argMax=_q;_.argMin=Fq;_.asin=Oq;_.asinh=Pq;_.atan=Lq;_.atan2=$q;_.atanh=Wq;_.avgPool=xk;_.avgPool3d=Zq;_.backend=ak;_.backend_util=Cte;_.basicLSTMCell=iH;_.batchNorm=Tm;_.batchNorm2d=cH;_.batchNorm3d=dH;_.batchNorm4d=hH;_.batchToSpaceND=Sk;_.bincount=kk;_.bitwiseAnd=gH;_.booleanMaskAsync=yJ;_.broadcastArgs=bH;_.broadcastTo=sm;_.broadcast_util=uj;_.browser=pee;_.buffer=As;_.cast=bn;_.ceil=SH;_.clipByValue=NH;_.clone=vl;_.complex=xu;_.concat=za;_.concat1d=EH;_.concat2d=CH;_.concat3d=_H;_.concat4d=FH;_.conv1d=MH;_.conv2d=Em;_.conv2dTranspose=LH;_.conv3d=$H;_.conv3dTranspose=GH;_.copyRegisteredKernels=OU;_.cos=HH;_.cosh=KH;_.cosineWindow=Sy;_.cumprod=YH;_.cumsum=ZH;_.customGrad=ts;_.denseBincount=ej;_.deprecationWarn=yG;_.depthToSpace=nj;_.depthwiseConv2d=sy;_.device_util=dG;_.diag=ij;_.dilation2d=sj;_.disableDeprecationWarnings=gG;_.dispose=xa;_.disposeVariables=bG;_.div=vn;_.divNoNan=fj;_.dot=mj;_.dropout=AJ;_.einsum=jc;_.elu=Ik;_.enableDebugMode=vG;_.enableProdMode=mG;_.enclosingPowerOfTwo=pN;_.engine=wG;_.ensureShape=bj;_.env=Ct;_.equal=Ek;_.erf=xj;_.euclideanNorm=Mj;_.exp=xl;_.expandDims=fu;_.expm1=zj;_.eye=_k;_.fft=gy;_.fill=If;_.findBackend=IG;_.findBackendFactory=CG;_.floor=Ak;_.floorDiv=gk;_.fused=HJ;_.gather=Fk;_.gatherND=CJ;_.gather_util=dee;_.getBackend=rk;_.getGradient=Tg;_.getKernel=uf;_.getKernelsForBackend=pm;_.grad=sK;_.grads=uK;_.greater=Cm;_.greaterEqual=Rk;_.ifft=ym;_.imag=Dm;_.image=TQ;_.inTopKAsync=RJ;_.io=ZQ;_.irfft=aN;_.isFinite=Kj;_.isInf=Yj;_.isNaN=Zj;_.keep=nk;_.kernel_impls=Dte;_.leakyRelu=Ok;_.less=$g;_.lessEqual=cy;_.linalg=EQ;_.linspace=nK;_.localResponseNormalization=aK;_.log=vf;_.log1p=Mk;_.logSigmoid=hK;_.logSoftmax=gK;_.logSumExp=Lk;_.logicalAnd=mm;_.logicalNot=zk;_.logicalOr=$k;_.logicalXor=kK;_.losses=IQ;_.lowerBound=TK;_.matMul=Xt;_.math=tee;_.max=ep;_.maxPool=Vk;_.maxPool3d=CK;_.maxPoolWithArgmax=_K;_.maximum=Wk;_.mean=vm;_.memory=xG;_.meshgrid=RK;_.min=zg;_.minimum=gm;_.mirrorPad=PK;_.mod=LK;_.moments=$K;_.movingAverage=xJ;_.mul=je;_.multiRNNCell=WK;_.multinomial=GK;_.neg=Qo;_.nextFrame=Eee;_.norm=Im;_.notEqual=Uk;_.oneHot=Vg;_.ones=ml;_.onesLike=KK;_.op=H;_.outerProduct=YK;_.pad=Df;_.pad1d=QK;_.pad2d=tX;_.pad3d=rX;_.pad4d=iX;_.pool=cX;_.pow=mf;_.prelu=qk;_.print=vk;_.prod=fX;_.profile=SG;_.raggedGather=mX;_.raggedRange=gX;_.raggedTensorToTensor=bX;_.rand=xX;_.randomGamma=KX;_.randomNormal=tN;_.randomStandardNormal=JX;_.randomUniform=vy;_.randomUniformInt=eY;_.range=gf;_.ready=TG;_.real=yf;_.reciprocal=rY;_.registerBackend=DG;_.registerGradient=AU;_.registerKernel=PS;_.relu=Am;_.relu6=nN;_.removeBackend=EG;_.reshape=be;_.reverse=Sl;_.reverse1d=uY;_.reverse2d=cY;_.reverse3d=dY;_.reverse4d=hY;_.rfft=yy;_.round=rN;_.rsqrt=gY;_.scalar=rn;_.scatterND=kJ;_.scatter_util=nJ;_.searchSorted=py;_.selu=bY;_.separableConv2d=xY;_.serialization=FQ;_.setBackend=NG;_.setPlatform=_G;_.setdiff1dAsync=kY;_.sigmoid=Qc;_.sign=TY;_.signal=NQ;_.sin=IY;_.sinh=DY;_.slice=Rn;_.slice1d=AY;_.slice2d=RY;_.slice3d=MY;_.slice4d=BY;_.slice_util=PN;_.softmax=zY;_.softplus=Bk;_.spaceToBatchND=Gk;_.sparse=CQ;_.sparseToDense=EJ;_.spectral=kQ;_.split=bf;_.sqrt=Fs;_.square=yo;_.squaredDifference=iN;_.squeeze=by;_.stack=wf;_.step=oN;_.stridedSlice=YY;_.string=DQ;_.sub=Ot;_.sum=mn;_.sumOutType=rG;_.tan=ZY;_.tanh=Lg;_.tensor=Yc;_.tensor1d=zi;_.tensor2d=af;_.tensor3d=sN;_.tensor4d=QY;_.tensor5d=eJ;_.tensor6d=tJ;_.tensorScatterUpdate=aJ;_.tensor_util=oG;_.test_util=GX;_.tidy=yr;_.tile=rf;_.time=kG;_.topk=oJ;_.train=Nee;_.transpose=bm;_.truncatedNormal=uJ;_.unique=cJ;_.unregisterGradient=RU;_.unregisterKernel=FU;_.unsortedSegmentSum=dJ;_.unstack=xy;_.upcastType=Nm;_.upperBound=hJ;_.util=HU;_.valueAndGrad=lK;_.valueAndGrads=cK;_.variable=mJ;_.variableGrads=Pk;_.version_core=kee;_.where=yu;_.whereAsync=cN;_.zeros=ap;_.zerosLike=di});var KN=An((XXe,jN)=>{jN.exports=wn;var Vi=null;try{Vi=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function wn(e,t,n){this.low=e|0,this.high=t|0,this.unsigned=!!n}wn.prototype.__isLong__;Object.defineProperty(wn.prototype,"__isLong__",{value:!0});function Ua(e){return(e&&e.__isLong__)===!0}wn.isLong=Ua;var LN={},zN={};function Dl(e,t){var n,r,a;return t?(e>>>=0,(a=0<=e&&e<256)&&(r=zN[e],r)?r:(n=xn(e,(e|0)<0?-1:0,!0),a&&(zN[e]=n),n)):(e|=0,(a=-128<=e&&e<128)&&(r=LN[e],r)?r:(n=xn(e,e<0?-1:0,!1),a&&(LN[e]=n),n))}wn.fromInt=Dl;function Wi(e,t){if(isNaN(e))return t?Cl:Ui;if(t){if(e<0)return Cl;if(e>=UN)return HN}else{if(e<=-VN)return Wa;if(e+1>=VN)return qN}return e<0?Wi(-e,t).neg():xn(e%up|0,e/up|0,t)}wn.fromNumber=Wi;function xn(e,t,n){return new wn(e,t,n)}wn.fromBits=xn;var Lm=Math.pow;function Oy(e,t,n){if(e.length===0)throw Error("empty string");if(e==="NaN"||e==="Infinity"||e==="+Infinity"||e==="-Infinity")return Ui;if(typeof t=="number"?(n=t,t=!1):t=!!t,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return Oy(e.substring(1),t,n).neg();for(var a=Wi(Lm(n,8)),i=Ui,o=0;o<e.length;o+=8){var s=Math.min(8,e.length-o),u=parseInt(e.substring(o,o+s),n);if(s<8){var l=Wi(Lm(n,s));i=i.mul(l).add(Wi(u))}else i=i.mul(a),i=i.add(Wi(u))}return i.unsigned=t,i}wn.fromString=Oy;function wo(e,t){return typeof e=="number"?Wi(e,t):typeof e=="string"?Oy(e,t):xn(e.low,e.high,typeof t=="boolean"?t:e.unsigned)}wn.fromValue=wo;var $N=65536,_te=1<<24,up=$N*$N,UN=up*up,VN=UN/2,WN=Dl(_te),Ui=Dl(0);wn.ZERO=Ui;var Cl=Dl(0,!0);wn.UZERO=Cl;var sp=Dl(1);wn.ONE=sp;var GN=Dl(1,!0);wn.UONE=GN;var Ry=Dl(-1);wn.NEG_ONE=Ry;var qN=xn(-1,2147483647,!1);wn.MAX_VALUE=qN;var HN=xn(-1,-1,!0);wn.MAX_UNSIGNED_VALUE=HN;var Wa=xn(0,-2147483648,!1);wn.MIN_VALUE=Wa;var We=wn.prototype;We.toInt=function(){return this.unsigned?this.low>>>0:this.low};We.toNumber=function(){return this.unsigned?(this.high>>>0)*up+(this.low>>>0):this.high*up+(this.low>>>0)};We.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Wa)){var n=Wi(t),r=this.div(n),a=r.mul(n).sub(this);return r.toString(t)+a.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var i=Wi(Lm(t,6),this.unsigned),o=this,s="";;){var u=o.div(i),l=o.sub(u.mul(i)).toInt()>>>0,c=l.toString(t);if(o=u,o.isZero())return c+s;for(;c.length<6;)c="0"+c;s=""+c+s}};We.getHighBits=function(){return this.high};We.getHighBitsUnsigned=function(){return this.high>>>0};We.getLowBits=function(){return this.low};We.getLowBitsUnsigned=function(){return this.low>>>0};We.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Wa)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,n=31;n>0&&!(t&1<<n);n--);return this.high!=0?n+33:n+1};We.isZero=function(){return this.high===0&&this.low===0};We.eqz=We.isZero;We.isNegative=function(){return!this.unsigned&&this.high<0};We.isPositive=function(){return this.unsigned||this.high>=0};We.isOdd=function(){return(this.low&1)===1};We.isEven=function(){return(this.low&1)===0};We.equals=function(t){return Ua(t)||(t=wo(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low};We.eq=We.equals;We.notEquals=function(t){return!this.eq(t)};We.neq=We.notEquals;We.ne=We.notEquals;We.lessThan=function(t){return this.comp(t)<0};We.lt=We.lessThan;We.lessThanOrEqual=function(t){return this.comp(t)<=0};We.lte=We.lessThanOrEqual;We.le=We.lessThanOrEqual;We.greaterThan=function(t){return this.comp(t)>0};We.gt=We.greaterThan;We.greaterThanOrEqual=function(t){return this.comp(t)>=0};We.gte=We.greaterThanOrEqual;We.ge=We.greaterThanOrEqual;We.compare=function(t){if(Ua(t)||(t=wo(t)),this.eq(t))return 0;var n=this.isNegative(),r=t.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1};We.comp=We.compare;We.negate=function(){return!this.unsigned&&this.eq(Wa)?Wa:this.not().add(sp)};We.neg=We.negate;We.add=function(t){Ua(t)||(t=wo(t));var n=this.high>>>16,r=this.high&65535,a=this.low>>>16,i=this.low&65535,o=t.high>>>16,s=t.high&65535,u=t.low>>>16,l=t.low&65535,c=0,p=0,d=0,f=0;return f+=i+l,d+=f>>>16,f&=65535,d+=a+u,p+=d>>>16,d&=65535,p+=r+s,c+=p>>>16,p&=65535,c+=n+o,c&=65535,xn(d<<16|f,c<<16|p,this.unsigned)};We.subtract=function(t){return Ua(t)||(t=wo(t)),this.add(t.neg())};We.sub=We.subtract;We.multiply=function(t){if(this.isZero())return Ui;if(Ua(t)||(t=wo(t)),Vi){var n=Vi.mul(this.low,this.high,t.low,t.high);return xn(n,Vi.get_high(),this.unsigned)}if(t.isZero())return Ui;if(this.eq(Wa))return t.isOdd()?Wa:Ui;if(t.eq(Wa))return this.isOdd()?Wa:Ui;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(WN)&&t.lt(WN))return Wi(this.toNumber()*t.toNumber(),this.unsigned);var r=this.high>>>16,a=this.high&65535,i=this.low>>>16,o=this.low&65535,s=t.high>>>16,u=t.high&65535,l=t.low>>>16,c=t.low&65535,p=0,d=0,f=0,h=0;return h+=o*c,f+=h>>>16,h&=65535,f+=i*c,d+=f>>>16,f&=65535,f+=o*l,d+=f>>>16,f&=65535,d+=a*c,p+=d>>>16,d&=65535,d+=i*l,p+=d>>>16,d&=65535,d+=o*u,p+=d>>>16,d&=65535,p+=r*c+a*l+i*u+o*s,p&=65535,xn(f<<16|h,p<<16|d,this.unsigned)};We.mul=We.multiply;We.divide=function(t){if(Ua(t)||(t=wo(t)),t.isZero())throw Error("division by zero");if(Vi){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var n=(this.unsigned?Vi.div_u:Vi.div_s)(this.low,this.high,t.low,t.high);return xn(n,Vi.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Cl:Ui;var r,a,i;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return Cl;if(t.gt(this.shru(1)))return GN;i=Cl}else{if(this.eq(Wa)){if(t.eq(sp)||t.eq(Ry))return Wa;if(t.eq(Wa))return sp;var o=this.shr(1);return r=o.div(t).shl(1),r.eq(Ui)?t.isNegative()?sp:Ry:(a=this.sub(t.mul(r)),i=r.add(a.div(t)),i)}else if(t.eq(Wa))return this.unsigned?Cl:Ui;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();i=Ui}for(a=this;a.gte(t);){r=Math.max(1,Math.floor(a.toNumber()/t.toNumber()));for(var s=Math.ceil(Math.log(r)/Math.LN2),u=s<=48?1:Lm(2,s-48),l=Wi(r),c=l.mul(t);c.isNegative()||c.gt(a);)r-=u,l=Wi(r,this.unsigned),c=l.mul(t);l.isZero()&&(l=sp),i=i.add(l),a=a.sub(c)}return i};We.div=We.divide;We.modulo=function(t){if(Ua(t)||(t=wo(t)),Vi){var n=(this.unsigned?Vi.rem_u:Vi.rem_s)(this.low,this.high,t.low,t.high);return xn(n,Vi.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))};We.mod=We.modulo;We.rem=We.modulo;We.not=function(){return xn(~this.low,~this.high,this.unsigned)};We.and=function(t){return Ua(t)||(t=wo(t)),xn(this.low&t.low,this.high&t.high,this.unsigned)};We.or=function(t){return Ua(t)||(t=wo(t)),xn(this.low|t.low,this.high|t.high,this.unsigned)};We.xor=function(t){return Ua(t)||(t=wo(t)),xn(this.low^t.low,this.high^t.high,this.unsigned)};We.shiftLeft=function(t){return Ua(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?xn(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):xn(0,this.low<<t-32,this.unsigned)};We.shl=We.shiftLeft;We.shiftRight=function(t){return Ua(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?xn(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):xn(this.high>>t-32,this.high>=0?0:-1,this.unsigned)};We.shr=We.shiftRight;We.shiftRightUnsigned=function(t){if(Ua(t)&&(t=t.toInt()),t&=63,t===0)return this;var n=this.high;if(t<32){var r=this.low;return xn(r>>>t|n<<32-t,n>>>t,this.unsigned)}else return t===32?xn(n,0,this.unsigned):xn(n>>>t-32,0,this.unsigned)};We.shru=We.shiftRightUnsigned;We.shr_u=We.shiftRightUnsigned;We.toSigned=function(){return this.unsigned?xn(this.low,this.high,!1):this};We.toUnsigned=function(){return this.unsigned?this:xn(this.low,this.high,!0)};We.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()};We.toBytesLE=function(){var t=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]};We.toBytesBE=function(){var t=this.high,n=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};wn.fromBytes=function(t,n,r){return r?wn.fromBytesLE(t,n):wn.fromBytesBE(t,n)};wn.fromBytesLE=function(t,n){return new wn(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,n)};wn.fromBytesBE=function(t,n){return new wn(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],n)}});var $C=An(Bn=>{"use strict";var F=Il();function Ate(e){var t=Object.create(null);return e&&Object.keys(e).forEach(function(n){if(n!=="default"){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}}),t.default=e,t}function Fte(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in e)){var a=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,a.get?a:{enumerable:!0,get:function(){return n[r]}})}})}),e}var D=Ate(F),Hy=function(e,t){return Hy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},Hy(e,t)};function ue(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Hy(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function Oe(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function s(c){try{l(r.next(c))}catch(p){o(p)}}function u(c){try{l(r.throw(c))}catch(p){o(p)}}function l(c){c.done?i(c.value):a(c.value).then(s,u)}l((r=r.apply(e,t||[])).next())})}function Fe(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,a,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,a&&(i=l[0]&2?a.return:l[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,l[1])).done)return i;switch(a=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,a=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],a=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function fe(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function re(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function ft(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var Cu=function(e){ue(t,e);function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return t}(Error),as=function(e){ue(t,e);function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return t}(Error),J=function(e){ue(t,e);function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return t}(Error),_t=function(e){ue(t,e);function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return t}(Error),Rte=function(e){ue(t,e);function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return t}(Error);(function(e){ue(t,e);function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return t})(Error);var JT=function(){function e(t){this.maxEntries=t||100,this.cache=new Map}return e.prototype.get=function(t){var n;return this.cache.has(t)&&(n=this.cache.get(t),this.cache.delete(t),this.cache.set(t,n)),n},e.prototype.put=function(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxEntries){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(t,n)},e.prototype.getMaxEntries=function(){return this.maxEntries},e.prototype.setMaxEntries=function(t){if(t<0)throw new Error("The maxEntries of LRU caches must be at least 0, but got ".concat(t,"."));if(this.maxEntries>t)for(var n=0;n<this.maxEntries-t;n++){var r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=t},e}();function Ol(e,t){if(Array.isArray(e)){for(var n=[],r=0;r<t;r++)n=n.concat(e);return n}else{var n=new Array(t);return n.fill(e),n}}function ns(e,t){if(!e)throw new Rte(t)}function XN(e,t){var n,r,a=0;try{for(var i=fe(e),o=i.next();!o.done;o=i.next()){var s=o.value;s===t&&a++}}catch(u){n={error:u}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return a}function ka(e){return e.length===1?e[0]:e}function Yt(e){return Array.isArray(e)?e:[e]}function Ls(e){var t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2"),n=t.replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function _l(e){return e.length<=1||e.indexOf("_")===-1?e:e.replace(/[_]+(\w|$)/g,function(t,n){return n.toUpperCase()})}var Gi={};function c3(e){if(e==null)return null;var t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function jy(e){var t,n;if(!(e==null||typeof e!="object"))if(Array.isArray(e))e.forEach(function(u){return jy(u)});else{var r=Object.keys(e);try{for(var a=fe(r),i=a.next();!i.done;i=a.next()){var o=i.value,s=e[o];s!=null&&typeof s=="object"&&(!Array.isArray(s)&&s.type==="ndarray"&&typeof s.value=="number"?e[o]=s.value:jy(s))}}catch(u){t={error:u}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}}}function jf(e,t,n,r,a){var i,o,s,u,l,c,p,d,f,h,m;if(t===void 0&&(t={}),n===void 0&&(n={}),r===void 0&&(r="object"),a===void 0&&(a=!1),typeof e=="string"){var v=e,g=void 0;if(v in n)g=n[v];else if(v in Gi)g=Gi[v];else if(g=t[v],g==null)throw new J("Unknown ".concat(r,": ").concat(e,". ")+`This may be due to one of the following reasons:
`+"1. The ".concat(r," is defined in Python, in which ")+`case it needs to be ported to TensorFlow.js or your JavaScript code.
`+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");return g}else{var y=e;if(y.className==null||y.config==null)throw new J("".concat(r,": Improper config format: ")+"".concat(JSON.stringify(y),`.
`)+"'className' and 'config' must set.");var w=y.className,b=void 0,x=void 0;if(w in n?(i=re(n[w],2),b=i[0],x=i[1]):w in Gi?(o=re(Gi.className,2),b=o[0],x=o[1]):w in t&&(s=re(t[w],2),b=s[0],x=s[1]),b==null)throw new J("Unknown ".concat(r,": ").concat(w,". ")+`This may be due to one of the following reasons:
`+"1. The ".concat(r," is defined in Python, in which ")+`case it needs to be ported to TensorFlow.js or your JavaScript code.
`+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");if(x!=null){var k={};try{for(var N=fe(Object.keys(Gi)),E=N.next();!E.done;E=N.next()){var C=E.value;k[C]=Gi[C]}}catch(Q){u={error:Q}}finally{try{E&&!E.done&&(l=N.return)&&l.call(N)}finally{if(u)throw u.error}}try{for(var R=fe(Object.keys(n)),A=R.next();!A.done;A=R.next()){var C=A.value;k[C]=n[C]}}catch(Q){c={error:Q}}finally{try{A&&!A.done&&(p=R.return)&&p.call(R)}finally{if(c)throw c.error}}var M=y.config;M.customObjects=k;var $=Object.assign({},Gi);try{for(var z=fe(Object.keys(n)),L=z.next();!L.done;L=z.next()){var C=L.value;Gi[C]=n[C]}}catch(Q){d={error:Q}}finally{try{L&&!L.done&&(f=z.return)&&f.call(z)}finally{if(d)throw d.error}}jy(y.config);var B=x(b,y.config,n,a);return Gi=Object.assign({},$),B}else{var $=Object.assign({},Gi);try{for(var W=fe(Object.keys(n)),Y=W.next();!Y.done;Y=W.next()){var C=Y.value;Gi[C]=n[C]}}catch(X){h={error:X}}finally{try{Y&&!Y.done&&(m=W.return)&&m.call(W)}finally{if(h)throw h.error}}var B=new b(y.config);return Gi=Object.assign({},$),B}}}function Ote(e,t){return e<t?-1:e>t?1:0}function zm(e,t){return-1*Ote(e,t)}function Du(e){var t,n;if(e==null)return e;var r=[];try{for(var a=fe(e),i=a.next();!i.done;i=a.next()){var o=i.value;r.indexOf(o)===-1&&r.push(o)}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return r}function Mte(e){if(e==null)throw new J("Invalid value in obj: ".concat(JSON.stringify(e)));for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function Pl(e,t,n){if(n!=null&&e.indexOf(n)<0)throw new J("".concat(n," is not a valid ").concat(t,".  Valid values are ").concat(e," or null/undefined."))}function p3(e,t,n,r){return n===void 0&&(n=0),r===void 0&&(r=1/0),ns(n>=0),ns(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every(function(a){return typeof a===t})}function Ar(e,t){Array.isArray(e)?(F.util.assert(e.length>0,function(){return"".concat(t," is unexpectedly an empty array.")}),e.forEach(function(n,r){return Ar(n,"element ".concat(r+1," of ").concat(t))})):F.util.assert(Number.isInteger(e)&&e>0,function(){return"Expected ".concat(t," to be a positive integer, but got ")+"".concat(ZT(e),".")})}function ZT(e){return e===null?"null":Array.isArray(e)?"["+e.map(function(t){return ZT(t)}).join(",")+"]":typeof e=="string"?'"'.concat(e,'"'):"".concat(e)}function Pte(e,t,n){var r=n!=null?n():F.util.now(),a,i=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var u=n!=null?n():F.util.now();return u-r<t||(r=u,a=e.apply(void 0,ft([],re(o),!1))),a};return i}function QT(e){return e==="relu"?"relu":e==="linear"?"linear":e==="elu"?"elu":null}var Bte=0;function eE(){return Bte++}var $m={};function dv(e){return e===void 0&&(e=""),e in $m||($m[e]=0),$m[e]+=1,e+$m[e].toString()}var Lte=["channelsFirst","channelsLast"],zte=["nearest","bilinear"],$te=["valid","same","causal"],Vte=["max","avg"],Wte=["sum","mul","concat","ave"];var lp=new Map;function lr(e){Pl(Lte,"DataFormat",e)}function Ute(e){Pl(zte,"InterpolationFormat",e)}function mi(e){Pl($te,"PaddingMode",e)}function tE(e){Pl(Vte,"PoolMode",e)}var Vf=[],YN="/";function Fl(e,t){Vf.push(e);try{var n=t();return Vf.pop(),n}catch(r){throw Vf.pop(),r}}function Gte(){return Vf.length===0?"":Vf.join(YN)+YN}function nE(e){if(!aE(e))throw new Error("Not a valid tensor name: '"+e+"'");return Gte()+e}function rE(e){if(!aE(e))throw new Error("Not a valid tensor name: '"+e+"'");lp.has(e)||lp.set(e,0);var t=lp.get(e);if(lp.set(e,lp.get(e)+1),t>0){var n="".concat(e,"_").concat(t);return lp.set(n,1),n}else return e}var qte=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function aE(e){return!!e.match(qte)}function Hte(e){return e===parseInt(e.toString(),10)}function _u(e,t,n){t==null&&(t=0),n==null&&(n=e.length);for(var r=1,a=t;a<n;++a)r*=e[a];return r}function vp(e){if(e.length===0)return Number.NaN;for(var t=Number.POSITIVE_INFINITY,n=0;n<e.length;n++){var r=e[n];r<t&&(t=r)}return t}function Au(e){if(e.length===0)return Number.NaN;for(var t=Number.NEGATIVE_INFINITY,n=0;n<e.length;n++){var r=e[n];r>t&&(t=r)}return t}function Eo(e,t){if(t<e)throw new J("end (".concat(t,") < begin (").concat(e,") is forbidden."));for(var n=[],r=e;r<t;++r)n.push(r);return n}var My;function Sr(){return My==null&&(My=F.backend().epsilon()),My}function Io(){return"channelsLast"}function is(e,t){return D.cast(e,t)}function Kf(e,t){t===void 0&&(t=-1);var n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),D.reshape(e,n)}function jte(e,t){return F.tidy(function(){if(e.shape.length!==2)throw new J("repeat() expects a rank-2 tensor, but received a "+"rank-".concat(e.shape.length," tensor."));var n=Kf(e,1);return Ky(n,[1,t,1])})}function Kte(e){var t=[_u(e.shape)];return D.reshape(e,t)}function Xte(e){if(e.rank<=1)throw new J("batchFlatten requires a minimum rank of 2. Got rank: ".concat(e.rank,"."));var t=[e.shape[0],_u(e.shape,1)];return D.reshape(e,t)}function Rl(e,t,n){return F.tidy(function(){switch(e.rank){case 1:return D.slice1d(e,t,n);case 2:return D.slice2d(e,[t,0],[n,e.shape[1]]);case 3:return D.slice3d(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return D.slice4d(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return D.slice(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return D.slice(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new J("sliceAlongFirstAxis() received an unsupported tensor rank: "+"".concat(e.rank))}})}function Py(e,t,n){return F.tidy(function(){switch(e.rank){case 1:return D.slice1d(e,t,n);case 2:return D.slice2d(e,[0,t],[e.shape[0],n]);case 3:return D.slice3d(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return D.slice4d(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new J("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}})}function Vm(e,t,n,r){return F.tidy(function(){switch(e.rank){case 1:return D.slice1d(e,t,n);case 2:switch(r){case 1:return Rl(e,t,n);case 2:return Py(e,t,n);default:throw new J("The axis is not within the rank of the tensor "+"".concat(r))}case 3:switch(r){case 1:return Rl(e,t,n);case 2:return D.slice3d(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return Py(e,t,n);default:throw new J("The axis is not within the rank of the tensor "+"".concat(r))}case 4:switch(r){case 1:return Rl(e,t,n);case 2:return D.slice4d(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return D.slice4d(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return Py(e,t,n);default:throw new J("The axis is not within the rank of the tensor "+"".concat(r))}default:throw new J("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}})}function d3(e,t){t===void 0&&(t=-1);var n;return t<0&&(n=e[0].rank,n!==0?t=n:t=0),t===e[0].rank&&(t=-1),D.concat(e,t)}function JN(e,t){switch(e.rank){case 1:return D.concat1d([e,t]);case 2:return D.concat2d([e,t],0);case 3:return D.concat3d([e,t],0);case 4:return D.concat4d([e,t],0);default:throw new J("concatAlongFirstAxis() received an unsupported "+"tensor rank: ".concat(e.rank))}}function Ky(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new J("The length of input n (".concat(t.length,") does not match ")+"the number of dimensions in input x (".concat(e.rank,")"));return D.tile(e,t)}function fv(e,t,n,r,a){return t===void 0&&(t=0),n===void 0&&(n=1),D.randomNormal(e,t,n,r,a)}function os(e,t,n,r){if(e.rank<2||t.rank<2)throw new _t("dot requires both inputs to be rank >= 2"+" but got x shape = ".concat(e.shape," and y shape = ").concat(t.shape));if(t.rank>=3){var a=e.shape.slice(-1)[0],i=t.shape.slice(-2)[0];if(a!==i)throw new _t("If rank y >= 3, then the second last dim"+" of y must equal the last dim of x but got x shape = ".concat(e.shape," and ")+" y shape = ".concat(t.shape))}if(e.rank===2&&t.rank===2){var o=!1,s=!1;return D.fused.matMul({a:e,b:t,transposeA:o,transposeB:s,bias:r?Xy(e.rank,r,Io()):null,activation:n})}else{var u=e.shape.slice(),l=u.pop();e=D.reshape(e,[-1,l]);var c=t.shape.slice(),p=c.pop(),i=c.pop(),d=ft(ft([],re(c),!1),[p],!1),f=Array.from({length:t.rank},function(y,w){return w===0?t.rank-2:w<=t.rank-2?w-1:w});t=D.reshape(D.transpose(t,f),[i,-1]);var h=ft(ft([],re(u),!1),re(d),!1),o=!1,s=!1;return D.reshape(D.fused.matMul({a:e,b:t,transposeA:o,transposeB:s,bias:r?Xy(e.rank,r,Io()):null,activation:n}),h)}}function iE(e,t,n){return F.tidy(function(){return Array.isArray(t)?t=F.tensor1d(t,"int32"):t=D.cast(t,"int32"),D.gather(e,t,n)})}function Xf(e){return D.mul(e,e)}function Xy(e,t,n){var r=t.shape;if(t.rank!==1&&t.rank!==e)throw new J("Unexpected bias dimensions: ".concat(t.rank)+"; expected it to be 1 or ".concat(e));if(e===5){if(n==="channelsFirst")return r.length===1?D.reshape(t,[1,r[0],1,1,1]):D.reshape(t,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?D.reshape(t,[1,1,1,1,r[0]]):D.reshape(t,[1].concat(r))}else if(e===4){if(n==="channelsFirst")return r.length===1?D.reshape(t,[1,r[0],1,1]):D.reshape(t,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?D.reshape(t,[1,1,1,r[0]]):D.reshape(t,[1].concat(r))}else if(e===3){if(n==="channelsFirst")return r.length===1?D.reshape(t,[1,r[0],1]):D.reshape(t,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?D.reshape(t,[1,1,r[0]]):D.reshape(t,[1].concat(r))}else if(e<3)return t;throw new J("Unsupported input rank by biasAdd: ".concat(t.rank))}function _o(e,t,n){return F.tidy(function(){return n==null&&(n=Io()),lr(n),D.add(e,Xy(e.rank,t,n))})}function Yte(e,t){if(t===void 0&&(t=1),t!==1)throw new _t("Support for alpha values other than 1 (".concat(t,") is not implemented ")+"yet.");return D.elu(e)}function Jte(e){return F.tidy(function(){return D.div(e,D.add(D.abs(e),1))})}function oE(e,t,n,r){return F.tidy(function(){return D.dropout(e,t,n,r)})}function Zte(e){return F.tidy(function(){var t=D.add(.5,D.mul(.2,e));return D.clipByValue(t,0,1)})}function Yf(e,t,n){return n===void 0&&(n=!1),n?e():t()}var Qte=["fanIn","fanOut","fanAvg"],ene=["normal","uniform","truncatedNormal"];function tne(e){Pl(Qte,"FanMode",e)}function nne(e){Pl(ene,"Distribution",e)}var Xi=function(e){ue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.fromConfigUsesCustomObjects=function(){return!1},t.prototype.getConfig=function(){return{}},t}(F.serialization.Serializable),f3=function(e){ue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.apply=function(n,r){return F.zeros(n,r)},t}(Xi);f3.className="Zeros";F.serialization.registerClass(f3);var hv=function(e){ue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.apply=function(n,r){return F.ones(n,r)},t}(Xi);hv.className="Ones";F.serialization.registerClass(hv);var h3=function(e){ue(t,e);function t(n){var r=e.call(this)||this;if(typeof n!="object")throw new J("Expected argument of type ConstantConfig but got ".concat(n));if(n.value===void 0)throw new J("config must have value set but got ".concat(n));return r.value=n.value,r}return t.prototype.apply=function(n,r){var a=this;return F.tidy(function(){return F.mul(F.scalar(a.value),F.ones(n,r))})},t.prototype.getConfig=function(){return{value:this.value}},t}(Xi);h3.className="Constant";F.serialization.registerClass(h3);var m3=function(e){ue(t,e);function t(n){var r=e.call(this)||this;return r.DEFAULT_MINVAL=-.05,r.DEFAULT_MAXVAL=.05,r.minval=n.minval||r.DEFAULT_MINVAL,r.maxval=n.maxval||r.DEFAULT_MAXVAL,r.seed=n.seed,r}return t.prototype.apply=function(n,r){return F.randomUniform(n,this.minval,this.maxval,r,this.seed)},t.prototype.getConfig=function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}},t}(Xi);m3.className="RandomUniform";F.serialization.registerClass(m3);var v3=function(e){ue(t,e);function t(n){var r=e.call(this)||this;return r.DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=n.mean||r.DEFAULT_MEAN,r.stddev=n.stddev||r.DEFAULT_STDDEV,r.seed=n.seed,r}return t.prototype.apply=function(n,r){if(r=r||"float32",r!=="float32"&&r!=="int32")throw new _t("randomNormal does not support dType ".concat(r,"."));return fv(n,this.mean,this.stddev,r,this.seed)},t.prototype.getConfig=function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}},t}(Xi);v3.className="RandomNormal";F.serialization.registerClass(v3);var g3=function(e){ue(t,e);function t(n){var r=e.call(this)||this;return r.DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=n.mean||r.DEFAULT_MEAN,r.stddev=n.stddev||r.DEFAULT_STDDEV,r.seed=n.seed,r}return t.prototype.apply=function(n,r){if(r=r||"float32",r!=="float32"&&r!=="int32")throw new _t("truncatedNormal does not support dType ".concat(r,"."));return F.truncatedNormal(n,this.mean,this.stddev,r,this.seed)},t.prototype.getConfig=function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}},t}(Xi);g3.className="TruncatedNormal";F.serialization.registerClass(g3);var y3=function(e){ue(t,e);function t(n){var r=e.call(this)||this;return r.gain=n.gain!=null?n.gain:1,r}return t.prototype.apply=function(n,r){var a=this;return F.tidy(function(){if(n.length!==2||n[0]!==n[1])throw new J("Identity matrix initializer can only be used for 2D square matrices.");return F.mul(a.gain,F.eye(n[0]))})},t.prototype.getConfig=function(){return{gain:this.gain}},t}(Xi);y3.className="Identity";F.serialization.registerClass(y3);function rne(e,t){t===void 0&&(t="channelsLast");var n,r;if(lr(t),e.length===2)n=e[0],r=e[1];else if([3,4,5].indexOf(e.length)!==-1){if(t==="channelsFirst"){var a=_u(e,2);n=e[1]*a,r=e[0]*a}else if(t==="channelsLast"){var a=_u(e,0,e.length-2);n=e[e.length-2]*a,r=e[e.length-1]*a}}else{var i=_u(e);n=Math.sqrt(i),r=Math.sqrt(i)}return[n,r]}var Na=function(e){ue(t,e);function t(n){var r=e.call(this)||this;if(n.scale<0)throw new J("scale must be a positive float. Got: ".concat(n.scale));return r.scale=n.scale==null?1:n.scale,r.mode=n.mode==null?"fanIn":n.mode,tne(r.mode),r.distribution=n.distribution==null?"normal":n.distribution,nne(r.distribution),r.seed=n.seed,r}return t.prototype.apply=function(n,r){var a=rne(n),i=a[0],o=a[1],s=this.scale;if(this.mode==="fanIn"?s/=Math.max(1,i):this.mode==="fanOut"?s/=Math.max(1,o):s/=Math.max(1,(i+o)/2),this.distribution==="normal"){var u=Math.sqrt(s);if(r=r||"float32",r!=="float32"&&r!=="int32")throw new _t("".concat(this.getClassName()," does not support dType ").concat(r,"."));return F.truncatedNormal(n,0,u,r,this.seed)}else{var l=Math.sqrt(3*s);return F.randomUniform(n,-l,l,r,this.seed)}},t.prototype.getConfig=function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}},t}(Xi);Na.className="VarianceScaling";F.serialization.registerClass(Na);var mv=function(e){ue(t,e);function t(n){return e.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:n==null?null:n.seed})||this}return t.prototype.getClassName=function(){return Na.className},t}(Na);mv.className="GlorotUniform";F.serialization.registerClass(mv);var vv=function(e){ue(t,e);function t(n){return e.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:n==null?null:n.seed})||this}return t.prototype.getClassName=function(){return Na.className},t}(Na);vv.className="GlorotNormal";F.serialization.registerClass(vv);var gv=function(e){ue(t,e);function t(n){return e.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:n==null?null:n.seed})||this}return t.prototype.getClassName=function(){return Na.className},t}(Na);gv.className="HeNormal";F.serialization.registerClass(gv);var yv=function(e){ue(t,e);function t(n){return e.call(this,{scale:2,mode:"fanIn",distribution:"uniform",seed:n==null?null:n.seed})||this}return t.prototype.getClassName=function(){return Na.className},t}(Na);yv.className="HeUniform";F.serialization.registerClass(yv);var bv=function(e){ue(t,e);function t(n){return e.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:n==null?null:n.seed})||this}return t.prototype.getClassName=function(){return Na.className},t}(Na);bv.className="LeCunNormal";F.serialization.registerClass(bv);var wv=function(e){ue(t,e);function t(n){return e.call(this,{scale:1,mode:"fanIn",distribution:"uniform",seed:n==null?null:n.seed})||this}return t.prototype.getClassName=function(){return Na.className},t}(Na);wv.className="LeCunUniform";F.serialization.registerClass(wv);var b3=function(e){ue(t,e);function t(n){var r=e.call(this)||this;return r.DEFAULT_GAIN=1,r.ELEMENTS_WARN_SLOW=2e3,r.gain=n.gain==null?r.DEFAULT_GAIN:n.gain,r.seed=n.seed,r}return t.prototype.apply=function(n,r){var a=this;return F.tidy(function(){if(n.length<2)throw new _t("Shape must be at least 2D.");if(r!=="int32"&&r!=="float32"&&r!==void 0)throw new TypeError("Unsupported data type ".concat(r,"."));r=r;var i=F.util.sizeFromShape(n.slice(0,-1)),o=n[n.length-1],s=i*o;s>a.ELEMENTS_WARN_SLOW&&console.warn("Orthogonal initializer is being called on a matrix with more "+"than ".concat(a.ELEMENTS_WARN_SLOW," (").concat(s,") elements: ")+"Slowness may result.");var u=[Math.max(o,i),Math.min(o,i)],l=fv(u,0,1,r,a.seed),c=F.linalg.qr(l,!1),p=c[0],d=c[1],f=d.flatten().stridedSlice([0],[Math.min(o,i)*Math.min(o,i)],[Math.min(o,i)+1]);return p=F.mul(p,f.sign()),i<o&&(p=p.transpose()),F.mul(F.scalar(a.gain),p.reshape(n))})},t.prototype.getConfig=function(){return{gain:this.gain,seed:this.seed}},t}(Xi);b3.className="Orthogonal";F.serialization.registerClass(b3);var ZN={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function QN(e,t){return t===void 0&&(t={}),jf(e,F.serialization.SerializationMap.getMap().classNameMap,t,"initializer")}function qn(e){return c3(e)}function On(e){if(typeof e=="string"){var t=e in ZN?ZN[e]:e;if(t==="GlorotNormal")return new vv;if(t==="GlorotUniform")return new mv;if(t==="HeNormal")return new gv;if(t==="HeUniform")return new yv;if(t==="LeCunNormal")return new bv;if(t==="LeCunUniform")return new wv;var n={};return n.className=t,n.config={},QN(n)}else return e instanceof Xi?e:QN(e)}function Yy(e){return Array.isArray(e)&&Array.isArray(e[0])}function Km(e){return e.length===0?[]:Array.isArray(e[0])?e:[e]}function St(e){var t;if(Array.isArray(e)){if(e.length!==1)throw new J("Expected Tensor length to be 1; got ".concat(e.length));t=e[0]}else t=e;return t}function Ut(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(e.length===1)return e=e,e[0];throw new J("Expected exactly 1 Shape; got ".concat(e.length))}else return e}function Xm(e){var t,n,r=0;try{for(var a=fe(e),i=a.next();!i.done;i=a.next()){var o=i.value;o.shape.length===0?r+=1:r+=o.shape.reduce(function(s,u){return s*u})}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return r}var eT="Variable",sE=function(){function e(t,n,r,a,i){n===void 0&&(n="float32"),r===void 0&&(r=eT),a===void 0&&(a=!0),i===void 0&&(i=null),this.dtype=n??"float32",this.shape=t.shape,this.id=eE(),r=r??eT,this.originalName=nE(r),this.name=rE(this.originalName),this.trainable_=a,this.constraint=i,this.val=D.variable(t,this.trainable_,this.name,this.dtype)}return e.prototype.read=function(){return this.assertNotDisposed(),this.val},e.prototype.write=function(t){return this.assertNotDisposed(),ane(this.val,t),this.val.id!==t.id&&(this.val.assign(t),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this},e.prototype.dispose=function(){this.assertNotDisposed(),this.val.dispose()},e.prototype.assertNotDisposed=function(){if(this.val.isDisposed)throw new Error("LayersVariable ".concat(this.name," is already disposed."))},Object.defineProperty(e.prototype,"trainable",{get:function(){return this.trainable_},set:function(t){this.trainable_=t,this.val.trainable=t},enumerable:!1,configurable:!0}),e}();function ane(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}function Jy(e){return e.map(function(t){return t.read()})}function w3(e){e.forEach(function(t){var n=t[0];n.write(t[1])})}var wr=function(){function e(t){this.dtype=t.dtype,this.shape=t.shape,t.shape!=null?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}}return e}(),Co=function(){function e(t,n,r,a,i,o,s){this.dtype=t,this.shape=n,this.sourceLayer=r,this.inputs=a,this.callArgs=i,this.outputTensorIndex=s,this.id=eE(),o!=null&&(this.originalName=nE(o),this.name=rE(this.originalName)),this.rank=n.length}return e}(),ine=0,xv=function(){function e(t,n){var r,a;this.callArgs=n,this.id=ine++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;try{for(var i=fe(t.inboundLayers),o=i.next();!o.done;o=i.next()){var s=o.value;s?.outboundNodes.push(this)}}catch(u){r={error:u}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(r)throw r.error}}t.outboundLayer.inboundNodes.push(this)}return e.prototype.getConfig=function(){var t,n,r=[];try{for(var a=fe(this.inboundLayers),i=a.next();!i.done;i=a.next()){var o=i.value;o!=null?r.push(o.name):r.push(null)}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:r,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}},e}(),one=0,At=function(e){ue(t,e);function t(n){n===void 0&&(n={});var r=e.call(this)||this;r._callHook=null,r._addedWeightNames=[],r._stateful=!1,r.id=one++,r.activityRegularizer=null,r.inputSpec=null,r.supportsMasking=!1,r._trainableWeights=[],r._nonTrainableWeights=[],r._losses=[],r._updates=[],r._built=!1,r.inboundNodes=[],r.outboundNodes=[];var a=n.name;if(!a){var i=r.getClassName();a=Ls(i)+"_"+dv(i)}if(r.name=a,r.trainable_=n.trainable==null?!0:n.trainable,n.inputShape!=null||n.batchInputShape!=null){var o=void 0;if(n.batchInputShape!=null)o=n.batchInputShape;else if(n.inputShape!=null){var s=null;n.batchSize!=null&&(s=n.batchSize),o=[s].concat(n.inputShape)}r.batchInputShape=o;var u=n.dtype;u==null&&(u=n.inputDType),u==null&&(u="float32"),r.dtype=u}return n.weights!=null?r.initialWeights=n.weights:r.initialWeights=null,r._refCount=null,r.fastWeightInitDuringBuild=!1,r}return t.nodeKey=function(n,r){return n.name+"_ib-"+r.toString()},t.prototype.getNodeAtIndex=function(n,r){if(this.inboundNodes.length===0)throw new as("The layer has never been called "+"and thus has no defined ".concat(r,"."));if(this.inboundNodes.length<=n)throw new J("Asked to get ".concat(r," at node ").concat(n,", ")+"but the layer has only ".concat(this.inboundNodes.length," inbound nodes."));return this.inboundNodes[n]},t.prototype.getInputAt=function(n){return ka(this.getNodeAtIndex(n,"input").inputTensors)},t.prototype.getOutputAt=function(n){return ka(this.getNodeAtIndex(n,"output").outputTensors)},Object.defineProperty(t.prototype,"input",{get:function(){if(this.inboundNodes.length>1)throw new Cu("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(this.inboundNodes.length===0)throw new Cu("Layer ".concat(this.name)+" is not connected, no input to return.");return ka(this.getNodeAtIndex(0,"input").inputTensors)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"output",{get:function(){if(this.inboundNodes.length===0)throw new Cu("Layer ".concat(this.name)+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new Cu("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return ka(this.getNodeAtIndex(0,"output").outputTensors)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"losses",{get:function(){return this._losses},enumerable:!1,configurable:!0}),t.prototype.calculateLosses=function(){return this.losses.map(function(n){return n()})},Object.defineProperty(t.prototype,"updates",{get:function(){return this._updates},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"built",{get:function(){return this._built},set:function(n){this._built=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trainable",{get:function(){return this.trainable_},set:function(n){this._trainableWeights.forEach(function(r){return r.trainable=n}),this.trainable_=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trainableWeights",{get:function(){return this.trainable_?this._trainableWeights.filter(function(n){return n.trainable}):[]},set:function(n){this._trainableWeights=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nonTrainableWeights",{get:function(){return this.trainable?this._trainableWeights.filter(function(n){return!n.trainable}).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)},set:function(n){this._nonTrainableWeights=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"weights",{get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stateful",{get:function(){return this._stateful},enumerable:!1,configurable:!0}),t.prototype.resetStates=function(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")},t.prototype.assertInputCompatibility=function(n){var r=Yt(n);if(!(this.inputSpec==null||this.inputSpec.length===0)){var a=Yt(this.inputSpec);if(r.length!==a.length)throw new J("Layer ".concat(this.name," expects ").concat(a.length," inputs, ")+"but it received ".concat(r.length," input tensors. ")+"Input received: ".concat(n));for(var i=0;i<r.length;i++){var o=r[i],s=a[i];if(s!=null){var u=o.rank;if(s.ndim!=null&&u!==s.ndim)throw new J("Input ".concat(i," is incompatible with layer ").concat(this.name,": ")+"expected ndim=".concat(s.ndim,", found ndim=").concat(u));if(s.maxNDim!=null&&u>s.maxNDim)throw new J("Input ".concat(i," is incompatible with layer ").concat(this.name)+": expected max_ndim=".concat(s.maxNDim,", found ndim=").concat(u));if(s.minNDim!=null&&u<s.minNDim)throw new J("Input ".concat(i," is incompatible with layer ").concat(this.name)+": expected min_ndim=".concat(s.minNDim,", found ndim=").concat(u,"."));if(s.dtype!=null&&o.dtype!==s.dtype)throw new J("Input ".concat(i," is incompatible with layer ").concat(this.name," ")+": expected dtype=".concat(s.dtype,", found dtype=").concat(o.dtype,"."));if(s.axes){var l=o.shape;for(var c in s.axes){var p=Number(c),d=s.axes[c],f=p>=0?l[p]:l[l.length+p];if(d!=null&&[d,null].indexOf(f)===-1)throw new J("Input ".concat(i," is incompatible with layer ")+"".concat(this.name,": expected axis ").concat(p," of input shape to ")+"have value ".concat(d," but got shape ").concat(l,"."))}}if(s.shape!=null)for(var h=0;h<s.shape.length;++h){var m=s.shape[h],v=o.shape[h];if(m!=null&&v!=null&&m!==v)throw new J("Input ".concat(i," is incompatible with layer ")+"".concat(this.name,": expected shape=").concat(s.shape,", ")+"found shape=".concat(o.shape,"."))}}}}},t.prototype.call=function(n,r){return n},t.prototype.invokeCallHook=function(n,r){this._callHook!=null&&this._callHook(n,r)},t.prototype.setCallHook=function(n){this._callHook=n},t.prototype.clearCallHook=function(){this._callHook=null},t.prototype.apply=function(n,r){var a=this;r=r||{},this.assertNotDisposed();var i=Yt(n),o=lne(n),s=cne(n);if(o===s)throw new J("Arguments to apply() must be all SymbolicTensors or all Tensors");return Fl(this.name,function(){var u,l,c,p;if(!a.built){a.assertInputCompatibility(n);var d=[];try{for(var f=fe(Yt(n)),h=f.next();!h.done;h=f.next()){var m=h.value;d.push(m.shape)}}catch(C){u={error:C}}finally{try{h&&!h.done&&(l=f.return)&&l.call(f)}finally{if(u)throw u.error}}a.build(ka(d)),a.built=!0,a.initialWeights&&a.setWeights(a.initialWeights),a._refCount===null&&s&&(a._refCount=1)}if(a.assertInputCompatibility(n),s){var v=a.call(n,r);a.supportsMasking&&a.setMaskMetadata(n,v);var g=Yt(v),y=[];try{for(var w=fe(g),b=w.next();!b.done;b=w.next()){var x=b.value;i.indexOf(x)!==-1&&(x=x.clone()),y.push(x)}}catch(C){c={error:C}}finally{try{b&&!b.done&&(p=w.return)&&p.call(w)}finally{if(c)throw c.error}}if(v=ka(y),a.activityRegularizer!=null)throw new _t("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return v}else{var k=sne(n),N=a.computeOutputShape(k),v=void 0,E=une(n);if(a.warnOnIncompatibleInputShape(Array.isArray(n)?k[0]:k),N!=null&&N.length>0&&Array.isArray(N[0])?v=N.map(function(R,A){return new Co(E,R,a,Yt(n),r,a.name,A)}):v=new Co(E,N,a,Yt(n),r,a.name),a.addInboundNode(n,v,null,null,k,N,r),a._refCount++,a.activityRegularizer!=null)throw new _t("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return v}})},t.prototype.warnOnIncompatibleInputShape=function(n){if(this.batchInputShape!=null)if(n.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+"".concat(JSON.stringify(n),") does not match that of the ")+"batchInputShape (".concat(JSON.stringify(this.batchInputShape),") ")+"of the layer ".concat(this.name));else{var r=!1;this.batchInputShape.forEach(function(a,i){a!=null&&n[i]!=null&&n[i]!==a&&(r=!0)}),r&&console.warn("The shape of the input tensor "+"(".concat(JSON.stringify(n),") does not ")+"match the expectation of layer ".concat(this.name,": ")+"".concat(JSON.stringify(this.batchInputShape)))}},Object.defineProperty(t.prototype,"outputShape",{get:function(){var n,r;if(this.inboundNodes==null||this.inboundNodes.length===0)throw new Cu("The layer ".concat(this.name," has never been called and thus has no ")+"defined output shape.");var a=[];try{for(var i=fe(this.inboundNodes),o=i.next();!o.done;o=i.next()){var s=o.value,u=JSON.stringify(s.outputShapes);a.indexOf(u)===-1&&a.push(u)}}catch(c){n={error:c}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}if(a.length===1){var l=this.inboundNodes[0].outputShapes;return Array.isArray(l)&&Array.isArray(l[0])&&l.length===1?l[0]:l}else throw new Cu("The layer ".concat(this.name," has multiple inbound nodes with different ")+'output shapes. Hence the notion of "output shape" is ill-defined for the layer.')},enumerable:!1,configurable:!0}),t.prototype.countParams=function(){if(!this.built)throw new as("You tried to call countParams() on ".concat(this.name,", ")+"but the layer is not built yet. Build it first by calling build(batchInputShape).");return Xm(this.weights)},t.prototype.build=function(n){this.built=!0},t.prototype.getWeights=function(n){return n===void 0&&(n=!1),Jy(n?this.trainableWeights:this.weights)},t.prototype.setWeights=function(n){var r=this;F.tidy(function(){var a=r.weights;if(a.length!==n.length)throw new J('You called setWeights(weights) on layer "'.concat(r.name,'" ')+"with a weight list of length ".concat(n.length,", ")+"but the layer was expecting ".concat(a.length," weights. ")+"Provided weights: ".concat(n,"..."));if(a.length!==0){for(var i=[],o=Jy(a),s=0;s<o.length;++s){var u=o[s],l=a[s],c=n[s];if(!F.util.arraysEqual(u.shape,c.shape))throw new J("Layer weight shape ".concat(u.shape," ")+"not compatible with provided weight shape ".concat(c.shape));i.push([l,c])}w3(i)}})},t.prototype.addWeight=function(n,r,a,i,o,s,u,l){if(this._addedWeightNames.indexOf(n)!==-1)throw new J("Duplicate weight name ".concat(n," for layer ").concat(this.name));this._addedWeightNames.push(n),a==null&&(a="float32"),this.fastWeightInitDuringBuild&&(i=l!=null?l():On("zeros"));var c=i.apply(r,a),p=new sE(c,a,n,s,u);return c.dispose(),o!=null&&this.addLoss(function(){return o.apply(p.read())}),s==null&&(s=!0),s?this._trainableWeights.push(p):this._nonTrainableWeights.push(p),p},t.prototype.setFastWeightInitDuringBuild=function(n){this.fastWeightInitDuringBuild=n},t.prototype.addLoss=function(n){var r;n==null||Array.isArray(n)&&n.length===0||(n=Yt(n),this._losses!==void 0&&this._losses!==null&&(r=this.losses).push.apply(r,ft([],re(n),!1)))},t.prototype.computeOutputShape=function(n){return n},t.prototype.computeMask=function(n,r){var a=this;if(!this.supportsMasking){if(r!=null)if(Array.isArray(r))r.forEach(function(i){if(i!=null)throw new TypeError("Layer ".concat(a.name," does not support masking, ")+"but was passed an inputMask.")});else throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.");return null}return r},t.prototype.setMaskMetadata=function(n,r,a){if(this.supportsMasking){var i=this.computeMask(n,a),o=Yt(r),s=Yt(i);if(o.length!==s.length)throw new Error("".concat(this.name," outputs ").concat(o.length," tensors ")+"but ".concat(o.length," masks for those tensors"));for(var u=0;u<o.length;u++)o[u].kerasMask=s[u]}},t.prototype.addInboundNode=function(n,r,a,i,o,s,u){var l,c;u===void 0&&(u=null);var p=Yt(n);r=Yt(r),a=Yt(a),i=Yt(i),o=Km(o),s=Km(s);var d=[],f=[],h=[];try{for(var m=fe(p),v=m.next();!v.done;v=m.next()){var g=v.value;d.push(g.sourceLayer),f.push(g.nodeIndex),h.push(g.tensorIndex)}}catch(w){l={error:w}}finally{try{v&&!v.done&&(c=m.return)&&c.call(m)}finally{if(l)throw l.error}}new xv({outboundLayer:this,inboundLayers:d,nodeIndices:f,tensorIndices:h,inputTensors:p,outputTensors:r,inputMasks:a,outputMasks:i,inputShapes:o,outputShapes:s},u);for(var y=0;y<r.length;y++)r[y].sourceLayer=this,r[y].nodeIndex=this.inboundNodes.length-1,r[y].tensorIndex=y},t.prototype.getConfig=function(){var n={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(n.batchInputShape=this.batchInputShape),this.dtype!=null&&(n.dtype=this.dtype),n},t.prototype.disposeWeights=function(){return this.weights.forEach(function(n){return n.dispose()}),this.weights.length},t.prototype.assertNotDisposed=function(){if(this._refCount===0)throw new Error("Layer '".concat(this.name,"' is already disposed."))},t.prototype.dispose=function(){if(!this.built)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been ")+"built yet.");if(this._refCount===null)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been used ")+"yet.");this.assertNotDisposed();var n=0;return--this._refCount===0&&(n=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:n}},t}(F.serialization.Serializable);function sne(e){var t,n;e=Yt(e);var r=[];try{for(var a=fe(e),i=a.next();!i.done;i=a.next()){var o=i.value;r.push(o.shape)}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return ka(r)}function une(e){return"float32"}function uE(e,t,n){var r,a;if((t==null||n!=null&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),t.inboundNodes.length===0)return[e];var i=t.inboundNodes[n];if(i.inboundLayers.length===0)return i.inputTensors;for(var o=[],s=0;s<i.inboundLayers.length;s++){var u=i.inputTensors[s],l=i.inboundLayers[s],c=i.nodeIndices[s],p=uE(u,l,c);try{for(var d=(r=void 0,fe(p)),f=d.next();!f.done;f=d.next()){var h=f.value;o.indexOf(h)===-1&&o.push(h)}}catch(m){r={error:m}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(r)throw r.error}}}return o}function lne(e){var t,n,r=!0;try{for(var a=fe(Yt(e)),i=a.next();!i.done;i=a.next()){var o=i.value;if(!(o instanceof Co)){r=!1;break}}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return r}function cne(e){var t,n,r=!0;try{for(var a=fe(Yt(e)),i=a.next();!i.done;i=a.next()){var o=i.value;if(o instanceof Co){r=!1;break}}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return r}var wp=function(e){ue(t,e);function t(n){var r=e.call(this,{dtype:n.dtype,name:n.name!=null?n.name:dv("input").toString()})||this;if(n.batchSize==null&&(n.batchSize=null),n.sparse==null&&(n.sparse=!1),r.trainable=!1,r.built=!0,r.sparse=n.sparse,n.inputShape!=null&&n.batchInputShape!=null)throw new J("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var a=n.batchInputShape;if(a==null){if(n.inputShape==null)throw new J("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");a=[n.batchSize].concat(n.inputShape)}else if(n.batchSize!=null)throw new J("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");var i=n.dtype||"float32";r.batchInputShape=a,r.dtype=i,r.inputSpec=[{shape:a}];var o=new Co(r.dtype,r.batchInputShape,r,[],{},r.name);return o.nodeIndex=0,o.tensorIndex=0,new xv({outboundLayer:r,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[o],outputTensors:[o],inputMasks:[null],outputMasks:[null],inputShapes:[a],outputShapes:[a]}),r}return t.prototype.apply=function(n,r){throw new J("Cannot pass any input to an "+"InputLayer's apply() method. InputLayer name: ".concat(this.name))},t.prototype.dispose=function(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}},t.prototype.getConfig=function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}},t}(At);wp.className="InputLayer";F.serialization.registerClass(wp);function lE(e){if(e.batchShape==null&&e.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(e.batchShape!=null&&e.shape!=null)throw new J("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var t=e.batchShape;e.shape!=null&&t==null&&(t=[null].concat(e.shape));var n=e.dtype;n==null&&(n="float32");var r=new wp({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}),a=r.inboundNodes[0].outputTensors;return a[0]}function pne(e,t){if(e.dtype==null||e.dtype===t.dtype)return t;try{return F.cast(t,e.dtype)}catch{throw new J("The dtype of the feed (".concat(t.dtype,") can not be cast to the dtype ")+"of the key '".concat(e.name,"' (").concat(e.dtype,")."))}}var dp=function(){function e(t){var n,r;if(this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof e)for(var a in t.id2Value)this.id2Value[a]=t.id2Value[a],a in t.id2Mask&&(this.id2Mask[a]=t.id2Mask[a]);else{if(t==null)return;try{for(var i=fe(t),o=i.next();!o.done;o=i.next()){var s=o.value;this.add(s.key,s.value)}}catch(u){n={error:u}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}}return e.prototype.add=function(t,n,r){if(this.id2Value[t.id]==null)this.id2Value[t.id]=pne(t,n),this.name2Id[t.name]=t.id,r!=null&&(this.id2Mask[t.id]=r);else throw new J("Duplicate key: name=".concat(t.name,", id=").concat(t.id));return this},e.prototype.addFeed=function(t){this.add(t.key,t.value)},e.prototype.hasKey=function(t){return this.id2Value[t.id]!=null},e.prototype.names=function(){return Object.keys(this.name2Id)},e.prototype.getValue=function(t){if(t instanceof Co){if(this.id2Value[t.id]==null)throw new J("Nonexistent key: ".concat(t.name));return this.id2Value[t.id]}else{var n=this.name2Id[t];if(n==null)throw new J("Feed dict has no SymbolicTensor name: ".concat(t));return this.id2Value[n]}},e.prototype.getMask=function(t){if(t instanceof Co){if(this.id2Value[t.id]==null)throw new J("Nonexistent key: ".concat(t.name));return this.id2Mask[t.id]}else{var n=this.name2Id[t];if(n==null)throw new J("Feed dict has no SymbolicTensor name: ".concat(t));return this.id2Mask[n]}},e.prototype.disposeMasks=function(){this.id2Mask!=null&&F.dispose(this.id2Mask)},e}(),Ym=new JT,Jm=new JT;function dne(e){Ym?.setMaxEntries(e),Jm?.setMaxEntries(e)}function Bf(e,t,n,r){var a,i,o,s,u=n==null?!1:n.training,l=Array.isArray(e),c=l?e:[e],p=c.map(function(de){return de.name}),d=[],f=t.names();try{for(var h=fe(p),m=h.next();!m.done;m=h.next()){var v=m.value;f.indexOf(v)!==-1?d.push(t.getValue(v)):d.push(null)}}catch(de){a={error:de}}finally{try{m&&!m.done&&(i=h.return)&&i.call(h)}finally{if(a)throw a.error}}r!=null&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);var g=p.join(",")+"|"+t.names().sort().join(","),y=Ym.get(g),w;if(y==null){var b=fne(c,t);y=b.sorted,w=b.recipientCounts,Ym.put(g,y),Jm.put(g,w)}w={},u||Object.assign(w,Jm.get(g));for(var x=new dp(t),k=0;k<y.length;++k){if(r!=null){var N=F.memory().numTensors;N>r.maxNumTensors&&(r.maxNumTensors=N),N<r.minNumTensors&&(r.minNumTensors=N)}var E=y[k],C=E.sourceLayer;if(!(C instanceof wp)){var R=[],A=[],M=[],$=!1;try{for(var z=(o=void 0,fe(E.inputs)),L=z.next();!L.done;L=z.next()){var B=L.value,W=x.getValue(B),Y=x.getMask(B);R.push(W),A.push(Y),Y!=null&&($=!0),u||(w[B.name]--,w[B.name]===0&&!t.hasKey(B)&&p.indexOf(B.name)===-1&&!W.isDisposed&&B.sourceLayer.stateful!==!0&&M.push(W))}}catch(de){o={error:de}}finally{try{L&&!L.done&&(s=z.return)&&s.call(z)}finally{if(o)throw o.error}}$&&(n=n||{},n.mask=A[0]);var Q=Yt(C.apply(R,n)),G=null;C.supportsMasking&&(G=C.computeMask(R,A));for(var X=mne(E),ie=Array.isArray(X)?X:[X],ae=0;ae<ie.length;++ae){x.hasKey(ie[ae])||x.add(ie[ae],Q[ae],Array.isArray(G)?G[0]:G);var le=p.indexOf(ie[ae].name);le!==-1&&(d[le]=Q[ae])}u||F.dispose(M)}}return x.disposeMasks(),l?d:d[0]}function fne(e,t){var n,r,a,i;F.util.assert(e!=null&&e.length>0,function(){return"Expected at least one fetch, got none"});var o=[],s={};if(e.length===1){var u=tT(e[0],t);o=u.sorted,s=u.recipientMap}else{var l=new Set;try{for(var c=fe(e),p=c.next();!p.done;p=c.next()){var d=p.value,f=tT(d,t),h=f.sorted,m=f.recipientMap;try{for(var v=(a=void 0,fe(h)),g=v.next();!g.done;g=v.next()){var y=g.value;l.has(y.name)||(o.push(y),l.add(y.name))}}catch(x){a={error:x}}finally{try{g&&!g.done&&(i=v.return)&&i.call(v)}finally{if(a)throw a.error}}var w=function(x){s[x]==null&&(s[x]=new Set),m[x].forEach(function(k){return s[x].add(k)})};for(var b in m)w(b)}}catch(x){n={error:x}}finally{try{p&&!p.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}}return{sorted:o,recipientCounts:hne(s)}}function hne(e){var t={};for(var n in e)t[n]=e[n].size;return t}function tT(e,t){var n,r,a,i,o=new Set,s=[],u={};try{for(var l=fe(t.names()),c=l.next();!c.done;c=l.next()){var p=c.value;o.add(p)}}catch(w){n={error:w}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}var d=[],f=[];for(d.push(e);d.length>0;){var h=d[d.length-1];if(o.has(h.name)){d.pop();continue}var m=f[f.length-1]===d.length-1;if(h.inputs.length===0||m)d.pop(),s.push(h),o.add(h.name),m&&f.pop();else{f.push(d.length-1);try{for(var v=(a=void 0,fe(h.inputs)),g=v.next();!g.done;g=v.next()){var y=g.value;u[y.name]==null&&(u[y.name]=new Set),u[y.name].add(h.name),!o.has(y.name)&&d.push(y)}}catch(w){a={error:w}}finally{try{g&&!g.done&&(i=v.return)&&i.call(v)}finally{if(a)throw a.error}}}}return{sorted:s,recipientMap:u}}function mne(e){var t,n,r;if(e.sourceLayer.inboundNodes.length===1)r=e.sourceLayer.output;else{for(var a=null,i=0;i<e.sourceLayer.inboundNodes.length;++i)try{for(var o=(t=void 0,fe(e.sourceLayer.inboundNodes[i].outputTensors)),s=o.next();!s.done;s=o.next()){var u=s.value;if(u.id===e.id){a=i;break}}}catch(l){t={error:l}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}r=e.sourceLayer.getOutputAt(a)}return r}var vne=F.env();vne.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",function(){return 100},dne);var cE="Abs",gne="Acos",yne="Acosh",x3="Add",bne="AddN",wne="ArgMax",xne="ArgMin",Sne="Asin",kne="Asinh",Nne="Atan",Tne="Atanh",Ene="Atan2",Ine="AvgPool",Cne="AvgPoolGrad",Dne="AvgPool3D",_ne="AvgPool3DGrad",pE="BatchMatMul",dE="BatchToSpaceND",Ane="BroadcastTo",S3="Cast",Fne="Ceil",Rne="ClipByValue",One="Complex",fE="ComplexAbs",hE="Concat",mE="Conv2D",Mne="Conv2DBackpropFilter",vE="Conv2DBackpropInput",Pne="Conv3D",Bne="Conv3DBackpropFilterV2",Lne="Conv3DBackpropInputV2",gE="Cos",yE="Cosh",zne="Cumprod",bE="Cumsum",$ne="DepthwiseConv2dNative",Vne="DepthwiseConv2dNativeBackpropFilter",Wne="DepthwiseConv2dNativeBackpropInput",Une="Dilation2D",Gne="Dilation2DBackpropInput",qne="Dilation2DBackpropFilter",wE="RealDiv",Hne="Elu",jne="EluGrad",Kne="Erf",Xne="Equal",xE="Exp",SE="ExpandDims",Yne="Expm1",Jne="Fill",kE="Floor",NE="FloorDiv",Zne="FusedBatchNorm",TE="GatherV2",Qne="Greater",EE="GreaterEqual",k3="Identity",ere="Imag",tre="IsFinite",nre="IsInf",rre="IsNan",are="LeakyRelu",ire="Less",ore="LessEqual",IE="Log",sre="Log1p",ure="LogicalAnd",lre="LogicalNot",cre="LogSoftmax",pre="LRN",dre="LRNGrad",fre="Max",CE="Maximum",hre="MaxPool",mre="MaxPoolGrad",vre="MaxPool3D",gre="MaxPool3DGrad",yre="Mean",bre="Min",wre="Minimum",xre="MirrorPad",Sre="Mod",DE="Multiply",_E="Neg",kre="OnesLike",Nre="OneHot",AE="Pack",FE="PadV2",RE="Pow",Tre="Prelu",Ere="Prod",Ire="Real",Cre="Reciprocal",Dre="Relu",OE="Reshape",_re="ResizeNearestNeighbor",Are="ResizeNearestNeighborGrad",Fre="ResizeBilinear",Rre="ResizeBilinearGrad",Ore="Relu6",ME="Reverse",Mre="Round",PE="Rsqrt",Pre="TensorScatterUpdate",BE="Select",Bre="Selu",LE="Slice",zE="Sin",$E="Sinh",Lre="Sign",VE="Sigmoid",zre="Softplus",WE="Sqrt",UE="Sum",GE="SpaceToBatchND",qE="SplitV",$re="Softmax",Vre="SquaredDifference",Wre="Square",HE="Sub",Ure="Tan",Gre="Tanh",N3="Tile",Gm="Transpose",jE="Unpack",KE="UnsortedSegmentSum",XE="ZerosLike",YE="Step";var qre=1e-7,Hre=1e-4,jre=function(){function e(){}return e.prototype.refCount=function(t){return Ga("refCount")},e.prototype.incRef=function(t){return Ga("incRef")},e.prototype.timerAvailable=function(){return!0},e.prototype.time=function(t){return Ga("time")},e.prototype.read=function(t){return Ga("read")},e.prototype.readSync=function(t){return Ga("readSync")},e.prototype.readToGPU=function(t,n){return Ga("readToGPU")},e.prototype.numDataIds=function(){return Ga("numDataIds")},e.prototype.disposeData=function(t,n){return Ga("disposeData")},e.prototype.write=function(t,n,r){return Ga("write")},e.prototype.move=function(t,n,r,a,i){return Ga("move")},e.prototype.createTensorFromGPUData=function(t,n,r){return Ga("createTensorFromGPUData")},e.prototype.memory=function(){return Ga("memory")},e.prototype.floatPrecision=function(){return Ga("floatPrecision")},e.prototype.epsilon=function(){return this.floatPrecision()===32?qre:Hre},e.prototype.dispose=function(){return Ga("dispose")},e}();function Ga(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}function De(e,t){if(!e)throw new Error(typeof t=="string"?t:t())}function Kre(e,t,n){n===void 0&&(n=""),De(T3(e,t),function(){return n+" Shapes ".concat(e," and ").concat(t," must match")})}function ss(e){if(e.length===0)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function T3(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Zm(e){return e%1===0}function qm(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function Bl(e,t){var n=t.length;return e=e==null?t.map(function(r,a){return a}):[].concat(e),De(e.every(function(r){return r>=-n&&r<n}),function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e)}),De(e.every(function(r){return Zm(r)}),function(){return"All values in axis param must be integers but "+"got axis ".concat(e)}),e.map(function(r){return r<0?n+r:r})}function Xre(e,t){var n=null;if(e==null||e==="float32")n=new Float32Array(t);else if(e==="int32")n=new Int32Array(t);else if(e==="bool")n=new Uint8Array(t);else if(e==="string")n=new Array(t);else throw new Error("Unknown data type ".concat(e));return n}function Yre(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}function Jre(e){return e==="bool"||e==="complex64"||e==="float32"||e==="int32"||e==="string"}function Zy(e){if(e==="float32"||e==="int32")return 4;if(e==="complex64")return 8;if(e==="bool")return 1;throw new Error("Unknown dtype ".concat(e))}function Zre(e){if(e==null)return 0;var t=0;return e.forEach(function(n){return t+=n.length}),t}function E3(e){return typeof e=="string"||e instanceof String}function Qre(e){return typeof e=="boolean"}function eae(e){return typeof e=="number"}function Sv(e){return Array.isArray(e)?Sv(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":eae(e)?"float32":E3(e)?"string":Qre(e)?"bool":"float32"}function Qy(e){return!!(e&&e.constructor&&e.call&&e.apply)}function I3(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function JE(e,t,n,r){r===void 0&&(r=!1);var a=new Array;if(t.length===1)for(var i=t[0]*(r?2:1),o=0;o<i;o++)a[o]=n[e+o];else for(var i=t[0],s=t.slice(1),u=s.reduce(function(c,p){return c*p})*(r?2:1),o=0;o<i;o++)a[o]=JE(e+o*u,s,n,r);return a}function nT(e,t,n){if(n===void 0&&(n=!1),e.length===0)return t[0];var r=e.reduce(function(a,i){return a*i})*(n?2:1);if(r===0)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return JE(0,e,t,n)}function ZE(e,t){for(var n=C3(e,t),r=0;r<n.length;r++)n[r]=1;return n}function C3(e,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool")return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function Jf(e){e.forEach(function(t){De(Number.isInteger(t)&&t>=0,function(){return"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"].")})})}function D3(e){return e&&e.then&&typeof e.then=="function"}var rT="tfjsflags",tae=function(){function e(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=nae,this.populateURLFlags()}return e.prototype.setPlatform=function(t,n){this.platform!=null&&(Mn().getBool("IS_TEST")||Mn().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(t,"."))),this.platformName=t,this.platform=n},e.prototype.registerFlag=function(t,n,r){if(this.flagRegistry[t]={evaluationFn:n,setHook:r},this.urlFlags[t]!=null){var a=this.urlFlags[t];Mn().getBool("IS_TEST")||Mn().getBool("PROD")||console.warn("Setting feature override from URL ".concat(t,": ").concat(a,".")),this.set(t,a)}},e.prototype.getAsync=function(t){return Oe(this,void 0,void 0,function(){var n,r;return Fe(this,function(a){switch(a.label){case 0:return t in this.flags?[2,this.flags[t]]:(n=this.flags,r=t,[4,this.evaluateFlag(t)]);case 1:return n[r]=a.sent(),[2,this.flags[t]]}})})},e.prototype.get=function(t){if(t in this.flags)return this.flags[t];var n=this.evaluateFlag(t);if(D3(n))throw new Error("Flag ".concat(t," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[t]=n,this.flags[t]},e.prototype.getNumber=function(t){return this.get(t)},e.prototype.getBool=function(t){return this.get(t)},e.prototype.getString=function(t){return this.get(t)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"features",{get:function(){return this.flags},enumerable:!1,configurable:!0}),e.prototype.set=function(t,n){if(this.flagRegistry[t]==null)throw new Error("Cannot set flag ".concat(t," as it has not been registered."));this.flags[t]=n,this.flagRegistry[t].setHook!=null&&this.flagRegistry[t].setHook(n)},e.prototype.evaluateFlag=function(t){if(this.flagRegistry[t]==null)throw new Error("Cannot evaluate flag '".concat(t,"': no evaluation function found."));return this.flagRegistry[t].evaluationFn()},e.prototype.setFlags=function(t){this.flags=Object.assign({},t)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var t=this;if(!(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")){var n=this.getQueryParams(this.global.location.search);if(rT in n){var r=n[rT].split(",");r.forEach(function(a){var i=re(a.split(":"),2),o=i[0],s=i[1];t.urlFlags[o]=aae(o,s)})}}},e}();function nae(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(n){for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];return rae(t,r[0],r[1]),r.join("=")}),t}function rae(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function aae(e,t){var n=t.toLowerCase();return n==="true"||n==="false"?n==="true":"".concat(+n)===n?+n:t}function Mn(){return QE}var QE=null;function iae(e){QE=e}var By;function eI(){if(By==null){var e=void 0;if(typeof window<"u")e=window;else if(typeof global<"u")e=global;else if(typeof process<"u")e=process;else if(typeof self<"u")e=self;else throw new Error("Could not find a global object");By=e}return By}function oae(){var e=eI();return e._tfGlobals==null&&(e._tfGlobals=new Map),e._tfGlobals}function _3(e,t){var n=oae();if(n.has(e))return n.get(e);var r=t();return n.set(e,r),n.get(e)}function pp(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Mn().getBool("IS_TEST")||Mn().getBool("PROD")||console.warn.apply(console,ft([],re(e),!1))}var tI=_3("kernelRegistry",function(){return new Map}),e3=_3("gradRegistry",function(){return new Map});function aT(e,t){var n=uae(e,t);return tI.get(n)}function iT(e){return e3.get(e)}function oT(e){for(var t=tI.entries(),n=[];;){var r=t.next(),a=r.done,i=r.value;if(a)break;var o=re(i,2),s=o[0],u=o[1],l=re(s.split("_"),1),c=l[0];c===e&&n.push(u)}return n}function sae(e){var t=e.kernelName;e3.has(t)&&Mn().getBool("DEBUG")&&pp("Overriding the gradient for '".concat(t,"'")),e3.set(t,e)}function uae(e,t){return"".concat(t,"_").concat(e)}function lae(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}var Ll=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cae(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function pae(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){if(this instanceof r){var a=[null];a.push.apply(a,arguments);var i=Function.bind.apply(t,a);return new i}return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var a=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return e[r]}})}),n}var nI=Sn,qi=null;try{qi=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Sn(e,t,n){this.low=e|0,this.high=t|0,this.unsigned=!!n}Sn.prototype.__isLong__;Object.defineProperty(Sn.prototype,"__isLong__",{value:!0});function Ha(e){return(e&&e.__isLong__)===!0}Sn.isLong=Ha;var sT={},uT={};function zl(e,t){var n,r,a;return t?(e>>>=0,(a=0<=e&&e<256)&&(r=uT[e],r)?r:(n=kn(e,(e|0)<0?-1:0,!0),a&&(uT[e]=n),n)):(e|=0,(a=-128<=e&&e<128)&&(r=sT[e],r)?r:(n=kn(e,e<0?-1:0,!1),a&&(sT[e]=n),n))}Sn.fromInt=zl;function Hi(e,t){if(isNaN(e))return t?Al:ji;if(t){if(e<0)return Al;if(e>=rI)return oI}else{if(e<=-cT)return qa;if(e+1>=cT)return iI}return e<0?Hi(-e,t).neg():kn(e%gp|0,e/gp|0,t)}Sn.fromNumber=Hi;function kn(e,t,n){return new Sn(e,t,n)}Sn.fromBits=kn;var Qm=Math.pow;function A3(e,t,n){if(e.length===0)throw Error("empty string");if(e==="NaN"||e==="Infinity"||e==="+Infinity"||e==="-Infinity")return ji;if(typeof t=="number"?(n=t,t=!1):t=!!t,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return A3(e.substring(1),t,n).neg();for(var a=Hi(Qm(n,8)),i=ji,o=0;o<e.length;o+=8){var s=Math.min(8,e.length-o),u=parseInt(e.substring(o,o+s),n);if(s<8){var l=Hi(Qm(n,s));i=i.mul(l).add(Hi(u))}else i=i.mul(a),i=i.add(Hi(u))}return i.unsigned=t,i}Sn.fromString=A3;function Ao(e,t){return typeof e=="number"?Hi(e,t):typeof e=="string"?A3(e,t):kn(e.low,e.high,typeof t=="boolean"?t:e.unsigned)}Sn.fromValue=Ao;var lT=65536,dae=1<<24,gp=lT*lT,rI=gp*gp,cT=rI/2,pT=zl(dae),ji=zl(0);Sn.ZERO=ji;var Al=zl(0,!0);Sn.UZERO=Al;var fp=zl(1);Sn.ONE=fp;var aI=zl(1,!0);Sn.UONE=aI;var t3=zl(-1);Sn.NEG_ONE=t3;var iI=kn(-1,2147483647,!1);Sn.MAX_VALUE=iI;var oI=kn(-1,-1,!0);Sn.MAX_UNSIGNED_VALUE=oI;var qa=kn(0,-2147483648,!1);Sn.MIN_VALUE=qa;var Ue=Sn.prototype;Ue.toInt=function(){return this.unsigned?this.low>>>0:this.low};Ue.toNumber=function(){return this.unsigned?(this.high>>>0)*gp+(this.low>>>0):this.high*gp+(this.low>>>0)};Ue.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(qa)){var n=Hi(t),r=this.div(n),a=r.mul(n).sub(this);return r.toString(t)+a.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var i=Hi(Qm(t,6),this.unsigned),o=this,s="";;){var u=o.div(i),l=o.sub(u.mul(i)).toInt()>>>0,c=l.toString(t);if(o=u,o.isZero())return c+s;for(;c.length<6;)c="0"+c;s=""+c+s}};Ue.getHighBits=function(){return this.high};Ue.getHighBitsUnsigned=function(){return this.high>>>0};Ue.getLowBits=function(){return this.low};Ue.getLowBitsUnsigned=function(){return this.low>>>0};Ue.getNumBitsAbs=function(){if(this.isNegative())return this.eq(qa)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,n=31;n>0&&!(t&1<<n);n--);return this.high!=0?n+33:n+1};Ue.isZero=function(){return this.high===0&&this.low===0};Ue.eqz=Ue.isZero;Ue.isNegative=function(){return!this.unsigned&&this.high<0};Ue.isPositive=function(){return this.unsigned||this.high>=0};Ue.isOdd=function(){return(this.low&1)===1};Ue.isEven=function(){return(this.low&1)===0};Ue.equals=function(t){return Ha(t)||(t=Ao(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low};Ue.eq=Ue.equals;Ue.notEquals=function(t){return!this.eq(t)};Ue.neq=Ue.notEquals;Ue.ne=Ue.notEquals;Ue.lessThan=function(t){return this.comp(t)<0};Ue.lt=Ue.lessThan;Ue.lessThanOrEqual=function(t){return this.comp(t)<=0};Ue.lte=Ue.lessThanOrEqual;Ue.le=Ue.lessThanOrEqual;Ue.greaterThan=function(t){return this.comp(t)>0};Ue.gt=Ue.greaterThan;Ue.greaterThanOrEqual=function(t){return this.comp(t)>=0};Ue.gte=Ue.greaterThanOrEqual;Ue.ge=Ue.greaterThanOrEqual;Ue.compare=function(t){if(Ha(t)||(t=Ao(t)),this.eq(t))return 0;var n=this.isNegative(),r=t.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1};Ue.comp=Ue.compare;Ue.negate=function(){return!this.unsigned&&this.eq(qa)?qa:this.not().add(fp)};Ue.neg=Ue.negate;Ue.add=function(t){Ha(t)||(t=Ao(t));var n=this.high>>>16,r=this.high&65535,a=this.low>>>16,i=this.low&65535,o=t.high>>>16,s=t.high&65535,u=t.low>>>16,l=t.low&65535,c=0,p=0,d=0,f=0;return f+=i+l,d+=f>>>16,f&=65535,d+=a+u,p+=d>>>16,d&=65535,p+=r+s,c+=p>>>16,p&=65535,c+=n+o,c&=65535,kn(d<<16|f,c<<16|p,this.unsigned)};Ue.subtract=function(t){return Ha(t)||(t=Ao(t)),this.add(t.neg())};Ue.sub=Ue.subtract;Ue.multiply=function(t){if(this.isZero())return ji;if(Ha(t)||(t=Ao(t)),qi){var n=qi.mul(this.low,this.high,t.low,t.high);return kn(n,qi.get_high(),this.unsigned)}if(t.isZero())return ji;if(this.eq(qa))return t.isOdd()?qa:ji;if(t.eq(qa))return this.isOdd()?qa:ji;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(pT)&&t.lt(pT))return Hi(this.toNumber()*t.toNumber(),this.unsigned);var r=this.high>>>16,a=this.high&65535,i=this.low>>>16,o=this.low&65535,s=t.high>>>16,u=t.high&65535,l=t.low>>>16,c=t.low&65535,p=0,d=0,f=0,h=0;return h+=o*c,f+=h>>>16,h&=65535,f+=i*c,d+=f>>>16,f&=65535,f+=o*l,d+=f>>>16,f&=65535,d+=a*c,p+=d>>>16,d&=65535,d+=i*l,p+=d>>>16,d&=65535,d+=o*u,p+=d>>>16,d&=65535,p+=r*c+a*l+i*u+o*s,p&=65535,kn(f<<16|h,p<<16|d,this.unsigned)};Ue.mul=Ue.multiply;Ue.divide=function(t){if(Ha(t)||(t=Ao(t)),t.isZero())throw Error("division by zero");if(qi){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var n=(this.unsigned?qi.div_u:qi.div_s)(this.low,this.high,t.low,t.high);return kn(n,qi.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Al:ji;var r,a,i;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return Al;if(t.gt(this.shru(1)))return aI;i=Al}else{if(this.eq(qa)){if(t.eq(fp)||t.eq(t3))return qa;if(t.eq(qa))return fp;var o=this.shr(1);return r=o.div(t).shl(1),r.eq(ji)?t.isNegative()?fp:t3:(a=this.sub(t.mul(r)),i=r.add(a.div(t)),i)}else if(t.eq(qa))return this.unsigned?Al:ji;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();i=ji}for(a=this;a.gte(t);){r=Math.max(1,Math.floor(a.toNumber()/t.toNumber()));for(var s=Math.ceil(Math.log(r)/Math.LN2),u=s<=48?1:Qm(2,s-48),l=Hi(r),c=l.mul(t);c.isNegative()||c.gt(a);)r-=u,l=Hi(r,this.unsigned),c=l.mul(t);l.isZero()&&(l=fp),i=i.add(l),a=a.sub(c)}return i};Ue.div=Ue.divide;Ue.modulo=function(t){if(Ha(t)||(t=Ao(t)),qi){var n=(this.unsigned?qi.rem_u:qi.rem_s)(this.low,this.high,t.low,t.high);return kn(n,qi.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))};Ue.mod=Ue.modulo;Ue.rem=Ue.modulo;Ue.not=function(){return kn(~this.low,~this.high,this.unsigned)};Ue.and=function(t){return Ha(t)||(t=Ao(t)),kn(this.low&t.low,this.high&t.high,this.unsigned)};Ue.or=function(t){return Ha(t)||(t=Ao(t)),kn(this.low|t.low,this.high|t.high,this.unsigned)};Ue.xor=function(t){return Ha(t)||(t=Ao(t)),kn(this.low^t.low,this.high^t.high,this.unsigned)};Ue.shiftLeft=function(t){return Ha(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?kn(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):kn(0,this.low<<t-32,this.unsigned)};Ue.shl=Ue.shiftLeft;Ue.shiftRight=function(t){return Ha(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?kn(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):kn(this.high>>t-32,this.high>=0?0:-1,this.unsigned)};Ue.shr=Ue.shiftRight;Ue.shiftRightUnsigned=function(t){if(Ha(t)&&(t=t.toInt()),t&=63,t===0)return this;var n=this.high;if(t<32){var r=this.low;return kn(r>>>t|n<<32-t,n>>>t,this.unsigned)}else return t===32?kn(n,0,this.unsigned):kn(n>>>t-32,0,this.unsigned)};Ue.shru=Ue.shiftRightUnsigned;Ue.shr_u=Ue.shiftRightUnsigned;Ue.toSigned=function(){return this.unsigned?kn(this.low,this.high,!1):this};Ue.toUnsigned=function(){return this.unsigned?this:kn(this.low,this.high,!0)};Ue.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()};Ue.toBytesLE=function(){var t=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]};Ue.toBytesBE=function(){var t=this.high,n=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};Sn.fromBytes=function(t,n,r){return r?Sn.fromBytesLE(t,n):Sn.fromBytesBE(t,n)};Sn.fromBytesLE=function(t,n){return new Sn(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,n)};Sn.fromBytesBE=function(t,n){return new Sn(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],n)};var sI=cae(nI),fae=Fte({__proto__:null,default:sI},[nI]),hae=sI||fae;function F3(e){return hae.fromString(e,!0,16)}F3("c3a5c85c97cb3127");F3("b492b66fbe98f273");F3("9ae16a3b2f90404f");function mae(e,t){return e instanceof Float32Array&&t==="float32"||e instanceof Int32Array&&t==="int32"||e instanceof Uint8Array&&t==="bool"}function uI(e,t){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=Wf(e)),Mn().getBool("DEBUG")&&Yre(e,t),mae(e,t))return e;if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool"){for(var n=new Uint8Array(e.length),r=0;r<n.length;++r)Math.round(e[r])!==0&&(n[r]=1);return n}else throw new Error("Unknown data type ".concat(t))}function ev(){return Mn().platform.now()}function vae(e,t){return t===void 0&&(t="utf-8"),t=t||"utf-8",Mn().platform.encode(e,t)}function dT(e,t){return t===void 0&&(t="utf-8"),t=t||"utf-8",Mn().platform.decode(e,t)}function Ki(e){return Mn().platform.isTypedArray!=null?Mn().platform.isTypedArray(e):lae(e)}function Wf(e,t,n){var r,a;if(t===void 0&&(t=[]),n===void 0&&(n=!1),t==null&&(t=[]),typeof e=="boolean"||typeof e=="number"||typeof e=="string"||D3(e)||e==null||Ki(e)&&n)t.push(e);else if(Array.isArray(e)||Ki(e))for(var i=0;i<e.length;++i)Wf(e[i],t,n);else{var o=-1;try{for(var s=fe(Object.keys(e)),u=s.next();!u.done;u=s.next()){var l=u.value;/^([1-9]+[0-9]*|0)$/.test(l)&&(o=Math.max(o,Number(l)))}}catch(c){r={error:c}}finally{try{u&&!u.done&&(a=s.return)&&a.call(s)}finally{if(r)throw r.error}}for(var i=0;i<=o;i++)Wf(e[i],t,n)}return t}var gae=function(){function e(t,n){this.backendTimer=t,this.logger=n,n==null&&(this.logger=new bae)}return e.prototype.profileKernel=function(t,n,r){var a,i,o,s=function(){o=r()},u,l=ev();if(this.backendTimer.timerAvailable())u=this.backendTimer.time(s);else{s();try{for(var c=fe(o),p=c.next();!p.done;p=c.next()){var d=p.value;d.dataSync()}}catch(v){a={error:v}}finally{try{p&&!p.done&&(i=c.return)&&i.call(c)}finally{if(a)throw a.error}}u=Promise.resolve({kernelMs:ev()-l})}if(Mn().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var f=function(v){var g=o[v];g.data().then(function(y){yae(y,g.dtype,t)})},h=0;h<o.length;h++)f(h);var m={kernelName:t,outputs:o,inputs:n,timeMs:u.then(function(v){return v.kernelMs}),extraInfo:u.then(function(v){return v.getExtraProfileInfo!=null?v.getExtraProfileInfo():""})};return m},e.prototype.logKernelProfile=function(t){var n=this,r=t.kernelName,a=t.outputs,i=t.timeMs,o=t.inputs,s=t.extraInfo;a.forEach(function(u){Promise.all([u.data(),i,s]).then(function(l){n.logger.logKernelProfile(r,u,l[0],l[1],o,l[2])})})},e}();function yae(e,t,n){if(t!=="float32")return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}return!1}var bae=function(){function e(){}return e.prototype.logKernelProfile=function(t,n,r,a,i,o){var s=typeof a=="number"?qm("".concat(a,"ms"),9):a.error,u=qm(t,25),l=n.rank,c=n.size,p=qm(n.shape.toString(),14),d="";for(var f in i){var h=i[f];if(h!=null){var m=h.shape||n.shape,v=m.length;d+="".concat(f,": ").concat(v,"D ").concat(v>0?m:""," ")}}console.log("%c".concat(u,"	%c").concat(s,"	%c").concat(l,"D ").concat(p,"	%c").concat(c,"	%c").concat(d,"	%c").concat(o),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},e}();function wae(e,t,n){for(var r={},a={},i=0;i<t.length;i++)r[t[i].id]=!0;for(var i=0;i<e.length;i++){var o=e[i],s=o.inputs;for(var u in s){for(var l=s[u],c=!1,p=0;p<t.length;p++)if(r[l.id]){o.outputs.forEach(function(w){return r[w.id]=!0}),c=!0,a[o.id]=!0;break}if(c)break}}var d={};d[n.id]=!0;for(var f={},i=e.length-1;i>=0;i--)for(var o=e[i],s=o.inputs,p=0;p<o.outputs.length;p++)if(d[o.outputs[p].id]){for(var u in s)d[s[u].id]=!0,f[o.id]=!0;break}for(var h=[],i=0;i<e.length;i++){var o=e[i];if(a[o.id]&&f[o.id]){var m={};for(var u in o.inputs){var v=o.inputs[u];r[v.id]&&(m[u]=v)}var g=Object.assign({},o);g.inputs=m,g.outputs=o.outputs,h.push(g)}}return h}function xae(e,t,n,r){for(var a=function(o){var s=t[o],u=[];if(s.outputs.forEach(function(d){var f=e[d.id];f!=null?u.push(f):u.push(null)}),s.gradient==null)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(s.kernelName,"."));var l=s.gradient(u),c=function(d){if(!(d in l))throw new Error("Cannot backprop through input ".concat(d,". ")+"Available gradients found: ".concat(Object.keys(l),"."));var f=n(function(){return l[d]()});if(f.dtype!=="float32")throw new Error("Error in gradient for op ".concat(s.kernelName,". The gradient of input ")+"".concat(d," must have 'float32' dtype, but has '").concat(f.dtype,"'"));var h=s.inputs[d];if(!T3(f.shape,h.shape))throw new Error("Error in gradient for op ".concat(s.kernelName,". The gradient of input ")+"'".concat(d,"' has shape '").concat(f.shape,"', which does not match ")+"the shape of the input '".concat(h.shape,"'"));if(e[h.id]==null)e[h.id]=f;else{var m=e[h.id];e[h.id]=r(m,f),m.dispose()}};for(var p in s.inputs)c(p)},i=t.length-1;i>=0;i--)a(i)}var fT=20,_f=3,Ly=7;function Sae(e,t,n,r){var a=I3(t),i=kae(e,t,n,a),o=t.length,s=Hm(e,t,n,a,i),u=["Tensor"];return r&&(u.push("  dtype: ".concat(n)),u.push("  rank: ".concat(o)),u.push("  shape: [".concat(t,"]")),u.push("  values:")),u.push(s.map(function(l){return"    "+l}).join(`
`)),u.join(`
`)}function kae(e,t,n,r){var a=ss(t),i=r[r.length-1],o=new Array(i).fill(0),s=t.length,u=n==="complex64"?zf(e):e;if(s>1)for(var l=0;l<a/i;l++)for(var c=l*i,p=0;p<i;p++)o[p]=Math.max(o[p],Lf(u[c+p],0,n).length);return o}function Lf(e,t,n){var r;return Array.isArray(e)?r="".concat(parseFloat(e[0].toFixed(Ly))," + ")+"".concat(parseFloat(e[1].toFixed(Ly)),"j"):E3(e)?r="'".concat(e,"'"):n==="bool"?r=lI(e):r=parseFloat(e.toFixed(Ly)).toString(),qm(r,t)}function lI(e){return e===0?"false":"true"}function Hm(e,t,n,r,a,i){i===void 0&&(i=!0);var o=n==="complex64"?2:1,s=t[0],u=t.length;if(u===0){if(n==="complex64"){var l=zf(e);return[Lf(l[0],0,n)]}return n==="bool"?[lI(e[0])]:[e[0].toString()]}if(u===1){if(s>fT){var c=_f*o,p=Array.from(e.slice(0,c)),d=Array.from(e.slice((s-_f)*o,s*o));return n==="complex64"&&(p=zf(p),d=zf(d)),["["+p.map(function(N,E){return Lf(N,a[E],n)}).join(", ")+", ..., "+d.map(function(N,E){return Lf(N,a[s-_f+E],n)}).join(", ")+"]"]}var f=n==="complex64"?zf(e):Array.from(e);return["["+f.map(function(N,E){return Lf(N,a[E],n)}).join(", ")+"]"]}var h=t.slice(1),m=r.slice(1),v=r[0]*o,g=[];if(s>fT){for(var y=0;y<_f;y++){var w=y*v,b=w+v;g.push.apply(g,ft([],re(Hm(e.slice(w,b),h,n,m,a,!1)),!1))}g.push("...");for(var y=s-_f;y<s;y++){var w=y*v,b=w+v;g.push.apply(g,ft([],re(Hm(e.slice(w,b),h,n,m,a,y===s-1)),!1))}}else for(var y=0;y<s;y++){var w=y*v,b=w+v;g.push.apply(g,ft([],re(Hm(e.slice(w,b),h,n,m,a,y===s-1)),!1))}var x=u===2?",":"";g[0]="["+(s>0?g[0]+x:"");for(var y=1;y<g.length-1;y++)g[y]=" "+g[y]+x;for(var k=`,
`,y=2;y<u;y++)k+=`
`;return g[g.length-1]=" "+g[g.length-1]+"]"+(i?"":k),g}function zf(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}(function(){function e(t,n,r){var a=this;if(this.dtype=n,this.shape=t.slice(),this.size=ss(t),r!=null){var i=r.length;De(i===this.size,function(){return"Length of values '".concat(i,"' does not match the size ")+"inferred by the shape '".concat(a.size,"'.")})}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Xre(n,this.size),this.strides=I3(t)}return e.prototype.set=function(t){for(var n=this,r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];r.length===0&&(r=[0]),De(r.length===this.rank,function(){return"The number of provided coordinates (".concat(r.length,") must ")+"match the rank (".concat(n.rank,")")});var i=this.locToIndex(r);this.values[i]=t},e.prototype.get=function(){for(var t,n,r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];r.length===0&&(r=[0]);var i=0;try{for(var o=fe(r),s=o.next();!s.done;s=o.next()){var u=s.value;if(u<0||u>=this.shape[i]){var l="Requested out of range element at ".concat(r,". ")+"  Buffer shape=".concat(this.shape);throw new Error(l)}i++}}catch(d){t={error:d}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}for(var c=r[r.length-1],p=0;p<r.length-1;++p)c+=this.strides[p]*r[p];return this.values[c]},e.prototype.locToIndex=function(t){if(this.rank===0)return 0;if(this.rank===1)return t[0];for(var n=t[t.length-1],r=0;r<t.length-1;++r)n+=this.strides[r]*t[r];return n},e.prototype.indexToLoc=function(t){if(this.rank===0)return[];if(this.rank===1)return[t];for(var n=new Array(this.shape.length),r=0;r<n.length-1;++r)n[r]=Math.floor(t/this.strides[r]),t-=n[r]*this.strides[r];return n[n.length-1]=t,n},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!1,configurable:!0}),e.prototype.toTensor=function(){return So().makeTensor(this.values,this.shape,this.dtype)},e})();var So=null,Af=null;function Nae(e){So=e}var ko=function(){function e(t,n,r,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=ss(t),this.strides=I3(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!1,configurable:!0}),e.prototype.buffer=function(){return Oe(this,void 0,void 0,function(){var t;return Fe(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return t=n.sent(),[2,Af.buffer(this.shape,this.dtype,t)]}})})},e.prototype.bufferSync=function(){return Af.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return Oe(this,void 0,void 0,function(){var t;return Fe(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return t=n.sent(),[2,nT(this.shape,t,this.dtype==="complex64")]}})})},e.prototype.arraySync=function(){return nT(this.shape,this.dataSync(),this.dtype==="complex64")},e.prototype.data=function(){return Oe(this,void 0,void 0,function(){var t,n;return Fe(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),t=So().read(this.dataId),this.dtype!=="string"?[3,2]:[4,t];case 1:n=r.sent();try{return[2,n.map(function(a){return dT(a)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,t]}})})},e.prototype.dataToGPU=function(t){return this.throwIfDisposed(),So().readToGPU(this.dataId,t)},e.prototype.dataSync=function(){this.throwIfDisposed();var t=So().readSync(this.dataId);if(this.dtype==="string")try{return t.map(function(n){return dT(n)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t},e.prototype.bytes=function(){return Oe(this,void 0,void 0,function(){var t;return Fe(this,function(n){switch(n.label){case 0:return this.throwIfDisposed(),[4,So().read(this.dataId)];case 1:return t=n.sent(),this.dtype==="string"?[2,t]:[2,new Uint8Array(t.buffer)]}})})},e.prototype.dispose=function(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),So().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!1,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.print=function(t){return t===void 0&&(t=!1),Af.print(this,t)},e.prototype.clone=function(){return this.throwIfDisposed(),Af.clone(this)},e.prototype.toString=function(t){t===void 0&&(t=!1);var n=this.dataSync();return Sae(n,this.shape,this.dtype,t)},e.prototype.cast=function(t){return this.throwIfDisposed(),Af.cast(this,t)},e.prototype.variable=function(t,n,r){return t===void 0&&(t=!0),this.throwIfDisposed(),So().makeVariable(this,t,n,r)},e}();Object.defineProperty(ko,Symbol.hasInstance,{value:function(e){return!!e&&e.data!=null&&e.dataSync!=null&&e.throwIfDisposed!=null}});function cI(){return _3("Tensor",function(){return ko})}cI();var tv=function(e){ue(t,e);function t(n,r,a,i){var o=e.call(this,n.shape,n.dtype,n.dataId,i)||this;return o.trainable=r,o.name=a,o}return t.prototype.assign=function(n){if(n.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(n.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!T3(n.shape,this.shape))throw new Error("shape of the new value (".concat(n.shape,") and ")+"previous value (".concat(this.shape,") must match"));So().disposeTensor(this),this.dataId=n.dataId,So().incRef(this,null)},t.prototype.dispose=function(){So().disposeVariable(this),this.isDisposedInternal=!0},t}(ko);Object.defineProperty(tv,Symbol.hasInstance,{value:function(e){return e instanceof ko&&e.assign!=null&&e.assign instanceof Function}});var hT;(function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"})(hT||(hT={}));var n3;(function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"})(n3||(n3={}));var r3;(function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"})(r3||(r3={}));var a3;(function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"})(a3||(a3={}));var i3;(function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"})(i3||(i3={}));var Tae={float32:a3,int32:n3,bool:r3,complex64:i3};function Eae(e,t){if(e==="string"||t==="string"){if(e==="string"&&t==="string")return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return Tae[e][t]}function pI(e){return e!=null&&typeof e=="object"&&"texture"in e&&e.texture instanceof WebGLTexture}function dI(e){return typeof GPUBuffer<"u"&&e!=null&&typeof e=="object"&&"buffer"in e&&e.buffer instanceof GPUBuffer}function vi(e,t){if(e.dtype===t.dtype)return[e,t];var n=Eae(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function fI(e){var t=[],n=new Set;return hI(e,t,n),t}function hI(e,t,n){if(e!=null){if(e instanceof ko){t.push(e);return}if(Iae(e)){var r=e;for(var a in r){var i=r[a];n.has(i)||(n.add(i),hI(i,t,n))}}}}function Iae(e){return Array.isArray(e)||typeof e=="object"}function zy(e){return e.kernelName!=null}var mT=function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(function(t){return t.name})))}}}return e.prototype.dispose=function(){for(var t in this.registeredVariables)this.registeredVariables[t].dispose()},e}(),R3=function(){function e(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new mT}return e.prototype.ready=function(){return Oe(this,void 0,void 0,function(){var t,n,r,a;return Fe(this,function(i){switch(i.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];t=this.getSortedBackends(),n=0,i.label=1;case 1:return n<t.length?(r=t[n],[4,this.initializeBackend(r).success]):[3,5];case 2:return a=i.sent(),a?[4,this.setBackend(r)]:[3,4];case 3:return i.sent(),[2];case 4:return n++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(e.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var t=this.initializeBackendsAndReturnBest(),n=t.name,r=t.asyncInit;if(r)throw new Error("The highest priority backend '".concat(n,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(n)}return this.backendInstance},enumerable:!1,configurable:!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(t){if(!(t in this.registry))if(t in this.registryFactory){var n=this.initializeBackend(t).asyncInit;if(n)return null}else return null;return this.registry[t]},e.prototype.findBackendFactory=function(t){return t in this.registryFactory?this.registryFactory[t].factory:null},e.prototype.registerBackend=function(t,n,r){return r===void 0&&(r=1),t in this.registryFactory?(pp("".concat(t," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[t]={factory:n,priority:r},!0)},e.prototype.setBackend=function(t){return Oe(this,void 0,void 0,function(){var n,r,a,i,o;return Fe(this,function(s){switch(s.label){case 0:if(this.registryFactory[t]==null)throw new Error("Backend name '".concat(t,"' not found in registry"));return this.backendName=t,this.registry[t]!=null?[3,4]:(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,a=n.asyncInit,a?[4,r]:[3,2]);case 1:return o=s.sent(),[3,3];case 2:o=r,s.label=3;case 3:if(i=o,!i)return[2,!1];s.label=4;case 4:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new gae(this.backendInstance),[2,!0]}})})},e.prototype.setupRegisteredKernels=function(){var t=this,n=oT(this.backendName);n.forEach(function(r){r.setupFunc!=null&&r.setupFunc(t.backendInstance)})},e.prototype.disposeRegisteredKernels=function(t){var n=this,r=oT(t);r.forEach(function(a){a.disposeFunc!=null&&a.disposeFunc(n.registry[t])})},e.prototype.initializeBackend=function(t){var n=this,r=this.registryFactory[t];if(r==null)throw new Error("Cannot initialize backend ".concat(t,", no registration found."));try{var a=r.factory();if(a&&!(a instanceof jre)&&typeof a.then=="function"){var i=++this.pendingBackendInitId,o=a.then(function(s){return i<n.pendingBackendInitId?!1:(n.registry[t]=s,n.pendingBackendInit=null,!0)}).catch(function(s){return i<n.pendingBackendInitId||(n.pendingBackendInit=null,pp("Initialization of backend ".concat(t," failed")),pp(s.stack||s.message)),!1});return this.pendingBackendInit=o,{success:o,asyncInit:!0}}else return this.registry[t]=a,{success:!0,asyncInit:!1}}catch(s){return pp("Initialization of backend ".concat(t," failed")),pp(s.stack||s.message),{success:!1,asyncInit:!1}}},e.prototype.removeBackend=function(t){if(!(t in this.registryFactory))throw new Error("".concat(t," backend not found in registry"));this.backendName===t&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var t=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(n,r){return t.registryFactory[r].priority-t.registryFactory[n].priority})},e.prototype.initializeBackendsAndReturnBest=function(){for(var t=this.getSortedBackends(),n=0;n<t.length;n++){var r=t[n],a=this.initializeBackend(r),i=a.success,o=a.asyncInit;if(o||i)return{name:r,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")},e.prototype.moveData=function(t,n){var r=this.state.tensorInfo.get(n),a=r.backend,i=this.readSync(n),o=a.refCount(n);a.disposeData(n,!0),r.backend=t,t.move(n,i,r.shape,r.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},e.prototype.tidy=function(t,n){var r=this,a=null;if(n==null){if(typeof t!="function")throw new Error("Please provide a function to tidy()");n=t}else{if(typeof t!="string"&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=t}var i;return this.scopedRun(function(){return r.startScope(a)},function(){return r.endScope(i)},function(){return i=n(),i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),i})},e.prototype.scopedRun=function(t,n,r){t();try{var a=r();return n(),a}catch(i){throw n(),i}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(t){var n=ye.runKernel(k3,{x:t}),r={x:t},a=function(o){return{x:function(){var s="float32",u={x:o},l={dtype:s};return ye.runKernel(S3,u,l)}}},i=[];return this.addTapeNode(this.state.activeScope.name,r,[n],a,i,{}),n},e.prototype.runKernel=function(t,n,r){this.backendName==null&&this.backend;var a=aT(t,this.backendName)!=null;if(!a)throw new Error("Kernel '".concat(t,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:t,inputs:n,attrs:r})},e.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},e.prototype.checkKernelForMemLeak=function(t,n,r){var a=this.backend.numDataIds(),i=0;r.forEach(function(u){i+=u.dtype==="complex64"?3:1});var o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=a-n-i-o;if(s>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(s," data ids) after running '").concat(t,"'"))},e.prototype.runKernelFunc=function(t){var n=this,r,a=[],i=this.isTapeOn(),o=this.state.numBytes,s=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var u;this.backendName==null&&this.backend;var l,c=zy(t)?t.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(zy(t)){var p=t.kernelName,d=t.inputs,f=t.attrs;this.backendName==null&&this.backend;var h=aT(p,this.backendName);De(h!=null,function(){return"Cannot find registered kernel '".concat(p,"' for backend '").concat(n.backendName,"'")}),u=function(){var x=n.backend.numDataIds();l=h.kernelFunc({inputs:d,attrs:f,backend:n.backend});var k=Array.isArray(l)?l:[l];n.shouldCheckForMemLeaks()&&n.checkKernelForMemLeak(p,x,k);var N=k.map(function(C){return C.rank!=null?C:n.makeTensorFromTensorInfo(C)});if(i){var E=n.getTensorsForGradient(p,d,N);a=n.saveTensorsForBackwardMode(E)}return N}}else{var m=t.forwardFunc,v=function(x){i&&(a=x.map(function(k){return n.keep(n.clone(k))}))};u=function(){var x=n.backend.numDataIds();l=n.tidy(function(){return m(n.backend,v)});var k=Array.isArray(l)?l:[l];return n.shouldCheckForMemLeaks()&&n.checkKernelForMemLeak(c,x,k),k}}var g=t.inputs,y=t.attrs,w=zy(t)?null:t.backwardsFunc,b;return this.scopedRun(function(){return n.state.kernelDepth++},function(){return n.state.kernelDepth--},function(){!n.ENV.getBool("DEBUG")&&!n.state.profiling?r=u():(b=n.profiler.profileKernel(c,g,function(){return u()}),n.ENV.getBool("DEBUG")&&n.profiler.logKernelProfile(b),r=b.outputs)}),i&&this.addTapeNode(c,g,r,w,a,y),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-o,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-s,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(g).map(function(x){return g[x]!=null?g[x].shape:null}),outputShapes:r.map(function(x){return x.shape}),kernelTimeMs:b.timeMs,extraInfo:b.extraInfo}),Array.isArray(l)?r:r[0]},e.prototype.saveTensorsForBackwardMode=function(t){var n=this,r=t.map(function(a){return n.keep(n.clone(a))});return r},e.prototype.getTensorsForGradient=function(t,n,r){var a=iT(t);if(a!=null){var i=a.inputsToSave||[],o=a.outputsToSave||[],s=void 0;a.saveAllInputs?(De(Array.isArray(n),function(){return"saveAllInputs is true, expected inputs to be an array."}),s=Object.keys(n).map(function(l){return n[l]})):s=i.map(function(l){return n[l]});var u=r.filter(function(l,c){return o[c]});return s.concat(u)}return[]},e.prototype.makeTensor=function(t,n,r,a){if(t==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",a=a||this.backend;var i=t;r==="string"&&E3(t[0])&&(i=t.map(function(c){return vae(c)}));var o=a.write(i,n,r),s=new ko(n,r,o,this.nextTensorId());if(this.trackTensor(s,a),r==="string"){var u=this.state.tensorInfo.get(o),l=Zre(i);this.state.numBytes+=l-u.bytes,u.bytes=l}return s},e.prototype.makeTensorFromDataId=function(t,n,r,a){r=r||"float32";var i={dataId:t,shape:n,dtype:r};return this.makeTensorFromTensorInfo(i,a)},e.prototype.makeTensorFromTensorInfo=function(t,n){var r=t.dataId,a=t.shape,i=t.dtype,o=new ko(a,i,r,this.nextTensorId());return this.trackTensor(o,n),o},e.prototype.makeVariable=function(t,n,r,a){n===void 0&&(n=!0),r=r||this.nextVariableId().toString(),a!=null&&a!==t.dtype&&(t=t.cast(a));var i=new tv(t,n,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error("Variable with name ".concat(i.name," was already registered"));return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i},e.prototype.trackTensor=function(t,n){this.state.numTensors++,t.dtype==="string"&&this.state.numStringTensors++;var r=0;t.dtype!=="complex64"&&t.dtype!=="string"&&(r=t.size*Zy(t.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(t.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(t.dataId,{backend:n||this.backend,dtype:t.dtype,shape:t.shape,bytes:r})),t instanceof tv||this.track(t)},e.prototype.incRef=function(t,n){this.trackTensor(t,n),this.backend.incRef(t.dataId)},e.prototype.removeDataId=function(t,n){this.state.tensorInfo.has(t)&&this.state.tensorInfo.get(t).backend===n&&(this.state.tensorInfo.delete(t),this.state.numDataBuffers--)},e.prototype.disposeTensor=function(t){if(this.state.tensorInfo.has(t.dataId)){var n=this.state.tensorInfo.get(t.dataId);if(this.state.numTensors--,t.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),t.dtype!=="complex64"&&t.dtype!=="string"){var r=t.size*Zy(t.dtype);this.state.numBytes-=r}n.backend.disposeData(t.dataId)&&this.removeDataId(t.dataId,n.backend)}},e.prototype.disposeVariables=function(){for(var t in this.state.registeredVariables){var n=this.state.registeredVariables[t];this.disposeVariable(n)}},e.prototype.disposeVariable=function(t){this.disposeTensor(t),this.state.registeredVariables[t.name]!=null&&delete this.state.registeredVariables[t.name]},e.prototype.memory=function(){var t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,t.reasons==null&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t},e.prototype.profile=function(t){return Oe(this,void 0,void 0,function(){var n,r,a,i,o,s,u,l,c,p,d;return Fe(this,function(f){switch(f.label){case 0:return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],a=this.state.activeProfile,[4,t()];case 1:a.result=f.sent(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,ft([],re(this.state.activeProfile.kernels.map(function(h){return h.totalBytesSnapshot})),!1)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,f.label=2;case 2:f.trys.push([2,8,9,10]),i=fe(this.state.activeProfile.kernels),o=i.next(),f.label=3;case 3:return o.done?[3,7]:(s=o.value,u=s,[4,s.kernelTimeMs]);case 4:return u.kernelTimeMs=f.sent(),l=s,[4,s.extraInfo];case 5:l.extraInfo=f.sent(),f.label=6;case 6:return o=i.next(),[3,3];case 7:return[3,10];case 8:return c=f.sent(),p={error:c},[3,10];case 9:try{o&&!o.done&&(d=i.return)&&d.call(i)}finally{if(p)throw p.error}return[7];case 10:return[2,this.state.activeProfile]}})})},e.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},e.prototype.addTapeNode=function(t,n,r,a,i,o){var s=this,u={id:this.state.nextTapeNodeId++,kernelName:t,inputs:n,outputs:r,saved:i},l=iT(t);l!=null&&(a=l.gradFunc),a!=null&&(u.gradient=function(c){return c=c.map(function(p,d){if(p==null){var f=r[d],h=C3(f.size,f.dtype);return s.makeTensor(h,f.shape,f.dtype)}return p}),a(c.length>1?c:c[0],i,o)}),this.state.activeTape.push(u)},e.prototype.keep=function(t){return t.kept=!0,t},e.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(t){var n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(n.name=t),this.state.scopeStack.push(n),this.state.activeScope=n},e.prototype.endScope=function(t){for(var n=this,r=fI(t),a=new Set(r.map(function(u){return u.id})),i=0;i<this.state.activeScope.track.length;i++){var o=this.state.activeScope.track[i];!o.kept&&!a.has(o.id)&&o.dispose()}var s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(function(u){!u.kept&&u.scopeId===s.id&&n.track(u)})},e.prototype.gradients=function(t,n,r,a){var i=this;if(a===void 0&&(a=!1),De(n.length>0,function(){return"gradients() received an empty list of xs."}),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '".concat(r.dtype,"'"));var o=this.scopedRun(function(){return i.startTape()},function(){return i.endTape()},function(){return i.tidy("forward",t)});De(o instanceof ko,function(){return"The result y returned by f() must be a tensor."});var s=wae(this.state.activeTape,n,o);if(!a&&s.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var u={};u[o.id]=r??Cae(o.shape),xae(u,s,function(c){return i.tidy(c)},_ae);var l=n.map(function(c){return u[c.id]});return i.state.gradientDepth===0&&(i.state.activeTape.forEach(function(c){var p,d;try{for(var f=fe(c.saved),h=f.next();!h.done;h=f.next()){var m=h.value;m.dispose()}}catch(v){p={error:v}}finally{try{h&&!h.done&&(d=f.return)&&d.call(f)}finally{if(p)throw p.error}}}),i.state.activeTape=null),{value:o,grads:l}})},e.prototype.customGrad=function(t){var n=this;return De(Qy(t),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];De(r.every(function(l){return l instanceof ko}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var i,o={};r.forEach(function(l,c){o[c]=l});var s=function(l,c){return i=t.apply(void 0,ft([],re(ft(ft([],re(r),!1),[c],!1)),!1)),De(i.value instanceof ko,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),De(Qy(i.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),i.value},u=function(l,c){var p=i.gradFunc(l,c),d=Array.isArray(p)?p:[p];De(d.length===r.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),De(d.every(function(h){return h instanceof ko}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var f={};return d.forEach(function(h,m){f[m]=function(){return h}}),f};return n.runKernelFunc({forwardFunc:s,backwardsFunc:u,inputs:o})}},e.prototype.readSync=function(t){var n=this.state.tensorInfo.get(t);return n.backend.readSync(t)},e.prototype.read=function(t){var n=this.state.tensorInfo.get(t);return n.backend.read(t)},e.prototype.readToGPU=function(t,n){var r=this.state.tensorInfo.get(t);return r.backend.readToGPU(t,n)},e.prototype.time=function(t){return Oe(this,void 0,void 0,function(){var n,r;return Fe(this,function(a){switch(a.label){case 0:return n=ev(),[4,this.backend.time(t)];case 1:return r=a.sent(),r.wallMs=ev()-n,[2,r]}})})},e.prototype.track=function(t){return this.state.activeScope!=null&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t},Object.defineProperty(e.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new mT;for(var t in this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e}();R3.nextTensorId=0;R3.nextVariableId=0;function Cae(e){var t=ZE(ss(e),"float32");return ye.makeTensor(t,e,"float32")}function Dae(){var e=eI();if(e._tfengine==null){var t=new tae(e);e._tfengine=new R3(t)}return iae(e._tfengine.ENV),Nae(function(){return e._tfengine}),e._tfengine}var ye=Dae();function _ae(e,t){var n={a:e,b:t};return ye.runKernel(x3,n)}function Aae(e,t){var n=e;if(Ki(e))return t==="string"?[]:[e.length];if(pI(e)){var r=e.channels||"RGBA";return[e.height,e.width*r.length]}else if(dI(e))return[e.buffer.size/(t==null?4:Zy(t))];if(!Array.isArray(e))return[];for(var a=[];Array.isArray(n)||Ki(n)&&t!=="string";)a.push(n.length),n=n[0];return Array.isArray(e)&&Mn().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&mI(e,a,[]),a}function mI(e,t,n){if(n=n||[],!Array.isArray(e)&&!Ki(e)){De(t.length===0,function(){return"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements")});return}De(t.length>0,function(){return"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements")}),De(e.length===t[0],function(){return"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements")});for(var r=t.slice(1),a=0;a<e.length;++a)mI(e[a],r,n.concat(a))}function vT(e,t,n,r){if(e!=="string_or_numeric"){if(e==null)throw new Error("Expected dtype cannot be null.");if(e!=="numeric"&&e!==t||e==="numeric"&&t==="string")throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function Re(e,t,n,r){if(r===void 0&&(r="numeric"),e instanceof cI())return vT(r,e.dtype,t,n),e;var a=Sv(e);if(a!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),vT(r,a,t,n),e==null||!Ki(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string"){var i=e==null?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(i,"'"))}var o=Aae(e,a);!Ki(e)&&!Array.isArray(e)&&(e=[e]);var s=!0,u=a!=="string"?uI(e,a):Wf(e,[],s);return ye.makeTensor(u,o,a)}function vI(e,t,n,r){if(r===void 0&&(r="numeric"),!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");var a=e;return a.map(function(i,o){return Re(i,"".concat(t,"[").concat(o,"]"),n,r)})}var Fae="__op";function at(e){var t=Object.keys(e);if(t.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+Fae;var a=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];ye.startScope(n);try{var s=r.apply(void 0,ft([],re(i),!1));return D3(s)&&console.error("Cannot return a Promise inside of tidy."),ye.endScope(s),s}catch(u){throw ye.endScope(null),u}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}function Rae(e,t){var n=Re(e,"x","cast");if(!Jre(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if(t==="string"&&n.dtype!=="string"||t!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");var r={x:n},a={dtype:t};return ye.runKernel(S3,r,a)}var Lt=at({cast_:Rae});function Oae(e,t){var n,r=Re(e,"a","mul"),a=Re(t,"b","mul");n=re(vi(r,a),2),r=n[0],a=n[1];var i={a:r,b:a};return ye.runKernel(DE,i)}var Se=at({mul_:Oae});function Mae(e,t){t===void 0&&(t=0);var n=Re(e,"x","step"),r={x:n},a={alpha:t};return ye.runKernel(YE,r,a)}var O3=at({step_:Mae}),gI={kernelName:cE,inputsToSave:["x"],gradFunc:function(e,t){var n=re(t,1),r=n[0];return{x:function(){return Se(e,O3(Lt(r,"float32"),-1))}}}};function Pae(e,t){var n,r=Re(e,"a","floorDiv"),a=Re(t,"b","floorDiv");n=re(vi(r,a),2),r=n[0],a=n[1];var i={a:r,b:a};return ye.runKernel(NE,i)}var Bae=at({floorDiv_:Pae});function Lae(e,t){var n,r=Re(e,"a","div"),a=Re(t,"b","div");if(n=re(vi(r,a),2),r=n[0],a=n[1],r.dtype==="int32"&&a.dtype==="int32")return Bae(r,a);var i={a:r,b:a},o={};return ye.runKernel(wE,i,o)}var Jt=at({div_:Lae});function zae(e){var t=Re(e,"x","neg"),n={x:t};return ye.runKernel(_E,n)}var Yi=at({neg_:zae});function $ae(e,t,n,r){if(r==null)r=Sv(e);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(dI(e)||pI(e)){if(r!=="float32"&&r!=="int32")throw new Error("Creating tensor from GPU data only supports "+"'float32'|'int32' dtype, while the dtype is ".concat(r,"."));return ye.backend.createTensorFromGPUData(e,t||n,r)}if(!Ki(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){Jf(t);var a=ss(t),i=ss(n);De(a===i,function(){return"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(a," values but has ").concat(i)});for(var o=0;o<n.length;++o){var s=n[o],u=o===n.length-1?s!==ss(t.slice(o)):!0;De(n[o]===t[o]||!u,function(){return"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). ")})}}return!Ki(e)&&!Array.isArray(e)&&(e=[e]),t=t||n,e=r!=="string"?uI(e,r):Wf(e,[],!0),ye.makeTensor(e,t,r)}function Zn(e,t){if((Ki(e)&&t!=="string"||Array.isArray(e))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&Ki(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");var n=[],r=[];return $ae(e,n,r,t)}function Vae(e){var t=Re(e,"x","sqrt","float32"),n={x:t};return ye.runKernel(WE,n)}var Do=at({sqrt_:Vae});function Wae(e){var t=Re(e,"x","square"),n={};return ye.runKernel("Square",{x:t},n)}var Qn=at({square_:Wae});function Uae(e,t){var n,r=Re(e,"a","sub"),a=Re(t,"b","sub");n=re(vi(r,a),2),r=n[0],a=n[1];var i={a:r,b:a};return ye.runKernel(HE,i)}var Gr=at({sub_:Uae}),Gae={kernelName:gne,inputsToSave:["x"],gradFunc:function(e,t){var n=re(t,1),r=n[0];return{x:function(){var a=Qn(Lt(r,"float32")),i=Do(Gr(Zn(1),a));return Yi(Jt(e,i))}}}},qae={kernelName:yne,inputsToSave:["x"],gradFunc:function(e,t){var n=re(t,1),r=n[0];return{x:function(){var a=Do(Gr(Qn(Lt(r,"float32")),1));return Jt(e,a)}}}};function qr(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],i=t.length-r-1,o=t[i];(a==null||a===1&&o>1)&&n.unshift(i)}return n}function ta(e,t){for(var n=Math.max(e.length,t.length),r=new Array(n),a=0;a<n;a++){var i=e[e.length-a-1];i==null&&(i=1);var o=t[t.length-a-1];if(o==null&&(o=1),i===1)r[n-a-1]=o;else if(o===1)r[n-a-1]=i;else if(i!==o){var s="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(s)}else r[n-a-1]=i}return r}function Hae(e,t){var n=Re(e,"x","reshape","string_or_numeric"),r={x:n},a={shape:t};return ye.runKernel(OE,r,a)}var ht=at({reshape_:Hae});function jae(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=Re(e,"x","sum");r.dtype==="bool"&&(r=Lt(r,"int32"));var a={x:r},i={axis:t,keepDims:n};return ye.runKernel(UE,a,i)}var Hn=at({sum_:jae}),Kae={kernelName:x3,inputsToSave:["a","b"],gradFunc:function(e,t){var n=re(t,2),r=n[0],a=n[1],i=ta(r.shape,a.shape),o=function(){var u=e,l=qr(r.shape,i);return l.length>0&&(u=Hn(u,l)),ht(u,r.shape)},s=function(){var u=e,l=qr(a.shape,i);return l.length>0&&(u=Hn(u,l)),ht(u,a.shape)};return{a:o,b:s}}};var Xae={kernelName:bne,saveAllInputs:!0,gradFunc:function(e,t){var n={};return t.forEach(function(r,a){n[a]=function(){return e.clone()}}),n}};function Yae(e){var t=Re(e,"x","zerosLike"),n={x:t};return ye.runKernel(XE,n)}var Ht=at({zerosLike_:Yae}),Jae={kernelName:wne,inputsToSave:["x"],gradFunc:function(e,t){var n=re(t,1),r=n[0];return{x:function(){return Ht(r)}}}},Zae={kernelName:xne,inputsToSave:["x"],gradFunc:function(e,t){var n=re(t,1),r=n[0];return{x:function(){return Ht(r)}}}},Qae={kernelName:Sne,inputsToSave:["x"],gradFunc:function(e,t){var n=re(t,1),r=n[0];return{x:function(){return Jt(e,Do(Gr(Zn(1),Qn(Lt(r,"float32")))))}}}};function eie(e,t){var n,r=Re(e,"a","add"),a=Re(t,"b","add");n=re(vi(r,a),2),r=n[0],a=n[1];var i={a:r,b:a};return ye.runKernel(x3,i)}var Pt=at({add_:eie}),tie={kernelName:kne,inputsToSave:["x"],gradFunc:function(e,t){var n=re(t,1),r=n[0];return{x:function(){var a=Do(Pt(Zn(1),Qn(Lt(r,"float32"))));return Jt(e,a)}}}},nie={kernelName:Ene,inputsToSave:["a","b"],gradFunc:function(e,t){var n=re(t,2),r=n[0],a=n[1],i=ta(r.shape,a.shape),o=function(){var u=Pt(Qn(r),Qn(a)),l=Se(e,Jt(a,u)),c=qr(r.shape,i);return c.length>0&&(l=Hn(l,c)),ht(l,r.shape)},s=function(){var u=Pt(Qn(r),Qn(a)),l=Yi(Se(e,Jt(r,u))),c=qr(a.shape,i);return c.length>0&&(l=Hn(l,c)),ht(l,a.shape)};return{a:o,b:s}}},rie={kernelName:Nne,inputsToSave:["x"],gradFunc:function(e,t){var n=re(t,1),r=n[0];return{x:function(){return Jt(e,Pt(Qn(Lt(r,"float32")),1))}}}},aie={kernelName:Tne,inputsToSave:["x"],gradFunc:function(e,t){var n=re(t,1),r=n[0];return{x:function(){return Jt(e,Gr(Zn(1),Qn(Lt(r,"float32"))))}}}};function yI(e){return typeof e=="number"?[e,e,e]:e.length===2?[e[0],e[1],1]:e}function Uf(e){var t=re(yI(e),3),n=t[0],r=t[1],a=t[2];return n===1&&r===1&&a===1}function bI(e,t){return Uf(e)||Uf(t)}function gT(e){return yI(e).every(function(t){return t>0})}function $l(e,t,n){if(n!=null){if(typeof t=="string")throw Error("Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."));if(typeof t=="number")De(Zm(t),function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")});else if(typeof t=="object")t.forEach(function(r){r.forEach(function(a){De(Zm(a),function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(a,".")})})});else throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t))}}function iie(e,t,n,r,a,i){var o=Re(e,"dy","avgPool3dGrad"),s=Re(t,"input","avgPool3dGrad"),u=o,l=s,c=!1;s.rank===4&&(c=!0,u=ht(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),l=ht(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),De(u.rank===5,function(){return"Error in avgPool3dGrad: dy must be rank 5 but got rank "+"".concat(u.rank,".")}),De(l.rank===5,function(){return"Error in avgPool3dGrad: input must be rank 5 but got rank "+"".concat(l.rank,".")}),$l("avgPool3dGrad",a,i);var p={dy:u,input:l},d={filterSize:n,strides:r,pad:a,dimRoundingMode:i},f=ye.runKernel(_ne,p,d);return c?ht(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}var oie=at({avgPool3dGrad_:iie}),sie={kernelName:Dne,inputsToSave:["x"],gradFunc:function(e,t,n){var r=re(t,1),a=r[0],i=n.filterSize,o=n.strides,s=n.pad,u=n.dimRoundingMode;return{x:function(){return oie(e,a,i,o,s,u)}}}};function uie(e,t,n,r,a){var i=Re(e,"dy","avgPoolGrad"),o=Re(t,"input","avgPoolGrad");De(o.rank===i.rank,function(){return"Rank of input (".concat(o.rank,") does not match rank of dy (").concat(i.rank,")")});var s=o,u=i,l=!1;o.rank===3&&(l=!0,s=ht(o,[1,o.shape[0],o.shape[1],o.shape[2]]),u=ht(i,[1,i.shape[0],i.shape[1],i.shape[2]])),De(u.rank===4,function(){return"Error in avgPoolGrad: dy must be rank 4 but got rank "+"".concat(u.rank,".")}),De(s.rank===4,function(){return"Error in avgPoolGrad: input must be rank 4 but got rank "+"".concat(s.rank,".")});var c={dy:u,input:s},p={filterSize:n,strides:r,pad:a},d=ye.runKernel(Cne,c,p);return l?ht(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var lie=at({avgPoolGrad_:uie}),cie={kernelName:Ine,inputsToSave:["x"],gradFunc:function(e,t,n){var r=re(t,1),a=r[0],i=n.filterSize,o=n.strides,s=n.pad;return{x:function(){return lie(e,a,i,o,s)}}}};function pie(e,t,n,r){var a;n===void 0&&(n=!1),r===void 0&&(r=!1);var i=Re(e,"a","matMul"),o=Re(t,"b","matMul");a=re(vi(i,o),2),i=a[0],o=a[1];var s={a:i,b:o},u={transposeA:n,transposeB:r};return ye.runKernel(pE,s,u)}var Eu=at({matMul_:pie}),die={kernelName:pE,inputsToSave:["a","b"],gradFunc:function(e,t,n){var r=re(t,2),a=r[0],i=r[1],o=n.transposeA,s=n.transposeB;return!o&&!s?{a:function(){return Eu(e,i,!1,!0)},b:function(){return Eu(a,e,!0,!1)}}:!o&&s?{a:function(){return Eu(e,i,!1,!1)},b:function(){return Eu(e,a,!0,!1)}}:o&&!s?{a:function(){return Eu(i,e,!1,!0)},b:function(){return Eu(a,e,!1,!1)}}:{a:function(){return Eu(i,e,!0,!0)},b:function(){return Eu(e,a,!0,!0)}}}};function fie(e,t,n){var r=Re(e,"x","spaceToBatchND");De(r.rank>=1+t.length,function(){return"input rank ".concat(r.rank," should be > than [blockShape] ").concat(t.length)}),De(n.length===t.length,function(){return"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)}),De(r.shape.reduce(function(o,s,u){return u>0&&u<=t.length?o&&(s+n[u-1][0]+n[u-1][1])%t[u-1]===0:o},!0),function(){return"input spatial dimensions ".concat(r.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())});var a={x:r},i={blockShape:t,paddings:n};return ye.runKernel(GE,a,i)}var hie=at({spaceToBatchND_:fie});var mie={kernelName:dE,gradFunc:function(e,t,n){var r=n.blockShape,a=n.crops;return{x:function(){return hie(e,r,a)}}}};var vie={kernelName:Ane,gradFunc:function(e,t,n){for(var r=n,a=r.inputShape,i=r.shape,o=Array.from(i),s=a.length-1;s>=0;s--)if(a[s]===i[s])o[s]=1;else if(a[s]!==1)throw new Error("broadcastTo(): [".concat(a,"] cannot be broadcast to [").concat(i,"]."));for(var u=[],s=0;s<o.length;s++)o[s]>1&&u.push(s);return{x:function(){return Hn(e,u,!0)}}}};var gie={kernelName:S3,gradFunc:function(e){return{x:function(){return e.clone()}}}};var yie={kernelName:Fne,gradFunc:function(e){return{x:function(){return Ht(e)}}}};function bie(e,t){var n,r=Re(e,"a","greaterEqual","string_or_numeric"),a=Re(t,"b","greaterEqual","string_or_numeric");n=re(vi(r,a),2),r=n[0],a=n[1],ta(r.shape,a.shape);var i={a:r,b:a};return ye.runKernel(EE,i)}var M3=at({greaterEqual_:bie});function wie(e,t){var n,r=Re(e,"a","lessEqual","string_or_numeric"),a=Re(t,"b","lessEqual","string_or_numeric");n=re(vi(r,a),2),r=n[0],a=n[1],ta(r.shape,a.shape);var i={a:r,b:a};return ye.runKernel(ore,i)}var P3=at({lessEqual_:wie});function xie(e,t){var n=Re(e,"a","logicalAnd","bool"),r=Re(t,"b","logicalAnd","bool");ta(n.shape,r.shape);var a={a:n,b:r};return ye.runKernel(ure,a)}var wI=at({logicalAnd_:xie});function Sie(e){var t=Re(e,"x","clone","string_or_numeric"),n={x:t};return ye.runKernel(k3,n)}var xI=at({clone_:Sie});function kie(e,t){var n=Re(e,"broadcastTo","x"),r=n.shape;if(Jf(t),t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){for(var a=n.shape.slice();a.length<t.length;)a.unshift(1);n=ht(n,a)}for(var i=n.shape,o=Array.from(t),s=t.length-1;s>=0;s--)if(i[s]===t[s])o[s]=1;else if(n.shape[s]!==1)throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(t,"]."));var u=o.map(function(p,d){return p>1?d:-1}).filter(function(p){return p>=0});if(u.length===0)return xI(n);var l={x:n},c={reps:o};return ye.runKernel(N3,l,c)}var $y=at({broadcastTo_:kie});function Nie(e,t,n){var r=Re(t,"a","where"),a=Re(n,"b","where"),i=Re(e,"condition","where","bool"),o=ta(ta(i.shape,r.shape),a.shape),s=$y(i,o),u=$y(r,o),l=$y(a,o),c={condition:s,t:u,e:l};return ye.runKernel(BE,c)}var Ml=at({where_:Nie}),Tie={kernelName:Rne,inputsToSave:["x"],gradFunc:function(e,t,n){var r=re(t,1),a=r[0],i=n.clipValueMin,o=n.clipValueMax;return{x:function(){return Ml(wI(M3(a,i),P3(a,o)),e,Ht(e))}}}};var Eie={kernelName:fE,inputsToSave:["x"],gradFunc:gI.gradFunc};function Iie(e,t,n){n===void 0&&(n=0);var r=Re(e,"x","split"),a={x:r},i={numOrSizeSplits:t,axis:n};return ye.runKernel(qE,a,i)}var Cie=at({split_:Iie});var Die={kernelName:hE,saveAllInputs:!0,gradFunc:function(e,t,n){var r=t.map(function(u){return u.shape}),a=n.axis,i=Bl(a,t[0].shape)[0],o=r.map(function(u){return u[i]}),s=Cie(e,o,i);return s.map(function(u){return function(){return u}})}};function _ie(e,t,n,r,a,i,o){i===void 0&&(i="NHWC");var s=e;e.rank===3&&(s=ht(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;u.rank===3&&(u=ht(t,[1,t.shape[0],t.shape[1],t.shape[2]])),De(s.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(s.shape,".")}),De(u.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(u.shape,".")}),De(n.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,".")});var l=i==="NHWC"?s.shape[3]:s.shape[1],c=i==="NHWC"?u.shape[3]:u.shape[1];De(l===n[2],function(){return"Error in conv2dDerFilter: depth of input ".concat(l,") must ")+"match input depth in filter (".concat(n[2],".")}),De(c===n[3],function(){return"Error in conv2dDerFilter: depth of dy (".concat(c,") must ")+"match output depth for filter (".concat(n[3],").")}),$l("conv2dDerFilter",a,o);var p={x:s,dy:u},d={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,filterShape:n};return ye.runKernel(Mne,p,d)}var SI=at({conv2DBackpropFilter_:_ie});function Aie(e,t,n,r,a,i,o){i===void 0&&(i="NHWC"),De(e.length===t.rank,function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")});var s=e,u=t,l=!1;t.rank===3&&(l=!0,u=ht(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),De(s.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(s.length,".")}),De(u.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(u.rank)}),De(n.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank)});var c=i==="NHWC"?s[3]:s[1],p=i==="NHWC"?u.shape[3]:u.shape[1];De(c===n.shape[2],function(){return"Error in conv2dDerInput: depth of input (".concat(c,") must ")+"match input depth for filter ".concat(n.shape[2],".")}),De(p===n.shape[3],function(){return"Error in conv2dDerInput: depth of output (".concat(p,") must ")+"match output depth for filter ".concat(n.shape[3],".")}),$l("conv2dDerInput",a,o);var d={dy:u,filter:n},f={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,inputShape:s},h=ye.runKernel(vE,d,f);return l?ht(h,[h.shape[1],h.shape[2],h.shape[3]]):h}var Fie=at({conv2DBackpropInput_:Aie}),Rie={kernelName:mE,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=re(t,2),a=r[0],i=r[1],o=n.dilations,s=n.strides,u=n.pad,l=n.dataFormat;return De(Uf(o),function(){return"Error in gradient of conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(o,"'")}),{x:function(){return Fie(a.shape,e,i,s,u,l)},filter:function(){return SI(a,e,i.shape,s,u,l)}}}};function Oie(e,t,n,r,a,i,o){a===void 0&&(a="NHWC"),i===void 0&&(i=[1,1]);var s=Re(e,"x","conv2d","float32"),u=Re(t,"filter","conv2d","float32"),l=s,c=!1;s.rank===3&&(c=!0,l=ht(s,[1,s.shape[0],s.shape[1],s.shape[2]])),De(l.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank ".concat(l.rank,".")}),De(u.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+"".concat(u.rank,".")}),$l("conv2d",r,o);var p=a==="NHWC"?l.shape[3]:l.shape[1];De(p===u.shape[2],function(){return"Error in conv2d: depth of input (".concat(p,") must match ")+"input depth for filter ".concat(u.shape[2],".")}),De(bI(n,i),function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")}),De(gT(i),function(){return"Error in conv2D: Dilated rates should be larger than 0."}),De(gT(n),function(){return"Error in conv2D: Strides should be larger than 0."});var d={x:l,filter:u},f={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},h=ye.runKernel(mE,d,f);return c?ht(h,[h.shape[1],h.shape[2],h.shape[3]]):h}var Mie=at({conv2d_:Oie}),Pie={kernelName:vE,inputsToSave:["dy","filter"],gradFunc:function(e,t,n){var r=re(t,2),a=r[0],i=r[1],o=n.strides,s=n.pad,u=n.dataFormat,l=n.dimRoundingMode;return{dy:function(){return Mie(e,i,o,s,u,1,l)},filter:function(){return SI(e,a,i.shape,o,s,u,l)}}}};function Bie(e,t,n,r,a){var i=e;e.rank===4&&(i=ht(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));var o=t;o.rank===4&&(o=ht(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),De(i.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+"".concat(i.shape,".")}),De(o.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+"".concat(o.shape,".")}),De(n.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+"".concat(n,".")}),De(i.shape[4]===n[3],function(){return"Error in conv3dDerFilter: depth of input ".concat(i.shape[4],") must ")+"match input depth in filter (".concat(n[3],".")}),De(o.shape[4]===n[4],function(){return"Error in conv3dDerFilter: depth of dy (".concat(o.shape[4],") must ")+"match output depth for filter (".concat(n[4],").")});var s={x:i,dy:o},u={strides:r,pad:a,filterShape:n};return ye.runKernel(Bne,s,u)}var Lie=at({conv3DBackpropFilter_:Bie});function zie(e,t,n,r,a){De(e.length===t.rank,function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")});var i=e,o=t,s=!1;t.rank===4&&(s=!0,o=ht(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),i=[1,e[0],e[1],e[2],e[3]]);var u=i[4],l=o.shape[4];De(i.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(i.length,".")}),De(o.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(o.rank)}),De(n.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank)}),De(u===n.shape[3],function(){return"Error in conv3dDerInput: depth of input (".concat(u,") must ")+"match input depth for filter ".concat(n.shape[3],".")}),De(l===n.shape[4],function(){return"Error in conv3dDerInput: depth of output (".concat(l,") must ")+"match output depth for filter ".concat(n.shape[4],".")});var c={dy:o,filter:n},p={pad:a,strides:r,inputShape:i},d=ye.runKernel(Lne,c,p);return s?ht(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}var $ie=at({conv3DBackpropInput_:zie}),Vie={kernelName:Pne,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,i=n.pad;De(Uf(r),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are "+"not yet supported in gradients. Got dilations '".concat(r,"'")});var o=re(t,2),s=o[0],u=o[1];return{x:function(){return $ie(s.shape,e,u,a,i)},filter:function(){return Lie(s,e,u.shape,a,i)}}}};function Wie(e){var t=Re(e,"x","sin","float32"),n={x:t};return ye.runKernel(zE,n)}var Uie=at({sin_:Wie}),Gie={kernelName:gE,inputsToSave:["x"],gradFunc:function(e,t){var n=re(t,1),r=n[0];return{x:function(){return Se(Yi(Uie(Lt(r,"float32"))),e)}}}};function qie(e){var t=Re(e,"x","sinh"),n={x:t};return ye.runKernel($E,n)}var Hie=at({sinh_:qie}),jie={kernelName:yE,inputsToSave:["x"],gradFunc:function(e,t){var n=re(t,1),r=n[0];return{x:function(){return Se(Hie(Lt(r,"float32")),e)}}}};function Kie(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function Xie(e,t,n){for(var r=e.length+t.length,a=[],i=0,o=0,s=0;s<r;s++)n.indexOf(s)===-1?a.push(e[i++]):a.push(t[o++]);return a}function Yie(e,t){for(var n=[],r=e.length,a=0;a<r;a++)t.indexOf(a)===-1&&n.push(e[a]);var i=t.map(function(o){return e[o]});return[n,i]}function yT(e,t){var n=t.map(function(r){return 1});return Xie(e,n,t)}function kI(e,t){if(Kie(e,t))return null;for(var n=[],r=0;r<t;++r)e.indexOf(r)===-1&&n.push(r);return e.forEach(function(a){return n.push(a)}),n}function B3(e){return e.map(function(t,n){return[n,t]}).sort(function(t,n){return t[1]-n[1]}).map(function(t){return t[0]})}function Jie(e,t,n,r){t===void 0&&(t=0),n===void 0&&(n=!1),r===void 0&&(r=!1);var a=Re(e,"x","cumsum"),i={x:a},o={axis:t,exclusive:n,reverse:r};return ye.runKernel(bE,i,o)}var Zie=at({cumsum_:Jie});function xr(e,t){return ye.tidy(e,t)}function hi(e){var t=fI(e);t.forEach(function(n){return n.dispose()})}function Qie(e){return ye.keep(e)}function eoe(e,t){var n=Re(e,"real","complex"),r=Re(t,"imag","complex");Kre(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", ")+"must match in call to tf.complex().");var a={real:n,imag:r};return ye.runKernel(One,a)}var L3=at({complex_:eoe});function toe(e){var t=Re(e,"input","imag"),n={input:t};return ye.runKernel(ere,n)}var noe=at({imag_:toe});function roe(e){var t=Re(e,"input","real"),n={input:t};return ye.runKernel(Ire,n)}var aoe=at({real_:roe});function ioe(e,t,n){var r=Re(e,"x","transpose");if(t==null&&(t=r.shape.map(function(o,s){return s}).reverse()),De(r.rank===t.length,function(){return"Error in transpose: rank of input ".concat(r.rank," ")+"must match length of perm ".concat(t,".")}),t.forEach(function(o){De(o>=0&&o<r.rank,function(){return"All entries in 'perm' must be between 0 and ".concat(r.rank-1)+" but got ".concat(t)})}),r.rank<=1)return r.clone();var a={x:r},i={perm:t};return r.dtype==="complex64"?xr(function(){var o=aoe(r),s=noe(r);return o=ye.runKernel(Gm,{x:o},i),s=ye.runKernel(Gm,{x:s},i),n&&(s=Yi(s)),L3(o,s)}):ye.runKernel(Gm,a,i)}var yp=at({transpose_:ioe}),ooe={kernelName:bE,inputsToSave:["x"],gradFunc:function(e,t,n){var r=re(t,1),a=r[0],i=n.axis,o=n.exclusive,s=n.reverse;return{x:function(){var u=kI([i],a.rank),l=Zie(e,i,o,!s);return u!=null&&(l=yp(l,u)),l}}}};function soe(e,t,n,r,a,i,o){i===void 0&&(i=[1,1]);var s=e;e.rank===3&&(s=ht(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;u.rank===3&&(u=ht(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var l={x:s,dy:u},c={strides:r,pad:a,dimRoundingMode:o,dilations:i,filterShape:n};return ye.runKernel(Vne,l,c)}var uoe=at({depthwiseConv2dNativeBackpropFilter_:soe});function loe(e,t,n,r,a,i,o){i===void 0&&(i=[1,1]);var s=t,u=!1;t.rank===3&&(u=!0,s=ht(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var l={dy:s,filter:n},c={strides:r,pad:a,dimRoundingMode:o,dilations:i,inputShape:e},p=ye.runKernel(Wne,l,c);return u?ht(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var coe=at({depthwiseConv2dNativeBackpropInput_:loe}),poe={kernelName:$ne,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,i=n.pad,o=n.dimRoundingMode,s=r??[1,1];De(Uf(s),function(){return"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(s,"'")});var u=re(t,2),l=u[0],c=u[1];return De(l.rank===4,function(){return"Error in gradient of depthwiseConv2dNative: input must be "+"rank 4, but got rank ".concat(l.rank,".")}),De(c.rank===4,function(){return"Error in gradient of depthwiseConv2dNative: filter must be "+"rank 4, but got rank ".concat(c.rank,".")}),De(l.shape[3]===c.shape[2],function(){return"Error in gradient of depthwiseConv2d: number of input "+"channels (".concat(l.shape[3],") must match the inChannels dimension ")+"in filter ".concat(c.shape[2],".")}),De(bI(a,s),function(){return"Error in gradient of depthwiseConv2d: Either strides or "+"dilations must be  1. Got strides ".concat(a," and dilations ")+"'".concat(s,"'.")}),$l("depthwiseConv2d",i,o),{x:function(){return coe(l.shape,e,c,a,i,s,o)},filter:function(){return uoe(l,e,c.shape,a,i,s,o)}}}},doe={kernelName:Une,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=re(t,2),a=r[0],i=r[1],o={x:a,filter:i,dy:e},s={x:a,filter:i,dy:e};return{x:function(){return ye.runKernel(Gne,o,n)},filter:function(){return ye.runKernel(qne,s,n)}}}},foe={kernelName:Hne,outputsToSave:[!0],gradFunc:function(e,t){var n=re(t,1),r=n[0],a={dy:e,y:r};return{x:function(){return ye.runKernel(jne,a)}}}};function hoe(e){var t=Re(e,"x","exp"),n={x:t};return ye.runKernel(xE,n)}var kv=at({exp_:hoe}),moe={kernelName:Kne,inputsToSave:["x"],gradFunc:function(e,t){var n=re(t,1),r=n[0],a=Se(kv(Yi(Qn(r))),2/Math.sqrt(Math.PI));return{x:function(){return Se(e,a)}}}},voe={kernelName:xE,outputsToSave:[!0],gradFunc:function(e,t){var n=re(t,1),r=n[0];return{x:function(){return Se(e,r)}}}},goe={kernelName:SE,inputsToSave:["input"],gradFunc:function(e,t){var n=re(t,1),r=n[0];return{input:function(){return ht(e,r.shape)}}}},yoe={kernelName:Yne,inputsToSave:["x"],gradFunc:function(e,t){var n=re(t,1),r=n[0];return{x:function(){return Se(e,kv(r))}}}};var boe={kernelName:kE,gradFunc:function(e){return{x:function(){return Ht(e)}}}},woe={kernelName:NE,inputsToSave:["a","b"],gradFunc:function(e,t){var n=re(t,2),r=n[0],a=n[1],i=ta(r.shape,a.shape),o=function(){var u=Jt(e,Lt(a,"float32")),l=qr(r.shape,i);return l.length>0?ht(Hn(u,l),r.shape):u},s=function(){var u=Se(e,Lt(r,"float32")),l=qr(a.shape,i);l.length>0&&(u=ht(Hn(u,l),a.shape));var c=Qn(a);return Yi(Jt(u,Lt(c,"float32")))};return{a:o,b:s}}};function xoe(e){var t=Re(e,"x","rsqrt","float32"),n={x:t};return ye.runKernel(PE,n)}var Soe=at({rsqrt_:xoe});function koe(e,t){var n=Re(e,"x","tile","string_or_numeric");De(n.rank===t.length,function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,".")});var r={x:n},a={reps:t};return ye.runKernel(N3,r,a)}var Noe=at({tile_:koe}),Toe={kernelName:Zne,inputsToSave:["x","mean","variance","scale"],gradFunc:function(e,t,n){var r=n.varianceEpsilon,a=re(t,4),i=a[0],o=a[1],s=a[2],u=a[3],l=u??Zn(1),c=qr(o.shape,i.shape),p=[];if(o.rank===1){for(var d=0;d<i.shape.length-1;++d)p.push(i.shape[d]);p.push(1)}var f=Gr(i,o),h=Se(e,l),m=Soe(Pt(s,Zn(r))),v=Se(Se(Se(m,m),m),Zn(-.5)),g=function(){return o.rank===1?ht(Se(Se(e,Noe(ht(m,[1,1,1,o.shape[0]]),p)),l),i.shape):ht(Se(Se(e,m),l),i.shape)},y=function(){var k=Se(Se(m,Zn(-1)),h);return o.rank===1&&(k=Hn(k,c)),ht(k,o.shape)},w=function(){var k=Se(Se(v,f),h);return o.rank===1&&(k=Hn(k,c)),ht(k,o.shape)},b=function(){var k=Se(f,m),N=Se(e,k);return o.rank===1&&(N=Hn(N,c)),ht(N,o.shape)},x=function(){var k=e;return o.rank===1&&(k=Hn(k,c)),ht(k,o.shape)};return{x:g,mean:y,variance:w,scale:b,offset:x}}};function Eoe(e,t){t===void 0&&(t=0);var n=vI(e,"tensors","stack","string_or_numeric");De(n.length>=1,function(){return"Pass at least one tensor to tf.stack"}),n.length>0&&De(t<=n[0].rank,function(){return"Axis must be <= rank of the tensor"});var r=n,a={axis:t};return ye.runKernel(AE,r,a)}var NI=at({stack_:Eoe});function Ioe(e,t,n){var r=Re(e,"x","unsortedSegmentSum"),a=Re(t,"segmentIds","unsortedSegmentSum","int32");De(Zm(n),function(){return"numSegments must be of dtype int"});var i={x:r,segmentIds:a},o={numSegments:n};return ye.runKernel(KE,i,o)}var Coe=at({unsortedSegmentSum_:Ioe}),Doe={kernelName:TE,inputsToSave:["x","indices"],gradFunc:function(e,t,n){var r=re(t,2),a=r[0],i=r[1],o=n.axis,s=n.batchDims,u=Bl(o,a.shape)[0],l=function(f,h,m){return function(){var v=f.shape,g=h.size,y=v.slice(0,u),w=y.length,b=v.slice(o,v.length).slice(1),x=b.length,k=bT(0,w),N=bT(w+1,w+1+x),E=wT([y,[g],b]),C=ht(m,E),R=ht(h,[g]),A=wT([[w],k,N]),M=yp(C,A),$=Coe(M,R,f.shape[u]),z=B3(A);return $=yp($,z),$}};if(s===1){var c=a.shape[0],p=a.split(c,0),d=function(){var f=NI(p.map(function(h,m){return l(h,i.slice(m,1),e.slice(m,1))()}));return f.reshape(a.shape)};return{x:d,indices:function(){return i}}}else return{x:l(a,i,e),indices:function(){return i}}}};function bT(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function wT(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var _oe={kernelName:EE,inputsToSave:["a","b"],gradFunc:function(e,t){var n=re(t,2),r=n[0],a=n[1];return{a:function(){return Ht(r)},b:function(){return Ht(a)}}}};var Aoe={kernelName:k3,gradFunc:function(e){return{x:function(){return Lt(e,"float32")}}}};var Foe={kernelName:tre,gradFunc:function(e){return{x:function(){return Ht(e)}}}};var Roe={kernelName:nre,gradFunc:function(e){return{x:function(){return Ht(e)}}}};var Ooe={kernelName:rre,gradFunc:function(e){return{x:function(){return Ht(e)}}}};function Moe(e,t){var n,r=Re(e,"a","greater","string_or_numeric"),a=Re(t,"b","greater","string_or_numeric");n=re(vi(r,a),2),r=n[0],a=n[1],ta(r.shape,a.shape);var i={a:r,b:a};return ye.runKernel(Qne,i)}var Zf=at({greater_:Moe}),Poe={kernelName:are,inputsToSave:["x"],gradFunc:function(e,t,n){var r=re(t,1),a=r[0],i=n.alpha,o=Zf(a,0);return{x:function(){return Ml(o,e,Se(e,i))}}}},Boe={kernelName:sre,inputsToSave:["x"],gradFunc:function(e,t){var n=re(t,1),r=n[0];return{x:function(){return Jt(e,Pt(r,1))}}}},Loe={kernelName:IE,inputsToSave:["x"],gradFunc:function(e,t){var n=re(t,1),r=n[0];return{x:function(){return Jt(e,Lt(r,"float32"))}}}},zoe={kernelName:cre,inputsToSave:[],outputsToSave:[!0],gradFunc:function(e,t,n){var r=re(t,1),a=r[0],i=n.axis;return{logits:function(){var o=!0,s=kv(a);return Gr(e,Se(Hn(e,i,o),s))}}}};function $oe(e,t,n,r,a,i,o){r===void 0&&(r=5),a===void 0&&(a=1),i===void 0&&(i=1),o===void 0&&(o=.5);var s={x:e,y:t,dy:n},u={depthRadius:r,bias:a,alpha:i,beta:o};return ye.runKernel(dre,s,u)}var Voe=at({localResponseNormalizationBackprop_:$oe}),Woe={kernelName:pre,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=re(t,2),a=r[0],i=r[1],o=n.depthRadius,s=n.bias,u=n.alpha,l=n.beta;return{x:function(){return Voe(a,i,e,o,s,u,l)}}}};function Uoe(e,t){var n,r=Re(e,"a","equal","string_or_numeric"),a=Re(t,"b","equal","string_or_numeric");n=re(vi(r,a),2),r=n[0],a=n[1],ta(r.shape,a.shape);var i={a:r,b:a};return ye.runKernel(Xne,i)}var Goe=at({equal_:Uoe});function TI(e,t,n,r){return t.rank<n.rank&&(t=ht(t,yT(t.shape,r))),e.rank<n.rank&&(e=ht(e,yT(e.shape,r))),{x:function(){var a=Se(e,Lt(Goe(n,t),e.dtype));return a}}}var xT={kernelName:fre,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n,a=r.reductionIndices,i=t[0],o=t[1],s=Bl(a,i.shape),u=TI(e,o,i,s);return{x:function(){return u.x()}}}};function qoe(e,t){var n,r=Re(e,"a","less","string_or_numeric"),a=Re(t,"b","less","string_or_numeric");n=re(vi(r,a),2),r=n[0],a=n[1],ta(r.shape,a.shape);var i={a:r,b:a};return ye.runKernel(ire,i)}var Hoe=at({less_:qoe}),joe={kernelName:CE,inputsToSave:["a","b"],gradFunc:function(e,t){var n=re(t,2),r=n[0],a=n[1],i=function(){return Se(e,Lt(M3(r,a),"float32"))},o=function(){return Se(e,Lt(Hoe(r,a),"float32"))};return{a:i,b:o}}};function Koe(e,t,n,r,a,i,o){var s=Re(e,"dy","maxPool3dGrad"),u=Re(t,"input","maxPool3dGrad"),l=Re(n,"output","maxPool3dGrad"),c=s,p=u,d=l,f=!1;u.rank===4&&(f=!0,c=ht(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),p=ht(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),d=ht(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),De(c.rank===5,function(){return"Error in maxPool3dGrad: dy must be rank 5 but got rank "+"".concat(c.rank,".")}),De(p.rank===5,function(){return"Error in maxPool3dGrad: input must be rank 5 but got rank "+"".concat(p.rank,".")}),De(d.rank===5,function(){return"Error in maxPool3dGrad: output must be rank 5 but got rank "+"".concat(d.rank,".")}),$l("maxPool3dGrad",i,o);var h={dy:c,input:p,output:d},m={filterSize:r,strides:a,pad:i,dimRoundingMode:o},v=ye.runKernel(gre,h,m);return f?ht(v,[v.shape[1],v.shape[2],v.shape[3],v.shape[4]]):v}var Xoe=at({maxPool3dGrad_:Koe}),Yoe={kernelName:vre,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=re(t,2),a=r[0],i=r[1],o=n.filterSize,s=n.strides,u=n.pad,l=n.dimRoundingMode;return{x:function(){return Xoe(e,a,i,o,s,u,l)}}}};function Joe(e,t,n,r,a,i,o){var s=Re(e,"dy","maxPoolGrad"),u=Re(t,"input","maxPoolGrad"),l=Re(n,"output","maxPoolGrad");De(u.rank===s.rank,function(){return"Rank of input (".concat(u.rank,") does not match rank of dy ")+"(".concat(s.rank,")")}),De(s.rank===4,function(){return"Error in maxPoolGrad: dy must be rank 4 but got rank "+"".concat(s.rank,".")}),De(u.rank===4,function(){return"Error in maxPoolGrad: input must be rank 4 but got rank "+"".concat(u.rank,".")}),$l("maxPoolGrad",i,o);var c={dy:s,input:u,output:l},p={filterSize:r,strides:a,pad:i,dimRoundingMode:o};return ye.runKernel(mre,c,p)}var Zoe=at({maxPoolGrad_:Joe}),Qoe={kernelName:hre,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=re(t,2),a=r[0],i=r[1],o=n.filterSize,s=n.strides,u=n.pad;return{x:function(){return Zoe(e,a,i,o,s,u)}}}};function nv(e,t){if(t===void 0&&(t="float32"),Jf(e),t==="complex64"){var n=nv(e,"float32"),r=nv(e,"float32");return L3(n,r)}var a=C3(ss(e),t);return ye.makeTensor(a,e,t)}function Nv(e,t){if(t===void 0&&(t="float32"),Jf(e),t==="complex64"){var n=Nv(e,"float32"),r=nv(e,"float32");return L3(n,r)}var a=ZE(ss(e),t);return ye.makeTensor(a,e,t)}var ese={kernelName:yre,inputsToSave:["x"],gradFunc:function(e,t,n){var r=re(t,1),a=r[0],i=n.axis,o=Bl(i,a.shape),s=Yie(a.shape,o),u=s[1],l=ss(u),c=function(){var p=a.shape.slice();o.forEach(function(h){p[h]=1});var d=ht(e,p),f=Jt(Se(d,Nv(a.shape,"float32")),l);return f};return{x:c}}},tse={kernelName:bre,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n,a=r.axis,i=re(t,2),o=i[0],s=i[1],u=Bl(a,o.shape),l=TI(e,s,o,u);return{x:function(){return l.x()}}}},nse={kernelName:wre,inputsToSave:["a","b"],gradFunc:function(e,t){var n=re(t,2),r=n[0],a=n[1],i=function(){return Se(e,Lt(P3(r,a),"float32"))},o=function(){return Se(e,Lt(Zf(r,a),"float32"))};return{a:i,b:o}}};function rse(e,t,n){var r=Re(e,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");var a={x:r},i={begin:t,size:n};return ye.runKernel(LE,a,i)}var hp=at({slice_:rse});var ase={kernelName:xre,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings,i=a.map(function(o){return o[0]});return{x:function(){return hp(e,i,r.shape)}}}};function ise(e){var t=Re(e,"x","floor","float32"),n={x:t};return ye.runKernel(kE,n)}var ose=at({floor_:ise}),sse={kernelName:Sre,inputsToSave:["a","b"],gradFunc:function(e,t){var n=re(t,2),r=n[0],a=n[1],i=ta(r.shape,a.shape),o=function(){var u=qr(r.shape,i);return u.length>0?ht(Hn(e,u),r.shape):e},s=function(){var u=Se(e,Yi(ose(Jt(r,a)))),l=qr(a.shape,i);return l.length>0?ht(Hn(u,l),a.shape):u};return{a:o,b:s}}},use={kernelName:DE,inputsToSave:["a","b"],gradFunc:function(e,t){var n=re(t,2),r=n[0],a=n[1],i=ta(r.shape,a.shape),o=function(){var u=Se(e,Lt(a,"float32")),l=qr(r.shape,i);return l.length>0?ht(Hn(u,l),r.shape):u},s=function(){var u=Se(e,Lt(r,"float32")),l=qr(a.shape,i);return l.length>0?ht(Hn(u,l),a.shape):u};return{a:o,b:s}}};var lse={kernelName:_E,gradFunc:function(e){return{x:function(){return Yi(e)}}}};var cse={kernelName:Nre,inputsToSave:["indices"],gradFunc:function(e,t){var n=t[0];return{indices:function(){return nv(n.shape,"float32")}}}};var pse={kernelName:kre,gradFunc:function(e){return{x:function(){return Ht(e)}}}};function dse(e,t){t===void 0&&(t=0);var n=Re(e,"x","unstack","string_or_numeric");De(t>=-n.shape.length&&t<n.shape.length,function(){return"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")});var r={value:n},a={axis:t};return ye.runKernel(jE,r,a)}var fse=at({unstack_:dse});var hse={kernelName:AE,saveAllInputs:!0,gradFunc:function(e,t,n){var r=n.axis,a=fse(e,r);return a.map(function(i){return function(){return i}})}};var ST={kernelName:FE,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings,i=a.map(function(o){return o[0]});return{x:function(){return hp(e,i,r.shape)}}}};function mse(e){var t=Re(e,"x","log","float32"),n={x:t};return ye.runKernel(IE,n)}var vse=at({log_:mse});function gse(e,t){var n,r=Re(e,"base","pow"),a=Re(t,"exp","pow");n=re(vi(r,a),2),r=n[0],a=n[1];var i={a:r,b:a};return ye.runKernel(RE,i)}var rv=at({pow_:gse}),yse={kernelName:RE,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:function(e,t){var n=re(t,3),r=n[0],a=n[1],i=n[2],o=r,s=a,u=ta(o.shape,s.shape),l=function(){var p=Lt(s,"float32"),d=Se(e,Se(p,rv(o,Gr(p,Zn(1))))),f=qr(o.shape,u);return f.length>0&&(d=Hn(d,f)),ht(d,o.shape)},c=function(){var p=Zf(o,0),d=Ml(p,vse(o),Ht(o)),f=Se(e,Se(i,d)),h=qr(s.shape,u);return h.length>0&&(f=Hn(f,h)),ht(f,s.shape)};return{a:l,b:c}}},bse={kernelName:Tre,inputsToSave:["x","alpha"],gradFunc:function(e,t){var n=re(t,2),r=n[0],a=n[1],i=Zf(r,0);return{x:function(){return Ml(i,e,Se(e,a))},alpha:function(){var o=Ml(i,Ht(e),Se(e,r)),s=qr(a.shape,e.shape);return s.length>0&&(o=Hn(o,s)),ht(o,a.shape)}}}};function wse(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var Ta=Mn();Ta.registerFlag("DEBUG",function(){return!1},function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Ta.registerFlag("IS_BROWSER",function(){return wse()});Ta.registerFlag("IS_NODE",function(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"});Ta.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)});Ta.registerFlag("IS_SAFARI",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)});Ta.registerFlag("PROD",function(){return!1});Ta.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return Ta.getBool("DEBUG")});Ta.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0});Ta.registerFlag("IS_TEST",function(){return!1});Ta.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",function(){return Ta.getBool("DEBUG")});Ta.registerFlag("WRAP_TO_IMAGEBITMAP",function(){return!1});Ta.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",function(){return!1});Ta.registerFlag("USE_SETTIMEOUTCUSTOM",function(){return!1});var Qf=function(){function e(t){if(this.shards=[],this.previousShardIndex=0,t!=null&&(t instanceof Array||(t=[t]),t=t.map(function(o){return Ki(o)?o.buffer:o}),t.length!==0)){this.bufferUniformSize=t[0].byteLength;for(var n=0,r=0;r<t.length;r++){var a=t[r];r!==t.length-1&&a.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);var i=n+a.byteLength;this.shards.push({buffer:a,start:n,end:i}),n=i}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}}return e.join=function(t){return new e(t).slice()},e.prototype.slice=function(t,n){if(t===void 0&&(t=0),n===void 0&&(n=this.byteLength),this.shards.length===0)return new ArrayBuffer(0);if(t=isNaN(Number(t))?0:t,n=isNaN(Number(n))?0:n,t=Math.max(0,t),n=Math.min(this.byteLength,n),n<=t)return new ArrayBuffer(0);var r=this.findShardForByte(t);if(r===-1)throw new Error("Could not find start shard for byte ".concat(t));for(var a=n-t,i=new ArrayBuffer(a),o=new Uint8Array(i),s=0,u=r;u<this.shards.length;u++){var l=this.shards[u],c=t+s,p=c-l.start,d=s,f=Math.min(n,l.end),h=f-l.start,m=new Uint8Array(l.buffer,p,h-p);if(o.set(m,d),s+=m.length,n<l.end)break}return i},e.prototype.findShardForByte=function(t){if(this.shards.length===0||t<0||t>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(t/this.bufferUniformSize),this.previousShardIndex;function n(a){return t<a.start?-1:t>=a.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;var r=xse(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)},e}();function xse(e,t){for(var n=0,r=e.length;n<=r;){var a=Math.floor((r-n)/2)+n,i=t(e[a]);if(i===0)return a;i<0?r=a:n=a+1}return-1}var z3=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function kT(e){return z3?Buffer.byteLength(e,"utf8"):new Blob([e]).size}function Sse(e){if(z3)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function kse(e){if(z3){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}function EI(e,t){var n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return e.signature!=null&&(n.signature=e.signature),e.userDefinedMetadata!=null&&(n.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(n.modelInitializer=e.modelInitializer),e.initializerSignature!=null&&(n.initializerSignature=e.initializerSignature),e.trainingConfig!=null&&(n.trainingConfig=e.trainingConfig),n}function Nse(e,t,n){var r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(e.trainingConfig!=null&&(r.trainingConfig=e.trainingConfig),e.weightsManifest!=null){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return e.signature!=null&&(r.signature=e.signature),e.userDefinedMetadata!=null&&(r.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(r.modelInitializer=e.modelInitializer),e.initializerSignature!=null&&(r.initializerSignature=e.initializerSignature),r}function Tse(e,t){return Oe(this,void 0,void 0,function(){var n,r,a;return Fe(this,function(i){switch(i.label){case 0:return e.weightsManifest==null?[3,2]:[4,t(e.weightsManifest)];case 1:a=re.apply(void 0,[i.sent(),2]),n=a[0],r=a[1],i.label=2;case 2:return[2,Nse(e,n,r)]}})})}function Tv(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:e.modelTopology==null?0:kT(JSON.stringify(e.modelTopology)),weightSpecsBytes:e.weightSpecs==null?0:kT(JSON.stringify(e.weightSpecs)),weightDataBytes:e.weightData==null?0:new Qf(e.weightData).byteLength}}function NT(e){var t,n,r=[];try{for(var a=fe(e),i=a.next();!i.done;i=a.next()){var o=i.value;r.push.apply(r,ft([],re(o.weights),!1))}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return r}var Vl=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return e.instance==null&&(e.instance=new e),e.instance},e.registerSaveRouter=function(t){e.getInstance().saveRouters.push(t)},e.registerLoadRouter=function(t){e.getInstance().loadRouters.push(t)},e.getSaveHandlers=function(t){return e.getHandlers(t,"save")},e.getLoadHandlers=function(t,n){return e.getHandlers(t,"load",n)},e.getHandlers=function(t,n,r){var a=[],i=n==="load"?e.getInstance().loadRouters:e.getInstance().saveRouters;return i.forEach(function(o){var s=o(t,r);s!==null&&a.push(s)}),a},e}(),Ese="tensorflowjs",Ise=1,$f="models_store",jm="model_info_store";function Cse(){if(!Mn().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=typeof window>"u"?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function Dse(e){var t=e.result;t.createObjectStore($f,{keyPath:"modelPath"}),t.createObjectStore(jm,{keyPath:"modelPath"})}var av=function(){function e(t){if(this.indexedDB=Cse(),t==null||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return e.prototype.save=function(t){return Oe(this,void 0,void 0,function(){return Fe(this,function(n){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,t)]})})},e.prototype.load=function(){return Oe(this,void 0,void 0,function(){return Fe(this,function(t){return[2,this.databaseAction(this.modelPath)]})})},e.prototype.databaseAction=function(t,n){var r=this;return new Promise(function(a,i){var o=r.indexedDB.open(Ese,Ise);o.onupgradeneeded=function(){return Dse(o)},o.onsuccess=function(){var s=o.result;if(n==null){var u=s.transaction($f,"readonly"),l=u.objectStore($f),c=l.get(r.modelPath);c.onsuccess=function(){if(c.result==null)return s.close(),i(new Error("Cannot find model with path '".concat(r.modelPath,"' ")+"in IndexedDB."));a(c.result.modelArtifacts)},c.onerror=function(v){return s.close(),i(c.error)},u.oncomplete=function(){return s.close()}}else{n.weightData=Qf.join(n.weightData);var p=Tv(n),d=s.transaction(jm,"readwrite"),f=d.objectStore(jm),h;try{h=f.put({modelPath:r.modelPath,modelArtifactsInfo:p})}catch(v){return i(v)}var m;h.onsuccess=function(){m=s.transaction($f,"readwrite");var v=m.objectStore($f),g;try{g=v.put({modelPath:r.modelPath,modelArtifacts:n,modelArtifactsInfo:p})}catch(y){return i(y)}g.onsuccess=function(){return a({modelArtifactsInfo:p})},g.onerror=function(y){f=d.objectStore(jm);var w=f.delete(r.modelPath);w.onsuccess=function(){return s.close(),i(g.error)},w.onerror=function(b){return s.close(),i(g.error)}}},h.onerror=function(v){return s.close(),i(h.error)},d.oncomplete=function(){m==null?s.close():m.oncomplete=function(){return s.close()}}}},o.onerror=function(s){return i(o.error)}})},e}();av.URL_SCHEME="indexeddb://";var II=function(e){return Mn().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(av.URL_SCHEME)?_se(e.slice(av.URL_SCHEME.length)):null};Vl.registerSaveRouter(II);Vl.registerLoadRouter(II);function _se(e){return new av(e)}var Ff="/",Rf="tensorflowjs_models",Ase="info",Fse="model_topology",Rse="weight_specs",Ose="weight_data",Mse="model_metadata";function Pse(e){return{info:[Rf,e,Ase].join(Ff),topology:[Rf,e,Fse].join(Ff),weightSpecs:[Rf,e,Rse].join(Ff),weightData:[Rf,e,Ose].join(Ff),modelMetadata:[Rf,e,Mse].join(Ff)}}function Bse(e){var t,n;try{for(var r=fe(Object.values(e)),a=r.next();!a.done;a=r.next()){var i=a.value;window.localStorage.removeItem(i)}}catch(o){t={error:o}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}var iv=function(){function e(t){if(!Mn().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,t==null||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=Pse(this.modelPath)}return e.prototype.save=function(t){return Oe(this,void 0,void 0,function(){var n,r,a,i,o;return Fe(this,function(s){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=Tv(t),i=Qf.join(t.weightData);try{return this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,Sse(i)),o={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:t.signature!=null?t.signature:void 0,userDefinedMetadata:t.userDefinedMetadata!=null?t.userDefinedMetadata:void 0,modelInitializer:t.modelInitializer!=null?t.modelInitializer:void 0,initializerSignature:t.initializerSignature!=null?t.initializerSignature:void 0,trainingConfig:t.trainingConfig!=null?t.trainingConfig:void 0},this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),[2,{modelArtifactsInfo:a}]}catch{throw Bse(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(a.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(a.weightSpecsBytes,", ")+"weightDataBytes=".concat(a.weightDataBytes,"."))}return[2]})})},e.prototype.load=function(){return Oe(this,void 0,void 0,function(){var t,n,r,a,i,o,s;return Fe(this,function(u){if(t=JSON.parse(this.LS.getItem(this.keys.info)),t==null)throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));if(t.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(n={},r=JSON.parse(this.LS.getItem(this.keys.topology)),r==null)throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");if(n.modelTopology=r,a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)),a==null)throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");if(n.weightSpecs=a,i=this.LS.getItem(this.keys.modelMetadata),i!=null&&(o=JSON.parse(i),n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,o.signature!=null&&(n.signature=o.signature),o.userDefinedMetadata!=null&&(n.userDefinedMetadata=o.userDefinedMetadata),o.modelInitializer!=null&&(n.modelInitializer=o.modelInitializer),o.initializerSignature!=null&&(n.initializerSignature=o.initializerSignature),o.trainingConfig!=null&&(n.trainingConfig=o.trainingConfig)),s=this.LS.getItem(this.keys.weightData),s==null)throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));return n.weightData=kse(s),[2,n]})})},e}();iv.URL_SCHEME="localstorage://";var CI=function(e){return Mn().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(iv.URL_SCHEME)?Lse(e.slice(iv.URL_SCHEME.length)):null};Vl.registerSaveRouter(CI);Vl.registerLoadRouter(CI);function Lse(e){return new iv(e)}var zse="model",$se=".json",Vse=".weights.bin";function TT(e){return new Promise(function(t){return setTimeout(t)}).then(e)}var ov=function(){function e(t){if(!Mn().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),(t==null||t.length===0)&&(t=zse),this.modelJsonFileName=t+$se,this.weightDataFileName=t+Vse}return e.prototype.save=function(t){return Oe(this,void 0,void 0,function(){var n,r,a,i,o,s,u;return Fe(this,function(l){switch(l.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(n=Qf.join(t.weightData),r=window.URL.createObjectURL(new Blob([n],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return a=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],i=EI(t,a),o=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),s=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor,s.download=this.modelJsonFileName,s.href=o,[4,TT(function(){return s.dispatchEvent(new MouseEvent("click"))})];case 2:return l.sent(),t.weightData==null?[3,4]:(u=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor,u.download=this.weightDataFileName,u.href=r,[4,TT(function(){return u.dispatchEvent(new MouseEvent("click"))})]);case 3:l.sent(),l.label=4;case 4:return[2,{modelArtifactsInfo:Tv(t)}]}})})},e}();ov.URL_SCHEME="downloads://";var Wse=function(e){return Mn().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(ov.URL_SCHEME)?Use(e.slice(ov.URL_SCHEME.length)):null};Vl.registerSaveRouter(Wse);function Use(e){return e===void 0&&(e="model"),new ov(e)}function ET(e,t,n,r){o(e),n=n??0,r=r??1,s(n,r);var a=0,i=function(u){return u.then(function(l){var c=n+ ++a/e.length*(r-n);return t(c),l}),u};function o(u){De(u!=null&&Array.isArray(u)&&u.length>0,function(){return"promises must be a none empty array"})}function s(u,l){De(u>=0&&u<=1,function(){return"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(u)}),De(l>=0&&l<=1,function(){return"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(l)}),De(l>=u,function(){return"startFraction must be no more than endFraction, but "+"got startFraction ".concat(u," and endFraction ")+"".concat(l)})}return Promise.all(e.map(i))}function Gse(e,t){return Oe(this,void 0,void 0,function(){var n,r,a,i,o,s,u,l,c,p,d;return Fe(this,function(f){switch(f.label){case 0:return t==null&&(t={}),n=t.fetchFunc==null?Mn().platform.fetch:t.fetchFunc,r=e.map(function(h){return n(h,t.requestInit,{isBinary:!0})}),a=0,i=.5,t.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return s=f.sent(),[3,4];case 2:return[4,ET(r,t.onProgress,a,i)];case 3:s=f.sent(),f.label=4;case 4:return o=s,u=o.map(function(h){return h.arrayBuffer()}),l=.5,c=1,t.onProgress!=null?[3,6]:[4,Promise.all(u)];case 5:return d=f.sent(),[3,8];case 6:return[4,ET(u,t.onProgress,l,c)];case 7:d=f.sent(),f.label=8;case 8:return p=d,[2,p]}})})}function qse(e,t){var n=this,r,a=t.fetchFunc==null?Mn().platform.fetch:t.fetchFunc,i=0,o;return(r=t.onProgress)===null||r===void 0||r.call(t,0),new ReadableStream({pull:function(s){return Oe(n,void 0,void 0,function(){var u,l,c,p,d;return Fe(this,function(f){switch(f.label){case 0:return i<e.length?o?[3,2]:[4,a(e[i],t.requestInit,{isBinary:!0})]:[3,4];case 1:l=f.sent().body,o=l.getReader(),f.label=2;case 2:return[4,o.read()];case 3:return c=f.sent(),p=c.done,d=c.value,p?(i++,o=void 0,(u=t.onProgress)===null||u===void 0||u.call(t,i/e.length),[3,0]):(s.enqueue(d),[2]);case 4:return s.close(),[2]}})})}})}var Hse="application/octet-stream",jse="application/json",$3=function(){function e(t,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(De(typeof n.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=n.fetchFunc):this.fetch=Mn().platform.fetch,De(t!=null&&t.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(t)&&De(t.length===2,function(){return"URL paths for http must have a length of 2, "+"(actual length is ".concat(t.length,").")}),this.path=t,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{},this.loadOptions=n}return e.prototype.save=function(t){return Oe(this,void 0,void 0,function(){var n,r,a,i,o;return Fe(this,function(s){switch(s.label){case 0:if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit),n.body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],a=EI(t,r),n.body.append("model.json",new Blob([JSON.stringify(a)],{type:jse}),"model.json"),t.weightData!=null&&(i=Qf.join(t.weightData),n.body.append("model.weights.bin",new Blob([i],{type:Hse}),"model.weights.bin")),[4,this.fetch(this.path,n)];case 1:if(o=s.sent(),o.ok)return[2,{modelArtifactsInfo:Tv(t),responses:[o]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(o.status,"."))}})})},e.prototype.loadModelJSON=function(){return Oe(this,void 0,void 0,function(){var t,n,r,a,i;return Fe(this,function(o){switch(o.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(t=o.sent(),!t.ok)throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(t.status,". Please verify this URL points to ")+"the model JSON of the model to load.");o.label=2;case 2:return o.trys.push([2,4,,5]),[4,t.json()];case 3:return n=o.sent(),[3,5];case 4:throw o.sent(),r="Failed to parse model JSON of response from ".concat(this.path,"."),this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(a=n.modelTopology,i=n.weightsManifest,a==null&&i==null)throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");return[2,n]}})})},e.prototype.load=function(){return Oe(this,void 0,void 0,function(){var t,n=this;return Fe(this,function(r){switch(r.label){case 0:return this.loadOptions.streamWeights?[2,this.loadStream()]:[4,this.loadModelJSON()];case 1:return t=r.sent(),[2,Tse(t,function(a){return n.loadWeights(a)})]}})})},e.prototype.loadStream=function(){return Oe(this,void 0,void 0,function(){var t,n,r,a,i=this;return Fe(this,function(o){switch(o.label){case 0:return[4,this.loadModelJSON()];case 1:return t=o.sent(),[4,this.getWeightUrls(t.weightsManifest)];case 2:return n=o.sent(),r=NT(t.weightsManifest),a=function(){return qse(n,i.loadOptions)},[2,Object.assign(Object.assign({},t),{weightSpecs:r,getWeightStream:a})]}})})},e.prototype.getWeightUrls=function(t){return Oe(this,void 0,void 0,function(){var n,r,a,i,o,s,u,l,c,p,d,f,h,m,v,g,y,w,b,x,k;return Fe(this,function(N){switch(N.label){case 0:n=Array.isArray(this.path)?this.path[1]:this.path,r=re(Kse(n),2),a=r[0],i=r[1],o=this.weightPathPrefix||a,s=[],u=[];try{for(l=fe(t),c=l.next();!c.done;c=l.next()){p=c.value;try{for(d=(x=void 0,fe(p.paths)),f=d.next();!f.done;f=d.next())h=f.value,this.weightUrlConverter!=null?u.push(this.weightUrlConverter(h)):s.push(o+h+i)}catch(E){x={error:E}}finally{try{f&&!f.done&&(k=d.return)&&k.call(d)}finally{if(x)throw x.error}}}}catch(E){w={error:E}}finally{try{c&&!c.done&&(b=l.return)&&b.call(l)}finally{if(w)throw w.error}}return this.weightUrlConverter?(v=(m=s.push).apply,g=[s],y=[[]],[4,Promise.all(u)]):[3,2];case 1:v.apply(m,g.concat([ft.apply(void 0,y.concat([re.apply(void 0,[N.sent()]),!1]))])),N.label=2;case 2:return[2,s]}})})},e.prototype.loadWeights=function(t){return Oe(this,void 0,void 0,function(){var n,r,a;return Fe(this,function(i){switch(i.label){case 0:return[4,this.getWeightUrls(t)];case 1:return n=i.sent(),r=NT(t),[4,Gse(n,this.loadOptions)];case 2:return a=i.sent(),[2,[r,a]]}})})},e}();$3.URL_SCHEME_REGEX=/^https?:\/\//;function Kse(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),r=e.substring(0,t),a=n>t?e.substring(n):"";return[r+"/",a]}function IT(e){return e.match($3.URL_SCHEME_REGEX)!=null}var DI=function(e,t){if(typeof fetch>"u"&&(t==null||t.fetchFunc==null))return null;var n=!0;return Array.isArray(e)?n=e.every(function(r){return IT(r)}):n=IT(e),n?Xse(e,t):null};Vl.registerSaveRouter(DI);Vl.registerLoadRouter(DI);function Xse(e,t){return new $3(e,t)}function Yse(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + "+"shape[sliceDim:], got updates.shape: ".concat(n.shape)+", indices.shape: ".concat(t.shape,", shape: ").concat(e)+", sliceDim: ".concat(r,", and batchDim: ").concat(a,".");if(n.rank<a)throw new Error(i+" update.rank < ".concat(a,". "));if(e.length<r+(n.rank-a))throw new Error(i+" Output shape length < ".concat(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(i+" update.rank != ".concat(a+e.length-r));for(var o=0;o<a;++o)if(n.shape[o]!==t.shape[o])throw new Error(i+" updates.shape[".concat(o,"] (").concat(n.shape[o],") != indices.shape[").concat(o,"] (").concat(t.shape[o],")."));for(var o=0;o<n.rank-a;++o)if(n.shape[o+a]!==e[o+r])throw new Error(i+" updates.shape[".concat(o+a,"] (").concat(n.shape[o+a],") != shape[").concat(o+a,"] (").concat(e[o+a],")"))}function Jse(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+" but the rank was ".concat(e.rank,"."));if(t.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(n.length===0){if(t.size===0)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(e.size===0)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}Yse(n,t,e)}function Zse(e,t,n){var r,a=e.shape.length;typeof t=="number"?r=ft([t],re(new Array(a-1).fill(0)),!1):t.length<a?r=t.concat(new Array(a-t.length).fill(0)):r=t.slice(),r.forEach(function(o){De(o!==-1,function(){return"slice() does not support negative begin indexing."})});var i;return n==null?i=new Array(a).fill(-1):typeof n=="number"?i=ft([n],re(new Array(a-1).fill(-1)),!1):n.length<a?i=n.concat(new Array(a-n.length).fill(-1)):i=n,i=i.map(function(o,s){return o>=0?o:(De(o===-1,function(){return"Negative size values should be exactly -1 but got "+"".concat(o," for the slice() size at index ").concat(s,".")}),e.shape[s]-r[s])}),[r,i]}var Qse=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(t,n){return new t(n)},e}();function eue(e){var t=Re(e,"x","abs");if(t.dtype==="complex64"){var n={x:t};return ye.runKernel(fE,n)}else{var n={x:t};return ye.runKernel(cE,n)}}var tue=at({abs_:eue});function nue(e,t){t===void 0&&(t=0),De(e.length>=1,function(){return"Pass at least one tensor to concat"});var n=vI(e,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(function(i){if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `.concat(i.dtype,". "))}),n.length===1)return xI(n[0]);var r=n,a={axis:t};return ye.runKernel(hE,r,a)}var rue=at({concat_:nue});function aue(e){var t=Re(e,"x","sigmoid","float32"),n={x:t};return ye.runKernel(VE,n)}var iue=at({sigmoid_:aue});function oue(e,t,n){var r=Re(e,"x","batchToSpaceND"),a=t.reduce(function(s,u){return s*u});De(r.rank>=1+t.length,function(){return"input rank is ".concat(r.rank," but should be > than blockShape.length ").concat(t.length)}),De(n.length===t.length,function(){return"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)}),De(r.shape[0]%a===0,function(){return"input tensor batch is ".concat(r.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(a)});var i={x:r},o={blockShape:t,crops:n};return ye.runKernel(dE,i,o)}var sue=at({batchToSpaceND_:oue});function uue(e,t,n){Jf(e),n=n||Sv(t);var r={shape:e,value:t,dtype:n};return ye.runKernel(Jne,{},r)}function lue(e){var t=Re(e,"x","cos","float32"),n={x:t};return ye.runKernel(gE,n)}var _I=at({cos_:lue});function cue(e){var t=Re(e,"x","cosh","float32"),n={x:t};return ye.runKernel(yE,n)}var pue=at({cosh_:cue});function due(e,t,n,r){t===void 0&&(t=0),n===void 0&&(n=!1),r===void 0&&(r=!1);var a=Re(e,"x","cumprod"),i={x:a},o={axis:t,exclusive:n,reverse:r};return ye.runKernel(zne,i,o)}var CT=at({cumprod_:due});function fue(e,t){t===void 0&&(t=0);var n=Re(e,"x","expandDims","string_or_numeric");De(t<=n.rank,function(){return"Axis must be <= rank of the tensor"});var r={input:n},a={dim:t};return ye.runKernel(SE,r,a)}var hue=at({expandDims_:fue});function mue(e,t,n,r){n===void 0&&(n=0),r===void 0&&(r=0);var a=Re(e,"x","gather"),i=Re(t,"indices","gather","int32"),o={x:a,indices:i},s={axis:n,batchDims:r};return ye.runKernel(TE,o,s)}var vue=at({gather_:mue});function gue(e,t){De(Qy(e),function(){return"The f passed in variableGrads(f) must be a function"}),De(t==null||Array.isArray(t)&&t.every(function(p){return p instanceof tv}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var n=t!=null;if(!n){t=[];for(var r in ye.registeredVariables)t.push(ye.registeredVariables[r])}var a=n?t.filter(function(p){return!p.trainable}):null,i=t.length;t=t.filter(function(p){return p.trainable}),De(t.length>0,function(){return"variableGrads() expects at least one of the input variables to "+"be trainable, but none of the ".concat(i," variables is ")+"trainable."});var o=!0,s=ye.gradients(e,t,null,o),u=s.value,l=s.grads;De(l.some(function(p){return p!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),De(u.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it "+"returned a rank-".concat(u.rank," tensor")});var c={};return t.forEach(function(p,d){l[d]!=null&&(c[p.name]=l[d])}),a?.forEach(function(p){return c[p.name]=null}),{value:u,grads:c}}function yue(e){var t=Re(e,"x","logicalNot","bool"),n={x:t};return ye.runKernel(lre,n)}var bue=at({logicalNot_:yue});function wue(e,t){var n,r=Re(e,"a","maximum"),a=Re(t,"b","maximum");n=re(vi(r,a),2),r=n[0],a=n[1],r.dtype==="bool"&&(r=Lt(r,"int32"),a=Lt(a,"int32")),ta(r.shape,a.shape);var i={a:r,b:a};return ye.runKernel(CE,i)}var AI=at({maximum_:wue});function xue(e,t,n){n===void 0&&(n=0);var r=Re(e,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:t,constantValue:n},i={x:r};return ye.runKernel(FE,i,a)}var Sue=at({pad_:xue}),FI={exports:{}};(function(e){(function(t,n,r){function a(u){var l=this,c=s();l.next=function(){var p=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=p-(l.c=p|0)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(u),l.s0<0&&(l.s0+=1),l.s1-=c(u),l.s1<0&&(l.s1+=1),l.s2-=c(u),l.s2<0&&(l.s2+=1),c=null}function i(u,l){return l.c=u.c,l.s0=u.s0,l.s1=u.s1,l.s2=u.s2,l}function o(u,l){var c=new a(u),p=l&&l.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,p&&(typeof p=="object"&&i(p,c),d.state=function(){return i(c,{})}),d}function s(){var u=4022871197,l=function(c){c=String(c);for(var p=0;p<c.length;p++){u+=c.charCodeAt(p);var d=.02519603282416938*u;u=d>>>0,d-=u,d*=u,u=d>>>0,d-=u,u+=d*4294967296}return(u>>>0)*23283064365386963e-26};return l}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.alea=o})(Ll,e,!1)})(FI);var kue=FI.exports,RI={exports:{}};(function(e){(function(t,n,r){function a(s){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var p=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^p^p>>>8},s===(s|0)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,u.next()}function i(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u}function o(s,u){var l=new a(s),c=u&&u.state,p=function(){return(l.next()>>>0)/4294967296};return p.double=function(){do var d=l.next()>>>11,f=(l.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},p.int32=l.next,p.quick=p,c&&(typeof c=="object"&&i(c,l),p.state=function(){return i(l,{})}),p}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor128=o})(Ll,e,!1)})(RI);var Nue=RI.exports,OI={exports:{}};(function(e){(function(t,n,r){function a(s){var u=this,l="";u.next=function(){var p=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^(p^p<<1))|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,s===(s|0)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,c==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function i(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u.v=s.v,u.d=s.d,u}function o(s,u){var l=new a(s),c=u&&u.state,p=function(){return(l.next()>>>0)/4294967296};return p.double=function(){do var d=l.next()>>>11,f=(l.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},p.int32=l.next,p.quick=p,c&&(typeof c=="object"&&i(c,l),p.state=function(){return i(l,{})}),p}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorwow=o})(Ll,e,!1)})(OI);var Tue=OI.exports,MI={exports:{}};(function(e){(function(t,n,r){function a(s){var u=this;u.next=function(){var c=u.x,p=u.i,d,f;return d=c[p],d^=d>>>7,f=d^d<<24,d=c[p+1&7],f^=d^d>>>10,d=c[p+3&7],f^=d^d>>>3,d=c[p+4&7],f^=d^d<<7,d=c[p+7&7],d=d^d<<13,f^=d^d<<9,c[p]=f,u.i=p+1&7,f};function l(c,p){var d,f=[];if(p===(p|0))f[0]=p;else for(p=""+p,d=0;d<p.length;++d)f[d&7]=f[d&7]<<15^p.charCodeAt(d)+f[d+1&7]<<13;for(;f.length<8;)f.push(0);for(d=0;d<8&&f[d]===0;++d);for(d==8?f[7]=-1:f[d],c.x=f,c.i=0,d=256;d>0;--d)c.next()}l(u,s)}function i(s,u){return u.x=s.x.slice(),u.i=s.i,u}function o(s,u){s==null&&(s=+new Date);var l=new a(s),c=u&&u.state,p=function(){return(l.next()>>>0)/4294967296};return p.double=function(){do var d=l.next()>>>11,f=(l.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},p.int32=l.next,p.quick=p,c&&(c.x&&i(c,l),p.state=function(){return i(l,{})}),p}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorshift7=o})(Ll,e,!1)})(MI);var Eue=MI.exports,PI={exports:{}};(function(e){(function(t,n,r){function a(s){var u=this;u.next=function(){var c=u.w,p=u.X,d=u.i,f,h;return u.w=c=c+1640531527|0,h=p[d+34&127],f=p[d=d+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,h=p[d]=h^f,u.i=d,h+(c^c>>>16)|0};function l(c,p){var d,f,h,m,v,g=[],y=128;for(p===(p|0)?(f=p,p=null):(p=p+"\0",f=0,y=Math.max(y,p.length)),h=0,m=-32;m<y;++m)p&&(f^=p.charCodeAt((m+32)%p.length)),m===0&&(v=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,m>=0&&(v=v+1640531527|0,d=g[m&127]^=f+v,h=d==0?h+1:0);for(h>=128&&(g[(p&&p.length||0)&127]=-1),h=127,m=4*128;m>0;--m)f=g[h+34&127],d=g[h=h+1&127],f^=f<<13,d^=d<<17,f^=f>>>15,d^=d>>>12,g[h]=f^d;c.w=v,c.X=g,c.i=h}l(u,s)}function i(s,u){return u.i=s.i,u.w=s.w,u.X=s.X.slice(),u}function o(s,u){s==null&&(s=+new Date);var l=new a(s),c=u&&u.state,p=function(){return(l.next()>>>0)/4294967296};return p.double=function(){do var d=l.next()>>>11,f=(l.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},p.int32=l.next,p.quick=p,c&&(c.X&&i(c,l),p.state=function(){return i(l,{})}),p}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor4096=o})(Ll,e,!1)})(PI);var Iue=PI.exports,BI={exports:{}};(function(e){(function(t,n,r){function a(s){var u=this,l="";u.next=function(){var p=u.b,d=u.c,f=u.d,h=u.a;return p=p<<25^p>>>7^d,d=d-f|0,f=f<<24^f>>>8^h,h=h-p|0,u.b=p=p<<20^p>>>12^d,u.c=d=d-f|0,u.d=f<<16^d>>>16^h,u.a=h-p|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,s===Math.floor(s)?(u.a=s/4294967296|0,u.b=s|0):l+=s;for(var c=0;c<l.length+20;c++)u.b^=l.charCodeAt(c)|0,u.next()}function i(s,u){return u.a=s.a,u.b=s.b,u.c=s.c,u.d=s.d,u}function o(s,u){var l=new a(s),c=u&&u.state,p=function(){return(l.next()>>>0)/4294967296};return p.double=function(){do var d=l.next()>>>11,f=(l.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},p.int32=l.next,p.quick=p,c&&(typeof c=="object"&&i(c,l),p.state=function(){return i(l,{})}),p}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.tychei=o})(Ll,e,!1)})(BI);var Cue=BI.exports,LI={exports:{}},Due={},_ue={__proto__:null,default:Due},Aue=pae(_ue);(function(e){(function(t,n,r){var a=256,i=6,o=52,s="random",u=r.pow(a,i),l=r.pow(2,o),c=l*2,p=a-1,d;function f(b,x,k){var N=[];x=x==!0?{entropy:!0}:x||{};var E=g(v(x.entropy?[b,w(n)]:b??y(),3),N),C=new h(N),R=function(){for(var A=C.g(i),M=u,$=0;A<l;)A=(A+$)*a,M*=a,$=C.g(1);for(;A>=c;)A/=2,M/=2,$>>>=1;return(A+$)/M};return R.int32=function(){return C.g(4)|0},R.quick=function(){return C.g(4)/4294967296},R.double=R,g(w(C.S),n),(x.pass||k||function(A,M,$,z){return z&&(z.S&&m(z,C),A.state=function(){return m(C,{})}),$?(r[s]=A,M):A})(R,E,"global"in x?x.global:this==r,x.state)}function h(b){var x,k=b.length,N=this,E=0,C=N.i=N.j=0,R=N.S=[];for(k||(b=[k++]);E<a;)R[E]=E++;for(E=0;E<a;E++)R[E]=R[C=p&C+b[E%k]+(x=R[E])],R[C]=x;(N.g=function(A){for(var M,$=0,z=N.i,L=N.j,B=N.S;A--;)M=B[z=p&z+1],$=$*a+B[p&(B[z]=B[L=p&L+M])+(B[L]=M)];return N.i=z,N.j=L,$})(a)}function m(b,x){return x.i=b.i,x.j=b.j,x.S=b.S.slice(),x}function v(b,x){var k=[],N=typeof b,E;if(x&&N=="object")for(E in b)try{k.push(v(b[E],x-1))}catch{}return k.length?k:N=="string"?b:b+"\0"}function g(b,x){for(var k=b+"",N,E=0;E<k.length;)x[p&E]=p&(N^=x[p&E]*19)+k.charCodeAt(E++);return w(x)}function y(){try{var b;return d&&(b=d.randomBytes)?b=b(a):(b=new Uint8Array(a),(t.crypto||t.msCrypto).getRandomValues(b)),w(b)}catch{var x=t.navigator,k=x&&x.plugins;return[+new Date,t,k,t.screen,w(n)]}}function w(b){return String.fromCharCode.apply(0,b)}if(g(r.random(),n),e.exports){e.exports=f;try{d=Aue}catch{}}else r["seed"+s]=f})(typeof self<"u"?self:Ll,[],Math)})(LI);var Fue=LI.exports,Rue=kue,Oue=Nue,Mue=Tue,Pue=Eue,Bue=Iue,Lue=Cue,xp=Fue;xp.alea=Rue;xp.xor128=Oue;xp.xorwow=Mue;xp.xorshift7=Pue;xp.xor4096=Bue;xp.tychei=Lue;function zue(e,t){var n=Re(e,"x","reverse"),r={x:n},a={dims:t};return ye.runKernel(ME,r,a)}var $ue=at({reverse_:zue});function Vue(e,t,n){var r=Re(e,"tensor","tensorScatterupdate"),a=Re(t,"indices","tensorScatterupdate","int32"),i=Re(n,"updates","tensorScatterupdate");if(Jse(i,a,r.shape),r.dtype!==i.dtype)throw new Error("tensor and updates must have the same dtype, instead they are ".concat(r.dtype," and ").concat(i.dtype,"."));var o={tensor:r,indices:a,updates:i},s={};return ye.runKernel(Pre,o,s)}at({tensorScatterUpdate_:Vue});var DT;(function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(DT||(DT={}));var Wl=function(e){ue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.minimize=function(n,r,a){r===void 0&&(r=!1);var i=this.computeGradients(n,a),o=i.value,s=i.grads;if(a!=null){var u=a.map(function(l){return{name:l.name,tensor:s[l.name]}});this.applyGradients(u)}else this.applyGradients(s);return hi(s),r?o:(o.dispose(),null)},Object.defineProperty(t.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!1,configurable:!0}),t.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},t.prototype.computeGradients=function(n,r){return gue(n,r)},t.prototype.dispose=function(){this.iterations_!=null&&hi(this.iterations_)},t.prototype.saveIterations=function(){return Oe(this,void 0,void 0,function(){return Fe(this,function(n){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:Zn(this.iterations_,"int32")}]})})},t.prototype.getWeights=function(){return Oe(this,void 0,void 0,function(){return Fe(this,function(n){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},t.prototype.setWeights=function(n){return Oe(this,void 0,void 0,function(){return Fe(this,function(r){throw new Error("setWeights() is not implemented for this optimizer class "+"".concat(this.getClassName()))})})},t.prototype.extractIterations=function(n){return Oe(this,void 0,void 0,function(){var r;return Fe(this,function(a){switch(a.label){case 0:return r=this,[4,n[0].tensor.data()];case 1:return r.iterations_=a.sent()[0],[2,n.slice(1)]}})})},t}(Qse);Object.defineProperty(Wl,Symbol.hasInstance,{value:function(e){return e.minimize!=null&&e.computeGradients!=null&&e.applyGradients!=null}});(function(e){ue(t,e);function t(n,r,a){a===void 0&&(a=null);var i=e.call(this)||this;return i.learningRate=n,i.rho=r,i.epsilon=a,i.accumulatedGrads=[],i.accumulatedUpdates=[],a==null&&(i.epsilon=ye.backend.epsilon()),i}return Object.defineProperty(t,"className",{get:function(){return"Adadelta"},enumerable:!1,configurable:!0}),t.prototype.applyGradients=function(n){var r=this,a=Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n);a.forEach(function(i,o){var s=ye.registeredVariables[i],u=!1;r.accumulatedGrads[o]==null&&(r.accumulatedGrads[o]={originalName:"".concat(i,"/accum_grad"),variable:xr(function(){return Ht(s).variable(u)})}),r.accumulatedUpdates[o]==null&&(r.accumulatedUpdates[o]={originalName:"".concat(i,"/accum_var"),variable:xr(function(){return Ht(s).variable(u)})});var l=Array.isArray(n)?n[o].tensor:n[i];if(l!=null){var c=r.accumulatedGrads[o].variable,p=r.accumulatedUpdates[o].variable;xr(function(){var d=Pt(Se(c,r.rho),Se(Qn(l),1-r.rho)),f=Se(Jt(Do(Pt(p,r.epsilon)),Do(Pt(c,r.epsilon))),l),h=Pt(Se(p,r.rho),Se(Qn(f),1-r.rho));c.assign(d),p.assign(h);var m=Pt(Se(f,-r.learningRate),s);s.assign(m)})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedUpdates!=null&&(hi(this.accumulatedGrads.map(function(n){return n.variable})),hi(this.accumulatedUpdates.map(function(n){return n.variable})))},t.prototype.getWeights=function(){return Oe(this,void 0,void 0,function(){var n;return Fe(this,function(r){switch(r.label){case 0:return n=ft(ft([],re(this.accumulatedGrads),!1),re(this.accumulatedUpdates),!1),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(a){return{name:a.originalName,tensor:a.variable}}))]}})})},t.prototype.setWeights=function(n){return Oe(this,void 0,void 0,function(){var r,a;return Fe(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(n)];case 1:return n=i.sent(),r=n.length/2,a=!1,this.accumulatedGrads=n.slice(0,r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(a)}}),this.accumulatedUpdates=n.slice(r,r*2).map(function(o){return{originalName:o.name,variable:o.tensor.variable(a)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(n,r){return new n(r.learningRate,r.rho,r.epsilon)},t})(Wl);(function(e){ue(t,e);function t(n,r){r===void 0&&(r=.1);var a=e.call(this)||this;return a.learningRate=n,a.initialAccumulatorValue=r,a.accumulatedGrads=[],a}return Object.defineProperty(t,"className",{get:function(){return"Adagrad"},enumerable:!1,configurable:!0}),t.prototype.applyGradients=function(n){var r=this,a=Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n);a.forEach(function(i,o){var s=ye.registeredVariables[i];if(r.accumulatedGrads[o]==null){var u=!1;r.accumulatedGrads[o]={originalName:"".concat(i,"/accumulator"),variable:xr(function(){return uue(s.shape,r.initialAccumulatorValue).variable(u)})}}var l=Array.isArray(n)?n[o].tensor:n[i];if(l!=null){var c=r.accumulatedGrads[o].variable;xr(function(){var p=Pt(c,Qn(l));c.assign(p);var d=Pt(Se(Jt(l,Do(Pt(p,ye.backend.epsilon()))),-r.learningRate),s);s.assign(d)})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedGrads!=null&&hi(this.accumulatedGrads.map(function(n){return n.variable}))},t.prototype.getWeights=function(){return Oe(this,void 0,void 0,function(){return Fe(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulatedGrads.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},t.prototype.setWeights=function(n){return Oe(this,void 0,void 0,function(){var r;return Fe(this,function(a){switch(a.label){case 0:return[4,this.extractIterations(n)];case 1:return n=a.sent(),r=!1,this.accumulatedGrads=n.map(function(i){return{originalName:i.name,variable:i.tensor.variable(r)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(n,r){return new n(r.learningRate,r.initialAccumulatorValue)},t})(Wl);(function(e){ue(t,e);function t(n,r,a,i){i===void 0&&(i=null);var o=e.call(this)||this;return o.learningRate=n,o.beta1=r,o.beta2=a,o.epsilon=i,o.accumulatedFirstMoment=[],o.accumulatedSecondMoment=[],xr(function(){o.accBeta1=Zn(r).variable(),o.accBeta2=Zn(a).variable()}),i==null&&(o.epsilon=ye.backend.epsilon()),o}return Object.defineProperty(t,"className",{get:function(){return"Adam"},enumerable:!1,configurable:!0}),t.prototype.applyGradients=function(n){var r=this,a=Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n);xr(function(){var i=Gr(1,r.accBeta1),o=Gr(1,r.accBeta2);a.forEach(function(s,u){var l=ye.registeredVariables[s],c=!1;r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:"".concat(s,"/m"),variable:xr(function(){return Ht(l).variable(c)})}),r.accumulatedSecondMoment[u]==null&&(r.accumulatedSecondMoment[u]={originalName:"".concat(s,"/v"),variable:xr(function(){return Ht(l).variable(c)})});var p=Array.isArray(n)?n[u].tensor:n[s];if(p!=null){var d=r.accumulatedFirstMoment[u].variable,f=r.accumulatedSecondMoment[u].variable,h=Pt(Se(d,r.beta1),Se(p,1-r.beta1)),m=Pt(Se(f,r.beta2),Se(Qn(p),1-r.beta2)),v=Jt(h,i),g=Jt(m,o);d.assign(h),f.assign(m);var y=Pt(Se(Jt(v,Pt(Do(g),r.epsilon)),-r.learningRate),l);l.assign(y)}}),r.accBeta1.assign(Se(r.accBeta1,r.beta1)),r.accBeta2.assign(Se(r.accBeta2,r.beta2))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&hi(this.accumulatedFirstMoment.map(function(n){return n.variable})),this.accumulatedSecondMoment!=null&&hi(this.accumulatedSecondMoment.map(function(n){return n.variable}))},t.prototype.getWeights=function(){return Oe(this,void 0,void 0,function(){var n;return Fe(this,function(r){switch(r.label){case 0:return n=ft(ft([],re(this.accumulatedFirstMoment),!1),re(this.accumulatedSecondMoment),!1),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(a){return{name:a.originalName,tensor:a.variable}}))]}})})},t.prototype.setWeights=function(n){return Oe(this,void 0,void 0,function(){var r,a,i=this;return Fe(this,function(o){switch(o.label){case 0:return[4,this.extractIterations(n)];case 1:return n=o.sent(),xr(function(){i.accBeta1.assign(rv(i.beta1,i.iterations_+1)),i.accBeta2.assign(rv(i.beta2,i.iterations_+1))}),r=n.length/2,a=!1,this.accumulatedFirstMoment=n.slice(0,r).map(function(s){return{originalName:s.name,variable:s.tensor.variable(a)}}),this.accumulatedSecondMoment=n.slice(r,r*2).map(function(s){return{originalName:s.name,variable:s.tensor.variable(a)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon)},t})(Wl);(function(e){ue(t,e);function t(n,r,a,i,o){i===void 0&&(i=null),o===void 0&&(o=0);var s=e.call(this)||this;return s.learningRate=n,s.beta1=r,s.beta2=a,s.epsilon=i,s.decay=o,s.accumulatedFirstMoment=[],s.accumulatedWeightedInfNorm=[],xr(function(){s.iteration=Zn(0).variable(),s.accBeta1=Zn(r).variable()}),i==null&&(s.epsilon=ye.backend.epsilon()),s}return Object.defineProperty(t,"className",{get:function(){return"Adamax"},enumerable:!1,configurable:!0}),t.prototype.applyGradients=function(n){var r=this,a=Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n);xr(function(){var i=Gr(1,r.accBeta1),o=Jt(-r.learningRate,Pt(Se(r.iteration,r.decay),1));a.forEach(function(s,u){var l=ye.registeredVariables[s],c=!1;r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:"".concat(s,"/m"),variable:Ht(l).variable(c)}),r.accumulatedWeightedInfNorm[u]==null&&(r.accumulatedWeightedInfNorm[u]={originalName:"".concat(s,"/v"),variable:Ht(l).variable(c)});var p=Array.isArray(n)?n[u].tensor:n[s];if(p!=null){var d=r.accumulatedFirstMoment[u].variable,f=r.accumulatedWeightedInfNorm[u].variable,h=Pt(Se(d,r.beta1),Se(p,1-r.beta1)),m=Se(f,r.beta2),v=tue(p),g=AI(m,v);d.assign(h),f.assign(g);var y=Pt(Se(Jt(o,i),Jt(h,Pt(g,r.epsilon))),l);l.assign(y)}}),r.iteration.assign(Pt(r.iteration,1)),r.accBeta1.assign(Se(r.accBeta1,r.beta1))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&hi(this.accumulatedFirstMoment.map(function(n){return n.variable})),this.accumulatedWeightedInfNorm!=null&&hi(this.accumulatedWeightedInfNorm.map(function(n){return n.variable}))},t.prototype.getWeights=function(){return Oe(this,void 0,void 0,function(){return Fe(this,function(n){throw new Error("getWeights() is not implemented for Adamax yet.")})})},t.prototype.setWeights=function(n){return Oe(this,void 0,void 0,function(){return Fe(this,function(r){throw new Error("setWeights() is not implemented for Adamax yet.")})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},t})(Wl);var Wue=function(e){ue(t,e);function t(n){var r=e.call(this)||this;return r.learningRate=n,r.setLearningRate(n),r}return Object.defineProperty(t,"className",{get:function(){return"SGD"},enumerable:!1,configurable:!0}),t.prototype.applyGradients=function(n){var r=this,a=Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n);a.forEach(function(i,o){var s=Array.isArray(n)?n[o].tensor:n[i];if(s!=null){var u=ye.registeredVariables[i];xr(function(){var l=Pt(Se(r.c,s),u);u.assign(l)})}}),this.incrementIterations()},t.prototype.setLearningRate=function(n){this.learningRate=n,this.c!=null&&this.c.dispose(),this.c=Qie(Zn(-n))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getWeights=function(){return Oe(this,void 0,void 0,function(){return Fe(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()]]}})})},t.prototype.setWeights=function(n){return Oe(this,void 0,void 0,function(){return Fe(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:if(n=r.sent(),n.length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(n,r){return new n(r.learningRate)},t}(Wl);(function(e){ue(t,e);function t(n,r,a){a===void 0&&(a=!1);var i=e.call(this,n)||this;return i.learningRate=n,i.momentum=r,i.useNesterov=a,i.accumulations=[],i.m=Zn(i.momentum),i}return Object.defineProperty(t,"className",{get:function(){return"Momentum"},enumerable:!1,configurable:!0}),t.prototype.applyGradients=function(n){var r=this,a=Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n);a.forEach(function(i,o){var s=ye.registeredVariables[i];if(r.accumulations[o]==null){var u=!1;r.accumulations[o]={originalName:"".concat(i,"/momentum"),variable:xr(function(){return Ht(s).variable(u)})}}var l=r.accumulations[o].variable,c=Array.isArray(n)?n[o].tensor:n[i];c!=null&&xr(function(){var p,d=Pt(Se(r.m,l),c);r.useNesterov?p=Pt(Se(r.c,Pt(c,Se(d,r.m))),s):p=Pt(Se(r.c,d),s),l.assign(d),s.assign(p)})}),this.incrementIterations()},t.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&hi(this.accumulations.map(function(n){return n.variable}))},t.prototype.setMomentum=function(n){this.momentum=n},t.prototype.getWeights=function(){return Oe(this,void 0,void 0,function(){return Fe(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulations.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},t.prototype.setWeights=function(n){return Oe(this,void 0,void 0,function(){var r;return Fe(this,function(a){switch(a.label){case 0:return[4,this.extractIterations(n)];case 1:return n=a.sent(),r=!1,this.accumulations=n.map(function(i){return{originalName:i.name,variable:i.tensor.variable(r)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(n,r){return new n(r.learningRate,r.momentum,r.useNesterov)},t})(Wue);(function(e){ue(t,e);function t(n,r,a,i,o){r===void 0&&(r=.9),a===void 0&&(a=0),i===void 0&&(i=null),o===void 0&&(o=!1);var s=e.call(this)||this;if(s.learningRate=n,s.decay=r,s.momentum=a,s.epsilon=i,s.accumulatedMeanSquares=[],s.accumulatedMoments=[],s.accumulatedMeanGrads=[],s.centered=o,i==null&&(s.epsilon=ye.backend.epsilon()),n==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return s}return Object.defineProperty(t,"className",{get:function(){return"RMSProp"},enumerable:!1,configurable:!0}),t.prototype.applyGradients=function(n){var r=this,a=Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n);a.forEach(function(i,o){var s=ye.registeredVariables[i],u=!1;r.accumulatedMeanSquares[o]==null&&(r.accumulatedMeanSquares[o]={originalName:"".concat(i,"/rms"),variable:xr(function(){return Ht(s).variable(u)})}),r.accumulatedMoments[o]==null&&(r.accumulatedMoments[o]={originalName:"".concat(i,"/momentum"),variable:xr(function(){return Ht(s).variable(u)})}),r.accumulatedMeanGrads[o]==null&&r.centered&&(r.accumulatedMeanGrads[o]={originalName:"".concat(i,"/mg"),variable:xr(function(){return Ht(s).variable(u)})});var l=Array.isArray(n)?n[o].tensor:n[i];if(l!=null){var c=r.accumulatedMeanSquares[o].variable,p=r.accumulatedMoments[o].variable;xr(function(){var d=Pt(Se(c,r.decay),Se(Qn(l),1-r.decay));if(r.centered){var f=r.accumulatedMeanGrads[o].variable,h=Pt(Se(f,r.decay),Se(l,1-r.decay)),m=Jt(Se(l,r.learningRate),Do(Gr(d,Pt(Qn(h),r.epsilon)))),v=Pt(Se(p,r.momentum),m);c.assign(d),f.assign(h),p.assign(v);var g=Gr(s,v);s.assign(g)}else{var y=Pt(Se(c,r.decay),Se(Qn(l),1-r.decay)),v=Pt(Se(p,r.momentum),Jt(Se(l,r.learningRate),Do(Pt(y,r.epsilon))));c.assign(y),p.assign(v);var g=Gr(s,v);s.assign(g)}})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&hi(this.accumulatedMeanSquares.map(function(n){return n.variable})),this.accumulatedMeanGrads!=null&&this.centered&&hi(this.accumulatedMeanGrads.map(function(n){return n.variable})),this.accumulatedMoments!=null&&hi(this.accumulatedMoments.map(function(n){return n.variable}))},t.prototype.getWeights=function(){return Oe(this,void 0,void 0,function(){var n;return Fe(this,function(r){switch(r.label){case 0:return n=ft(ft([],re(this.accumulatedMeanSquares),!1),re(this.accumulatedMoments),!1),this.centered&&n.push.apply(n,ft([],re(this.accumulatedMeanGrads),!1)),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(a){return{name:a.originalName,tensor:a.variable}}))]}})})},t.prototype.setWeights=function(n){return Oe(this,void 0,void 0,function(){var r,a;return Fe(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(n)];case 1:return n=i.sent(),r=this.centered?n.length/3:n.length/2,a=!1,this.accumulatedMeanSquares=n.slice(0,r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(a)}}),this.accumulatedMoments=n.slice(r,r*2).map(function(o){return{originalName:o.name,variable:o.tensor.variable(a)}}),this.centered&&(this.accumulatedMeanGrads=n.slice(r*2,r*3).map(function(o){return{originalName:o.name,variable:o.tensor.variable(a)}})),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(n,r){return new n(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},t})(Wl);var _T;(function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"})(_T||(_T={}));var Uue=1.7580993408473768,Gue=1.0507009873554805;function que(e,t,n){var r=e.shape.slice();r[n]=1;var a=ht(t,r),i=CT(e,n,!0,!1),o=CT(e,n,!0,!0),s=Se(i,o);return Se(a,s)}function Hue(e,t,n){var r=e.shape.length,a=r-n.length,i=kI(n,r),o=e;i!=null&&(o=yp(e,i));var s=o.shape.slice(),u=s.splice(r-n.length,n.length),l=u.reduce(function(f,h){return f*h},1);s.push(l);var c=o.reshape(s),p=que(c,t,a);if(p=p.reshape(o.shape),i!=null){var d=B3(i);p=yp(p,d)}return p}var jue={kernelName:Ere,inputsToSave:["x"],gradFunc:function(e,t,n){var r=re(t,1),a=r[0],i=n.axis,o=[];return i==null?o=a.shape.map(function(s,u){return u}):typeof i=="number"?o=[i]:o=i,{x:function(){return Hue(a,e,o)}}}},Kue={kernelName:wE,inputsToSave:["a","b"],gradFunc:function(e,t){var n=re(t,2),r=n[0],a=n[1],i=ta(r.shape,a.shape),o=function(){var u=Jt(e,Lt(a,"float32")),l=qr(r.shape,i);return l.length>0?ht(Hn(u,l),r.shape):u},s=function(){var u=Se(e,Lt(r,"float32")),l=qr(a.shape,i);l.length>0&&(u=ht(Hn(u,l),a.shape));var c=Qn(a);return Yi(Jt(u,Lt(c,"float32")))};return{a:o,b:s}}},Xue={kernelName:Cre,inputsToSave:["x"],gradFunc:function(e,t){var n=re(t,1),r=n[0];return{x:function(){return Jt(e,Yi(Qn(r)))}}}},Yue={kernelName:Ore,inputsToSave:["x"],gradFunc:function(e,t){var n=re(t,1),r=n[0],a=Se(P3(r,6),O3(r));return{x:function(){return Se(e,Lt(a,"float32"))}}}},Jue={kernelName:Dre,inputsToSave:["x"],gradFunc:function(e,t){var n=re(t,1),r=n[0];return{x:function(){return Se(e,Lt(O3(r),"float32"))}}}},Zue={kernelName:OE,inputsToSave:["x"],gradFunc:function(e,t){var n=re(t,1),r=n[0];return{x:function(){return ht(e,r.shape)}}}},Que={kernelName:Fre,inputsToSave:["images"],gradFunc:function(e,t,n){var r=re(t,1),a=r[0],i={dy:e,images:a},o=function(){return ye.runKernel(Rre,i,n)};return{images:o}}},ele={kernelName:_re,inputsToSave:["images"],gradFunc:function(e,t,n){var r=re(t,1),a=r[0],i={dy:e,images:a},o=function(){return ye.runKernel(Are,i,n)};return{images:o}}};var tle={kernelName:ME,gradFunc:function(e,t,n){var r=n.dims,a=Bl(r,e.shape);return{x:function(){return $ue(e,a)}}}};var nle={kernelName:Mre,gradFunc:function(e){return{x:function(){return Ht(e)}}}},rle={kernelName:PE,inputsToSave:["x"],gradFunc:function(e,t){var n=re(t,1),r=n[0];return{x:function(){return Yi(Jt(e,Se(rv(r,1.5),2)))}}}},ale={kernelName:BE,inputsToSave:["condition"],gradFunc:function(e,t){var n=re(t,1),r=n[0];return{condition:function(){return Lt(Ht(r),"float32")},t:function(){return Se(e,Lt(r,e.dtype))},e:function(){return Se(e,Lt(bue(r),e.dtype))}}}},ile={kernelName:Bre,inputsToSave:["x"],gradFunc:function(e,t){var n=re(t,1),r=n[0];return{x:function(){var a=Zf(r,Zn(0)),i=Zn(Uue),o=Zn(Gue),s=Se(e,o),u=Se(Se(e,i),kv(Lt(r,"float32")));return Ml(a,s,u)}}}},ole={kernelName:VE,outputsToSave:[!0],gradFunc:function(e,t){var n=re(t,1),r=n[0];return{x:function(){return Se(e,Se(r,Gr(Zn(1),r)))}}}};var sle={kernelName:Lre,gradFunc:function(e){return{x:function(){return Ht(e)}}}},ule={kernelName:zE,inputsToSave:["x"],gradFunc:function(e,t){var n=re(t,1),r=n[0];return{x:function(){return Se(_I(Lt(r,"float32")),e)}}}},lle={kernelName:$E,inputsToSave:["x"],gradFunc:function(e,t){var n=re(t,1),r=n[0];return{x:function(){return Se(pue(Lt(r,"float32")),e)}}}},cle={kernelName:LE,inputsToSave:["x"],gradFunc:function(e,t,n){for(var r=re(t,1),a=r[0],i=n.begin,o=n.size,s=a.shape,u=re(Zse(a,i,o),2),l=u[0],c=u[1],p=[],d=0;d<e.rank;d++)p.push([l[d],s[d]-l[d]-c[d]]);return{x:function(){return Sue(e,p)}}}},ple={kernelName:$re,outputsToSave:[!0],gradFunc:function(e,t,n){var r=re(t,1),a=r[0],i=n.dim,o=!0,s=Se(e,a);return{logits:function(){return Gr(s,Se(Hn(s,[i],o),a))}}}},dle={kernelName:zre,inputsToSave:["x"],gradFunc:function(e,t){var n=re(t,1),r=n[0];return{x:function(){return Se(e,iue(r))}}}};var AT={kernelName:GE,gradFunc:function(e,t,n){var r=n.blockShape,a=n.paddings;return{x:function(){return sue(e,r,a)}}}};var FT={kernelName:qE,gradFunc:function(e,t,n){var r=n.axis;return{x:function(){return rue(e,r)}}}},fle={kernelName:WE,inputsToSave:["x"],gradFunc:function(e,t){var n=re(t,1),r=n[0];return{x:function(){return Jt(e,Se(Do(Lt(r,"float32")),2))}}}},hle={kernelName:Wre,inputsToSave:["x"],gradFunc:function(e,t){var n=re(t,1),r=n[0];return{x:function(){return Se(e,Se(Lt(r,"float32"),2))}}}},mle={kernelName:Vre,inputsToSave:["a","b"],gradFunc:function(e,t){var n=re(t,2),r=n[0],a=n[1],i=Zn(2),o=function(){return Se(e,Se(i,Gr(r,a)))},s=function(){return Se(e,Se(i,Gr(a,r)))};return{a:o,b:s}}};var vle={kernelName:YE,gradFunc:function(e){return{x:function(){return Ht(e)}}}},gle={kernelName:HE,inputsToSave:["a","b"],gradFunc:function(e,t){var n=re(t,2),r=n[0],a=n[1],i=ta(r.shape,a.shape),o=function(){var u=e,l=qr(r.shape,i);return l.length>0&&(u=Hn(u,l)),ht(u,r.shape)},s=function(){var u=e,l=qr(a.shape,i);return l.length>0&&(u=Hn(u,l)),ht(Yi(u),a.shape)};return{a:o,b:s}}},yle={kernelName:UE,inputsToSave:["x"],gradFunc:function(e,t,n){var r=re(t,1),a=r[0],i=a.shape.slice(),o=n.axis,s=Bl(o,a.shape);s.forEach(function(c){i[c]=1});var u=ht(e,i),l=Se(u,Nv(a.shape,"float32"));return{x:function(){return l}}}},ble={kernelName:Ure,inputsToSave:["x"],gradFunc:function(e,t){var n=re(t,1),r=n[0];return{x:function(){return Jt(e,Qn(_I(r)))}}}},wle={kernelName:Gre,outputsToSave:[!0],gradFunc:function(e,t){var n=re(t,1),r=n[0];return{x:function(){return Se(Gr(Zn(1),Qn(r)),e)}}}},xle={kernelName:N3,inputsToSave:["x"],gradFunc:function(e,t,n){var r=re(t,1),a=r[0],i=n.reps,o=function(){var s=Ht(a);if(a.rank===1)for(var u=0;u<i[0];++u)s=Pt(s,hp(e,[u*a.shape[0]],[a.shape[0]]));else if(a.rank===2)for(var u=0;u<i[0];++u)for(var l=0;l<i[1];++l)s=Pt(s,hp(e,[u*a.shape[0],l*a.shape[1]],[a.shape[0],a.shape[1]]));else if(a.rank===3)for(var u=0;u<i[0];++u)for(var l=0;l<i[1];++l)for(var c=0;c<i[2];++c)s=Pt(s,hp(e,[u*a.shape[0],l*a.shape[1],c*a.shape[2]],[a.shape[0],a.shape[1],a.shape[2]]));else if(a.rank===4)for(var u=0;u<i[0];++u)for(var l=0;l<i[1];++l)for(var c=0;c<i[2];++c)for(var p=0;p<i[3];++p)s=Pt(s,hp(e,[u*a.shape[0],l*a.shape[1],c*a.shape[2],p*a.shape[3]],[a.shape[0],a.shape[1],a.shape[2],a.shape[3]]));else throw new Error("Gradient for tile operation is not implemented for rank-"+"".concat(a.rank," tensors yet."));return s};return{x:o}}};var Sle={kernelName:Gm,gradFunc:function(e,t,n){var r=n,a=r.perm,i=B3(a);return{x:function(){return yp(e,i)}}}};var kle={kernelName:jE,gradFunc:function(e,t,n){var r=n,a=r.axis;return{value:function(){return NI(e,a)}}}},Nle={kernelName:KE,inputsToSave:["segmentIds"],gradFunc:function(e,t){var n=re(t,1),r=n[0],a=function(){return Tle(e,r)};return{x:a}}};function Tle(e,t){for(var n=AI(t,Ht(t)),r=vue(e,n),a=M3(t,Zn(0,"int32")),i=r.rank-a.rank,o=0;o<i;++o)a=hue(a,o+1);a=wI(a,Nv(r.shape,"bool"));var s=Ht(r);return Ml(a,r,s)}var Ele={kernelName:XE,gradFunc:function(e){return{x:function(){return Ht(e)}}}},Vy,RT,Ile=[gI,Gae,qae,Kae,Xae,Jae,Zae,Qae,tie,nie,rie,aie,sie,cie,die,mie,vie,gie,yie,Tie,Eie,Die,Pie,Rie,Vie,Gie,jie,ooe,poe,doe,Kue,foe,moe,voe,goe,yoe,woe,boe,Toe,Doe,_oe,Aoe,Foe,Roe,Ooe,Poe,Boe,Loe,zoe,Woe,xT,xT,joe,Yoe,Qoe,ese,tse,nse,ase,sse,use,lse,cse,pse,hse,ST,ST,yse,bse,jue,Xue,Yue,Jue,Zue,Que,ele,tle,nle,rle,ale,ile,ole,sle,ule,lle,cle,ple,dle,AT,AT,FT,FT,fle,mle,hle,vle,gle,yle,ble,wle,xle,Sle,kle,Nle,Ele];try{for(Of=fe(Ile),cp=Of.next();!cp.done;cp=Of.next())OT=cp.value,sae(OT)}catch(e){Vy={error:e}}finally{try{cp&&!cp.done&&(RT=Of.return)&&RT.call(Of)}finally{if(Vy)throw Vy.error}}var OT,Of,cp;function V3(e,t){return F.tidy(function(){return D.sqrt(D.sum(D.mul(e,e),t,!0))})}var eh=function(e){ue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getConfig=function(){return{}},t}(F.serialization.Serializable),W3=function(e){ue(t,e);function t(n){var r=e.call(this)||this;return r.defaultMaxValue=2,r.defaultAxis=0,r.maxValue=n.maxValue!=null?n.maxValue:r.defaultMaxValue,r.axis=n.axis!=null?n.axis:r.defaultAxis,r}return t.prototype.apply=function(n){var r=this;return F.tidy(function(){var a=V3(n,r.axis),i=D.clipByValue(a,0,r.maxValue);return D.mul(n,D.div(i,D.add(Sr(),a)))})},t.prototype.getConfig=function(){return{maxValue:this.maxValue,axis:this.axis}},t}(eh);W3.className="MaxNorm";F.serialization.registerClass(W3);var U3=function(e){ue(t,e);function t(n){var r=e.call(this)||this;return r.defaultAxis=0,r.axis=n.axis!=null?n.axis:r.defaultAxis,r}return t.prototype.apply=function(n){var r=this;return F.tidy(function(){return D.div(n,D.add(Sr(),V3(n,r.axis)))})},t.prototype.getConfig=function(){return{axis:this.axis}},t}(eh);U3.className="UnitNorm";F.serialization.registerClass(U3);var G3=function(e){ue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.apply=function(n){return D.relu(n)},t}(eh);G3.className="NonNeg";F.serialization.registerClass(G3);var q3=function(e){ue(t,e);function t(n){var r=e.call(this)||this;return r.defaultMinValue=0,r.defaultMaxValue=1,r.defaultRate=1,r.defaultAxis=0,r.minValue=n.minValue!=null?n.minValue:r.defaultMinValue,r.maxValue=n.maxValue!=null?n.maxValue:r.defaultMaxValue,r.rate=n.rate!=null?n.rate:r.defaultRate,r.axis=n.axis!=null?n.axis:r.defaultAxis,r}return t.prototype.apply=function(n){var r=this;return F.tidy(function(){var a=V3(n,r.axis),i=D.add(D.mul(r.rate,D.clipByValue(a,r.minValue,r.maxValue)),D.mul(1-r.rate,a));return D.mul(n,D.div(i,D.add(Sr(),a)))})},t.prototype.getConfig=function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}},t}(eh);q3.className="MinMaxNorm";F.serialization.registerClass(q3);var MT={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function kr(e){return c3(e)}function PT(e,t){return t===void 0&&(t={}),jf(e,F.serialization.SerializationMap.getMap().classNameMap,t,"constraint")}function Nr(e){if(e==null)return null;if(typeof e=="string"){var t=e in MT?MT[e]:e,n={className:t,config:{}};return PT(n)}else return e instanceof eh?e:PT(e)}function Cle(e){return new W3(e)}function Dle(e){return new U3(e)}function _le(){return new G3}function Ale(e){return new q3(e)}var Fle={__proto__:null,maxNorm:Cle,minMaxNorm:Ale,nonNeg:_le,unitNorm:Dle};function Rle(){return new f3}function Ole(){return new hv}function Mle(e){return new h3(e)}function Ple(e){return new m3(e)}function Ble(e){return new v3(e)}function Lle(e){return new g3(e)}function zle(e){return new y3(e)}function $le(e){return new Na(e)}function Vle(e){return new mv(e)}function Wle(e){return new vv(e)}function Ule(e){return new gv(e)}function Gle(e){return new yv(e)}function qle(e){return new bv(e)}function Hle(e){return new wv(e)}function jle(e){return new b3(e)}var Kle={__proto__:null,constant:Mle,glorotNormal:Wle,glorotUniform:Vle,heNormal:Ule,heUniform:Gle,identity:zle,leCunNormal:qle,leCunUniform:Hle,ones:Ole,orthogonal:jle,randomNormal:Ble,randomUniform:Ple,truncatedNormal:Lle,varianceScaling:$le,zeros:Rle};function Iu(e){return Oe(this,void 0,void 0,function(){var t,n,r,a,i,o,s,u;return Fe(this,function(l){switch(l.label){case 0:if(e==null)return[2];t=[],n=[],r=[];for(a in e)i=e[a],typeof i!="number"&&(o=i,t.push(o.data()),n.push(a),r.push(o));return t.length>0?[4,Promise.all(t)]:[3,2];case 1:for(s=l.sent(),u=0;u<s.length;++u)e[n[u]]=s[u][0];F.dispose(r),l.label=2;case 2:return[2]}})})}function zI(e){if(e!=null)for(var t in e){var n=e[t];typeof n!="number"&&n.dispose()}}var BT;(function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"})(BT||(BT={}));var Xle=125,bp=function(){function e(){this.validationData=null}return e.prototype.setParams=function(t){this.params=t},e.prototype.onEpochBegin=function(t,n){return Oe(this,void 0,void 0,function(){return Fe(this,function(r){return[2]})})},e.prototype.onEpochEnd=function(t,n){return Oe(this,void 0,void 0,function(){return Fe(this,function(r){return[2]})})},e.prototype.onBatchBegin=function(t,n){return Oe(this,void 0,void 0,function(){return Fe(this,function(r){return[2]})})},e.prototype.onBatchEnd=function(t,n){return Oe(this,void 0,void 0,function(){return Fe(this,function(r){return[2]})})},e.prototype.onTrainBegin=function(t){return Oe(this,void 0,void 0,function(){return Fe(this,function(n){return[2]})})},e.prototype.onTrainEnd=function(t){return Oe(this,void 0,void 0,function(){return Fe(this,function(n){return[2]})})},e.prototype.setModel=function(t){},e}(),$I=function(){function e(t,n){n===void 0&&(n=10),t==null&&(t=[]),this.callbacks=t,this.queueLength=n}return e.prototype.append=function(t){this.callbacks.push(t)},e.prototype.setParams=function(t){var n,r;try{for(var a=fe(this.callbacks),i=a.next();!i.done;i=a.next()){var o=i.value;o.setParams(t)}}catch(s){n={error:s}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}},e.prototype.setModel=function(t){var n,r;try{for(var a=fe(this.callbacks),i=a.next();!i.done;i=a.next()){var o=i.value;o.setModel(t)}}catch(s){n={error:s}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}},e.prototype.onEpochBegin=function(t,n){return Oe(this,void 0,void 0,function(){var r,a,i,o,s,u;return Fe(this,function(l){switch(l.label){case 0:n==null&&(n={}),l.label=1;case 1:l.trys.push([1,6,7,8]),r=fe(this.callbacks),a=r.next(),l.label=2;case 2:return a.done?[3,5]:(i=a.value,[4,i.onEpochBegin(t,n)]);case 3:l.sent(),l.label=4;case 4:return a=r.next(),[3,2];case 5:return[3,8];case 6:return o=l.sent(),s={error:o},[3,8];case 7:try{a&&!a.done&&(u=r.return)&&u.call(r)}finally{if(s)throw s.error}return[7];case 8:return[2]}})})},e.prototype.onEpochEnd=function(t,n){return Oe(this,void 0,void 0,function(){var r,a,i,o,s,u;return Fe(this,function(l){switch(l.label){case 0:n==null&&(n={}),l.label=1;case 1:l.trys.push([1,6,7,8]),r=fe(this.callbacks),a=r.next(),l.label=2;case 2:return a.done?[3,5]:(i=a.value,[4,i.onEpochEnd(t,n)]);case 3:l.sent(),l.label=4;case 4:return a=r.next(),[3,2];case 5:return[3,8];case 6:return o=l.sent(),s={error:o},[3,8];case 7:try{a&&!a.done&&(u=r.return)&&u.call(r)}finally{if(s)throw s.error}return[7];case 8:return[2]}})})},e.prototype.onBatchBegin=function(t,n){return Oe(this,void 0,void 0,function(){var r,a,i,o,s,u;return Fe(this,function(l){switch(l.label){case 0:n==null&&(n={}),l.label=1;case 1:l.trys.push([1,6,7,8]),r=fe(this.callbacks),a=r.next(),l.label=2;case 2:return a.done?[3,5]:(i=a.value,[4,i.onBatchBegin(t,n)]);case 3:l.sent(),l.label=4;case 4:return a=r.next(),[3,2];case 5:return[3,8];case 6:return o=l.sent(),s={error:o},[3,8];case 7:try{a&&!a.done&&(u=r.return)&&u.call(r)}finally{if(s)throw s.error}return[7];case 8:return[2]}})})},e.prototype.onBatchEnd=function(t,n){return Oe(this,void 0,void 0,function(){var r,a,i,o,s,u;return Fe(this,function(l){switch(l.label){case 0:n==null&&(n={}),l.label=1;case 1:l.trys.push([1,6,7,8]),r=fe(this.callbacks),a=r.next(),l.label=2;case 2:return a.done?[3,5]:(i=a.value,[4,i.onBatchEnd(t,n)]);case 3:l.sent(),l.label=4;case 4:return a=r.next(),[3,2];case 5:return[3,8];case 6:return o=l.sent(),s={error:o},[3,8];case 7:try{a&&!a.done&&(u=r.return)&&u.call(r)}finally{if(s)throw s.error}return[7];case 8:return[2]}})})},e.prototype.onTrainBegin=function(t){return Oe(this,void 0,void 0,function(){var n,r,a,i,o,s;return Fe(this,function(u){switch(u.label){case 0:t==null&&(t={}),u.label=1;case 1:u.trys.push([1,6,7,8]),n=fe(this.callbacks),r=n.next(),u.label=2;case 2:return r.done?[3,5]:(a=r.value,[4,a.onTrainBegin(t)]);case 3:u.sent(),u.label=4;case 4:return r=n.next(),[3,2];case 5:return[3,8];case 6:return i=u.sent(),o={error:i},[3,8];case 7:try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(o)throw o.error}return[7];case 8:return[2]}})})},e.prototype.onTrainEnd=function(t){return Oe(this,void 0,void 0,function(){var n,r,a,i,o,s;return Fe(this,function(u){switch(u.label){case 0:t==null&&(t={}),u.label=1;case 1:u.trys.push([1,6,7,8]),n=fe(this.callbacks),r=n.next(),u.label=2;case 2:return r.done?[3,5]:(a=r.value,[4,a.onTrainEnd(t)]);case 3:u.sent(),u.label=4;case 4:return r=n.next(),[3,2];case 5:return[3,8];case 6:return i=u.sent(),o={error:i},[3,8];case 7:try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(o)throw o.error}return[7];case 8:return[2]}})})},e}(),Yle=function(e){ue(t,e);function t(){return e.call(this)||this}return t.prototype.onEpochBegin=function(n){return Oe(this,void 0,void 0,function(){return Fe(this,function(r){return this.seen=0,this.totals={},[2]})})},t.prototype.onBatchEnd=function(n,r){return Oe(this,void 0,void 0,function(){var a,i,o,s,u=this;return Fe(this,function(l){r==null&&(r={}),a=r.size==null?0:r.size,this.seen+=a,i=function(c){var p=r[c];if(typeof p=="number")o.totals.hasOwnProperty(c)||(o.totals[c]=0),o.totals[c]=o.totals[c]+p*a;else{var d=void 0;c in o.totals?d=o.totals[c]:o.totals[c]=0;var f=F.tidy(function(){return F.add(u.totals[c],F.mul(p,a))});o.totals[c]=f,d?.dispose()}},o=this;for(s in r)i(s);return[2]})})},t.prototype.onEpochEnd=function(n,r){return Oe(this,void 0,void 0,function(){var a,i,o,s,u,l,c,p=this;return Fe(this,function(d){if(r!=null){a=function(f){if(i.totals[f]==null)return"continue";typeof i.totals[f]=="number"?r[f]=i.totals[f]/i.seen:F.tidy(function(){var h=F.mul(F.div(1,p.seen),p.totals[f]);r[f]=h,p.totals[f].dispose(),F.keep(r[f])})},i=this;try{for(o=fe(this.params.metrics),s=o.next();!s.done;s=o.next())u=s.value,a(u)}catch(f){l={error:f}}finally{try{s&&!s.done&&(c=o.return)&&c.call(o)}finally{if(l)throw l.error}}}return[2]})})},t}(bp),VI=function(e){ue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.onTrainBegin=function(n){return Oe(this,void 0,void 0,function(){return Fe(this,function(r){return this.epoch=[],this.history={},[2]})})},t.prototype.onEpochEnd=function(n,r){return Oe(this,void 0,void 0,function(){var a;return Fe(this,function(i){r==null&&(r={}),this.epoch.push(n);for(a in r)this.history[a]==null&&(this.history[a]=[]),this.history[a].push(r[a]);return[2]})})},t.prototype.syncData=function(){return Oe(this,void 0,void 0,function(){var n,r,a,i,o,s,u,l,c,p;return Fe(this,function(d){switch(d.label){case 0:n=[],r=[],a=[];for(i in this.history)for(o=this.history[i],s=0;s<o.length;++s)typeof o[s]!="number"&&(u=o[s],n.push(u.data()),r.push(i),a.push(s));return[4,Promise.all(n)];case 1:for(l=d.sent(),c=0;c<l.length;++c)p=this.history[r[c]][a[c]],p.dispose(),this.history[r[c]][a[c]]=l[c][0];return[2]}})})},t}(bp),WI=function(e){ue(t,e);function t(n,r){var a=e.call(this)||this;if(a.currentEpoch=0,a.nowFunc=n.nowFunc,a.nextFrameFunc=n.nextFrameFunc||F.nextFrame,a.yieldEvery=r||"auto",a.yieldEvery==="auto"&&(a.yieldEvery=Xle),a.yieldEvery==="never"&&n.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");return F.util.isNumber(a.yieldEvery)&&(a.maybeWait=Pte(a.maybeWait.bind(a),a.yieldEvery,a.nowFunc)),a.trainBegin=n.onTrainBegin,a.trainEnd=n.onTrainEnd,a.epochBegin=n.onEpochBegin,a.epochEnd=n.onEpochEnd,a.batchBegin=n.onBatchBegin,a.batchEnd=n.onBatchEnd,a.yield=n.onYield,a}return t.prototype.maybeWait=function(n,r,a){return Oe(this,void 0,void 0,function(){var i;return Fe(this,function(o){switch(o.label){case 0:return i=[],this.yield==null?[3,2]:[4,Iu(a)];case 1:o.sent(),i.push(this.yield(n,r,a)),o.label=2;case 2:return i.push(this.nextFrameFunc()),[4,Promise.all(i)];case 3:return o.sent(),[2]}})})},t.prototype.onEpochBegin=function(n,r){return Oe(this,void 0,void 0,function(){return Fe(this,function(a){switch(a.label){case 0:return this.currentEpoch=n,this.epochBegin==null?[3,3]:[4,Iu(r)];case 1:return a.sent(),[4,this.epochBegin(n,r)];case 2:a.sent(),a.label=3;case 3:return[2]}})})},t.prototype.onEpochEnd=function(n,r){return Oe(this,void 0,void 0,function(){var a;return Fe(this,function(i){switch(i.label){case 0:return a=[],this.epochEnd==null?[3,2]:[4,Iu(r)];case 1:i.sent(),a.push(this.epochEnd(n,r)),i.label=2;case 2:return this.yieldEvery==="epoch"&&a.push(this.nextFrameFunc()),[4,Promise.all(a)];case 3:return i.sent(),[2]}})})},t.prototype.onBatchBegin=function(n,r){return Oe(this,void 0,void 0,function(){return Fe(this,function(a){switch(a.label){case 0:return this.batchBegin==null?[3,3]:[4,Iu(r)];case 1:return a.sent(),[4,this.batchBegin(n,r)];case 2:a.sent(),a.label=3;case 3:return[2]}})})},t.prototype.onBatchEnd=function(n,r){return Oe(this,void 0,void 0,function(){var a;return Fe(this,function(i){switch(i.label){case 0:return a=[],this.batchEnd==null?[3,2]:[4,Iu(r)];case 1:i.sent(),a.push(this.batchEnd(n,r)),i.label=2;case 2:return this.yieldEvery==="batch"?a.push(this.nextFrameFunc()):F.util.isNumber(this.yieldEvery)&&a.push(this.maybeWait(this.currentEpoch,n,r)),[4,Promise.all(a)];case 3:return i.sent(),[2]}})})},t.prototype.onTrainBegin=function(n){return Oe(this,void 0,void 0,function(){return Fe(this,function(r){switch(r.label){case 0:return this.trainBegin==null?[3,3]:[4,Iu(n)];case 1:return r.sent(),[4,this.trainBegin(n)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},t.prototype.onTrainEnd=function(n){return Oe(this,void 0,void 0,function(){return Fe(this,function(r){switch(r.label){case 0:return this.trainEnd==null?[3,3]:[4,Iu(n)];case 1:return r.sent(),[4,this.trainEnd(n)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},t}(bp);function UI(e,t){if(e==null&&(e={}),e instanceof bp)return[e];if(Array.isArray(e)&&e[0]instanceof bp)return e;var n=Yt(e);return n.map(function(r){return new WI(r,t)})}var H3=function(){function e(){}return e.registerCallbackConstructor=function(t,n){F.util.assert(t>=0&&Number.isInteger(t),function(){return"Verbosity level is expected to be an integer >= 0, "+"but got ".concat(t)}),e.checkForDuplicate(n),e.constructors[t]==null&&(e.constructors[t]=[]),e.constructors[t].push(n)},e.checkForDuplicate=function(t){for(var n in e.constructors){var r=e.constructors[+n];r.forEach(function(a){if(a===t)throw new J("Duplicate callback constructor.")})}},e.clear=function(){e.constructors={}},e.createCallbacks=function(t){var n=[];for(var r in e.constructors){var a=+r;t>=a&&n.push.apply(n,ft([],re(e.constructors[a]),!1))}return n.map(function(i){return new i})},e}();H3.constructors={};function GI(e,t,n,r,a,i,o,s,u){var l=new VI,c=ft([new Yle],re(H3.createCallbacks(t)),!1);e!=null&&c.push.apply(c,ft([],re(e),!1)),c.push(l);var p=new $I(c);return p.setParams({epochs:n,initialEpoch:r,samples:a,steps:i,batchSize:o,verbose:t,doValidation:s,metrics:u}),{callbackList:p,history:l}}function No(e,t,n){return t===void 0&&(t={}),n===void 0&&(n=!1),jf(e,F.serialization.SerializationMap.getMap().classNameMap,t,"layer",n)}function sv(e,t){return F.tidy(function(){e.dtype!=="float32"&&(e=D.cast(e,"float32"));var n=D.sum(Xf(e),t,!0),r=D.fill(n.shape,Sr()),a=D.sqrt(D.maximum(n,r));return D.div(e,a)})}function Ul(e,t){return F.tidy(function(){return D.mean(Xf(D.sub(t,e)),-1)})}function Ev(e,t){return F.tidy(function(){return D.mean(D.abs(D.sub(t,e)),-1)})}function Sp(e,t){return F.tidy(function(){var n=D.sub(e,t),r=D.clipByValue(D.abs(e),Sr(),Number.MAX_VALUE),a=D.abs(D.div(n,r));return D.mul(100,D.mean(a,-1))})}function Jle(e,t){return F.tidy(function(){var n=D.clipByValue(t,Sr(),Number.MAX_VALUE),r=D.log(D.add(1,n)),a=D.clipByValue(e,Sr(),Number.MAX_VALUE),i=D.log(D.add(1,a));return D.mean(Xf(D.sub(r,i)),-1)})}function Zle(e,t){return F.tidy(function(){var n=D.maximum(0,D.sub(1,D.mul(e,t)));return D.mean(Xf(n),-1)})}function Qle(e,t){return F.tidy(function(){var n=D.maximum(0,D.sub(1,D.mul(e,t)));return D.mean(n,-1)})}function ece(e,t){return F.tidy(function(){var n=D.sum(D.mul(e,t),-1),r=D.max(D.mul(D.sub(1,e),t),-1);return D.maximum(0,D.add(1,D.sub(r,n)))})}function tce(e,t){return F.tidy(function(){var n=Math.log(2),r=D.sub(t,e),a=D.sub(D.add(r,D.softplus(D.mul(-2,r))),n);return D.mean(a,-1)})}function Gf(e,t,n){return n===void 0&&(n=!1),F.tidy(function(){if(n)t=D.softmax(t);else{var r=D.sum(t,t.shape.length-1,!0);t=D.div(t,r)}return t=D.clipByValue(t,Sr(),1-Sr()),D.neg(D.sum(D.mul(D.cast(e,"float32"),D.log(t)),t.shape.length-1))})}function uv(e,t,n){return n===void 0&&(n=!1),F.tidy(function(){var r=D.cast(D.floor(Kte(e)),"int32");t=D.clipByValue(t,Sr(),1-Sr());var a=t.shape,i=D.reshape(D.oneHot(r,a[a.length-1]),a);return Gf(i,t,n)})}function nce(e,t){if(!F.util.arraysEqual(e.shape,t.shape))throw new J("logits and labels must have the same shape, but got shapes "+"".concat(JSON.stringify(e.shape)," and ").concat(JSON.stringify(t.shape)));return F.tidy(function(){var n=D.relu(t),r=D.neg(D.abs(t));return D.add(D.sub(n,D.mul(t,e)),D.log1p(D.exp(r)))})}function Iv(e,t){return F.tidy(function(){var n;return n=D.clipByValue(t,Sr(),1-Sr()),n=D.log(D.div(n,D.sub(1,n))),D.mean(nce(e,n),-1)})}function rce(e,t){return F.tidy(function(){var n=D.clipByValue(e,Sr(),1),r=D.clipByValue(t,Sr(),1);return D.sum(D.mul(e,D.log(D.div(n,r))),-1)})}function ace(e,t){return F.tidy(function(){var n=D.log(D.add(Sr(),t));return D.mean(D.sub(t,D.mul(e,n)),-1)})}function j3(e,t){return F.tidy(function(){var n=sv(e,-1),r=sv(t,-1),a=D.mul(n,r);return D.neg(D.sum(a,-1))})}var lv={meanSquaredError:Ul,meanAbsoluteError:Ev,meanAbsolutePercentageError:Sp,meanSquaredLogarithmicError:Jle,squaredHinge:Zle,hinge:Qle,categoricalHinge:ece,logcosh:tce,categoricalCrossentropy:Gf,sparseCategoricalCrossentropy:uv,binaryCrossentropy:Iv,kullbackLeiblerDivergence:rce,poisson:ace,cosineProximity:j3};function Wy(e){if(typeof e=="string"){if(e in lv)return lv[e];var t="Unknown loss ".concat(e);throw e.toLowerCase().includes("softmaxcrossentropy")&&(t="Unknown loss ".concat(e,". ")+'Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new J(t)}else return e}function K3(e,t){return F.tidy(function(){var n=D.mul(.5,D.onesLike(t)),r=is(D.greater(t,n),e.dtype);return D.mean(D.equal(e,r),-1)})}function X3(e,t){return F.tidy(function(){return is(D.equal(D.argMax(e,-1),D.argMax(t,-1)),"float32")})}function qI(e,t){return F.tidy(function(){return D.cast(D.sum(D.logicalAnd(D.equal(e,1),D.equal(t,1))),"float32")})}function ice(e,t){return F.tidy(function(){return D.cast(D.sum(D.logicalAnd(D.equal(e,1),D.equal(t,0))),"float32")})}function oce(e,t){return F.tidy(function(){return D.cast(D.sum(D.logicalAnd(D.equal(e,0),D.equal(t,1))),"float32")})}function HI(e,t){return F.tidy(function(){var n=qI(e,t),r=oce(e,t),a=D.add(n,r);return D.cast(D.where(D.greater(a,0),D.div(n,a),0),"float32")})}function sce(e,t){return F.tidy(function(){var n=qI(e,t),r=ice(e,t),a=D.add(n,r);return D.cast(D.where(D.greater(a,0),D.div(n,a),0),"float32")})}function jI(e,t){return Iv(e,t)}function KI(e,t){return e.rank===t.rank&&(e=D.squeeze(e,[e.rank-1])),t=D.argMax(t,-1),t.dtype!==e.dtype&&(t=D.cast(t,e.dtype)),D.cast(D.equal(e,t),"float32")}function uce(e,t){return F.tidy(function(){var n=e.sub(t).square().sum(),r=e.sub(e.mean()).square().sum();return D.scalar(1).sub(n.div(r))})}var lce=Ul,cce=Ul,pce=Ev,dce=Ev,fce=Sp,hce=Sp,Y3=Gf,mce=j3,XI=uv,cv={binaryAccuracy:K3,categoricalAccuracy:X3,precision:HI,categoricalCrossentropy:Y3,sparseCategoricalCrossentropy:XI,mse:lce,MSE:cce,mae:pce,MAE:dce,mape:fce,MAPE:hce,cosine:mce};function vce(e){if(typeof e=="string"&&e in cv)return cv[e];if(typeof e!="string"&&e!=null)return e;throw new J("Unknown metric ".concat(e))}function Wm(e){var t,n,r,a;if(ns(e!==null,"Unknown LossOrMetricFn ".concat(e)),typeof e=="string")return e;var i=void 0;try{for(var o=fe(Object.keys(lv)),s=o.next();!s.done;s=o.next()){var u=s.value;if(lv[u]===e){i=u;break}}}catch(p){t={error:p}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}if(i!==void 0)return i;try{for(var l=fe(Object.keys(cv)),c=l.next();!c.done;c=l.next()){var u=c.value;if(cv[u]===e){i=u;break}}}catch(p){r={error:p}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(r)throw r.error}}return i!==void 0?i:e.name}function gce(e){var t={Adagrad:function(){return F.train.adagrad(.01)},Adadelta:function(){return F.train.adadelta(1,.95,Sr())},Adam:function(){return F.train.adam(.001,.9,.999,Sr())},Adamax:function(){return F.train.adamax(.002,.9,.999,Sr(),0)},RMSProp:function(){return F.train.rmsprop(.001,.9,0,Sr())},SGD:function(){return F.train.sgd(.01)}};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new J("Unknown Optimizer ".concat(e))}var LT=1*1024*1024;function zT(e,t,n){if(n===void 0&&(n=!1),e==null||typeof e!="object"||Object.getPrototypeOf(e)!==Object.prototype||!o3(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){var r=JSON.stringify(e);r.length>LT&&console.warn('User-defined metadata of model "'.concat(t,'" is too large in ')+"size (length=".concat(r.length," when serialized). It is not ")+"recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+"".concat(LT,"."))}}function o3(e){var t,n,r,a;if(e===null)return!0;if(typeof e=="object")if(Object.getPrototypeOf(e)===Object.prototype){var i=Object.keys(e);try{for(var o=fe(i),s=o.next();!s.done;s=o.next()){var u=s.value;if(typeof u!="string"||!o3(e[u]))return!1}}catch(f){t={error:f}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return!0}else if(Array.isArray(e)){try{for(var l=fe(e),c=l.next();!c.done;c=l.next()){var p=c.value;if(!o3(p))return!1}}catch(f){r={error:f}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(r)throw r.error}}return!0}else return!1;else{var d=typeof e;return d==="string"||d==="number"||d==="boolean"}}function yce(e,t,n,r){r===void 0&&(r=console.log);var a=wce(e),i=["Layer (type)","Input Shape","Output shape","Param #"];a?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(function(d){return Math.floor(t*d)}));var o;if(!a){i.push("Receives inputs"),o=[];for(var s in e.nodesByDepth)o.push.apply(o,ft([],re(e.nodesByDepth[s]),!1))}r("_".repeat(t)),pv(i,n,r),r("=".repeat(t));for(var u=e.layers,l=0;l<u.length;++l)a?xce(u[l],n,r):Sce(u[l],n,o,r),r((l===u.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();var c=bce(e),p=Xm(e.nonTrainableWeights);r("Total params: ".concat(c+p)),r("Trainable params: ".concat(c)),r("Non-trainable params: ".concat(p)),r("_".repeat(t))}function bce(e){var t;return e.collectedTrainableWeights!=null?t=Xm(e.collectedTrainableWeights):t=Xm(e.trainableWeights),t}function wce(e){var t,n,r,a,i,o,s=!0,u=[],l=[];for(var c in e.nodesByDepth)u.push(e.nodesByDepth[c]);try{for(var p=fe(u),d=p.next();!d.done;d=p.next()){var f=d.value;if(f.length>1||f.length===1&&f[0].inboundLayers.length>1){s=!1;break}l.push.apply(l,ft([],re(f),!1))}}catch(x){t={error:x}}finally{try{d&&!d.done&&(n=p.return)&&n.call(p)}finally{if(t)throw t.error}}if(s)try{for(var h=fe(e.layers),m=h.next();!m.done;m=h.next()){var v=m.value,g=!1;try{for(var y=(i=void 0,fe(v.inboundNodes)),w=y.next();!w.done;w=y.next()){var b=w.value;if(l.indexOf(b)!==-1)if(g){s=!1;break}else g=!0}}catch(x){i={error:x}}finally{try{w&&!w.done&&(o=y.return)&&o.call(y)}finally{if(i)throw i.error}}if(!s)break}}catch(x){r={error:x}}finally{try{m&&!m.done&&(a=h.return)&&a.call(h)}finally{if(r)throw r.error}}return s}function pv(e,t,n){n===void 0&&(n=console.log);for(var r="",a=0;a<e.length;++a)a>0&&(r=r.slice(0,r.length-1)+" "),r+=e[a],r=r.slice(0,t[a]),r+=" ".repeat(t[a]-r.length);n(r)}function xce(e,t,n){var r,a;try{a=e.inboundNodes.map(function(u){return JSON.stringify(u.inputShapes)}).join(",")}catch{a="multiple"}try{r=JSON.stringify(e.outputShape)}catch{r="multiple"}var i=e.name,o=e.getClassName(),s=["".concat(i," (").concat(o,")"),a,r,e.countParams().toString()];pv(s,t,n)}function Sce(e,t,n,r){var a,i,o,s;try{s=e.inboundNodes.map(function(b){return JSON.stringify(b.inputShapes)}).join(",")}catch{s="multiple"}try{o=JSON.stringify(e.outputShape)}catch{o="multiple"}var u=[];try{for(var l=fe(e.inboundNodes),c=l.next();!c.done;c=l.next()){var p=c.value;if(!(n!=null&&n.length>0&&n.indexOf(p)===-1))for(var d=0;d<p.inboundLayers.length;++d){var f=p.inboundLayers[d].name,h=p.nodeIndices[d],m=p.tensorIndices[d];u.push("".concat(f,"[").concat(h,"][").concat(m,"]"))}}}catch(b){a={error:b}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(a)throw a.error}}var v=e.name,g=e.getClassName(),y=u.length===0?"":u[0],w=["".concat(v," (").concat(g,")"),s,o,e.countParams().toString(),y];pv(w,t,r);for(var d=1;d<u.length;++d)pv(["","","","",u[d]],t,r)}function YI(e,t,n){return(e==="inboundNodes"||e==="outputLayers"||e==="inputLayers")&&t===0&&typeof n=="string"}function qf(e,t){var n,r;if(e===null)return null;if(typeof e=="string")return _l(e);if(typeof e=="number"||typeof e=="boolean")return e;if(e instanceof Array){for(var a=[],i=e.length,o=0;o<i;++o){var s=e[o];YI(t,o,s)?a.push(s):a.push(qf(s,t))}return a}else{var u={};try{for(var l=fe(Object.keys(e)),c=l.next();!c.done;c=l.next()){var p=c.value,d=e[p];if(p==="name"&&typeof d=="string")u[p]=d;else{var f=_l(p);u[f]=qf(d,f)}}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return u}}function s3(e,t){var n,r;if(e==null)return null;if(typeof e=="string")return Ls(e);if(typeof e=="number"||typeof e=="boolean")return e;if(e instanceof Array){for(var a=[],i=e.length,o=0;o<i;++o){var s=e[o];YI(t,o,s)?a.push(s):a.push(s3(s,t))}return a}else{var u={};try{for(var l=fe(Object.keys(e)),c=l.next();!c.done;c=l.next()){var p=c.value,d=e[p],f=Ls(p);(p==="name"||p==="className")&&typeof d=="string"?u[f]=d:u[f]=s3(d,p)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return u}}var J3="4.21.0",kce=function(e){var t=Object.keys(e);if(t.length===0)return!1;var n=t[0].split("/");return!isNaN(parseInt(n[n.length-1],10))},Nce=function(e){ue(t,e);function t(n){var r,a,i,o,s,u,l,c,p,d,f,h,m,v,g,y,w,b,x,k,N,E,C,R,A=e.call(this,{})||this;if(A.containerNodes=new Set,A.name=n.name,A.name==null){var M=A.getClassName().toLowerCase();A.name=dv(M)}if(A.supportsMasking=!1,A.trainable_=!0,Array.isArray(n.inputs)?A.inputs=n.inputs.slice():A.inputs=[n.inputs],Array.isArray(n.outputs)?A.outputs=n.outputs.slice():A.outputs=[n.outputs],Du(A.inputs).length!==A.inputs.length)throw new J("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+"".concat(A.inputs.map(function(Dt){return Dt.name})));Du(A.outputs).length!==A.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+"".concat(A.outputs.map(function(Dt){return Dt.name}))),A.inputLayers=[],A.inputLayersNodeIndices=[],A.inputLayersTensorIndices=[],A.outputLayers=[],A.outputLayersNodeIndices=[],A.outputLayersTensorIndices=[],A.layers=[],A.internalContainerRefs=[];try{for(var $=fe(A.outputs),z=$.next();!z.done;z=$.next()){var L=z.value,B=L.sourceLayer,W=L.nodeIndex,Y=L.tensorIndex;A.outputLayers.push(B),A.outputLayersNodeIndices.push(W),A.outputLayersTensorIndices.push(Y)}}catch(Dt){r={error:Dt}}finally{try{z&&!z.done&&(a=$.return)&&a.call($)}finally{if(r)throw r.error}}try{for(var Q=fe(A.inputs),G=Q.next();!G.done;G=Q.next()){var L=G.value,B=L.sourceLayer,W=L.nodeIndex,Y=L.tensorIndex;ns(W===0,"input layer has >1 nodes"),ns(Y===0,"input layer has >1 tensors"),A.inputLayers.push(B),A.inputLayersNodeIndices.push(W),A.inputLayersTensorIndices.push(Y)}}catch(Dt){i={error:Dt}}finally{try{G&&!G.done&&(o=Q.return)&&o.call(Q)}finally{if(i)throw i.error}}A.inputNames=[],A.outputNames=[],A.feedInputShapes=[],A.feedInputNames=[],A.feedOutputNames=[];for(var X=0;X<A.inputLayers.length;X++){var B=A.inputLayers[X];if(!(B instanceof wp))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. "+"Received inputs: ".concat(n.inputs,". ")+"Input ".concat(X," (0-based) originates ")+"from layer type ".concat(B.getClassName(),"."));A.inputNames.push(B.name),A.feedInputShapes.push(B.batchInputShape),A.feedInputNames.push(B.name)}try{for(var ie=fe(A.outputLayers),ae=ie.next();!ae.done;ae=ie.next()){var B=ae.value;A.outputNames.push(B.name)}}catch(Dt){s={error:Dt}}finally{try{ae&&!ae.done&&(u=ie.return)&&u.call(ie)}finally{if(s)throw s.error}}A.internalInputShapes=A.inputs.map(function(Dt){return Dt.shape}),A.internalOutputShapes=A.outputs.map(function(Dt){return Dt.shape});var le={},de={},ge={},Ee={},he={},xe=[],Ne=function(Dt,_i,fo,Ma,il,K5){(Ma==null||il==null||K5==null)&&(Ma=Dt.sourceLayer,il=Dt.nodeIndex,K5=Dt.tensorIndex);var oi=Ma.inboundNodes[il];if(fo.indexOf(oi)!==-1)throw new as("The tensor ".concat(Dt.name,' at layer "').concat(Ma.name,'" ')+"is part of a cycle.");if(_i.indexOf(oi)===-1){A.containerNodes.add(t.nodeKey(Ma,il)),Ma.id in he||(he[Ma.id]=Object.keys(he).length),fo.indexOf(oi)===-1&&fo.push(oi);for(var zz=oi.inboundLayers.length,Ac=0;Ac<zz;Ac++){var $z=oi.inputTensors[Ac],Vz=oi.inboundLayers[Ac],Wz=oi.nodeIndices[Ac],Uz=oi.tensorIndices[Ac];Ne($z,_i,fo,Vz,Wz,Uz)}for(_i.push(oi);fo.indexOf(oi)>=0;)fo.splice(fo.indexOf(oi),1);xe.push(oi)}},$e=[],pt=[];try{for(var It=fe(A.outputs),xt=It.next();!xt.done;xt=It.next()){var L=xt.value;Ne(L,$e,pt)}}catch(Dt){l={error:Dt}}finally{try{xt&&!xt.done&&(c=It.return)&&c.call(It)}finally{if(l)throw l.error}}var yt=xe.slice().reverse();try{for(var Et=fe(yt),Nt=Et.next();!Nt.done;Nt=Et.next()){var dt=Nt.value;de[dt.id]=dt,dt.id in le||(le[dt.id]=0);var gt=le[dt.id],mt=ge[dt.outboundLayer.id]==null?0:ge[dt.outboundLayer.id];gt=Math.max(gt,mt),ge[dt.outboundLayer.id]=gt,Ee[dt.outboundLayer.id]=dt.outboundLayer,le[dt.id]=gt;for(var X=0;X<dt.inboundLayers.length;X++){var Dn=dt.inboundLayers[X],W=dt.nodeIndices[X],ct=Dn.inboundNodes[W],Bt=le[ct.id]==null?0:le[ct.id];le[ct.id]=Math.max(gt+1,Bt),de[ct.id]=ct}}}catch(Dt){p={error:Dt}}finally{try{Nt&&!Nt.done&&(d=Et.return)&&d.call(Et)}finally{if(p)throw p.error}}var rr={};for(var oa in le){var gt=le[oa];gt in rr||(rr[gt]=[]),rr[gt].push(de[oa])}var mr={};for(var ar in ge){var gt=ge[ar];gt in mr||(mr[gt]=[]),mr[gt].push(Ee[ar])}var _n=Object.keys(mr).map(function(Dt){return parseInt(Dt,10)}).sort(zm);A.layers=[];try{for(var Ra=fe(_n),sa=Ra.next();!sa.done;sa=Ra.next()){var gt=sa.value,Oa=mr[gt];Oa.sort(function(_i,fo){var Ma=he[_i.id],il=he[fo.id];return Ma<il?-1:Ma>il?1:0});try{for(var Xn=(m=void 0,fe(Oa)),Ss=Xn.next();!Ss.done;Ss=Xn.next()){var B=Ss.value;B instanceof t&&A.internalContainerRefs.push(B),A.layers.push(B)}}catch(_i){m={error:_i}}finally{try{Ss&&!Ss.done&&(v=Xn.return)&&v.call(Xn)}finally{if(m)throw m.error}}}}catch(Dt){f={error:Dt}}finally{try{sa&&!sa.done&&(h=Ra.return)&&h.call(Ra)}finally{if(f)throw f.error}}A.layersByDepth=mr,_n=Object.keys(rr).map(function(Dt){return parseInt(Dt,10)}).sort(zm);var Dc=A.inputs.slice(),R1=[];try{for(var ks=fe(_n),al=ks.next();!al.done;al=ks.next()){var gt=al.value;try{for(var _c=(w=void 0,fe(rr[gt])),Ad=_c.next();!Ad.done;Ad=_c.next()){var dt=Ad.value,B=dt.outboundLayer;if(B!=null){try{for(var O1=(x=void 0,fe(dt.inputTensors)),Fd=O1.next();!Fd.done;Fd=O1.next()){var L=Fd.value;if(Dc.indexOf(L)===-1)throw new as("Graph disconnected: cannot obtain value for tensor ".concat(L)+' at layer "'.concat(B.name,'". ')+"The following previous layers were accessed without "+"issue: ".concat(R1))}}catch(Ma){x={error:Ma}}finally{try{Fd&&!Fd.done&&(k=O1.return)&&k.call(O1)}finally{if(x)throw x.error}}try{for(var M1=(N=void 0,fe(dt.outputTensors)),Rd=M1.next();!Rd.done;Rd=M1.next()){var L=Rd.value;Dc.push(L)}}catch(Ma){N={error:Ma}}finally{try{Rd&&!Rd.done&&(E=M1.return)&&E.call(M1)}finally{if(N)throw N.error}}R1.push(B.name)}}}catch(_i){w={error:_i}}finally{try{Ad&&!Ad.done&&(b=_c.return)&&b.call(_c)}finally{if(w)throw w.error}}}}catch(Dt){g={error:Dt}}finally{try{al&&!al.done&&(y=ks.return)&&y.call(ks)}finally{if(g)throw g.error}}A.nodesByDepth=rr;var B2=A.layers.map(function(Dt){return Dt.name}),Bz=function(Dt){var _i=B2.filter(function(fo){return fo===Dt}).length;if(_i!==1)throw new as('The name "'.concat(Dt,'" is used ').concat(_i," times ")+"in the model. All layer names should be unique. Layer names: "+JSON.stringify(B2))};try{for(var P1=fe(B2),Od=P1.next();!Od.done;Od=P1.next()){var Lz=Od.value;Bz(Lz)}}catch(Dt){C={error:Dt}}finally{try{Od&&!Od.done&&(R=P1.return)&&R.call(P1)}finally{if(C)throw C.error}}return A.outboundNodes=[],A.inboundNodes=[],new xv({outboundLayer:A,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:A.inputs,outputTensors:A.outputs,inputMasks:A.inputs.map(function(Dt){return null}),outputMasks:A.outputs.map(function(Dt){return null}),inputShapes:A.inputs.map(function(Dt){return Dt.shape}),outputShapes:A.outputs.map(function(Dt){return Dt.shape})}),A.built=!0,A._refCount=1,A}return t.prototype.assertNotDisposed=function(){if(this._refCount===0)throw new Error("Container '".concat(this.name,"' is already disposed."))},t.prototype.dispose=function(){var n,r,a,i;this.assertNotDisposed();var o={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){try{for(var s=fe(this.layers),u=s.next();!u.done;u=s.next()){var l=u.value;o.numDisposedVariables+=l.dispose().numDisposedVariables}}catch(f){n={error:f}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}try{for(var c=fe(this.internalContainerRefs),p=c.next();!p.done;p=c.next()){var d=p.value;o.numDisposedVariables+=d.dispose().numDisposedVariables}}catch(f){a={error:f}}finally{try{p&&!p.done&&(i=c.return)&&i.call(c)}finally{if(a)throw a.error}}}return o.refCountAfterDispose=this._refCount,o},Object.defineProperty(t.prototype,"trainable",{get:function(){return this.trainable_},set:function(n){this.layers.forEach(function(r){r._trainableWeights.forEach(function(a){return a.trainable=n})}),this.trainable_=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trainableWeights",{get:function(){var n,r;if(this._trainableWeights.length>0)throw new J("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];var a=[];try{for(var i=fe(this.layers),o=i.next();!o.done;o=i.next()){var s=o.value;a=a.concat(s.trainableWeights)}}catch(u){n={error:u}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return a},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nonTrainableWeights",{get:function(){var n,r,a,i,o=[];try{for(var s=fe(this.layers),u=s.next();!u.done;u=s.next()){var l=u.value;o.push.apply(o,ft([],re(l.nonTrainableWeights),!1))}}catch(f){n={error:f}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}if(!this.trainable){var c=[];try{for(var p=fe(this.layers),d=p.next();!d.done;d=p.next()){var l=d.value;c.push.apply(c,ft([],re(l.trainableWeights),!1))}}catch(f){a={error:f}}finally{try{d&&!d.done&&(i=p.return)&&i.call(p)}finally{if(a)throw a.error}}return c.concat(o)}return o},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"weights",{get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)},enumerable:!1,configurable:!0}),t.prototype.loadWeights=function(n,r){var a,i,o,s;r===void 0&&(r=!0);var u={},l=0,c=kce(n);c&&this.parseWeights(n);try{for(var p=fe(this.layers),d=p.next();!d.done;d=p.next()){var f=d.value;try{for(var h=(o=void 0,fe(f.weights.entries())),m=h.next();!m.done;m=h.next()){var v=re(m.value,2),g=v[0],y=v[1],w=c?"".concat(y.name.split("/").slice(0,-1).join("/")+"/").concat(g):y.originalName;if(u[w]!=null)throw new J("Duplicate weight name: ".concat(w));u[w]=y,l++}}catch(R){o={error:R}}finally{try{m&&!m.done&&(s=h.return)&&s.call(h)}finally{if(o)throw o.error}}}}catch(R){a={error:R}}finally{try{d&&!d.done&&(i=p.return)&&i.call(p)}finally{if(a)throw a.error}}var b=[];for(var x in n){var k=x;if(u[x]==null){var N=x.split("/"),E=N.slice(0,-2).concat([N[N.length-1]]);k=E.join("/")}if(u[k]!=null)b.push([u[k],n[x]]);else if(r)throw new J("Provided weight data has no target variable: ".concat(x));delete u[k]}if(r){var C=[];for(var x in u)C.push(x);if(C.length>0)throw new J("".concat(C.length," of ").concat(l," weights are not set: ")+"".concat(C))}w3(b)},t.prototype.parseWeights=function(n){var r=function(i){var o=i.split("/"),s=["vars","layer_checkpoint_dependencies"],u=o.map(function(l){return l.startsWith("_")?l.slice(1):l}).filter(function(l){return!s.includes(l)}).join("/");u!==i&&(n[u]=n[i],delete n[i])};for(var a in Object.keys(n))r(a)},t.prototype.updatedConfig=function(){var n=this.getConfig(),r={};return r.className=this.getClassName(),r.config=n,r.kerasVersion="tfjs-layers ".concat(J3),r.backend="TensorFlow.js",r},t.prototype.toJSON=function(n,r){r===void 0&&(r=!0);var a=s3(this.updatedConfig());return r?JSON.stringify(a):a},t.prototype.call=function(n,r){var a=this;return F.tidy(function(){n=Yt(n);for(var i=new dp,o=0;o<a.inputs.length;++o)i.add(a.inputs[o],n[o]);return Bf(a.outputs,i,r)})},t.prototype.computeMask=function(n,r){var a=this;return F.tidy(function(){n=Yt(n);var i;return r==null?i=Ol(null,n.length):i=Yt(r),a.runInternalGraph(n,i)[1]})},t.prototype.computeOutputShape=function(n){var r,a,i,o,s=Km(n);if(s.length!==this.inputLayers.length)throw new J("Invalid inputShape argument ".concat(n,": ")+"model has ".concat(this.inputLayers.length," tensor inputs."));for(var u={},l=0;l<s.length;l++){var c=this.inputLayers[l],p=s[l],d=c.name+"_0_0";u[d]=p}var f=Object.keys(this.nodesByDepth).map(function(W){return parseInt(W,10)}).sort(zm);if(f.length>1)try{for(var h=fe(f),m=h.next();!m.done;m=h.next()){var v=m.value,g=this.nodesByDepth[v];try{for(var y=(i=void 0,fe(g)),w=y.next();!w.done;w=y.next()){var b=w.value,c=b.outboundLayer;if(this.inputLayers.map(function(Y){return Y.id}).indexOf(c.id)===-1){for(var x=[],k=0;k<b.inboundLayers.length;k++){var N=b.inboundLayers[k],E=b.nodeIndices[k],C=b.tensorIndices[k],d="".concat(N.name,"_").concat(E,"_").concat(C),R=u[d];x.push(R)}for(var A=c.computeOutputShape(ka(x)),M=Km(A),$=c.inboundNodes.indexOf(b),k=0;k<M.length;k++){var d="".concat(c.name,"_").concat($,"_").concat(k);u[d]=M[k]}}}}catch(W){i={error:W}}finally{try{w&&!w.done&&(o=y.return)&&o.call(y)}finally{if(i)throw i.error}}}}catch(W){r={error:W}}finally{try{m&&!m.done&&(a=h.return)&&a.call(h)}finally{if(r)throw r.error}}for(var z=[],L=[],l=0;l<this.outputLayers.length;l++){var c=this.outputLayers[l],$=this.outputLayersNodeIndices[l],C=this.outputLayersTensorIndices[l],d="".concat(c.name,"_").concat($,"_").concat(C);L.push(d)}for(var l=0;l<L.length;l++){var B=L[l];ns(B in u),z.push(u[B])}return ka(z)},t.prototype.runInternalGraph=function(n,r){var a,i,o,s,u,l,c,p;r==null&&(r=Ol(null,n.length));for(var d={},f=0;f<this.inputs.length;++f){var h=this.inputs[f],m=n[f],v=r[f];d[h.id]=[m,v]}var g=Object.keys(this.nodesByDepth).map(function(Ne){return parseInt(Ne,10)}).sort(zm);try{for(var y=fe(g),w=y.next();!w.done;w=y.next()){var b=w.value,x=this.nodesByDepth[b];try{for(var k=(o=void 0,fe(x)),N=k.next();!N.done;N=k.next()){var E=N.value,C=E.outboundLayer,R=E.inputTensors,A=E.outputTensors,M=new Array;try{for(var $=(u=void 0,fe(R)),z=$.next();!z.done;z=$.next()){var h=z.value;h.id in d&&M.push(d[h.id])}}catch(Ne){u={error:Ne}}finally{try{z&&!z.done&&(l=$.return)&&l.call($)}finally{if(u)throw u.error}}if(M.length===R.length){var L={},B=void 0,W=void 0,Y=void 0,Q=void 0;if(E.callArgs!=null&&(L=E.callArgs),M.length===1){var G=re(M[0],2),X=G[0],ie=G[1];L.mask==null&&(L.mask=ie),Y=Yt(C.call(X,L)),Q=Yt(C.computeMask(X,ie)),B=[X],W=[ie]}else B=M.map(function(Ne){return Ne[0]}),W=M.map(function(Ne){return Ne[1]}),L.mask==null&&(L.mask=W),Y=Yt(C.call(B,L)),Q=Yt(C.computeMask(B,W));if(C.activityRegularizer)throw new _t("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(var f=0;f<A.length;++f){var h=A[f],m=Y[f],v=Q[f];d[h.id]=[m,v]}}}}catch(Ne){o={error:Ne}}finally{try{N&&!N.done&&(s=k.return)&&s.call(k)}finally{if(o)throw o.error}}}}catch(Ne){a={error:Ne}}finally{try{w&&!w.done&&(i=y.return)&&i.call(y)}finally{if(a)throw a.error}}var ae=[],le=[],de=[];try{for(var ge=fe(this.outputs),Ee=ge.next();!Ee.done;Ee=ge.next()){var h=Ee.value;ns(h.id in d,"Could not compute output ".concat(h.name," : ").concat(h.id));var he=re(d[h.id],2),xe=he[0],v=he[1];de.push(xe.shape),ae.push(xe),le.push(v)}}catch(Ne){c={error:Ne}}finally{try{Ee&&!Ee.done&&(p=ge.return)&&p.call(ge)}finally{if(c)throw c.error}}return[ae,le,de]},t.prototype.buildNodeConversionMap=function(n){var r,a,i={},o;try{for(var s=fe(this.layers),u=s.next();!u.done;u=s.next()){var l=u.value;o=l instanceof t?1:0;for(var c=0;c<l.inboundNodes.length;c++){var p=t.nodeKey(l,c);this.containerNodes.has(p)&&(i[p]=o,o+=1)}}}catch(d){r={error:d}}finally{try{u&&!u.done&&(a=s.return)&&a.call(s)}finally{if(r)throw r.error}}return i},t.prototype.getLayer=function(n,r){var a,i;if(r!=null)return this.findLayer(r);if(n==null)throw new J("Provide either a layer name or layer index");if(typeof n=="number")return this.findLayer(n);try{for(var o=fe(this.layers),s=o.next();!s.done;s=o.next()){var u=s.value;if(u.name===n)return u}}catch(l){a={error:l}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(a)throw a.error}}throw new J("No such layer: ".concat(n))},t.prototype.findLayer=function(n){if(this.layers.length<=n)throw new J("Was asked to retrieve layer at index ".concat(n,", but model only ")+"has ".concat(this.layers.length," layer(s)."));return this.layers[n]},t.prototype.calculateLosses=function(){var n=this;return F.tidy(function(){var r,a,i=[];try{for(var o=fe(n.layers),s=o.next();!s.done;s=o.next())for(var u=s.value,l=0;l<u.inboundNodes.length;++l){var c=t.nodeKey(u,l);n.containerNodes.has(c)&&i.push.apply(i,ft([],re(u.calculateLosses()),!1))}}catch(p){r={error:p}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i})},t.prototype.getConfig=function(){var n,r,a={name:this.name},i=this.buildNodeConversionMap(this.layers),o=[];try{for(var s=fe(this.layers),u=s.next();!u.done;u=s.next()){for(var l=u.value,c=l.getClassName(),p=l.getConfig(),d=[],f=0;f<l.inboundNodes.length;f++){var h=l.inboundNodes[f],m=t.nodeKey(l,f),v={};if(this.containerNodes.has(m)){if(h.callArgs)try{JSON.stringify(h.callArgs),v=h.callArgs}catch{console.warn("Layer ".concat(l.name," was passed ")+"non-serializable keyword arguments: "+"".concat(h.callArgs,". They will not be included ")+"in the serialized model (and thus will be missing at deserialization time)."),v={}}if(h.inboundLayers.length>0){for(var g=[],y=0;y<h.inboundLayers.length;y++){var w=h.inboundLayers[y],b=h.nodeIndices[y],x=h.tensorIndices[y],k=t.nodeKey(w,b),N=i[k];N==null&&(N=0),g.push([w.name,N,x,v])}d.push(g)}}}var E={};E.name=l.name,E.className=c,E.config=p,E.inboundNodes=d,o.push(E)}}catch(A){n={error:A}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}a.layers=o;for(var C=[],y=0;y<this.inputLayers.length;y++){var l=this.inputLayers[y],b=this.inputLayersNodeIndices[y],m=t.nodeKey(l,b);if(this.containerNodes.has(m)){var N=i[m];N==null&&(N=0);var x=this.inputLayersTensorIndices[y];C.push([l.name,N,x])}}a.inputLayers=C;for(var R=[],y=0;y<this.outputLayers.length;y++){var l=this.outputLayers[y],b=this.outputLayersNodeIndices[y],m=t.nodeKey(l,b);if(this.containerNodes.has(m)){var N=i[m];N==null&&(N=0);var x=this.outputLayersTensorIndices[y];R.push([l.name,N,x])}}return a.outputLayers=R,a},t.fromConfig=function(n,r,a,i){var o,s,u,l,c,p,d,f,h,m;i===void 0&&(i=!1);var v={},g={};function y(xe,Ne){xe.name in g?g[xe.name].push(Ne):g[xe.name]=[Ne]}function w(xe,Ne){var $e,pt,It=[],xt;try{for(var yt=fe(Ne),Et=yt.next();!Et.done;Et=yt.next()){var Nt=Et.value,dt=Nt[0],gt=Nt[1],mt=Nt[2];if(xt=Nt[3]==null?{}:Nt[3],!(dt in v)){y(xe,Ne);return}var Dn=v[dt];if(Dn.inboundNodes.length<=gt){y(xe,Ne);return}var ct=Dn.inboundNodes[gt];It.push(ct.outputTensors[mt])}}catch(Bt){$e={error:Bt}}finally{try{Et&&!Et.done&&(pt=yt.return)&&pt.call(yt)}finally{if($e)throw $e.error}}It.length>0&&xe.apply(ka(It),xt)}function b(xe){var Ne=xe.name,$e=No(xe,r.customObjects!=null?r.customObjects:{});$e.setFastWeightInitDuringBuild(i),v[Ne]=$e;var pt=xe.inboundNodes;pt.forEach(function(It){if(!(It instanceof Array))throw new J("Corrupted configuration, expected array for nodeData: ".concat(It));y($e,It)})}var x=r.name,k=r.layers;try{for(var N=fe(k),E=N.next();!E.done;E=N.next()){var C=E.value;b(C)}}catch(xe){o={error:xe}}finally{try{E&&!E.done&&(s=N.return)&&s.call(N)}finally{if(o)throw o.error}}for(;!Mte(g);)try{for(var R=(u=void 0,fe(k)),A=R.next();!A.done;A=R.next()){var C=A.value,M=v[C.name];if(M.name in g){var $=g[M.name];delete g[M.name];try{for(var z=(c=void 0,fe($)),L=z.next();!L.done;L=z.next()){var B=L.value;w(M,B)}}catch(Ne){c={error:Ne}}finally{try{L&&!L.done&&(p=z.return)&&p.call(z)}finally{if(c)throw c.error}}}}}catch(xe){u={error:xe}}finally{try{A&&!A.done&&(l=R.return)&&l.call(R)}finally{if(u)throw u.error}}var W=[],Y=[],Q=r.inputLayers;try{for(var G=fe(Q),X=G.next();!X.done;X=G.next()){var C=X.value,ie=C[0],ae=C[1],le=C[2];ns(ie in v);var M=v[ie],de=M.inboundNodes[ae].outputTensors;W.push(de[le])}}catch(xe){d={error:xe}}finally{try{X&&!X.done&&(f=G.return)&&f.call(G)}finally{if(d)throw d.error}}var ge=r.outputLayers;try{for(var Ee=fe(ge),he=Ee.next();!he.done;he=Ee.next()){var C=he.value,ie=C[0],ae=C[1],le=C[2];ns(ie in v);var M=v[ie],de=M.inboundNodes[ae].outputTensors;Y.push(de[le])}}catch(xe){h={error:xe}}finally{try{he&&!he.done&&(m=Ee.return)&&m.call(Ee)}finally{if(h)throw h.error}}return new n({inputs:W,outputs:Y,name:x})},Object.defineProperty(t.prototype,"stateful",{get:function(){var n,r;if(this._stateful)throw new J("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");try{for(var a=fe(this.layers),i=a.next();!i.done;i=a.next()){var o=i.value;if(o.stateful)return!0}}catch(s){n={error:s}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return!1},enumerable:!1,configurable:!0}),t.prototype.resetStates=function(){var n=this;F.tidy(function(){n.layers.forEach(function(r){r.stateful&&r.resetStates()})})},t}(At);function Tce(e,t,n){var r=t.length;if(e==null||Array.isArray(e)&&e.length===0)return t.map(function(i){return null});if(r===1)return Array.isArray(e)&&e.length===1?e:typeof e=="object"&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error("Provided ".concat(n," is an array of ").concat(e.length," ")+"element(s), but the model has ".concat(r," outputs. ")+"Make sure a set of weights is provided for each model output.");return e}else if(typeof e=="object"&&Object.keys(e).length>0&&typeof e[Object.keys(e)[0]]=="object"){var a=[];return t.forEach(function(i){i in e?a.push(e[i]):a.push(null)}),a}else throw new Error("The model has multiple (".concat(r,") outputs, ")+"so ".concat(n," must be either an array with ")+"".concat(r," elements or an object with ").concat(t," keys. ")+"Provided ".concat(n," not understood: ").concat(JSON.stringify(e)))}function JI(e,t){return Tce(e,t,"classWeight")}function ZI(e,t,n,r){return Oe(this,void 0,void 0,function(){var a,i,o,s,u;return Fe(this,function(l){switch(l.label){case 0:if(t!=null||r!=null)throw new Error("Support sampleWeight is not implemented yet");return n==null?[3,2]:(a=F.tidy(function(){if(e.shape.length===1)return F.clone(e);if(e.shape.length===2)if(e.shape[1]>1){var c=1;return F.argMax(e,c)}else{if(e.shape[1]===1)return F.reshape(e,[e.shape[0]]);throw new Error("Encountered unexpected last-dimension size (".concat(e.shape[1],") ")+"during handling of class weights. The size is expected to be >= 1.")}else throw new Error("Unexpected rank of target (y) tensor (".concat(e.rank,") during ")+"handling of class weights. The rank is expected to be 1 or 2.")}),s=(o=Array).from,[4,a.data()]);case 1:return i=s.apply(o,[l.sent()]),F.dispose(a),u=[],i.forEach(function(c){if(n[c]==null)throw new Error("classWeight must contain all classes in the training data. "+"The class ".concat(c," exists in the data but not in ")+"classWeight");u.push(n[c])}),[2,F.tensor1d(u,"float32")];case 2:return[2,null]}})})}function Ece(e,t){return F.mul(e,t)}var Ice=32;function QI(e,t){var n,r,a=t;n=a.xs,r=a.ys,D.util.assert(n!=null&&r!=null,function(){return"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+"".concat(t)});var i=$T("input",e.inputNames,n),o=$T("output",e.outputNames,r),s=i[0].shape[0];D.util.assert(i.length===e.inputs.length,function(){return"LayersModel has ".concat(e.inputs.length," inputs, but the dataset ")+"provides ".concat(i.length," inputs.  (Expected input keys: ")+"".concat(JSON.stringify(e.inputNames),")")}),D.util.assert(o.length===e.outputs.length,function(){return"LayersModel has ".concat(e.outputs.length," outputs, but the dataset ")+"provides ".concat(o.length," outputs.  (Expected output keys: ")+"".concat(JSON.stringify(e.outputNames),")")});for(var u=function(d){D.util.assert(i[d].shape[0]===s,function(){return"Batch size mismatch: input "+"".concat(e.inputNames[d]," has ").concat(i[d].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")})},l=0;l<i.length;l++)u(l);for(var c=function(d){D.util.assert(o[d].shape[0]===s,function(){return"Batch size mismatch: output "+"".concat(e.outputNames[d]," has ").concat(o[d].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")})},p=0;p<o.length;p++)c(p);return{xs:i,ys:o}}function $T(e,t,n){var r,a;if(n instanceof D.Tensor)return[n];if(Array.isArray(n))return D.util.assert(n.length===t.length,function(){return"Received an array of ".concat(n.length," Tensors, but expected ").concat(t.length," to match the ").concat(e," keys ").concat(t,".")}),n;var i=[];try{for(var o=fe(t),s=o.next();!s.done;s=o.next()){var u=s.value;if(n[u]==null)throw new J("The feature data generated by the dataset lacks the required "+"".concat(e," key '").concat(u,"'."));i.push(n[u])}}catch(l){r={error:l}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i}function Cce(e){if(e.length===3)throw new _t("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}function Dce(e,t,n){return Oe(this,void 0,void 0,function(){var r,a,i,o,s,u,l,c,p,d,f,h,m,v,g,y,w,b,x,k,N,E,C,R,A,G,M,$,z,L,G,B,W,Y,Q,G;return Fe(this,function(X){switch(X.label){case 0:if(r=n.batchesPerEpoch!=null,D.util.assert(e.optimizer!=null,function(){return"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."}),D.util.assert(n!=null,function(){return"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."}),D.util.assert(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),function(){return"For fitDataset(), config.epochs is expected to be a positive "+"integer, but got ".concat(n.epochs)}),D.util.assert(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),function(){return"For fitDataset(), config.batchesPerEpoch is expected to be a "+"positive integer if specified, but got ".concat(n.batchesPerEpoch)}),D.util.assert(n.validationSplit==null,function(){return"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."}),e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0,X.label=1;case 1:return X.trys.push([1,,26,27]),a=n.validationData!=null,i=void 0,o=void 0,a&&(VT(n.validationData)?D.util.assert(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),function(){return"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, "+"but got ".concat(n.validationBatches)}):(s=Cce(n.validationData),i=s.xs,o=s.ys)),u=e.makeTrainFunction(),l=e.getDedupedMetricsNames(),c=void 0,a?c=l.slice().concat(l.map(function(ie){return"val_"+ie})):c=l.slice(),p=UI(n.callbacks,n.yieldEvery),d=n.verbose==null?1:n.verbose,f=GI(p,d,n.epochs,null,null,_ce(t,n),null,a,c),h=f.callbackList,m=f.history,h.setModel(e),e.history=m,[4,h.onTrainBegin()];case 2:return X.sent(),e.stopTraining_=!1,v=n.initialEpoch==null?0:n.initialEpoch,[4,t.iterator()];case 3:g=X.sent(),X.label=4;case 4:return v<n.epochs?(y={},[4,h.onEpochBegin(v)]):[3,23];case 5:return X.sent(),w=0,b=0,r?[3,7]:[4,t.iterator()];case 6:g=X.sent(),X.label=7;case 7:return!r||w<n.batchesPerEpoch?[4,g.next()]:[3,21];case 8:return x=X.sent(),r&&x.done?(console.warn("You provided `batchesPerEpoch` as "+"".concat(n.batchesPerEpoch,", ")+"but your dataset iterator ran out of data after "+"".concat(w," batches; ")+"interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+"".concat(n.batchesPerEpoch*n.epochs," batches). ")+"You may need to use the repeat() function when building your dataset."),[3,21]):x.value==null?[3,15]:(k=QI(e,x.value),N=k.xs,E=k.ys,C={},C.batch=b,C.size=N[0].shape[0],[4,h.onBatchBegin(b,C)]);case 9:if(X.sent(),R=[],n.classWeight==null)return[3,13];A=JI(n.classWeight,e.outputNames),G=0,X.label=10;case 10:return G<A.length?($=(M=R).push,[4,ZI(E[G],null,A[G])]):[3,13];case 11:$.apply(M,[X.sent()]),X.label=12;case 12:return++G,[3,10];case 13:for(z=N.concat(E).concat(R),L=u(z),D.dispose(z),G=0;G<l.length;++G)B=l[G],W=L[G],C[B]=W,D.keep(W);return[4,h.onBatchEnd(b,C)];case 14:X.sent(),zI(C),b++,w++,X.label=15;case 15:return(r?w>=n.batchesPerEpoch:x.done)?a?(Y=void 0,VT(n.validationData)?(Q=Yt,[4,e.evaluateDataset(n.validationData,{batches:n.validationBatches})]):[3,17]):[3,19]:[3,20];case 16:return Y=Q.apply(void 0,[X.sent()]),[3,18];case 17:Y=Yt(e.evaluate(i,o,{batchSize:n.validationBatchSize==null?Ice:n.validationBatchSize,verbose:0})),X.label=18;case 18:for(G=0;G<e.metricsNames.length;++G)y["val_".concat(e.metricsNames[G])]=Y[G];X.label=19;case 19:return[3,21];case 20:return e.stopTraining_?[3,21]:[3,7];case 21:return[4,h.onEpochEnd(v,y)];case 22:return X.sent(),v++,e.stopTraining_?[3,23]:[3,4];case 23:return[4,h.onTrainEnd()];case 24:return X.sent(),[4,e.history.syncData()];case 25:return X.sent(),[2,e.history];case 26:return e.isTraining=!1,[7];case 27:return[2]}})})}function _ce(e,t){var n=null;return t.batchesPerEpoch!=null?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}function VT(e){return typeof e.iterator=="function"}function Ace(e){return typeof e.next=="function"}function Fce(e,t,n){return Oe(this,void 0,void 0,function(){var r,a,i,o,s,u,l,c,p,d,f;return Fe(this,function(h){switch(h.label){case 0:if(n=n||{},r=n.batches!=null,a=e.testFunction,i=[],n.verbose>0)throw new _t("Verbose mode is not implemented yet.");return D.util.assert(!r||n.batches>0&&Number.isInteger(n.batches),function(){return"Test loop expects `batches` to be a positive integer, but "+"received ".concat(JSON.stringify(n.batches))}),Ace(t)?(s=t,[3,3]):[3,1];case 1:return[4,t.iterator()];case 2:s=h.sent(),h.label=3;case 3:o=s,u=0,l=0,c=function(){var m;return Fe(this,function(v){switch(v.label){case 0:return[4,o.next()];case 1:return m=v.sent(),i=D.tidy(function(){if(m.value){var g=QI(e,m.value),y=g.xs,w=g.ys,b=y.concat(w),x=D.tidy(function(){return a(b)});if(D.dispose(b),l===0)for(var k=0;k<x.length;++k)i.push(F.scalar(0));for(var N=b[0].shape[0],E=function(C){var R=x[C],A=i[C];i[C]=D.tidy(function(){return D.add(i[C],D.mul(N,R))}),l>0&&D.dispose(A)},k=0;k<x.length;++k)E(k);D.dispose(x),u+=N,++l}return i}),m.done?(r&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` "+"batches (in this case, ".concat(n.batches," batches). ")+"You may need to use the repeat() function when building your dataset."),[2,"break"]):[2]}})},h.label=4;case 4:return!r||l<n.batches?[5,c()]:[3,6];case 5:return p=h.sent(),p==="break"?[3,6]:[3,4];case 6:for(d=0;d<i.length;++d)f=i[d],i[d]=D.div(i[d],u),D.dispose(f);return[2,ka(i)]}})})}function Uy(e){D.util.assert(e>0&&Number.isInteger(e),function(){return"batchSize is required to be a positive integer, but got ".concat(e)})}function Mf(e,t,n){return e==null?[null]:Array.isArray(e)?e.map(function(r){return Rl(r,t,n-t)}):Rl(e,t,n-t)}function u3(e,t){return D.tidy(function(){return e==null?null:Array.isArray(e)?e.map(function(n){return u3(n,t)}):iE(e,t.dtype==="int32"?t:D.cast(t,"int32"))})}function Gy(e,t){for(var n=[],r=0,a=null;r<e;)a=r+t,a>=e&&(a=e),n.push([r,a]),r=a;return n}function eC(e){var t=[];e instanceof F.Tensor&&(e=[e]);for(var n=0;n<e.length;++n){var r=e[n];if(r.rank===1)t.push(Kf(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function xo(e,t){if(e!=null){var n=[];if(t instanceof F.Tensor)n.push(t.id);else if(Array.isArray(t))t.forEach(function(s){return n.push(s.id)});else if(t!=null)for(var r in t){var a=t[r];n.push(a.id)}var i=[];if(e instanceof F.Tensor)n.indexOf(e.id)===-1&&i.push(e);else if(Array.isArray(e))e.forEach(function(s){n.indexOf(s.id)===-1&&i.push(s)});else if(e!=null)for(var r in e){var o=e[r];n.indexOf(o.id)===-1&&i.push(o)}i.forEach(function(s){s.isDisposed||s.dispose()})}}function Rce(e){return e instanceof F.Tensor}function l3(e){return Array.isArray(e)}function WT(e){return!Rce(e)&&!l3(e)}function UT(e,t,n,r,a){var i,o;if(r===void 0&&(r=!0),a===void 0&&(a=""),t==null||t.length===0){if(e!=null){var s=!1;if(l3(e)&&e.length>0)s=!0;else if(WT(e)){for(var u in e)if(e.hasOwnProperty(u)){s=!0;break}}else s=!0;if(s)throw new J("Error when checking model ".concat(a," expected no data, ")+"but got ".concat(e))}return[]}if(e==null)return t.map(function(y){return null});var l;if(WT(e)){e=e,l=[];try{for(var c=fe(t),p=c.next();!p.done;p=c.next()){var d=p.value;if(e[d]==null)throw new J('No data provided for "'.concat(d,'". Need data for each key in: ')+"".concat(t));l.push(e[d])}}catch(y){i={error:y}}finally{try{p&&!p.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}}else if(l3(e)){if(e=e,e.length!==t.length)throw new J("Error when checking model ".concat(a,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"model expected. Expected to see ".concat(t.length," Tensor(s), but ")+"instead got the following list of Tensor(s): ".concat(e));l=e}else{if(e=e,t.length>1)throw new J("The model ".concat(a," expects ").concat(t.length," Tensor(s), ")+"but only received one Tensor. Found: Tensor with shape ".concat(e.shape));l=[e]}if(l=eC(l),n!=null){for(var f=0;f<t.length;++f)if(n[f]!=null){var h=l[f];if(h.shape.length!==n[f].length)throw new J("Error when checking ".concat(a,": expected ").concat(t[f]," ")+"to have ".concat(n[f].length," dimension(s). but got array with ")+"shape ".concat(h.shape));for(var m=0;m<n[f].length;++m)if(!(m===0&&!r)){var v=h.shape[m],g=n[f][m];if(g!=null&&g>=0&&v!==g)throw new J("".concat(a," expected a batch of elements where each ")+"example has shape [".concat(n[f].slice(1,n[f].length),"] ")+"(i.e.,tensor shape [*,".concat(n[f].slice(1,n[f].length),"])")+" but the ".concat(a," received an input with ").concat(h.shape[0])+" examples, each with shape [".concat(h.shape.slice(1,h.shape.length),"]")+" (tensor shape [".concat(h.shape,"])"))}}}return l}function Oce(e,t,n){var r=Du(e.map(function(i){return i.shape[0]}));r.sort();var a=Du(t.map(function(i){return i.shape[0]}));if(a.sort(),r.length>1)throw new J("All input Tensors (x) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(e.map(function(i){return i.shape}))));if(a.length>1)throw new J("All target Tensors (y) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(t.map(function(i){return i.shape}))));if(r.length>0&&a.length>0&&!F.util.arraysEqual(r,a))throw new J("Input Tensors should have the same number of samples as target "+"Tensors. Found ".concat(r[0]," input sample(s) and ").concat(a[0]," target ")+"sample(s).")}function Mce(e,t,n){for(var r=[Ul,Iv,Gf],a=0;a<e.length;++a){var i=e[a],o=t[a],s=n[a];if(o!=null){if(o===Gf&&i.shape[i.shape.length-1]===1)throw new J("You are passing a target array of shape ".concat(i.shape," while using ")+"a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(r.indexOf(o)!==-1)for(var u=i.shape.slice(1),l=s.slice(1),c=0;c<u.length;++c){var p=u[c],d=l[c];if(d!=null&&p!==d)throw new J("A target Tensor with shape ".concat(i.shape," was passed for an ")+"output of shape ".concat(s,", while using a loss function that ")+"expects targets to have the same shape as the output.")}}}}function GT(e,t,n,r,a){r===void 0&&(r=!0),a===void 0&&(a="");var i;if(Array.isArray(e)){if(e.length!==t.length)throw new J("Error when checking model ".concat(a,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"the model expected. Expected to see ".concat(t.length," Tensor(s),")+" but instead got ".concat(e.length," Tensors(s)."));i=e}else{if(t.length>1)throw new J("The model expects ".concat(t.length," ").concat(a," Tensors, ")+"but only received one Tensor. Found: array with shape "+"".concat(JSON.stringify(e.shape),"."));i=[e]}if(n!=null){for(var o=0;o<t.length;++o)if(n[o]!=null){var s=i[o];if(s.shape.length!==n[o].length)throw new J("Error when checking ".concat(a,": expected ").concat(t[o]," ")+"to have ".concat(n[o].length," dimension(s), but got array with ")+"shape ".concat(JSON.stringify(s.shape)));for(var u=0;u<n[o].length;++u)if(!(u===0&&!r)){var l=s.shape[u],c=n[o][u];if(c!=null&&c!==l)throw new J("Error when checking ".concat(a,": expected ")+"".concat(t[o]," to have shape ").concat(JSON.stringify(n[o])," but ")+"got array with shape ".concat(JSON.stringify(s.shape),"."))}}}}function Pce(e,t){var n,r;if(e==null||Array.isArray(e)&&e.length===0)return t.map(function(c){return[]});var a;if(typeof e=="string"||typeof e=="function")a=[e];else if(Array.isArray(e)||typeof e=="object")a=e;else throw new TypeError("Type of metrics argument not understood. Expected an string,"+"function, Array, or Object, found: ".concat(e));if(Array.isArray(a))return t.map(function(c){return a});var i=[];try{for(var o=fe(t),s=o.next();!s.done;s=o.next()){var u=s.value,l=a.hasOwnProperty(u)?a[u]:[];Array.isArray(l)||(l=[l]),i.push(l)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}var Bce="layers-model",zs=function(e){ue(t,e);function t(n){var r=e.call(this,n)||this;return r.isTraining=!1,r}return t.prototype.summary=function(n,r,a){if(a===void 0&&(a=console.log),!this.built)throw new J("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");yce(this,n,r,a)},t.prototype.compile=function(n){var r,a,i=this;if(n.loss==null&&(n.loss=[]),this.loss=n.loss,typeof n.optimizer=="string")this.optimizer_=gce(n.optimizer),this.isOptimizerOwned=!0;else{if(!(n.optimizer instanceof F.Optimizer))throw new J("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=n.optimizer,this.isOptimizerOwned=!1}var o=[];if(!Array.isArray(n.loss)&&typeof n.loss!="string"&&typeof n.loss!="function"){n.loss=n.loss;for(var s in n.loss)if(this.outputNames.indexOf(s)===-1)throw new J('Unknown entry in loss dictionary: "'.concat(s,'". ')+"Only expected the following keys: ".concat(this.outputNames));try{for(var u=fe(this.outputNames),l=u.next();!l.done;l=u.next()){var s=l.value;n.loss[s]==null&&console.warn('Output "'.concat(s,'" is missing from loss dictionary. We assume ')+"this was done on purpose, and we will not be expecting data "+"to be passed to ".concat(s," during training")),o.push(Wy(n.loss[s]))}}catch(g){r={error:g}}finally{try{l&&!l.done&&(a=u.return)&&a.call(u)}finally{if(r)throw r.error}}}else if(Array.isArray(n.loss)){if(n.loss.length!==this.outputs.length)throw new J("When passing an Array as loss, it should have one entry per "+"model output. The model has ".concat(this.outputs.length," output(s), ")+"but you passed loss=".concat(n.loss,"."));var c=n.loss;o=c.map(function(g){return Wy(g)})}else{var p=Wy(n.loss);this.outputs.forEach(function(g){o.push(p)})}this.lossFunctions=o,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var d=0;d<this.outputs.length;++d){var f=this.internalOutputShapes[d],s=this.outputNames[d];this.feedOutputNames.push(s),this.feedOutputShapes.push(f),this.feedLossFns.push(this.lossFunctions[d])}var h=[];this.metrics=n.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Fl("loss",function(){for(var g=0;g<i.outputs.length;++g)if(h.indexOf(g)===-1){var y=i.lossFunctions[g];i.outputs.length>1&&(i.metricsTensors.push([y,g]),i.metricsNames.push(i.outputNames[g]+"_loss"))}});var m=Pce(n.metrics,this.outputNames),v=function(g,y,w){i.outputNames.length>1&&(y=i.outputNames[g]+"_"+y),i.metricsNames.push(y),i.metricsTensors.push([w,g])};Fl("metric",function(){for(var g=function(w){if(h.indexOf(w)!==-1)return"continue";var b=m[w],x=function(k){var N,E,C="",R,A,M,$=function(W){if(typeof W=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(W)!==-1){var Y=i.internalOutputShapes[w];Y[Y.length-1]===1||i.lossFunctions[w]===Iv?["accuracy","acc"].indexOf(W)!==-1?A=K3:["crossentropy","ce"].indexOf(W)!==-1&&(A=jI):i.lossFunctions[w]===uv?["accuracy","acc"].indexOf(W)!==-1?A=KI:["crossentropy","ce"].indexOf(W)!==-1&&(A=XI):["accuracy","acc"].indexOf(W)!==-1?A=X3:["crossentropy","ce"].indexOf(W)!==-1&&(A=Y3);var Q=void 0;["accuracy","acc"].indexOf(W)!==-1?Q="acc":["crossentropy","ce"].indexOf(W)!==-1&&(Q="ce"),M=A,R=C+Q}else{var G=vce(W);M=G,R=C+Wm(W)}var X;Fl(R,function(){X=M}),v(w,R,X)};try{for(var z=(N=void 0,fe(k)),L=z.next();!L.done;L=z.next()){var B=L.value;$(B)}}catch(W){N={error:W}}finally{try{L&&!L.done&&(E=z.return)&&E.call(z)}finally{if(N)throw N.error}}};x(b)},y=0;y<i.outputs.length;++y)g(y)}),this.collectedTrainableWeights=this.trainableWeights},t.prototype.checkTrainableWeightsConsistency=function(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")},t.prototype.evaluate=function(n,r,a){a===void 0&&(a={});var i=a.batchSize==null?32:a.batchSize;Uy(i);var o=!0,s=this.standardizeUserDataXY(n,r,o,i);try{var u=s[0].concat(s[1]);this.makeTestFunction();var l=this.testFunction,c=this.testLoop(l,u,i,a.verbose,a.steps);return ka(c)}finally{xo(s[0],n),xo(s[1],r)}},t.prototype.evaluateDataset=function(n,r){return Oe(this,void 0,void 0,function(){return Fe(this,function(a){return this.makeTestFunction(),[2,Fce(this,n,r)]})})},t.prototype.checkNumSamples=function(n,r,a,i){i===void 0&&(i="steps");var o;if(a!=null){if(o=null,r!=null)throw new J("If ".concat(i," is set, batchSize must be null or undefined.")+"Got batchSize = ".concat(r))}else if(n!=null)Array.isArray(n)?o=n[0].shape[0]:o=n.shape[0];else throw new J("Either the input data should have a defined shape, or "+"".concat(i," shoud be specified."));return o},t.prototype.execute=function(n,r){var a,i;if(Array.isArray(r)&&r.length===0)throw new J("`outputs` is an empty Array, which is not allowed.");var o=Array.isArray(r),s=o?r:[r],u=this.retrieveSymbolicTensors(s),l=new dp;if(n instanceof F.Tensor&&(n=[n]),Array.isArray(n)){if(n.length!==this.inputs.length)throw new J("The number of inputs provided (".concat(n.length,") ")+"does not match the number of inputs of this model "+"(".concat(this.inputs.length,")."));for(var c=0;c<this.inputs.length;++c)l.add(this.inputs[c],n[c])}else try{for(var p=fe(this.inputs),d=p.next();!d.done;d=p.next()){var f=d.value,h=n[f.name];if(h==null)throw new J("No value is provided for the model's input ".concat(f.name));l.add(f,h)}}catch(v){a={error:v}}finally{try{d&&!d.done&&(i=p.return)&&i.call(p)}finally{if(a)throw a.error}}var m=Bf(u,l);return o?m:m[0]},t.prototype.retrieveSymbolicTensors=function(n){var r,a,i=Ol(null,n.length),o=n.length;try{for(var s=fe(this.layers),u=s.next();!u.done;u=s.next()){for(var l=u.value,c=Array.isArray(l.output)?l.output:[l.output],p=c.map(function(m){return m.name}),d=0;d<n.length;++d){var f=p.indexOf(n[d]);if(f!==-1&&(i[d]=c[f],o--),o===0)break}if(o===0)break}}catch(m){r={error:m}}finally{try{u&&!u.done&&(a=s.return)&&a.call(s)}finally{if(r)throw r.error}}if(o>0){var h=[];throw i.forEach(function(m,v){m==null&&h.push(n[v])}),new J("Cannot find SymbolicTensors for output name(s): "+"".concat(JSON.stringify(h)))}return i},t.prototype.predictLoop=function(n,r,a){var i=this;return r===void 0&&(r=32),a===void 0&&(a=!1),D.tidy(function(){var o=i.checkNumSamples(n);if(a)throw new _t("Verbose predictLoop() is not implemented yet.");for(var s=Gy(o,r),u=i.outputs.map(function(p){return[]}),l=function(p){var d=D.tidy(function(){var f=s[p][0],h=s[p][1],m=Mf(n,f,h),v=[];if(Array.isArray(m))for(var g=0;g<m.length;++g)v.push({key:i.inputs[g],value:m[g]});else v.push({key:i.inputs[0],value:m});var y=new dp(v);return Bf(i.outputs,y)});d.forEach(function(f,h){return u[h].push(f)})},c=0;c<s.length;++c)l(c);return ka(u.map(function(p){return D.concat(p,0)}))})},t.prototype.predict=function(n,r){r===void 0&&(r={});var a=eC(n);GT(a,this.inputNames,this.feedInputShapes,!1);try{var i=r.batchSize==null?32:r.batchSize;return Uy(i),this.predictLoop(a,i)}finally{xo(a,n)}},t.prototype.predictOnBatch=function(n){GT(n,this.inputNames,this.feedInputShapes,!0);var r=(Array.isArray(n)?n[0]:n).shape[0];return this.predictLoop(n,r)},t.prototype.standardizeUserDataXY=function(n,r,a,i){if(this.optimizer_==null)throw new as("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");for(var o=[],s=0;s<this.feedOutputShapes.length;++s){var u=this.feedOutputShapes[s],l=this.feedLossFns[s];l===uv?o.push(u.slice(0,u.length-1).concat([1])):o.push(u)}if(n=UT(n,this.feedInputNames,this.feedInputShapes,!1,"input"),r=UT(r,this.feedOutputNames,o,!1,"target"),Oce(n,r),Mce(r,this.feedLossFns,this.feedOutputShapes),this.stateful&&i!=null&&i>0&&n[0].shape[0]%i!==0)throw new J("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+"".concat(i,". Found: ").concat(n[0].shape[0]," sample(s)."));return[n,r]},t.prototype.standardizeUserData=function(n,r,a,i,o,s){return o===void 0&&(o=!0),Oe(this,void 0,void 0,function(){var u,l,c,p,d,f,h,m;return Fe(this,function(v){switch(v.label){case 0:if(u=re(this.standardizeUserDataXY(n,r,o,s),2),l=u[0],c=u[1],a!=null)throw new Error("sample weight is not supported yet.");if(p=null,i==null)return[3,4];d=JI(i,this.outputNames),p=[],f=0,v.label=1;case 1:return f<d.length?(m=(h=p).push,[4,ZI(c[f],null,d[f])]):[3,4];case 2:m.apply(h,[v.sent()]),v.label=3;case 3:return++f,[3,1];case 4:return[2,[l,c,p]]}})})},t.prototype.testLoop=function(n,r,a,i,o){var s=this;return i===void 0&&(i=0),D.tidy(function(){var u=s.checkNumSamples(r,a,o,"steps"),l=[];if(i>0)throw new _t("Verbose mode is not implemented yet.");if(o!=null)throw new _t("steps mode in testLoop() is not implemented yet");for(var c=Gy(u,a),p=F.tensor1d(Eo(0,u)),d=0;d<c.length;++d){var f=c[d][0],h=c[d][1],m=Rl(p,f,h-f),v=u3(r,m),g=n(v);if(d===0)for(var y=0;y<g.length;++y)l.push(F.scalar(0));for(var y=0;y<g.length;++y){var w=g[y];l[y]=D.add(l[y],D.mul(h-f,w))}}for(var y=0;y<l.length;++y)l[y]=D.div(l[y],u);return l})},t.prototype.getDedupedMetricsNames=function(){for(var n=this.metricsNames,r=[],a=0;a<n.length;++a){var i=n[a],o=i;if(XN(n,i)>1){var s=XN(n.slice(0,a),i);o+="_".concat(s)}r.push(o)}return r},t.prototype.makeTrainFunction=function(){var n=this;return function(r){var a=[],i=r.slice(0,n.inputs.length),o=r.slice(n.inputs.length,n.inputs.length+n.outputs.length),s=r.slice(n.inputs.length+n.outputs.length,n.inputs.length+n.outputs.length*2),u=[],l=function(){for(var f=[],h=0;h<n.inputs.length;++h)f.push({key:n.inputs[h],value:i[h]});for(var m=new dp(f),v=Bf(n.outputs,m,{training:!0}),g,h=0;h<n.lossFunctions.length;++h){var y=n.lossFunctions[h],w=y(o[h],v[h]);s[h]!=null&&(w=Ece(w,s[h]));var b=D.mean(w);a.push(b),h===0?g=w:g=D.add(g,w)}for(var h=0;h<n.metricsTensors.length;++h){var x=void 0;if(n.outputs.length>1&&h<n.outputs.length)x=a[h];else{var k=n.metricsTensors[h][0],N=n.metricsTensors[h][1];x=D.mean(k(o[N],v[N]))}D.keep(x),u.push(x)}return g=D.mean(g),n.calculateLosses().forEach(function(E){g=D.add(g,E)}),g},c=n.collectedTrainableWeights.map(function(f){return f.read()}),p=!0,d=n.optimizer_.minimize(l,p,c);return[d].concat(u)}},t.prototype.makeTestFunction=function(){var n=this;this.testFunction=function(r){return D.tidy(function(){for(var a=[],i,o=r.slice(0,n.inputs.length),s=r.slice(n.inputs.length,n.inputs.length+n.outputs.length),u=[],l=0;l<n.inputs.length;++l)u.push({key:n.inputs[l],value:o[l]});for(var c=new dp(u),p=Bf(n.outputs,c),l=0;l<n.lossFunctions.length;++l){var d=n.lossFunctions[l],f=D.mean(d(s[l],p[l]));l===0?i=f:i=D.add(i,f),a.push(i)}for(var l=0;l<n.metricsTensors.length;++l){var h=n.metricsTensors[l][0],m=n.metricsTensors[l][1],v=D.mean(h(s[m],p[m]));a.push(v)}return a})}},t.prototype.fit=function(n,r,a){return a===void 0&&(a={}),Oe(this,void 0,void 0,function(){var i,o,s,u,l,c,p,d,f,h,m,v,g,y,w,b,x,k,N,E,C,R,A,M,$;return Fe(this,function(z){switch(z.label){case 0:if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0,z.label=1;case 1:return z.trys.push([1,,7,8]),h=a.batchSize==null?32:a.batchSize,Uy(h),m=!1,[4,this.standardizeUserData(n,r,a.sampleWeight,a.classWeight,m,h)];case 2:if(v=z.sent(),i=v[0],o=v[1],f=v[2],g=!1,y=void 0,!(a.validationData!=null&&a.validationData.length>0))return[3,4];if(g=!0,a.validationData.length===2)l=a.validationData[0],c=a.validationData[1];else throw a.validationData.length===3?new _t("validationData including sample weights is not supported yet."):new J("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+"".concat(a.validationData," is invalid."));return w=!0,[4,this.standardizeUserData(l,c,null,null,w,h)];case 3:return b=z.sent(),p=b[0],d=b[1],y=p.concat(d),[3,5];case 4:a.validationSplit!=null&&a.validationSplit>0&&a.validationSplit<1?(g=!0,x=Math.floor(i[0].shape[0]*(1-a.validationSplit)),k=i[0].shape[0],p=Mf(i,x,k),s=i,i=Mf(i,0,x),d=Mf(o,x,k),u=o,o=Mf(o,0,x),y=p.concat(d)):a.validationSteps!=null&&(g=!0),z.label=5;case 5:return N=i.concat(o).concat(f),this.checkTrainableWeightsConsistency(),E=this.makeTrainFunction(),C=this.getDedupedMetricsNames(),R=void 0,A=void 0,g?(this.makeTestFunction(),R=this.testFunction,A=C.slice().concat(C.map(function(L){return"val_"+L}))):(R=null,y=[],A=C.slice()),M=UI(a.callbacks,a.yieldEvery),[4,this.fitLoop(E,N,C,h,a.epochs,a.verbose,M,R,y,a.shuffle,A,a.initialEpoch,null,null)];case 6:return $=z.sent(),[2,$];case 7:return this.isTraining=!1,xo(i,n),xo(o,r),xo(s,n),xo(u,r),xo(p,l),xo(d,c),f!=null&&D.dispose(f),[7];case 8:return[2]}})})},t.prototype.fitLoop=function(n,r,a,i,o,s,u,l,c,p,d,f,h,m){return Oe(this,void 0,void 0,function(){var v,g,y,w,b,x,k,N,E,C,R=this;return Fe(this,function(A){switch(A.label){case 0:if(i==null&&(i=32),o==null&&(o=1),p==null&&(p=!0),f==null&&(f=0),v=!1,l!=null&&c!=null&&(v=!0),m!=null&&(v=!0,h==null))throw new J("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");return g=this.checkNumSamples(r,i,h,"steps_per_epoch"),g!=null&&(y=Eo(0,g)),s==null&&(s=1),w=GI(u,s,o,f,g,h,i,v,d),b=w.callbackList,x=w.history,b.setModel(this),this.history=x,[4,b.onTrainBegin()];case 1:A.sent(),this.stopTraining_=!1,k=function(M){var $,z,L,B,W,Y;return Fe(this,function(Q){switch(Q.label){case 0:return[4,b.onEpochBegin(M)];case 1:if(Q.sent(),$={},h==null)return[3,2];throw new _t("stepsPerEpoch mode is not implemented yet.");case 2:if(p==="batch")throw new _t("batch shuffling is not implemneted yet");p&&F.util.shuffle(y),z=F.tensor1d(y),L=Gy(g,i),B=function(G){var X;return Fe(this,function(ie){switch(ie.label){case 0:return X={},[4,b.onBatchBegin(G,X)];case 1:return ie.sent(),D.tidy(function(){var ae=L[G][0],le=L[G][1],de=Rl(z,ae,le-ae);X.batch=G,X.size=le-ae;for(var ge=u3(r,de),Ee=n(ge),he=0;he<a.length;++he){var xe=a[he],Ne=Ee[he];X[xe]=Ne,D.keep(Ne)}if(G===L.length-1&&v)for(var $e=R.testLoop(l,c,i),he=0;he<a.length;++he){var xe=a[he],Ne=$e[he];D.keep(Ne),$["val_"+xe]=Ne}}),[4,b.onBatchEnd(G,X)];case 2:return ie.sent(),zI(X),N.stopTraining_?[2,"break"]:[2]}})},W=0,Q.label=3;case 3:return W<L.length?[5,B(W)]:[3,6];case 4:if(Y=Q.sent(),Y==="break")return[3,6];Q.label=5;case 5:return++W,[3,3];case 6:z.dispose(),Q.label=7;case 7:return[4,b.onEpochEnd(M,$)];case 8:return Q.sent(),N.stopTraining_?[2,"break"]:[2]}})},N=this,E=f,A.label=2;case 2:return E<o?[5,k(E)]:[3,5];case 3:if(C=A.sent(),C==="break")return[3,5];A.label=4;case 4:return++E,[3,2];case 5:return[4,b.onTrainEnd()];case 6:return A.sent(),[4,this.history.syncData()];case 7:return A.sent(),[2,this.history]}})})},t.prototype.fitDataset=function(n,r){return Oe(this,void 0,void 0,function(){return Fe(this,function(a){return[2,Dce(this,n,r)]})})},t.prototype.trainOnBatch=function(n,r){return Oe(this,void 0,void 0,function(){var a,i,o,s,u,l,c,p,d,f,h,m,v;return Fe(this,function(g){switch(g.label){case 0:return[4,this.standardizeUserData(n,r)];case 1:a=g.sent(),i=a[0],o=a[1],s=this.makeTrainFunction(),u=s(i.concat(o)),l=[],g.label=2;case 2:g.trys.push([2,7,8,9]),c=fe(u),p=c.next(),g.label=3;case 3:return p.done?[3,6]:(d=p.value,[4,d.data()]);case 4:f=g.sent(),l.push(f[0]),g.label=5;case 5:return p=c.next(),[3,3];case 6:return[3,9];case 7:return h=g.sent(),m={error:h},[3,9];case 8:try{p&&!p.done&&(v=c.return)&&v.call(c)}finally{if(m)throw m.error}return[7];case 9:return D.dispose(u),xo(a[0],n),xo(a[1],r),[2,ka(l)]}})})},t.prototype.getNamedWeights=function(n){for(var r=[],a=n!=null&&n.trainableOnly,i=a?this.trainableWeights:this.weights,o=this.getWeights(a),s=0;s<i.length;++s)a&&!i[s].trainable||r.push({name:i[s].originalName,tensor:o[s]});return r},Object.defineProperty(t.prototype,"stopTraining",{get:function(){return this.stopTraining_},set:function(n){this.stopTraining_=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"optimizer",{get:function(){return this.optimizer_},set:function(n){this.optimizer_!==n&&(this.optimizer_=n,this.isOptimizerOwned=!1)},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){var n=e.prototype.dispose.call(this);if(n.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){var r=D.memory().numTensors;this.optimizer_.dispose(),n.numDisposedVariables+=r-D.memory().numTensors}return n},t.prototype.getLossIdentifiers=function(){var n,r,a,i,o;if(typeof this.loss=="string")o=Ls(this.loss);else if(Array.isArray(this.loss)){try{for(var s=fe(this.loss),u=s.next();!u.done;u=s.next()){var l=u.value;if(typeof l!="string")throw new Error("Serialization of non-string loss is not supported.")}}catch(m){n={error:m}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}o=this.loss.map(function(m){return Ls(m)})}else{var c=Object.keys(this.loss);o={};var p=this.loss;try{for(var d=fe(c),f=d.next();!f.done;f=d.next()){var h=f.value;if(typeof p[h]=="string")o[h]=Ls(p[h]);else throw new Error("Serialization of non-string loss is not supported.")}}catch(m){a={error:m}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(a)throw a.error}}}return o},t.prototype.getMetricIdentifiers=function(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Ls(Wm(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(function(a){return Ls(Wm(a))});var n={};for(var r in this.metrics)n[r]=Ls(Wm(this.metrics[r]));return n},t.prototype.getTrainingConfig=function(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}},t.prototype.loadTrainingConfig=function(n){if(n.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(n.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(n.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");var r=qf(n.optimizer_config),a=No(r),i;if(typeof n.loss=="string")i=_l(n.loss);else if(Array.isArray(n.loss))i=n.loss.map(function(u){return _l(u)});else if(n.loss!=null){i={};for(var o in n.loss)i[o]=_l(n.loss[o])}var s;if(Array.isArray(n.metrics))s=n.metrics.map(function(u){return _l(u)});else if(n.metrics!=null){s={};for(var o in n.metrics)s[o]=_l(n.metrics[o])}this.compile({loss:i,metrics:s,optimizer:a})},t.prototype.save=function(n,r){return Oe(this,void 0,void 0,function(){var a,i,o,s,u,l,c,p,d,f,h,m,v,g,y;return Fe(this,function(w){switch(w.label){case 0:if(typeof n=="string"){if(a=F.io.getSaveHandlers(n),a.length===0)throw new J("Cannot find any save handlers for URL '".concat(n,"'"));if(a.length>1)throw new J("Found more than one (".concat(a.length,") save handlers for ")+"URL '".concat(n,"'"));n=a[0]}if(n.save==null)throw new J("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return[4,F.io.encodeWeights(this.getNamedWeights(r))];case 1:return i=w.sent(),o=!1,s=null,u=this.toJSON(s,o),l={modelTopology:u,format:Bce,generatedBy:"TensorFlow.js tfjs-layers v".concat(J3),convertedBy:null},c=r==null?!1:r.includeOptimizer,c&&this.optimizer!=null?(l.trainingConfig=this.getTrainingConfig(),p="optimizer",v=(m=F.io).encodeWeights,[4,this.optimizer.getWeights()]):[3,4];case 2:return[4,v.apply(m,[w.sent(),p])];case 3:d=w.sent(),f=d.data,h=d.specs,(y=i.specs).push.apply(y,ft([],re(h),!1)),i.data=F.io.concatenateArrayBuffers([i.data,f]),w.label=4;case 4:return this.userDefinedMetadata!=null&&(g=!0,zT(this.userDefinedMetadata,this.name,g),l.userDefinedMetadata=this.userDefinedMetadata),l.weightData=i.data,l.weightSpecs=i.specs,[2,n.save(l)]}})})},t.prototype.setUserDefinedMetadata=function(n){zT(n,this.name),this.userDefinedMetadata=n},t.prototype.getUserDefinedMetadata=function(){return this.userDefinedMetadata},t}(Nce);zs.className="Model";F.serialization.registerClass(zs);var tC=function(e){ue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(zs);tC.className="Functional";F.serialization.registerClass(tC);function Lce(e,t){return Oe(this,void 0,void 0,function(){var n,r,a,i,o,s,u,l,c,p;return Fe(this,function(d){switch(d.label){case 0:return"modelTopology"in e||(e={modelTopology:e}),e=e,n=e.modelTopology,n.model_config!=null&&(n=n.model_config),r=qf(n),a=No(r,t),e.weightsManifest==null?[3,2]:[4,F.io.loadWeights(e.weightsManifest,e.pathPrefix,a.weights.map(function(f){return f.originalName}))];case 1:i=d.sent(),o={};try{for(s=fe(a.weights),u=s.next();!u.done;u=s.next())l=u.value,o[l.originalName]=i[l.originalName]}catch(f){c={error:f}}finally{try{u&&!u.done&&(p=s.return)&&p.call(s)}finally{if(c)throw c.error}}a.loadWeights(o),F.dispose(i),d.label=2;case 2:return[2,a]}})})}function zce(e,t){return Oe(this,void 0,void 0,function(){var n;return Fe(this,function(r){if(t==null&&(t={}),typeof e=="string"){if(n=F.io.getLoadHandlers(e,t),n.length===0)n.push(F.io.browserHTTPRequest(e,t));else if(n.length>1)throw new J("Found more than one (".concat(n.length,") load handlers for ")+"URL '".concat(e,"'"));e=n[0]}return[2,$ce(e,void 0,t)]})})}function $ce(e,t,n){return Oe(this,void 0,void 0,function(){var r,a,i,o,s,u,l,c,p;return Fe(this,function(d){switch(d.label){case 0:if(n==null&&(n={}),e.load==null)throw new J("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");return[4,e.load()];case 1:if(r=d.sent(),a=r.modelTopology,a.model_config!=null&&(a=a.model_config),i=n.strict==null?!0:n.strict,o=r.weightData!=null&&r.weightSpecs!=null&&i,s=No(qf(a),t,o),u=r.trainingConfig,u!=null&&s.loadTrainingConfig(u),r.userDefinedMetadata!=null&&s.setUserDefinedMetadata(r.userDefinedMetadata),r.weightData==null)return[3,4];if(r.weightSpecs==null)throw new J("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");return l=Vce(r.weightData,r.weightSpecs),c=l.modelWeights,p=l.optimizerWeights,s.loadWeights(c,i),s.optimizer!=null&&p.length>0?[4,s.optimizer.setWeights(p)]:[3,3];case 2:d.sent(),d.label=3;case 3:F.dispose(c),F.dispose(p.map(function(f){return f.tensor})),d.label=4;case 4:return[2,s]}})})}function Vce(e,t){var n=F.io.decodeWeights(e,t),r={},a=[];return t.forEach(function(i){i.group==="optimizer"?a.push({name:i.name,tensor:n[i.name]}):r[i.name]=n[i.name]}),{modelWeights:r,optimizerWeights:a}}var Cv=function(e){ue(t,e);function t(n){var r,a,i=e.call(this,{inputs:[],outputs:[]})||this;if(n=n||{},i.trainable=!0,i.built=!1,i.name=n.name!=null?n.name:dv("sequential_"),n.layers!=null)try{for(var o=fe(n.layers),s=o.next();!s.done;s=o.next()){var u=s.value;i.add(u)}}catch(l){r={error:l}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}return i}return t.prototype.checkShape=function(n){var r=n.inboundNodes[0].outputTensors[0].shape;if(r.some(function(a){return a<0}))throw new J("Negative dimension size caused by adding layer "+"".concat(n.name," with input shape [")+"".concat(n.inboundNodes[0].inputTensors[0].shape,"]"))},t.prototype.add=function(n){var r=n instanceof t||n instanceof zs,a;if(r){if(a=n,a.outputs.length!==1)throw new J("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(a.inputs.length!==1)throw new J("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(n.inboundNodes.length===0){if(n.batchInputShape==null)throw new J("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var i=lE({batchShape:n.batchInputShape,dtype:n.dtype,name:n.name+"_input"});n.apply(i)}if(r)this.outputs=a.outputs,this.inputs=a.inputs;else{if(n.inboundNodes.length!==1)throw new J("A layer added to a Sequential model must not already be "+"connected somewhere else. LayersModel received layer ".concat(n.name," ")+"which has ".concat(n.inboundNodes.length," pre-existing inbound ")+"connections.");if(n.inboundNodes[0].outputTensors.length!==1)throw new J("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(n),this.outputs=[n.inboundNodes[0].outputTensors[0]],this.inputs=uE(this.outputs[0])}this.inboundNodes=[],new xv({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Ol(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(function(s){return s.shape}),outputShapes:this.outputs[0].shape})}else{var o=n.apply(this.outputs[0]);if(Array.isArray(o))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(n),this.outputs=[o],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(n),this.built=!1},t.prototype.pop=function(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var n=this.layers.length-1;this.layers[n].outboundNodes=[],this.outputs=[this.layers[n].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}},t.prototype.call=function(n,r){return this.model==null&&this.build(),this.model.call(n,r)},t.prototype.build=function(n){if(Ut(n),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new zs({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0},t.prototype.countParams=function(){return this.built||this.build(),e.prototype.countParams.call(this)},t.prototype.summary=function(n,r,a){a===void 0&&(a=console.log),this.built||this.build(),e.prototype.summary.call(this,n,r,a)},t.prototype.setWeights=function(n){this.model==null&&this.build(),this.model.setWeights(n)},t.prototype.evaluate=function(n,r,a){if(a===void 0&&(a={}),!this.built)throw new as("The model needs to be compiled before being used.");return this.model.evaluate(n,r,a)},t.prototype.evaluateDataset=function(n,r){return Oe(this,void 0,void 0,function(){return Fe(this,function(a){if(!this.built)throw new as("The model needs to be compiled before being used.");return[2,this.model.evaluateDataset(n,r)]})})},t.prototype.predict=function(n,r){return r===void 0&&(r={}),this.model==null&&this.build(),this.model.predict(n,r)},t.prototype.predictOnBatch=function(n){return this.model==null&&this.build(),this.model.predictOnBatch(n)},t.prototype.compile=function(n){this.build(),this.model.compile(n),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames},Object.defineProperty(t.prototype,"optimizer",{get:function(){return this.model==null?void 0:this.model.optimizer},set:function(n){this.model.optimizer=n},enumerable:!1,configurable:!0}),t.prototype.fit=function(n,r,a){return a===void 0&&(a={}),Oe(this,void 0,void 0,function(){return Fe(this,function(i){if(!this.built)throw new as("The model needs to be compiled before being used.");return[2,this.model.fit(n,r,a)]})})},t.prototype.fitDataset=function(n,r){return Oe(this,void 0,void 0,function(){return Fe(this,function(a){if(!this.built)throw new as("The model needs to be compiled before being used.");return[2,this.model.fitDataset(n,r)]})})},t.prototype.trainOnBatch=function(n,r){return Oe(this,void 0,void 0,function(){return Fe(this,function(a){return[2,this.model.trainOnBatch(n,r)]})})},t.fromConfig=function(n,r,a,i){var o,s;i===void 0&&(i=!1);var u,l={};if(r instanceof Array){if(r[0].className==null||r[0].className==="Merge")throw new J("Legacy serialization format not supported yet.");u=r}else F.util.assert(r.layers!=null,function(){return"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."}),u=r.layers,delete r.layers,l=r;var c=new n(l);if(!(c instanceof t))throw new _t("Sequential.fromConfig called on non-Sequential input: ".concat(c));try{for(var p=fe(u),d=p.next();!d.done;d=p.next()){var f=d.value,h=void 0,m=No(f,h,i);i&&m.setFastWeightInitDuringBuild(!0),c.add(m)}}catch(v){o={error:v}}finally{try{d&&!d.done&&(s=p.return)&&s.call(p)}finally{if(o)throw o.error}}return c},Object.defineProperty(t.prototype,"stopTraining",{get:function(){if(this.model==null)throw new J("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining},set:function(n){if(this.model==null)throw new J("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=n},enumerable:!1,configurable:!0}),t.prototype.getConfig=function(){var n,r,a=[];try{for(var i=fe(this.layers),o=i.next();!o.done;o=i.next()){var s=o.value,u={};u.className=s.getClassName(),u.config=s.getConfig(),a.push(u)}}catch(l){n={error:l}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return{name:this.name,layers:a}},t}(zs);Cv.className="Sequential";F.serialization.registerClass(Cv);function Wce(e){return new zs(e)}function Uce(e){return new Cv(e)}function nC(e){return lE(e)}function Gce(e,t){H3.registerCallbackConstructor(e,t)}var na=function(e){ue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getConfig=function(){return{}},t}(F.serialization.Serializable),rC=function(e){ue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.apply=function(n,r){return r===void 0&&(r=1),Yte(n,r)},t}(na);rC.className="elu";F.serialization.registerClass(rC);var aC=function(e){ue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.apply=function(n){return D.selu(n)},t}(na);aC.className="selu";F.serialization.registerClass(aC);var iC=function(e){ue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.apply=function(n){return D.relu(n)},t}(na);iC.className="relu";F.serialization.registerClass(iC);var oC=function(e){ue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.apply=function(n){return F.tidy(function(){return D.minimum(6,D.relu(n))})},t}(na);oC.className="relu6";F.serialization.registerClass(oC);var sC=function(e){ue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.apply=function(n){return n},t}(na);sC.className="linear";F.serialization.registerClass(sC);var uC=function(e){ue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.apply=function(n){return D.sigmoid(n)},t}(na);uC.className="sigmoid";F.serialization.registerClass(uC);var lC=function(e){ue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.apply=function(n){return Zte(n)},t}(na);lC.className="hardSigmoid";F.serialization.registerClass(lC);var cC=function(e){ue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.apply=function(n){return D.softplus(n)},t}(na);cC.className="softplus";F.serialization.registerClass(cC);var pC=function(e){ue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.apply=function(n){return Jte(n)},t}(na);pC.className="softsign";F.serialization.registerClass(pC);var dC=function(e){ue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.apply=function(n){return D.tanh(n)},t}(na);dC.className="tanh";F.serialization.registerClass(dC);var Z3=function(e){ue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.apply=function(n,r){return r===void 0&&(r=-1),D.softmax(n,r)},t}(na);Z3.className="softmax";F.serialization.registerClass(Z3);var fC=function(e){ue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.apply=function(n,r){return r===void 0&&(r=-1),D.logSoftmax(n,r)},t}(na);fC.className="logSoftmax";F.serialization.registerClass(fC);var hC=function(e){ue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.apply=function(n){return F.tidy(function(){return D.tidy(function(){var r=Math.sqrt(2),a=D.mul(.5,D.add(1,D.erf(D.div(n,r))));return D.mul(n,a)})})},t}(na);hC.className="gelu";F.serialization.registerClass(hC);var mC=function(e){ue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.apply=function(n){return F.tidy(function(){return D.mul(.5,D.mul(n,D.add(1,D.tanh(D.mul(D.sqrt(D.div(2,Math.PI)),D.add(n,D.mul(.044715,D.pow(n,3))))))))})},t}(na);mC.className="gelu_new";F.serialization.registerClass(mC);var vC=function(e){ue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.apply=function(n){return F.tidy(function(){return D.mul(n,D.tanh(D.softplus(n)))})},t}(na);vC.className="mish";F.serialization.registerClass(vC);var gC=function(e){ue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.apply=function(n,r){return r===void 0&&(r=1),F.tidy(function(){return D.mul(D.sigmoid(D.mul(n,r)),n)})},t}(na);gC.className="swish";F.serialization.registerClass(gC);function Fu(e){return e.getClassName()}function qy(e,t){return t===void 0&&(t={}),jf(e,F.serialization.SerializationMap.getMap().classNameMap,t,"activation")}function Ru(e){if(e==null){var t={};return t.className="linear",t.config={},qy(t)}if(typeof e=="string"){var t={};return t.className=e,t.config={},qy(t)}else return e instanceof na?e:qy(e)}function Q3(e){if(e!=null&&typeof e!="object")throw new Error("Argument to L1L2 regularizer's constructor is expected to be an "+"object, but received: ".concat(e))}var yC=function(e){ue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(F.serialization.Serializable),th=function(e){ue(t,e);function t(n){var r=e.call(this)||this;return Q3(n),r.l1=n==null||n.l1==null?.01:n.l1,r.l2=n==null||n.l2==null?.01:n.l2,r.hasL1=r.l1!==0,r.hasL2=r.l2!==0,r}return t.prototype.apply=function(n){var r=this;return F.tidy(function(){var a=F.zeros([1]);return r.hasL1&&(a=F.add(a,F.sum(D.mul(r.l1,F.abs(n))))),r.hasL2&&(a=F.add(a,F.sum(D.mul(r.l2,Xf(n))))),D.reshape(a,[])})},t.prototype.getConfig=function(){return{l1:this.l1,l2:this.l2}},t.fromConfig=function(n,r){return new n({l1:r.l1,l2:r.l2})},t}(yC);th.className="L1L2";F.serialization.registerClass(th);function qce(e){return Q3(e),new th({l1:e!=null?e.l1:null,l2:0})}function Hce(e){return Q3(e),new th({l2:e!=null?e.l2:null,l1:0})}var qT={l1l2:"L1L2"};function an(e){return c3(e)}function HT(e,t){return t===void 0&&(t={}),jf(e,F.serialization.SerializationMap.getMap().classNameMap,t,"regularizer")}function Pn(e){if(e==null)return null;if(typeof e=="string"){var t=e in qT?qT[e]:e,n={className:t,config:{}};return HT(n)}else return e instanceof yC?e:HT(e)}var e4=function(e){ue(t,e);function t(n){var r=e.call(this,n??{})||this;return r.supportsMasking=!0,n!=null&&(r.maxValue=n.maxValue),r}return t.prototype.call=function(n,r){n=St(n);var a=F.relu(n);return this.maxValue!=null&&(a=F.clipByValue(a,0,this.maxValue)),a},t.prototype.computeOutputShape=function(n){return n},t.prototype.getConfig=function(){var n={maxValue:this.maxValue},r=e.prototype.getConfig.call(this);return Object.assign(n,r),n},t}(At);e4.className="ReLU";F.serialization.registerClass(e4);var t4=function(e){ue(t,e);function t(n){var r=e.call(this,n??{})||this;return r.DEFAULT_ALPHA=.3,n==null&&(n={}),r.alpha=n.alpha==null?r.DEFAULT_ALPHA:n.alpha,r}return t.prototype.call=function(n,r){var a=St(n);return F.leakyRelu(a,this.alpha)},t.prototype.computeOutputShape=function(n){return n},t.prototype.getConfig=function(){var n={alpha:this.alpha},r=e.prototype.getConfig.call(this);return Object.assign(n,r),n},t}(At);t4.className="LeakyReLU";F.serialization.registerClass(t4);var n4=function(e){ue(t,e);function t(n){var r=e.call(this,n??{})||this;if(r.DEFAULT_ALPHA_INITIALIZER="zeros",n==null&&(n={}),r.supportsMasking=!0,r.alphaInitializer=On(n.alphaInitializer||r.DEFAULT_ALPHA_INITIALIZER),r.alphaRegularizer=Pn(n.alphaRegularizer),r.alphaConstraint=Nr(n.alphaConstraint),n.sharedAxes==null)r.sharedAxes=null;else if(Array.isArray(n.sharedAxes))r.sharedAxes=n.sharedAxes;else if(typeof n.sharedAxes=="number")r.sharedAxes=[n.sharedAxes];else throw new J("Expected sharedAxes to be a number or an array of numbers, "+"but got ".concat(n.sharedAxes));return r}return t.prototype.build=function(n){var r,a;n=Ut(n);var i=n.slice(1);if(this.sharedAxes!=null)try{for(var o=fe(this.sharedAxes),s=o.next();!s.done;s=o.next()){var u=s.value;i[u-1]=1}}catch(c){r={error:c}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}this.alpha=this.addWeight("alpha",i,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);var l={};if(this.sharedAxes!=null)for(var u=1;u<n.length;++u)l[u]=n[u];this.inputSpec=[new wr({ndim:n.length,axes:l})],this.built=!0},t.prototype.call=function(n,r){return n=St(n),F.prelu(n,this.alpha.read())},t.prototype.getConfig=function(){var n={alphaInitializer:qn(this.alphaInitializer),alphaRegularizer:an(this.alphaRegularizer),alphaConstraint:kr(this.alphaConstraint),sharedAxes:this.sharedAxes},r=e.prototype.getConfig.call(this);return Object.assign(n,r),n},t}(At);n4.className="PReLU";F.serialization.registerClass(n4);var r4=function(e){ue(t,e);function t(n){var r=e.call(this,n??{})||this;if(r.DEFAULT_ALPHA=1,n==null&&(n={}),n.alpha!=null&&n.alpha!==r.DEFAULT_ALPHA)throw new _t("Non-default alpha value (".concat(n.alpha,") is not supported by the ")+"ELU layer yet.");return r.alpha=n.alpha==null?r.DEFAULT_ALPHA:n.alpha,r}return t.prototype.call=function(n,r){var a=St(n);return F.elu(a)},t.prototype.computeOutputShape=function(n){return n},t.prototype.getConfig=function(){var n={alpha:this.alpha},r=e.prototype.getConfig.call(this);return Object.assign(n,r),n},t}(At);r4.className="ELU";F.serialization.registerClass(r4);var a4=function(e){ue(t,e);function t(n){var r=e.call(this,n??{})||this;return r.DEFAULT_THETA=1,n==null&&(n={}),r.theta=n.theta==null?r.DEFAULT_THETA:n.theta,r}return t.prototype.call=function(n,r){var a=St(n);return F.mul(a,F.cast(F.greater(a,this.theta),"float32"))},t.prototype.computeOutputShape=function(n){return n},t.prototype.getConfig=function(){var n={theta:this.theta},r=e.prototype.getConfig.call(this);return Object.assign(n,r),n},t}(At);a4.className="ThresholdedReLU";F.serialization.registerClass(a4);var i4=function(e){ue(t,e);function t(n){var r=e.call(this,n??{})||this;return r.DEFAULT_AXIS=1,n==null&&(n={}),r.softmax=new Z3().apply,r.axis=n.axis==null?r.DEFAULT_AXIS:n.axis,r}return t.prototype.call=function(n,r){var a=this;return F.tidy(function(){var i=St(n),o=r.mask;if(o!=null){var s=F.mul(F.sub(F.ones(i.shape),F.cast(o,i.dtype)),F.scalar(-1e9));i=F.add(i,s)}return a.axis instanceof Array?a.axis.length>1?F.exp(F.sub(i,F.logSumExp(i,a.axis,!0))):a.softmax(i,a.axis[0]):a.softmax(i,a.axis)})},t.prototype.computeOutputShape=function(n){return n},t.prototype.getConfig=function(){var n={axis:this.axis},r=e.prototype.getConfig.call(this);return Object.assign(n,r),n},t}(At);i4.className="Softmax";F.serialization.registerClass(i4);function mp(e,t,n){if(typeof e=="number")return Ol(e,t);if(e.length!==t)throw new J("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers.")+" Received: ".concat(e.length," elements."));for(var r=0;r<t;++r){var a=e[r];if(!Hte(a))throw new J("The ".concat(n," argument must be an integer or tuple of ").concat(t)+" integers. Received: ".concat(JSON.stringify(e)," including a")+" non-integer number ".concat(a))}return e}function To(e,t,n,r,a){if(a===void 0&&(a=1),e==null)return e;var i=t+(t-1)*(a-1),o;return n==="same"?o=e:o=e-i+1,Math.floor((o+r-1)/r)}function rs(e,t,n,r){if(e==null)return null;if(r==="valid")e=e*t+Au([n-t,0]);else if(r==="same")e=e*t;else throw new J("Unsupport padding mode: ".concat(r,"."));return e}function o4(e,t){return F.tidy(function(){return lr(t),t==="channelsFirst"?D.transpose(e,[0,2,3,1]):e})}function bC(e,t){return F.tidy(function(){return lr(t),t==="channelsFirst"?D.transpose(e,[0,2,3,4,1]):e})}function jce(e,t,n,r,a,i,o){return r===void 0&&(r=1),a===void 0&&(a="valid"),o===void 0&&(o=1),F.tidy(function(){if(i==null&&(i=Io()),lr(i),e.shape.length!==3)throw new J("The input of a conv1dWithBias operation should be 3, but is "+"".concat(e.shape.length," instead."));if(t.shape.length!==3)throw new J("The kernel for a conv1dWithBias operation should be 3, but is "+"".concat(t.shape.length," instead"));if(n!=null&&n.shape.length!==1)throw new J("The bias for a conv1dWithBias operation should be 1, but is "+"".concat(n.shape.length," instead"));if(i==="channelsFirst"&&(e=D.transpose(e,[0,2,1])),a==="causal")throw new _t("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var s=D.conv1d(e,t,r,a==="same"?"same":"valid","NWC",o);return n!=null&&(s=_o(s,n)),s})}function jT(e,t,n,r,a,i,o,s){return r===void 0&&(r=[1,1]),a===void 0&&(a="valid"),s===void 0&&(s=null),F.tidy(function(){if(i==null&&(i=Io()),lr(i),e.rank!==3&&e.rank!==4)throw new J("conv2dWithBiasActivation expects input to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));if(t.rank!==3&&t.rank!==4)throw new J("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));var u=o4(e,i);if(a==="causal")throw new _t("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=D.fused.conv2d({x:u,filter:t,strides:r,pad:a==="same"?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:s}),i==="channelsFirst"&&(u=D.transpose(u,[0,3,1,2])),u})}function Kce(e,t,n,r,a,i,o){return r===void 0&&(r=[1,1,1]),a===void 0&&(a="valid"),F.tidy(function(){if(i==null&&(i=Io()),lr(i),e.rank!==4&&e.rank!==5)throw new J("conv3dWithBias expects input to be of rank 4 or 5, but received "+"".concat(e.rank,"."));if(t.rank!==4&&t.rank!==5)throw new J("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+"".concat(e.rank,"."));var s=bC(e,i);if(a==="causal")throw new _t("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=D.conv3d(s,t,r,a==="same"?"same":"valid","NDHWC",o),n!=null&&(s=_o(s,n)),i==="channelsFirst"&&(s=D.transpose(s,[0,4,1,2,3])),s})}var wC=function(e){ue(t,e);function t(n,r){var a=e.call(this,r)||this;if(a.bias=null,a.DEFAULT_KERNEL_INITIALIZER="glorotNormal",a.DEFAULT_BIAS_INITIALIZER="zeros",t.verifyArgs(r),a.rank=n,Ar(a.rank,"rank"),a.rank!==1&&a.rank!==2&&a.rank!==3)throw new _t("Convolution layer for rank other than 1, 2, or 3 (".concat(a.rank,") is ")+"not implemented yet.");if(a.kernelSize=mp(r.kernelSize,n,"kernelSize"),a.strides=mp(r.strides==null?1:r.strides,n,"strides"),a.padding=r.padding==null?"valid":r.padding,mi(a.padding),a.dataFormat=r.dataFormat==null?"channelsLast":r.dataFormat,lr(a.dataFormat),a.activation=Ru(r.activation),a.useBias=r.useBias==null?!0:r.useBias,a.biasInitializer=On(r.biasInitializer||a.DEFAULT_BIAS_INITIALIZER),a.biasConstraint=Nr(r.biasConstraint),a.biasRegularizer=Pn(r.biasRegularizer),a.activityRegularizer=Pn(r.activityRegularizer),a.dilationRate=mp(r.dilationRate==null?1:r.dilationRate,n,"dilationRate"),a.rank===1&&Array.isArray(a.dilationRate)&&a.dilationRate.length!==1)throw new J("dilationRate must be a number or an array of a single number for 1D convolution, but received "+"".concat(JSON.stringify(a.dilationRate)));if(a.rank===2){if(typeof a.dilationRate=="number")a.dilationRate=[a.dilationRate,a.dilationRate];else if(a.dilationRate.length!==2)throw new J("dilationRate must be a number or array of two numbers for 2D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)))}else if(a.rank===3){if(typeof a.dilationRate=="number")a.dilationRate=[a.dilationRate,a.dilationRate,a.dilationRate];else if(a.dilationRate.length!==3)throw new J("dilationRate must be a number or array of three numbers for 3D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)))}return a}return t.verifyArgs=function(n){if(ns("kernelSize"in n,"required key 'kernelSize' not in config"),typeof n.kernelSize!="number"&&!p3(n.kernelSize,"number",1,3))throw new J("BaseConv expects config.kernelSize to be number or number[] with "+"length 1, 2, or 3, but received ".concat(JSON.stringify(n.kernelSize),"."))},t.prototype.getConfig=function(){var n={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Fu(this.activation),useBias:this.useBias,biasInitializer:qn(this.biasInitializer),biasRegularizer:an(this.biasRegularizer),activityRegularizer:an(this.activityRegularizer),biasConstraint:kr(this.biasConstraint)},r=e.prototype.getConfig.call(this);return Object.assign(n,r),n},t}(At),Dv=function(e){ue(t,e);function t(n,r){var a=e.call(this,n,r)||this;return a.kernel=null,t.verifyArgs(r),a.filters=r.filters,Ar(a.filters,"filters"),a.kernelInitializer=On(r.kernelInitializer||a.DEFAULT_KERNEL_INITIALIZER),a.kernelConstraint=Nr(r.kernelConstraint),a.kernelRegularizer=Pn(r.kernelRegularizer),a}return t.prototype.build=function(n){var r;n=Ut(n);var a=this.dataFormat==="channelsFirst"?1:n.length-1;if(n[a]==null)throw new J("The channel dimension of the input should be defined. "+"Found ".concat(n[a]));var i=n[a],o=this.kernelSize.concat([i,this.filters]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:(r={},r[a]=i,r)}],this.built=!0},t.prototype.call=function(n,r){var a=this;return F.tidy(function(){n=St(n);var i,o=a.bias==null?null:a.bias.read(),s=QT(a.activation.getClassName());if(s!=null&&a.rank===2)i=jT(n,a.kernel.read(),o,a.strides,a.padding,a.dataFormat,a.dilationRate,s);else{if(a.rank===1)i=jce(n,a.kernel.read(),o,a.strides[0],a.padding,a.dataFormat,a.dilationRate[0]);else if(a.rank===2)i=jT(n,a.kernel.read(),o,a.strides,a.padding,a.dataFormat,a.dilationRate);else if(a.rank===3)i=Kce(n,a.kernel.read(),o,a.strides,a.padding,a.dataFormat,a.dilationRate);else throw new _t("convolutions greater than 3D are not implemented yet.");a.activation!=null&&(i=a.activation.apply(i))}return i})},t.prototype.computeOutputShape=function(n){n=Ut(n);for(var r=[],a=this.dataFormat==="channelsLast"?n.slice(1,n.length-1):n.slice(2),i=0;i<a.length;++i){var o=To(a[i],this.kernelSize[i],this.padding,this.strides[i],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[i]);r.push(o)}var s=[n[0]];return this.dataFormat==="channelsLast"?(s=s.concat(r),s.push(this.filters)):(s.push(this.filters),s=s.concat(r)),s},t.prototype.getConfig=function(){var n={filters:this.filters,kernelInitializer:qn(this.kernelInitializer),kernelRegularizer:an(this.kernelRegularizer),kernelConstraint:kr(this.kernelConstraint)},r=e.prototype.getConfig.call(this);return Object.assign(n,r),n},t.verifyArgs=function(n){if(!("filters"in n)||typeof n.filters!="number"||n.filters<1)throw new J("Convolution layer expected config.filters to be a 'number' > 0 "+"but got ".concat(JSON.stringify(n.filters)))},t}(wC),_v=function(e){ue(t,e);function t(n){var r=e.call(this,2,n)||this;return t.verifyArgs(n),r}return t.prototype.getConfig=function(){var n=e.prototype.getConfig.call(this);return delete n.rank,n},t.verifyArgs=function(n){if(typeof n.kernelSize!="number"&&!p3(n.kernelSize,"number",1,2))throw new J("Conv2D expects config.kernelSize to be number or number[] with "+"length 1 or 2, but received ".concat(JSON.stringify(n.kernelSize),"."))},t}(Dv);_v.className="Conv2D";F.serialization.registerClass(_v);var Av=function(e){ue(t,e);function t(n){var r=e.call(this,3,n)||this;return t.verifyArgs(n),r}return t.prototype.getConfig=function(){var n=e.prototype.getConfig.call(this);return delete n.rank,n},t.verifyArgs=function(n){if(typeof n.kernelSize!="number"&&!(Array.isArray(n.kernelSize)&&(n.kernelSize.length===1||n.kernelSize.length===3)))throw new J("Conv3D expects config.kernelSize to be number or"+" [number, number, number], but received ".concat(JSON.stringify(n.kernelSize),"."))},t}(Dv);Av.className="Conv3D";F.serialization.registerClass(Av);var s4=function(e){ue(t,e);function t(n){var r=e.call(this,n)||this;if(r.inputSpec=[new wr({ndim:4})],r.padding!=="same"&&r.padding!=="valid")throw new J("Conv2DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(r.padding));return r}return t.prototype.build=function(n){var r;if(n=Ut(n),n.length!==4)throw new J("Input should have rank 4; Received input shape: "+JSON.stringify(n));var a=this.dataFormat==="channelsFirst"?1:n.length-1;if(n[a]==null)throw new J("The channel dimension of the inputs should be defined. Found `None`.");var i=n[a],o=this.kernelSize.concat([this.filters,i]);this.kernel=this.addWeight("kernel",o,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new wr({ndim:4,axes:(r={},r[a]=i,r)})],this.built=!0},t.prototype.call=function(n,r){var a=this;return D.tidy(function(){var i=St(n);if(i.shape.length!==4)throw new J("Conv2DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(i.shape.length));var o=i.shape,s=o[0],u,l;a.dataFormat==="channelsFirst"?(u=2,l=3):(u=1,l=2);var c=o[u],p=o[l],d=a.kernelSize[0],f=a.kernelSize[1],h=a.strides[0],m=a.strides[1],v=rs(c,h,d,a.padding),g=rs(p,m,f,a.padding),y=[s,v,g,a.filters];a.dataFormat!=="channelsLast"&&(i=D.transpose(i,[0,2,3,1]));var w=D.conv2dTranspose(i,a.kernel.read(),y,a.strides,a.padding);return a.dataFormat!=="channelsLast"&&(w=D.transpose(w,[0,3,1,2])),a.bias!=null&&(w=_o(w,a.bias.read(),a.dataFormat)),a.activation!=null&&(w=a.activation.apply(w)),w})},t.prototype.computeOutputShape=function(n){n=Ut(n);var r=n.slice(),a,i,o;this.dataFormat==="channelsFirst"?(a=1,i=2,o=3):(a=3,i=1,o=2);var s=this.kernelSize[0],u=this.kernelSize[1],l=this.strides[0],c=this.strides[1];return r[a]=this.filters,r[i]=rs(r[i],l,s,this.padding),r[o]=rs(r[o],c,u,this.padding),r},t.prototype.getConfig=function(){var n=e.prototype.getConfig.call(this);return delete n.dilationRate,n},t}(_v);s4.className="Conv2DTranspose";F.serialization.registerClass(s4);var u4=function(e){ue(t,e);function t(n){var r=e.call(this,n)||this;if(r.inputSpec=[new wr({ndim:5})],r.padding!=="same"&&r.padding!=="valid")throw new J("Conv3DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(r.padding));return r}return t.prototype.build=function(n){var r;if(n=Ut(n),n.length!==5)throw new J("Input should have rank 5; Received input shape: "+JSON.stringify(n));var a=this.dataFormat==="channelsFirst"?1:n.length-1;if(n[a]==null)throw new J("The channel dimension of the inputs should be defined. Found `None`.");var i=n[a],o=this.kernelSize.concat([this.filters,i]);this.kernel=this.addWeight("kernel",o,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new wr({ndim:5,axes:(r={},r[a]=i,r)})],this.built=!0},t.prototype.call=function(n,r){var a=this;return D.tidy(function(){var i=St(n);if(i.shape.length!==5)throw new J("Conv3DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(i.shape.length));var o=i.shape,s=o[0],u,l,c;a.dataFormat==="channelsFirst"?(c=2,u=3,l=4):(c=1,u=2,l=3);var p=o[c],d=o[u],f=o[l],h=a.kernelSize[0],m=a.kernelSize[1],v=a.kernelSize[2],g=a.strides[0],y=a.strides[1],w=a.strides[2],b=rs(p,g,h,a.padding),x=rs(d,y,m,a.padding),k=rs(f,w,v,a.padding),N=[s,b,x,k,a.filters];a.dataFormat!=="channelsLast"&&(i=D.transpose(i,[0,2,3,4,1]));var E=D.conv3dTranspose(i,a.kernel.read(),N,a.strides,a.padding);return a.dataFormat!=="channelsLast"&&(E=D.transpose(E,[0,4,1,2,3])),a.bias!==null&&(E=_o(E,a.bias.read(),a.dataFormat)),a.activation!==null&&(E=a.activation.apply(E)),E})},t.prototype.computeOutputShape=function(n){n=Ut(n);var r=n.slice(),a,i,o,s;this.dataFormat==="channelsFirst"?(a=1,i=2,o=3,s=4):(a=4,i=1,o=2,s=3);var u=this.kernelSize[0],l=this.kernelSize[1],c=this.kernelSize[2],p=this.strides[0],d=this.strides[1],f=this.strides[2];return r[a]=this.filters,r[i]=rs(r[i],p,u,this.padding),r[o]=rs(r[o],d,l,this.padding),r[s]=rs(r[s],f,c,this.padding),r},t.prototype.getConfig=function(){var n=e.prototype.getConfig.call(this);return delete n.dilationRate,n},t}(Av);u4.className="Conv3DTranspose";F.serialization.registerClass(u4);var xC=function(e){ue(t,e);function t(n,r){var a=e.call(this,n,r)||this;if(a.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",a.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",a.depthwiseKernel=null,a.pointwiseKernel=null,r.filters==null)throw new J("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(r.kernelInitializer!=null||r.kernelRegularizer!=null||r.kernelConstraint!=null)throw new J("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(r.padding!=null&&r.padding!=="same"&&r.padding!=="valid")throw new J("SeparableConv".concat(a.rank,"D supports only padding modes: ")+"'same' and 'valid', but received ".concat(JSON.stringify(r.padding)));return a.depthMultiplier=r.depthMultiplier==null?1:r.depthMultiplier,a.depthwiseInitializer=On(r.depthwiseInitializer||a.DEFAULT_DEPTHWISE_INITIALIZER),a.depthwiseRegularizer=Pn(r.depthwiseRegularizer),a.depthwiseConstraint=Nr(r.depthwiseConstraint),a.pointwiseInitializer=On(r.depthwiseInitializer||a.DEFAULT_POINTWISE_INITIALIZER),a.pointwiseRegularizer=Pn(r.pointwiseRegularizer),a.pointwiseConstraint=Nr(r.pointwiseConstraint),a}return t.prototype.build=function(n){var r;if(n=Ut(n),n.length<this.rank+2)throw new J("Inputs to SeparableConv".concat(this.rank,"D should have rank ")+"".concat(this.rank+2,", but received input shape: ")+"".concat(JSON.stringify(n)));var a=this.dataFormat==="channelsFirst"?1:n.length-1;if(n[a]==null||n[a]<0)throw new J("The channel dimension of the inputs should be defined, "+"but found ".concat(JSON.stringify(n[a])));for(var i=n[a],o=this.kernelSize.concat([i,this.depthMultiplier]),s=[],u=0;u<this.rank;++u)s.push(1);s.push(i*this.depthMultiplier,this.filters);var l=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",o,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,l,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",s,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,l,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,l,this.biasConstraint):this.bias=null,this.inputSpec=[new wr({ndim:this.rank+2,axes:(r={},r[a]=i,r)})],this.built=!0},t.prototype.call=function(n,r){var a=this;return F.tidy(function(){n=St(n);var i;if(a.rank===1)throw new _t("1D separable convolution is not implemented yet.");return a.rank===2&&(a.dataFormat==="channelsFirst"&&(n=D.transpose(n,[0,2,3,1])),i=D.separableConv2d(n,a.depthwiseKernel.read(),a.pointwiseKernel.read(),a.strides,a.padding,a.dilationRate,"NHWC")),a.useBias&&(i=_o(i,a.bias.read(),a.dataFormat)),a.activation!=null&&(i=a.activation.apply(i)),a.dataFormat==="channelsFirst"&&(i=D.transpose(i,[0,3,1,2])),i})},t.prototype.getConfig=function(){var n=e.prototype.getConfig.call(this);return delete n.rank,delete n.kernelInitializer,delete n.kernelRegularizer,delete n.kernelConstraint,n.depthwiseInitializer=qn(this.depthwiseInitializer),n.pointwiseInitializer=qn(this.pointwiseInitializer),n.depthwiseRegularizer=an(this.depthwiseRegularizer),n.pointwiseRegularizer=an(this.pointwiseRegularizer),n.depthwiseConstraint=kr(this.depthwiseConstraint),n.pointwiseConstraint=kr(this.pointwiseConstraint),n},t}(Dv);xC.className="SeparableConv";var l4=function(e){ue(t,e);function t(n){return e.call(this,2,n)||this}return t}(xC);l4.className="SeparableConv2D";F.serialization.registerClass(l4);var c4=function(e){ue(t,e);function t(n){var r=e.call(this,1,n)||this;return t.verifyArgs(n),r.inputSpec=[{ndim:3}],r}return t.prototype.getConfig=function(){var n=e.prototype.getConfig.call(this);return delete n.rank,delete n.dataFormat,n},t.verifyArgs=function(n){if(typeof n.kernelSize!="number"&&!p3(n.kernelSize,"number",1,1))throw new J("Conv1D expects config.kernelSize to be number or number[] with "+"length 1, but received ".concat(JSON.stringify(n.kernelSize),"."))},t}(Dv);c4.className="Conv1D";F.serialization.registerClass(c4);var p4=function(e){ue(t,e);function t(n){var r=e.call(this,n)||this;return typeof n.cropping=="number"?r.cropping=[[n.cropping,n.cropping],[n.cropping,n.cropping]]:typeof n.cropping[0]=="number"?r.cropping=[[n.cropping[0],n.cropping[0]],[n.cropping[1],n.cropping[1]]]:r.cropping=n.cropping,r.dataFormat=n.dataFormat===void 0?"channelsLast":n.dataFormat,r.inputSpec=[{ndim:4}],r}return t.prototype.computeOutputShape=function(n){return this.dataFormat==="channelsFirst"?[n[0],n[1],n[2]-this.cropping[0][0]-this.cropping[0][1],n[3]-this.cropping[1][0]-this.cropping[1][1]]:[n[0],n[1]-this.cropping[0][0]-this.cropping[0][1],n[2]-this.cropping[1][0]-this.cropping[1][1],n[3]]},t.prototype.call=function(n,r){var a=this;return F.tidy(function(){if(n=St(n),a.dataFormat==="channelsLast"){var i=Vm(n,a.cropping[0][0],n.shape[1]-a.cropping[0][0]-a.cropping[0][1],2);return Vm(i,a.cropping[1][0],n.shape[2]-a.cropping[1][1]-a.cropping[1][0],3)}else{var i=Vm(n,a.cropping[0][0],n.shape[2]-a.cropping[0][0]-a.cropping[0][1],3);return Vm(i,a.cropping[1][0],n.shape[3]-a.cropping[1][1]-a.cropping[1][0],4)}})},t.prototype.getConfig=function(){var n={cropping:this.cropping,dataFormat:this.dataFormat},r=e.prototype.getConfig.call(this);return Object.assign(n,r),n},t}(At);p4.className="Cropping2D";F.serialization.registerClass(p4);var d4=function(e){ue(t,e);function t(n){var r=e.call(this,n)||this;return r.DEFAULT_SIZE=[2,2],r.inputSpec=[{ndim:4}],r.size=n.size==null?r.DEFAULT_SIZE:n.size,r.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,lr(r.dataFormat),r.interpolation=n.interpolation==null?"nearest":n.interpolation,Ute(r.interpolation),r}return t.prototype.computeOutputShape=function(n){if(this.dataFormat==="channelsFirst"){var r=n[2]==null?null:this.size[0]*n[2],a=n[3]==null?null:this.size[1]*n[3];return[n[0],n[1],r,a]}else{var r=n[1]==null?null:this.size[0]*n[1],a=n[2]==null?null:this.size[1]*n[2];return[n[0],r,a,n[3]]}},t.prototype.call=function(n,r){var a=this;return D.tidy(function(){var i=St(n),o=i.shape;if(a.dataFormat==="channelsFirst"){i=D.transpose(i,[0,2,3,1]);var s=a.size[0]*o[2],u=a.size[1]*o[3],l=a.interpolation==="nearest"?D.image.resizeNearestNeighbor(i,[s,u]):D.image.resizeBilinear(i,[s,u]);return D.transpose(l,[0,3,1,2])}else{var s=a.size[0]*o[1],u=a.size[1]*o[2];return a.interpolation==="nearest"?D.image.resizeNearestNeighbor(i,[s,u]):D.image.resizeBilinear(i,[s,u])}})},t.prototype.getConfig=function(){var n={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},r=e.prototype.getConfig.call(this);return Object.assign(n,r),n},t}(At);d4.className="UpSampling2D";F.serialization.registerClass(d4);function Xce(e,t,n,r,a,i){return n===void 0&&(n=[1,1]),r===void 0&&(r="valid"),F.tidy(function(){a==null&&(a=Io()),lr(a);var o=o4(e,a);if(e.rank!==4)throw new J("Input for depthwiseConv2d is required to be 4-D, but is instead "+"".concat(e.rank,"-D"));if(t.rank!==4)throw new J("depthwiseKernel is required to be 4-D, but is instead "+"".concat(t.rank,"-D"));return o=D.depthwiseConv2d(o,t,n,r==="same"?"same":"valid","NHWC",i),a==="channelsFirst"&&(o=D.transpose(o,[0,3,1,2])),o})}var f4=function(e){ue(t,e);function t(n){var r=e.call(this,2,n)||this;return r.depthwiseKernel=null,r.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,r.depthwiseInitializer=On(n.depthwiseInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.depthwiseConstraint=Nr(n.depthwiseConstraint),r.depthwiseRegularizer=Pn(n.depthwiseRegularizer),r}return t.prototype.build=function(n){if(n=Ut(n),n.length<4)throw new J("Inputs to DepthwiseConv2D should have rank 4. "+"Received input shape: ".concat(JSON.stringify(n),"."));var r=this.dataFormat==="channelsFirst"?1:3;if(n[r]==null||n[r]<0)throw new J("The channel dimension of the inputs to DepthwiseConv2D should "+"be defined, but is not (".concat(n[r],")."));var a=n[r],i=[this.kernelSize[0],this.kernelSize[1],a,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",i,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[a*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0},t.prototype.call=function(n,r){var a=this;return F.tidy(function(){n=St(n);var i=Xce(n,a.depthwiseKernel.read(),a.strides,a.padding,a.dataFormat,null);return a.useBias&&(i=_o(i,a.bias.read(),a.dataFormat)),a.activation!=null&&(i=a.activation.apply(i)),i})},t.prototype.computeOutputShape=function(n){n=Ut(n);var r=this.dataFormat==="channelsFirst"?n[2]:n[1],a=this.dataFormat==="channelsFirst"?n[3]:n[2],i=this.dataFormat==="channelsFirst"?n[1]*this.depthMultiplier:n[3]*this.depthMultiplier,o=To(r,this.kernelSize[0],this.padding,this.strides[0]),s=To(a,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[n[0],i,o,s]:[n[0],o,s,i]},t.prototype.getConfig=function(){var n=e.prototype.getConfig.call(this);return n.depthMultiplier=this.depthMultiplier,n.depthwiseInitializer=qn(this.depthwiseInitializer),n.depthwiseRegularizer=an(this.depthwiseRegularizer),n.depthwiseConstraint=kr(this.depthwiseRegularizer),n},t}(wC);f4.className="DepthwiseConv2D";F.serialization.registerClass(f4);function SC(e,t,n,r){if(Array.isArray(e)){if(t!=null||n!=null)throw new J("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function a(i){return i==null||Array.isArray(i)?i:[i]}return t=a(t),n=a(n),{inputs:e,initialState:t,constants:n}}function kC(e,t,n,r,a,i,o,s){return r===void 0&&(r=!1),o===void 0&&(o=!1),s===void 0&&(s=!1),D.tidy(function(){var u=t.shape.length;if(u<3)throw new J("Input should be at least 3D, but is ".concat(u,"D."));var l=[1,0].concat(Eo(2,u));if(t=D.transpose(t,l),i!=null)throw new _t("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),a!=null&&(a=D.cast(D.cast(a,"bool"),"float32"),a.rank===u-1&&(a=D.expandDims(a,-1)),a=D.transpose(a,l)),r&&(t=D.reverse(t,0),a!=null&&(a=D.reverse(a,0)));var c=[],p,d=n,f=t.shape[0],h=D.unstack(t),m;a!=null&&(m=D.unstack(a));for(var v=function(b){var x=h[b],k=D.tidy(function(){return e(x,d)});if(a==null)p=k[0],d=k[1];else{var N=D.tidy(function(){var E=m[b],C=D.sub(D.onesLike(E),E),R=D.add(D.mul(k[0],E),D.mul(d[0],C)),A=d.map(function(M,$){return D.add(D.mul(k[1][$],E),D.mul(M,C))});return{output:R,newStates:A}});p=N.output,d=N.newStates}s&&c.push(p)},g=0;g<f;++g)v(g);var y;if(s){var w=1;y=D.stack(c,w)}return[p,y,d]})}var $s=function(e){ue(t,e);function t(n){var r=e.call(this,n)||this,a;if(n.cell==null)throw new J("cell property is missing for the constructor of RNN.");if(Array.isArray(n.cell)?a=new Ov({cells:n.cell}):a=n.cell,a.stateSize==null)throw new J("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return r.cell=a,r.returnSequences=n.returnSequences==null?!1:n.returnSequences,r.returnState=n.returnState==null?!1:n.returnState,r.goBackwards=n.goBackwards==null?!1:n.goBackwards,r._stateful=n.stateful==null?!1:n.stateful,r.unroll=n.unroll==null?!1:n.unroll,r.supportsMasking=!0,r.inputSpec=[new wr({ndim:3})],r.stateSpec=null,r.states_=null,r.numConstants=null,r.keptStates=[],r}return t.prototype.getStates=function(){if(this.states_==null){var n=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Eo(0,n).map(function(r){return null})}else return this.states_},t.prototype.setStates=function(n){this.states_=n},t.prototype.computeOutputShape=function(n){var r,a;Yy(n)&&(n=n[0]),n=n;var i=this.cell.stateSize;Array.isArray(i)||(i=[i]);var o=i[0],s;if(this.returnSequences?s=[n[0],n[1],o]:s=[n[0],o],this.returnState){var u=[];try{for(var l=fe(i),c=l.next();!c.done;c=l.next()){var p=c.value;u.push([n[0],p])}}catch(d){r={error:d}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(r)throw r.error}}return[s].concat(u)}else return s},t.prototype.computeMask=function(n,r){var a=this;return D.tidy(function(){Array.isArray(r)&&(r=r[0]);var i=a.returnSequences?r:null;if(a.returnState){var o=a.states.map(function(s){return null});return[i].concat(o)}else return i})},Object.defineProperty(t.prototype,"states",{get:function(){if(this.states_==null){for(var n=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,r=[],a=0;a<n;++a)r.push(null);return r}else return this.states_},set:function(n){this.states_=n},enumerable:!1,configurable:!0}),t.prototype.build=function(n){if(this.numConstants!=null)throw new _t("Constants support is not implemented in RNN yet.");Yy(n)&&(n=n[0]),n=n;var r=this.stateful?n[0]:null,a=n.slice(2);this.inputSpec[0]=new wr({shape:ft([r,null],re(a),!1)});var i=[n[0]].concat(n.slice(2));this.cell.build(i);var o;if(Array.isArray(this.cell.stateSize)?o=this.cell.stateSize:o=[this.cell.stateSize],this.stateSpec!=null){if(!F.util.arraysEqual(this.stateSpec.map(function(s){return s.shape[s.shape.length-1]}),o))throw new J("An initialState was passed that is not compatible with "+"cell.stateSize. Received stateSpec=".concat(this.stateSpec,"; ")+"However cell.stateSize is ".concat(this.cell.stateSize))}else this.stateSpec=o.map(function(s){return new wr({shape:[null,s]})});this.stateful&&this.resetStates()},t.prototype.resetStates=function(n,r){var a=this;r===void 0&&(r=!1),F.tidy(function(){if(!a.stateful)throw new Cu("Cannot call resetStates() on an RNN Layer that is not stateful.");var i=a.inputSpec[0].shape[0];if(i==null)throw new J("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(a.states_==null)Array.isArray(a.cell.stateSize)?a.states_=a.cell.stateSize.map(function(c){return D.zeros([i,c])}):a.states_=[D.zeros([i,a.cell.stateSize])];else if(n==null)D.dispose(a.states_),a.keptStates!=null&&(D.dispose(a.keptStates),a.keptStates=[]),Array.isArray(a.cell.stateSize)?a.states_=a.cell.stateSize.map(function(c){return D.zeros([i,c])}):a.states_[0]=D.zeros([i,a.cell.stateSize]);else{if(Array.isArray(n)||(n=[n]),n.length!==a.states_.length)throw new J("Layer ".concat(a.name," expects ").concat(a.states_.length," state(s), ")+"but it received ".concat(n.length," state value(s). Input ")+"received: ".concat(n));r===!0?a.keptStates.push(a.states_.slice()):D.dispose(a.states_);for(var o=0;o<a.states_.length;++o){var s=n[o],u=Array.isArray(a.cell.stateSize)?a.cell.stateSize[o]:a.cell.stateSize,l=[i,u];if(!F.util.arraysEqual(s.shape,l))throw new J("State ".concat(o," is incompatible with layer ").concat(a.name,": ")+"expected shape=".concat(l,", received shape=").concat(s.shape));a.states_[o]=s}}a.states_=a.states_.map(function(c){return D.keep(c.clone())})})},t.prototype.apply=function(n,r){var a,i,o=r==null?null:r.initialState,s=r==null?null:r.constants;r==null&&(r={});var u=SC(n,o,s,this.numConstants);n=u.inputs,o=u.initialState,s=u.constants;var l=[],c=[];if(o!=null){r.initialState=o,l=l.concat(o),this.stateSpec=[];try{for(var p=fe(o),d=p.next();!d.done;d=p.next()){var f=d.value;this.stateSpec.push(new wr({shape:f.shape}))}}catch(w){a={error:w}}finally{try{d&&!d.done&&(i=p.return)&&i.call(p)}finally{if(a)throw a.error}}c=c.concat(this.stateSpec)}s!=null&&(r.constants=s,l=l.concat(s),this.numConstants=s.length);var h=l[0]instanceof Co;if(h){var m=[n].concat(l),v=this.inputSpec.concat(c),g=this.inputSpec;this.inputSpec=v;var y=e.prototype.apply.call(this,m,r);return this.inputSpec=g,y}else return e.prototype.apply.call(this,n,r)},t.prototype.call=function(n,r){var a=this;return F.tidy(function(){var i=r==null?null:r.mask,o=r==null?null:r.training,s=r==null?null:r.initialState;n=St(n),s==null&&(a.stateful?s=a.states_:s=a.getInitialState(n));var u=Array.isArray(a.cell.stateSize)?a.cell.stateSize.length:1;if(s.length!==u)throw new J("RNN Layer has ".concat(u," state(s) but was passed ")+"".concat(s.length," initial state(s)."));a.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var l={training:o},c=function(v,g){var y=a.cell.call([v].concat(g),l);return[y[0],y.slice(1)]},p=kC(c,n,s,a.goBackwards,i,null,a.unroll,a.returnSequences),d=p[0],f=p[1],h=p[2];a.stateful&&a.resetStates(h,o);var m=a.returnSequences?f:d;return a.returnState?[m].concat(h):m})},t.prototype.getInitialState=function(n){var r=this;return F.tidy(function(){var a=D.zeros(n.shape);return a=D.sum(a,[1,2]),a=Kf(a),Array.isArray(r.cell.stateSize)?r.cell.stateSize.map(function(i){return i>1?Ky(a,[1,i]):a}):r.cell.stateSize>1?[Ky(a,[1,r.cell.stateSize])]:[a]})},Object.defineProperty(t.prototype,"trainableWeights",{get:function(){return this.trainable?this.cell.trainableWeights:[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nonTrainableWeights",{get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights},enumerable:!1,configurable:!0}),t.prototype.setFastWeightInitDuringBuild=function(n){e.prototype.setFastWeightInitDuringBuild.call(this,n),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(n)},t.prototype.getConfig=function(){var n=e.prototype.getConfig.call(this),r={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(r.numConstants=this.numConstants);var a=this.cell.getConfig();return this.getClassName()===t.className&&(r.cell={className:this.cell.getClassName(),config:a}),Object.assign(Object.assign(Object.assign({},a),n),r)},t.fromConfig=function(n,r,a){a===void 0&&(a={});var i=r.cell,o=No(i,a);return new n(Object.assign(r,{cell:o}))},t}(At);$s.className="RNN";F.serialization.registerClass($s);var kp=function(e){ue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(At),Fv=function(e){ue(t,e);function t(n){var r=e.call(this,n)||this;return r.DEFAULT_ACTIVATION="tanh",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=n.units,Ar(r.units,"units"),r.activation=Ru(n.activation==null?r.DEFAULT_ACTIVATION:n.activation),r.useBias=n.useBias==null?!0:n.useBias,r.kernelInitializer=On(n.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=On(n.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=On(n.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=Pn(n.kernelRegularizer),r.recurrentRegularizer=Pn(n.recurrentRegularizer),r.biasRegularizer=Pn(n.biasRegularizer),r.kernelConstraint=Nr(n.kernelConstraint),r.recurrentConstraint=Nr(n.recurrentConstraint),r.biasConstraint=Nr(n.biasConstraint),r.dropout=vp([1,Au([0,n.dropout==null?0:n.dropout])]),r.recurrentDropout=vp([1,Au([0,n.recurrentDropout==null?0:n.recurrentDropout])]),r.dropoutFunc=n.dropoutFunc,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return t.prototype.build=function(n){n=Ut(n),this.kernel=this.addWeight("kernel",[n[n.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0},t.prototype.call=function(n,r){var a=this;return F.tidy(function(){if(n=n,n.length!==2)throw new J("SimpleRNNCell expects 2 input Tensors, got ".concat(n.length,"."));var i=n[1];n=n[0];var o=r.training==null?!1:r.training;0<a.dropout&&a.dropout<1&&a.dropoutMask==null&&(a.dropoutMask=Ou({ones:function(){return D.onesLike(n)},rate:a.dropout,training:o,dropoutFunc:a.dropoutFunc})),0<a.recurrentDropout&&a.recurrentDropout<1&&a.recurrentDropoutMask==null&&(a.recurrentDropoutMask=Ou({ones:function(){return D.onesLike(i)},rate:a.recurrentDropout,training:o,dropoutFunc:a.dropoutFunc}));var s,u=a.dropoutMask,l=a.recurrentDropoutMask;u!=null?s=os(D.mul(n,u),a.kernel.read()):s=os(n,a.kernel.read()),a.bias!=null&&(s=_o(s,a.bias.read())),l!=null&&(i=D.mul(i,l));var c=D.add(s,os(i,a.recurrentKernel.read()));return a.activation!=null&&(c=a.activation.apply(c)),[c,c]})},t.prototype.getConfig=function(){var n=e.prototype.getConfig.call(this),r={units:this.units,activation:Fu(this.activation),useBias:this.useBias,kernelInitializer:qn(this.kernelInitializer),recurrentInitializer:qn(this.recurrentInitializer),biasInitializer:qn(this.biasInitializer),kernelRegularizer:an(this.kernelRegularizer),recurrentRegularizer:an(this.recurrentRegularizer),biasRegularizer:an(this.biasRegularizer),activityRegularizer:an(this.activityRegularizer),kernelConstraint:kr(this.kernelConstraint),recurrentConstraint:kr(this.recurrentConstraint),biasConstraint:kr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},n),r)},t}(kp);Fv.className="SimpleRNNCell";F.serialization.registerClass(Fv);var h4=function(e){ue(t,e);function t(n){return n.cell=new Fv(n),e.call(this,n)||this}return t.prototype.call=function(n,r){var a=this;return F.tidy(function(){a.cell.dropoutMask!=null&&(D.dispose(a.cell.dropoutMask),a.cell.dropoutMask=null),a.cell.recurrentDropoutMask!=null&&(D.dispose(a.cell.recurrentDropoutMask),a.cell.recurrentDropoutMask=null);var i=r==null?null:r.mask,o=r==null?null:r.training,s=r==null?null:r.initialState;return e.prototype.call.call(a,n,{mask:i,training:o,initialState:s})})},t.fromConfig=function(n,r){return new n(r)},t}($s);h4.className="SimpleRNN";F.serialization.registerClass(h4);var Rv=function(e){ue(t,e);function t(n){var r=e.call(this,n)||this;if(r.DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",n.resetAfter)throw new J("GRUCell does not support reset_after parameter set to true.");return r.units=n.units,Ar(r.units,"units"),r.activation=Ru(n.activation===void 0?r.DEFAULT_ACTIVATION:n.activation),r.recurrentActivation=Ru(n.recurrentActivation===void 0?r.DEFAULT_RECURRENT_ACTIVATION:n.recurrentActivation),r.useBias=n.useBias==null?!0:n.useBias,r.kernelInitializer=On(n.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=On(n.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=On(n.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=Pn(n.kernelRegularizer),r.recurrentRegularizer=Pn(n.recurrentRegularizer),r.biasRegularizer=Pn(n.biasRegularizer),r.kernelConstraint=Nr(n.kernelConstraint),r.recurrentConstraint=Nr(n.recurrentConstraint),r.biasConstraint=Nr(n.biasConstraint),r.dropout=vp([1,Au([0,n.dropout==null?0:n.dropout])]),r.recurrentDropout=vp([1,Au([0,n.recurrentDropout==null?0:n.recurrentDropout])]),r.dropoutFunc=n.dropoutFunc,r.implementation=n.implementation,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return t.prototype.build=function(n){n=Ut(n);var r=n[n.length-1];this.kernel=this.addWeight("kernel",[r,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0},t.prototype.call=function(n,r){var a=this;return F.tidy(function(){if(n=n,n.length!==2)throw new J("GRUCell expects 2 input Tensors (inputs, h, c), got "+"".concat(n.length,"."));var i=r.training==null?!1:r.training,o=n[1];n=n[0],0<a.dropout&&a.dropout<1&&a.dropoutMask==null&&(a.dropoutMask=Ou({ones:function(){return D.onesLike(n)},rate:a.dropout,training:i,count:3,dropoutFunc:a.dropoutFunc})),0<a.recurrentDropout&&a.recurrentDropout<1&&a.recurrentDropoutMask==null&&(a.recurrentDropoutMask=Ou({ones:function(){return D.onesLike(o)},rate:a.recurrentDropout,training:i,count:3,dropoutFunc:a.dropoutFunc}));var s=a.dropoutMask,u=a.recurrentDropoutMask,l,c,p;0<a.dropout&&a.dropout<1&&(n=D.mul(n,s[0]));var d=os(n,a.kernel.read());a.useBias&&(d=_o(d,a.bias.read())),0<a.recurrentDropout&&a.recurrentDropout<1&&(o=D.mul(o,u[0]));var f=a.recurrentKernel.read(),h=re(D.split(f,[2*a.units,a.units],f.rank-1),2),m=h[0],v=h[1],g=os(o,m),y=re(D.split(d,3,d.rank-1),3),w=y[0],b=y[1],x=y[2],k=re(D.split(g,2,g.rank-1),2),N=k[0],E=k[1];l=a.recurrentActivation.apply(D.add(w,N)),c=a.recurrentActivation.apply(D.add(b,E));var C=os(D.mul(c,o),v);p=a.activation.apply(D.add(x,C));var R=D.add(D.mul(l,o),D.mul(D.add(1,D.neg(l)),p));return[R,R]})},t.prototype.getConfig=function(){var n=e.prototype.getConfig.call(this),r={units:this.units,activation:Fu(this.activation),recurrentActivation:Fu(this.recurrentActivation),useBias:this.useBias,kernelInitializer:qn(this.kernelInitializer),recurrentInitializer:qn(this.recurrentInitializer),biasInitializer:qn(this.biasInitializer),kernelRegularizer:an(this.kernelRegularizer),recurrentRegularizer:an(this.recurrentRegularizer),biasRegularizer:an(this.biasRegularizer),activityRegularizer:an(this.activityRegularizer),kernelConstraint:kr(this.kernelConstraint),recurrentConstraint:kr(this.recurrentConstraint),biasConstraint:kr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},n),r)},t}(kp);Rv.className="GRUCell";F.serialization.registerClass(Rv);var m4=function(e){ue(t,e);function t(n){return n.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),n.cell=new Rv(n),e.call(this,n)||this}return t.prototype.call=function(n,r){var a=this;return F.tidy(function(){a.cell.dropoutMask!=null&&(D.dispose(a.cell.dropoutMask),a.cell.dropoutMask=null),a.cell.recurrentDropoutMask!=null&&(D.dispose(a.cell.recurrentDropoutMask),a.cell.recurrentDropoutMask=null);var i=r==null?null:r.mask,o=r==null?null:r.training,s=r==null?null:r.initialState;return e.prototype.call.call(a,n,{mask:i,training:o,initialState:s})})},t.fromConfig=function(n,r){return r.implmentation===0&&(r.implementation=1),new n(r)},t}($s);m4.className="GRU";F.serialization.registerClass(m4);var nh=function(e){ue(t,e);function t(n){var r=e.call(this,n)||this;return r.DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=n.units,Ar(r.units,"units"),r.activation=Ru(n.activation===void 0?r.DEFAULT_ACTIVATION:n.activation),r.recurrentActivation=Ru(n.recurrentActivation===void 0?r.DEFAULT_RECURRENT_ACTIVATION:n.recurrentActivation),r.useBias=n.useBias==null?!0:n.useBias,r.kernelInitializer=On(n.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=On(n.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=On(n.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.unitForgetBias=n.unitForgetBias,r.kernelRegularizer=Pn(n.kernelRegularizer),r.recurrentRegularizer=Pn(n.recurrentRegularizer),r.biasRegularizer=Pn(n.biasRegularizer),r.kernelConstraint=Nr(n.kernelConstraint),r.recurrentConstraint=Nr(n.recurrentConstraint),r.biasConstraint=Nr(n.biasConstraint),r.dropout=vp([1,Au([0,n.dropout==null?0:n.dropout])]),r.recurrentDropout=vp([1,Au([0,n.recurrentDropout==null?0:n.recurrentDropout])]),r.dropoutFunc=n.dropoutFunc,r.implementation=n.implementation,r.stateSize=[r.units,r.units],r.dropoutMask=null,r.recurrentDropoutMask=null,r}return t.prototype.build=function(n){var r;n=Ut(n);var a=n[n.length-1];this.kernel=this.addWeight("kernel",[a,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);var i;if(this.useBias){if(this.unitForgetBias){var o=this.biasInitializer,s=this.units;i=new(r=function(u){ue(l,u);function l(){return u!==null&&u.apply(this,arguments)||this}return l.prototype.apply=function(c,p){var d=o.apply([s]),f=new hv().apply([s]),h=o.apply([s*2]);return JN(JN(d,f),h)},l}(Xi),r.className="CustomInit",r)}else i=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,i,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0},t.prototype.call=function(n,r){var a=this;return F.tidy(function(){var i=r.training==null?!1:r.training;if(n=n,n.length!==3)throw new J("LSTMCell expects 3 input Tensors (inputs, h, c), got "+"".concat(n.length,"."));var o=n[1],s=n[2];n=n[0],0<a.dropout&&a.dropout<1&&a.dropoutMask==null&&(a.dropoutMask=Ou({ones:function(){return D.onesLike(n)},rate:a.dropout,training:i,count:4,dropoutFunc:a.dropoutFunc})),0<a.recurrentDropout&&a.recurrentDropout<1&&a.recurrentDropoutMask==null&&(a.recurrentDropoutMask=Ou({ones:function(){return D.onesLike(o)},rate:a.recurrentDropout,training:i,count:4,dropoutFunc:a.dropoutFunc}));var u=a.dropoutMask,l=a.recurrentDropoutMask,c,p,d,f;0<a.dropout&&a.dropout<1&&(n=D.mul(n,u[0]));var h=os(n,a.kernel.read());0<a.recurrentDropout&&a.recurrentDropout<1&&(o=D.mul(o,l[0])),h=D.add(h,os(o,a.recurrentKernel.read())),a.useBias&&(h=_o(h,a.bias.read()));var m=re(D.split(h,4,h.rank-1),4),v=m[0],g=m[1],y=m[2],w=m[3];c=a.recurrentActivation.apply(v),p=a.recurrentActivation.apply(g),d=D.add(D.mul(p,s),D.mul(c,a.activation.apply(y))),f=a.recurrentActivation.apply(w);var b=D.mul(f,a.activation.apply(d));return[b,b,d]})},t.prototype.getConfig=function(){var n=e.prototype.getConfig.call(this),r={units:this.units,activation:Fu(this.activation),recurrentActivation:Fu(this.recurrentActivation),useBias:this.useBias,kernelInitializer:qn(this.kernelInitializer),recurrentInitializer:qn(this.recurrentInitializer),biasInitializer:qn(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:an(this.kernelRegularizer),recurrentRegularizer:an(this.recurrentRegularizer),biasRegularizer:an(this.biasRegularizer),activityRegularizer:an(this.activityRegularizer),kernelConstraint:kr(this.kernelConstraint),recurrentConstraint:kr(this.recurrentConstraint),biasConstraint:kr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},n),r)},t}(kp);nh.className="LSTMCell";F.serialization.registerClass(nh);var v4=function(e){ue(t,e);function t(n){return n.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),n.cell=new nh(n),e.call(this,n)||this}return t.prototype.call=function(n,r){var a=this;return F.tidy(function(){a.cell.dropoutMask!=null&&(D.dispose(a.cell.dropoutMask),a.cell.dropoutMask=null),a.cell.recurrentDropoutMask!=null&&(D.dispose(a.cell.recurrentDropoutMask),a.cell.recurrentDropoutMask=null);var i=r==null?null:r.mask,o=r==null?null:r.training,s=r==null?null:r.initialState;return e.prototype.call.call(a,n,{mask:i,training:o,initialState:s})})},t.fromConfig=function(n,r){return r.implmentation===0&&(r.implementation=1),new n(r)},t}($s);v4.className="LSTM";F.serialization.registerClass(v4);var Ov=function(e){ue(t,e);function t(n){var r=e.call(this,n)||this;return r.cells=n.cells,r}return Object.defineProperty(t.prototype,"stateSize",{get:function(){var n,r,a=[];try{for(var i=fe(this.cells.slice().reverse()),o=i.next();!o.done;o=i.next()){var s=o.value;Array.isArray(s.stateSize)?a.push.apply(a,ft([],re(s.stateSize),!1)):a.push(s.stateSize)}}catch(u){n={error:u}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return a},enumerable:!1,configurable:!0}),t.prototype.call=function(n,r){var a=this;return F.tidy(function(){var i,o,s,u;n=n;var l=n.slice(1),c=[];try{for(var p=fe(a.cells.slice().reverse()),d=p.next();!d.done;d=p.next()){var f=d.value;Array.isArray(f.stateSize)?c.push(l.splice(0,f.stateSize.length)):c.push(l.splice(0,1))}}catch(b){i={error:b}}finally{try{d&&!d.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}c.reverse();for(var h=[],m,v=0;v<a.cells.length;++v){var f=a.cells[v];l=c[v],v===0?m=[n[0]].concat(l):m=[m[0]].concat(l),m=f.call(m,r),h.push(m.slice(1))}l=[];try{for(var g=fe(h.slice().reverse()),y=g.next();!y.done;y=g.next()){var w=y.value;l.push.apply(l,ft([],re(w),!1))}}catch(b){s={error:b}}finally{try{y&&!y.done&&(u=g.return)&&u.call(g)}finally{if(s)throw s.error}}return[m[0]].concat(l)})},t.prototype.build=function(n){Yy(n)&&(n=n[0]),n=n;var r;this.cells.forEach(function(a,i){Fl("RNNCell_".concat(i),function(){a.build(n),Array.isArray(a.stateSize)?r=a.stateSize[0]:r=a.stateSize,n=[n[0],r]})}),this.built=!0},t.prototype.getConfig=function(){var n=e.prototype.getConfig.call(this),r=function(o){return{className:o.getClassName(),config:o.getConfig()}},a=this.cells.map(r),i={cells:a};return Object.assign(Object.assign({},n),i)},t.fromConfig=function(n,r,a){var i,o;a===void 0&&(a={});var s=[];try{for(var u=fe(r.cells),l=u.next();!l.done;l=u.next()){var c=l.value;s.push(No(c,a))}}catch(p){i={error:p}}finally{try{l&&!l.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}return new n({cells:s})},Object.defineProperty(t.prototype,"trainableWeights",{get:function(){var n,r;if(!this.trainable)return[];var a=[];try{for(var i=fe(this.cells),o=i.next();!o.done;o=i.next()){var s=o.value;a.push.apply(a,ft([],re(s.trainableWeights),!1))}}catch(u){n={error:u}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return a},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nonTrainableWeights",{get:function(){var n,r,a,i,o=[];try{for(var s=fe(this.cells),u=s.next();!u.done;u=s.next()){var l=u.value;o.push.apply(o,ft([],re(l.nonTrainableWeights),!1))}}catch(f){n={error:f}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}if(!this.trainable){var c=[];try{for(var p=fe(this.cells),d=p.next();!d.done;d=p.next()){var l=d.value;c.push.apply(c,ft([],re(l.trainableWeights),!1))}}catch(f){a={error:f}}finally{try{d&&!d.done&&(i=p.return)&&i.call(p)}finally{if(a)throw a.error}}return c.concat(o)}return o},enumerable:!1,configurable:!0}),t.prototype.getWeights=function(){var n,r,a=[];try{for(var i=fe(this.cells),o=i.next();!o.done;o=i.next()){var s=o.value;a.push.apply(a,ft([],re(s.weights),!1))}}catch(u){n={error:u}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return Jy(a)},t.prototype.setWeights=function(n){var r,a,i=[];try{for(var o=fe(this.cells),s=o.next();!s.done;s=o.next())for(var u=s.value,l=u.weights.length,c=n.splice(l),p=0;p<u.weights.length;++p)i.push([u.weights[p],c[p]])}catch(d){r={error:d}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}w3(i)},t}(kp);Ov.className="StackedRNNCells";F.serialization.registerClass(Ov);function Ou(e){var t=e.ones,n=e.rate,r=e.training,a=r===void 0?!1:r,i=e.count,o=i===void 0?1:i,s=e.dropoutFunc,u=function(){return s!=null?s(t(),n):oE(t(),n)},l=function(){return Yf(u,t,a)};if(!o||o<=1)return D.keep(l().clone());var c=Array(o).fill(void 0).map(l);return c.map(function(p){return D.keep(p.clone())})}var Yce=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};(function(e){ue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(kp);var NC=function(e){ue(t,e);function t(n){var r=this;if(n.unroll)throw new _t("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(n.cell))throw new _t("It is not possible at the moment to stack convolutional cells.");return r=e.call(this,n)||this,r.inputSpec=[new wr({ndim:5})],r}return t.prototype.call=function(n,r){var a=this;return D.tidy(function(){if(a.cell.dropoutMask!=null&&(D.dispose(a.cell.dropoutMask),a.cell.dropoutMask=null),a.cell.recurrentDropoutMask!=null&&(D.dispose(a.cell.recurrentDropoutMask),a.cell.recurrentDropoutMask=null),r&&r.constants)throw new J("ConvRNN2D cell does not support constants");var i=r==null?null:r.mask,o=r==null?null:r.training,s=r==null?null:r.initialState;return e.prototype.call.call(a,n,{mask:i,training:o,initialState:s})})},t.prototype.computeOutputShape=function(n){var r=this.computeSingleOutputShape(n);return this.returnSequences||(r=ft([r[0]],re(r.slice(2)),!1)),this.returnState&&(r=ft([r],re(Array(2).fill(ft([n[0]],re(r.slice(-3)),!1))),!1)),r},t.prototype.getInitialState=function(n){var r=this;return D.tidy(function(){var a=r.cell.stateSize,i=n.shape,o=r.computeSingleOutputShape(i),s=ft([o[0]],re(o.slice(2)),!1),u=D.zeros(s);return Array.isArray(a)?Array(a.length).fill(u):[u]})},t.prototype.resetStates=function(n,r){var a=this;r===void 0&&(r=!1),D.tidy(function(){if(!a.stateful)throw new Cu("Cannot call resetStates() on an RNN Layer that is not stateful.");var i=a.inputSpec[0].shape,o=a.computeSingleOutputShape(i),s=ft([o[0]],re(o.slice(2)),!1),u=i[0];if(u==null)throw new J("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(a.getStates()==null)Array.isArray(a.cell.stateSize)?a.states_=a.cell.stateSize.map(function(){return D.zeros(s)}):a.states_=[D.zeros(s)];else if(n==null)D.dispose(a.states_),a.keptStates!=null&&(D.dispose(a.keptStates),a.keptStates=[]),Array.isArray(a.cell.stateSize)?a.states_=a.cell.stateSize.map(function(){return D.zeros(s)}):a.states_[0]=D.zeros(s);else{if(Array.isArray(n)||(n=[n]),n.length!==a.states_.length)throw new J("Layer ".concat(a.name," expects ").concat(a.states_.length," state(s), ")+"but it received ".concat(n.length," state value(s). Input ")+"received: ".concat(n));r?a.keptStates.push(a.states_.slice()):D.dispose(a.states_);for(var l=0;l<a.states_.length;++l){var c=n[l],p=s;if(!F.util.arraysEqual(c.shape,p))throw new J("State ".concat(l," is incompatible with layer ").concat(a.name,": ")+"expected shape=".concat(p,", received shape=").concat(c.shape));a.states_[l]=c}}a.states_=a.states_.map(function(d){return D.keep(d.clone())})})},t.prototype.computeSingleOutputShape=function(n){var r=this.cell,a=r.dataFormat,i=r.filters,o=r.kernelSize,s=r.padding,u=r.strides,l=r.dilationRate,c=a==="channelsFirst",p=n[c?3:2],d=n[c?4:3],f=To(p,o[0],s,u[0],l[0]),h=To(d,o[1],s,u[1],l[1]),m=ft(ft([],re(n.slice(0,2)),!1),re(c?[i,f,h]:[f,h,i]),!1);return m},t}($s);NC.className="ConvRNN2D";var Mv=function(e){ue(t,e);function t(n){var r=this,a=n.filters,i=n.kernelSize,o=n.strides,s=n.padding,u=n.dataFormat,l=n.dilationRate;return r=e.call(this,Object.assign(Object.assign({},n),{units:a}))||this,r.filters=a,Ar(r.filters,"filters"),r.kernelSize=mp(i,2,"kernelSize"),r.kernelSize.forEach(function(c){return Ar(c,"kernelSize")}),r.strides=mp(o||1,2,"strides"),r.strides.forEach(function(c){return Ar(c,"strides")}),r.padding=s||"valid",mi(r.padding),r.dataFormat=u||"channelsLast",lr(r.dataFormat),r.dilationRate=mp(l||1,2,"dilationRate"),r.dilationRate.forEach(function(c){return Ar(c,"dilationRate")}),r}return t.prototype.build=function(n){var r;n=Ut(n);var a=this.dataFormat==="channelsFirst"?1:n.length-1;if(n[a]==null)throw new J("The channel dimension of the input should be defined. "+"Found ".concat(n[a]));var i=n[a],o=4,s=this.kernelSize.concat([i,this.filters*o]);this.kernel=this.addWeight("kernel",s,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);var u=this.kernelSize.concat([this.filters,this.filters*o]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",u,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){var l=void 0;if(this.unitForgetBias){var c=this.biasInitializer,p=this.filters;l=new(r=function(d){ue(f,d);function f(){return d!==null&&d.apply(this,arguments)||this}return f.prototype.apply=function(h,m){var v=c.apply([p]),g=D.ones([p]),y=c.apply([p*2]);return d3([v,g,y])},f}(Xi),r.className="CustomInit",r)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*o],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0},t.prototype.call=function(n,r){var a=this;return D.tidy(function(){if(n.length!==3)throw new J("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got "+"".concat(n.length,"."));var i=r.training||!1,o=n[0],s=n[1],u=n[2],l=4;0<a.dropout&&a.dropout<1&&a.dropoutMask==null&&(a.dropoutMask=Ou({ones:function(){return D.onesLike(o)},rate:a.dropout,training:i,count:l,dropoutFunc:a.dropoutFunc}));var c=a.dropoutMask,p=function(de,ge,Ee){return!ge||!ge[Ee]?de:D.mul(ge[Ee],de)},d=p(o,c,0),f=p(o,c,1),h=p(o,c,2),m=p(o,c,3);0<a.recurrentDropout&&a.recurrentDropout<1&&a.recurrentDropoutMask==null&&(a.recurrentDropoutMask=Ou({ones:function(){return D.onesLike(s)},rate:a.recurrentDropout,training:i,count:l,dropoutFunc:a.dropoutFunc}));var v=a.recurrentDropoutMask,g=p(s,v,0),y=p(s,v,1),w=p(s,v,2),b=p(s,v,3),x=3,k=re(D.split(a.kernel.read(),l,x),4),N=k[0],E=k[1],C=k[2],R=k[3],A=re(a.useBias?D.split(a.bias.read(),l):[null,null,null,null],4),M=A[0],$=A[1],z=A[2],L=A[3];d=a.inputConv(d,N,M,a.padding),f=a.inputConv(f,E,$,a.padding),h=a.inputConv(h,C,z,a.padding),m=a.inputConv(m,R,L,a.padding);var B=re(D.split(a.recurrentKernel.read(),l,x),4),W=B[0],Y=B[1],Q=B[2],G=B[3];g=a.recurrentConv(g,W),y=a.recurrentConv(y,Y),w=a.recurrentConv(w,Q),b=a.recurrentConv(b,G);var X=a.recurrentActivation.apply(D.add(d,g)),ie=a.recurrentActivation.apply(D.add(f,y)),ae=D.add(D.mul(ie,u),D.mul(X,a.activation.apply(D.add(h,w)))),le=D.mul(a.recurrentActivation.apply(D.add(m,b)),a.activation.apply(ae));return[le,le,ae]})},t.prototype.getConfig=function(){var n=e.prototype.getConfig.call(this);n.units;var r=Yce(n,["units"]),a={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},r),a)},t.prototype.inputConv=function(n,r,a,i){var o=D.conv2d(n,r,this.strides,i||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return a?_o(o,a,this.dataFormat):o},t.prototype.recurrentConv=function(n,r){var a=1;return D.conv2d(n,r,a,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")},t}(nh);Mv.className="ConvLSTM2DCell";D.serialization.registerClass(Mv);var g4=function(e){ue(t,e);function t(n){var r=new Mv(n);return e.call(this,Object.assign(Object.assign({},n),{cell:r}))||this}return t.fromConfig=function(n,r){return new n(r)},t}(NC);g4.className="ConvLSTM2D";D.serialization.registerClass(g4);var Pv=function(e){ue(t,e);function t(n){var r=e.call(this,n)||this;return r.rate=Math.max(Math.min(n.rate,1),0),r.noiseShape=n.noiseShape,r.seed=n.seed,r.supportsMasking=!0,r}return t.prototype.getNoiseShape=function(n){if(this.noiseShape==null)return this.noiseShape;for(var r=n.shape,a=[],i=0;i<this.noiseShape.length;++i)a.push(this.noiseShape[i]==null?r[i]:this.noiseShape[i]);return a},t.prototype.call=function(n,r){var a=this;return F.tidy(function(){a.invokeCallHook(n,r);var i=St(n);if(0<a.rate&&a.rate<1){var o=r.training==null?!1:r.training,s=a.getNoiseShape(i),u=Yf(function(){return oE(i,a.rate,s,a.seed)},function(){return i},o);return u}return n})},t.prototype.getConfig=function(){var n={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},r=e.prototype.getConfig.call(this);return Object.assign(n,r),n},t.prototype.dispose=function(){return e.prototype.dispose.call(this)},t}(At);Pv.className="Dropout";F.serialization.registerClass(Pv);var y4=function(e){ue(t,e);function t(n){var r=e.call(this,n)||this;return r.inputSpec=[{ndim:3}],r}return t.prototype.getNoiseShape=function(n){var r=n.shape;return[r[0],1,r[2]]},t}(Pv);y4.className="SpatialDropout1D";F.serialization.registerClass(y4);var b4=function(e){ue(t,e);function t(n){var r=e.call(this,n)||this;if(r.activation=null,r.useBias=!0,r.kernel=null,r.bias=null,r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_BIAS_INITIALIZER="zeros",n.batchInputShape==null&&n.inputShape==null&&n.inputDim!=null){var a=null;n.batchSize!=null&&(a=n.batchSize),r.batchInputShape=[a,n.inputDim]}return r.units=n.units,Ar(r.units,"units"),r.activation=Ru(n.activation),n.useBias!=null&&(r.useBias=n.useBias),r.kernelInitializer=On(n.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.biasInitializer=On(n.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelConstraint=Nr(n.kernelConstraint),r.biasConstraint=Nr(n.biasConstraint),r.kernelRegularizer=Pn(n.kernelRegularizer),r.biasRegularizer=Pn(n.biasRegularizer),r.activityRegularizer=Pn(n.activityRegularizer),r.supportsMasking=!0,r.inputSpec=[{minNDim:2}],r}return t.prototype.build=function(n){var r;n=Ut(n);var a=n[n.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[a,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:(r={},r[-1]=a,r)}],this.built=!0},t.prototype.computeOutputShape=function(n){n=Ut(n);var r=n.slice();return r[r.length-1]=this.units,r},t.prototype.call=function(n,r){var a=this;return F.tidy(function(){a.invokeCallHook(n,r);var i=St(n),o=QT(a.activation.getClassName()),s;return o!=null?s=os(i,a.kernel.read(),o,a.bias?a.bias.read():null):(s=os(i,a.kernel.read()),a.bias!=null&&(s=_o(s,a.bias.read())),a.activation!=null&&(s=a.activation.apply(s))),s})},t.prototype.getConfig=function(){var n={units:this.units,activation:Fu(this.activation),useBias:this.useBias,kernelInitializer:qn(this.kernelInitializer),biasInitializer:qn(this.biasInitializer),kernelRegularizer:an(this.kernelRegularizer),biasRegularizer:an(this.biasRegularizer),activityRegularizer:an(this.activityRegularizer),kernelConstraint:kr(this.kernelConstraint),biasConstraint:kr(this.biasConstraint)},r=e.prototype.getConfig.call(this);return Object.assign(n,r),n},t}(At);b4.className="Dense";F.serialization.registerClass(b4);var w4=function(e){ue(t,e);function t(n){var r=this;return n=n||{},r=e.call(this,n)||this,r.inputSpec=[{minNDim:3}],r.dataFormat=n.dataFormat,r}return t.prototype.computeOutputShape=function(n){var r,a;n=Ut(n);try{for(var i=fe(n.slice(1)),o=i.next();!o.done;o=i.next()){var s=o.value;if(s==null)throw new J('The shape of the input to "Flatten" is not fully defined '+"(got ".concat(n.slice(1),"). Make sure to pass a complete ")+'"input_shape" or "batch_input_shape" argument to the first layer in your model.')}}catch(u){r={error:u}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(r)throw r.error}}return[n[0],_u(n,1)]},t.prototype.call=function(n,r){var a=this;return F.tidy(function(){a.invokeCallHook(n,r);var i=St(n);if(a.dataFormat==="channelsFirst"&&i.rank>1){for(var o=[0],s=2;s<i.rank;++s)o.push(s);o.push(1),i=F.transpose(i,o)}return Xte(i)})},t.prototype.getConfig=function(){var n={};this.dataFormat!=null&&(n.dataFormat=this.dataFormat);var r=e.prototype.getConfig.call(this);return Object.assign(n,r),n},t}(At);w4.className="Flatten";F.serialization.registerClass(w4);var x4=function(e){ue(t,e);function t(n){var r=e.call(this,n)||this;return r.supportsMasking=!0,r.activation=Ru(n.activation),r}return t.prototype.call=function(n,r){var a=this;return F.tidy(function(){a.invokeCallHook(n,r);var i=St(n);return a.activation.apply(i)})},t.prototype.getConfig=function(){var n={activation:Fu(this.activation)},r=e.prototype.getConfig.call(this);return Object.assign(n,r),n},t}(At);x4.className="Activation";F.serialization.registerClass(x4);var S4=function(e){ue(t,e);function t(n){var r=e.call(this,n)||this;return r.n=n.n,r.inputSpec=[{ndim:2}],r}return t.prototype.computeOutputShape=function(n){return[n[0],this.n,n[1]]},t.prototype.call=function(n,r){var a=this;return F.tidy(function(){return n=St(n),jte(n,a.n)})},t.prototype.getConfig=function(){var n={n:this.n},r=e.prototype.getConfig.call(this);return Object.assign(n,r),n},t}(At);S4.className="RepeatVector";F.serialization.registerClass(S4);var k4=function(e){ue(t,e);function t(n){var r=e.call(this,n)||this;r.targetShape=n.targetShape;for(var a=0;a<r.targetShape.length;++a)r.isUnknown(r.targetShape[a])&&(r.targetShape[a]=null);return r}return t.prototype.isUnknown=function(n){return n<0||n==null},t.prototype.fixUnknownDimension=function(n,r){for(var a="Total size of new array must be unchanged.",i=r.slice(),o=1,s=null,u=0;u<i.length;++u){var l=i[u];if(this.isUnknown(l))if(s===null)s=u;else throw new J("Can only specifiy one unknown dimension.");else o*=l}var c=_u(n);if(s!==null){if(o===0||c%o!==0)throw new J(a);i[s]=c/o}else if(c!==o)throw new J(a);return i},t.prototype.computeOutputShape=function(n){for(var r=!1,a=0;a<n.length;++a)if(this.isUnknown(n[a])){r=!0;break}return r?n.slice(0,1).concat(this.targetShape):n.slice(0,1).concat(this.fixUnknownDimension(n.slice(1),this.targetShape))},t.prototype.call=function(n,r){var a=this;return F.tidy(function(){a.invokeCallHook(n,r);var i=St(n),o=i.shape,s=o.slice(0,1).concat(a.fixUnknownDimension(o.slice(1),a.targetShape));return F.reshape(i,s)})},t.prototype.getConfig=function(){var n={targetShape:this.targetShape},r=e.prototype.getConfig.call(this);return Object.assign(n,r),n},t}(At);k4.className="Reshape";F.serialization.registerClass(k4);var N4=function(e){ue(t,e);function t(n){var r=e.call(this,n)||this;if(n.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(n.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+"".concat(n.dims," instead."));var a=Eo(1,n.dims.length+1);if(!F.util.arraysEqual(n.dims.slice().sort(),a))throw new Error("Invalid permutation `dims`: "+JSON.stringify(n.dims)+" `dims` must contain consecutive integers starting from 1.");return r.dims=n.dims,r.dimsIncludingBatch=[0].concat(r.dims),r.inputSpec=[new wr({ndim:r.dims.length+1})],r}return t.prototype.computeOutputShape=function(n){n=Ut(n);var r=n.slice();return this.dims.forEach(function(a,i){r[i+1]=n[a]}),r},t.prototype.call=function(n,r){return F.transpose(St(n),this.dimsIncludingBatch)},t.prototype.getConfig=function(){var n={dims:this.dims},r=e.prototype.getConfig.call(this);return Object.assign(n,r),n},t}(At);N4.className="Permute";F.serialization.registerClass(N4);var T4=function(e){ue(t,e);function t(n){var r=e.call(this,n??{})||this;return r.supportsMasking=!0,n!=null?r.maskValue=n.maskValue==null?0:n.maskValue:r.maskValue=0,r}return t.prototype.computeOutputShape=function(n){return n},t.prototype.getConfig=function(){var n=e.prototype.getConfig.call(this),r={maskValue:this.maskValue};return Object.assign(r,n),r},t.prototype.computeMask=function(n,r){var a=St(n),i=-1;return F.any(F.notEqual(a,this.maskValue),i)},t.prototype.call=function(n,r){var a=this;return F.tidy(function(){a.invokeCallHook(n,r);var i=St(n),o=-1,s=!0,u=F.any(F.notEqual(i,a.maskValue),o,s),l=F.mul(i,F.cast(u,i.dtype));return l})},t}(At);T4.className="Masking";F.serialization.registerClass(T4);var E4=function(e){ue(t,e);function t(n){var r=e.call(this,n)||this;if(r.embeddings=null,r.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",n.batchInputShape==null&&n.inputShape==null){var a=null;n.batchSize!=null&&(a=n.batchSize),n.inputLength==null?r.batchInputShape=[a,null]:r.batchInputShape=[a].concat(Yt(n.inputLength))}return r.inputDim=n.inputDim,Ar(r.inputDim,"inputDim"),r.outputDim=n.outputDim,Ar(r.outputDim,"outputDim"),r.embeddingsInitializer=On(n.embeddingsInitializer||r.DEFAULT_EMBEDDINGS_INITIALIZER),r.embeddingsRegularizer=Pn(n.embeddingsRegularizer),r.activityRegularizer=Pn(n.activityRegularizer),r.embeddingsConstraint=Nr(n.embeddingsConstraint),r.maskZero=n.maskZero,r.supportsMasking=n.maskZero,r.inputLength=n.inputLength,r}return t.prototype.build=function(n){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0},t.prototype.warnOnIncompatibleInputShape=function(n){},t.prototype.computeMask=function(n,r){var a=this;return F.tidy(function(){return a.maskZero?(n=St(n),F.notEqual(n,F.zerosLike(n))):null})},t.prototype.computeOutputShape=function(n){if(n=Ut(n),this.inputLength==null)return ft(ft([],re(n),!1),[this.outputDim],!1);var r=Yt(this.inputLength);if(r.length!==n.length-1)throw new J('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(n));for(var a=0,i=0;i<r.length;++i){var o=r[i],s=n[i+1];if(o!=null&&s!=null&&o!==s)throw new J('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(n));o==null&&(r[a]=s),a++}return ft(ft([n[0]],re(r),!1),[this.outputDim],!1)},t.prototype.call=function(n,r){var a=this;return F.tidy(function(){a.invokeCallHook(n,r);var i=St(n);i.dtype!=="int32"&&(i=is(i,"int32"));var o=iE(a.embeddings.read(),F.reshape(i,[i.size]));return F.reshape(o,Ut(a.computeOutputShape(i.shape)))})},t.prototype.getConfig=function(){var n={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:qn(this.embeddingsInitializer),embeddingsRegularizer:an(this.embeddingsRegularizer),activityRegularizer:an(this.activityRegularizer),embeddingsConstraint:kr(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},r=e.prototype.getConfig.call(this);return Object.assign(n,r),n},t}(At);E4.className="Embedding";F.serialization.registerClass(E4);var Gl=function(e){ue(t,e);function t(n){var r=e.call(this,n||{})||this;return r.supportsMasking=!0,r}return t.prototype.mergeFunction=function(n){throw new _t},t.prototype.computeElementwiseOpOutputShape=function(n,r){if(n==null||r==null)return null;if(n.length<r.length)return this.computeElementwiseOpOutputShape(r,n);if(r.length===0)return n;for(var a=n.slice(0,n.length-r.length),i=0;i<r.length;++i){var o=n[n.length-r.length+i],s=r[i];if(o==null||s==null||o<0||s<0)a.push(null);else if(o===1)a.push(s);else if(s===1)a.push(o);else{if(o!==s)throw new J("Operands could not be broadcast together with shapes "+JSON.stringify(n)+" "+JSON.stringify(r));a.push(o)}}return a},t.prototype.build=function(n){var r,a;if(Array.isArray(n)&&!Array.isArray(n[0])&&(n=[Ut(n)]),n=n,n.length<2)throw new J("A merge layer should be called on an Array of at least 2 inputs."+" Got ".concat(n.length," input(s)."));var i=[];try{for(var o=fe(n),s=o.next();!s.done;s=o.next()){var u=s.value;u!=null&&u[0]!==null&&i.push(u[0])}}catch(d){r={error:d}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}if(i=Du(i),i.length>1)throw new J("Can not merge tensors with different batch sizes. "+"Got tensors with shapes: ".concat(JSON.stringify(n),"."));for(var l=n[0]==null?null:n[0].slice(1),c=1;c<n.length;++c){var u=n[c]==null?null:n[c].slice(1);l=this.computeElementwiseOpOutputShape(l,u)}var p=n.map(function(d){return d.length});n.indexOf(null)===-1&&Du(p).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0},t.prototype.call=function(n,r){var a=this;return F.tidy(function(){var i,o,s,u;if(n=n,a.reshapeRequired){var l=[],c=n.map(function($){return $.rank});if(c.indexOf(null)===-1){var p=Au(c);try{for(var d=fe(n),f=d.next();!f.done;f=d.next()){for(var h=f.value,m=h.rank,v=0;v<p-m;++v)h=Kf(h,1);l.push(h)}}catch($){i={error:$}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}return a.mergeFunction(l)}else{var g=!1;try{for(var y=fe(n),w=y.next();!w.done;w=y.next()){var h=w.value,m=h.rank;if(m==null){var b=h.shape,x=b[0],k=b.slice(1).concat([x]),N=D.reshape(h,[x].concat(_u(b.slice(1))));N=D.transpose(N,[1,0]),N=D.reshape(N,k),l.push(N),g=!0}else if(m>1){var E=Eo(1,m).concat([0]);l.push(D.transpose(h,E)),g=!0}else l.push(h)}}catch($){s={error:$}}finally{try{w&&!w.done&&(u=y.return)&&u.call(y)}finally{if(s)throw s.error}}var C=a.mergeFunction(l),R=C.rank;if(g){if(R==null){var A=C.shape,M=A.length,x=A[M-1],k=[x].concat(A.slice(0,A.length-1));C=D.reshape(D.transpose(D.reshape(C,[-1,x]),[1,0]),k)}else if(R>1){var E=[R-1].concat(Eo(0,R-1));C=D.transpose(C,E)}}return C}}else return a.mergeFunction(n)})},t.prototype.computeOutputShape=function(n){var r,a;n=n;var i;n[0]==null?i=null:i=n[0].slice(1);for(var o=1;o<n.length;++o){var s=n[o]==null?null:n[o].slice(1);i=this.computeElementwiseOpOutputShape(i,s)}var u=[];try{for(var l=fe(n),c=l.next();!c.done;c=l.next()){var s=c.value;s!=null&&s[0]!==null&&u.push(s[0])}}catch(p){r={error:p}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(r)throw r.error}}return u=Du(u),u.length===1?i=u.concat(i):i=[null].concat(i),i},t.prototype.computeMask=function(n,r){return D.tidy(function(){if(r==null)return null;if(!Array.isArray(r))throw new J("`mask` should be an Array");if(!Array.isArray(n))throw new J("`inputs` should be an Array");if(r.length!==n.length)throw new J("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths "+"(".concat(n.length," vs ").concat(r.length,")"));if(r.every(function(o){return o==null}))return null;r=r.map(function(o){return o==null?o:D.expandDims(o,0)});for(var a=r[0],i=1;i<r.length-1;++i)a=D.logicalAnd(a,r[i]);return a})},t}(At),I4=function(e){ue(t,e);function t(n){return e.call(this,n)||this}return t.prototype.mergeFunction=function(n){return F.tidy(function(){for(var r=n[0].clone(),a=1;a<n.length;++a)r=D.add(r,n[a]);return r})},t}(Gl);I4.className="Add";F.serialization.registerClass(I4);var C4=function(e){ue(t,e);function t(n){return e.call(this,n)||this}return t.prototype.mergeFunction=function(n){return F.tidy(function(){for(var r=n[0].clone(),a=1;a<n.length;++a)r=D.mul(r,n[a]);return r})},t}(Gl);C4.className="Multiply";F.serialization.registerClass(C4);var D4=function(e){ue(t,e);function t(n){return e.call(this,n)||this}return t.prototype.mergeFunction=function(n){return F.tidy(function(){for(var r=n[0].clone(),a=1;a<n.length;++a)r=D.add(r,n[a]);return D.mul(1/n.length,r)})},t}(Gl);D4.className="Average";F.serialization.registerClass(D4);var _4=function(e){ue(t,e);function t(n){return e.call(this,n)||this}return t.prototype.mergeFunction=function(n){return F.tidy(function(){for(var r=n[0],a=1;a<n.length;++a)r=D.maximum(r,n[a]);return r})},t}(Gl);_4.className="Maximum";F.serialization.registerClass(_4);var A4=function(e){ue(t,e);function t(n){return e.call(this,n)||this}return t.prototype.mergeFunction=function(n){return F.tidy(function(){for(var r=n[0],a=1;a<n.length;++a)r=D.minimum(r,n[a]);return r})},t}(Gl);A4.className="Minimum";F.serialization.registerClass(A4);var F4=function(e){ue(t,e);function t(n){var r=e.call(this,n)||this;return r.DEFAULT_AXIS=-1,n==null&&(n={}),r.axis=n.axis==null?r.DEFAULT_AXIS:n.axis,r.supportsMasking=!0,r.reshapeRequired=!1,r}return t.prototype.build=function(n){var r,a,i,o;if(!(Array.isArray(n)&&Array.isArray(n[0]))||n.length===1)throw new J("A `Concatenate` layer should be called on a list of at least 2 inputs");n=n;var s=!0;try{for(var u=fe(n),l=u.next();!l.done;l=u.next()){var c=l.value;if(c!=null){s=!1;break}}}catch(g){r={error:g}}finally{try{l&&!l.done&&(a=u.return)&&a.call(u)}finally{if(r)throw r.error}}if(!s){for(var p=[],d=0;d<n.length;++d){var f=n[d].slice();f.splice(this.axis,1);var h=!1;try{for(var m=(i=void 0,fe(p)),v=m.next();!v.done;v=m.next()){var c=v.value;if(F.util.arraysEqual(c,f)){h=!0;break}}}catch(g){i={error:g}}finally{try{v&&!v.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}h||p.push(f)}if(p.length>1)throw new J("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(n))}},t.prototype.mergeFunction=function(n){var r=this;return F.tidy(function(){return d3(n,r.axis)})},t.prototype.computeOutputShape=function(n){var r,a;if(!(Array.isArray(n)&&Array.isArray(n[0])))throw new J("A `Concatenate` layer should be called on a list of inputs.");var i=n,o=i[0].slice(),s=this.axis<0?o.length+this.axis:this.axis;try{for(var u=fe(i.slice(1)),l=u.next();!l.done;l=u.next()){var c=l.value;if(o[s]==null||c[s]==null){o[s]=null;break}o[s]+=c[s]}}catch(p){r={error:p}}finally{try{l&&!l.done&&(a=u.return)&&a.call(u)}finally{if(r)throw r.error}}return o},t.prototype.computeMask=function(n,r){var a=this;if(r==null)return null;if(!Array.isArray(r))throw new J("`mask` should be an array for Concatenate");if(!Array.isArray(n))throw new J("`inputs` should be an array for Concatenate");if(r.length!==n.length)throw new J("Mismatch in the length of mask (".concat(r.length,") ")+"and the legnth of inputs (".concat(n.length,")"));return D.tidy(function(){var i=!0;if(r.forEach(function(l){if(l!=null){i=!1;return}}),i)return null;for(var o=[],s=0;s<n.length;++s)r[s]==null?o.push(D.cast(D.onesLike(n[s]),"bool")):r[s].rank<n[s].rank?o.push(D.expandDims(r[s],-1)):o.push(r[s]);var u=D.concat(o,a.axis);return D.all(u,-1,!1)})},t.prototype.getConfig=function(){var n={axis:this.axis},r=e.prototype.getConfig.call(this);return Object.assign(n,r),n},t}(Gl);F4.className="Concatenate";F.serialization.registerClass(F4);function Pf(e,t){for(;e<0;)e+=t;return e}function Jce(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new _t("batchDot is not implemented for tensors of 4D or higher rank yet");if(D.util.assert(e.shape.length>=2,function(){return"batchDot requires the rank of x to be >= 2, "+"but got ".concat(e.shape.length)}),D.util.assert(e.shape.length>=2,function(){return"batchDot requires the rank of y to be >= 2, "+"but got ".concat(t.shape.length)}),typeof n=="number"&&(n=[n,n]),e.dtype==="complex64"||t.dtype==="complex64")throw new _t("batchDot is not implemented for complex64-type Tensors yet.");var r=e.shape.length,a=t.shape.length;n==null&&(n=[r-1,a-2]);var i=n;return D.tidy(function(){var o;if(r>a){o=r-a;for(var s=[],u=0;u<o;++u)s.push(1);t=D.reshape(t,t.shape.concat(s))}else if(a>r){o=a-r;for(var s=[],u=0;u<o;++u)s.push(1);e=D.reshape(e,e.shape.concat(s))}else o=0;var l;if(e.shape.length===2&&t.shape.length===2)i[0]===i[1]?l=D.sum(D.mul(e,t),i[0]):l=D.sum(D.mul(D.transpose(e,[1,0]),t),i[1]);else{var c=i[0]!==e.shape.length-1,p=i[1]===t.shape.length-1;l=D.matMul(e,t,c,p)}if(o>0){var d=void 0;r>a?d=r+a-3:d=r-1;for(var f=[],u=d;u<d+o;++u)f.push(u);l=D.squeeze(l,f)}return l.shape.length===1&&(l=D.expandDims(l,1)),l})}var R4=function(e){ue(t,e);function t(n){var r=e.call(this,n)||this;return r.axes=n.axes,r.normalize=n.normalize==null?!1:n.normalize,r.supportsMasking=!0,r.reshapeRequired=!1,r}return t.prototype.build=function(n){D.util.assert(Array.isArray(n)&&n.length===2&&Array.isArray(n[0])&&Array.isArray(n[1]),function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."});var r=n[0],a=n[1];if(r.length>3||a.length>3)throw new _t("Dot layer does not support tensors of 4D or higher rank yet.");var i=this.interpretAxes(r,a);if(r[i[0]]!==a[i[1]])throw new J("Dimension incompatibility: "+"".concat(r[i[0]]," !== ").concat(a[i[1]]))},t.prototype.mergeFunction=function(n){if(n.length!==2)throw new J("A `Dot` layer must be called on exactly 2 inputs, "+"but received ".concat(n.length," input(s)."));var r=n[0],a=n[1],i;return Array.isArray(this.axes)?i=this.axes.map(function(o,s){return Pf(o,n[s].shape.length)}):i=[Pf(this.axes,r.shape.length),Pf(this.axes,a.shape.length)],this.normalize&&(r=sv(r,i[0]),a=sv(a,i[1])),Jce(r,a,i)},t.prototype.interpretAxes=function(n,r){var a;return Array.isArray(this.axes)?a=this.axes:a=[Pf(this.axes,n.length),Pf(this.axes,r.length)],a},t.prototype.computeOutputShape=function(n){D.util.assert(Array.isArray(n)&&n.length===2&&Array.isArray(n[0])&&Array.isArray(n[1]),function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."});var r=n[0].slice(),a=n[1].slice();if(r.length>3||a.length>3)throw new _t("Dot layer does not support tensors of 4D or higher rank yet.");var i=this.interpretAxes(r,a);r.splice(i[0],1),a.splice(i[1],1),a.splice(0,1);var o=r.concat(a);return o.length===1&&o.push(1),o},t.prototype.computeMask=function(n,r){return null},t.prototype.getConfig=function(){var n={axes:this.axes,normalize:this.normalize},r=e.prototype.getConfig.call(this);return Object.assign(n,r),n},t}(Gl);R4.className="Dot";F.serialization.registerClass(R4);var O4=function(e){ue(t,e);function t(n){var r=e.call(this,n)||this;return r.supportsMasking=!0,r.stddev=n.stddev,r}return t.prototype.computeOutputShape=function(n){return n},t.prototype.getConfig=function(){var n=e.prototype.getConfig.call(this),r={stddev:this.stddev};return Object.assign(r,n),r},t.prototype.call=function(n,r){var a=this;return F.tidy(function(){a.invokeCallHook(n,r);var i=St(n),o=function(){return F.add(fv(i.shape,0,a.stddev),i)},s=Yf(o,function(){return i},r.training||!1);return s})},t}(At);O4.className="GaussianNoise";F.serialization.registerClass(O4);var M4=function(e){ue(t,e);function t(n){var r=e.call(this,n)||this;return r.supportsMasking=!0,r.rate=n.rate,r}return t.prototype.computeOutputShape=function(n){return n},t.prototype.getConfig=function(){var n=e.prototype.getConfig.call(this),r={rate:this.rate};return Object.assign(r,n),r},t.prototype.call=function(n,r){var a=this;return F.tidy(function(){a.invokeCallHook(n,r);var i=St(n);if(a.rate>0&&a.rate<1){var o=function(){var s=Math.sqrt(a.rate/(1-a.rate));return F.mul(i,fv(i.shape,1,s))};return Yf(o,function(){return i},r.training||!1)}return i})},t}(At);M4.className="GaussianDropout";F.serialization.registerClass(M4);var P4=function(e){ue(t,e);function t(n){var r=e.call(this,n)||this;return r.supportsMasking=!0,r.rate=n.rate,r.noiseShape=n.noiseShape,r}return t.prototype._getNoiseShape=function(n){return this.noiseShape||St(n).shape},t.prototype.computeOutputShape=function(n){return n},t.prototype.getConfig=function(){var n=e.prototype.getConfig.call(this),r={rate:this.rate};return Object.assign(r,n),r},t.prototype.call=function(n,r){var a=this;return F.tidy(function(){if(a.rate<1&&a.rate>0){var i=a._getNoiseShape(n),o=function(){var s=St(n),u=1.6732632423543772,l=1.0507009873554805,c=-u*l,p=F.greaterEqual(F.randomUniform(i),a.rate);p=is(p,"float32");var d=Math.pow((1-a.rate)*(1+a.rate*Math.pow(c,2)),-.5),f=-d*c*a.rate,h=F.add(F.mul(s,p),F.mul(F.add(p,-1),c));return F.add(F.mul(h,d),f)};return Yf(o,function(){return St(n)},r.training||!1)}return n})},t}(At);P4.className="AlphaDropout";F.serialization.registerClass(P4);function Hf(e,t,n,r,a,i){i===void 0&&(i=.001);var o;if(e.rank===2)o=D.batchNorm2d(e,t,n,r,a,i);else if(e.rank===3)o=D.batchNorm3d(e,t,n,r,a,i);else if(e.rank===4)o=D.batchNorm4d(e,t,n,r,a,i);else throw new _t("batchNormalization is not implemented for array of rank ".concat(e.rank," ")+"yet");return o}function Zce(e,t,n,r,a){return a===void 0&&(a=.001),F.tidy(function(){var i=D.moments(e,r),o=i.mean,s=i.variance,u=Hf(e,o,s,n,t,a);return[u,o,s]})}function Qce(e,t,n,r,a){return a===void 0&&(a=.001),F.tidy(function(){var i,o,s=D.moments(e,r),u=s.mean,l=s.variance,c=[];try{for(var p=fe(Eo(0,e.rank)),d=p.next();!d.done;d=p.next()){var f=d.value;r.indexOf(f)!==-1?c.push(1):c.push(e.shape[f])}}catch(w){i={error:w}}finally{try{d&&!d.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}var h=F.reshape(u,c),m=F.reshape(l,c),v=t==null?null:F.reshape(t,c),g=n==null?null:F.reshape(n,c),y=Hf(e,h,m,g,v,a);return[y,u,l]})}function epe(e,t,n,r,a){return a===void 0&&(a=.001),F.util.arraysEqual(r.slice().sort(),Eo(0,e.rank-1))?Zce(e,t,n,r,a):Qce(e,t,n,r,a)}var B4=function(e){ue(t,e);function t(n){var r=this;return n==null&&(n={}),r=e.call(this,n)||this,r.supportsMasking=!0,r.axis=n.axis==null?-1:n.axis,r.momentum=n.momentum==null?.99:n.momentum,r.epsilon=n.epsilon==null?.001:n.epsilon,r.center=n.center==null?!0:n.center,r.scale=n.scale==null?!0:n.scale,r.betaInitializer=On(n.betaInitializer||"zeros"),r.gammaInitializer=On(n.gammaInitializer||"ones"),r.movingMeanInitializer=On(n.movingMeanInitializer||"zeros"),r.movingVarianceInitializer=On(n.movingVarianceInitializer||"ones"),r.betaConstraint=Nr(n.betaConstraint),r.gammaConstraint=Nr(n.gammaConstraint),r.betaRegularizer=Pn(n.betaRegularizer),r.gammaRegularizer=Pn(n.gammaRegularizer),r}return t.prototype.build=function(n){var r;n=Ut(n);var a=this.axis>=0?this.axis:this.axis+n.length,i=n[a];if(i==null)throw new J("Axis ".concat(a," of input tensor should have a defined dimension but ")+"the layer received an input with shape "+"".concat(JSON.stringify(n),"."));this.inputSpec=[new wr({ndim:n.length,axes:(r={},r[a]=i,r)})];var o=[i];this.scale&&(this.gamma=this.addWeight("gamma",o,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",o,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",o,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",o,null,this.movingVarianceInitializer,null,!1),this.built=!0},t.prototype.call=function(n,r){var a=this;return F.tidy(function(){var i=r.training==null?!1:r.training,o=St(n),s=o.shape,u=s.length,l=Eo(0,u),c=a.axis>=0?a.axis:a.axis+u;l.splice(c,1);var p=Ol(1,u);p[c]=s[c];var d=l.slice();d.sort();var f=!F.util.arraysEqual(d,Eo(0,u).slice(0,u-1)),h=function(){if(f){var x=F.reshape(a.movingMean.read(),p),k=F.reshape(a.movingVariance.read(),p),N=a.center?F.reshape(a.beta.read(),p):null,E=a.scale?F.reshape(a.gamma.read(),p):null;return Hf(o,x,k,N,E,a.epsilon)}else return Hf(o,a.movingMean.read(),a.movingVariance.read(),a.beta==null?null:a.beta.read(),a.gamma==null?null:a.gamma.read(),a.epsilon)};if(!i)return h();var m=re(epe(o,a.gamma.read(),a.beta.read(),l,a.epsilon),3),v=m[0],g=m[1],y=m[2],w=function(x,k,N){D.tidy(function(){var E=1-N,C=x.read(),R=D.mul(D.sub(C,k),E);x.write(D.sub(C,R))})},b=function(){w(a.movingMean,g,a.momentum),w(a.movingVariance,y,a.momentum)};return b(),v})},t.prototype.getConfig=function(){var n={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:qn(this.betaInitializer),gammaInitializer:qn(this.gammaInitializer),movingMeanInitializer:qn(this.movingMeanInitializer),movingVarianceInitializer:qn(this.movingVarianceInitializer),betaRegularizer:an(this.betaRegularizer),gammaRegularizer:an(this.gammaRegularizer),betaConstraint:kr(this.betaConstraint),gammaConstraint:kr(this.gammaConstraint)},r=e.prototype.getConfig.call(this);return Object.assign(n,r),n},t}(At);B4.className="BatchNormalization";F.serialization.registerClass(B4);var L4=function(e){ue(t,e);function t(n){var r,a,i=this;if(n==null&&(n={}),i=e.call(this,n)||this,i.axis=n.axis==null?-1:n.axis,typeof i.axis=="number"){if(!Number.isInteger(i.axis))throw new Error("Expected axis to be an integer, but received ".concat(i.axis))}else if(Array.isArray(i.axis))try{for(var o=fe(i.axis),s=o.next();!s.done;s=o.next()){var u=s.value;if(!Number.isInteger(u))throw new Error("Expected axis to be an array of integers, "+"but received ".concat(JSON.stringify(i.axis)))}}catch(l){r={error:l}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}else throw new Error("Expected axis to be an integer or an array of integers, "+"but received ".concat(JSON.stringify(i.axis)));return i.epsilon=n.epsilon==null?.001:n.epsilon,i.center=n.center==null?!0:n.center,i.scale=n.scale==null?!0:n.scale,i.betaInitializer=On(n.betaInitializer||"zeros"),i.gammaInitializer=On(n.gammaInitializer||"ones"),i.betaRegularizer=Pn(n.betaRegularizer),i.gammaRegularizer=Pn(n.gammaRegularizer),i.supportsMasking=!0,i}return t.prototype.build=function(n){var r,a;n=Ut(n);var i=n.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(var o=0;o<this.axis.length;++o)this.axis[o]<0&&(this.axis[o]+=i);try{for(var s=fe(this.axis),u=s.next();!u.done;u=s.next()){var l=u.value;if(l<0||l>=i)throw new Error("Invalid axis: ".concat(l))}}catch(d){r={error:d}}finally{try{u&&!u.done&&(a=s.return)&&a.call(s)}finally{if(r)throw r.error}}if(this.axis.length!==Du(this.axis).length)throw new Error("Found duplicate axes in: ".concat(this.axis));var c=this.axis.map(function(d){return n[d]}),p=!0;this.scale?this.gamma=this.addWeight("gamma",c,"float32",this.gammaInitializer,this.gammaRegularizer,p):this.gamma=null,this.center?this.beta=this.addWeight("beta",c,"float32",this.betaInitializer,this.betaRegularizer,p):this.beta=null,this.built=!0},t.prototype.call=function(n,r){var a=this,i=St(n),o=i.shape,s=o.length;return F.tidy(function(){var u,l,c=!0,p=F.moments(i,a.axis,c),d=p.mean,f=p.variance,h=Ol(1,s);try{for(var m=fe(a.axis),v=m.next();!v.done;v=m.next()){var g=v.value;h[g]=o[g]}}catch(E){u={error:E}}finally{try{v&&!v.done&&(l=m.return)&&l.call(m)}finally{if(u)throw u.error}}for(var y=function(E){return E!=null&&E.shape.length!==s?D.reshape(E,h):E},w=a.scale?y(a.gamma.read()):null,b=a.center?y(a.beta.read()):null,x=[],k=[],N=0;N<s;++N)a.axis.indexOf(N)!==-1?(x.push(o[N]),k.push(1)):(x.push(1),k.push(o[N]));return d=D.tile(d,x),f=D.tile(f,x),w!=null&&(w=D.tile(w,k)),b!=null&&(b=D.tile(b,k)),Hf(i,d,f,b,w,a.epsilon)})},t.prototype.getConfig=function(){var n={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:qn(this.betaInitializer),gammaInitializer:qn(this.gammaInitializer),betaRegularizer:an(this.betaRegularizer),gammaRegularizer:an(this.gammaRegularizer)},r=e.prototype.getConfig.call(this);return Object.assign(n,r),n},t}(At);L4.className="LayerNormalization";F.serialization.registerClass(L4);function tpe(e,t,n){return F.tidy(function(){if(e.rank!==4)throw new J("temporalPadding expects input tensor to be 4-D, but received a "+"".concat(e.rank,"-D tensor."));if(t==null&&(t=[[1,1],[1,1]]),t.length!==2||t[0].length!==2||t[1].length!==2)throw new J("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=Io()),n!=="channelsLast"&&n!=="channelsFirst")throw new J("Unknown data format: ".concat(n,". ")+"Supported data formats are 'channelsLast' and 'channelsFirst.");var r;return n==="channelsFirst"?r=[[0,0],[0,0],t[0],t[1]]:r=[[0,0],t[0],t[1],[0,0]],D.pad(e,r)})}var z4=function(e){ue(t,e);function t(n){var r=this;if(n==null&&(n={}),r=e.call(this,n)||this,r.dataFormat=n.dataFormat==null?Io():n.dataFormat,n.padding==null)r.padding=[[1,1],[1,1]];else if(typeof n.padding=="number")r.padding=[[n.padding,n.padding],[n.padding,n.padding]];else{if(n.padding=n.padding,n.padding.length!==2)throw new J("ZeroPadding2D expects padding to be a length-2 array, but "+"received a length-".concat(n.padding.length," array."));var a=void 0,i=void 0;if(typeof n.padding[0]=="number")a=[n.padding[0],n.padding[0]],i=[n.padding[1],n.padding[1]];else{if(n.padding=n.padding,n.padding[0].length!==2)throw new J("ZeroPadding2D expects height padding to be a length-2 array, "+"but received a length-".concat(n.padding[0].length," array."));if(a=n.padding[0],n.padding[1].length!==2)throw new J("ZeroPadding2D expects width padding to be a length-2 array, "+"but received a length-".concat(n.padding[1].length," array."));i=n.padding[1]}r.padding=[a,i]}return r.inputSpec=[new wr({ndim:4})],r}return t.prototype.computeOutputShape=function(n){n=Ut(n);var r,a;return this.dataFormat==="channelsFirst"?(n[2]!=null&&n[2]>=0?r=n[2]+this.padding[0][0]+this.padding[0][1]:r=null,n[3]!=null&&n[3]>=0?a=n[3]+this.padding[1][0]+this.padding[1][1]:a=null,[n[0],n[1],r,a]):(n[1]!=null&&n[1]>=0?r=n[1]+this.padding[0][0]+this.padding[0][1]:r=null,n[2]!=null&&n[2]>=0?a=n[2]+this.padding[1][0]+this.padding[1][1]:a=null,[n[0],r,a,n[3]])},t.prototype.call=function(n,r){var a=this;return F.tidy(function(){return tpe(St(n),a.padding,a.dataFormat)})},t.prototype.getConfig=function(){var n={padding:this.padding,dataFormat:this.dataFormat},r=e.prototype.getConfig.call(this);return Object.assign(n,r),n},t}(At);z4.className="ZeroPadding2D";F.serialization.registerClass(z4);function Bv(e,t,n,r,a,i){return F.tidy(function(){lr(a),tE(i),mi(r),n==null&&(n=[1,1]),r==null&&(r="valid"),a==null&&(a=Io()),i==null&&(i="max"),e=o4(e,a);var o,s=r==="same"?"same":"valid";return i==="max"?o=D.maxPool(e,t,n,s):o=D.avgPool(e,t,n,s),a==="channelsFirst"&&(o=D.transpose(o,[0,3,1,2])),o})}function TC(e,t,n,r,a,i){return F.tidy(function(){lr(a),tE(i),mi(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),a==null&&(a=Io()),i==null&&(i="max"),e=bC(e,a);var o,s=r==="same"?"same":"valid";return i==="max"?o=D.maxPool3d(e,t,n,s):o=D.avgPool3d(e,t,n,s),a==="channelsFirst"&&(o=D.transpose(o,[0,4,1,2,3])),o})}var EC=function(e){ue(t,e);function t(n){var r=this;if(n.poolSize==null&&(n.poolSize=2),r=e.call(this,n)||this,typeof n.poolSize=="number")r.poolSize=[n.poolSize];else if(Array.isArray(n.poolSize)&&n.poolSize.length===1&&typeof n.poolSize[0]=="number")r.poolSize=n.poolSize;else throw new J("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(n.poolSize)));if(Ar(r.poolSize,"poolSize"),n.strides==null)r.strides=r.poolSize;else if(typeof n.strides=="number")r.strides=[n.strides];else if(Array.isArray(n.strides)&&n.strides.length===1&&typeof n.strides[0]=="number")r.strides=n.strides;else throw new J("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(n.strides)));return Ar(r.strides,"strides"),r.padding=n.padding==null?"valid":n.padding,mi(r.padding),r.inputSpec=[new wr({ndim:3})],r}return t.prototype.computeOutputShape=function(n){n=Ut(n);var r=To(n[1],this.poolSize[0],this.padding,this.strides[0]);return[n[0],r,n[2]]},t.prototype.call=function(n,r){var a=this;return F.tidy(function(){a.invokeCallHook(n,r),n=Kf(St(n),2);var i=a.poolingFunction(St(n),[a.poolSize[0],1],[a.strides[0],1],a.padding,"channelsLast");return D.squeeze(i,[2])})},t.prototype.getConfig=function(){var n={poolSize:this.poolSize,padding:this.padding,strides:this.strides},r=e.prototype.getConfig.call(this);return Object.assign(n,r),n},t}(At),$4=function(e){ue(t,e);function t(n){return e.call(this,n)||this}return t.prototype.poolingFunction=function(n,r,a,i,o){return lr(o),mi(i),Bv(n,r,a,i,o,"max")},t}(EC);$4.className="MaxPooling1D";F.serialization.registerClass($4);var V4=function(e){ue(t,e);function t(n){return e.call(this,n)||this}return t.prototype.poolingFunction=function(n,r,a,i,o){return lr(o),mi(i),Bv(n,r,a,i,o,"avg")},t}(EC);V4.className="AveragePooling1D";F.serialization.registerClass(V4);var IC=function(e){ue(t,e);function t(n){var r=this;if(n.poolSize==null&&(n.poolSize=[2,2]),r=e.call(this,n)||this,r.poolSize=Array.isArray(n.poolSize)?n.poolSize:[n.poolSize,n.poolSize],n.strides==null)r.strides=r.poolSize;else if(Array.isArray(n.strides)){if(n.strides.length!==2)throw new J("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+"".concat(n.strides.length,"."));r.strides=n.strides}else r.strides=[n.strides,n.strides];return Ar(r.poolSize,"poolSize"),Ar(r.strides,"strides"),r.padding=n.padding==null?"valid":n.padding,r.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,lr(r.dataFormat),mi(r.padding),r.inputSpec=[new wr({ndim:4})],r}return t.prototype.computeOutputShape=function(n){n=Ut(n);var r=this.dataFormat==="channelsFirst"?n[2]:n[1],a=this.dataFormat==="channelsFirst"?n[3]:n[2];return r=To(r,this.poolSize[0],this.padding,this.strides[0]),a=To(a,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[n[0],n[1],r,a]:[n[0],r,a,n[3]]},t.prototype.call=function(n,r){var a=this;return F.tidy(function(){return a.invokeCallHook(n,r),a.poolingFunction(St(n),a.poolSize,a.strides,a.padding,a.dataFormat)})},t.prototype.getConfig=function(){var n={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},r=e.prototype.getConfig.call(this);return Object.assign(n,r),n},t}(At),W4=function(e){ue(t,e);function t(n){return e.call(this,n)||this}return t.prototype.poolingFunction=function(n,r,a,i,o){return lr(o),mi(i),Bv(n,r,a,i,o,"max")},t}(IC);W4.className="MaxPooling2D";F.serialization.registerClass(W4);var U4=function(e){ue(t,e);function t(n){return e.call(this,n)||this}return t.prototype.poolingFunction=function(n,r,a,i,o){return lr(o),mi(i),Bv(n,r,a,i,o,"avg")},t}(IC);U4.className="AveragePooling2D";F.serialization.registerClass(U4);var CC=function(e){ue(t,e);function t(n){var r=this;if(n.poolSize==null&&(n.poolSize=[2,2,2]),r=e.call(this,n)||this,r.poolSize=Array.isArray(n.poolSize)?n.poolSize:[n.poolSize,n.poolSize,n.poolSize],n.strides==null)r.strides=r.poolSize;else if(Array.isArray(n.strides)){if(n.strides.length!==3)throw new J("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+"".concat(n.strides.length,"."));r.strides=n.strides}else r.strides=[n.strides,n.strides,n.strides];return Ar(r.poolSize,"poolSize"),Ar(r.strides,"strides"),r.padding=n.padding==null?"valid":n.padding,r.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,lr(r.dataFormat),mi(r.padding),r.inputSpec=[new wr({ndim:5})],r}return t.prototype.computeOutputShape=function(n){n=Ut(n);var r=this.dataFormat==="channelsFirst"?n[2]:n[1],a=this.dataFormat==="channelsFirst"?n[3]:n[2],i=this.dataFormat==="channelsFirst"?n[4]:n[3];return r=To(r,this.poolSize[0],this.padding,this.strides[0]),a=To(a,this.poolSize[1],this.padding,this.strides[1]),i=To(i,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[n[0],n[1],r,a,i]:[n[0],r,a,i,n[4]]},t.prototype.call=function(n,r){var a=this;return F.tidy(function(){return a.invokeCallHook(n,r),a.poolingFunction(St(n),a.poolSize,a.strides,a.padding,a.dataFormat)})},t.prototype.getConfig=function(){var n={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},r=e.prototype.getConfig.call(this);return Object.assign(n,r),n},t}(At),G4=function(e){ue(t,e);function t(n){return e.call(this,n)||this}return t.prototype.poolingFunction=function(n,r,a,i,o){return lr(o),mi(i),TC(n,r,a,i,o,"max")},t}(CC);G4.className="MaxPooling3D";F.serialization.registerClass(G4);var q4=function(e){ue(t,e);function t(n){return e.call(this,n)||this}return t.prototype.poolingFunction=function(n,r,a,i,o){return lr(o),mi(i),TC(n,r,a,i,o,"avg")},t}(CC);q4.className="AveragePooling3D";F.serialization.registerClass(q4);var DC=function(e){ue(t,e);function t(n){var r=e.call(this,n)||this;return r.inputSpec=[new wr({ndim:3})],r}return t.prototype.computeOutputShape=function(n){return[n[0],n[2]]},t.prototype.call=function(n,r){throw new _t},t}(At),H4=function(e){ue(t,e);function t(n){return e.call(this,n||{})||this}return t.prototype.call=function(n,r){return F.tidy(function(){var a=St(n);return D.mean(a,1)})},t}(DC);H4.className="GlobalAveragePooling1D";F.serialization.registerClass(H4);var j4=function(e){ue(t,e);function t(n){return e.call(this,n||{})||this}return t.prototype.call=function(n,r){return F.tidy(function(){var a=St(n);return D.max(a,1)})},t}(DC);j4.className="GlobalMaxPooling1D";F.serialization.registerClass(j4);var _C=function(e){ue(t,e);function t(n){var r=e.call(this,n)||this;return r.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,lr(r.dataFormat),r.inputSpec=[new wr({ndim:4})],r}return t.prototype.computeOutputShape=function(n){return n=n,this.dataFormat==="channelsLast"?[n[0],n[3]]:[n[0],n[1]]},t.prototype.call=function(n,r){throw new _t},t.prototype.getConfig=function(){var n={dataFormat:this.dataFormat},r=e.prototype.getConfig.call(this);return Object.assign(n,r),n},t}(At),K4=function(e){ue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.call=function(n,r){var a=this;return F.tidy(function(){var i=St(n);return a.dataFormat==="channelsLast"?D.mean(i,[1,2]):D.mean(i,[2,3])})},t}(_C);K4.className="GlobalAveragePooling2D";F.serialization.registerClass(K4);var X4=function(e){ue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.call=function(n,r){var a=this;return F.tidy(function(){var i=St(n);return a.dataFormat==="channelsLast"?D.max(i,[1,2]):D.max(i,[2,3])})},t}(_C);X4.className="GlobalMaxPooling2D";F.serialization.registerClass(X4);var AC=function(e){ue(t,e);function t(n){var r=e.call(this,n)||this;return r.layer=n.layer,r}return t.prototype.build=function(n){this.built=!0},Object.defineProperty(t.prototype,"trainable",{get:function(){return this.layer!=null?this.layer.trainable:!1},set:function(n){this.layer!=null&&(this.layer.trainable=n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trainableWeights",{get:function(){return this.layer.trainableWeights},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nonTrainableWeights",{get:function(){return this.layer.nonTrainableWeights},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updates",{get:function(){return this.layer._updates},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"losses",{get:function(){return this.layer.losses},enumerable:!1,configurable:!0}),t.prototype.getWeights=function(){return this.layer.getWeights()},t.prototype.setWeights=function(n){this.layer.setWeights(n)},t.prototype.getConfig=function(){var n={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},r=e.prototype.getConfig.call(this);return Object.assign(n,r),n},t.prototype.setFastWeightInitDuringBuild=function(n){e.prototype.setFastWeightInitDuringBuild.call(this,n),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(n)},t.fromConfig=function(n,r,a){a===void 0&&(a={});var i=r.layer,o=No(i,a);delete r.layer;var s={layer:o};return Object.assign(s,r),new n(s)},t}(At),Y4=function(e){ue(t,e);function t(n){var r=e.call(this,n)||this;return r.supportsMasking=!0,r}return t.prototype.build=function(n){if(n=Ut(n),n.length<3)throw new J("TimeDistributed layer expects an input shape >= 3D, but received "+"input shape ".concat(JSON.stringify(n)));this.inputSpec=[{shape:n}];var r=[n[0]].concat(n.slice(2));this.layer.built||(this.layer.build(r),this.layer.built=!0),e.prototype.build.call(this,n)},t.prototype.computeOutputShape=function(n){n=Ut(n);var r=[n[0]].concat(n.slice(2)),a=this.layer.computeOutputShape(r),i=n[1];return[a[0],i].concat(a.slice(1))},t.prototype.call=function(n,r){var a=this;return F.tidy(function(){n=St(n);var i=function(u,l){var c=St(a.layer.call(u,r));return[c,[]]},o=kC(i,n,[],!1,null,null,!1,!0),s=o[1];return s})},t}(AC);Y4.className="TimeDistributed";F.serialization.registerClass(Y4);function npe(e){Pl(Wte,"BidirectionalMergeMode",e)}var rpe="concat",J4=function(e){ue(t,e);function t(n){var r=e.call(this,n)||this,a=n.layer.getConfig(),i={};i.className=n.layer.getClassName(),i.config=a,r.forwardLayer=No(i),a.goBackwards=a.goBackwards!==!0;var o={};if(o.className=n.layer.getClassName(),o.config=a,r.backwardLayer=No(o),r.forwardLayer.name="forward_"+r.forwardLayer.name,r.backwardLayer.name="backward_"+r.backwardLayer.name,r.mergeMode=n.mergeMode===void 0?rpe:n.mergeMode,npe(r.mergeMode),n.weights)throw new _t("weights support is not implemented for Bidirectional layer yet.");return r._stateful=n.layer.stateful,r.returnSequences=n.layer.returnSequences,r.returnState=n.layer.returnState,r.supportsMasking=!0,r._trainable=!0,r.inputSpec=n.layer.inputSpec,r.numConstants=null,r}return Object.defineProperty(t.prototype,"trainable",{get:function(){return this._trainable},set:function(n){this._trainable=n,this.forwardLayer!=null&&(this.forwardLayer.trainable=n),this.backwardLayer!=null&&(this.backwardLayer.trainable=n)},enumerable:!1,configurable:!0}),t.prototype.getWeights=function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())},t.prototype.setWeights=function(n){var r=n.length,a=Math.floor(r/2);this.forwardLayer.setWeights(n.slice(0,a)),this.backwardLayer.setWeights(n.slice(a))},t.prototype.computeOutputShape=function(n){var r=this.forwardLayer.computeOutputShape(n);Array.isArray(r)&&Array.isArray(r[0])||(r=[r]),r=r;var a,i,o;return this.returnState&&(o=r.slice(1)),a=r[0],a=a,this.mergeMode==="concat"?(a[a.length-1]*=2,i=[a]):this.mergeMode==null?i=[a,a.slice()]:i=[a],this.returnState?this.mergeMode==null?i.concat(o).concat(o.slice()):[a].concat(o).concat(o.slice()):ka(i)},t.prototype.apply=function(n,r){var a,i,o=r==null?null:r.initialState,s=r==null?null:r.constants;r==null&&(r={});var u=SC(n,o,s,this.numConstants);if(n=u.inputs,o=u.initialState,s=u.constants,Array.isArray(n)&&(o=n.slice(1),n=n[0]),(o==null||o.length===0)&&s==null)return e.prototype.apply.call(this,n,r);var l=[],c=[];if(o!=null){var p=o.length;if(p%2>0)throw new J("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");r.initialState=o,l.push.apply(l,ft([],re(o),!1));var d=o.map(function(x){return new wr({shape:x.shape})});this.forwardLayer.stateSpec=d.slice(0,p/2),this.backwardLayer.stateSpec=d.slice(p/2),c.push.apply(c,ft([],re(d),!1))}if(s!=null)throw new _t("Support for constants in Bidirectional layers is not implemented yet.");var f=l[0]instanceof Co;try{for(var h=fe(l),m=h.next();!m.done;m=h.next()){var v=m.value;if(v instanceof Co!==f)throw new J("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors")}}catch(x){a={error:x}}finally{try{m&&!m.done&&(i=h.return)&&i.call(h)}finally{if(a)throw a.error}}if(f){var g=[n].concat(l),y=this.inputSpec.concat(c),w=this.inputSpec;this.inputSpec=y;var b=e.prototype.apply.call(this,g,r);return this.inputSpec=w,b}else return e.prototype.apply.call(this,n,r)},t.prototype.call=function(n,r){var a=this;return F.tidy(function(){var i=r.initialState,o,s;if(i==null)o=a.forwardLayer.call(n,r),s=a.backwardLayer.call(n,r);else{var u=i.slice(0,i.length/2),l=i.slice(i.length/2);o=a.forwardLayer.call(n,Object.assign(r,{initialState:u})),s=a.backwardLayer.call(n,Object.assign(r,{initialState:l}))}var c;a.returnState&&(Array.isArray(o)&&(c=o.slice(1).concat(s.slice(1))),o=o[0],s=s[0]),a.returnSequences&&(s=D.reverse(s,1));var p;return a.mergeMode==="concat"?p=d3([o,s]):a.mergeMode==="sum"?p=D.add(o,s):a.mergeMode==="ave"?p=D.mul(.5,D.add(o,s)):a.mergeMode==="mul"?p=D.mul(o,s):a.mergeMode==null&&(p=[o,s]),a.returnState?a.mergeMode==null?p.concat(c):[p].concat(c):p})},t.prototype.resetStates=function(n){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()},t.prototype.build=function(n){var r=this;Fl(this.forwardLayer.name,function(){r.forwardLayer.build(n)}),Fl(this.backwardLayer.name,function(){r.backwardLayer.build(n)}),this.built=!0},t.prototype.computeMask=function(n,r){Array.isArray(r)&&(r=r[0]);var a;if(this.returnSequences?this.mergeMode==null?a=[r,r]:a=r:this.mergeMode==null?a=[null,null]:a=null,this.returnState){var i=this.forwardLayer.states,o=i.map(function(s){return null});return Array.isArray(a)?a.concat(o).concat(o):[a].concat(o).concat(o)}else return a},Object.defineProperty(t.prototype,"trainableWeights",{get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nonTrainableWeights",{get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)},enumerable:!1,configurable:!0}),t.prototype.setFastWeightInitDuringBuild=function(n){e.prototype.setFastWeightInitDuringBuild.call(this,n),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(n),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(n)},t.prototype.getConfig=function(){var n={mergeMode:this.mergeMode},r=e.prototype.getConfig.call(this);return Object.assign(n,r),n},t.fromConfig=function(n,r){var a=No(r.layer);if(delete r.layer,r.numConstants!=null)throw new _t("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var i=r;return i.layer=a,new n(i)},t}(AC);J4.className="Bidirectional";F.serialization.registerClass(J4);var Z4=function(e){ue(t,e);function t(n){var r=e.call(this,n)||this;return r.scale=n.scale,n.offset?r.offset=n.offset:r.offset=0,r}return t.prototype.getConfig=function(){var n={scale:this.scale,offset:this.offset},r=e.prototype.getConfig.call(this);return Object.assign(n,r),n},t.prototype.call=function(n,r){var a=this;return F.tidy(function(){return n=St(n),n.dtype!=="float32"&&(n=is(n,"float32")),F.add(F.mul(n,a.scale),a.offset)})},t}(At);Z4.className="Rescaling";F.serialization.registerClass(Z4);var ape=F.image.resizeBilinear,ipe=F.image.cropAndResize,Q4=function(e){ue(t,e);function t(n){var r=e.call(this,n)||this;return r.height=n.height,r.width=n.width,r}return t.prototype.centerCrop=function(n,r,a,i,o,s,u,l){return F.tidy(function(){var c,p=!1,d=r/s,f=a/u,h=(i+r)/s,m=(o+a)/u,v=[d,f,h,m],g=[];n.rank===3?(p=!0,c=F.stack([n])):c=n;for(var y=0;y<c.shape[0];y++)g.push(v);var w=F.tensor(g,[g.length,4]),b=F.range(0,g.length,1,"int32"),x=[i,o],k=ipe(c,w,b,x,"nearest");return is(p?St(F.unstack(k)):k,l)})},t.prototype.upsize=function(n,r,a,i){return F.tidy(function(){var o=ape(n,[r,a]);return is(o,i)})},t.prototype.call=function(n,r){var a=this;return F.tidy(function(){var i=St(n),o=i.dtype,s=i.shape,u=s[s.length-3],l=s[s.length-2],c=0;u!==a.height&&(c=Math.floor((u-a.height)/2));var p=0;return l!==a.width&&(p=Math.floor((l-a.width)/2),p===0&&(p=1)),c>=0&&p>=0?a.centerCrop(i,c,p,a.height,a.width,u,l,o):a.upsize(n,a.height,a.width,o)})},t.prototype.getConfig=function(){var n={height:this.height,width:this.width},r=e.prototype.getConfig.call(this);return Object.assign(n,r),n},t.prototype.computeOutputShape=function(n){n=Ut(n);var r=n.length-3,a=n.length-2;return n[r]=this.height,n[a]=this.width,n},t}(At);Q4.className="CenterCrop";F.serialization.registerClass(Q4);function ope(e,t,n,r){var a=St(e);if(a.dtype!=="int32"&&(a=is(a,"int32")),t==="int")return a;var i=a.shape;if(a.rank===0&&(a=F.expandDims(a,-1)),t==="oneHot"&&a.shape[a.shape.length-1]!==1&&(a=F.expandDims(a,-1)),a.rank>2)throw new J("When outputMode is not int, maximum output rank is 2"+" Received outputMode ".concat(t," and input shape ").concat(i)+" which would result in output rank ".concat(a.rank,"."));var o=["multiHot","oneHot"].includes(t),s=a,u;if(typeof r<"u"&&t==="count"?u=F.denseBincount(s,r,n,o):u=F.denseBincount(s,[],n,o),t!=="tfIdf")return u;if(r)return F.mul(u,r);throw new J("When outputMode is 'tfIdf', weights must be provided.")}var eb=function(e){ue(t,e);function t(n){var r=e.call(this,n)||this;return r.numTokens=n.numTokens,n.outputMode?r.outputMode=n.outputMode:r.outputMode="multiHot",r}return t.prototype.getConfig=function(){var n={numTokens:this.numTokens,outputMode:this.outputMode},r=e.prototype.getConfig.call(this);return Object.assign(n,r),n},t.prototype.computeOutputShape=function(n){return n=Ut(n),n==null?[this.numTokens]:this.outputMode==="oneHot"&&n[n.length-1]!==1?(n.push(this.numTokens),n):(n[n.length-1]=this.numTokens,n)},t.prototype.call=function(n,r){var a=this;return F.tidy(function(){n=St(n),n.dtype!=="int32"&&(n=is(n,"int32"));var i;if(typeof r.countWeights<"u"){if(a.outputMode!=="count")throw new J(`countWeights is not used when outputMode !== count.
              Received countWeights=`.concat(r.countWeights));i=St(r.countWeights)}var o=F.max(n),s=F.min(n),u=F.greater(a.numTokens,o).bufferSync().get(0),l=F.greaterEqual(s,0).bufferSync().get(0);if(!(u&&l))throw new J("Input values must be between 0 < values <="+" numTokens with numTokens=".concat(a.numTokens));return ope(n,a.outputMode,a.numTokens,i)})},t}(At);eb.className="CategoryEncoding";F.serialization.registerClass(eb);var spe=["bilinear","nearest"],KT=new Set(spe),tb=function(e){ue(t,e);function t(n){var r=e.call(this,n)||this;if(r.height=n.height,r.width=n.width,n.interpolation)if(KT.has(n.interpolation))r.interpolation=n.interpolation;else throw new J("Invalid interpolation parameter: ".concat(n.interpolation," is not implemented"));else r.interpolation="bilinear";return r.cropToAspectRatio=!!n.cropToAspectRatio,r}return t.prototype.computeOutputShape=function(n){n=Ut(n);var r=n[2];return[this.height,this.width,r]},t.prototype.getConfig=function(){var n={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},r=e.prototype.getConfig.call(this);return Object.assign(n,r),n},t.prototype.call=function(n,r){var a=this;return F.tidy(function(){var i=[a.height,a.width];if(a.interpolation==="bilinear")return F.image.resizeBilinear(n,i,!a.cropToAspectRatio);if(a.interpolation==="nearest")return F.image.resizeNearestNeighbor(n,i,!a.cropToAspectRatio);throw new Error("Interpolation is ".concat(a.interpolation," but only ").concat(ft([],re(KT),!1)," are supported"))})},t}(At);tb.className="Resizing";F.serialization.registerClass(tb);var FC=function(){function e(t){this.seed=t}return e.prototype.next=function(){if(this.seed!==void 0)return this.seed++},e}();FC.className="RandomSeed";var RC=function(e){ue(t,e);function t(n){var r=e.call(this,n)||this;return r.randomGenerator=new FC(n.seed),r}return t.prototype.getConfig=function(){var n={seed:this.randomGenerator.seed},r=e.prototype.getConfig.call(this);return Object.assign(n,r),n},t}(At);RC.className="BaseRandomLayer";var upe=["bilinear","nearest"],XT=new Set(upe),nb=function(e){ue(t,e);function t(n){var r=e.call(this,n)||this,a=n.factor,i=n.interpolation,o=i===void 0?"bilinear":i;if(r.factor=a,Array.isArray(r.factor)&&r.factor.length===2)r.widthLower=r.factor[0],r.widthUpper=r.factor[1];else if(!Array.isArray(r.factor)&&r.factor>0)r.widthLower=-r.factor,r.widthUpper=r.factor;else throw new J("Invalid factor: ".concat(r.factor,". Must be positive number or tuple of 2 numbers"));if(r.widthLower<-1||r.widthUpper<-1)throw new J("factor must have values larger than -1. Got: ".concat(r.factor));if(r.widthUpper<r.widthLower)throw new J(`factor cannot have upper bound less than lower bound.
        Got upper bound: `.concat(r.widthUpper,`.
        Got lower bound: `).concat(r.widthLower,`
      `));if(o)if(XT.has(o))r.interpolation=o;else throw new J("Invalid interpolation parameter: ".concat(o," is not implemented"));return r}return t.prototype.getConfig=function(){var n={factor:this.factor,interpolation:this.interpolation},r=e.prototype.getConfig.call(this);return Object.assign(n,r),n},t.prototype.computeOutputShape=function(n){n=Ut(n);var r=n[2];return[this.imgHeight,-1,r]},t.prototype.call=function(n,r){var a=this;return F.tidy(function(){var i=St(n);a.imgHeight=i.shape[i.shape.length-3];var o=i.shape[i.shape.length-2];a.widthFactor=F.randomUniform([1],1+a.widthLower,1+a.widthUpper,"float32",a.randomGenerator.next());var s=a.widthFactor.dataSync()[0]*o;s=Math.round(s);var u=[a.imgHeight,s];switch(a.interpolation){case"bilinear":return F.image.resizeBilinear(n,u);case"nearest":return F.image.resizeNearestNeighbor(n,u);default:throw new Error("Interpolation is ".concat(a.interpolation,`
          but only `).concat(ft([],re(XT),!1)," are supported"))}})},t}(RC);nb.className="RandomWidth";F.serialization.registerClass(nb);function lpe(e){return new wp(e)}function cpe(e){return new r4(e)}function ppe(e){return new e4(e)}function dpe(e){return new t4(e)}function fpe(e){return new n4(e)}function hpe(e){return new i4(e)}function mpe(e){return new a4(e)}function vpe(e){return new c4(e)}function gpe(e){return new _v(e)}function ype(e){return new s4(e)}function bpe(e){return new Av(e)}function wpe(e){return new u4(e)}function xpe(e){return new l4(e)}function Spe(e){return new p4(e)}function kpe(e){return new d4(e)}function Npe(e){return new f4(e)}function Tpe(e){return new x4(e)}function Epe(e){return new b4(e)}function Ipe(e){return new Pv(e)}function Cpe(e){return new y4(e)}function Dpe(e){return new w4(e)}function _pe(e){return new S4(e)}function Ape(e){return new k4(e)}function Fpe(e){return new N4(e)}function Rpe(e){return new E4(e)}function Ope(e){return new I4(e)}function Mpe(e){return new D4(e)}function Ppe(e){return new F4(e)}function Bpe(e){return new _4(e)}function Lpe(e){return new A4(e)}function zpe(e){return new C4(e)}function $pe(e){return new R4(e)}function Vpe(e){return new B4(e)}function Wpe(e){return new L4(e)}function Upe(e){return new z4(e)}function rb(e){return new V4(e)}function Gpe(e){return rb(e)}function qpe(e){return rb(e)}function ab(e){return new U4(e)}function Hpe(e){return ab(e)}function jpe(e){return ab(e)}function ib(e){return new q4(e)}function Kpe(e){return ib(e)}function Xpe(e){return ib(e)}function Ype(e){return new H4(e)}function Jpe(e){return new K4(e)}function OC(e){return new j4(e)}function MC(e){return new X4(e)}function PC(e){return new $4(e)}function BC(e){return new W4(e)}function Zpe(e){return new G4(e)}function Qpe(e){return new m4(e)}function ede(e){return new Rv(e)}function tde(e){return new v4(e)}function nde(e){return new nh(e)}function rde(e){return new h4(e)}function ade(e){return new Fv(e)}function ide(e){return new g4(e)}function ode(e){return new Mv(e)}function sde(e){return new $s(e)}function ude(e){return new Ov(e)}function lde(e){return new J4(e)}function cde(e){return new Y4(e)}var pde=OC,dde=MC,fde=PC,hde=BC;function mde(e){return new O4(e)}function vde(e){return new M4(e)}function gde(e){return new P4(e)}function yde(e){return new T4(e)}function bde(e){return new Z4(e)}function wde(e){return new Q4(e)}function xde(e){return new tb(e)}function Sde(e){return new eb(e)}function kde(e){return new nb(e)}var Nde={__proto__:null,Layer:At,RNN:$s,RNNCell:kp,activation:Tpe,add:Ope,alphaDropout:gde,average:Mpe,averagePooling1d:rb,averagePooling2d:ab,averagePooling3d:ib,avgPool1d:Gpe,avgPool2d:Hpe,avgPool3d:Kpe,avgPooling1d:qpe,avgPooling2d:jpe,avgPooling3d:Xpe,batchNormalization:Vpe,bidirectional:lde,categoryEncoding:Sde,centerCrop:wde,concatenate:Ppe,conv1d:vpe,conv2d:gpe,conv2dTranspose:ype,conv3d:bpe,conv3dTranspose:wpe,convLstm2d:ide,convLstm2dCell:ode,cropping2D:Spe,dense:Epe,depthwiseConv2d:Npe,dot:$pe,dropout:Ipe,elu:cpe,embedding:Rpe,flatten:Dpe,gaussianDropout:vde,gaussianNoise:mde,globalAveragePooling1d:Ype,globalAveragePooling2d:Jpe,globalMaxPool1d:pde,globalMaxPool2d:dde,globalMaxPooling1d:OC,globalMaxPooling2d:MC,gru:Qpe,gruCell:ede,input:nC,inputLayer:lpe,layerNormalization:Wpe,leakyReLU:dpe,lstm:tde,lstmCell:nde,masking:yde,maxPool1d:fde,maxPool2d:hde,maxPooling1d:PC,maxPooling2d:BC,maxPooling3d:Zpe,maximum:Bpe,minimum:Lpe,multiply:zpe,permute:Fpe,prelu:fpe,randomWidth:kde,reLU:ppe,repeatVector:_pe,rescaling:bde,reshape:Ape,resizing:xde,rnn:sde,separableConv2d:xpe,simpleRNN:rde,simpleRNNCell:ade,softmax:hpe,spatialDropout1d:Cpe,stackedRNNCells:ude,thresholdedReLU:mpe,timeDistributed:cde,upSampling2d:kpe,zeroPadding2d:Upe};function Tde(e,t){return K3(e,t)}function Ede(e,t){return jI(e,t)}function Ide(e,t){return KI(e,t)}function Cde(e,t){return X3(e,t)}function Dde(e,t){return Y3(e,t)}function _de(e,t){return HI(e,t)}function Ade(e,t){return sce(e,t)}function Fde(e,t){return j3(e,t)}function Rde(e,t){return Ev(e,t)}function Ode(e,t){return Sp(e,t)}function Mde(e,t){return Sp(e,t)}function Pde(e,t){return Sp(e,t)}function Bde(e,t){return Ul(e,t)}function Lde(e,t){return Ul(e,t)}function zde(e,t){return Ul(e,t)}function $de(e,t){return uce(e,t)}var Vde={__proto__:null,MAPE:Mde,MSE:Lde,binaryAccuracy:Tde,binaryCrossentropy:Ede,categoricalAccuracy:Cde,categoricalCrossentropy:Dde,cosineProximity:Fde,mape:Pde,meanAbsoluteError:Rde,meanAbsolutePercentageError:Ode,meanSquaredError:Bde,mse:zde,precision:_de,r2Score:$de,recall:Ade,sparseCategoricalAccuracy:Ide};var Wde={__proto__:null,modelFromJSON:Lce};function Ude(e){return new th(e)}function Gde(e){return qce(e)}function qde(e){return Hce(e)}var Hde={__proto__:null,l1:Gde,l1l2:Ude,l2:qde},LC=function(e){ue(t,e);function t(){var n=e.apply(this,ft([],re(arguments),!1))||this;return n.model=null,n}return t.prototype.setModel=function(n){if(!(n instanceof zs))throw new Error("model must be a LayersModel, not some other Container");this.model=n},t}(bp);function Um(e,t){return e<t}function YT(e,t){return e>t}var zC=function(e){ue(t,e);function t(n){var r=e.call(this)||this;if(n==null&&(n={}),n.restoreBestWeights)throw new _t("restoreBestWeights = True is not implemented in EarlyStopping yet.");return r.monitor=n.monitor||"val_loss",r.minDelta=Math.abs(n.minDelta||0),r.patience=n.patience||0,r.verbose=n.verbose||0,r.mode=n.mode||"auto",r.baseline=n.baseline,["auto","min","max"].indexOf(r.mode)===-1&&(console.warn("EarlyStopping mode '".concat(r.mode,"' is invalid. ")+"Falling back to mode 'auto'."),r.mode="auto"),r.mode==="min"?r.monitorFunc=Um:r.mode==="max"||r.monitor.indexOf("acc")!==-1?r.monitorFunc=YT:r.monitorFunc=Um,r.monitorFunc===Um&&(r.minDelta*=-1),r}return t.prototype.onTrainBegin=function(n){return Oe(this,void 0,void 0,function(){return Fe(this,function(r){return this.wait=0,this.stoppedEpoch=0,this.baseline!=null?this.best=this.baseline:this.best=this.monitorFunc===Um?1/0:-1/0,[2]})})},t.prototype.onEpochEnd=function(n,r){return Oe(this,void 0,void 0,function(){var a;return Fe(this,function(i){switch(i.label){case 0:return[4,Iu(r)];case 1:return i.sent(),a=this.getMonitorValue(r),a==null?[2]:(this.monitorFunc(a-this.minDelta,this.best)?(this.best=a,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=n,this.model.stopTraining=!0)),[2])}})})},t.prototype.onTrainEnd=function(n){return Oe(this,void 0,void 0,function(){return Fe(this,function(r){return this.stoppedEpoch>0&&this.verbose&&console.log("Epoch ".concat(this.stoppedEpoch,": early stopping.")),[2]})})},t.prototype.getMonitorValue=function(n){n==null&&(n={});var r=n[this.monitor];return r==null&&console.warn("Metric for EarlyStopping ".concat(this.monitor," is not available. ")+"Available metrics are: ".concat(Object.keys(n))),r},t}(LC);function jde(e){return new zC(e)}var Kde={earlyStopping:jde};Bn.Callback=LC;Bn.CallbackList=$I;Bn.CustomCallback=WI;Bn.EarlyStopping=zC;Bn.History=VI;Bn.InputSpec=wr;Bn.LayerVariable=sE;Bn.LayersModel=zs;Bn.RNN=$s;Bn.Sequential=Cv;Bn.SymbolicTensor=Co;Bn.callbacks=Kde;Bn.constraints=Fle;Bn.initializers=Kle;Bn.input=nC;Bn.layers=Nde;Bn.loadLayersModel=zce;Bn.metrics=Vde;Bn.model=Wce;Bn.models=Wde;Bn.registerCallbackConstructor=Gce;Bn.regularizers=Hde;Bn.sequential=Uce;Bn.version_layers=J3});var M_=An(ec=>{"use strict";var Ke=Il();function Xde(e){var t=Object.create(null);return e&&Object.keys(e).forEach(function(n){if(n!=="default"){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}}),t.default=e,t}function Yde(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in e)){var a=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,a.get?a:{enumerable:!0,get:function(){return n[r]}})}})}),e}var VC=Xde(Ke);var Jde=Ke.env();Jde.registerFlag("KEEP_INTERMEDIATE_TENSORS",function(){return!1},function(e){e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});var pb=function(e,t){return pb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},pb(e,t)};function wD(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");pb(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function Vt(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function s(c){try{l(r.next(c))}catch(p){o(p)}}function u(c){try{l(r.throw(c))}catch(p){o(p)}}function l(c){c.done?i(c.value):a(c.value).then(s,u)}l((r=r.apply(e,t||[])).next())})}function $t(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,a,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,a&&(i=l[0]&2?a.return:l[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,l[1])).done)return i;switch(a=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,a=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],a=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Tr(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ke(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function jt(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var Ka;(function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"})(Ka||(Ka={}));var WC;(function(e){(function(t){t[t.LEGACY=0]="LEGACY",t[t.V1=1]="V1",t[t.V2=2]="V2"})(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))})(WC||(WC={}));var Bb={};function Zde(e,t){var n={tfOpName:e,category:"custom",inputs:[],attrs:[],customExecutor:t};Bb[e]=n}function xD(e){return Bb[e]}function Qde(e){delete Bb[e]}function I(e,t,n,r,a){var i=t.inputParams[e];if(i&&i.inputIndexStart!==void 0){var o=i.inputIndexStart,s=i.inputIndexEnd===0?void 0:i.inputIndexEnd===void 0?o+1:i.inputIndexEnd,u=o<0?t.inputNames.length+o:o;if(i.type==="tensor")return Hr(t.inputNames[u],n,r,a);if(i.type==="tensors"){var l=t.inputs.slice(o,s),c=t.inputNames.slice(o,s).filter(function(h,m){var v;return((v=l[m])===null||v===void 0?void 0:v.op)!=="NoOp"});return c.map(function(h){return Hr(h,n,r,a)})}var p=Hr(t.inputNames[u],n,r,a),d=p.dataSync();return i.type==="number"?d[0]:Ke.util.toNestedArray(p.shape,d)}var f=t.attrParams[e];return f&&f.value}function Hr(e,t,n,r){var a=ke(Xa(e,n),2),i=a[0],o=a[1];if(r!=null){var s=r.getHashTableHandleByName(i);if(s!=null)return s}var u=n.currentContextIds.find(function(l){return!!t[Gv(i,l)]});return u!==void 0?t[Gv(i,u)][o]:void 0}function UC(e,t,n){return t[Gv(e,n.currentContextId)]}function Vs(e,t){var n=ke(Xa(e,t),3),r=n[0],a=n[1],i=n[2];return[Gv(r,t&&t.currentContextId),a,i]}function Gv(e,t){return t?"".concat(e,"-").concat(t):e}function Xa(e,t){if(e==="")return["",0,void 0];var n=t!=null&&t.parseNodeNameCache!=null;if(n){var r=t.parseNodeNameCache.get(e);if(r!=null)return r}var a=e.split(":"),i;if(a.length===1)i=[e,0,void 0];else{var o=a[0],s=a.length===3?a[1]:void 0,u=Number(a[a.length-1]);i=[o,u,s]}return n&&t.parseNodeNameCache.set(e,i),i}function $v(e,t,n){var r=I("pad",e,t,n);if(r==="explicit"){r=I("explicitPaddings",e,t,n);for(var a=[[0,0],[0,0],[0,0],[0,0]],i=0;i<4;i++)a[i][0]=r[i*2],a[i][1]=r[i*2+1];return a}return r}function Ws(e){return e.kept?e:Ke.clone(e)}var efe=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],tfe={__proto__:null,json:efe};var nfe=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],rfe={__proto__:null,json:nfe};var afe=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],ife={__proto__:null,json:afe};var ofe=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],sfe={__proto__:null,json:ofe};var ufe=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],lfe={__proto__:null,json:ufe};var cfe=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],pfe={__proto__:null,json:cfe};var dfe=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],ffe={__proto__:null,json:dfe};var hfe=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],mfe={__proto__:null,json:hfe};var vfe=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],gfe={__proto__:null,json:vfe};var yfe=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],bfe={__proto__:null,json:yfe};var wfe=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],xfe={__proto__:null,json:wfe};var Sfe=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],kfe={__proto__:null,json:Sfe};var Nfe=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],Tfe={__proto__:null,json:Nfe};var Efe=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],Ife={__proto__:null,json:Efe};var Cfe=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],Dfe={__proto__:null,json:Cfe};var _fe=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],Afe={__proto__:null,json:_fe};var Ffe=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],Rfe={__proto__:null,json:Ffe};var Ofe=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],Mfe={__proto__:null,json:Ofe};var Pfe=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],Bfe={__proto__:null,json:Pfe},GC=function(){function e(){var t=[tfe,rfe,ife,sfe,lfe,pfe,ffe,mfe,gfe,bfe,xfe,kfe,Tfe,Ife,Dfe,Afe,Rfe,Mfe,Bfe],n=[].concat.apply([],jt([],ke(t.map(function(r){return r.json})),!1));this.opMappers=n.reduce(function(r,a){return r[a.tfOpName]=a,r},{})}return Object.defineProperty(e,"Instance",{get:function(){return this._instance||(this._instance=new this)},enumerable:!1,configurable:!0}),e.prototype.transformGraph=function(t,n){var r=this;n===void 0&&(n={});var a=t.node,i=[],o=[],s=[],u=a.reduce(function(v,g){return v[g.name]=r.mapNode(g),g.op.startsWith("Placeholder")?i.push(v[g.name]):g.op==="Const"?o.push(v[g.name]):(g.input==null||g.input.length===0)&&s.push(v[g.name]),v},{}),l=[],c=[],p={},d={};n!=null&&(p=this.mapSignatureEntries(n.inputs),d=this.mapSignatureEntries(n.outputs));var f=Object.keys(u);f.forEach(function(v){var g=u[v];g.inputNames.forEach(function(y,w){var b=ke(Vs(y),3),x=b[0],k=b[2],N=u[x];if(N.outputs!=null){var E=N.outputs.indexOf(k);if(E!==-1){var C="".concat(x,":").concat(E);g.inputNames[w]=C}}g.inputs.push(N),N.children.push(g)})}),Object.keys(d).length===0?f.forEach(function(v){var g=u[v];g.children.length===0&&c.push(g)}):Object.keys(d).forEach(function(v){var g=ke(Vs(v),1),y=g[0],w=u[y];w!=null&&(w.signatureKey=d[v],c.push(w))}),Object.keys(p).length>0?Object.keys(p).forEach(function(v){var g=ke(Vs(v),1),y=g[0],w=u[y];w&&(w.signatureKey=p[v],l.push(w))}):l=i;var h={};t.library!=null&&t.library.function!=null&&(h=t.library.function.reduce(function(v,g){return v[g.signature.name]=r.mapFunction(g),v},{}));var m={nodes:u,inputs:l,outputs:c,weights:o,placeholders:i,signature:n,functions:h};return s.length>0&&(m.initNodes=s),m},e.prototype.mapSignatureEntries=function(t){return Object.keys(t||{}).reduce(function(n,r){return n[t[r].name]=r,n},{})},e.prototype.mapNode=function(t){var n=xD(t.op)||this.opMappers[t.op]||{};t.attr==null&&(t.attr={});var r={name:t.name,op:t.op,category:n.category,inputNames:(t.input||[]).map(function(a){return a.startsWith("^")?a.slice(1):a}),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:t.attr,outputs:n.outputs};return n.inputs!=null&&(r.inputParams=n.inputs.reduce(function(a,i){return a[i.name]={type:i.type,inputIndexStart:i.start,inputIndexEnd:i.end},a},{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce(function(a,i){var o=i.type,s=void 0;switch(i.type){case"string":s=db(t.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=db(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"string[]":s=bb(t.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=bb(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"number":s=hb(t.attr,i.tfName,i.defaultValue||0),s===void 0&&i.tfDeprecatedName&&(s=hb(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"number[]":s=yb(t.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=yb(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool":s=fb(t.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=fb(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool[]":s=xb(t.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=xb(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape":s=gb(t.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=gb(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape[]":s=wb(t.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=wb(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype":s=mb(t.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=mb(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype[]":s=vb(t.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=vb(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"func":s=qC(t.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=qC(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: ".concat(i.type," for op: ").concat(t.op))}return a[i.name]={value:s,type:o},a},{})),r},e.prototype.mapFunction=function(t){var n=this,r=t.nodeDef,a=[],i=[],o={};r!=null&&(o=r.reduce(function(d,f){return d[f.name]=n.mapNode(f),f.op==="Const"&&i.push(d[f.name]),d},{}));var s=[],u=[];t.signature.inputArg.forEach(function(d){var f=ke(Vs(d.name),1),h=f[0],m={name:h,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:Lb(d.type),type:"dtype"}},children:[]};m.signatureKey=d.name,s.push(m),o[h]=m});var l=Object.keys(o);l.forEach(function(d){var f=o[d];f.inputNames.forEach(function(h,m){var v=ke(Vs(h),3),g=v[0],y=v[2],w=o[g];if(w.outputs!=null){var b=w.outputs.indexOf(y);if(b!==-1){var x="".concat(g,":").concat(b);f.inputNames[m]=x}}f.inputs.push(w),w.children.push(f)})});var c=t.ret;t.signature.outputArg.forEach(function(d){var f=ke(Vs(c[d.name]),2),h=f[0],m=f[1],v=o[h];v!=null&&(v.defaultOutput=m,u.push(v))});var p=this.mapArgsToSignature(t);return{nodes:o,inputs:s,outputs:u,weights:i,placeholders:a,signature:p}},e.prototype.mapArgsToSignature=function(t){var n=this;return{methodName:t.signature.name,inputs:t.signature.inputArg.reduce(function(r,a){return r[a.name]=n.mapArgToTensorInfo(a),r},{}),outputs:t.signature.outputArg.reduce(function(r,a){return r[a.name]=n.mapArgToTensorInfo(a,t.ret),r},{})}},e.prototype.mapArgToTensorInfo=function(t,n){var r=t.name;return n!=null&&(r=n[r]),{name:r,dtype:t.type}},e}();function Lfe(e){var t=Ke.env().global;if(typeof t.atob<"u")return t.atob(e);if(typeof Buffer<"u")return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function SD(e,t){var n=Array.isArray(e)?String.fromCharCode.apply(null,e):Lfe(e);return t?n:n.toLowerCase()}function db(e,t,n,r){r===void 0&&(r=!1);var a=e[t];return a!=null?SD(a.s,r):n}function fb(e,t,n){var r=e[t];return r?r.b:n}function hb(e,t,n){var r=e[t]||{},a=r.i!=null?r.i:r.f!=null?r.f:n;return typeof a=="number"?a:parseInt(a,10)}function Lb(e){switch(typeof e=="string"&&(e=Ka[e]),e){case Ka.DT_FLOAT:case Ka.DT_HALF:return"float32";case Ka.DT_INT32:case Ka.DT_INT64:case Ka.DT_INT8:case Ka.DT_UINT8:return"int32";case Ka.DT_BOOL:return"bool";case Ka.DT_DOUBLE:return"float32";case Ka.DT_STRING:return"string";case Ka.DT_COMPLEX64:case Ka.DT_COMPLEX128:return"complex64";default:return null}}function qC(e,t,n){var r=e[t];return r&&r.func?r.func.name:n}function mb(e,t,n){var r=e[t];return r&&r.type?Lb(r.type):n}function vb(e,t,n){var r=e[t];return r&&r.list&&r.list.type?r.list.type.map(function(a){return Lb(a)}):n}function kD(e){if(!e.unknownRank)return e.dim!=null?e.dim.map(function(t){return typeof t.size=="number"?t.size:parseInt(t.size,10)}):[]}function gb(e,t,n){var r=e[t];return r&&r.shape?kD(r.shape):n}function yb(e,t,n){var r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(function(a){return typeof a=="number"?a:parseInt(a,10)}):n}function bb(e,t,n,r){r===void 0&&(r=!1);var a=e[t];return a&&a.list&&a.list.s?a.list.s.map(function(i){return SD(i,r)}):n}function wb(e,t,n){var r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map(function(a){return kD(a)}):n}function xb(e,t,n){var r=e[t];return r&&r.list&&r.list.b?r.list.b:n}var zfe=function(){function e(t,n,r){var a=this;this.node=t,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map(function(i){return a.getInput(i)}),t.rawAttrs!=null&&(this.attrs=Object.keys(t.rawAttrs).reduce(function(i,o){return i[o]=a.getAttr(o),i},{}))}return e.prototype.getInput=function(t){return Hr(t,this.tensorMap,this.context)},e.prototype.getAttr=function(t,n){var r=this.node.rawAttrs[t];if(r.tensor!=null)return Hr(t,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return hb(this.node.rawAttrs,t,n);if(r.s!=null)return db(this.node.rawAttrs,t,n);if(r.b!=null)return fb(this.node.rawAttrs,t,n);if(r.shape!=null)return gb(this.node.rawAttrs,t,n);if(r.type!=null)return mb(this.node.rawAttrs,t,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return yb(this.node.rawAttrs,t,n);if(r.list.s!=null)return bb(this.node.rawAttrs,t,n);if(r.list.shape!=null)return wb(this.node.rawAttrs,t,n);if(r.list.b!=null)return xb(this.node.rawAttrs,t,n);if(r.list.type!=null)return vb(this.node.rawAttrs,t,n)}return n},e}();var $fe=1e-7,Vfe=1e-4,Wfe=function(){function e(){}return e.prototype.refCount=function(t){return ja("refCount")},e.prototype.incRef=function(t){return ja("incRef")},e.prototype.timerAvailable=function(){return!0},e.prototype.time=function(t){return ja("time")},e.prototype.read=function(t){return ja("read")},e.prototype.readSync=function(t){return ja("readSync")},e.prototype.readToGPU=function(t,n){return ja("readToGPU")},e.prototype.numDataIds=function(){return ja("numDataIds")},e.prototype.disposeData=function(t,n){return ja("disposeData")},e.prototype.write=function(t,n,r){return ja("write")},e.prototype.move=function(t,n,r,a,i){return ja("move")},e.prototype.createTensorFromGPUData=function(t,n,r){return ja("createTensorFromGPUData")},e.prototype.memory=function(){return ja("memory")},e.prototype.floatPrecision=function(){return ja("floatPrecision")},e.prototype.epsilon=function(){return this.floatPrecision()===32?$fe:Vfe},e.prototype.dispose=function(){return ja("dispose")},e}();function ja(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}function q(e,t){if(!e)throw new Error(typeof t=="string"?t:t())}function ro(e,t,n){n===void 0&&(n=""),q(Yl(e,t),function(){return n+" Shapes ".concat(e," and ").concat(t," must match")})}function Rp(e){q(e!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function Fr(e){if(e.length===0)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function Ufe(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==null&&t[n]!==null&&e[n]!==t[n])return!1;return!0}function Yl(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function ph(e){return e%1===0}function Vv(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function n0(e,t){var n=t.length;return e=e==null?t.map(function(r,a){return a}):[].concat(e),q(e.every(function(r){return r>=-n&&r<n}),function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e)}),q(e.every(function(r){return ph(r)}),function(){return"All values in axis param must be integers but "+"got axis ".concat(e)}),e.map(function(r){return r<0?n+r:r})}function Gfe(e,t){for(var n=[],r=[],a=t!=null&&Array.isArray(t)&&t.length===0,i=t==null||a?null:n0(t,e).sort(),o=0,s=0;s<e.length;++s){if(i!=null){if(i[o]===s&&e[s]!==1)throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(e[s],"' is not 1"));(i[o]==null||i[o]>s)&&e[s]===1&&(n.push(e[s]),r.push(s)),i[o]<=s&&o++}e[s]!==1&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function qfe(e,t){return ND(e,t)}function ND(e,t){var n=null;if(e==null||e==="float32")n=new Float32Array(t);else if(e==="int32")n=new Int32Array(t);else if(e==="bool")n=new Uint8Array(t);else if(e==="string")n=new Array(t);else throw new Error("Unknown data type ".concat(e));return n}function Hfe(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}function jfe(e){return e==="bool"||e==="complex64"||e==="float32"||e==="int32"||e==="string"}function Sb(e){if(e==="float32"||e==="int32")return 4;if(e==="complex64")return 8;if(e==="bool")return 1;throw new Error("Unknown dtype ".concat(e))}function Kfe(e){if(e==null)return 0;var t=0;return e.forEach(function(n){return t+=n.length}),t}function zb(e){return typeof e=="string"||e instanceof String}function Xfe(e){return typeof e=="boolean"}function Yfe(e){return typeof e=="number"}function r0(e){return Array.isArray(e)?r0(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":Yfe(e)?"float32":zb(e)?"string":Xfe(e)?"bool":"float32"}function HC(e){return!!(e&&e.constructor&&e.call&&e.apply)}function $b(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function TD(e,t,n,r){r===void 0&&(r=!1);var a=new Array;if(t.length===1)for(var i=t[0]*(r?2:1),o=0;o<i;o++)a[o]=n[e+o];else for(var i=t[0],s=t.slice(1),u=s.reduce(function(c,p){return c*p})*(r?2:1),o=0;o<i;o++)a[o]=TD(e+o*u,s,n,r);return a}function jC(e,t,n){if(n===void 0&&(n=!1),e.length===0)return t[0];var r=e.reduce(function(a,i){return a*i})*(n?2:1);if(r===0)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return TD(0,e,t,n)}function ED(e,t){for(var n=Vb(e,t),r=0;r<n.length;r++)n[r]=1;return n}function Vb(e,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool")return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function gi(e){e.forEach(function(t){q(Number.isInteger(t)&&t>=0,function(){return"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"].")})})}function Wb(e){return e&&e.then&&typeof e.then=="function"}var KC="tfjsflags",Jfe=function(){function e(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Zfe,this.populateURLFlags()}return e.prototype.setPlatform=function(t,n){this.platform!=null&&(Ia().getBool("IS_TEST")||Ia().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(t,"."))),this.platformName=t,this.platform=n},e.prototype.registerFlag=function(t,n,r){if(this.flagRegistry[t]={evaluationFn:n,setHook:r},this.urlFlags[t]!=null){var a=this.urlFlags[t];Ia().getBool("IS_TEST")||Ia().getBool("PROD")||console.warn("Setting feature override from URL ".concat(t,": ").concat(a,".")),this.set(t,a)}},e.prototype.getAsync=function(t){return Vt(this,void 0,void 0,function(){var n,r;return $t(this,function(a){switch(a.label){case 0:return t in this.flags?[2,this.flags[t]]:(n=this.flags,r=t,[4,this.evaluateFlag(t)]);case 1:return n[r]=a.sent(),[2,this.flags[t]]}})})},e.prototype.get=function(t){if(t in this.flags)return this.flags[t];var n=this.evaluateFlag(t);if(Wb(n))throw new Error("Flag ".concat(t," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[t]=n,this.flags[t]},e.prototype.getNumber=function(t){return this.get(t)},e.prototype.getBool=function(t){return this.get(t)},e.prototype.getString=function(t){return this.get(t)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"features",{get:function(){return this.flags},enumerable:!1,configurable:!0}),e.prototype.set=function(t,n){if(this.flagRegistry[t]==null)throw new Error("Cannot set flag ".concat(t," as it has not been registered."));this.flags[t]=n,this.flagRegistry[t].setHook!=null&&this.flagRegistry[t].setHook(n)},e.prototype.evaluateFlag=function(t){if(this.flagRegistry[t]==null)throw new Error("Cannot evaluate flag '".concat(t,"': no evaluation function found."));return this.flagRegistry[t].evaluationFn()},e.prototype.setFlags=function(t){this.flags=Object.assign({},t)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var t=this;if(!(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")){var n=this.getQueryParams(this.global.location.search);if(KC in n){var r=n[KC].split(",");r.forEach(function(a){var i=ke(a.split(":"),2),o=i[0],s=i[1];t.urlFlags[o]=ehe(o,s)})}}},e}();function Zfe(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(n){for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];return Qfe(t,r[0],r[1]),r.join("=")}),t}function Qfe(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function ehe(e,t){var n=t.toLowerCase();return n==="true"||n==="false"?n==="true":"".concat(+n)===n?+n:t}function Ia(){return ID}var ID=null;function the(e){ID=e}var ob;function CD(){if(ob==null){var e=void 0;if(typeof window<"u")e=window;else if(typeof global<"u")e=global;else if(typeof process<"u")e=process;else if(typeof self<"u")e=self;else throw new Error("Could not find a global object");ob=e}return ob}function nhe(){var e=CD();return e._tfGlobals==null&&(e._tfGlobals=new Map),e._tfGlobals}function Ub(e,t){var n=nhe();if(n.has(e))return n.get(e);var r=t();return n.set(e,r),n.get(e)}var rhe="Abs",ahe="Acos",ihe="Acosh",DD="Add",ohe="AddN",she="All",uhe="Any",lhe="ArgMax",che="ArgMin",phe="Asin",dhe="Asinh",fhe="Atan",hhe="Atanh",mhe="Atan2",vhe="AvgPool",ghe="AvgPool3D",yhe="BatchMatMul",bhe="BatchToSpaceND",whe="Bincount",xhe="BitwiseAnd",She="BroadcastArgs",_D="Cast",khe="Ceil",Nhe="ClipByValue",The="Complex",Ehe="ComplexAbs",Ihe="Concat",Che="Conv2D",Dhe="Conv2DBackpropFilter",_he="Conv2DBackpropInput",Ahe="Conv3D",Fhe="Conv3DBackpropInputV2",Rhe="Cos",Ohe="Cosh",Mhe="Cumprod",Phe="Cumsum",Bhe="CropAndResize",Lhe="DenseBincount",zhe="DepthToSpace",$he="DepthwiseConv2dNative",Vhe="DepthwiseConv2dNativeBackpropFilter",Whe="DepthwiseConv2dNativeBackpropInput",Uhe="Diag",Ghe="Dilation2D",qhe="RealDiv",Hhe="Einsum",jhe="Elu",Khe="Erf",Xhe="Equal",Yhe="Exp",Jhe="ExpandDims",Zhe="Expm1",Qhe="FFT",e1e="Fill",t1e="FlipLeftRight",n1e="Floor",r1e="FloorDiv",a1e="FusedBatchNorm",i1e="GatherV2",o1e="GatherNd",s1e="Greater",u1e="GreaterEqual",AD="Identity",l1e="IFFT",c1e="Imag",p1e="IsFinite",d1e="IsInf",f1e="IsNan",h1e="LeakyRelu",m1e="Less",v1e="LessEqual",g1e="LinSpace",y1e="Log",b1e="Log1p",w1e="LogicalAnd",x1e="LogicalNot",S1e="LogicalOr",k1e="LRN",N1e="Max",T1e="Maximum",E1e="MaxPool",I1e="MaxPool3D",C1e="MaxPoolWithArgmax",D1e="Mean",_1e="Min",A1e="Minimum",F1e="MirrorPad",R1e="Mod",O1e="Multinomial",M1e="Multiply",P1e="Neg",B1e="NotEqual",L1e="NonMaxSuppressionV3",z1e="NonMaxSuppressionV4",$1e="NonMaxSuppressionV5",V1e="OnesLike",W1e="OneHot",U1e="Pack",G1e="PadV2",q1e="Pow",H1e="Prelu",j1e="Prod",K1e="RaggedGather",X1e="RaggedRange",Y1e="RaggedTensorToTensor",J1e="Range",Z1e="Real",Q1e="Reciprocal",eme="Relu",tme="Reshape",nme="ResizeNearestNeighbor",rme="ResizeBilinear",ame="Relu6",ime="Reverse",ome="Round",sme="Rsqrt",ume="ScatterNd",lme="TensorScatterUpdate",cme="SearchSorted",pme="Select",dme="Selu",fme="Slice",hme="Sin",mme="Sinh",vme="Sign",gme="Sigmoid",yme="Softplus",bme="Sqrt",wme="Sum",xme="SpaceToBatchND",Sme="SplitV",kme="Softmax",Nme="SparseFillEmptyRows",Tme="SparseReshape",Eme="SparseSegmentMean",Ime="SparseSegmentSum",Cme="SparseToDense",Dme="SquaredDifference",_me="StaticRegexReplace",Ame="StridedSlice",Fme="StringNGrams",Rme="StringSplit",Ome="StringToHashBucketFast",Mme="Sub",Pme="Tan",Bme="Tanh",FD="Tile",Lme="TopK",zme="Transform",sb="Transpose",$me="Unique",Vme="Unpack",Wme="UnsortedSegmentSum",Ume="ZerosLike",Gme="Step",qme="RotateWithOffset",XC="_FusedMatMul",YC="FusedConv2D",JC="FusedDepthwiseConv2D";function rh(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Ia().getBool("IS_TEST")||Ia().getBool("PROD")||console.warn.apply(console,jt([],ke(e),!1))}var RD=Ub("kernelRegistry",function(){return new Map}),Hme=Ub("gradRegistry",function(){return new Map});function ZC(e,t){var n=jme(e,t);return RD.get(n)}function QC(e){return Hme.get(e)}function eD(e){for(var t=RD.entries(),n=[];;){var r=t.next(),a=r.done,i=r.value;if(a)break;var o=ke(i,2),s=o[0],u=o[1],l=ke(s.split("_"),1),c=l[0];c===e&&n.push(u)}return n}function jme(e,t){return"".concat(t,"_").concat(e)}function Kme(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}var Jl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xme(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Yme(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){if(this instanceof r){var a=[null];a.push.apply(a,arguments);var i=Function.bind.apply(t,a);return new i}return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var a=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return e[r]}})}),n}var OD=Tn,Qi=null;try{Qi=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Tn(e,t,n){this.low=e|0,this.high=t|0,this.unsigned=!!n}Tn.prototype.__isLong__;Object.defineProperty(Tn.prototype,"__isLong__",{value:!0});function Qa(e){return(e&&e.__isLong__)===!0}Tn.isLong=Qa;var tD={},nD={};function Zl(e,t){var n,r,a;return t?(e>>>=0,(a=0<=e&&e<256)&&(r=nD[e],r)?r:(n=En(e,(e|0)<0?-1:0,!0),a&&(nD[e]=n),n)):(e|=0,(a=-128<=e&&e<128)&&(r=tD[e],r)?r:(n=En(e,e<0?-1:0,!1),a&&(tD[e]=n),n))}Tn.fromInt=Zl;function eo(e,t){if(isNaN(e))return t?Hl:to;if(t){if(e<0)return Hl;if(e>=MD)return LD}else{if(e<=-aD)return Ja;if(e+1>=aD)return BD}return e<0?eo(-e,t).neg():En(e%_p|0,e/_p|0,t)}Tn.fromNumber=eo;function En(e,t,n){return new Tn(e,t,n)}Tn.fromBits=En;var qv=Math.pow;function Gb(e,t,n){if(e.length===0)throw Error("empty string");if(e==="NaN"||e==="Infinity"||e==="+Infinity"||e==="-Infinity")return to;if(typeof t=="number"?(n=t,t=!1):t=!!t,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return Gb(e.substring(1),t,n).neg();for(var a=eo(qv(n,8)),i=to,o=0;o<e.length;o+=8){var s=Math.min(8,e.length-o),u=parseInt(e.substring(o,o+s),n);if(s<8){var l=eo(qv(n,s));i=i.mul(l).add(eo(u))}else i=i.mul(a),i=i.add(eo(u))}return i.unsigned=t,i}Tn.fromString=Gb;function Oo(e,t){return typeof e=="number"?eo(e,t):typeof e=="string"?Gb(e,t):En(e.low,e.high,typeof t=="boolean"?t:e.unsigned)}Tn.fromValue=Oo;var rD=65536,Jme=1<<24,_p=rD*rD,MD=_p*_p,aD=MD/2,iD=Zl(Jme),to=Zl(0);Tn.ZERO=to;var Hl=Zl(0,!0);Tn.UZERO=Hl;var Tp=Zl(1);Tn.ONE=Tp;var PD=Zl(1,!0);Tn.UONE=PD;var kb=Zl(-1);Tn.NEG_ONE=kb;var BD=En(-1,2147483647,!1);Tn.MAX_VALUE=BD;var LD=En(-1,-1,!0);Tn.MAX_UNSIGNED_VALUE=LD;var Ja=En(0,-2147483648,!1);Tn.MIN_VALUE=Ja;var Ge=Tn.prototype;Ge.toInt=function(){return this.unsigned?this.low>>>0:this.low};Ge.toNumber=function(){return this.unsigned?(this.high>>>0)*_p+(this.low>>>0):this.high*_p+(this.low>>>0)};Ge.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Ja)){var n=eo(t),r=this.div(n),a=r.mul(n).sub(this);return r.toString(t)+a.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var i=eo(qv(t,6),this.unsigned),o=this,s="";;){var u=o.div(i),l=o.sub(u.mul(i)).toInt()>>>0,c=l.toString(t);if(o=u,o.isZero())return c+s;for(;c.length<6;)c="0"+c;s=""+c+s}};Ge.getHighBits=function(){return this.high};Ge.getHighBitsUnsigned=function(){return this.high>>>0};Ge.getLowBits=function(){return this.low};Ge.getLowBitsUnsigned=function(){return this.low>>>0};Ge.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Ja)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,n=31;n>0&&!(t&1<<n);n--);return this.high!=0?n+33:n+1};Ge.isZero=function(){return this.high===0&&this.low===0};Ge.eqz=Ge.isZero;Ge.isNegative=function(){return!this.unsigned&&this.high<0};Ge.isPositive=function(){return this.unsigned||this.high>=0};Ge.isOdd=function(){return(this.low&1)===1};Ge.isEven=function(){return(this.low&1)===0};Ge.equals=function(t){return Qa(t)||(t=Oo(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low};Ge.eq=Ge.equals;Ge.notEquals=function(t){return!this.eq(t)};Ge.neq=Ge.notEquals;Ge.ne=Ge.notEquals;Ge.lessThan=function(t){return this.comp(t)<0};Ge.lt=Ge.lessThan;Ge.lessThanOrEqual=function(t){return this.comp(t)<=0};Ge.lte=Ge.lessThanOrEqual;Ge.le=Ge.lessThanOrEqual;Ge.greaterThan=function(t){return this.comp(t)>0};Ge.gt=Ge.greaterThan;Ge.greaterThanOrEqual=function(t){return this.comp(t)>=0};Ge.gte=Ge.greaterThanOrEqual;Ge.ge=Ge.greaterThanOrEqual;Ge.compare=function(t){if(Qa(t)||(t=Oo(t)),this.eq(t))return 0;var n=this.isNegative(),r=t.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1};Ge.comp=Ge.compare;Ge.negate=function(){return!this.unsigned&&this.eq(Ja)?Ja:this.not().add(Tp)};Ge.neg=Ge.negate;Ge.add=function(t){Qa(t)||(t=Oo(t));var n=this.high>>>16,r=this.high&65535,a=this.low>>>16,i=this.low&65535,o=t.high>>>16,s=t.high&65535,u=t.low>>>16,l=t.low&65535,c=0,p=0,d=0,f=0;return f+=i+l,d+=f>>>16,f&=65535,d+=a+u,p+=d>>>16,d&=65535,p+=r+s,c+=p>>>16,p&=65535,c+=n+o,c&=65535,En(d<<16|f,c<<16|p,this.unsigned)};Ge.subtract=function(t){return Qa(t)||(t=Oo(t)),this.add(t.neg())};Ge.sub=Ge.subtract;Ge.multiply=function(t){if(this.isZero())return to;if(Qa(t)||(t=Oo(t)),Qi){var n=Qi.mul(this.low,this.high,t.low,t.high);return En(n,Qi.get_high(),this.unsigned)}if(t.isZero())return to;if(this.eq(Ja))return t.isOdd()?Ja:to;if(t.eq(Ja))return this.isOdd()?Ja:to;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(iD)&&t.lt(iD))return eo(this.toNumber()*t.toNumber(),this.unsigned);var r=this.high>>>16,a=this.high&65535,i=this.low>>>16,o=this.low&65535,s=t.high>>>16,u=t.high&65535,l=t.low>>>16,c=t.low&65535,p=0,d=0,f=0,h=0;return h+=o*c,f+=h>>>16,h&=65535,f+=i*c,d+=f>>>16,f&=65535,f+=o*l,d+=f>>>16,f&=65535,d+=a*c,p+=d>>>16,d&=65535,d+=i*l,p+=d>>>16,d&=65535,d+=o*u,p+=d>>>16,d&=65535,p+=r*c+a*l+i*u+o*s,p&=65535,En(f<<16|h,p<<16|d,this.unsigned)};Ge.mul=Ge.multiply;Ge.divide=function(t){if(Qa(t)||(t=Oo(t)),t.isZero())throw Error("division by zero");if(Qi){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var n=(this.unsigned?Qi.div_u:Qi.div_s)(this.low,this.high,t.low,t.high);return En(n,Qi.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Hl:to;var r,a,i;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return Hl;if(t.gt(this.shru(1)))return PD;i=Hl}else{if(this.eq(Ja)){if(t.eq(Tp)||t.eq(kb))return Ja;if(t.eq(Ja))return Tp;var o=this.shr(1);return r=o.div(t).shl(1),r.eq(to)?t.isNegative()?Tp:kb:(a=this.sub(t.mul(r)),i=r.add(a.div(t)),i)}else if(t.eq(Ja))return this.unsigned?Hl:to;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();i=to}for(a=this;a.gte(t);){r=Math.max(1,Math.floor(a.toNumber()/t.toNumber()));for(var s=Math.ceil(Math.log(r)/Math.LN2),u=s<=48?1:qv(2,s-48),l=eo(r),c=l.mul(t);c.isNegative()||c.gt(a);)r-=u,l=eo(r,this.unsigned),c=l.mul(t);l.isZero()&&(l=Tp),i=i.add(l),a=a.sub(c)}return i};Ge.div=Ge.divide;Ge.modulo=function(t){if(Qa(t)||(t=Oo(t)),Qi){var n=(this.unsigned?Qi.rem_u:Qi.rem_s)(this.low,this.high,t.low,t.high);return En(n,Qi.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))};Ge.mod=Ge.modulo;Ge.rem=Ge.modulo;Ge.not=function(){return En(~this.low,~this.high,this.unsigned)};Ge.and=function(t){return Qa(t)||(t=Oo(t)),En(this.low&t.low,this.high&t.high,this.unsigned)};Ge.or=function(t){return Qa(t)||(t=Oo(t)),En(this.low|t.low,this.high|t.high,this.unsigned)};Ge.xor=function(t){return Qa(t)||(t=Oo(t)),En(this.low^t.low,this.high^t.high,this.unsigned)};Ge.shiftLeft=function(t){return Qa(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?En(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):En(0,this.low<<t-32,this.unsigned)};Ge.shl=Ge.shiftLeft;Ge.shiftRight=function(t){return Qa(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?En(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):En(this.high>>t-32,this.high>=0?0:-1,this.unsigned)};Ge.shr=Ge.shiftRight;Ge.shiftRightUnsigned=function(t){if(Qa(t)&&(t=t.toInt()),t&=63,t===0)return this;var n=this.high;if(t<32){var r=this.low;return En(r>>>t|n<<32-t,n>>>t,this.unsigned)}else return t===32?En(n,0,this.unsigned):En(n>>>t-32,0,this.unsigned)};Ge.shru=Ge.shiftRightUnsigned;Ge.shr_u=Ge.shiftRightUnsigned;Ge.toSigned=function(){return this.unsigned?En(this.low,this.high,!1):this};Ge.toUnsigned=function(){return this.unsigned?this:En(this.low,this.high,!0)};Ge.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()};Ge.toBytesLE=function(){var t=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]};Ge.toBytesBE=function(){var t=this.high,n=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};Tn.fromBytes=function(t,n,r){return r?Tn.fromBytesLE(t,n):Tn.fromBytesBE(t,n)};Tn.fromBytesLE=function(t,n){return new Tn(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,n)};Tn.fromBytesBE=function(t,n){return new Tn(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],n)};var zD=Xme(OD),Zme=Yde({__proto__:null,default:zD},[OD]),Qme=zD||Zme;function qb(e){return Qme.fromString(e,!0,16)}qb("c3a5c85c97cb3127");qb("b492b66fbe98f273");qb("9ae16a3b2f90404f");function eve(e,t){return e instanceof Float32Array&&t==="float32"||e instanceof Int32Array&&t==="int32"||e instanceof Uint8Array&&t==="bool"}function $D(e,t){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=dh(e)),Ia().getBool("DEBUG")&&Hfe(e,t),eve(e,t))return e;if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool"){for(var n=new Uint8Array(e.length),r=0;r<n.length;++r)Math.round(e[r])!==0&&(n[r]=1);return n}else throw new Error("Unknown data type ".concat(t))}function Hv(){return Ia().platform.now()}function tve(e,t){return t===void 0&&(t="utf-8"),t=t||"utf-8",Ia().platform.encode(e,t)}function oD(e,t){return t===void 0&&(t="utf-8"),t=t||"utf-8",Ia().platform.decode(e,t)}function Ro(e){return Ia().platform.isTypedArray!=null?Ia().platform.isTypedArray(e):Kme(e)}function dh(e,t,n){var r,a;if(t===void 0&&(t=[]),n===void 0&&(n=!1),t==null&&(t=[]),typeof e=="boolean"||typeof e=="number"||typeof e=="string"||Wb(e)||e==null||Ro(e)&&n)t.push(e);else if(Array.isArray(e)||Ro(e))for(var i=0;i<e.length;++i)dh(e[i],t,n);else{var o=-1;try{for(var s=Tr(Object.keys(e)),u=s.next();!u.done;u=s.next()){var l=u.value;/^([1-9]+[0-9]*|0)$/.test(l)&&(o=Math.max(o,Number(l)))}}catch(c){r={error:c}}finally{try{u&&!u.done&&(a=s.return)&&a.call(s)}finally{if(r)throw r.error}}for(var i=0;i<=o;i++)dh(e[i],t,n)}return t}var nve=function(){function e(t,n){this.backendTimer=t,this.logger=n,n==null&&(this.logger=new ave)}return e.prototype.profileKernel=function(t,n,r){var a,i,o,s=function(){o=r()},u,l=Hv();if(this.backendTimer.timerAvailable())u=this.backendTimer.time(s);else{s();try{for(var c=Tr(o),p=c.next();!p.done;p=c.next()){var d=p.value;d.dataSync()}}catch(v){a={error:v}}finally{try{p&&!p.done&&(i=c.return)&&i.call(c)}finally{if(a)throw a.error}}u=Promise.resolve({kernelMs:Hv()-l})}if(Ia().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var f=function(v){var g=o[v];g.data().then(function(y){rve(y,g.dtype,t)})},h=0;h<o.length;h++)f(h);var m={kernelName:t,outputs:o,inputs:n,timeMs:u.then(function(v){return v.kernelMs}),extraInfo:u.then(function(v){return v.getExtraProfileInfo!=null?v.getExtraProfileInfo():""})};return m},e.prototype.logKernelProfile=function(t){var n=this,r=t.kernelName,a=t.outputs,i=t.timeMs,o=t.inputs,s=t.extraInfo;a.forEach(function(u){Promise.all([u.data(),i,s]).then(function(l){n.logger.logKernelProfile(r,u,l[0],l[1],o,l[2])})})},e}();function rve(e,t,n){if(t!=="float32")return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}return!1}var ave=function(){function e(){}return e.prototype.logKernelProfile=function(t,n,r,a,i,o){var s=typeof a=="number"?Vv("".concat(a,"ms"),9):a.error,u=Vv(t,25),l=n.rank,c=n.size,p=Vv(n.shape.toString(),14),d="";for(var f in i){var h=i[f];if(h!=null){var m=h.shape||n.shape,v=m.length;d+="".concat(f,": ").concat(v,"D ").concat(v>0?m:""," ")}}console.log("%c".concat(u,"	%c").concat(s,"	%c").concat(l,"D ").concat(p,"	%c").concat(c,"	%c").concat(d,"	%c").concat(o),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},e}();function ive(e,t,n){for(var r={},a={},i=0;i<t.length;i++)r[t[i].id]=!0;for(var i=0;i<e.length;i++){var o=e[i],s=o.inputs;for(var u in s){for(var l=s[u],c=!1,p=0;p<t.length;p++)if(r[l.id]){o.outputs.forEach(function(w){return r[w.id]=!0}),c=!0,a[o.id]=!0;break}if(c)break}}var d={};d[n.id]=!0;for(var f={},i=e.length-1;i>=0;i--)for(var o=e[i],s=o.inputs,p=0;p<o.outputs.length;p++)if(d[o.outputs[p].id]){for(var u in s)d[s[u].id]=!0,f[o.id]=!0;break}for(var h=[],i=0;i<e.length;i++){var o=e[i];if(a[o.id]&&f[o.id]){var m={};for(var u in o.inputs){var v=o.inputs[u];r[v.id]&&(m[u]=v)}var g=Object.assign({},o);g.inputs=m,g.outputs=o.outputs,h.push(g)}}return h}function ove(e,t,n,r){for(var a=function(o){var s=t[o],u=[];if(s.outputs.forEach(function(d){var f=e[d.id];f!=null?u.push(f):u.push(null)}),s.gradient==null)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(s.kernelName,"."));var l=s.gradient(u),c=function(d){if(!(d in l))throw new Error("Cannot backprop through input ".concat(d,". ")+"Available gradients found: ".concat(Object.keys(l),"."));var f=n(function(){return l[d]()});if(f.dtype!=="float32")throw new Error("Error in gradient for op ".concat(s.kernelName,". The gradient of input ")+"".concat(d," must have 'float32' dtype, but has '").concat(f.dtype,"'"));var h=s.inputs[d];if(!Yl(f.shape,h.shape))throw new Error("Error in gradient for op ".concat(s.kernelName,". The gradient of input ")+"'".concat(d,"' has shape '").concat(f.shape,"', which does not match ")+"the shape of the input '".concat(h.shape,"'"));if(e[h.id]==null)e[h.id]=f;else{var m=e[h.id];e[h.id]=r(m,f),m.dispose()}};for(var p in s.inputs)c(p)},i=t.length-1;i>=0;i--)a(i)}var sD=20,ah=3,ub=7;function sve(e,t,n,r){var a=$b(t),i=uve(e,t,n,a),o=t.length,s=Wv(e,t,n,a,i),u=["Tensor"];return r&&(u.push("  dtype: ".concat(n)),u.push("  rank: ".concat(o)),u.push("  shape: [".concat(t,"]")),u.push("  values:")),u.push(s.map(function(l){return"    "+l}).join(`
`)),u.join(`
`)}function uve(e,t,n,r){var a=Fr(t),i=r[r.length-1],o=new Array(i).fill(0),s=t.length,u=n==="complex64"?uh(e):e;if(s>1)for(var l=0;l<a/i;l++)for(var c=l*i,p=0;p<i;p++)o[p]=Math.max(o[p],sh(u[c+p],0,n).length);return o}function sh(e,t,n){var r;return Array.isArray(e)?r="".concat(parseFloat(e[0].toFixed(ub))," + ")+"".concat(parseFloat(e[1].toFixed(ub)),"j"):zb(e)?r="'".concat(e,"'"):n==="bool"?r=VD(e):r=parseFloat(e.toFixed(ub)).toString(),Vv(r,t)}function VD(e){return e===0?"false":"true"}function Wv(e,t,n,r,a,i){i===void 0&&(i=!0);var o=n==="complex64"?2:1,s=t[0],u=t.length;if(u===0){if(n==="complex64"){var l=uh(e);return[sh(l[0],0,n)]}return n==="bool"?[VD(e[0])]:[e[0].toString()]}if(u===1){if(s>sD){var c=ah*o,p=Array.from(e.slice(0,c)),d=Array.from(e.slice((s-ah)*o,s*o));return n==="complex64"&&(p=uh(p),d=uh(d)),["["+p.map(function(N,E){return sh(N,a[E],n)}).join(", ")+", ..., "+d.map(function(N,E){return sh(N,a[s-ah+E],n)}).join(", ")+"]"]}var f=n==="complex64"?uh(e):Array.from(e);return["["+f.map(function(N,E){return sh(N,a[E],n)}).join(", ")+"]"]}var h=t.slice(1),m=r.slice(1),v=r[0]*o,g=[];if(s>sD){for(var y=0;y<ah;y++){var w=y*v,b=w+v;g.push.apply(g,jt([],ke(Wv(e.slice(w,b),h,n,m,a,!1)),!1))}g.push("...");for(var y=s-ah;y<s;y++){var w=y*v,b=w+v;g.push.apply(g,jt([],ke(Wv(e.slice(w,b),h,n,m,a,y===s-1)),!1))}}else for(var y=0;y<s;y++){var w=y*v,b=w+v;g.push.apply(g,jt([],ke(Wv(e.slice(w,b),h,n,m,a,y===s-1)),!1))}var x=u===2?",":"";g[0]="["+(s>0?g[0]+x:"");for(var y=1;y<g.length-1;y++)g[y]=" "+g[y]+x;for(var k=`,
`,y=2;y<u;y++)k+=`
`;return g[g.length-1]=" "+g[g.length-1]+"]"+(i?"":k),g}function uh(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var Nb=function(){function e(t,n,r){var a=this;if(this.dtype=n,this.shape=t.slice(),this.size=Fr(t),r!=null){var i=r.length;q(i===this.size,function(){return"Length of values '".concat(i,"' does not match the size ")+"inferred by the shape '".concat(a.size,"'.")})}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||ND(n,this.size),this.strides=$b(t)}return e.prototype.set=function(t){for(var n=this,r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];r.length===0&&(r=[0]),q(r.length===this.rank,function(){return"The number of provided coordinates (".concat(r.length,") must ")+"match the rank (".concat(n.rank,")")});var i=this.locToIndex(r);this.values[i]=t},e.prototype.get=function(){for(var t,n,r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];r.length===0&&(r=[0]);var i=0;try{for(var o=Tr(r),s=o.next();!s.done;s=o.next()){var u=s.value;if(u<0||u>=this.shape[i]){var l="Requested out of range element at ".concat(r,". ")+"  Buffer shape=".concat(this.shape);throw new Error(l)}i++}}catch(d){t={error:d}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}for(var c=r[r.length-1],p=0;p<r.length-1;++p)c+=this.strides[p]*r[p];return this.values[c]},e.prototype.locToIndex=function(t){if(this.rank===0)return 0;if(this.rank===1)return t[0];for(var n=t[t.length-1],r=0;r<t.length-1;++r)n+=this.strides[r]*t[r];return n},e.prototype.indexToLoc=function(t){if(this.rank===0)return[];if(this.rank===1)return[t];for(var n=new Array(this.shape.length),r=0;r<n.length-1;++r)n[r]=Math.floor(t/this.strides[r]),t-=n[r]*this.strides[r];return n[n.length-1]=t,n},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!1,configurable:!0}),e.prototype.toTensor=function(){return Fo().makeTensor(this.values,this.shape,this.dtype)},e}(),Fo=null,ih=null;function lve(e){Fo=e}var Ya=function(){function e(t,n,r,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=Fr(t),this.strides=$b(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!1,configurable:!0}),e.prototype.buffer=function(){return Vt(this,void 0,void 0,function(){var t;return $t(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return t=n.sent(),[2,ih.buffer(this.shape,this.dtype,t)]}})})},e.prototype.bufferSync=function(){return ih.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return Vt(this,void 0,void 0,function(){var t;return $t(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return t=n.sent(),[2,jC(this.shape,t,this.dtype==="complex64")]}})})},e.prototype.arraySync=function(){return jC(this.shape,this.dataSync(),this.dtype==="complex64")},e.prototype.data=function(){return Vt(this,void 0,void 0,function(){var t,n;return $t(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),t=Fo().read(this.dataId),this.dtype!=="string"?[3,2]:[4,t];case 1:n=r.sent();try{return[2,n.map(function(a){return oD(a)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,t]}})})},e.prototype.dataToGPU=function(t){return this.throwIfDisposed(),Fo().readToGPU(this.dataId,t)},e.prototype.dataSync=function(){this.throwIfDisposed();var t=Fo().readSync(this.dataId);if(this.dtype==="string")try{return t.map(function(n){return oD(n)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t},e.prototype.bytes=function(){return Vt(this,void 0,void 0,function(){var t;return $t(this,function(n){switch(n.label){case 0:return this.throwIfDisposed(),[4,Fo().read(this.dataId)];case 1:return t=n.sent(),this.dtype==="string"?[2,t]:[2,new Uint8Array(t.buffer)]}})})},e.prototype.dispose=function(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Fo().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!1,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.print=function(t){return t===void 0&&(t=!1),ih.print(this,t)},e.prototype.clone=function(){return this.throwIfDisposed(),ih.clone(this)},e.prototype.toString=function(t){t===void 0&&(t=!1);var n=this.dataSync();return sve(n,this.shape,this.dtype,t)},e.prototype.cast=function(t){return this.throwIfDisposed(),ih.cast(this,t)},e.prototype.variable=function(t,n,r){return t===void 0&&(t=!0),this.throwIfDisposed(),Fo().makeVariable(this,t,n,r)},e}();Object.defineProperty(Ya,Symbol.hasInstance,{value:function(e){return!!e&&e.data!=null&&e.dataSync!=null&&e.throwIfDisposed!=null}});function WD(){return Ub("Tensor",function(){return Ya})}WD();var Tb=function(e){wD(t,e);function t(n,r,a,i){var o=e.call(this,n.shape,n.dtype,n.dataId,i)||this;return o.trainable=r,o.name=a,o}return t.prototype.assign=function(n){if(n.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(n.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!Yl(n.shape,this.shape))throw new Error("shape of the new value (".concat(n.shape,") and ")+"previous value (".concat(this.shape,") must match"));Fo().disposeTensor(this),this.dataId=n.dataId,Fo().incRef(this,null)},t.prototype.dispose=function(){Fo().disposeVariable(this),this.isDisposedInternal=!0},t}(Ya);Object.defineProperty(Tb,Symbol.hasInstance,{value:function(e){return e instanceof Ya&&e.assign!=null&&e.assign instanceof Function}});var uD;(function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"})(uD||(uD={}));var Eb;(function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"})(Eb||(Eb={}));var Ib;(function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"})(Ib||(Ib={}));var Cb;(function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"})(Cb||(Cb={}));var Db;(function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"})(Db||(Db={}));var cve={float32:Cb,int32:Eb,bool:Ib,complex64:Db};function pve(e,t){if(e==="string"||t==="string"){if(e==="string"&&t==="string")return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return cve[e][t]}function UD(e){return e!=null&&typeof e=="object"&&"texture"in e&&e.texture instanceof WebGLTexture}function GD(e){return typeof GPUBuffer<"u"&&e!=null&&typeof e=="object"&&"buffer"in e&&e.buffer instanceof GPUBuffer}function er(e,t){if(e.dtype===t.dtype)return[e,t];var n=pve(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function dve(e,t){q(e.dtype===t.dtype,function(){return"The dtypes of the first(".concat(e.dtype,") and")+" second(".concat(t.dtype,") input must match")})}function qD(e){var t=[],n=new Set;return HD(e,t,n),t}function HD(e,t,n){if(e!=null){if(e instanceof Ya){t.push(e);return}if(fve(e)){var r=e;for(var a in r){var i=r[a];n.has(i)||(n.add(i),HD(i,t,n))}}}}function fve(e){return Array.isArray(e)||typeof e=="object"}function lb(e){return e.kernelName!=null}var lD=function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(function(t){return t.name})))}}}return e.prototype.dispose=function(){for(var t in this.registeredVariables)this.registeredVariables[t].dispose()},e}(),Hb=function(){function e(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new lD}return e.prototype.ready=function(){return Vt(this,void 0,void 0,function(){var t,n,r,a;return $t(this,function(i){switch(i.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];t=this.getSortedBackends(),n=0,i.label=1;case 1:return n<t.length?(r=t[n],[4,this.initializeBackend(r).success]):[3,5];case 2:return a=i.sent(),a?[4,this.setBackend(r)]:[3,4];case 3:return i.sent(),[2];case 4:return n++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(e.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var t=this.initializeBackendsAndReturnBest(),n=t.name,r=t.asyncInit;if(r)throw new Error("The highest priority backend '".concat(n,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(n)}return this.backendInstance},enumerable:!1,configurable:!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(t){if(!(t in this.registry))if(t in this.registryFactory){var n=this.initializeBackend(t).asyncInit;if(n)return null}else return null;return this.registry[t]},e.prototype.findBackendFactory=function(t){return t in this.registryFactory?this.registryFactory[t].factory:null},e.prototype.registerBackend=function(t,n,r){return r===void 0&&(r=1),t in this.registryFactory?(rh("".concat(t," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[t]={factory:n,priority:r},!0)},e.prototype.setBackend=function(t){return Vt(this,void 0,void 0,function(){var n,r,a,i,o;return $t(this,function(s){switch(s.label){case 0:if(this.registryFactory[t]==null)throw new Error("Backend name '".concat(t,"' not found in registry"));return this.backendName=t,this.registry[t]!=null?[3,4]:(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,a=n.asyncInit,a?[4,r]:[3,2]);case 1:return o=s.sent(),[3,3];case 2:o=r,s.label=3;case 3:if(i=o,!i)return[2,!1];s.label=4;case 4:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new nve(this.backendInstance),[2,!0]}})})},e.prototype.setupRegisteredKernels=function(){var t=this,n=eD(this.backendName);n.forEach(function(r){r.setupFunc!=null&&r.setupFunc(t.backendInstance)})},e.prototype.disposeRegisteredKernels=function(t){var n=this,r=eD(t);r.forEach(function(a){a.disposeFunc!=null&&a.disposeFunc(n.registry[t])})},e.prototype.initializeBackend=function(t){var n=this,r=this.registryFactory[t];if(r==null)throw new Error("Cannot initialize backend ".concat(t,", no registration found."));try{var a=r.factory();if(a&&!(a instanceof Wfe)&&typeof a.then=="function"){var i=++this.pendingBackendInitId,o=a.then(function(s){return i<n.pendingBackendInitId?!1:(n.registry[t]=s,n.pendingBackendInit=null,!0)}).catch(function(s){return i<n.pendingBackendInitId||(n.pendingBackendInit=null,rh("Initialization of backend ".concat(t," failed")),rh(s.stack||s.message)),!1});return this.pendingBackendInit=o,{success:o,asyncInit:!0}}else return this.registry[t]=a,{success:!0,asyncInit:!1}}catch(s){return rh("Initialization of backend ".concat(t," failed")),rh(s.stack||s.message),{success:!1,asyncInit:!1}}},e.prototype.removeBackend=function(t){if(!(t in this.registryFactory))throw new Error("".concat(t," backend not found in registry"));this.backendName===t&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var t=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(n,r){return t.registryFactory[r].priority-t.registryFactory[n].priority})},e.prototype.initializeBackendsAndReturnBest=function(){for(var t=this.getSortedBackends(),n=0;n<t.length;n++){var r=t[n],a=this.initializeBackend(r),i=a.success,o=a.asyncInit;if(o||i)return{name:r,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")},e.prototype.moveData=function(t,n){var r=this.state.tensorInfo.get(n),a=r.backend,i=this.readSync(n),o=a.refCount(n);a.disposeData(n,!0),r.backend=t,t.move(n,i,r.shape,r.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},e.prototype.tidy=function(t,n){var r=this,a=null;if(n==null){if(typeof t!="function")throw new Error("Please provide a function to tidy()");n=t}else{if(typeof t!="string"&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=t}var i;return this.scopedRun(function(){return r.startScope(a)},function(){return r.endScope(i)},function(){return i=n(),i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),i})},e.prototype.scopedRun=function(t,n,r){t();try{var a=r();return n(),a}catch(i){throw n(),i}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(t){var n=ee.runKernel(AD,{x:t}),r={x:t},a=function(o){return{x:function(){var s="float32",u={x:o},l={dtype:s};return ee.runKernel(_D,u,l)}}},i=[];return this.addTapeNode(this.state.activeScope.name,r,[n],a,i,{}),n},e.prototype.runKernel=function(t,n,r){this.backendName==null&&this.backend;var a=ZC(t,this.backendName)!=null;if(!a)throw new Error("Kernel '".concat(t,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:t,inputs:n,attrs:r})},e.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},e.prototype.checkKernelForMemLeak=function(t,n,r){var a=this.backend.numDataIds(),i=0;r.forEach(function(u){i+=u.dtype==="complex64"?3:1});var o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=a-n-i-o;if(s>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(s," data ids) after running '").concat(t,"'"))},e.prototype.runKernelFunc=function(t){var n=this,r,a=[],i=this.isTapeOn(),o=this.state.numBytes,s=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var u;this.backendName==null&&this.backend;var l,c=lb(t)?t.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(lb(t)){var p=t.kernelName,d=t.inputs,f=t.attrs;this.backendName==null&&this.backend;var h=ZC(p,this.backendName);q(h!=null,function(){return"Cannot find registered kernel '".concat(p,"' for backend '").concat(n.backendName,"'")}),u=function(){var x=n.backend.numDataIds();l=h.kernelFunc({inputs:d,attrs:f,backend:n.backend});var k=Array.isArray(l)?l:[l];n.shouldCheckForMemLeaks()&&n.checkKernelForMemLeak(p,x,k);var N=k.map(function(C){return C.rank!=null?C:n.makeTensorFromTensorInfo(C)});if(i){var E=n.getTensorsForGradient(p,d,N);a=n.saveTensorsForBackwardMode(E)}return N}}else{var m=t.forwardFunc,v=function(x){i&&(a=x.map(function(k){return n.keep(n.clone(k))}))};u=function(){var x=n.backend.numDataIds();l=n.tidy(function(){return m(n.backend,v)});var k=Array.isArray(l)?l:[l];return n.shouldCheckForMemLeaks()&&n.checkKernelForMemLeak(c,x,k),k}}var g=t.inputs,y=t.attrs,w=lb(t)?null:t.backwardsFunc,b;return this.scopedRun(function(){return n.state.kernelDepth++},function(){return n.state.kernelDepth--},function(){!n.ENV.getBool("DEBUG")&&!n.state.profiling?r=u():(b=n.profiler.profileKernel(c,g,function(){return u()}),n.ENV.getBool("DEBUG")&&n.profiler.logKernelProfile(b),r=b.outputs)}),i&&this.addTapeNode(c,g,r,w,a,y),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-o,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-s,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(g).map(function(x){return g[x]!=null?g[x].shape:null}),outputShapes:r.map(function(x){return x.shape}),kernelTimeMs:b.timeMs,extraInfo:b.extraInfo}),Array.isArray(l)?r:r[0]},e.prototype.saveTensorsForBackwardMode=function(t){var n=this,r=t.map(function(a){return n.keep(n.clone(a))});return r},e.prototype.getTensorsForGradient=function(t,n,r){var a=QC(t);if(a!=null){var i=a.inputsToSave||[],o=a.outputsToSave||[],s=void 0;a.saveAllInputs?(q(Array.isArray(n),function(){return"saveAllInputs is true, expected inputs to be an array."}),s=Object.keys(n).map(function(l){return n[l]})):s=i.map(function(l){return n[l]});var u=r.filter(function(l,c){return o[c]});return s.concat(u)}return[]},e.prototype.makeTensor=function(t,n,r,a){if(t==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",a=a||this.backend;var i=t;r==="string"&&zb(t[0])&&(i=t.map(function(c){return tve(c)}));var o=a.write(i,n,r),s=new Ya(n,r,o,this.nextTensorId());if(this.trackTensor(s,a),r==="string"){var u=this.state.tensorInfo.get(o),l=Kfe(i);this.state.numBytes+=l-u.bytes,u.bytes=l}return s},e.prototype.makeTensorFromDataId=function(t,n,r,a){r=r||"float32";var i={dataId:t,shape:n,dtype:r};return this.makeTensorFromTensorInfo(i,a)},e.prototype.makeTensorFromTensorInfo=function(t,n){var r=t.dataId,a=t.shape,i=t.dtype,o=new Ya(a,i,r,this.nextTensorId());return this.trackTensor(o,n),o},e.prototype.makeVariable=function(t,n,r,a){n===void 0&&(n=!0),r=r||this.nextVariableId().toString(),a!=null&&a!==t.dtype&&(t=t.cast(a));var i=new Tb(t,n,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error("Variable with name ".concat(i.name," was already registered"));return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i},e.prototype.trackTensor=function(t,n){this.state.numTensors++,t.dtype==="string"&&this.state.numStringTensors++;var r=0;t.dtype!=="complex64"&&t.dtype!=="string"&&(r=t.size*Sb(t.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(t.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(t.dataId,{backend:n||this.backend,dtype:t.dtype,shape:t.shape,bytes:r})),t instanceof Tb||this.track(t)},e.prototype.incRef=function(t,n){this.trackTensor(t,n),this.backend.incRef(t.dataId)},e.prototype.removeDataId=function(t,n){this.state.tensorInfo.has(t)&&this.state.tensorInfo.get(t).backend===n&&(this.state.tensorInfo.delete(t),this.state.numDataBuffers--)},e.prototype.disposeTensor=function(t){if(this.state.tensorInfo.has(t.dataId)){var n=this.state.tensorInfo.get(t.dataId);if(this.state.numTensors--,t.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),t.dtype!=="complex64"&&t.dtype!=="string"){var r=t.size*Sb(t.dtype);this.state.numBytes-=r}n.backend.disposeData(t.dataId)&&this.removeDataId(t.dataId,n.backend)}},e.prototype.disposeVariables=function(){for(var t in this.state.registeredVariables){var n=this.state.registeredVariables[t];this.disposeVariable(n)}},e.prototype.disposeVariable=function(t){this.disposeTensor(t),this.state.registeredVariables[t.name]!=null&&delete this.state.registeredVariables[t.name]},e.prototype.memory=function(){var t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,t.reasons==null&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t},e.prototype.profile=function(t){return Vt(this,void 0,void 0,function(){var n,r,a,i,o,s,u,l,c,p,d;return $t(this,function(f){switch(f.label){case 0:return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],a=this.state.activeProfile,[4,t()];case 1:a.result=f.sent(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,jt([],ke(this.state.activeProfile.kernels.map(function(h){return h.totalBytesSnapshot})),!1)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,f.label=2;case 2:f.trys.push([2,8,9,10]),i=Tr(this.state.activeProfile.kernels),o=i.next(),f.label=3;case 3:return o.done?[3,7]:(s=o.value,u=s,[4,s.kernelTimeMs]);case 4:return u.kernelTimeMs=f.sent(),l=s,[4,s.extraInfo];case 5:l.extraInfo=f.sent(),f.label=6;case 6:return o=i.next(),[3,3];case 7:return[3,10];case 8:return c=f.sent(),p={error:c},[3,10];case 9:try{o&&!o.done&&(d=i.return)&&d.call(i)}finally{if(p)throw p.error}return[7];case 10:return[2,this.state.activeProfile]}})})},e.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},e.prototype.addTapeNode=function(t,n,r,a,i,o){var s=this,u={id:this.state.nextTapeNodeId++,kernelName:t,inputs:n,outputs:r,saved:i},l=QC(t);l!=null&&(a=l.gradFunc),a!=null&&(u.gradient=function(c){return c=c.map(function(p,d){if(p==null){var f=r[d],h=Vb(f.size,f.dtype);return s.makeTensor(h,f.shape,f.dtype)}return p}),a(c.length>1?c:c[0],i,o)}),this.state.activeTape.push(u)},e.prototype.keep=function(t){return t.kept=!0,t},e.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(t){var n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(n.name=t),this.state.scopeStack.push(n),this.state.activeScope=n},e.prototype.endScope=function(t){for(var n=this,r=qD(t),a=new Set(r.map(function(u){return u.id})),i=0;i<this.state.activeScope.track.length;i++){var o=this.state.activeScope.track[i];!o.kept&&!a.has(o.id)&&o.dispose()}var s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(function(u){!u.kept&&u.scopeId===s.id&&n.track(u)})},e.prototype.gradients=function(t,n,r,a){var i=this;if(a===void 0&&(a=!1),q(n.length>0,function(){return"gradients() received an empty list of xs."}),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '".concat(r.dtype,"'"));var o=this.scopedRun(function(){return i.startTape()},function(){return i.endTape()},function(){return i.tidy("forward",t)});q(o instanceof Ya,function(){return"The result y returned by f() must be a tensor."});var s=ive(this.state.activeTape,n,o);if(!a&&s.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var u={};u[o.id]=r??hve(o.shape),ove(u,s,function(c){return i.tidy(c)},vve);var l=n.map(function(c){return u[c.id]});return i.state.gradientDepth===0&&(i.state.activeTape.forEach(function(c){var p,d;try{for(var f=Tr(c.saved),h=f.next();!h.done;h=f.next()){var m=h.value;m.dispose()}}catch(v){p={error:v}}finally{try{h&&!h.done&&(d=f.return)&&d.call(f)}finally{if(p)throw p.error}}}),i.state.activeTape=null),{value:o,grads:l}})},e.prototype.customGrad=function(t){var n=this;return q(HC(t),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];q(r.every(function(l){return l instanceof Ya}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var i,o={};r.forEach(function(l,c){o[c]=l});var s=function(l,c){return i=t.apply(void 0,jt([],ke(jt(jt([],ke(r),!1),[c],!1)),!1)),q(i.value instanceof Ya,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),q(HC(i.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),i.value},u=function(l,c){var p=i.gradFunc(l,c),d=Array.isArray(p)?p:[p];q(d.length===r.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),q(d.every(function(h){return h instanceof Ya}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var f={};return d.forEach(function(h,m){f[m]=function(){return h}}),f};return n.runKernelFunc({forwardFunc:s,backwardsFunc:u,inputs:o})}},e.prototype.readSync=function(t){var n=this.state.tensorInfo.get(t);return n.backend.readSync(t)},e.prototype.read=function(t){var n=this.state.tensorInfo.get(t);return n.backend.read(t)},e.prototype.readToGPU=function(t,n){var r=this.state.tensorInfo.get(t);return r.backend.readToGPU(t,n)},e.prototype.time=function(t){return Vt(this,void 0,void 0,function(){var n,r;return $t(this,function(a){switch(a.label){case 0:return n=Hv(),[4,this.backend.time(t)];case 1:return r=a.sent(),r.wallMs=Hv()-n,[2,r]}})})},e.prototype.track=function(t){return this.state.activeScope!=null&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t},Object.defineProperty(e.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new lD;for(var t in this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e}();Hb.nextTensorId=0;Hb.nextVariableId=0;function hve(e){var t=ED(Fr(e),"float32");return ee.makeTensor(t,e,"float32")}function mve(){var e=CD();if(e._tfengine==null){var t=new Jfe(e);e._tfengine=new Hb(t)}return the(e._tfengine.ENV),lve(function(){return e._tfengine}),e._tfengine}var ee=mve();function vve(e,t){var n={a:e,b:t};return ee.runKernel(DD,n)}function zu(e,t){var n=e;if(Ro(e))return t==="string"?[]:[e.length];if(UD(e)){var r=e.channels||"RGBA";return[e.height,e.width*r.length]}else if(GD(e))return[e.buffer.size/(t==null?4:Sb(t))];if(!Array.isArray(e))return[];for(var a=[];Array.isArray(n)||Ro(n)&&t!=="string";)a.push(n.length),n=n[0];return Array.isArray(e)&&Ia().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&jD(e,a,[]),a}function jD(e,t,n){if(n=n||[],!Array.isArray(e)&&!Ro(e)){q(t.length===0,function(){return"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements")});return}q(t.length>0,function(){return"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements")}),q(e.length===t[0],function(){return"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements")});for(var r=t.slice(1),a=0;a<e.length;++a)jD(e[a],r,n.concat(a))}function cD(e,t,n,r){if(e!=="string_or_numeric"){if(e==null)throw new Error("Expected dtype cannot be null.");if(e!=="numeric"&&e!==t||e==="numeric"&&t==="string")throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function P(e,t,n,r){if(r===void 0&&(r="numeric"),e instanceof WD())return cD(r,e.dtype,t,n),e;var a=r0(e);if(a!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),cD(r,a,t,n),e==null||!Ro(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string"){var i=e==null?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(i,"'"))}var o=zu(e,a);!Ro(e)&&!Array.isArray(e)&&(e=[e]);var s=!0,u=a!=="string"?$D(e,a):dh(e,[],s);return ee.makeTensor(u,o,a)}function jv(e,t,n,r){if(r===void 0&&(r="numeric"),!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");var a=e;return a.map(function(i,o){return P(i,"".concat(t,"[").concat(o,"]"),n,r)})}var KD="__op";function K(e){var t=Object.keys(e);if(t.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+KD;var a=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];ee.startScope(n);try{var s=r.apply(void 0,jt([],ke(i),!1));return Wb(s)&&console.error("Cannot return a Promise inside of tidy."),ee.endScope(s),s}catch(u){throw ee.endScope(null),u}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}function gve(e){var t=P(e,"x","abs");if(t.dtype==="complex64"){var n={x:t};return ee.runKernel(Ehe,n)}else{var n={x:t};return ee.runKernel(rhe,n)}}var Ji=K({abs_:gve});function yve(e){var t=P(e,"x","acos"),n={x:t};return ee.runKernel(ahe,n)}var bve=K({acos_:yve});function wve(e){var t=P(e,"x","acosh"),n={x:t};return ee.runKernel(ihe,n)}var xve=K({acosh_:wve});function Sve(e,t){var n,r=P(e,"a","add"),a=P(t,"b","add");n=ke(er(r,a),2),r=n[0],a=n[1];var i={a:r,b:a};return ee.runKernel(DD,i)}var Rr=K({add_:Sve});function kve(e){q(Array.isArray(e),function(){return"The argument passed to tf.addN() must be a list of tensors"}),q(e.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+"".concat(e.length)});var t=e.map(function(a,i){return P(a,"tensors".concat(i),"addN")}),n=t[0];t.forEach(function(a){if(a.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(function(a){if(!Yl(a.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=t;return ee.runKernel(ohe,r)}var Nve=K({addN_:kve});function Tve(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=P(e,"x","all","bool"),a={x:r},i={axis:t,keepDims:n};return ee.runKernel(she,a,i)}var Eve=K({all_:Tve});function Ive(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=P(e,"x","any","bool"),a={x:r},i={axis:t,keepDims:n};return ee.runKernel(uhe,a,i)}var Cve=K({any_:Ive});function Dve(e,t){t===void 0&&(t=0);var n=P(e,"x","argMax"),r={x:n},a={axis:t};return ee.runKernel(lhe,r,a)}var _ve=K({argMax_:Dve});function Ave(e,t){t===void 0&&(t=0);var n=P(e,"x","argMin"),r={x:n},a={axis:t};return ee.runKernel(che,r,a)}var Fve=K({argMin_:Ave});function Rve(e){var t=P(e,"x","asin"),n={x:t};return ee.runKernel(phe,n)}var Ove=K({asin_:Rve});function Mve(e){var t=P(e,"x","asinh"),n={x:t};return ee.runKernel(dhe,n)}var Pve=K({asinh_:Mve});function Bve(e){var t=P(e,"x","atan"),n={x:t};return ee.runKernel(fhe,n)}var Lve=K({atan_:Bve});function zve(e,t){var n,r=P(e,"a","atan2"),a=P(t,"b","atan2");n=ke(er(r,a),2),r=n[0],a=n[1];var i={a:r,b:a};return ee.runKernel(mhe,i)}var $ve=K({atan2_:zve});function Vve(e){var t=P(e,"x","atanh"),n={x:t};return ee.runKernel(hhe,n)}var Wve=K({atanh_:Vve});function Uve(e,t){var n=P(e,"x","cast");if(!jfe(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if(t==="string"&&n.dtype!=="string"||t!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");var r={x:n},a={dtype:t};return ee.runKernel(_D,r,a)}var Er=K({cast_:Uve});function Gve(e,t,n,r,a,i,o){o===void 0&&(o="channelsLast");var s=ke(fh(t),2),u=s[0],l=s[1],c;if(o==="channelsLast")c=[u,l,e[3],e[3]];else if(o==="channelsFirst")c=[u,l,e[1],e[1]];else throw new Error("Unknown dataFormat ".concat(o));return jb(e,c,n,r,a,i,!1,o)}function jb(e,t,n,r,a,i,o,s){var u,l;o===void 0&&(o=!1),s===void 0&&(s="channelsLast");var c=ke([-1,-1,-1,-1],4),p=c[0],d=c[1],f=c[2],h=c[3];if(s==="channelsLast")u=ke(e,4),p=u[0],d=u[1],f=u[2],h=u[3];else if(s==="channelsFirst")l=ke(e,4),p=l[0],h=l[1],d=l[2],f=l[3];else throw new Error("Unknown dataFormat ".concat(s));var m=ke(t,4),v=m[0],g=m[1],y=m[3],w=ke(fh(n),2),b=w[0],x=w[1],k=ke(fh(r),2),N=k[0],E=k[1],C=_b(v,N),R=_b(g,E),A=jve(a,d,f,b,x,C,R,i,s),M=A.padInfo,$=A.outHeight,z=A.outWidth,L=o?y*h:y,B;return s==="channelsFirst"?B=[p,L,$,z]:s==="channelsLast"&&(B=[p,$,z,L]),{batchSize:p,dataFormat:s,inHeight:d,inWidth:f,inChannels:h,outHeight:$,outWidth:z,outChannels:L,padInfo:M,strideHeight:b,strideWidth:x,filterHeight:v,filterWidth:g,effectiveFilterHeight:C,effectiveFilterWidth:R,dilationHeight:N,dilationWidth:E,inShape:e,outShape:B,filterShape:t}}function qve(e,t,n,r,a){r==null&&(r=Hve(e,t,n));var i=e[0],o=e[1],s=Kv((i-t+2*r)/n+1,a),u=Kv((o-t+2*r)/n+1,a);return[s,u]}function Hve(e,t,n,r){r===void 0&&(r=1);var a=_b(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function fh(e){return typeof e=="number"?[e,e,e]:e.length===2?[e[0],e[1],1]:e}function _b(e,t){return t<=1?e:e+(e-1)*(t-1)}function jve(e,t,n,r,a,i,o,s,u){var l,c,p;if(typeof e=="number"){var d=e===0?"VALID":"NUMBER";l={top:e,bottom:e,left:e,right:e,type:d};var f=qve([t,n],i,r,e,s);c=f[0],p=f[1]}else if(e==="same"){c=Math.ceil(t/r),p=Math.ceil(n/a);var h=Math.max(0,(c-1)*r+i-t),m=Math.max(0,(p-1)*a+o-n),v=Math.floor(h/2),g=h-v,y=Math.floor(m/2),w=m-y;l={top:v,bottom:g,left:y,right:w,type:"SAME"}}else if(e==="valid")l={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-i+1)/r),p=Math.ceil((n-o+1)/a);else if(typeof e=="object"){var v=u==="channelsLast"?e[1][0]:e[2][0],g=u==="channelsLast"?e[1][1]:e[2][1],y=u==="channelsLast"?e[2][0]:e[3][0],w=u==="channelsLast"?e[2][1]:e[3][1],d=v===0&&g===0&&y===0&&w===0?"VALID":"EXPLICIT";l={top:v,bottom:g,left:y,right:w,type:d},c=Kv((t-i+v+g)/r+1,s),p=Kv((n-o+y+w)/a+1,s)}else throw Error("Unknown padding parameter: ".concat(e));return{padInfo:l,outHeight:c,outWidth:p}}function Kv(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function Xv(e){var t=ke(fh(e),3),n=t[0],r=t[1],a=t[2];return n===1&&r===1&&a===1}function $u(e,t){return Xv(e)||Xv(t)}function Ap(e){return fh(e).every(function(t){return t>0})}function Mo(e,t,n){if(n!=null){if(typeof t=="string")throw Error("Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."));if(typeof t=="number")q(ph(t),function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")});else if(typeof t=="object")t.forEach(function(r){r.forEach(function(a){q(ph(a),function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(a,".")})})});else throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t))}}function Kve(e,t){var n=P(e,"x","reshape","string_or_numeric"),r={x:n},a={shape:t};return ee.runKernel(tme,r,a)}var we=K({reshape_:Kve});function Xve(e,t,n,r,a){var i=P(e,"x","avgPool","float32"),o=1;q($u(n,o),function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(o,"'")});var s=i,u=!1;i.rank===3&&(u=!0,s=we(i,[1,i.shape[0],i.shape[1],i.shape[2]])),q(s.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank ".concat(s.rank,".")}),Mo("avgPool",r,a);var l={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a},p=ee.runKernel(vhe,l,c);return p=Er(p,i.dtype),u?we(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var XD=K({avgPool_:Xve});function Yve(e,t,n,r,a,i){i===void 0&&(i="NDHWC");var o=P(e,"x","avgPool3d","float32"),s=o,u=!1;o.rank===4&&(u=!0,s=we(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),q(s.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank ".concat(s.rank,".")}),q(i==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i)}),q(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,function(){return"Error in avgPool3d: Stride must be > 0, but got '".concat(n,"'")}),Mo("avgPool3d",r,a);var l={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},p=ee.runKernel(ghe,l,c);return p=Er(p,s.dtype),u?we(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var Jve=K({avgPool3d_:Yve});function Zve(e){var t=P(e,"x","clone","string_or_numeric"),n={x:t};return ee.runKernel(AD,n)}var Ep=K({clone_:Zve});function Qve(e,t){t===void 0&&(t=0),q(e.length>=1,function(){return"Pass at least one tensor to concat"});var n=jv(e,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(function(i){if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `.concat(i.dtype,". "))}),n.length===1)return Ep(n[0]);var r=n,a={axis:t};return ee.runKernel(Ihe,r,a)}var Za=K({concat_:Qve});function e0e(e,t,n,r){var a;n===void 0&&(n=!1),r===void 0&&(r=!1);var i=P(e,"a","matMul"),o=P(t,"b","matMul");a=ke(er(i,o),2),i=a[0],o=a[1];var s={a:i,b:o},u={transposeA:n,transposeB:r};return ee.runKernel(yhe,s,u)}var en=K({matMul_:e0e});function t0e(e,t){var n,r=P(e,"a","mul"),a=P(t,"b","mul");n=ke(er(r,a),2),r=n[0],a=n[1];var i={a:r,b:a};return ee.runKernel(M1e,i)}var Ft=K({mul_:t0e});function n0e(e){var t=P(e,"x","sigmoid","float32"),n={x:t};return ee.runKernel(gme,n)}var Ip=K({sigmoid_:n0e});function r0e(e,t,n){var r=P(e,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");var a={x:r},i={begin:t,size:n};return ee.runKernel(fme,a,i)}var Ln=K({slice_:r0e});function a0e(e){var t=P(e,"x","tanh","float32"),n={x:t};return ee.runKernel(Bme,n)}var Ab=K({tanh_:a0e});function i0e(e,t,n,r,a,i){var o=P(e,"forgetBias","basicLSTMCell"),s=P(t,"lstmKernel","basicLSTMCell"),u=P(n,"lstmBias","basicLSTMCell"),l=P(r,"data","basicLSTMCell"),c=P(a,"c","basicLSTMCell"),p=P(i,"h","basicLSTMCell"),d=Za([l,p],1),f=en(d,s),h=Rr(f,u),m=h.shape[0],v=h.shape[1]/4,g=[m,v],y=Ln(h,[0,0],g),w=Ln(h,[0,v],g),b=Ln(h,[0,v*2],g),x=Ln(h,[0,v*3],g),k=Rr(Ft(Ip(y),Ab(w)),Ft(c,Ip(Rr(o,b)))),N=Ft(Ab(k),Ip(x));return[k,N]}var o0e=K({basicLSTMCell_:i0e});function s0e(e,t,n){var r=P(e,"x","batchToSpaceND"),a=t.reduce(function(s,u){return s*u});q(r.rank>=1+t.length,function(){return"input rank is ".concat(r.rank," but should be > than blockShape.length ").concat(t.length)}),q(n.length===t.length,function(){return"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)}),q(r.shape[0]%a===0,function(){return"input tensor batch is ".concat(r.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(a)});var i={x:r},o={blockShape:t,crops:n};return ee.runKernel(bhe,i,o)}var YD=K({batchToSpaceND_:s0e});function u0e(e){var t;return e.rank===0||e.rank===1?t=we(e,[1,1,1,e.size]):e.rank===2?t=we(e,[1,1,e.shape[0],e.shape[1]]):e.rank===3?t=we(e,[1,e.shape[0],e.shape[1],e.shape[2]]):t=e,t}function l0e(e,t,n,r,a,i){i==null&&(i=.001);var o=P(e,"x","batchNorm"),s=P(t,"mean","batchNorm"),u=P(n,"variance","batchNorm"),l;a!=null&&(l=P(a,"scale","batchNorm"));var c;r!=null&&(c=P(r,"offset","batchNorm")),q(s.rank===u.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),q(c==null||s.rank===c.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),q(l==null||s.rank===l.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."});var p=u0e(o),d={x:p,scale:l,offset:c,mean:s,variance:u},f={varianceEpsilon:i},h=ee.runKernel(a1e,d,f);return we(h,o.shape)}var a0=K({batchNorm_:l0e});function c0e(e,t,n,r,a,i){var o=P(e,"x","batchNorm"),s=P(t,"mean","batchNorm"),u=P(n,"variance","batchNorm"),l;a!=null&&(l=P(a,"scale","batchNorm"));var c;return r!=null&&(c=P(r,"offset","batchNorm")),q(o.rank===2,function(){return"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(o.rank,".")}),q(s.rank===2||s.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(s.rank,".")}),q(u.rank===2||u.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(u.rank,".")}),l!=null&&q(l.rank===2||l.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(l.rank,".")}),c!=null&&q(c.rank===2||c.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(c.rank,".")}),a0(o,s,u,c,l,i)}var p0e=K({batchNorm2d_:c0e});function d0e(e,t,n,r,a,i){var o=P(e,"x","batchNorm"),s=P(t,"mean","batchNorm"),u=P(n,"variance","batchNorm"),l;a!=null&&(l=P(a,"scale","batchNorm"));var c;return r!=null&&(c=P(r,"offset","batchNorm")),q(o.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(o.rank,".")}),q(s.rank===3||s.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(s.rank,".")}),q(u.rank===3||u.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(u.rank,".")}),l!=null&&q(l.rank===3||l.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(l.rank,".")}),c!=null&&q(c.rank===3||c.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(c.rank,".")}),a0(o,s,u,c,l,i)}var f0e=K({batchNorm3d_:d0e});function h0e(e,t,n,r,a,i){var o=P(e,"x","batchNorm"),s=P(t,"mean","batchNorm"),u=P(n,"variance","batchNorm"),l;a!=null&&(l=P(a,"scale","batchNorm"));var c;return r!=null&&(c=P(r,"offset","batchNorm")),q(o.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(o.rank,".")}),q(s.rank===4||s.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(s.rank,".")}),q(u.rank===4||u.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(u.rank,".")}),l!=null&&q(l.rank===4||l.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(l.rank,".")}),c!=null&&q(c.rank===4||c.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(c.rank,".")}),a0(o,s,u,c,l,i)}var m0e=K({batchNorm4d_:h0e});function v0e(e,t,n){var r=P(e,"x","bincount"),a=P(t,"weights","bincount");q(r.dtype==="int32",function(){return"Error in bincount: input "+"dtype must be int32, but got ".concat(r.dtype)}),q(n>=0,function(){return"size must be non-negative, but got ".concat(n,".")}),q(a.size===r.size||a.size===0,function(){return"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(r.shape,", weights shape: ")+"".concat(a.shape,".")});var i={x:r,weights:a},o={size:n};return ee.runKernel(whe,i,o)}var JD=K({bincount_:v0e});function g0e(e,t){var n=P(e,"x","bitwiseAnd"),r=P(t,"y","bitwiseAnd");if(!Yl(n.shape,r.shape))throw new Error("BitwiseAnd: Tensors must have the same shape. x: ".concat(n.shape,", y: ").concat(r.shape));if(n.dtype!=="int32"||r.dtype!=="int32")throw new Error("BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ".concat(n.dtype," and type of y: ").concat(r.dtype));var a={a:n,b:r};return ee.runKernel(xhe,a)}var y0e=K({bitwiseAnd_:g0e});function b0e(e,t){var n=P(e,"s0","broadcastArgs","int32"),r=P(t,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error("broadcastArgs(): first input must be a vector (rank=1). "+"Has rank ".concat(n.rank));if(r.rank!==1)throw new Error("broadcastArgs(): second input must be a vector (rank=1). "+"Has rank ".concat(r.rank));var a={s0:n,s1:r};return ee.runKernel(She,a)}var w0e=K({broadcastArgs_:b0e});function x0e(e,t){var n=P(e,"broadcastTo","x"),r=n.shape;if(gi(t),t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){for(var a=n.shape.slice();a.length<t.length;)a.unshift(1);n=we(n,a)}for(var i=n.shape,o=Array.from(t),s=t.length-1;s>=0;s--)if(i[s]===t[s])o[s]=1;else if(n.shape[s]!==1)throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(t,"]."));var u=o.map(function(p,d){return p>1?d:-1}).filter(function(p){return p>=0});if(u.length===0)return Ep(n);var l={x:n},c={reps:o};return ee.runKernel(FD,l,c)}var Uv=K({broadcastTo_:x0e});function Bu(e,t,n){return t===void 0&&(t="float32"),t=t||"float32",gi(e),new Nb(e,t,n)}function S0e(e){var t=P(e,"x","ceil","float32"),n={x:t};return ee.runKernel(khe,n)}var k0e=K({ceil_:S0e});function i0(e,t,n){gi(e),n=n||r0(t);var r={shape:e,value:t,dtype:n};return ee.runKernel(e1e,{},r)}function N0e(e,t,n){var r=P(e,"x","clipByValue");if(q(t<=n,function(){return"Error in clip: min (".concat(t,") must be ")+"less than or equal to max (".concat(n,").")}),t===n)return i0(r.shape,t,r.dtype);var a={x:r},i={clipValueMin:t,clipValueMax:n};return ee.runKernel(Nhe,a,i)}var T0e=K({clipByValue_:N0e});function E0e(e,t){var n=P(e,"real","complex"),r=P(t,"imag","complex");ro(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", ")+"must match in call to tf.complex().");var a={real:n,imag:r};return ee.runKernel(The,a)}var Lu=K({complex_:E0e});function I0e(e){return Za(e,0)}var C0e=K({concat1d_:I0e});function D0e(e,t){return Za(e,t)}var _0e=K({concat2d_:D0e});function A0e(e,t){return Za(e,t)}var F0e=K({concat3d_:A0e});function R0e(e,t){return Za(e,t)}var O0e=K({concat4d_:R0e});function M0e(e,t,n,r,a,i,o){a===void 0&&(a="NHWC"),i===void 0&&(i=[1,1]);var s=P(e,"x","conv2d","float32"),u=P(t,"filter","conv2d","float32"),l=s,c=!1;s.rank===3&&(c=!0,l=we(s,[1,s.shape[0],s.shape[1],s.shape[2]])),q(l.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank ".concat(l.rank,".")}),q(u.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+"".concat(u.rank,".")}),Mo("conv2d",r,o);var p=a==="NHWC"?l.shape[3]:l.shape[1];q(p===u.shape[2],function(){return"Error in conv2d: depth of input (".concat(p,") must match ")+"input depth for filter ".concat(u.shape[2],".")}),q($u(n,i),function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")}),q(Ap(i),function(){return"Error in conv2D: Dilated rates should be larger than 0."}),q(Ap(n),function(){return"Error in conv2D: Strides should be larger than 0."});var d={x:l,filter:u},f={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},h=ee.runKernel(Che,d,f);return c?we(h,[h.shape[1],h.shape[2],h.shape[3]]):h}var o0=K({conv2d_:M0e});function P0e(e,t,n,r,a,i,o){a===void 0&&(a="NWC"),i===void 0&&(i=1);var s=P(e,"x","conv1d"),u=P(t,"filter","conv1d"),l=s,c=!1;s.rank===2&&(c=!0,l=we(s,[1,s.shape[0],s.shape[1]])),q(l.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank ".concat(l.rank,".")}),q(u.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+"".concat(u.rank,".")}),Mo("conv1d",r,o),q(l.shape[2]===u.shape[1],function(){return"Error in conv1d: depth of input (".concat(l.shape[2],") must match ")+"input depth for filter ".concat(u.shape[1],".")}),q($u(n,i),function(){return"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(i,"'")}),q(Ap(i),function(){return"Error in conv1D: Dilated rates should be larger than 0."}),q(Ap(n),function(){return"Error in conv1D: Stride should be larger than 0."}),q(a==="NWC",function(){return"Error in conv1d: got dataFormat of ".concat(a," but only NWC is currently supported.")});var p=we(u,[1,u.shape[0],u.shape[1],u.shape[2]]),d=we(l,[l.shape[0],1,l.shape[1],l.shape[2]]),f=[1,n],h=[1,i],m="NHWC",v=o0(d,p,f,r,m,h,o);return c?we(v,[v.shape[2],v.shape[3]]):we(v,[v.shape[0],v.shape[2],v.shape[3]])}var B0e=K({conv1d_:P0e});function L0e(e,t,n,r,a,i,o){i===void 0&&(i="NHWC"),q(e.length===t.rank,function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")});var s=e,u=t,l=!1;t.rank===3&&(l=!0,u=we(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),q(s.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(s.length,".")}),q(u.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(u.rank)}),q(n.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank)});var c=i==="NHWC"?s[3]:s[1],p=i==="NHWC"?u.shape[3]:u.shape[1];q(c===n.shape[2],function(){return"Error in conv2dDerInput: depth of input (".concat(c,") must ")+"match input depth for filter ".concat(n.shape[2],".")}),q(p===n.shape[3],function(){return"Error in conv2dDerInput: depth of output (".concat(p,") must ")+"match output depth for filter ".concat(n.shape[3],".")}),Mo("conv2dDerInput",a,o);var d={dy:u,filter:n},f={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,inputShape:s},h=ee.runKernel(_he,d,f);return l?we(h,[h.shape[1],h.shape[2],h.shape[3]]):h}var ZD=K({conv2DBackpropInput_:L0e});function z0e(e,t,n,r,a,i){var o=P(e,"x","conv2dTranspose"),s=P(t,"filter","conv2dTranspose");return ZD(n,o,s,r,a,"NHWC",i)}var $0e=K({conv2dTranspose_:z0e});function V0e(e,t,n,r,a,i){a===void 0&&(a="NDHWC"),i===void 0&&(i=[1,1,1]);var o=P(e,"x","conv3d"),s=P(t,"filter","conv3d"),u=o,l=!1;o.rank===4&&(l=!0,u=we(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),q(u.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank ".concat(u.rank,".")}),q(s.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+"".concat(s.rank,".")}),q(u.shape[4]===s.shape[3],function(){return"Error in conv3d: depth of input (".concat(u.shape[4],") must match ")+"input depth for filter ".concat(s.shape[3],".")}),q($u(n,i),function(){return"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")}),q(a==="NDHWC",function(){return"Error in conv3d: got dataFormat of ".concat(a," but only NDHWC is currently supported.")}),q(Ap(i),function(){return"Error in conv3D: Dilated rates should be larger than 0."}),q(Ap(n),function(){return"Error in conv3D: Strides should be larger than 0."});var c={x:u,filter:s},p={strides:n,pad:r,dataFormat:a,dilations:i},d=ee.runKernel(Ahe,c,p);return l?we(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}var W0e=K({conv3d_:V0e});function U0e(e,t,n,r,a){q(e.length===t.rank,function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")});var i=e,o=t,s=!1;t.rank===4&&(s=!0,o=we(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),i=[1,e[0],e[1],e[2],e[3]]);var u=i[4],l=o.shape[4];q(i.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(i.length,".")}),q(o.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(o.rank)}),q(n.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank)}),q(u===n.shape[3],function(){return"Error in conv3dDerInput: depth of input (".concat(u,") must ")+"match input depth for filter ".concat(n.shape[3],".")}),q(l===n.shape[4],function(){return"Error in conv3dDerInput: depth of output (".concat(l,") must ")+"match output depth for filter ".concat(n.shape[4],".")});var c={dy:o,filter:n},p={pad:a,strides:r,inputShape:i},d=ee.runKernel(Fhe,c,p);return s?we(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}var G0e=K({conv3DBackpropInput_:U0e});function q0e(e,t,n,r,a){var i=P(e,"x","conv3dTranspose"),o=P(t,"filter","conv3dTranspose");return G0e(n,i,o,r,a)}var H0e=K({conv3dTranspose_:q0e});function j0e(e){var t=P(e,"x","cos","float32"),n={x:t};return ee.runKernel(Rhe,n)}var K0e=K({cos_:j0e});function X0e(e){var t=P(e,"x","cosh","float32"),n={x:t};return ee.runKernel(Ohe,n)}var Y0e=K({cosh_:X0e});function J0e(e,t,n,r){t===void 0&&(t=0),n===void 0&&(n=!1),r===void 0&&(r=!1);var a=P(e,"x","cumprod"),i={x:a},o={axis:t,exclusive:n,reverse:r};return ee.runKernel(Mhe,i,o)}var Z0e=K({cumprod_:J0e});function Q0e(e,t,n,r){t===void 0&&(t=0),n===void 0&&(n=!1),r===void 0&&(r=!1);var a=P(e,"x","cumsum"),i={x:a},o={axis:t,exclusive:n,reverse:r};return ee.runKernel(Phe,i,o)}var e2e=K({cumsum_:Q0e});function t2e(e,t,n,r){r===void 0&&(r=!1);var a=P(e,"x","denseBincount"),i=P(t,"weights","denseBincount");q(a.dtype==="int32",function(){return"Error in denseBincount: input "+"dtype must be int32, but got ".concat(a.dtype)}),q(a.rank<=2,function(){return"Error in denseBincount: input must be at most rank 2, but got "+"rank ".concat(a.rank,".")}),q(n>=0,function(){return"size must be non-negative, but got ".concat(n,".")}),q(i.size===a.size||i.size===0,function(){return"Error in denseBincount: weights must have the same shape as x or "+"0-length, but got x shape: ".concat(a.shape,", weights shape: ")+"".concat(i.shape,".")});var o={x:a,weights:i},s={size:n,binaryOutput:r};return ee.runKernel(Lhe,o,s)}var n2e=K({denseBincount_:t2e});function r2e(e,t,n){n===void 0&&(n="NHWC");var r=P(e,"x","depthToSpace","float32"),a=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],o=n==="NHWC"?r.shape[3]:r.shape[1];q(t>1,function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(t)}),q(a*t>=0,function(){return`Negative dimension size caused by overflow when multiplying
    `.concat(a," and ").concat(t,`  for depthToSpace with input shape
    `).concat(r.shape)}),q(i*t>=0,function(){return`Negative dimension size caused by overflow when multiplying
    `.concat(i," and ").concat(t,` for depthToSpace with input shape
        `).concat(r.shape)}),q(o%(t*t)===0,function(){return"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(o," for depthToSpace with input shape ").concat(r.shape)});var s={x:r},u={blockSize:t,dataFormat:n};return ee.runKernel(zhe,s,u)}var a2e=K({depthToSpace_:r2e});function i2e(e,t,n,r,a,i,o){a===void 0&&(a="NHWC"),i===void 0&&(i=[1,1]);var s=P(e,"x","depthwiseConv2d","float32"),u=P(t,"filter","depthwiseConv2d","float32"),l=s,c=!1;s.rank===3&&(c=!0,l=we(s,[1,s.shape[0],s.shape[1],s.shape[2]])),q(l.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(l.rank,".")}),q(u.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(u.rank,".")});var p=a==="NHWC"?l.shape[3]:l.shape[1];q(p===u.shape[2],function(){return"Error in depthwiseConv2d: number of input channels "+"(".concat(p,") must match the inChannels dimension in ")+"filter ".concat(u.shape[2],".")}),Mo("depthwiseConv2d",r,o);var d={x:l,filter:u},f={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},h=ee.runKernel($he,d,f);return c?we(h,[h.shape[1],h.shape[2],h.shape[3]]):h}var Kb=K({depthwiseConv2d_:i2e});function o2e(e){var t=P(e,"x","diag"),n={x:t};return ee.runKernel(Uhe,n)}var s2e=K({diag_:o2e});function u2e(e,t,n,r,a,i){a===void 0&&(a=[1,1]),i===void 0&&(i="NHWC");var o=P(e,"x","dilation2d"),s=P(t,"filter","dilation2d");q(o.rank===3||o.rank===4,function(){return"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(o.rank,".")}),q(s.rank===3,function(){return"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(s.rank,".")}),q(i==="NHWC",function(){return"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(i)});var u=o,l=!1;o.rank===3&&(u=we(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=!0),q(u.shape[3]===s.shape[2],function(){return"Error in dilation2d:  input and filter must have the same depth: ".concat(u.shape[3]," vs ").concat(s.shape[2])});var c={x:u,filter:s},p={strides:n,pad:r,dilations:a},d=ee.runKernel(Ghe,c,p);return l?we(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var l2e=K({dilation2d_:u2e});function c2e(e,t){var n,r=P(e,"a","floorDiv"),a=P(t,"b","floorDiv");n=ke(er(r,a),2),r=n[0],a=n[1];var i={a:r,b:a};return ee.runKernel(r1e,i)}var QD=K({floorDiv_:c2e});function p2e(e,t){var n,r=P(e,"a","div"),a=P(t,"b","div");if(n=ke(er(r,a),2),r=n[0],a=n[1],r.dtype==="int32"&&a.dtype==="int32")return QD(r,a);var i={a:r,b:a},o={};return ee.runKernel(qhe,i,o)}var da=K({div_:p2e});function d2e(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],i=t.length-r-1,o=t[i];(a==null||a===1&&o>1)&&n.unshift(i)}return n}function Or(e,t){for(var n=Math.max(e.length,t.length),r=new Array(n),a=0;a<n;a++){var i=e[e.length-a-1];i==null&&(i=1);var o=t[t.length-a-1];if(o==null&&(o=1),i===1)r[n-a-1]=o;else if(o===1)r[n-a-1]=i;else if(i!==o){var s="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(s)}else r[n-a-1]=i}return r}function f2e(e,t){var n,r=P(e,"a","equal","string_or_numeric"),a=P(t,"b","equal","string_or_numeric");n=ke(er(r,a),2),r=n[0],a=n[1],Or(r.shape,a.shape);var i={a:r,b:a};return ee.runKernel(Xhe,i)}var e_=K({equal_:f2e});function h2e(e,t,n){var r=P(t,"a","where"),a=P(n,"b","where"),i=P(e,"condition","where","bool"),o=Or(Or(i.shape,r.shape),a.shape),s=Uv(i,o),u=Uv(r,o),l=Uv(a,o),c={condition:s,t:u,e:l};return ee.runKernel(pme,c)}var Pu=K({where_:h2e});function m2e(e){var t=P(e,"x","zerosLike"),n={x:t};return ee.runKernel(Ume,n)}var Xb=K({zerosLike_:m2e});function v2e(e,t){var n,r=P(e,"a","div"),a=P(t,"b","div");n=ke(er(r,a),2),r=n[0],a=n[1];var i=da(r,a),o=Xb(i),s=e_(a,o);return Pu(s,o,i)}var g2e=K({divNoNan_:v2e});function y2e(e,t){var n=P(e,"t1","dot"),r=P(t,"t2","dot");q((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")});var a=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];if(q(a===i,function(){return"Error in dot: inner dimensions of inputs must match, but got "+"".concat(a," and ").concat(i,".")}),n.rank===1&&r.rank===1){var o=we(n,[1,-1]),s=we(r,[-1,1]),u=en(o,s);return we(u,[])}else if(n.rank===1&&r.rank===2){var o=we(n,[1,-1]),s=we(r,[r.shape[0],r.shape[1]]),u=en(o,s);return we(u,[u.size])}else if(n.rank===2&&r.rank===1){var s=we(r,[-1,1]),u=en(n,s);return we(u,[u.size])}else{var s=we(r,[r.shape[0],r.shape[1]]),u=en(n,s);return u}}var b2e=K({dot_:y2e});function w2e(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t.map(function(i,o){return P(i,"tensors".concat(o),"einsum")}),a={equation:e};return ee.runKernel(Hhe,r,a)}var Np=K({einsum_:w2e});function x2e(e){var t=P(e,"x","elu","float32"),n={x:t};return ee.runKernel(jhe,n)}var t_=K({elu_:x2e});function S2e(e,t){var n=P(e,"x","ensureShape","string_or_numeric");if(!Ufe(n.shape,t))throw new Error("EnsureShape: Shape of tensor ".concat(n.shape," is not compatible with expected shape ").concat(t));return e}var k2e=K({ensureShape_:S2e});function N2e(e){var t=P(e,"x","erf");q(t.dtype==="int32"||t.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),t.dtype==="int32"&&(t=Er(t,"float32"));var n={x:t};return ee.runKernel(Khe,n)}var T2e=K({erf_:N2e});function E2e(e,t,n){for(var r=e.length+t.length,a=[],i=0,o=0,s=0;s<r;s++)n.indexOf(s)===-1?a.push(e[i++]):a.push(t[o++]);return a}function s0(e,t){var n=t.map(function(r){return 1});return E2e(e,n,t)}function I2e(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=P(e,"x","max"),a={x:r},i={reductionIndices:t,keepDims:n};return ee.runKernel(N1e,a,i)}var Cp=K({max_:I2e});function C2e(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=P(e,"x","min"),a={x:r},i={axis:t,keepDims:n};return ee.runKernel(_1e,a,i)}var Fb=K({min_:C2e});function D2e(e,t){var n,r=P(e,"base","pow"),a=P(t,"exp","pow");n=ke(er(r,a),2),r=n[0],a=n[1];var i={a:r,b:a};return ee.runKernel(q1e,i)}var Yb=K({pow_:D2e});function Vu(e,t,n,r){if(r==null)r=r0(e);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(GD(e)||UD(e)){if(r!=="float32"&&r!=="int32")throw new Error("Creating tensor from GPU data only supports "+"'float32'|'int32' dtype, while the dtype is ".concat(r,"."));return ee.backend.createTensorFromGPUData(e,t||n,r)}if(!Ro(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){gi(t);var a=Fr(t),i=Fr(n);q(a===i,function(){return"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(a," values but has ").concat(i)});for(var o=0;o<n.length;++o){var s=n[o],u=o===n.length-1?s!==Fr(t.slice(o)):!0;q(n[o]===t[o]||!u,function(){return"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). ")})}}return!Ro(e)&&!Array.isArray(e)&&(e=[e]),t=t||n,e=r!=="string"?$D(e,r):dh(e,[],!0),ee.makeTensor(e,t,r)}function cr(e,t){if((Ro(e)&&t!=="string"||Array.isArray(e))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&Ro(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");var n=[],r=[];return Vu(e,n,r,t)}function _2e(e){var t=P(e,"x","sqrt","float32"),n={x:t};return ee.runKernel(bme,n)}var Rb=K({sqrt_:_2e});function A2e(e){var t=P(e,"x","square"),n={};return ee.runKernel("Square",{x:t},n)}var u0=K({square_:A2e});function F2e(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=P(e,"x","sum");r.dtype==="bool"&&(r=Er(r,"int32"));var a={x:r},i={axis:t,keepDims:n};return ee.runKernel(wme,a,i)}var Nn=K({sum_:F2e});function R2e(e,t,n,r){t===void 0&&(t="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1),e=P(e,"x","norm");var a=n_(e,t,n),i=a.shape;if(r){var o=n0(n,e.shape);i=s0(a.shape,o)}return we(a,i)}function n_(e,t,n){if(n===void 0&&(n=null),e.rank===0)return Ji(e);if(e.rank!==1&&n===null)return n_(we(e,[-1]),t,n);if(e.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(t===1)return Nn(Ji(e),n);if(t===1/0)return Cp(Ji(e),n);if(t===-1/0)return Fb(Ji(e),n);if(t==="euclidean"||t===2)return Rb(Nn(Yb(Ji(e),cr(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&n.length===2){if(t===1)return Cp(Nn(Ji(e),n[0]),n[1]-1);if(t===1/0)return Cp(Nn(Ji(e),n[1]),n[0]);if(t===-1/0)return Fb(Nn(Ji(e),n[1]),n[0]);if(t==="fro"||t==="euclidean")return Rb(Nn(u0(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}var l0=K({norm_:R2e});function O2e(e,t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),l0(e,"euclidean",t,n)}var M2e=K({euclideanNorm_:O2e});function P2e(e){var t=P(e,"x","exp"),n={x:t};return ee.runKernel(Yhe,n)}var Kl=K({exp_:P2e});function B2e(e,t){t===void 0&&(t=0);var n=P(e,"x","expandDims","string_or_numeric");q(t<=n.rank,function(){return"Axis must be <= rank of the tensor"});var r={input:n},a={dim:t};return ee.runKernel(Jhe,r,a)}var Mu=K({expandDims_:B2e});function L2e(e){var t=P(e,"x","expm1"),n={x:t};return ee.runKernel(Zhe,n)}var z2e=K({expm1_:L2e});function $2e(e,t){var n=P(e,"x","tile","string_or_numeric");q(n.rank===t.length,function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,".")});var r={x:n},a={reps:t};return ee.runKernel(FD,r,a)}var lh=K({tile_:$2e});function V2e(e,t,n,r){r===void 0&&(r="float32"),t==null&&(t=e);for(var a=Bu([e,t],r),i=e<=t?e:t,o=0;o<i;++o)a.set(1,o,o);var s=we(a.toTensor(),[e,t]);if(n==null)return s;if(n.length===1)return lh(Mu(s,0),[n[0],1,1]);if(n.length===2)return lh(Mu(Mu(s,0),0),[n[0],n[1],1,1]);if(n.length===3)return lh(Mu(Mu(Mu(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}var r_=K({eye_:V2e});function W2e(e){var t=P(e,"x","floor","float32"),n={x:t};return ee.runKernel(n1e,n)}var a_=K({floor_:W2e});function U2e(e,t,n,r){n===void 0&&(n=0),r===void 0&&(r=0);var a=P(e,"x","gather"),i=P(t,"indices","gather","int32"),o={x:a,indices:i},s={axis:n,batchDims:r};return ee.runKernel(i1e,o,s)}var i_=K({gather_:U2e});function G2e(e,t){var n,r=P(e,"a","greater","string_or_numeric"),a=P(t,"b","greater","string_or_numeric");n=ke(er(r,a),2),r=n[0],a=n[1],Or(r.shape,a.shape);var i={a:r,b:a};return ee.runKernel(s1e,i)}var c0=K({greater_:G2e});function q2e(e,t){var n,r=P(e,"a","greaterEqual","string_or_numeric"),a=P(t,"b","greaterEqual","string_or_numeric");n=ke(er(r,a),2),r=n[0],a=n[1],Or(r.shape,a.shape);var i={a:r,b:a};return ee.runKernel(u1e,i)}var o_=K({greaterEqual_:q2e});function H2e(e){var t=P(e,"input","imag"),n={input:t};return ee.runKernel(c1e,n)}var p0=K({imag_:H2e});function j2e(e){var t=P(e,"x","isFinite"),n={x:t};return ee.runKernel(p1e,n)}var K2e=K({isFinite_:j2e});function X2e(e){var t=P(e,"x","isInf"),n={x:t};return ee.runKernel(d1e,n)}var Y2e=K({isInf_:X2e});function J2e(e){var t=P(e,"x","isNaN"),n={x:t};return ee.runKernel(f1e,n)}var Z2e=K({isNaN_:J2e});function Q2e(e,t){t===void 0&&(t=.2);var n=P(e,"x","leakyRelu"),r={x:n},a={alpha:t};return ee.runKernel(h1e,r,a)}var s_=K({leakyRelu_:Q2e});function ege(e,t){var n,r=P(e,"a","less","string_or_numeric"),a=P(t,"b","less","string_or_numeric");n=ke(er(r,a),2),r=n[0],a=n[1],Or(r.shape,a.shape);var i={a:r,b:a};return ee.runKernel(m1e,i)}var Ob=K({less_:ege});function tge(e,t){var n,r=P(e,"a","lessEqual","string_or_numeric"),a=P(t,"b","lessEqual","string_or_numeric");n=ke(er(r,a),2),r=n[0],a=n[1],Or(r.shape,a.shape);var i={a:r,b:a};return ee.runKernel(v1e,i)}var Jb=K({lessEqual_:tge});function nge(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");var r={start:e,stop:t,num:n};return ee.runKernel(g1e,{},r)}function rge(e,t,n,r,a){t===void 0&&(t=5),n===void 0&&(n=1),r===void 0&&(r=1),a===void 0&&(a=.5);var i=P(e,"x","localResponseNormalization");q(i.rank===4||i.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `.concat(i.rank,".")}),q(ph(t),function(){return"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(t,".")});var o=i,s=!1;i.rank===3&&(s=!0,o=we(i,[1,i.shape[0],i.shape[1],i.shape[2]]));var u={x:o},l={depthRadius:t,bias:n,alpha:r,beta:a},c=ee.runKernel(k1e,u,l);return s?we(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var age=K({localResponseNormalization_:rge});function ige(e){var t=P(e,"x","log","float32"),n={x:t};return ee.runKernel(y1e,n)}var hh=K({log_:ige});function oge(e){var t=P(e,"x","log1p"),n={x:t};return ee.runKernel(b1e,n)}var u_=K({log1p_:oge});function Us(e){return ee.customGrad(e)}function sge(e){var t=P(e,"x","neg"),n={x:t};return ee.runKernel(P1e,n)}var us=K({neg_:sge});function uge(e){var t=P(e,"x","softplus"),n={x:t};return ee.runKernel(yme,n)}var l_=K({softplus_:uge});function lge(e){var t=P(e,"x","logSigmoid"),n=Us(function(r){var a=us(l_(us(r))),i=function(o){var s=Ft(o,Ip(us(r)));return s};return{value:a,gradFunc:i}});return n(t)}var cge=K({logSigmoid_:lge});function pge(e,t){var n,r=P(e,"a","sub"),a=P(t,"b","sub");n=ke(er(r,a),2),r=n[0],a=n[1];var i={a:r,b:a};return ee.runKernel(Mme,i)}var qt=K({sub_:pge});function dge(e,t){t===void 0&&(t=-1);var n=P(e,"logits","logSoftmax");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(t));var r=Us(function(a,i){var o=!0,s=Cp(a,t,!0),u=qt(a,s),l=qt(Er(u,"float32"),hh(Nn(Kl(u),t,o)));i([l]);var c=function(p,d){var f=ke(d,1),h=f[0],m=!0,v=Kl(h);return qt(p,Ft(Nn(p,t,m),v))};return{value:l,gradFunc:c}});return r(n)}var fge=K({logSoftmax_:dge});function hge(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=P(e,"x","logSumExp"),a=n0(t,r.shape),i=Cp(r,a,!0),o=qt(r,i),s=Kl(o),u=Nn(s,a),l=hh(u),c=Rr(we(i,l.shape),l);if(n){var p=s0(c.shape,a);return we(c,p)}return c}var c_=K({logSumExp_:hge});function mge(e,t){var n=P(e,"a","logicalAnd","bool"),r=P(t,"b","logicalAnd","bool");Or(n.shape,r.shape);var a={a:n,b:r};return ee.runKernel(w1e,a)}var Yv=K({logicalAnd_:mge});function vge(e){var t=P(e,"x","logicalNot","bool"),n={x:t};return ee.runKernel(x1e,n)}var p_=K({logicalNot_:vge});function gge(e,t){var n=P(e,"a","logicalOr","bool"),r=P(t,"b","logicalOr","bool");Or(n.shape,r.shape);var a={a:n,b:r};return ee.runKernel(S1e,a)}var d_=K({logicalOr_:gge});function yge(e,t){var n=P(e,"a","logicalXor","bool"),r=P(t,"b","logicalXor","bool");return Or(n.shape,r.shape),Yv(d_(e,t),p_(Yv(e,t)))}var bge=K({logicalXor_:yge});var Lv=2147483648;function wge(e,t,n){n===void 0&&(n="left");var r=P(e,"sortedSequence","searchSorted"),a=P(t,"values","searchSorted"),i=r.shape[r.shape.length-1],o=a.shape[a.shape.length-1],s=we(r,[-1,i]),u=we(a,[-1,o]);if(s.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(s.shape[0]!==u.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(Fr(u.shape)>=Lv)throw new Error("values tensor size must less than ".concat(Lv));if(s.shape[1]>=Lv)throw new Error("trailing dim_size must less than ".concat(Lv," for int32 output type, was ").concat(s.shape[1]));var l={sortedSequence:s,values:u},c={side:n};return ee.runKernel(cme,l,c)}var Zb=K({searchSorted_:wge});function xge(e,t){return Zb(e,t,"left")}function Sge(e,t,n,r,a){var i=P(e,"x","maxPool"),o=1,s=i,u=!1;i.rank===3&&(u=!0,s=we(i,[1,i.shape[0],i.shape[1],i.shape[2]])),q(s.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(s.rank,".")}),q($u(n,o),function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(o,"'")}),Mo("maxPool",r,a);var l={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a},p=ee.runKernel(E1e,l,c);return u?we(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var f_=K({maxPool_:Sge});function kge(e,t,n,r,a,i){t===void 0&&(t=[1,1,1]),i===void 0&&(i="NDHWC");var o=P(e,"x","maxPool3d"),s=o,u=!1;o.rank===4&&(u=!0,s=we(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),q(s.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank ".concat(s.rank,".")}),q(i==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i)}),Mo("maxPool3d",r,a);var l={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},p=ee.runKernel(I1e,l,c);return u?we(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var Nge=K({maxPool3d_:kge});function Tge(e,t,n,r,a){a===void 0&&(a=!1);var i=P(e,"x","maxPoolWithArgmax"),o={x:i},s={filterSize:t,strides:n,pad:r,includeBatchInIndex:a},u=ee.runKernel(C1e,o,s);return{result:u[0],indexes:u[1]}}var Ege=K({maxPoolWithArgmax_:Tge});function Ige(e,t){var n,r=P(e,"a","maximum"),a=P(t,"b","maximum");n=ke(er(r,a),2),r=n[0],a=n[1],r.dtype==="bool"&&(r=Er(r,"int32"),a=Er(a,"int32")),Or(r.shape,a.shape);var i={a:r,b:a};return ee.runKernel(T1e,i)}var Cge=K({maximum_:Ige});function Dge(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=P(e,"x","mean"),a={x:r},i={axis:t,keepDims:n};return ee.runKernel(D1e,a,i)}var Jv=K({mean_:Dge});function Fp(e,t){if(t===void 0&&(t="float32"),gi(e),t==="complex64"){var n=Fp(e,"float32"),r=Fp(e,"float32");return Lu(n,r)}var a=Vb(Fr(e),t);return ee.makeTensor(a,e,t)}function jl(e,t){if(t===void 0&&(t="float32"),gi(e),t==="complex64"){var n=jl(e,"float32"),r=Fp(e,"float32");return Lu(n,r)}var a=ED(Fr(e),t);return ee.makeTensor(a,e,t)}function _ge(e,t,n){var r=n===void 0?{}:n,a=r.indexing,i=a===void 0?"xy":a;if(i!=="xy"&&i!=="ij")throw new TypeError("".concat(i," is not a valid third argument to meshgrid"));if(e===void 0)return[];var o=P(e,"x","meshgrid",e instanceof Ya?e.dtype:"float32");if(t===void 0)return[o];var s=P(t,"y","meshgrid",t instanceof Ya?t.dtype:"float32"),u=Fr(o.shape),l=Fr(s.shape);return i==="xy"?(o=we(o,[1,-1]),s=we(s,[-1,1]),[en(jl([l,1],o.dtype),o),en(s,jl([1,u],s.dtype))]):(o=we(o,[-1,1]),s=we(s,[1,-1]),[en(o,jl([1,l],o.dtype)),en(jl([u,1],s.dtype),s)])}function Age(e,t){var n,r=P(e,"a","minimum"),a=P(t,"b","minimum");n=ke(er(r,a),2),r=n[0],a=n[1],r.dtype==="bool"&&(r=Er(r,"int32"),a=Er(a,"int32")),Or(r.shape,a.shape);var i={a:r,b:a};return ee.runKernel(A1e,i)}var Zv=K({minimum_:Age});function Fge(e,t,n){q(n==="reflect"||n==="symmetric",function(){return"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,".")});var r=P(e,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");q(t.length===r.rank,function(){return"Padding doesn't match input. Must be ".concat(r.rank,". ")+"Got ".concat(t.length,".")});for(var a=n==="reflect"?1:0,i=function(l){q(t[l].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),q(t[l][0]>=0&&t[l][0]<=r.shape[l]-a&&t[l][1]>=0&&t[l][1]<=r.shape[l]-a,function(){return"Padding in dimension ".concat(l," cannot be greater than or equal ")+"to ".concat(r.shape[l]-a," or less than 0 for input of ")+"shape ".concat(r.shape)})},o=0;o<r.rank;o++)i(o);var s={paddings:t,mode:n},u={x:r};return ee.runKernel(F1e,u,s)}var Rge=K({mirrorPad_:Fge});function Oge(e,t){var n,r=P(e,"a","mod"),a=P(t,"b","mod");n=ke(er(r,a),2),r=n[0],a=n[1];var i={a:r,b:a};return ee.runKernel(R1e,i)}var Mge=K({mod_:Oge});function Pge(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1),e=P(e,"x","moments");var r=n0(t,e.shape),a=Jv(e,r,n),i=a.shape;n||(i=s0(a.shape,r));var o=u0(qt(Er(e,"float32"),we(a,i))),s=Jv(o,r,n);return{mean:a,variance:s}}var Bge=K({moments_:Pge});function Lge(e,t,n,r){for(var a=P(t,"data","multiRNNCell"),i=jv(n,"c","multiRNNCell"),o=jv(r,"h","multiRNNCell"),s=a,u=[],l=0;l<e.length;l++){var c=e[l](s,i[l],o[l]);u.push(c[0]),u.push(c[1]),s=c[1]}for(var p=[],d=[],l=0;l<u.length;l+=2)p.push(u[l]),d.push(u[l+1]);return[p,d]}var zge=K({multiRNNCell_:Lge});function $ge(e,t,n,r){r===void 0&&(r=!1);var a=P(e,"logits","multinomial"),i=a.size,o=a.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+"".concat(i,"."));if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is ".concat(o));n=n||Math.random();var s=o===1?we(a,[1,-1]):a,u={logits:s},l={numSamples:t,seed:n,normalized:r},c=ee.runKernel(O1e,u,l);return o===1?we(c,[c.size]):c}var Vge=K({multinomial_:$ge});function Wge(e,t){var n,r=P(e,"a","notEqual","string_or_numeric"),a=P(t,"b","notEqual","string_or_numeric");n=ke(er(r,a),2),r=n[0],a=n[1],Or(r.shape,a.shape);var i={a:r,b:a};return ee.runKernel(B1e,i)}var h_=K({notEqual_:Wge});function Uge(e,t,n,r,a){if(n===void 0&&(n=1),r===void 0&&(r=0),a===void 0&&(a="int32"),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));var i=P(e,"indices","oneHot","int32"),o={indices:i},s={dtype:a,depth:t,onValue:n,offValue:r};return ee.runKernel(W1e,o,s)}var Gge=K({oneHot_:Uge});function qge(e){var t=P(e,"x","onesLike"),n={x:t};return ee.runKernel(V1e,n)}var Hge=K({onesLike_:qge});function jge(e,t){var n=P(e,"v1","outerProduct"),r=P(t,"v2","outerProduct");q(n.rank===1&&r.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")});var a=we(n,[-1,1]),i=we(r,[1,-1]);return en(a,i)}var Kge=K({outerProduct_:jge});function Xge(e,t,n){n===void 0&&(n=0);var r=P(e,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:t,constantValue:n},i={x:r};return ee.runKernel(G1e,i,a)}var bh=K({pad_:Xge});function Yge(e,t,n){return n===void 0&&(n=0),q(t.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),bh(e,[t],n)}var Jge=K({pad1d_:Yge});function Zge(e,t,n){return n===void 0&&(n=0),q(t.length===2&&t[0].length===2&&t[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),bh(e,t,n)}var Qge=K({pad2d_:Zge});function eye(e,t,n){return n===void 0&&(n=0),q(t.length===3&&t[0].length===2&&t[1].length===2&&t[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),bh(e,t,n)}var tye=K({pad3d_:eye});function nye(e,t,n){return n===void 0&&(n=0),q(t.length===4&&t[0].length===2&&t[1].length===2&&t[2].length===2&&t[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),bh(e,t,n)}var rye=K({pad4d_:nye});function aye(e,t,n){var r=P(e,"x","spaceToBatchND");q(r.rank>=1+t.length,function(){return"input rank ".concat(r.rank," should be > than [blockShape] ").concat(t.length)}),q(n.length===t.length,function(){return"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)}),q(r.shape.reduce(function(o,s,u){return u>0&&u<=t.length?o&&(s+n[u-1][0]+n[u-1][1])%t[u-1]===0:o},!0),function(){return"input spatial dimensions ".concat(r.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())});var a={x:r},i={blockShape:t,paddings:n};return ee.runKernel(xme,a,i)}var m_=K({spaceToBatchND_:aye});function iye(e,t,n,r,a,i,o){a==null&&(a=[1,1]),i==null&&(i=1),r===0&&(r="valid");var s=P(e,"x","maxPool"),u=s,l=!1;s.rank===3&&(l=!0,u=we(s,[1,s.shape[0],s.shape[1],s.shape[2]])),q($u(i,a),function(){return"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(a,"'")});var c=Gve(u.shape,t,i,a,r),p=[c.dilationHeight,c.dilationWidth],d;r==="same"?d=sye([c.filterHeight,c.filterWidth],p):d=[[0,0],[0,0]];var f=p[0]===1&&p[1]===1,h=ke(oye([c.inHeight,c.inWidth],p,d),2),m=h[0],v=h[1],g=f?r:"valid",y=f?u:m_(u,p,m),w=n==="avg"?function(){return XD(y,t,i,g,o)}:function(){return f_(y,t,i,g,o)},b=w(),x=f?b:YD(b,p,v);return l?we(x,[x.shape[1],x.shape[2],x.shape[3]]):x}function oye(e,t,n){var r=n.map(function(c){return c[0]}),a=n.map(function(c){return c[1]}),i=e.concat(r,a),o=t.map(function(c,p){return(c-i[p]%c)%c}),s=a.map(function(c,p){return c+o[p]}),u=t.map(function(c,p){return[r[p],s[p]]}),l=t.map(function(c,p){return[0,o[p]]});return[u,l]}function sye(e,t){var n=e.map(function(o,s){return o+(o-1)*(t[s]-1)}),r=n.map(function(o){return o-1}),a=r.map(function(o){return Math.floor(o/2)}),i=r.map(function(o,s){return o-a[s]});return r.map(function(o,s){return[a[s],i[s]]})}var uye=K({pool_:iye});function lye(e,t){var n=P(e,"x","prelu"),r=P(t,"alpha","prelu"),a={x:n,alpha:r};return ee.runKernel(H1e,a)}var v_=K({prelu_:lye});function cye(e,t){t===void 0&&(t=!1),console.log(e.toString(t))}function pye(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=P(e,"x","prod");r.dtype==="bool"&&(r=Er(r,"int32"));var a={x:r},i={axis:t,keepDims:n};return ee.runKernel(j1e,a,i)}var dye=K({prod_:pye});function fye(e,t,n,r){var a=e.map(function(c,p){return P(c,"tensors".concat(p),"raggedGather","int32")}),i=P(t,"paramsDenseValues","raggedGather"),o=P(n,"indices","raggedGather","int32"),s={paramsNestedSplits:a,paramsDenseValues:i,indices:o},u={outputRaggedRank:r},l=ee.runKernel(K1e,s,u);return{outputNestedSplits:l.slice(0,l.length-1),outputDenseValues:l[l.length-1]}}var hye=K({raggedGather_:fye});function mye(e,t,n){var r=P(e,"starts","raggedRange"),a=P(t,"limits","raggedRange",r.dtype),i=P(n,"deltas","raggedRange",r.dtype),o={starts:r,limits:a,deltas:i},s=ee.runKernel(X1e,o);return{rtNestedSplits:s[0],rtDenseValues:s[1]}}var vye=K({raggedRange_:mye});function gye(e,t,n,r,a){var i=P(e,"shape","raggedTensorToTensor","int32"),o=P(t,"values","raggedTensorToTensor"),s=P(n,"defaultValue","raggedTensorToTensor",o.dtype),u=r.map(function(p,d){return P(p,"tensors".concat(d),"raggedTensorToTensor","int32")}),l={shape:i,values:o,defaultValue:s,rowPartitionTensors:u},c={rowPartitionTypes:a};return ee.runKernel(Y1e,l,c)}var yye=K({raggedTensorToTensor_:gye});function bye(e,t,n){gi(e);var r=Fr(e),a=null;if(n==null||n==="float32")a=new Float32Array(r);else if(n==="int32")a=new Int32Array(r);else if(n==="bool")a=new Uint8Array(r);else throw new Error("Unknown data type ".concat(n));for(var i=0;i<r;i++)a[i]=t();return ee.makeTensor(a,e,n)}var wye=K({rand_:bye}),g_={exports:{}};(function(e){(function(t,n,r){function a(u){var l=this,c=s();l.next=function(){var p=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=p-(l.c=p|0)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(u),l.s0<0&&(l.s0+=1),l.s1-=c(u),l.s1<0&&(l.s1+=1),l.s2-=c(u),l.s2<0&&(l.s2+=1),c=null}function i(u,l){return l.c=u.c,l.s0=u.s0,l.s1=u.s1,l.s2=u.s2,l}function o(u,l){var c=new a(u),p=l&&l.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,p&&(typeof p=="object"&&i(p,c),d.state=function(){return i(c,{})}),d}function s(){var u=4022871197,l=function(c){c=String(c);for(var p=0;p<c.length;p++){u+=c.charCodeAt(p);var d=.02519603282416938*u;u=d>>>0,d-=u,d*=u,u=d>>>0,d-=u,u+=d*4294967296}return(u>>>0)*23283064365386963e-26};return l}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.alea=o})(Jl,e,!1)})(g_);var xye=g_.exports,y_={exports:{}};(function(e){(function(t,n,r){function a(s){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var p=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^p^p>>>8},s===(s|0)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,u.next()}function i(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u}function o(s,u){var l=new a(s),c=u&&u.state,p=function(){return(l.next()>>>0)/4294967296};return p.double=function(){do var d=l.next()>>>11,f=(l.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},p.int32=l.next,p.quick=p,c&&(typeof c=="object"&&i(c,l),p.state=function(){return i(l,{})}),p}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor128=o})(Jl,e,!1)})(y_);var Sye=y_.exports,b_={exports:{}};(function(e){(function(t,n,r){function a(s){var u=this,l="";u.next=function(){var p=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^(p^p<<1))|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,s===(s|0)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,c==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function i(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u.v=s.v,u.d=s.d,u}function o(s,u){var l=new a(s),c=u&&u.state,p=function(){return(l.next()>>>0)/4294967296};return p.double=function(){do var d=l.next()>>>11,f=(l.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},p.int32=l.next,p.quick=p,c&&(typeof c=="object"&&i(c,l),p.state=function(){return i(l,{})}),p}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorwow=o})(Jl,e,!1)})(b_);var kye=b_.exports,w_={exports:{}};(function(e){(function(t,n,r){function a(s){var u=this;u.next=function(){var c=u.x,p=u.i,d,f;return d=c[p],d^=d>>>7,f=d^d<<24,d=c[p+1&7],f^=d^d>>>10,d=c[p+3&7],f^=d^d>>>3,d=c[p+4&7],f^=d^d<<7,d=c[p+7&7],d=d^d<<13,f^=d^d<<9,c[p]=f,u.i=p+1&7,f};function l(c,p){var d,f=[];if(p===(p|0))f[0]=p;else for(p=""+p,d=0;d<p.length;++d)f[d&7]=f[d&7]<<15^p.charCodeAt(d)+f[d+1&7]<<13;for(;f.length<8;)f.push(0);for(d=0;d<8&&f[d]===0;++d);for(d==8?f[7]=-1:f[d],c.x=f,c.i=0,d=256;d>0;--d)c.next()}l(u,s)}function i(s,u){return u.x=s.x.slice(),u.i=s.i,u}function o(s,u){s==null&&(s=+new Date);var l=new a(s),c=u&&u.state,p=function(){return(l.next()>>>0)/4294967296};return p.double=function(){do var d=l.next()>>>11,f=(l.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},p.int32=l.next,p.quick=p,c&&(c.x&&i(c,l),p.state=function(){return i(l,{})}),p}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorshift7=o})(Jl,e,!1)})(w_);var Nye=w_.exports,x_={exports:{}};(function(e){(function(t,n,r){function a(s){var u=this;u.next=function(){var c=u.w,p=u.X,d=u.i,f,h;return u.w=c=c+1640531527|0,h=p[d+34&127],f=p[d=d+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,h=p[d]=h^f,u.i=d,h+(c^c>>>16)|0};function l(c,p){var d,f,h,m,v,g=[],y=128;for(p===(p|0)?(f=p,p=null):(p=p+"\0",f=0,y=Math.max(y,p.length)),h=0,m=-32;m<y;++m)p&&(f^=p.charCodeAt((m+32)%p.length)),m===0&&(v=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,m>=0&&(v=v+1640531527|0,d=g[m&127]^=f+v,h=d==0?h+1:0);for(h>=128&&(g[(p&&p.length||0)&127]=-1),h=127,m=4*128;m>0;--m)f=g[h+34&127],d=g[h=h+1&127],f^=f<<13,d^=d<<17,f^=f>>>15,d^=d>>>12,g[h]=f^d;c.w=v,c.X=g,c.i=h}l(u,s)}function i(s,u){return u.i=s.i,u.w=s.w,u.X=s.X.slice(),u}function o(s,u){s==null&&(s=+new Date);var l=new a(s),c=u&&u.state,p=function(){return(l.next()>>>0)/4294967296};return p.double=function(){do var d=l.next()>>>11,f=(l.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},p.int32=l.next,p.quick=p,c&&(c.X&&i(c,l),p.state=function(){return i(l,{})}),p}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor4096=o})(Jl,e,!1)})(x_);var Tye=x_.exports,S_={exports:{}};(function(e){(function(t,n,r){function a(s){var u=this,l="";u.next=function(){var p=u.b,d=u.c,f=u.d,h=u.a;return p=p<<25^p>>>7^d,d=d-f|0,f=f<<24^f>>>8^h,h=h-p|0,u.b=p=p<<20^p>>>12^d,u.c=d=d-f|0,u.d=f<<16^d>>>16^h,u.a=h-p|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,s===Math.floor(s)?(u.a=s/4294967296|0,u.b=s|0):l+=s;for(var c=0;c<l.length+20;c++)u.b^=l.charCodeAt(c)|0,u.next()}function i(s,u){return u.a=s.a,u.b=s.b,u.c=s.c,u.d=s.d,u}function o(s,u){var l=new a(s),c=u&&u.state,p=function(){return(l.next()>>>0)/4294967296};return p.double=function(){do var d=l.next()>>>11,f=(l.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},p.int32=l.next,p.quick=p,c&&(typeof c=="object"&&i(c,l),p.state=function(){return i(l,{})}),p}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.tychei=o})(Jl,e,!1)})(S_);var Eye=S_.exports,k_={exports:{}},Iye={},Cye={__proto__:null,default:Iye},Dye=Yme(Cye);(function(e){(function(t,n,r){var a=256,i=6,o=52,s="random",u=r.pow(a,i),l=r.pow(2,o),c=l*2,p=a-1,d;function f(b,x,k){var N=[];x=x==!0?{entropy:!0}:x||{};var E=g(v(x.entropy?[b,w(n)]:b??y(),3),N),C=new h(N),R=function(){for(var A=C.g(i),M=u,$=0;A<l;)A=(A+$)*a,M*=a,$=C.g(1);for(;A>=c;)A/=2,M/=2,$>>>=1;return(A+$)/M};return R.int32=function(){return C.g(4)|0},R.quick=function(){return C.g(4)/4294967296},R.double=R,g(w(C.S),n),(x.pass||k||function(A,M,$,z){return z&&(z.S&&m(z,C),A.state=function(){return m(C,{})}),$?(r[s]=A,M):A})(R,E,"global"in x?x.global:this==r,x.state)}function h(b){var x,k=b.length,N=this,E=0,C=N.i=N.j=0,R=N.S=[];for(k||(b=[k++]);E<a;)R[E]=E++;for(E=0;E<a;E++)R[E]=R[C=p&C+b[E%k]+(x=R[E])],R[C]=x;(N.g=function(A){for(var M,$=0,z=N.i,L=N.j,B=N.S;A--;)M=B[z=p&z+1],$=$*a+B[p&(B[z]=B[L=p&L+M])+(B[L]=M)];return N.i=z,N.j=L,$})(a)}function m(b,x){return x.i=b.i,x.j=b.j,x.S=b.S.slice(),x}function v(b,x){var k=[],N=typeof b,E;if(x&&N=="object")for(E in b)try{k.push(v(b[E],x-1))}catch{}return k.length?k:N=="string"?b:b+"\0"}function g(b,x){for(var k=b+"",N,E=0;E<k.length;)x[p&E]=p&(N^=x[p&E]*19)+k.charCodeAt(E++);return w(x)}function y(){try{var b;return d&&(b=d.randomBytes)?b=b(a):(b=new Uint8Array(a),(t.crypto||t.msCrypto).getRandomValues(b)),w(b)}catch{var x=t.navigator,k=x&&x.plugins;return[+new Date,t,k,t.screen,w(n)]}}function w(b){return String.fromCharCode.apply(0,b)}if(g(r.random(),n),e.exports){e.exports=f;try{d=Dye}catch{}}else r["seed"+s]=f})(typeof self<"u"?self:Jl,[],Math)})(k_);var _ye=k_.exports,Aye=xye,Fye=Sye,Rye=kye,Oye=Nye,Mye=Tye,Pye=Eye,Ql=_ye;Ql.alea=Aye;Ql.xor128=Fye;Ql.xorwow=Rye;Ql.xorshift7=Oye;Ql.xor4096=Mye;Ql.tychei=Pye;var Qb=Ql;var e6=function(){function e(t,n,r,a,i){this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);var o=i||Math.random();this.random=Qb.alea(o.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var t=this.nextVal;return this.nextVal=NaN,t}for(var n,r,a=!1;!a;){var i=void 0,o=void 0,s=void 0;do i=2*this.random()-1,o=2*this.random()-1,s=i*i+o*o;while(s>=1||s===0);var u=Math.sqrt(-2*Math.log(s)/s);n=this.mean+this.stdDev*i*u,r=this.mean+this.stdDev*o*u,(!this.truncated||this.isValidTruncated(n))&&(a=!0)}return(!this.truncated||this.isValidTruncated(r))&&(this.nextVal=this.convertValue(r)),this.convertValue(n)},e.prototype.convertValue=function(t){return this.dtype==null||this.dtype==="float32"?t:Math.round(t)},e.prototype.isValidTruncated=function(t){return t<=this.upper&&t>=this.lower},e}(),Bye=function(){function e(t,n,r,a){this.alpha=t,this.beta=1/n,this.dtype=r;var i=a||Math.random();this.randu=Qb.alea(i.toString()),this.randn=new e6(0,1,r,!1,this.randu()),t<1?this.d=t+2/3:this.d=t-1/3,this.c=1/Math.sqrt(9*this.d)}return e.prototype.nextValue=function(){for(var t,n,r,a,i,o;;){do a=this.randn.nextValue(),o=1+this.c*a;while(o<=0);if(o*=o*o,t=a*a,n=1-.331*t*t,r=.5*t+this.d*(1-o+Math.log(o)),i=this.randu(),i<n||Math.log(i)<r)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)},e.prototype.convertValue=function(t){return this.dtype==="float32"?t:Math.round(t)},e}(),Lye=function(){function e(t,n,r,a){t===void 0&&(t=0),n===void 0&&(n=1);var i=this;if(this.canReturnFloat=function(){return i.dtype==null||i.dtype==="float32"},this.min=t,this.range=n-t,this.dtype=r,a==null&&(a=Math.random()),typeof a=="number"&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(t," - ").concat(n," <= 1 and dtype is not float"));this.random=Qb.alea(a)}return e.prototype.convertValue=function(t){return this.canReturnFloat()?t:Math.round(t)},e.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},e}();function zye(e,t,n,r,a){if(n===void 0&&(n=1),r===void 0&&(r="float32"),gi(e),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type ".concat(r));for(var i=new Bye(t,n,r,a),o=Bu(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}var $ye=K({randomGamma_:zye});function Vye(e,t,n,r,a){if(t===void 0&&(t=0),n===void 0&&(n=1),gi(e),r!=null&&r==="bool")throw new Error("Unsupported data type ".concat(r));for(var i=new e6(t,n,r,!1,a),o=Bu(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}var N_=K({randomNormal_:Vye});function Wye(e,t,n){if(t!=null&&t==="bool")throw new Error("Unsupported data type ".concat(t));return N_(e,0,1,t,n)}var Uye=K({randomStandardNormal_:Wye});function Gye(e,t,n,r,a){t===void 0&&(t=0),n===void 0&&(n=1),r===void 0&&(r="float32"),gi(e);for(var i=Bu(e,r),o=new Lye(t,n,null,a),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}var t6=K({randomUniform_:Gye});function qye(e,t,n,r){return t6(e,t,n,"int32",r)}var Hye=K({randomUniformInt_:qye});function mh(e,t,n,r){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n===0)throw new Error("Cannot have a step of zero");var a={start:e,stop:t,step:n,dtype:r};return ee.runKernel(J1e,{},a)}function jye(e){var t=P(e,"input","real"),n={input:t};return ee.runKernel(Z1e,n)}var vh=K({real_:jye});function Kye(e){var t=P(e,"x","reciprocal"),n={x:t};return ee.runKernel(Q1e,n)}var Xye=K({reciprocal_:Kye});function Yye(e){var t=P(e,"x","relu"),n={x:t};return ee.runKernel(eme,n)}var d0=K({relu_:Yye});function Jye(e){var t=P(e,"x","relu6"),n={x:t};return ee.runKernel(ame,n)}var T_=K({relu6_:Jye});function Zye(e,t){var n=P(e,"x","reverse"),r={x:n},a={dims:t};return ee.runKernel(ime,r,a)}var Xl=K({reverse_:Zye});function Qye(e){var t=P(e,"x","reverse");return q(t.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank ".concat(t.rank,".")}),Xl(t,0)}var e3e=K({reverse1d_:Qye});function t3e(e,t){var n=P(e,"x","reverse");return q(n.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank ".concat(n.rank,".")}),Xl(n,t)}var n3e=K({reverse2d_:t3e});function r3e(e,t){var n=P(e,"x","reverse");return q(n.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank ".concat(n.rank,".")}),Xl(n,t)}var a3e=K({reverse3d_:r3e});function i3e(e,t){var n=P(e,"x","reverse");return q(n.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank ".concat(n.rank,".")}),Xl(n,t)}var o3e=K({reverse4d_:i3e});function s3e(e){var t=P(e,"x","round"),n={x:t};return ee.runKernel(ome,n)}var E_=K({round_:s3e});function u3e(e){var t=P(e,"x","rsqrt","float32"),n={x:t};return ee.runKernel(sme,n)}var l3e=K({rsqrt_:u3e});function c3e(e){var t=P(e,"x","selu"),n={x:t};return ee.runKernel(dme,n)}var p3e=K({selu_:c3e});function d3e(e,t,n,r,a,i,o){i===void 0&&(i=[1,1]),o===void 0&&(o="NHWC");var s=P(e,"x","separableConv2d"),u=P(t,"depthwiseFilter","separableConv2d"),l=P(n,"pointwiseFilter","separableConv2d"),c=s,p=!1;if(s.rank===3&&(p=!0,c=we(s,[1,s.shape[0],s.shape[1],s.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");q(c.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(c.rank,".")}),q(u.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(u.rank,".")}),q(l.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(u.rank,".")}),q(l.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(l.shape[0],".")}),q(l.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(l.shape[1],".")});var d=u.shape[2],f=u.shape[3];q(l.shape[2]===d*f,function(){return"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(d*f,", ")+"but got ".concat(l.shape[2],".")});var h=Kb(c,u,r,a,o,i),m=1,v=o0(h,l,m,"valid",o);return p?we(v,[v.shape[1],v.shape[2],v.shape[3]]):v}var f3e=K({separableConv2d_:d3e});function h3e(e,t){return Vt(this,void 0,void 0,function(){var n,r,a,i,o,s,c,u,l,c,p;return $t(this,function(d){switch(d.label){case 0:return n=P(e,"x","setdiff1d"),r=P(t,"y","setdiff1d"),q(n.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x (".concat(n.dtype,") and y (").concat(r.dtype,").")}),q(n.rank===1,function(){return"x should be 1D tensor, but got x (".concat(n.shape,").")}),q(r.rank===1,function(){return"y should be 1D tensor, but got y (".concat(r.shape,").")}),[4,n.data()];case 1:return a=d.sent(),[4,r.data()];case 2:for(i=d.sent(),o=new Set(i),s=0,c=0;c<a.length;c++)o.has(a[c])||s++;for(u=new Nb([s],n.dtype),l=new Nb([s],"int32"),c=0,p=0;c<a.length;c++)o.has(a[c])||(u.values[p]=a[c],l.values[p]=c,p++);return[2,[u.toTensor(),l.toTensor()]]}})})}var m3e=h3e;function v3e(e){var t=P(e,"x","sign"),n={x:t};return ee.runKernel(vme,n)}var g3e=K({sign_:v3e});function y3e(e){var t=P(e,"x","sin","float32"),n={x:t};return ee.runKernel(hme,n)}var b3e=K({sin_:y3e});function w3e(e){var t=P(e,"x","sinh"),n={x:t};return ee.runKernel(mme,n)}var x3e=K({sinh_:w3e});function S3e(e,t,n){var r=P(e,"x","slice1d");return q(r.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor")}),Ln(r,[t],[n])}var k3e=K({slice1d_:S3e});function N3e(e,t,n){var r=P(e,"x","slice2d");return q(r.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor")}),Ln(r,t,n)}var T3e=K({slice2d_:N3e});function E3e(e,t,n){var r=P(e,"x","slice3d");return q(r.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor")}),Ln(r,t,n)}var I3e=K({slice3d_:E3e});function C3e(e,t,n){var r=P(e,"x","slice4d");return q(r.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor")}),Ln(r,t,n)}var D3e=K({slice4d_:C3e});function _3e(e,t){t===void 0&&(t=-1);var n=P(e,"logits","softmax","float32");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(t));var r={logits:n},a={dim:t};return ee.runKernel(kme,r,a)}var A3e=K({softmax_:_3e});function F3e(e){q(e.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,".")});var t={input:e};return ee.runKernel(Qhe,t)}var n6=K({fft_:F3e});function R3e(e){q(e.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,".")});var t={input:e};return ee.runKernel(l1e,t)}var Qv=K({ifft_:R3e});function O3e(e){var t=e.shape[e.shape.length-1],n=e.size/t,r;if(t<=2){var a=we(e,[n,t]);r=Qv(a)}else{var i=[n,2*(t-1)],o=we(vh(e),[n,t]),s=we(p0(e),[n,t]),u=Xl(Ln(o,[0,1],[n,t-2]),1),l=Ft(Xl(Ln(s,[0,1],[n,t-2]),1),cr(-1)),c=Za([o,u],1),p=Za([s,l],1),a=we(Lu(c,p),[i[0],i[1]]);r=Qv(a)}if(r=vh(r),e.rank===3&&e.shape[0]!==0){var d=r,f=e.shape[0];r=we(r,[f,r.shape[0]/f,r.shape[1]]),d.dispose()}return r}var I_=K({irfft_:O3e});function M3e(e,t,n){n===void 0&&(n=0);var r=P(e,"x","split"),a={x:r},i={numOrSizeSplits:t,axis:n};return ee.runKernel(Sme,a,i)}var gh=K({split_:M3e});function P3e(e,t){q(e.dtype==="float32",function(){return"The dtype for rfft() must be real value but got ".concat(e.dtype)});var n=e.shape[e.shape.length-1],r=e.size/n,a;if(t!=null&&t<n){var i=e.shape.map(function(g){return 0}),o=e.shape.map(function(g){return g});o[e.shape.length-1]=t,a=Ln(e,i,o),n=t}else if(t!=null&&t>n){var s=e.shape.map(function(g){return g});s[e.shape.length-1]=t-n,a=Za([e,Fp(s)],e.shape.length-1),n=t}else a=e;var u=Xb(a),l=we(Lu(a,u),[r,n]),c=n6(l),p=Math.floor(n/2)+1,d=vh(c),f=p0(c),h=gh(d,[p,n-p],d.shape.length-1),m=gh(f,[p,n-p],f.shape.length-1),v=a.shape.slice();return v[a.shape.length-1]=p,we(Lu(h[0],m[0]),v)}var r6=K({rfft_:P3e});function B3e(e,t){var n,r=P(e,"a","squaredDifference"),a=P(t,"b","squaredDifference");n=ke(er(r,a),2),r=n[0],a=n[1],Or(r.shape,a.shape);var i={a:r,b:a},o={};return ee.runKernel(Dme,i,o)}var C_=K({squaredDifference_:B3e});function L3e(e,t){var n=P(e,"x","squeeze","string_or_numeric");return we(n,Gfe(n.shape,t).newShape)}var a6=K({squeeze_:L3e});function z3e(e,t){t===void 0&&(t=0);var n=jv(e,"tensors","stack","string_or_numeric");q(n.length>=1,function(){return"Pass at least one tensor to tf.stack"}),n.length>0&&q(t<=n[0].rank,function(){return"Axis must be <= rank of the tensor"});var r=n,a={axis:t};return ee.runKernel(U1e,r,a)}var yh=K({stack_:z3e});function $3e(e,t){t===void 0&&(t=0);var n=P(e,"x","step"),r={x:n},a={alpha:t};return ee.runKernel(Gme,r,a)}var D_=K({step_:$3e});function V3e(e,t,n,r,a,i,o,s,u){a===void 0&&(a=0),i===void 0&&(i=0),o===void 0&&(o=0),s===void 0&&(s=0),u===void 0&&(u=0);var l=P(e,"x","stridedSlice","string_or_numeric"),c={x:l},p={begin:t,end:n,strides:r,beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u};return ee.runKernel(Ame,c,p)}var W3e=K({stridedSlice_:V3e});function U3e(e){var t=P(e,"x","tan","float32"),n={x:t};return ee.runKernel(Pme,n)}var G3e=K({tan_:U3e});function Dp(e,t,n){var r=zu(e,n);return Vu(e,t,r,n)}function no(e,t){Rp(e);var n=zu(e,t);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");var r=null;return Vu(e,r,n,t)}function ch(e,t,n){if(Rp(e),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=zu(e,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Vu(e,t,r,n)}function q3e(e,t,n){if(Rp(e),t!=null&&t.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=zu(e,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Vu(e,t,r,n)}function H3e(e,t,n){if(Rp(e),t!=null&&t.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=zu(e,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Vu(e,t,r,n)}function j3e(e,t,n){if(Rp(e),t!=null&&t.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=zu(e,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Vu(e,t,r,n)}function K3e(e,t,n){if(Rp(e),t!=null&&t.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=zu(e,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return t=t||r,Vu(e,t,r,n)}function X3e(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + "+"shape[sliceDim:], got updates.shape: ".concat(n.shape)+", indices.shape: ".concat(t.shape,", shape: ").concat(e)+", sliceDim: ".concat(r,", and batchDim: ").concat(a,".");if(n.rank<a)throw new Error(i+" update.rank < ".concat(a,". "));if(e.length<r+(n.rank-a))throw new Error(i+" Output shape length < ".concat(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(i+" update.rank != ".concat(a+e.length-r));for(var o=0;o<a;++o)if(n.shape[o]!==t.shape[o])throw new Error(i+" updates.shape[".concat(o,"] (").concat(n.shape[o],") != indices.shape[").concat(o,"] (").concat(t.shape[o],")."));for(var o=0;o<n.rank-a;++o)if(n.shape[o+a]!==e[o+r])throw new Error(i+" updates.shape[".concat(o+a,"] (").concat(n.shape[o+a],") != shape[").concat(o+a,"] (").concat(e[o+a],")"))}function __(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+" but the rank was ".concat(e.rank,"."));if(t.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(n.length===0){if(t.size===0)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(e.size===0)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}X3e(n,t,e)}function Y3e(e,t,n){var r=P(e,"tensor","tensorScatterupdate"),a=P(t,"indices","tensorScatterupdate","int32"),i=P(n,"updates","tensorScatterupdate");if(__(i,a,r.shape),r.dtype!==i.dtype)throw new Error("tensor and updates must have the same dtype, instead they are ".concat(r.dtype," and ").concat(i.dtype,"."));var o={tensor:r,indices:a,updates:i},s={};return ee.runKernel(lme,o,s)}var J3e=K({tensorScatterUpdate_:Y3e});function Z3e(e,t,n){t===void 0&&(t=1),n===void 0&&(n=!0);var r=P(e,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(a,") ")+"but got ".concat(t));var i={x:r},o={k:t,sorted:n},s=ke(ee.runKernel(Lme,i,o),2),u=s[0],l=s[1];return{values:u,indices:l}}var Q3e=K({topk_:Z3e});function e4e(e,t,n,r,a){if(t===void 0&&(t=0),n===void 0&&(n=1),gi(e),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");for(var i=new e6(t,n,r,!0,a),o=Bu(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}var t4e=K({truncatedNormal_:e4e});function n4e(e,t){t===void 0&&(t=0);var n=P(e,"x","unique","string_or_numeric");q(n.rank>0,function(){return"The input tensor must be at least 1D"});var r={x:n},a={axis:t},i=ke(ee.runKernel($me,r,a),2),o=i[0],s=i[1];return{values:o,indices:s}}var r4e=K({unique_:n4e});function a4e(e,t,n){var r=P(e,"x","unsortedSegmentSum"),a=P(t,"segmentIds","unsortedSegmentSum","int32");q(ph(n),function(){return"numSegments must be of dtype int"});var i={x:r,segmentIds:a},o={numSegments:n};return ee.runKernel(Wme,i,o)}var i4e=K({unsortedSegmentSum_:a4e});function o4e(e,t){t===void 0&&(t=0);var n=P(e,"x","unstack","string_or_numeric");q(t>=-n.shape.length&&t<n.shape.length,function(){return"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")});var r={value:n},a={axis:t};return ee.runKernel(Vme,r,a)}var i6=K({unstack_:o4e});function s4e(e,t){return Zb(e,t,"right")}function u4e(e,t,n,r){return t===void 0&&(t=!0),ee.makeVariable(e,t,n,r)}function l4e(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);for(var a=Bu(e,"int32"),i=Bu([n.length,e.length],"int32"),r=0;r<n.length;r++){var o=a.indexToLoc(n[r]),s=r*e.length;i.values.set(o,s)}return i.toTensor()}function c4e(e){return Vt(this,void 0,void 0,function(){var t,n,r;return $t(this,function(a){switch(a.label){case 0:return t=P(e,"condition","whereAsync","bool"),[4,t.data()];case 1:return n=a.sent(),r=l4e(t.shape,n),e!==t&&t.dispose(),[2,r]}})})}var A_=c4e;function p4e(e,t,n){return Vt(this,void 0,void 0,function(){var r,a,i,o,s,u,l,c,p,d,f,h,m;return $t(this,function(v){switch(v.label){case 0:for(r=P(e,"tensor","boolMask"),a=P(t,"mask","boolMask","bool"),i=n??0,o=a.rank,s=r.shape,q(o>0,function(){return"mask cannot be scalar"}),ro(s.slice(i,i+o),a.shape,"mask's shape must match the first K dimensions of tensor's shape,"),u=1,l=i;l<i+o;l++)u*=s[l];return c=s.slice(0,i).concat([u],s.slice(i+o)),p=we(r,c),d=we(a,[-1]),[4,A_(d)];case 1:return f=v.sent(),h=a6(f,[1]),m=i_(p,h,i),e!==r&&r.dispose(),t!==a&&a.dispose(),h.dispose(),p.dispose(),d.dispose(),f.dispose(),[2,m]}})})}var d4e=p4e;function f4e(e,t){return ee.tidy(e,t)}function h4e(e){var t=qD(e);t.forEach(function(n){return n.dispose()})}function m4e(){return ee.backendName}function v4e(){return ee.backend}function g4e(e,t,n){var r=P(e,"x","transpose");if(t==null&&(t=r.shape.map(function(o,s){return s}).reverse()),q(r.rank===t.length,function(){return"Error in transpose: rank of input ".concat(r.rank," ")+"must match length of perm ".concat(t,".")}),t.forEach(function(o){q(o>=0&&o<r.rank,function(){return"All entries in 'perm' must be between 0 and ".concat(r.rank-1)+" but got ".concat(t)})}),r.rank<=1)return r.clone();var a={x:r},i={perm:t};return r.dtype==="complex64"?f4e(function(){var o=vh(r),s=p0(r);return o=ee.runKernel(sb,{x:o},i),s=ee.runKernel(sb,{x:s},i),n&&(s=us(s)),Lu(o,s)}):ee.runKernel(sb,a,i)}var Mb=K({transpose_:g4e});function y4e(e,t,n,r,a){a===void 0&&(a=!0);var i=P(e,"v","movingAverage"),o=P(t,"x","movingAverage"),s=P(n,"decay","movingAverage");dve(i,o),q(Yl(i.shape,o.shape),function(){return"Shape mismatch in v and x"});var u=cr(1),l=qt(u,s),c=Ft(qt(o,i),l);if(a){q(r!=null,function(){return"When using zeroDebias: true, step is required."});var p=P(r,"step","movingAverage");c=da(c,qt(u,Yb(s,p)))}return Rr(i,c)}var b4e=K({movingAverage_:y4e});function w4e(e,t,n){gi(n);var r=P(e,"indices","scatterND","int32"),a=P(t,"updates","scatterND");__(a,r,n);var i={indices:r,updates:a},o={shape:n};return ee.runKernel(ume,i,o)}var x4e=K({scatterND_:w4e});function S4e(e,t,n,r){if(e.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type,"+" but the dtype was ".concat(e.dtype,"."));if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix,"+" but got shape ".concat(e.shape,"."));var a=e.rank>0?e.shape[0]:1,i=e.rank>1?e.shape[1]:1;if(n.length!==i)throw new Error("outputShape has incorrect number of elements:,"+" ".concat(n.length,", should be: ").concat(i,"."));var o=t.size;if(!(t.rank===0||t.rank===1&&o===a))throw new Error("sparseValues has incorrect shape "+"".concat(t.shape,", should be [] or [").concat(a,"]"));if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}function k4e(e,t,n,r){r===void 0&&(r=0),gi(n);var a=P(e,"sparseIndices","sparseToDense","int32"),i=P(t,"sparseValues","sparseToDense","string_or_numeric"),o=P(r,"defaultValue","sparseToDense",i.dtype);S4e(a,i,n,o);var s={sparseIndices:a,sparseValues:i,defaultValue:o},u={outputShape:n};return ee.runKernel(Cme,s,u)}var N4e=K({sparseToDense_:k4e});function T4e(e,t){var n=P(t,"indices","gatherND","int32"),r=P(e,"x","gatherND","string_or_numeric"),a={params:r,indices:n};return ee.runKernel(o1e,a)}var E4e=K({gatherND_:T4e});function I4e(e,t){if(t==null)return e.shape.slice();if(Yl(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)t[r]==null&&e.shape[r]!=null?n.push(e.shape[r]):n.push(t[r]);return n}return t}function C4e(e,t,n,r){var a=P(e,"x","dropout");if(q(a.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(a.dtype," tensor instead.")}),q(t>=0&&t<1,function(){return"rate must be a float in the range [0, 1), but got ".concat(t,".")}),t===0)return e instanceof Ya?a.clone():a;var i=I4e(a,n),o=1-t,s=da(a_(Rr(t6(i,0,1,"float32",r),o)),o);return Ft(a,s)}var D4e=K({dropout_:C4e});function F_(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function o6(e,t,n){for(var r=1-e%2,a=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+r-1);a[i]=t-n*Math.cos(o)}return no(a,"float32")}function _4e(e,t,n){return n===void 0&&(n=1),Vt(this,void 0,void 0,function(){var r,a,i,o,s,u,l,c,p,d,f,h,m,v,v;return $t(this,function(g){switch(g.label){case 0:return r=P(e,"predictions","inTopK"),a=P(t,"targets","inTopK"),q(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, "+"but got ".concat(r.rank)}),q(r.rank-1===a.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+"".concat(r.rank," and targets rank ").concat(a.rank)}),ro(r.shape.slice(0,r.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),i=r.shape[r.shape.length-1],q(n>0&&n<=i,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last "+"dimension (".concat(i,"), but got ").concat(n)}),[4,r.data()];case 1:return o=g.sent(),[4,a.data()];case 2:for(s=g.sent(),u=ke([o.length/i,i],2),l=u[0],c=u[1],p=qfe("bool",l),d=0;d<l;d++){for(f=d*c,h=o.subarray(f,f+c),m=[],v=0;v<h.length;v++)m.push({value:h[v],index:v});for(m.sort(function(y,w){return w.value-y.value}),p[d]=0,v=0;v<n;v++)if(m[v].index===s[d]){p[d]=1;break}}return e!==r&&r.dispose(),t!==a&&a.dispose(),[2,Dp(p,a.shape,"bool")]}})})}var A4e=_4e;function F4e(e,t,n,r,a,i,o){i===void 0&&(i="NHWC");var s=e;e.rank===3&&(s=we(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;u.rank===3&&(u=we(t,[1,t.shape[0],t.shape[1],t.shape[2]])),q(s.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(s.shape,".")}),q(u.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(u.shape,".")}),q(n.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,".")});var l=i==="NHWC"?s.shape[3]:s.shape[1],c=i==="NHWC"?u.shape[3]:u.shape[1];q(l===n[2],function(){return"Error in conv2dDerFilter: depth of input ".concat(l,") must ")+"match input depth in filter (".concat(n[2],".")}),q(c===n[3],function(){return"Error in conv2dDerFilter: depth of dy (".concat(c,") must ")+"match output depth for filter (".concat(n[3],").")}),Mo("conv2dDerFilter",a,o);var p={x:s,dy:u},d={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,filterShape:n};return ee.runKernel(Dhe,p,d)}var R4e=K({conv2DBackpropFilter_:F4e});function s6(e,t,n){if(n==null||n==="linear")return e;if(n==="relu")return Ft(e,D_(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function u6(e,t){var n=t,r=d2e(e.shape,t.shape);return r.length>0&&(n=Nn(n,r)),we(n,e.shape)}function l6(e,t,n,r){if(t==="linear")return e;if(t==="relu")return d0(e);if(t==="elu")return t_(e);if(t==="relu6")return T_(e);if(t==="prelu")return v_(e,n);if(t==="leakyrelu")return s_(e,r);if(t==="sigmoid")return Ip(e);throw new Error("Unknown fused activation ".concat(t,"."))}var c6=function(e,t){var n=e>0;return!n||t==="linear"};function O4e(e){var t,n=e.x,r=e.filter,a=e.strides,i=e.pad,o=e.dataFormat,s=o===void 0?"NHWC":o,u=e.dilations,l=u===void 0?[1,1]:u,c=e.dimRoundingMode,p=e.bias,d=e.activation,f=d===void 0?"linear":d,h=e.preluActivationWeights,m=e.leakyreluAlpha;if(f=f||"linear",c6(ee.state.gradientDepth,f)===!1){q(s==="NHWC",function(){return"Error in fused conv2d: got dataFormat of ".concat(s," but ")+"only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear."});var v=o0(n,r,a,i,s,l,c);return p!=null&&(v=Rr(v,p)),l6(v,f,h,m)}var g=P(n,"x","conv2d","float32"),y=P(r,"filter","conv2d","float32"),w=g,b=!1;g.rank===3&&(b=!0,w=we(g,[1,g.shape[0],g.shape[1],g.shape[2]])),q(w.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(w.rank,".")}),q(y.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(y.rank,".")}),Mo("fused conv2d",i,c);var x=s==="NHWC"?w.shape[3]:w.shape[1];q(y.shape[2]===x,function(){return"Error in conv2d: depth of input (".concat(x,") must match ")+"input depth for filter ".concat(y.shape[2],".")}),q($u(a,l),function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(a," and dilations '").concat(l,"'")});var k=jb(w.shape,y.shape,a,l,i,c),N;p!=null&&(N=P(p,"bias","fused conv2d"),t=ke(er(N,g),1),N=t[0],s==="NHWC"?Or(k.outShape,N.shape):(q(N.shape.length<=1,function(){return"Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of "+"rank-".concat(N.shape.length,".")}),q(N.shape.length===0||N.shape[0]===k.outChannels||N.shape[0]===1,function(){return"Error in fused conv2d: bias shape (".concat(N.shape,") is not ")+"compatible with the number of output channels "+"(".concat(k.outChannels,")")})));var E;if(h!=null){var C=h.shape;if(q(C.length<=1||C.length===3,function(){return"Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of "+"rank-".concat(C.length,".")}),C.length===1)q(C[0]===1||C[0]===k.outChannels,function(){return"Error in fused conv2d: PReLU activation weights "+"(".concat(C,") is not compatible with the number of output ")+"channels (".concat(k.outChannels,").")});else if(C.length===3)try{Or(C,k.outShape)}catch{var R="Error in fused conv2d: PReLU activation weights (".concat(C,") ")+"is not compatible with the output shape of the conv2d "+"(".concat(k.outShape,").");throw Error(R)}E=P(h,"prelu weights","fused conv2d")}var A=function(B,W){q(s==="NHWC",function(){return"Error in gradient of fused conv2D: got dataFormat of ".concat(s," but only NHWC is currently supported.")});var Y=ke(W,4),Q=Y[0],G=Y[1],X=Y[2],ie=Y[3],ae=s6(B,X,f);q(Xv(l),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(l,"'")});var le=ZD(G.shape,ae,Q,a,i),de=R4e(G,ae,Q.shape,a,i),ge=[le,de];if(ie!=null){var Ee=u6(ie,ae);ge.push(Ee)}return ge},M={x:w,filter:y,bias:N,preluActivationWeights:E},$={strides:a,pad:i,dataFormat:s,dilations:l,dimRoundingMode:c,activation:f,leakyreluAlpha:m};if(p==null){var z=Us(function(B,W,Y){var Q=ee.runKernel(YC,M,$);return Y([W,B,Q]),b&&(Q=we(Q,[Q.shape[1],Q.shape[2],Q.shape[3]])),{value:Q,gradFunc:A}});return z(w,y)}else{var L=Us(function(B,W,Y,Q){var G=ee.runKernel(YC,M,$);return Q([W,B,G,Y]),b&&(G=we(G,[G.shape[1],G.shape[2],G.shape[3]])),{value:G,gradFunc:A}});return L(w,y,N)}}var M4e=K({fusedConv2d_:O4e});function P4e(e,t,n,r,a,i,o){i===void 0&&(i=[1,1]);var s=e;e.rank===3&&(s=we(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;u.rank===3&&(u=we(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var l={x:s,dy:u},c={strides:r,pad:a,dimRoundingMode:o,dilations:i,filterShape:n};return ee.runKernel(Vhe,l,c)}var B4e=K({depthwiseConv2dNativeBackpropFilter_:P4e});function L4e(e,t,n,r,a,i,o){i===void 0&&(i=[1,1]);var s=t,u=!1;t.rank===3&&(u=!0,s=we(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var l={dy:s,filter:n},c={strides:r,pad:a,dimRoundingMode:o,dilations:i,inputShape:e},p=ee.runKernel(Whe,l,c);return u?we(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var z4e=K({depthwiseConv2dNativeBackpropInput_:L4e});function $4e(e){var t,n=e.x,r=e.filter,a=e.strides,i=e.pad,o=e.dataFormat,s=o===void 0?"NHWC":o,u=e.dilations,l=u===void 0?[1,1]:u,c=e.dimRoundingMode,p=e.bias,d=e.activation,f=d===void 0?"linear":d,h=e.preluActivationWeights,m=e.leakyreluAlpha;if(c6(ee.state.gradientDepth,f)===!1){var v=Kb(n,r,a,i,s,l,c);return p!=null&&(v=Rr(v,p)),l6(v,f,h,m)}var g=P(n,"x","depthwiseConv2d","float32"),y=P(r,"filter","depthwiseConv2d","float32"),w=g,b=!1;g.rank===3&&(b=!0,w=we(g,[1,g.shape[0],g.shape[1],g.shape[2]])),q(w.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(w.rank,".")}),q(y.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, "+"but got rank ".concat(y.rank,".")}),q(w.shape[3]===y.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels "+"(".concat(w.shape[3],") must match the inChannels dimension in ")+"filter ".concat(y.shape[2],".")}),l==null&&(l=[1,1]),q($u(a,l),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must "+"be 1. Got strides ".concat(a," and dilations '").concat(l,"'")}),Mo("fused depthwiseConv2d",i,c);var x=jb(w.shape,y.shape,a,l,i,c,!0),k;p!=null&&(k=P(p,"bias","fused conv2d"),t=ke(er(k,g),1),k=t[0],Or(x.outShape,k.shape));var N;h!=null&&(N=P(h,"prelu weights","fused depthwiseConv2d"));var E=function($,z){q(Xv(l),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(l,"'")});var L=ke(z,4),B=L[0],W=L[1],Y=L[2],Q=L[3],G=s6($,Y,f),X=z4e(W.shape,G,B,a,i,l,c),ie=B4e(W,G,B.shape,a,i,l,c);if(Q!=null){var ae=u6(k,G);return[X,ie,ae]}return[X,ie]},C={x:w,filter:y,bias:k,preluActivationWeights:N},R={strides:a,pad:i,dataFormat:s,dilations:l,dimRoundingMode:c,activation:f,leakyreluAlpha:m};if(p==null){var A=Us(function($,z,L){var B=ee.runKernel(JC,C,R);return L([z,$,B]),b&&(B=we(B,[B.shape[1],B.shape[2],B.shape[3]])),{value:B,gradFunc:E}});return A(w,y)}else{var M=Us(function($,z,L,B){var W=ee.runKernel(JC,C,R);return B([z,$,W,L]),b&&(W=we(W,[W.shape[1],W.shape[2],W.shape[3]])),{value:W,gradFunc:E}});return M(w,y,k)}}var V4e=K({fusedDepthwiseConv2d_:$4e});function W4e(e){var t,n,r=e.a,a=e.b,i=e.transposeA,o=i===void 0?!1:i,s=e.transposeB,u=s===void 0?!1:s,l=e.bias,c=e.activation,p=c===void 0?"linear":c,d=e.preluActivationWeights,f=e.leakyreluAlpha,h=f===void 0?.2:f;if(c6(ee.state.gradientDepth,p)===!1){var m=en(r,a,o,u);return l!=null&&(m=Rr(m,l)),l6(m,p,d,h)}var v=P(r,"a","fused matMul"),g=P(a,"b","fused matMul");t=ke(er(v,g),2),v=t[0],g=t[1];var y=o?v.shape[v.rank-2]:v.shape[v.rank-1],w=u?g.shape[g.rank-1]:g.shape[g.rank-2],b=o?v.shape[v.rank-1]:v.shape[v.rank-2],x=u?g.shape[g.rank-2]:g.shape[g.rank-1],k=v.shape.slice(0,-2),N=g.shape.slice(0,-2),E=Fr(k),C=Fr(N);q(y===w,function(){return"Error in fused matMul: inner shapes (".concat(y,") and (")+"".concat(w,") of Tensors with shapes ").concat(v.shape," and ")+"".concat(g.shape," and transposeA=").concat(o)+" and transposeB=".concat(u," must match.")});var R=Or(v.shape.slice(0,-2),g.shape.slice(0,-2)),A=R.concat([b,x]),M=o?we(v,[E,y,b]):we(v,[E,b,y]),$=u?we(g,[C,x,w]):we(g,[C,w,x]),z;l!=null&&(z=P(l,"bias","fused matMul"),n=ke(er(z,v),1),z=n[0],Or(A,z.shape));var L;d!=null&&(L=P(d,"prelu weights","fused matMul"));var B=function(X,ie){var ae=ke(ie,4),le=ae[0],de=ae[1],ge=ae[2],Ee=ae[3],he=s6(we(X,ge.shape),ge,p),xe,Ne;if(!o&&!u?(xe=en(he,de,!1,!0),Ne=en(le,he,!0,!1)):!o&&u?(xe=en(he,de,!1,!1),Ne=en(he,le,!0,!1)):o&&!u?(xe=en(de,he,!1,!0),Ne=en(le,he,!1,!1)):(xe=en(de,he,!0,!0),Ne=en(he,le,!0,!0)),l!=null){var $e=u6(Ee,he);return[xe,Ne,$e]}else return[xe,Ne]},W={a:M,b:$,bias:z,preluActivationWeights:L},Y={transposeA:o,transposeB:u,activation:p,leakyreluAlpha:h};if(l==null){var Q=Us(function(X,ie,ae){var le=ee.runKernel(XC,W,Y);return ae([X,ie,le]),{value:we(le,A),gradFunc:B}});return Q(M,$)}else{var G=Us(function(X,ie,ae,le){var de=ee.runKernel(XC,W,Y);return le([X,ie,de,ae]),{value:we(de,A),gradFunc:B}});return G(M,$,z)}}var U4e=K({fusedMatMul_:W4e});var G4e={__proto__:null,conv2d:M4e,depthwiseConv2d:V4e,matMul:U4e};function q4e(e){return o6(e,.54,.46)}var H4e=K({hammingWindow_:q4e});function j4e(e){return o6(e,.5,.5)}var R_=K({hannWindow_:j4e});function K4e(e,t,n,r,a){r===void 0&&(r=!1),a===void 0&&(a=0);for(var i=0,o=[];i+t<=e.size;)o.push(Ln(e,i,t)),i+=n;if(r)for(;i<e.size;){var s=i+t-e.size,u=Za([Ln(e,i,t-s),i0([s],a)]);o.push(u),i+=n}return o.length===0?ch([],[0,t]):we(Za(o),[o.length,t])}var O_=K({frame_:K4e});function X4e(e,t,n,r,a){a===void 0&&(a=R_),r==null&&(r=F_(t));var i=O_(e,t,n),o=Ft(i,a(t));return r6(o,r)}var Y4e=K({stft_:X4e});function J4e(e,t,n,r,a,i){a===void 0&&(a="bilinear"),i===void 0&&(i=0);var o=P(e,"image","cropAndResize"),s=P(t,"boxes","cropAndResize","float32"),u=P(n,"boxInd","cropAndResize","int32"),l=s.shape[0];q(o.rank===4,function(){return"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(o.rank,".")}),q(s.rank===2&&s.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size [".concat(l,",4] ")+"but had shape ".concat(s.shape,".")}),q(u.rank===1&&u.shape[0]===l,function(){return"Error in cropAndResize: boxInd must be have size [".concat(l,"] ")+"but had shape ".concat(s.shape,".")}),q(r.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(r.length,".")}),q(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was ".concat(r)}),q(a==="bilinear"||a==="nearest",function(){return"method must be bilinear or nearest, but was ".concat(a)});var c={image:o,boxes:s,boxInd:u},p={method:a,extrapolationValue:i,cropSize:r},d=ee.runKernel(Bhe,c,p);return d}var Z4e=K({cropAndResize_:J4e});function Q4e(e){var t=P(e,"image","flipLeftRight","float32");q(t.rank===4,function(){return"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,".")});var n={image:t},r=ee.runKernel(t1e,n,{});return r}var ebe=K({flipLeftRight_:Q4e});function tbe(e){var t=P(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];q(t.rank>=2,function(){return"Error in grayscaleToRGB: images must be at least rank 2, "+"but got rank ".concat(t.rank,".")}),q(r===1,function(){return"Error in grayscaleToRGB: last dimension of a grayscale image "+"should be size 1, but got size ".concat(r,".")});var a=new Array(t.rank);return a.fill(1,0,n),a[n]=3,lh(t,a)}var nbe=K({grayscaleToRGB_:tbe});function rbe(e){var t=P(e,"image","RGBToGrayscale"),n=t.rank-1,r=t.shape[n];q(t.rank>=2,function(){return"Error in RGBToGrayscale: images must be at least rank 2, "+"but got rank ".concat(t.rank,".")}),q(r===3,function(){return"Error in RGBToGrayscale: last dimension of an RGB image "+"should be size 3, but got size ".concat(r,".")});var a=t.dtype,i=Er(t,"float32"),o=no([.2989,.587,.114]),s;switch(t.rank){case 2:s=Np("ij,j->i",i,o);break;case 3:s=Np("ijk,k->ij",i,o);break;case 4:s=Np("ijkl,l->ijk",i,o);break;case 5:s=Np("ijklm,m->ijkl",i,o);break;case 6:s=Np("ijklmn,n->ijklm",i,o);break;default:throw new Error("Not a valid tensor rank.")}return s=Mu(s,-1),Er(s,a)}var abe=K({rgbToGrayscale_:rbe});function ibe(e,t,n,r){n===void 0&&(n=0),r===void 0&&(r=.5);var a=P(e,"image","rotateWithOffset","float32");q(a.rank===4,function(){return"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(a.rank,".")});var i={image:a},o={radians:t,fillValue:n,center:r},s=ee.runKernel(qme,i,o);return s}var obe=K({rotateWithOffset_:ibe});function Op(e,t,n,r,a,i){r==null&&(r=.5),a==null&&(a=Number.NEGATIVE_INFINITY),i==null&&(i=0);var o=e.shape[0];return n=Math.min(n,o),q(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '".concat(r,"'")}),q(e.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")}),q(e.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])}),q(t.rank===1,function(){return"scores must be a 1D tensor"}),q(t.shape[0]===o,function(){return"scores has incompatible shape with boxes. Expected ".concat(o,", ")+"but was ".concat(t.shape[0])}),q(0<=i&&i<=1,function(){return"softNmsSigma must be in [0, 1], but was '".concat(i,"'")}),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}function sbe(e,t,n,r,a){r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY);var i=P(e,"boxes","nonMaxSuppression","float32"),o=P(t,"scores","nonMaxSuppression","float32"),s=Op(i,o,n,r,a);n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold;var u={maxOutputSize:n,iouThreshold:r,scoreThreshold:a};return ee.runKernel(L1e,{boxes:i,scores:o},u)}var ube=K({nonMaxSuppression_:sbe});function lbe(e,t,n){var r=cbe(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function cbe(e,t,n){return dbe(e,t,n||pbe)}function pbe(e,t){return e>t?1:e<t?-1:0}function dbe(e,t,n){for(var r=0,a=e.length,i=0,o=!1;r<a;){i=r+(a-r>>>1);var s=n(t,e[i]);s>0?r=i+1:(a=i,o=!s)}return o?r:-r-1}function fbe(e,t,n,r,a){return p6(e,t,n,r,a,0)}function hbe(e,t,n,r,a,i){return p6(e,t,n,r,a,0,!1,i,!0)}function mbe(e,t,n,r,a,i){return p6(e,t,n,r,a,i,!0)}function p6(e,t,n,r,a,i,o,s,u){o===void 0&&(o=!1),s===void 0&&(s=!1),u===void 0&&(u=!1);for(var l=[],c=0;c<t.length;c++)t[c]>a&&l.push({score:t[c],boxIndex:c,suppressBeginIndex:0});l.sort(pD);for(var p=i>0?-.5/i:0,d=[],f=[];d.length<n&&l.length>0;){var h=l.pop(),m=h.score,v=h.boxIndex,g=h.suppressBeginIndex;if(m<a)break;for(var y=!1,w=d.length-1;w>=g;--w){var b=vbe(e,v,d[w]);if(b>=r){y=!0;break}if(h.score=h.score*gbe(r,p,b),h.score<=a)break}h.suppressBeginIndex=d.length,y||(h.score===m?(d.push(v),f.push(h.score)):h.score>a&&lbe(l,h,pD))}var x=d.length,k=n-x;s&&k>0&&(d.push.apply(d,jt([],ke(new Array(k).fill(0)),!1)),f.push.apply(f,jt([],ke(new Array(k).fill(0)),!1)));var N={selectedIndices:d};return o&&(N.selectedScores=f),u&&(N.validOutputs=x),N}function vbe(e,t,n){var r=e.subarray(t*4,t*4+4),a=e.subarray(n*4,n*4+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(a[0],a[2]),c=Math.min(a[1],a[3]),p=Math.max(a[0],a[2]),d=Math.max(a[1],a[3]),f=(s-i)*(u-o),h=(p-l)*(d-c);if(f<=0||h<=0)return 0;var m=Math.max(i,l),v=Math.max(o,c),g=Math.min(s,p),y=Math.min(u,d),w=Math.max(g-m,0)*Math.max(y-v,0);return w/(f+h-w)}function gbe(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function pD(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function ybe(e,t,n,r,a){return r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),Vt(this,void 0,void 0,function(){var i,o,s,u,l,c,p;return $t(this,function(d){switch(d.label){case 0:return i=P(e,"boxes","nonMaxSuppressionAsync"),o=P(t,"scores","nonMaxSuppressionAsync"),s=Op(i,o,n,r,a),n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold,[4,Promise.all([i.data(),o.data()])];case 1:return u=d.sent(),l=u[0],c=u[1],p=fbe(l,c,n,r,a).selectedIndices,i!==e&&i.dispose(),o!==t&&o.dispose(),[2,no(p,"int32")]}})})}var bbe=ybe;function wbe(e,t,n,r,a,i){r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),i===void 0&&(i=0);var o=P(e,"boxes","nonMaxSuppression"),s=P(t,"scores","nonMaxSuppression"),u=Op(o,s,n,r,a,i);n=u.maxOutputSize,r=u.iouThreshold,a=u.scoreThreshold,i=u.softNmsSigma;var l={boxes:o,scores:s},c={maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i},p=ee.runKernel($1e,l,c);return{selectedIndices:p[0],selectedScores:p[1]}}var xbe=K({nonMaxSuppressionWithScore_:wbe});function Sbe(e,t,n,r,a,i){return r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),i===void 0&&(i=0),Vt(this,void 0,void 0,function(){var o,s,u,l,c,p,d,f,h;return $t(this,function(m){switch(m.label){case 0:return o=P(e,"boxes","nonMaxSuppressionAsync"),s=P(t,"scores","nonMaxSuppressionAsync"),u=Op(o,s,n,r,a,i),n=u.maxOutputSize,r=u.iouThreshold,a=u.scoreThreshold,i=u.softNmsSigma,[4,Promise.all([o.data(),s.data()])];case 1:return l=m.sent(),c=l[0],p=l[1],d=mbe(c,p,n,r,a,i),f=d.selectedIndices,h=d.selectedScores,o!==e&&o.dispose(),s!==t&&s.dispose(),[2,{selectedIndices:no(f,"int32"),selectedScores:no(h)}]}})})}var kbe=Sbe;function Nbe(e,t,n,r,a,i){r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),i===void 0&&(i=!1);var o=P(e,"boxes","nonMaxSuppression"),s=P(t,"scores","nonMaxSuppression"),u=Op(o,s,n,r,a,null),l=u.maxOutputSize,c=u.iouThreshold,p=u.scoreThreshold,d={boxes:o,scores:s},f={maxOutputSize:l,iouThreshold:c,scoreThreshold:p,padToMaxOutputSize:i},h=ee.runKernel(z1e,d,f);return{selectedIndices:h[0],validOutputs:h[1]}}var Tbe=K({nonMaxSuppressionPadded_:Nbe});function Ebe(e,t,n,r,a,i){return r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),i===void 0&&(i=!1),Vt(this,void 0,void 0,function(){var o,s,u,l,c,p,d,f,h,m,v,g;return $t(this,function(y){switch(y.label){case 0:return o=P(e,"boxes","nonMaxSuppressionAsync"),s=P(t,"scores","nonMaxSuppressionAsync"),u=Op(o,s,n,r,a,null),l=u.maxOutputSize,c=u.iouThreshold,p=u.scoreThreshold,[4,Promise.all([o.data(),s.data()])];case 1:return d=ke.apply(void 0,[y.sent(),2]),f=d[0],h=d[1],m=hbe(f,h,l,c,p,i),v=m.selectedIndices,g=m.validOutputs,o!==e&&o.dispose(),s!==t&&s.dispose(),[2,{selectedIndices:no(v,"int32"),validOutputs:cr(g,"int32")}]}})})}var Ibe=Ebe;function Cbe(e,t,n,r){n===void 0&&(n=!1),r===void 0&&(r=!1);var a=P(e,"images","resizeBilinear");q(a.rank===3||a.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")}),q(t.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,".")}),q(r===!1||n===!1,function(){return"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."});var i=a,o=!1;a.rank===3&&(o=!0,i=we(a,[1,a.shape[0],a.shape[1],a.shape[2]])),ke(t,0);var s={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},l=ee.runKernel(rme,s,u);return o?we(l,[l.shape[1],l.shape[2],l.shape[3]]):l}var Dbe=K({resizeBilinear_:Cbe});function _be(e,t,n,r){n===void 0&&(n=!1),r===void 0&&(r=!1);var a=P(e,"images","resizeNearestNeighbor");q(a.rank===3||a.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")}),q(t.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,".")}),q(a.dtype==="float32"||a.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"}),q(r===!1||n===!1,function(){return"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."});var i=a,o=!1;a.rank===3&&(o=!0,i=we(a,[1,a.shape[0],a.shape[1],a.shape[2]])),ke(t,0);var s={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},l=ee.runKernel(nme,s,u);return o?we(l,[l.shape[1],l.shape[2],l.shape[3]]):l}var Abe=K({resizeNearestNeighbor_:_be});function Fbe(e,t,n,r){var a;t===void 0&&(t="binary"),n===void 0&&(n=!1),r===void 0&&(r=.5);var i=P(e,"image","threshold"),o=.2989,s=.587,u=.114,l=i.shape[0]*i.shape[1],c=Ft(no([r]),255),p,d,f,h;if(q(i.rank===3,function(){return"Error in threshold: image must be rank 3,"+"but got rank ".concat(i.rank,".")}),q(i.shape[2]===3||i.shape[2]===1,function(){return"Error in threshold: image color channel must be equal to 3 or 1"+"but got ".concat(i.shape[2],".")}),q(i.dtype==="int32"||i.dtype==="float32",function(){return"Error in dtype: image dtype must be int32 or float32,"+"but got dtype ".concat(i.dtype,".")}),q(t==="otsu"||t==="binary",function(){return"Method must be binary or otsu, but was ".concat(t)}),i.shape[2]===3){a=ke(gh(i,[1,1,1],-1),3),p=a[0],d=a[1],f=a[2];var m=Ft(p,o),v=Ft(d,s),g=Ft(f,u);h=Rr(Rr(m,v),g)}else h=e;if(t==="otsu"){var y=JD(Er(E_(h),"int32"),Dp([]),256);c=Rbe(y,l)}var w=n?Jb(h,c):c0(h,c),b=Er(Ft(w,255),"int32");return b}function Rbe(e,t){for(var n=no([-1]),r=no([0]),a=no([0]),i,o,s,u,l,c,p=0;p<e.size-1;p++){i=Ln(e,0,p+1),o=Ln(e,p+1),l=da(Nn(i),t),c=da(Nn(o),t);var d=Nn(Ft(i,mh(0,i.size)));s=da(d,Nn(i));var f=i0(o.shape,i.size),h=Rr(mh(0,o.size),f),m=Ft(o,h);u=da(Nn(m),Nn(o));var v=qt(s,u),g=qt(s,u),y=Ft(l,c);a=Ft(Ft(y,v),g);var w=c0(a,r);r=Pu(w,a,r),n=Pu(w,no([p]),n)}return n}var Obe=K({threshold_:Fbe});function Mbe(e,t,n,r,a,i){n===void 0&&(n="nearest"),r===void 0&&(r="constant"),a===void 0&&(a=0);var o=P(e,"image","transform","float32"),s=P(t,"transforms","transform","float32");q(o.rank===4,function(){return"Error in transform: image must be rank 4,"+"but got rank ".concat(o.rank,".")}),q(s.rank===2&&(s.shape[0]===o.shape[0]||s.shape[0]===1)&&s.shape[1]===8,function(){return"Error in transform: Input transform should be batch x 8 or 1 x 8"}),q(i==null||i.length===2,function(){return"Error in transform: outputShape must be [height, width] or null, "+"but got ".concat(i,".")});var u={image:o,transforms:s},l={interpolation:n,fillMode:r,fillValue:a,outputShape:i};return ee.runKernel(zme,u,l)}var Pbe=K({transform_:Mbe});function Bbe(e,t,n){var r=P(e,"a","bandPart");q(r.rank>=2,function(){return"bandPart(): Rank must be at least 2, got ".concat(r.rank,".")});var a=r.shape,i=ke(r.shape.slice(-2),2),o=i[0],s=i[1],u,l;typeof t=="number"?(q(t%1===0,function(){return"bandPart(): numLower must be an integer, got ".concat(t,".")}),q(t<=o,function(){return"bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(o,").")}),u=P(t<0?o:t,"numLower","bandPart")):(q(t.dtype==="int32",function(){return"bandPart(): numLower's dtype must be an int32."}),u=Pu(Ob(t,0),o,Zv(t,o))),typeof n=="number"?(q(n%1===0,function(){return"bandPart(): numUpper must be an integer, got ".concat(n,".")}),q(n<=s,function(){return"bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(s,").")}),l=P(n<0?s:n,"numUpper","bandPart")):(q(n.dtype==="int32",function(){return"bandPart(): numUpper's dtype must be an int32."}),l=Pu(Ob(n,0),s,Zv(n,s)));var c=we(mh(0,o,1,"int32"),[-1,1]),p=mh(0,s,1,"int32"),d=qt(c,p),f=Yv(Jb(d,u),o_(d,us(l))),h=Fp([o,s],r.dtype);return we(yh(i6(we(r,[-1,o,s])).map(function(m){return Pu(f,m,h)})),a)}var Lbe=K({bandPart_:Bbe});function zbe(e){var t;if(Array.isArray(e)){t=!1,q(e!=null&&e.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var n=e[0].shape[0],r=function(u){q(e[u].shape[0]===n,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[u].shape[0]," vs. ").concat(n,")")})},a=1;a<e.length;++a)r(a)}else t=!0,e=gh(e,e.shape[0],0).map(function(u){return a6(u,[0])});q(e.length<=e[0].shape[0],function(){return"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],").")});for(var i=[],o=e,s=function(u){i.push(ee.tidy(function(){var l=o[u];if(u>0)for(var c=0;c<u;++c){var p=Ft(Nn(Ft(i[c],l)),i[c]);l=qt(l,p)}return da(l,l0(l,"euclidean"))}))},a=0;a<e.length;++a)s(a);return t?yh(i,0):i}var $be=K({gramSchmidt_:zbe});function Vbe(e,t){if(t===void 0&&(t=!1),q(e.rank>=2,function(){return"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)}),e.rank===2)return dD(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce(function(u,l){return u*l}),r=i6(we(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];r.forEach(function(u){var l=ke(dD(u,t),2),c=l[0],p=l[1];a.push(c),i.push(p)});var o=we(yh(a,0),e.shape),s=we(yh(i,0),e.shape);return[o,s]}function dD(e,t){return t===void 0&&(t=!1),ee.tidy(function(){q(e.shape.length===2,function(){return"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor.")});for(var n=e.shape[0],r=e.shape[1],a=r_(n),i=Ep(e),o=ch([[1]],[1,1]),s=Ep(o),u=n>=r?r:n,l=function(p){var d,f=i,h=s,m=a;d=ke(ee.tidy(function(){var v=Ln(i,[p,p],[n-p,1]),g=l0(v),y=Ln(i,[p,p],[1,1]),w=Pu(c0(y,0),ch([[-1]]),ch([[1]])),b=qt(y,Ft(w,g)),x=da(v,b);x.shape[0]===1?s=Ep(o):s=Za([o,Ln(x,[1,0],[x.shape[0]-1,x.shape[1]])],0);var k=us(da(en(w,b),g)),N=Ln(i,[p,0],[n-p,r]),E=Ft(k,s),C=Mb(s);if(p===0)i=qt(N,en(E,en(C,N)));else{var R=qt(N,en(E,en(C,N)));i=Za([Ln(i,[0,0],[p,r]),R],0)}var A=Mb(E),M=Ln(a,[0,p],[n,a.shape[1]-p]);if(p===0)a=qt(M,en(en(M,s),A));else{var $=qt(M,en(en(M,s),A));a=Za([Ln(a,[0,0],[n,p]),$],1)}return[s,i,a]}),3),s=d[0],i=d[1],a=d[2],h4e([f,h,m])},c=0;c<u;++c)l(c);return!t&&n>r&&(a=Ln(a,[0,0],[n,r]),i=Ln(i,[0,0],[r,r])),[a,i]})}var Wbe=K({qr_:Vbe});var Ea;(function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Ea||(Ea={}));function Ube(e,t,n){n===void 0&&(n=Ea.SUM_BY_NONZERO_WEIGHTS);var r=P(e,"losses","computeWeightedLoss"),a=null;t!=null&&(a=P(t,"weights","computeWeightedLoss"));var i=a==null?r:Ft(r,a);if(n===Ea.NONE)return i;if(n===Ea.SUM)return Nn(i);if(n===Ea.MEAN){if(a==null)return Jv(i);var o=r.size/a.size,s=da(Nn(i),Nn(a));return o>1?da(s,cr(o)):s}if(n===Ea.SUM_BY_NONZERO_WEIGHTS){if(a==null)return da(Nn(i),cr(r.size));var u=Ft(a,jl(r.shape)),l=Er(Nn(h_(u,cr(0))),"float32");return da(Nn(i),l)}throw Error("Unknown reduction: ".concat(n))}var Gs=K({computeWeightedLoss_:Ube});function Gbe(e,t,n,r){r===void 0&&(r=Ea.SUM_BY_NONZERO_WEIGHTS);var a=P(e,"labels","absoluteDifference"),i=P(t,"predictions","absoluteDifference"),o=null;n!=null&&(o=P(n,"weights","absoluteDifference")),ro(a.shape,i.shape,"Error in absoluteDifference: ");var s=Ji(qt(a,i));return Gs(s,o,r)}var qbe=K({absoluteDifference_:Gbe});function Hbe(e,t,n,r,a){a===void 0&&(a=Ea.SUM_BY_NONZERO_WEIGHTS);var i=P(e,"labels","cosineDistance"),o=P(t,"predictions","cosineDistance"),s=null;r!=null&&(s=P(r,"weights","cosineDistance")),ro(i.shape,o.shape,"Error in cosineDistance: ");var u=cr(1),l=qt(u,Nn(Ft(i,o),n,!0));return Gs(l,s,a)}var jbe=K({cosineDistance_:Hbe});function Kbe(e,t,n,r){r===void 0&&(r=Ea.SUM_BY_NONZERO_WEIGHTS);var a=P(e,"labels","hingeLoss"),i=P(t,"predictions","hingeLoss"),o=null;n!=null&&(o=P(n,"weights","hingeLoss")),ro(a.shape,i.shape,"Error in hingeLoss: ");var s=cr(1);a=qt(Ft(cr(2),a),s);var u=d0(qt(s,Ft(a,i)));return Gs(u,o,r)}var Xbe=K({hingeLoss_:Kbe});function Ybe(e,t,n,r,a){r===void 0&&(r=1),a===void 0&&(a=Ea.SUM_BY_NONZERO_WEIGHTS);var i=P(e,"labels","huberLoss"),o=P(t,"predictions","huberLoss"),s=null;n!=null&&(s=P(n,"weights","huberLoss")),ro(i.shape,o.shape,"Error in huberLoss: ");var u=cr(r),l=Ji(qt(o,i)),c=Zv(l,u),p=qt(l,c),d=Rr(Ft(cr(.5),u0(c)),Ft(u,p));return Gs(d,s,a)}var Jbe=K({huberLoss_:Ybe});function Zbe(e,t,n,r,a){r===void 0&&(r=1e-7),a===void 0&&(a=Ea.SUM_BY_NONZERO_WEIGHTS);var i=P(e,"labels","logLoss"),o=P(t,"predictions","logLoss"),s=null;n!=null&&(s=P(n,"weights","logLoss")),ro(i.shape,o.shape,"Error in logLoss: ");var u=cr(1),l=cr(r),c=us(Ft(i,hh(Rr(o,l)))),p=Ft(qt(u,i),hh(Rr(qt(u,o),l))),d=qt(c,p);return Gs(d,s,a)}var Qbe=K({logLoss_:Zbe});function e6e(e,t,n,r){r===void 0&&(r=Ea.SUM_BY_NONZERO_WEIGHTS);var a=P(e,"labels","meanSquaredError"),i=P(t,"predictions","meanSquaredError"),o=null;n!=null&&(o=P(n,"weights","meanSquaredError")),ro(a.shape,i.shape,"Error in meanSquaredError: ");var s=C_(a,i);return Gs(s,o,r)}var t6e=K({meanSquaredError_:e6e});function n6e(e,t){var n=P(e,"labels","sigmoidCrossEntropyWithLogits"),r=P(t,"logits","sigmoidCrossEntropyWithLogits");ro(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var a=d0(r),i=Ft(r,n),o=u_(Kl(us(Ji(r))));return Rr(qt(a,i),o)}function r6e(e,t,n,r,a){r===void 0&&(r=0),a===void 0&&(a=Ea.SUM_BY_NONZERO_WEIGHTS);var i=P(e,"multiClassLabels","sigmoidCrossEntropy"),o=P(t,"logits","sigmoidCrossEntropy"),s=null;if(n!=null&&(s=P(n,"weights","sigmoidCrossEntropy")),ro(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=cr(r),l=cr(1),c=cr(.5);i=Rr(Ft(i,qt(l,u)),Ft(c,u))}var p=n6e(i,o);return Gs(p,s,a)}var a6e=K({sigmoidCrossEntropy_:r6e});function i6e(e,t,n){if(n===void 0&&(n=-1),n===-1&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+"supported. Labels / logits was rank ".concat(t.rank," ")+"and dim was ".concat(n));var r=Us(function(a,i,o){var s=!0,u=c_(i,[n],s),l=qt(Er(i,"float32"),u);o([a,l]);var c=us(Ft(l,a)),p=Nn(c,[n]),d=function(f,h){var m=ke(h,2),v=m[0],g=m[1],y=s0(f.shape,[n]);return[Ft(we(f,y),qt(Er(v,"float32"),Kl(g))),Ft(we(f,y),qt(Kl(g),Er(v,"float32")))]};return{value:p,gradFunc:d}});return r(e,t)}function o6e(e,t,n,r,a){r===void 0&&(r=0),a===void 0&&(a=Ea.SUM_BY_NONZERO_WEIGHTS);var i=P(e,"onehotLabels","softmaxCrossEntropy"),o=P(t,"logits","softmaxCrossEntropy"),s=null;if(n!=null&&(s=P(n,"weights","softmaxCrossEntropy")),ro(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var u=cr(r),l=cr(1),c=cr(i.shape[1]);i=Rr(Ft(i,qt(l,u)),da(u,c))}var p=i6e(i,o);return Gs(p,s,a)}var s6e=K({softmaxCrossEntropy_:o6e});function u6e(e,t,n,r){var a=P(e,"indices","sparseFillEmptyRows","int32"),i=P(t,"values","sparseFillEmptyRows"),o=P(n,"denseShape","sparseFillEmptyRows","int32"),s=P(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(a.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        `.concat(a.shape));if(i.rank!==1)throw new Error("Values should be Tensor1D but received shape ".concat(i.shape));if(o.rank!==1)throw new Error("Dense shape should be Tensor1D but received shape ".concat(o.shape));if(s.rank!==0)throw new Error("Default value should be a scalar but received shape ".concat(s.shape));var u={indices:a,values:i,denseShape:o,defaultValue:s},l=ee.runKernel(Nme,u);return{outputIndices:l[0],outputValues:l[1],emptyRowIndicator:l[2],reverseIndexMap:l[3]}}var l6e=K({sparseFillEmptyRows_:u6e});function c6e(e,t,n){var r=P(e,"inputIndices","sparseReshape","int32"),a=P(t,"inputShape","sparseReshape","int32"),i=P(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        `.concat(r.shape));if(a.rank!==1)throw new Error("Input shape should be Tensor1D but received shape ".concat(a.shape));if(i.rank!==1)throw new Error("New shape should be Tensor1D but received shape ".concat(i.shape));var o={inputIndices:r,inputShape:a,newShape:i},s=ee.runKernel(Tme,o);return{outputIndices:s[0],outputShape:s[1]}}var p6e=K({sparseReshape_:c6e});function d6e(e,t,n){var r=P(e,"data","sparseSegmentMean"),a=P(t,"indices","sparseSegmentMean","int32"),i=P(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          `.concat(a.shape));if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          `.concat(i.shape));var o={data:r,indices:a,segmentIds:i};return ee.runKernel(Eme,o)}var f6e=K({sparseSegmentMean_:d6e});function h6e(e,t,n){var r=P(e,"data","sparseSegmentSum"),a=P(t,"indices","sparseSegmentSum","int32"),i=P(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         `.concat(a.shape));if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         `.concat(i.shape));var o={data:r,indices:a,segmentIds:i};return ee.runKernel(Ime,o)}var m6e=K({sparseSegmentSum_:h6e});function v6e(e,t,n,r,a,i,o,s){var u=P(e,"data","stringNGrams","string");if(u.dtype!=="string")throw new Error("Data must be of datatype string");if(u.shape.length!==1)throw new Error("Data must be a vector, saw: ".concat(u.shape));var l=P(t,"dataSplits","stringNGrams");if(l.dtype!=="int32")throw new Error("Data splits must be of datatype int32");var c={separator:n,nGramWidths:r,leftPad:a,rightPad:i,padWidth:o,preserveShortSequences:s},p={data:u,dataSplits:l},d=ee.runKernel(Fme,p,c);return{nGrams:d[0],nGramsSplits:d[1]}}var g6e=K({stringNGrams_:v6e});function y6e(e,t,n){n===void 0&&(n=!0);var r=P(e,"input","stringSplit","string"),a=P(t,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error("Input should be Tensor1D but received shape ".concat(r.shape));if(a.rank!==0)throw new Error("Delimiter should be a scalar but received shape ".concat(a.shape));var i={skipEmpty:n},o={input:r,delimiter:a},s=ee.runKernel(Rme,o,i);return{indices:s[0],values:s[1],shape:s[2]}}var b6e=K({stringSplit_:y6e});function w6e(e,t){var n=P(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");var a={input:n};return ee.runKernel(Ome,a,r)}var x6e=K({stringToHashBucketFast_:w6e});function S6e(e,t,n,r){r===void 0&&(r=!0);var a=P(e,"input","staticRegexReplace","string"),i={pattern:t,rewrite:n,replaceGlobal:r};return ee.runKernel(_me,{x:a},i)}var k6e=K({staticRegexReplace_:S6e});var N6e={fft:n6,ifft:Qv,rfft:r6,irfft:I_},T6e={hammingWindow:H4e,hannWindow:R_,frame:O_,stft:Y4e},E6e={flipLeftRight:ebe,grayscaleToRGB:nbe,resizeNearestNeighbor:Abe,resizeBilinear:Dbe,rgbToGrayscale:abe,rotateWithOffset:obe,cropAndResize:Z4e,nonMaxSuppression:ube,nonMaxSuppressionAsync:bbe,nonMaxSuppressionWithScore:xbe,nonMaxSuppressionWithScoreAsync:kbe,nonMaxSuppressionPadded:Tbe,nonMaxSuppressionPaddedAsync:Ibe,threshold:Obe,transform:Pbe},I6e={bandPart:Lbe,gramSchmidt:$be,qr:Wbe},C6e={absoluteDifference:qbe,computeWeightedLoss:Gs,cosineDistance:jbe,hingeLoss:Xbe,huberLoss:Jbe,logLoss:Qbe,meanSquaredError:t6e,sigmoidCrossEntropy:a6e,softmaxCrossEntropy:s6e},D6e={sparseFillEmptyRows:l6e,sparseReshape:p6e,sparseSegmentMean:f6e,sparseSegmentSum:m6e},_6e={stringNGrams:g6e,stringSplit:b6e,stringToHashBucketFast:x6e,staticRegexReplace:k6e};var jr={__proto__:null,OP_SCOPE_SUFFIX:KD,abs:Ji,acos:bve,acosh:xve,add:Rr,addN:Nve,all:Eve,any:Cve,argMax:_ve,argMin:Fve,asin:Ove,asinh:Pve,atan:Lve,atan2:$ve,atanh:Wve,avgPool:XD,avgPool3d:Jve,basicLSTMCell:o0e,batchNorm:a0,batchNorm2d:p0e,batchNorm3d:f0e,batchNorm4d:m0e,batchToSpaceND:YD,bincount:JD,bitwiseAnd:y0e,booleanMaskAsync:d4e,broadcastArgs:w0e,broadcastTo:Uv,buffer:Bu,cast:Er,ceil:k0e,clipByValue:T0e,clone:Ep,complex:Lu,concat:Za,concat1d:C0e,concat2d:_0e,concat3d:F0e,concat4d:O0e,conv1d:B0e,conv2d:o0,conv2dTranspose:$0e,conv3d:W0e,conv3dTranspose:H0e,cos:K0e,cosh:Y0e,cosineWindow:o6,cumprod:Z0e,cumsum:e2e,denseBincount:n2e,depthToSpace:a2e,depthwiseConv2d:Kb,diag:s2e,dilation2d:l2e,div:da,divNoNan:g2e,dot:b2e,dropout:D4e,einsum:Np,elu:t_,enclosingPowerOfTwo:F_,ensureShape:k2e,equal:e_,erf:T2e,euclideanNorm:M2e,exp:Kl,expandDims:Mu,expm1:z2e,eye:r_,fft:n6,fill:i0,floor:a_,floorDiv:QD,fused:G4e,gather:i_,gatherND:E4e,greater:c0,greaterEqual:o_,ifft:Qv,imag:p0,image:E6e,inTopKAsync:A4e,irfft:I_,isFinite:K2e,isInf:Y2e,isNaN:Z2e,leakyRelu:s_,less:Ob,lessEqual:Jb,linalg:I6e,linspace:nge,localResponseNormalization:age,log:hh,log1p:u_,logSigmoid:cge,logSoftmax:fge,logSumExp:c_,logicalAnd:Yv,logicalNot:p_,logicalOr:d_,logicalXor:bge,losses:C6e,lowerBound:xge,matMul:en,max:Cp,maxPool:f_,maxPool3d:Nge,maxPoolWithArgmax:Ege,maximum:Cge,mean:Jv,meshgrid:_ge,min:Fb,minimum:Zv,mirrorPad:Rge,mod:Mge,moments:Bge,movingAverage:b4e,mul:Ft,multiRNNCell:zge,multinomial:Vge,neg:us,norm:l0,notEqual:h_,oneHot:Gge,ones:jl,onesLike:Hge,op:K,outerProduct:Kge,pad:bh,pad1d:Jge,pad2d:Qge,pad3d:tye,pad4d:rye,pool:uye,pow:Yb,prelu:v_,print:cye,prod:dye,raggedGather:hye,raggedRange:vye,raggedTensorToTensor:yye,rand:wye,randomGamma:$ye,randomNormal:N_,randomStandardNormal:Uye,randomUniform:t6,randomUniformInt:Hye,range:mh,real:vh,reciprocal:Xye,relu:d0,relu6:T_,reshape:we,reverse:Xl,reverse1d:e3e,reverse2d:n3e,reverse3d:a3e,reverse4d:o3e,rfft:r6,round:E_,rsqrt:l3e,scalar:cr,scatterND:x4e,searchSorted:Zb,selu:p3e,separableConv2d:f3e,setdiff1dAsync:m3e,sigmoid:Ip,sign:g3e,signal:T6e,sin:b3e,sinh:x3e,slice:Ln,slice1d:k3e,slice2d:T3e,slice3d:I3e,slice4d:D3e,softmax:A3e,softplus:l_,spaceToBatchND:m_,sparse:D6e,sparseToDense:N4e,spectral:N6e,split:gh,sqrt:Rb,square:u0,squaredDifference:C_,squeeze:a6,stack:yh,step:D_,stridedSlice:W3e,string:_6e,sub:qt,sum:Nn,tan:G3e,tanh:Ab,tensor:Dp,tensor1d:no,tensor2d:ch,tensor3d:q3e,tensor4d:H3e,tensor5d:j3e,tensor6d:K3e,tensorScatterUpdate:J3e,tile:lh,topk:Q3e,transpose:Mb,truncatedNormal:t4e,unique:r4e,unsortedSegmentSum:i4e,unstack:i6,upperBound:s4e,variable:u4e,where:Pu,whereAsync:A_,zeros:Fp,zerosLike:Xb};var A6e=function(e,t,n,r){switch(r===void 0&&(r=jr),e.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(I("a",e,t,n),I("b",e,t,n))];case"AddN":return[r.addN(I("tensors",e,t,n))];case"FloorMod":case"Mod":return[r.mod(I("a",e,t,n),I("b",e,t,n))];case"Mul":return[r.mul(I("a",e,t,n),I("b",e,t,n))];case"RealDiv":case"Div":return[r.div(I("a",e,t,n),I("b",e,t,n))];case"DivNoNan":return[r.divNoNan(I("a",e,t,n),I("b",e,t,n))];case"FloorDiv":return[r.floorDiv(I("a",e,t,n),I("b",e,t,n))];case"Sub":return[r.sub(I("a",e,t,n),I("b",e,t,n))];case"Minimum":return[r.minimum(I("a",e,t,n),I("b",e,t,n))];case"Maximum":return[r.maximum(I("a",e,t,n),I("b",e,t,n))];case"Pow":return[r.pow(I("a",e,t,n),I("b",e,t,n))];case"SquaredDifference":return[r.squaredDifference(I("a",e,t,n),I("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};var F6e=function(e,t,n,r){switch(r===void 0&&(r=jr),e.op){case"Abs":case"ComplexAbs":return[r.abs(I("x",e,t,n))];case"Acos":return[r.acos(I("x",e,t,n))];case"Acosh":return[r.acosh(I("x",e,t,n))];case"Asin":return[r.asin(I("x",e,t,n))];case"Asinh":return[r.asinh(I("x",e,t,n))];case"Atan":return[r.atan(I("x",e,t,n))];case"Atan2":return[r.atan2(I("x",e,t,n),I("y",e,t,n))];case"Atanh":return[r.atanh(I("x",e,t,n))];case"Ceil":return[r.ceil(I("x",e,t,n))];case"Complex":return[r.complex(I("real",e,t,n),I("imag",e,t,n))];case"Cos":return[r.cos(I("x",e,t,n))];case"Cosh":return[r.cosh(I("x",e,t,n))];case"Elu":return[r.elu(I("x",e,t,n))];case"Erf":return[r.erf(I("x",e,t,n))];case"Exp":return[r.exp(I("x",e,t,n))];case"Expm1":return[r.expm1(I("x",e,t,n))];case"Floor":return[r.floor(I("x",e,t,n))];case"Log":return[r.log(I("x",e,t,n))];case"Log1p":return[r.log1p(I("x",e,t,n))];case"Imag":return[r.imag(I("x",e,t,n))];case"Neg":return[r.neg(I("x",e,t,n))];case"Reciprocal":return[r.reciprocal(I("x",e,t,n))];case"Real":return[r.real(I("x",e,t,n))];case"Relu":return[r.relu(I("x",e,t,n))];case"Round":return[r.round(I("x",e,t,n))];case"Selu":return[r.selu(I("x",e,t,n))];case"Sigmoid":return[r.sigmoid(I("x",e,t,n))];case"Sin":return[r.sin(I("x",e,t,n))];case"Sign":return[r.sign(I("x",e,t,n))];case"Sinh":return[r.sinh(I("x",e,t,n))];case"Softplus":return[r.softplus(I("x",e,t,n))];case"Sqrt":return[r.sqrt(I("x",e,t,n))];case"Square":return[r.square(I("x",e,t,n))];case"Tanh":return[r.tanh(I("x",e,t,n))];case"Tan":return[r.tan(I("x",e,t,n))];case"ClipByValue":return[r.clipByValue(I("x",e,t,n),I("clipValueMin",e,t,n),I("clipValueMax",e,t,n))];case"Relu6":return[r.relu6(I("x",e,t,n))];case"Rsqrt":return[r.rsqrt(Hr(e.inputNames[0],t,n))];case"LeakyRelu":return[r.leakyRelu(I("x",e,t,n),I("alpha",e,t,n))];case"Prelu":return[r.prelu(I("x",e,t,n),I("alpha",e,t,n))];case"IsNan":return[r.isNaN(Hr(e.inputNames[0],t,n))];case"IsInf":return[r.isInf(Hr(e.inputNames[0],t,n))];case"IsFinite":return[r.isFinite(Hr(e.inputNames[0],t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function Zi(e,t,n){if(n===void 0&&(n=""),!(typeof e=="number"||typeof t=="number")){Ke.util.assert(e.length===t.length,function(){return n+" Shapes ".concat(e," and ").concat(t," must match")});for(var r=0;r<e.length;r++){var a=e[r],i=t[r];Ke.util.assert(a<0||i<0||a===i,function(){return n+" Shapes ".concat(e," and ").concat(t," must match")})}}}function fD(e){return!(typeof e=="number"||e.some(function(t){return t<0}))}function oh(e,t,n){var r=Pb(e,n),a=!fD(r);if(a&&t.length===0)throw new Error("Tried to calculate elements of an empty list"+" with non-fully-defined elementShape: ".concat(r));if(a&&t.forEach(function(i){r=Pb(i.shape,r)}),!fD(r))throw new Error("Non-fully-defined elementShape: ".concat(r));return r}function Pb(e,t){if(typeof e=="number")return t;if(typeof t=="number")return e;if(e.length!==t.length)throw new Error("Incompatible ranks during merge: ".concat(e," vs. ").concat(t));for(var n=[],r=0;r<e.length;++r){var a=e[r],i=t[r];if(a>=0&&i>=0&&a!==i)throw new Error("Incompatible shape during merge: ".concat(e," vs. ").concat(t));n[r]=a>=0?a:i}return n}var R6e=function(){function e(t,n,r,a,i,o,s){this.name=t,this.dtype=n,this.maxSize=r,this.elementShape=a,this.identicalElementShapes=i,this.dynamicSize=o,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=Ke.scalar(0),Ke.keep(this.idTensor)}return Object.defineProperty(e.prototype,"id",{get:function(){return this.idTensor.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"closed",{get:function(){return this.closed_},enumerable:!1,configurable:!0}),e.prototype.clearAndClose=function(t){this.tensors.forEach(function(n){(t==null||!t.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()},e.prototype.size=function(){return this.tensors.length},e.prototype.read=function(t){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(t<0||t>=this.size())throw new Error("Tried to read from index ".concat(t,", but array size is: ").concat(this.size()));var n=this.tensors[t];if(n.cleared)throw new Error("TensorArray ".concat(this.name,": Could not read index ").concat(t," twice because it was cleared after a previous read ")+"(perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor},e.prototype.readMany=function(t){var n=this;return t.map(function(r){return n.read(r)})},e.prototype.write=function(t,n){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(t<0||!this.dynamicSize&&t>=this.maxSize)throw new Error("Tried to write to index ".concat(t,", but array is not resizeable and size is: ").concat(this.maxSize));var r=this.tensors[t]||{};if(n.dtype!==this.dtype)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(t,`,
          because the value dtype is `).concat(n.dtype,", but TensorArray dtype is ").concat(this.dtype,"."));if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),Zi(this.elementShape,n.shape,"TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(t,".")),r.read)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(t,", because it has already been read."));if(r.written)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(t,", because it has already been written."));r.tensor=n,Ke.keep(n),r.written=!0,this.tensors[t]=r},e.prototype.writeMany=function(t,n){var r=this;if(t.length!==n.length)throw new Error("TensorArray ".concat(this.name,": could not write multiple tensors,")+"because the index size: ".concat(t.length," is not the same as tensors size: ").concat(n.length,"."));t.forEach(function(a,i){return r.write(a,n[i])})},e.prototype.gather=function(t,n){if(n&&n!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but gather requested dtype ").concat(n));if(t)t=t.slice(0,this.size());else{t=[];for(var r=0;r<this.size();r++)t.push(r)}if(t.length===0)return Ke.tensor([],[0].concat(this.elementShape));var a=this.readMany(t);return Zi(this.elementShape,a[0].shape,"TensorArray shape mismatch: "),Ke.stack(a,0)},e.prototype.concat=function(t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but concat requested dtype ").concat(t));if(this.size()===0)return Ke.tensor([],[0].concat(this.elementShape));for(var n=[],r=0;r<this.size();r++)n.push(r);var a=this.readMany(n);return Zi(this.elementShape,a[0].shape,"TensorArray shape mismatch: tensor array shape (".concat(this.elementShape,") vs first tensor shape (").concat(a[0].shape,")")),Ke.concat(a,0)},e.prototype.scatter=function(t,n){if(n.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(n.dtype));if(t.length!==n.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(t.length," vs. ").concat(n.shape[0]));var r=Math.max.apply(Math,jt([],ke(t),!1));if(!this.dynamicSize&&r>=this.maxSize)throw new Error("Max index must be < array size (".concat(r,"  vs. ").concat(this.maxSize,")"));this.writeMany(t,Ke.unstack(n,0))},e.prototype.split=function(t,n){var r=this;if(n.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(n.dtype));var a=0,i=t.map(function(c){return a+=c,a});if(a!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        `.concat(a,", and tensor's shape is: ").concat(n.shape));if(!this.dynamicSize&&t.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths (".concat(this.maxSize," vs. ").concat(t.length,"), ")+"and the TensorArray is not marked as dynamically resizeable");var o=a===0?0:n.size/a,s=[];Ke.tidy(function(){n=Ke.reshape(n,[1,a,o]);for(var c=0;c<t.length;++c){var p=c===0?0:i[c-1],d=[0,p,0],f=[1,t[c],o];s[c]=Ke.reshape(Ke.slice(n,d,f),r.elementShape)}return s});for(var u=[],l=0;l<t.length;l++)u[l]=l;this.writeMany(u,s)},e}(),f0=function(){function e(t,n,r,a){a===void 0&&(a=-1),this.tensors=t,this.elementShape=n,this.elementDtype=r,t?.forEach(function(i){if(r!==i.dtype)throw new Error("Invalid data types; op elements ".concat(r,", but list elements ").concat(i.dtype));Zi(n,i.shape,"TensorList shape mismatch: "),Ke.keep(i)}),this.idTensor=Ke.scalar(0),this.maxNumElements=a,Ke.keep(this.idTensor)}return Object.defineProperty(e.prototype,"id",{get:function(){return this.idTensor.id},enumerable:!1,configurable:!0}),e.prototype.copy=function(){return new e(jt([],ke(this.tensors),!1),this.elementShape,this.elementDtype)},e.prototype.clearAndClose=function(t){this.tensors.forEach(function(n){(t==null||!t.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()},e.prototype.size=function(){return this.tensors.length},e.prototype.stack=function(t,n,r){var a=this;if(r===void 0&&(r=-1),n!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(this.elementDtype));if(r!==-1&&this.tensors.length!==r)throw new Error("Operation expected a list with ".concat(r," elements but got a list with ").concat(this.tensors.length," elements."));Zi(t,this.elementShape,"TensorList shape mismatch: ");var i=oh(this.elementShape,this.tensors,t);return Ke.tidy(function(){var o=a.tensors.map(function(s){return Ke.reshape(s,i)});return Ke.stack(o,0)})},e.prototype.popBack=function(t,n){if(n!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(this.elementDtype));if(this.size()===0)throw new Error("Trying to pop from an empty list.");var r=oh(this.elementShape,this.tensors,t),a=this.tensors.pop();return a.kept=!1,Zi(a.shape,t,"TensorList shape mismatch: "),Ke.reshape(a,r)},e.prototype.pushBack=function(t){if(t.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t.dtype,", but list elements ").concat(this.elementDtype));if(Zi(t.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Ke.keep(t),this.tensors.push(t)},e.prototype.resize=function(t){if(t<0)throw new Error("TensorListResize expects size to be non-negative. Got: ".concat(t));if(this.maxNumElements!==-1&&t>this.maxNumElements)throw new Error("TensorListResize input size ".concat(t," is greater maxNumElement ").concat(this.maxNumElements,"."));var n=new e([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=t;for(var r=0;r<Math.min(this.tensors.length,t);++r)n.tensors[r]=this.tensors[r];return n},e.prototype.getItem=function(t,n,r){if(r!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(r,", but list elements ").concat(this.elementDtype));if(t<0||t>this.tensors.length)throw new Error("Trying to access element ".concat(t," in a list with ").concat(this.tensors.length," elements."));if(this.tensors[t]==null)throw new Error("element at index ".concat(t," is null."));Zi(this.tensors[t].shape,n,"TensorList shape mismatch: ");var a=oh(this.elementShape,this.tensors,n);return Ke.reshape(this.tensors[t],a)},e.prototype.setItem=function(t,n){if(n.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(n.dtype,", but list elements ").concat(this.elementDtype));if(t<0||this.maxNumElements!==-1&&t>=this.maxNumElements)throw new Error("Trying to set element ".concat(t," in a list with max ").concat(this.maxNumElements," elements."));Zi(this.elementShape,n.shape,"TensorList shape mismatch: "),Ke.keep(n),this.tensors[t]!=null&&(this.tensors[t].kept=!1),this.tensors[t]=n},e.prototype.gather=function(t,n,r){var a=this;if(n!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(this.elementDtype));Zi(this.elementShape,r,"TensorList shape mismatch: "),t=t.slice(0,this.size());var i=oh(this.elementShape,this.tensors,r);return t.length===0?Ke.tensor([],[0].concat(i)):Ke.tidy(function(){var o=t.map(function(s){return Ke.reshape(a.tensors[s],i)});return Ke.stack(o,0)})},e.prototype.concat=function(t,n){var r=this;if(t&&t!==this.elementDtype)throw new Error("TensorList dtype is ".concat(this.elementDtype," but concat requested dtype ").concat(t));Zi(this.elementShape,n,"TensorList shape mismatch: ");var a=oh(this.elementShape,this.tensors,n);return this.size()===0?Ke.tensor([],[0].concat(a)):Ke.tidy(function(){var i=r.tensors.map(function(o){return Ke.reshape(o,a)});return Ke.concat(i,0)})},e}();function O6e(e,t,n){var r=e.dtype;if(e.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: ".concat(e.shape));if(e.dtype!==n)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(n));var a=e.shape.slice(1);Zi(a,t,"TensorList shape mismatch: ");var i=Ke.unstack(e);return new f0(i,t,r)}function M6e(e,t,n,r){return new f0([],e,t,r)}function P6e(e,t,n,r){if(t.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(t.length," vs. ").concat(e.shape[0]));var a=Math.max.apply(Math,jt([],ke(t),!1));if(r!=null&&r!==-1&&a>=r)throw new Error("Max index must be < array size (".concat(a,"  vs. ").concat(r,")"));var i=new f0([],n,e.dtype,r),o=Ke.unstack(e,0);return t.forEach(function(s,u){i.setItem(s,o[u])}),i}function B6e(e,t,n){var r=0,a=t.map(function(p){return r+=p,r});if(r!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        `.concat(r,", and tensor's shape is: ").concat(e.shape));for(var i=e.shape.slice(1),o=Pb(i,n),s=r===0?0:e.size/r,u=Ke.tidy(function(){var p=[];e=Ke.reshape(e,[1,r,s]);for(var d=0;d<t.length;++d){var f=d===0?0:a[d-1],h=[0,f,0],m=[1,t[d],s];p[d]=Ke.reshape(Ke.slice(e,h,m),o)}return e.dispose(),p}),l=new f0([],n,e.dtype,t.length),c=0;c<u.length;c++)l.setItem(c,u[c]);return l}var L6e=function(e,t,n){return Vt(void 0,void 0,void 0,function(){var r,a,i,o,l,d,s,u,l,c,p,d,f,h,m,m,y,v,y,g,y,y,y,rr,w,mt,b,x,k,N,E,C,le,Nt,R,A,de,M,Ne,$e,$,z,L,ge,Ee,B,yt,W,Et,Y,gt,Dn,Q,G,X,ie,ae,Bt,le,Nt,ct,Bt,de,mt,dt,ct,ge,Ee,mt,pt,ct,mt,xt,he,pt,xe,ct,Ne,$e,mt,xt,ct,Bt,mt,xt,pt,ct,It,mt,xt,ct,yt,ct,Et,mt,Bt,Nt,ct,Bt,mt,dt,ct,gt,mt,Dn,ct,Bt,ct,Bt,rr,oa,mr;return $t(this,function(ar){switch(ar.label){case 0:switch(r=e.op,r){case"If":return[3,1];case"StatelessIf":return[3,1];case"While":return[3,3];case"StatelessWhile":return[3,3];case"LoopCond":return[3,9];case"Switch":return[3,10];case"Merge":return[3,12];case"Enter":return[3,13];case"Exit":return[3,14];case"NextIteration":return[3,15];case"TensorArrayV3":return[3,16];case"TensorArrayWriteV3":return[3,17];case"TensorArrayReadV3":return[3,18];case"TensorArrayGatherV3":return[3,19];case"TensorArrayScatterV3":return[3,20];case"TensorArrayConcatV3":return[3,21];case"TensorArraySplitV3":return[3,22];case"TensorArraySizeV3":return[3,23];case"TensorArrayCloseV3":return[3,24];case"TensorListSetItem":return[3,25];case"TensorListGetItem":return[3,26];case"TensorListScatterV2":return[3,27];case"TensorListScatter":return[3,27];case"TensorListReserve":return[3,28];case"EmptyTensorList":return[3,28];case"TensorListGather":return[3,29];case"TensorListStack":return[3,30];case"TensorListFromTensor":return[3,31];case"TensorListConcat":return[3,32];case"TensorListConcatV2":return[3,32];case"TensorListPushBack":return[3,33];case"TensorListPopBack":return[3,34];case"TensorListSplit":return[3,35];case"TensorListLength":return[3,36];case"TensorListResize":return[3,37]}return[3,38];case 1:return a=I("thenBranch",e,t,n),i=I("elseBranch",e,t,n),o=I("cond",e,t,n),l=I("args",e,t,n),[4,o.data()];case 2:return d=ar.sent(),d[0]?[2,n.functionMap[a].executeFunctionAsync(l,n.tensorArrayMap,n.tensorListMap)]:[2,n.functionMap[i].executeFunctionAsync(l,n.tensorArrayMap,n.tensorListMap)];case 3:return s=I("body",e,t,n),u=I("cond",e,t,n),l=I("args",e,t,n),[4,n.functionMap[u].executeFunctionAsync(l,n.tensorArrayMap,n.tensorListMap)];case 4:return c=ar.sent(),p=l.map(function(_n){return _n.id}),[4,c[0].data()];case 5:d=ar.sent(),c.forEach(function(_n){!_n.kept&&p.indexOf(_n.id)===-1&&_n.dispose()}),f=l,h=function(){var _n,Ra,sa;return $t(this,function(Oa){switch(Oa.label){case 0:return _n=f,[4,n.functionMap[s].executeFunctionAsync(f,n.tensorArrayMap,n.tensorListMap)];case 1:return f=Oa.sent(),Ra=f.map(function(Xn){return Xn.id}),_n.forEach(function(Xn){!Xn.kept&&p.indexOf(Xn.id)===-1&&Ra.indexOf(Xn.id)===-1&&Xn.dispose()}),[4,n.functionMap[u].executeFunctionAsync(f,n.tensorArrayMap,n.tensorListMap)];case 2:return sa=Oa.sent(),[4,sa[0].data()];case 3:return d=Oa.sent(),sa.forEach(function(Xn){!Xn.kept&&p.indexOf(Xn.id)===-1&&Ra.indexOf(Xn.id)===-1&&Xn.dispose()}),[2]}})},ar.label=6;case 6:return d[0]?[5,h()]:[3,8];case 7:return ar.sent(),[3,6];case 8:return[2,f];case 9:return m=I("pred",e,t,n),[2,[Ws(m)]];case 10:return m=I("pred",e,t,n),y=I("data",e,t,n),y.kept||(y=Ws(y)),[4,m.data()];case 11:return[2,ar.sent()[0]?[void 0,y]:[y,void 0]];case 12:return v=e.inputNames.find(function(_n){return Hr(_n,t,n)!==void 0}),v?(y=Hr(v,t,n),[2,[Ws(y)]]):[2,void 0];case 13:return g=I("frameName",e,t,n),y=I("tensor",e,t,n),n.enterFrame(g),[2,[Ws(y)]];case 14:return y=I("tensor",e,t,n),n.exitFrame(),[2,[Ws(y)]];case 15:return y=I("tensor",e,t,n),n.nextIteration(),[2,[Ws(y)]];case 16:return rr=I("size",e,t,n),w=I("dtype",e,t,n),mt=I("elementShape",e,t,n),b=I("dynamicSize",e,t,n),x=I("clearAfterRead",e,t,n),k=I("identicalElementShapes",e,t,n),N=I("name",e,t,n),E=new R6e(N,w,rr,mt,k,b,x),n.addTensorArray(E),[2,[E.idTensor,Ke.scalar(1)]];case 17:return C=I("tensorArrayId",e,t,n),le=I("index",e,t,n),Nt=I("tensor",e,t,n),R=n.getTensorArray(C.id),R.write(le,Nt),[2,[R.idTensor]];case 18:return A=I("tensorArrayId",e,t,n),de=I("index",e,t,n),M=n.getTensorArray(A.id),[2,[M.read(de)]];case 19:return Ne=I("tensorArrayId",e,t,n),$e=I("indices",e,t,n),$=I("dtype",e,t,n),z=n.getTensorArray(Ne.id),[2,[z.gather($e,$)]];case 20:return L=I("tensorArrayId",e,t,n),ge=I("indices",e,t,n),Ee=I("tensor",e,t,n),B=n.getTensorArray(L.id),B.scatter(ge,Ee),[2,[B.idTensor]];case 21:return yt=I("tensorArrayId",e,t,n),W=n.getTensorArray(yt.id),Et=I("dtype",e,t,n),[2,[W.concat(Et)]];case 22:return Y=I("tensorArrayId",e,t,n),gt=I("tensor",e,t,n),Dn=I("lengths",e,t,n),Q=n.getTensorArray(Y.id),Q.split(Dn,gt),[2,[Q.idTensor]];case 23:return G=I("tensorArrayId",e,t,n),X=n.getTensorArray(G.id),[2,[Ke.scalar(X.size(),"int32")]];case 24:return ie=I("tensorArrayId",e,t,n),ae=n.getTensorArray(ie.id),ae.clearAndClose(),[2,[ae.idTensor]];case 25:return Bt=I("tensorListId",e,t,n),le=I("index",e,t,n),Nt=I("tensor",e,t,n),ct=n.getTensorList(Bt.id),ct.setItem(le,Nt),[2,[ct.idTensor]];case 26:return Bt=I("tensorListId",e,t,n),de=I("index",e,t,n),mt=I("elementShape",e,t,n),dt=I("elementDType",e,t,n),ct=n.getTensorList(Bt.id),[2,[ct.getItem(de,mt,dt)]];case 27:return ge=I("indices",e,t,n),Ee=I("tensor",e,t,n),mt=I("elementShape",e,t,n),pt=I("numElements",e,t,n),ct=P6e(Ee,ge,mt,pt),n.addTensorList(ct),[2,[ct.idTensor]];case 28:return mt=I("elementShape",e,t,n),xt=I("elementDType",e,t,n),he=void 0,e.op==="TensorListReserve"?he="numElements":he="maxNumElements",pt=I(he,e,t,n),xe=e.op==="TensorListReserve"?-1:pt,ct=M6e(mt,xt,pt,xe),n.addTensorList(ct),[2,[ct.idTensor]];case 29:return Ne=I("tensorListId",e,t,n),$e=I("indices",e,t,n),mt=I("elementShape",e,t,n),xt=I("elementDType",e,t,n),ct=n.getTensorList(Ne.id),[2,[ct.gather($e,xt,mt)]];case 30:return Bt=I("tensorListId",e,t,n),mt=I("elementShape",e,t,n),xt=I("elementDType",e,t,n),pt=I("numElements",e,t,n),ct=n.getTensorList(Bt.id),[2,[ct.stack(mt,xt,pt)]];case 31:return It=I("tensor",e,t,n),mt=I("elementShape",e,t,n),xt=I("elementDType",e,t,n),ct=O6e(It,mt,xt),n.addTensorList(ct),[2,[ct.idTensor]];case 32:return yt=I("tensorListId",e,t,n),ct=n.getTensorList(yt.id),Et=I("dtype",e,t,n),mt=I("elementShape",e,t,n),[2,[ct.concat(Et,mt)]];case 33:return Bt=I("tensorListId",e,t,n),Nt=I("tensor",e,t,n),ct=n.getTensorList(Bt.id),ct.pushBack(Nt),[2,[ct.idTensor]];case 34:return Bt=I("tensorListId",e,t,n),mt=I("elementShape",e,t,n),dt=I("elementDType",e,t,n),ct=n.getTensorList(Bt.id),[2,[ct.popBack(mt,dt)]];case 35:return gt=I("tensor",e,t,n),mt=I("elementShape",e,t,n),Dn=I("lengths",e,t,n),ct=B6e(gt,Dn,mt),n.addTensorList(ct),[2,[ct.idTensor]];case 36:return Bt=I("tensorListId",e,t,n),ct=n.getTensorList(Bt.id),[2,[Ke.scalar(ct.size(),"int32")]];case 37:return Bt=I("tensorListId",e,t,n),rr=I("size",e,t,n),oa=n.getTensorList(Bt.id),mr=oa.resize(rr),n.addTensorList(mr),[2,[mr.idTensor]];case 38:throw TypeError("Node type ".concat(e.op," is not implemented"))}})})};function hD(e,t,n){var r=ke(I("fusedOps",e,t,n),2),a=r[0],i=r[1],o=a==="biasadd",s=!o,u=i==="prelu",l=a==="fusedbatchnorm",c=I("numArgs",e,t,n);if(o){if(u&&c!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!u&&o&&c!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");var p=I("strides",e,t,n),d=$v(e,t,n),f=I("dataFormat",e,t,n).toUpperCase(),h=I("dilations",e,t,n),m=ke(I("args",e,t,n),2),v=m[0],g=m[1];s&&(g=v,v=void 0);var y=I("leakyreluAlpha",e,t,n);return{stride:p,pad:d,dataFormat:f,dilations:h,biasArg:v,preluArg:g,activationFunc:i,leakyreluAlpha:y}}var z6e=function(e,t,n,r){switch(r===void 0&&(r=jr),e.op){case"Conv1D":{var a=I("stride",e,t,n),i=I("pad",e,t,n),o=I("dataFormat",e,t,n).toUpperCase(),s=I("dilation",e,t,n);return[r.conv1d(I("x",e,t,n),I("filter",e,t,n),a,i,o,s)]}case"Conv2D":{var a=I("strides",e,t,n),i=$v(e,t,n),o=I("dataFormat",e,t,n).toUpperCase(),u=I("dilations",e,t,n);return[r.conv2d(I("x",e,t,n),I("filter",e,t,n),[a[1],a[2]],i,o,[u[1],u[2]])]}case"_FusedConv2D":{var l=hD(e,t,n),a=l.stride,i=l.pad,o=l.dataFormat,u=l.dilations,c=l.biasArg,p=l.preluArg,d=l.activationFunc,f=l.leakyreluAlpha;return[r.fused.conv2d({x:I("x",e,t,n),filter:I("filter",e,t,n),strides:[a[1],a[2]],pad:i,dataFormat:o,dilations:[u[1],u[2]],bias:c,activation:d,preluActivationWeights:p,leakyreluAlpha:f})]}case"FusedDepthwiseConv2dNative":{var h=hD(e,t,n),a=h.stride,i=h.pad,o=h.dataFormat,u=h.dilations,c=h.biasArg,p=h.preluArg,d=h.activationFunc,f=h.leakyreluAlpha;return[r.fused.depthwiseConv2d({x:I("x",e,t,n),filter:I("filter",e,t,n),strides:[a[1],a[2]],pad:i,dataFormat:o,dilations:[u[1],u[2]],bias:c,activation:d,preluActivationWeights:p,leakyreluAlpha:f})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{var m=I("outputShape",e,t,n),a=I("strides",e,t,n),i=$v(e,t,n);return[r.conv2dTranspose(I("x",e,t,n),I("filter",e,t,n),m,[a[1],a[2]],i)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{var a=I("strides",e,t,n),i=$v(e,t,n),u=I("dilations",e,t,n),o=I("dataFormat",e,t,n).toUpperCase();return[r.depthwiseConv2d(I("input",e,t,n),I("filter",e,t,n),[a[1],a[2]],i,o,[u[1],u[2]])]}case"Conv3D":{var a=I("strides",e,t,n),i=I("pad",e,t,n),o=I("dataFormat",e,t,n).toUpperCase(),u=I("dilations",e,t,n);return[r.conv3d(I("x",e,t,n),I("filter",e,t,n),[a[1],a[2],a[3]],i,o,[u[1],u[2],u[3]])]}case"AvgPool":{var a=I("strides",e,t,n),i=I("pad",e,t,n),v=I("kernelSize",e,t,n);return[r.avgPool(I("x",e,t,n),[v[1],v[2]],[a[1],a[2]],i)]}case"MaxPool":{var a=I("strides",e,t,n),i=I("pad",e,t,n),v=I("kernelSize",e,t,n);return[r.maxPool(I("x",e,t,n),[v[1],v[2]],[a[1],a[2]],i)]}case"MaxPoolWithArgmax":{var a=I("strides",e,t,n),i=I("pad",e,t,n),v=I("kernelSize",e,t,n),g=I("includeBatchInIndex",e,t,n),y=r.maxPoolWithArgmax(I("x",e,t,n),[v[1],v[2]],[a[1],a[2]],i,g),w=y.result,b=y.indexes;return[w,b]}case"AvgPool3D":{var a=I("strides",e,t,n),i=I("pad",e,t,n),v=I("kernelSize",e,t,n);return[r.avgPool3d(I("x",e,t,n),[v[1],v[2],v[3]],[a[1],a[2],a[3]],i)]}case"MaxPool3D":{var a=I("strides",e,t,n),i=I("pad",e,t,n),v=I("kernelSize",e,t,n);return[r.maxPool3d(I("x",e,t,n),[v[1],v[2],v[3]],[a[1],a[2],a[3]],i)]}case"Dilation2D":{var x=I("strides",e,t,n),i=I("pad",e,t,n),u=I("dilations",e,t,n),k=x[1],N=x[2],E=u[1],C=u[2];return[r.dilation2d(I("x",e,t,n),I("filter",e,t,n),[k,N],i,[E,C],"NHWC")]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};var $6e=function(e,t,n,r){switch(r===void 0&&(r=jr),e.op){case"Fill":{var a=I("shape",e,t,n),i=I("dtype",e,t,n),o=I("value",e,t,n);return[r.fill(a,o,i)]}case"LinSpace":{var s=I("start",e,t,n),u=I("stop",e,t,n),l=I("num",e,t,n);return[r.linspace(s,u,l)]}case"Multinomial":{var c=I("logits",e,t,n),p=I("numSamples",e,t,n),d=I("seed",e,t,n);return[r.multinomial(c,p,d)]}case"OneHot":{var f=I("indices",e,t,n),h=I("depth",e,t,n),m=I("onValue",e,t,n),v=I("offValue",e,t,n),i=I("dtype",e,t,n);return[r.oneHot(f,h,m,v,i)]}case"Ones":return[r.ones(I("shape",e,t,n),I("dtype",e,t,n))];case"OnesLike":return[r.onesLike(I("x",e,t,n))];case"RandomStandardNormal":return[r.randomStandardNormal(I("shape",e,t,n),I("dtype",e,t,n),I("seed",e,t,n))];case"RandomUniform":return[r.randomUniform(I("shape",e,t,n),I("minval",e,t,n),I("maxval",e,t,n),I("dtype",e,t,n))];case"RandomUniformInt":return[r.randomUniformInt(I("shape",e,t,n),I("minval",e,t,n),I("maxval",e,t,n),I("seed",e,t,n))];case"Range":{var s=I("start",e,t,n),u=I("stop",e,t,n),g=I("step",e,t,n);return[r.range(s,u,g,I("dtype",e,t,n))]}case"TruncatedNormal":{var a=I("shape",e,t,n),y=I("mean",e,t,n),w=I("stdDev",e,t,n),d=I("seed",e,t,n);return[r.truncatedNormal(a,y,w,I("dtype",e,t,n),d)]}case"Zeros":return[r.zeros(I("shape",e,t,n),I("dtype",e,t,n))];case"ZerosLike":return[r.zerosLike(I("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function cb(e,t,n){var r=I("boxes",e,t,n),a=I("scores",e,t,n),i=I("maxOutputSize",e,t,n),o=I("iouThreshold",e,t,n),s=I("scoreThreshold",e,t,n),u=I("softNmsSigma",e,t,n);return{boxes:r,scores:a,maxOutputSize:i,iouThreshold:o,scoreThreshold:s,softNmsSigma:u}}var V6e=function(e,t,n,r,a){return a===void 0&&(a=jr),Vt(void 0,void 0,void 0,function(){var i,o,p,d,f,h,m,s,g,u,p,d,f,h,m,l,g,c,p,d,f,h,m,v,g;return $t(this,function(y){switch(y.label){case 0:switch(i=e.op,i){case"NonMaxSuppressionV5":return[3,1];case"NonMaxSuppressionV4":return[3,3];case"NonMaxSuppressionV3":return[3,5];case"NonMaxSuppressionV2":return[3,5];case"Where":return[3,7];case"ListDiff":return[3,9]}return[3,10];case 1:return o=cb(e,t,n),p=o.boxes,d=o.scores,f=o.maxOutputSize,h=o.iouThreshold,m=o.scoreThreshold,s=o.softNmsSigma,[4,a.image.nonMaxSuppressionWithScoreAsync(p,d,f,h,m,s)];case 2:return g=y.sent(),[2,[g.selectedIndices,g.selectedScores]];case 3:return u=cb(e,t,n),p=u.boxes,d=u.scores,f=u.maxOutputSize,h=u.iouThreshold,m=u.scoreThreshold,l=I("padToMaxOutputSize",e,t,n),[4,a.image.nonMaxSuppressionPaddedAsync(p,d,f,h,m,l)];case 4:return g=y.sent(),[2,[g.selectedIndices,g.validOutputs]];case 5:return c=cb(e,t,n),p=c.boxes,d=c.scores,f=c.maxOutputSize,h=c.iouThreshold,m=c.scoreThreshold,[4,a.image.nonMaxSuppressionAsync(p,d,f,h,m)];case 6:return[2,[y.sent()]];case 7:return v=a.cast(I("condition",e,t,n),"bool"),[4,a.whereAsync(v)];case 8:return g=[y.sent()],v.dispose(),[2,g];case 9:return[2,a.setdiff1dAsync(I("x",e,t,n),I("y",e,t,n))];case 10:throw TypeError("Node type ".concat(e.op," is not implemented"))}})})};var W6e=function(e,t,n,r){switch(r===void 0&&(r=jr),e.op){case"LowerBound":{var a=I("sortedSequence",e,t,n),i=I("values",e,t,n);return[r.lowerBound(a,i)]}case"TopKV2":{var o=I("x",e,t,n),s=I("k",e,t,n),u=I("sorted",e,t,n),l=r.topk(o,s,u);return[l.values,l.indices]}case"UpperBound":{var a=I("sortedSequence",e,t,n),i=I("values",e,t,n);return[r.upperBound(a,i)]}case"Unique":{var o=I("x",e,t,n),l=r.unique(o);return[l.values,l.indices]}case"UniqueV2":{var o=I("x",e,t,n),c=I("axis",e,t,n),l=r.unique(o,c);return[l.values,l.indices]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};var U6e=function(e,t,n,r){switch(r===void 0&&(r=jr),e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":var a=I("default",e,t,n);return[Hr(e.name,t,n)||a];case"Placeholder":return[Hr(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{var i=I("x",e,t,n);return[Ws(i)]}case"IdentityN":return I("x",e,t,n).map(function(d){return Ws(d)});case"Snapshot":var o=I("x",e,t,n);return[Ws(o)];case"Shape":return[r.tensor1d(I("x",e,t,n).shape,"int32")];case"ShapeN":return I("x",e,t,n).map(function(d){return r.tensor1d(d.shape)});case"Size":return[r.scalar(I("x",e,t,n).size,"int32")];case"Rank":return[r.scalar(I("x",e,t,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":var s=I("x",e,t,n),u=I("data",e,t,n),l=I("message",e,t,n),c=I("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(var p=0;p<u.length;p++)console.log(Array.prototype.slice.call(u[p].dataSync()).slice(0,c));return[s];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},G6e=function(){function e(t,n){this.keyDType=t,this.valueDType=n,this.handle=Ke.scalar(0),this.tensorMap=new Map,Ke.keep(this.handle)}return Object.defineProperty(e.prototype,"id",{get:function(){return this.handle.id},enumerable:!1,configurable:!0}),e.prototype.clearAndClose=function(){this.tensorMap.forEach(function(t){return t.dispose()}),this.tensorMap.clear(),this.handle.dispose()},e.prototype.size=function(){return this.tensorMap.size},e.prototype.tensorSize=function(){return cr(this.size(),"int32")},e.prototype.import=function(t,n){return Vt(this,void 0,void 0,function(){var r,a=this;return $t(this,function(i){switch(i.label){case 0:return this.checkKeyAndValueTensor(t,n),[4,t.data()];case 1:return r=i.sent(),this.tensorMap.forEach(function(o){return o.dispose()}),this.tensorMap.clear(),[2,Ke.tidy(function(){var o=Ke.unstack(n),s=r.length,u=o.length;Ke.util.assert(s===u,function(){return"The number of elements doesn't match, keys has "+"".concat(s," elements, the values has ").concat(u," ")+"elements."});for(var l=0;l<s;l++){var c=r[l],p=o[l];Ke.keep(p),a.tensorMap.set(c,p)}return a.handle})]}})})},e.prototype.find=function(t,n){return Vt(this,void 0,void 0,function(){var r,a=this;return $t(this,function(i){switch(i.label){case 0:return this.checkKeyAndValueTensor(t,n),[4,t.data()];case 1:return r=i.sent(),[2,Ke.tidy(function(){for(var o=[],s=0;s<r.length;s++){var u=r[s],l=a.findWithDefault(u,n);o.push(l)}return Ke.stack(o)})]}})})},e.prototype.findWithDefault=function(t,n){var r=this.tensorMap.get(t);return r??n},e.prototype.checkKeyAndValueTensor=function(t,n){if(t.dtype!==this.keyDType)throw new Error("Expect key dtype ".concat(this.keyDType,", but got ")+"".concat(t.dtype));if(n.dtype!==this.valueDType)throw new Error("Expect value dtype ".concat(this.valueDType,", but got ")+"".concat(n.dtype))},e}(),q6e=function(e,t,n,r){return Vt(void 0,void 0,void 0,function(){var a,i,o,s,d,p,l,u,d,p,l,c,d,p,d;return $t(this,function(f){switch(f.label){case 0:switch(a=e.op,a){case"HashTable":return[3,1];case"HashTableV2":return[3,1];case"InitializeTable":return[3,2];case"InitializeTableV2":return[3,2];case"LookupTableImport":return[3,2];case"LookupTableImportV2":return[3,2];case"LookupTableFind":return[3,4];case"LookupTableFindV2":return[3,4];case"LookupTableSize":return[3,6];case"LookupTableSizeV2":return[3,6]}return[3,7];case 1:return i=r.getHashTableHandleByName(e.name),i!=null?[2,[i]]:(o=I("keyDType",e,t,n),s=I("valueDType",e,t,n),d=new G6e(o,s),r.addHashTable(e.name,d),[2,[d.handle]]);case 2:return p=I("tableHandle",e,t,n,r),l=I("keys",e,t,n),u=I("values",e,t,n),d=r.getHashTableById(p.id),[4,d.import(l,u)];case 3:return[2,[f.sent()]];case 4:return p=I("tableHandle",e,t,n,r),l=I("keys",e,t,n),c=I("defaultValue",e,t,n),d=r.getHashTableById(p.id),[4,d.find(l,c)];case 5:return[2,[f.sent()]];case 6:return p=I("tableHandle",e,t,n,r),d=r.getHashTableById(p.id),[2,[d.tensorSize()]];case 7:throw TypeError("Node type ".concat(e.op," is not implemented"))}})})};var H6e=function(e,t,n,r){switch(r===void 0&&(r=jr),e.op){case"ResizeBilinear":{var a=I("images",e,t,n),i=I("size",e,t,n),o=I("alignCorners",e,t,n),s=I("halfPixelCenters",e,t,n);return[r.image.resizeBilinear(a,[i[0],i[1]],o,s)]}case"ResizeNearestNeighbor":{var a=I("images",e,t,n),i=I("size",e,t,n),o=I("alignCorners",e,t,n),s=I("halfPixelCenters",e,t,n);return[r.image.resizeNearestNeighbor(a,[i[0],i[1]],o,s)]}case"CropAndResize":{var u=I("image",e,t,n),l=I("boxes",e,t,n),c=I("boxInd",e,t,n),p=I("cropSize",e,t,n),d=I("method",e,t,n),f=I("extrapolationValue",e,t,n);return[r.image.cropAndResize(u,l,c,p,d,f)]}case"ImageProjectiveTransformV3":{var a=I("images",e,t,n),h=I("transforms",e,t,n),m=I("outputShape",e,t,n),v=I("fillValue",e,t,n),g=I("interpolation",e,t,n),y=I("fillMode",e,t,n);return[r.image.transform(a,h,g.toLowerCase(),y.toLowerCase(),v,m)]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};var j6e=function(e,t,n,r){switch(r===void 0&&(r=jr),e.op){case"Equal":return[r.equal(I("a",e,t,n),I("b",e,t,n))];case"NotEqual":return[r.notEqual(I("a",e,t,n),I("b",e,t,n))];case"Greater":return[r.greater(I("a",e,t,n),I("b",e,t,n))];case"GreaterEqual":return[r.greaterEqual(I("a",e,t,n),I("b",e,t,n))];case"Less":return[r.less(I("a",e,t,n),I("b",e,t,n))];case"LessEqual":return[r.lessEqual(I("a",e,t,n),I("b",e,t,n))];case"LogicalAnd":return[r.logicalAnd(I("a",e,t,n),I("b",e,t,n))];case"LogicalNot":return[r.logicalNot(I("a",e,t,n))];case"LogicalOr":return[r.logicalOr(I("a",e,t,n),I("b",e,t,n))];case"Select":case"SelectV2":return[r.where(I("condition",e,t,n),I("a",e,t,n),I("b",e,t,n))];case"BitwiseAnd":return[r.bitwiseAnd(I("a",e,t,n),I("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},K6e=function(e,t,n,r){switch(r===void 0&&(r=jr),e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(I("a",e,t,n),I("b",e,t,n),I("transposeA",e,t,n),I("transposeB",e,t,n))];case"Einsum":return[r.einsum.apply(r,jt([I("equation",e,t,n)],ke(I("tensors",e,t,n)),!1))];case"Transpose":return[r.transpose(I("x",e,t,n),I("perm",e,t,n))];case"_FusedMatMul":var a=ke(I("fusedOps",e,t,n),2),i=a[0],o=a[1],s=i==="biasadd",u=o==="prelu",l=I("numArgs",e,t,n),c=I("leakyreluAlpha",e,t,n);if(s){if(u&&l!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!u&&l!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}var p=ke(I("args",e,t,n),2),d=p[0],f=p[1];return[r.fused.matMul({a:I("a",e,t,n),b:I("b",e,t,n),transposeA:I("transposeA",e,t,n),transposeB:I("transposeB",e,t,n),bias:d,activation:o,preluActivationWeights:f,leakyreluAlpha:c})];case"MatrixBandPart":return[r.linalg.bandPart(I("a",e,t,n),I("numLower",e,t,n),I("numUpper",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};var X6e=function(e,t,n,r){switch(r===void 0&&(r=jr),e.op){case"EuclideanNorm":return[r.euclideanNorm(I("x",e,t,n),I("axis",e,t,n),I("keepDims",e,t,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(I("x",e,t,n),I("mean",e,t,n),I("variance",e,t,n),I("offset",e,t,n),I("scale",e,t,n),I("epsilon",e,t,n))];case"FusedBatchNormV3":return[r.batchNorm(I("x",e,t,n),I("mean",e,t,n),I("variance",e,t,n),I("offset",e,t,n),I("scale",e,t,n),I("epsilon",e,t,n))];case"LRN":return[r.localResponseNormalization(I("x",e,t,n),I("radius",e,t,n),I("bias",e,t,n),I("alpha",e,t,n),I("beta",e,t,n))];case"Softmax":return[r.softmax(I("x",e,t,n))];case"LogSoftmax":return[r.logSoftmax(I("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};var Y6e=function(e,t,n,r){switch(r===void 0&&(r=jr),e.op){case"RaggedGather":{var a=r.raggedGather(I("paramsNestedSplits",e,t,n),I("paramsDenseValues",e,t,n),I("indices",e,t,n),I("outputRaggedRank",e,t,n)),i=a.outputNestedSplits,o=a.outputDenseValues;return i.concat(o)}case"RaggedRange":{var s=r.raggedRange(I("starts",e,t,n),I("limits",e,t,n),I("splits",e,t,n)),u=s.rtNestedSplits,l=s.rtDenseValues;return[u,l]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(I("shape",e,t,n),I("values",e,t,n),I("defaultValue",e,t,n),I("rowPartitionTensors",e,t,n),I("rowPartitionTypes",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};var J6e=function(e,t,n,r){switch(r===void 0&&(r=jr),e.op){case"Max":{var a=I("axis",e,t,n),i=I("keepDims",e,t,n);return[r.max(I("x",e,t,n),a,i)]}case"Mean":{var a=I("axis",e,t,n),i=I("keepDims",e,t,n);return[r.mean(I("x",e,t,n),a,i)]}case"Min":{var a=I("axis",e,t,n),i=I("keepDims",e,t,n);return[r.min(I("x",e,t,n),a,i)]}case"Sum":{var a=I("axis",e,t,n),i=I("keepDims",e,t,n);return[r.sum(I("x",e,t,n),a,i)]}case"All":{var a=I("axis",e,t,n),i=I("keepDims",e,t,n);return[r.all(I("x",e,t,n),a,i)]}case"Any":{var a=I("axis",e,t,n),i=I("keepDims",e,t,n);return[r.any(I("x",e,t,n),a,i)]}case"ArgMax":{var a=I("axis",e,t,n);return[r.argMax(I("x",e,t,n),a)]}case"ArgMin":{var a=I("axis",e,t,n);return[r.argMin(I("x",e,t,n),a)]}case"Prod":{var a=I("axis",e,t,n),i=I("keepDims",e,t,n);return[r.prod(I("x",e,t,n),a,i)]}case"Cumprod":{var a=I("axis",e,t,n),o=I("exclusive",e,t,n),s=I("reverse",e,t,n);return[r.cumprod(I("x",e,t,n),a,o,s)]}case"Cumsum":{var a=I("axis",e,t,n),o=I("exclusive",e,t,n),s=I("reverse",e,t,n);return[r.cumsum(I("x",e,t,n),a,o,s)]}case"Bincount":var u=I("x",e,t,n),l=I("weights",e,t,n),c=I("size",e,t,n);return[r.bincount(u,l,c)];case"DenseBincount":{var p=I("x",e,t,n),d=I("weights",e,t,n),f=I("size",e,t,n),h=I("binaryOutput",e,t,n);return[r.denseBincount(p,d,f,h)]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};var Z6e=function(e,t,n,r){switch(r===void 0&&(r=jr),e.op){case"ConcatV2":case"Concat":{var a=I("n",e,t,n),i=I("axis",e,t,n),o=I("tensors",e,t,n);return o=o.slice(0,a),[r.concat(o,i)]}case"Gather":{var s=I("x",e,t,n),u=I("indices",e,t,n);return[r.gather(s,r.cast(u,"int32"),0)]}case"GatherV2":{var i=I("axis",e,t,n),l=I("batchDims",e,t,n),s=I("x",e,t,n),u=I("indices",e,t,n);return[r.gather(s,r.cast(u,"int32"),i,l)]}case"Reverse":{for(var c=I("dims",e,t,n),i=[],p=0;p<c.length;p++)c[p]&&i.push(p);var s=I("x",e,t,n);return[r.reverse(s,i)]}case"ReverseV2":{var i=I("axis",e,t,n),s=I("x",e,t,n);return[r.reverse(s,i)]}case"Slice":{var d=I("begin",e,t,n),f=I("size",e,t,n);return[r.slice(I("x",e,t,n),d,f)]}case"StridedSlice":{var d=I("begin",e,t,n),h=I("end",e,t,n),m=I("strides",e,t,n),v=I("beginMask",e,t,n),g=I("endMask",e,t,n),y=I("ellipsisMask",e,t,n),w=I("newAxisMask",e,t,n),b=I("shrinkAxisMask",e,t,n),x=I("x",e,t,n);return[r.stridedSlice(x,d,h,m,v,g,y,w,b)]}case"Pack":return Ke.tidy(function(){var $=I("axis",e,t,n),z=I("tensors",e,t,n),L=z[0].shape,B=r.squeeze(z[0]).shape,W=z.map(function(Y){var Q=Ke.util.arraysEqual(Y.shape,L);if(!Q&&!Ke.util.arraysEqual(r.squeeze(Y).shape,B))throw new Error("the input tensors shape does not match");return Q?Y:r.reshape(Y,L)});return[r.stack(W,$)]});case"Unpack":{var i=I("axis",e,t,n),x=I("tensor",e,t,n);return r.unstack(x,i)}case"Tile":{var k=I("reps",e,t,n);return[r.tile(I("x",e,t,n),k)]}case"Split":case"SplitV":{var i=I("axis",e,t,n),N=I("numOrSizeSplits",e,t,n),x=I("x",e,t,n);return r.split(x,N,i)}case"ScatterNd":{var u=I("indices",e,t,n),E=I("values",e,t,n),C=I("shape",e,t,n);return[r.scatterND(u,E,C)]}case"GatherNd":{var R=I("x",e,t,n),u=I("indices",e,t,n);return[r.gatherND(R,u)]}case"SparseToDense":{var u=I("sparseIndices",e,t,n),C=I("outputShape",e,t,n),A=I("sparseValues",e,t,n),M=I("defaultValue",e,t,n);return[r.sparseToDense(u,A,C,A.dtype===M.dtype?M:r.cast(M,A.dtype))]}case"TensorScatterUpdate":{var u=I("indices",e,t,n),E=I("values",e,t,n),x=I("tensor",e,t,n);return[r.tensorScatterUpdate(x,u,E)]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};var Q6e=function(e,t,n,r){switch(r===void 0&&(r=jr),e.op){case"SparseFillEmptyRows":{var a=r.sparse.sparseFillEmptyRows(I("indices",e,t,n),I("values",e,t,n),I("denseShape",e,t,n),I("defaultValue",e,t,n)),i=a.outputIndices,o=a.outputValues,s=a.emptyRowIndicator,u=a.reverseIndexMap;return[i,o,s,u]}case"SparseReshape":{var l=r.sparse.sparseReshape(I("inputIndices",e,t,n),I("inputShape",e,t,n),I("newShape",e,t,n)),i=l.outputIndices,c=l.outputShape;return[i,c]}case"SparseSegmentMean":{var p=r.sparse.sparseSegmentMean(I("data",e,t,n),I("indices",e,t,n),I("segmentIds",e,t,n));return[p]}case"SparseSegmentSum":{var p=r.sparse.sparseSegmentSum(I("data",e,t,n),I("indices",e,t,n),I("segmentIds",e,t,n));return[p]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};var ewe=function(e,t,n,r){switch(r===void 0&&(r=jr),e.op){case"FFT":return[r.fft(I("x",e,t,n))];case"IFFT":return[r.ifft(I("x",e,t,n))];case"RFFT":return[r.rfft(I("x",e,t,n))];case"IRFFT":return[r.irfft(I("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};var twe=function(e,t,n,r){switch(r===void 0&&(r=jr),e.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(I("input",e,t,n),I("pattern",e,t,n),I("rewrite",e,t,n),I("replaceGlobal",e,t,n))];case"StringNGrams":{var a=r.string.stringNGrams(I("data",e,t,n),I("dataSplits",e,t,n),I("separator",e,t,n),I("nGramWidths",e,t,n),I("leftPad",e,t,n),I("rightPad",e,t,n),I("padWidth",e,t,n),I("preserveShortSequences",e,t,n)),i=a.nGrams,o=a.nGramsSplits;return[i,o]}case"StringSplit":{var s=r.string.stringSplit(I("input",e,t,n),I("delimiter",e,t,n),I("skipEmpty",e,t,n)),u=s.indices,l=s.values,c=s.shape;return[u,l,c]}case"StringToHashBucketFast":{var p=r.string.stringToHashBucketFast(I("input",e,t,n),I("numBuckets",e,t,n));return[p]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};var nwe=function(e,t,n,r){switch(r===void 0&&(r=jr),e.op){case"Cast":return[r.cast(I("x",e,t,n),I("dtype",e,t,n))];case"ExpandDims":{var a=I("axis",e,t,n);return[r.expandDims(I("x",e,t,n),a)]}case"Squeeze":{var a=I("axis",e,t,n);return[r.squeeze(I("x",e,t,n),a)]}case"Reshape":return[r.reshape(I("x",e,t,n),I("shape",e,t,n))];case"EnsureShape":return[r.ensureShape(I("x",e,t,n),I("shape",e,t,n))];case"MirrorPad":return[r.mirrorPad(I("x",e,t,n),I("padding",e,t,n),I("mode",e,t,n))];case"PadV2":case"Pad":return[r.pad(I("x",e,t,n),I("padding",e,t,n),I("constantValue",e,t,n))];case"SpaceToBatchND":{var i=I("blockShape",e,t,n),o=I("paddings",e,t,n);return[r.spaceToBatchND(I("x",e,t,n),i,o)]}case"BatchToSpaceND":{var i=I("blockShape",e,t,n),s=I("crops",e,t,n);return[r.batchToSpaceND(I("x",e,t,n),i,s)]}case"DepthToSpace":{var u=I("blockSize",e,t,n),l=I("dataFormat",e,t,n).toUpperCase();return[r.depthToSpace(I("x",e,t,n),u,l)]}case"BroadcastTo":return[r.broadcastTo(I("x",e,t,n),I("shape",e,t,n))];case"BroadcastArgs":return[r.broadcastArgs(I("s0",e,t,n),I("s1",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function mD(e,t,n,r,a){a===void 0&&(a=VC.tidy);var i=function(o,s,u){switch(o.category){case"arithmetic":return a(function(){return A6e(o,s,u)});case"basic_math":return a(function(){return F6e(o,s,u)});case"control":return L6e(o,s,u);case"convolution":return a(function(){return z6e(o,s,u)});case"creation":return a(function(){return $6e(o,s,u)});case"dynamic":return V6e(o,s,u);case"evaluation":return a(function(){return W6e(o,s,u)});case"image":return a(function(){return H6e(o,s,u)});case"graph":return a(function(){return U6e(o,s,u)});case"logical":return a(function(){return j6e(o,s,u)});case"matrices":return a(function(){return K6e(o,s,u)});case"normalization":return a(function(){return X6e(o,s,u)});case"ragged":return a(function(){return Y6e(o,s,u)});case"reduction":return a(function(){return J6e(o,s,u)});case"slice_join":return a(function(){return Z6e(o,s,u)});case"sparse":return a(function(){return Q6e(o,s,u)});case"spectral":return a(function(){return ewe(o,s,u)});case"string":return a(function(){return twe(o,s,u)});case"transformation":return a(function(){return nwe(o,s,u)});case"hash_table":return q6e(o,s,u,r);case"custom":var l=xD(o.op);if(l&&l.customExecutor)return l.customExecutor(new zfe(o,s,u));throw TypeError("Custom op ".concat(o.op," is not registered."));default:throw TypeError("Unknown op '".concat(o.op,"'. File an issue at ")+"https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}}(e,t,n);return VC.util.isPromise(i)?i.then(function(o){return[].concat(o)}):[].concat(i)}var vD=function(){function e(t,n,r,a,i){t===void 0&&(t={}),n===void 0&&(n={}),r===void 0&&(r={}),a===void 0&&(a={}),this.weightMap=t,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=a,this.parseNodeNameCache=i,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return e.prototype.newFrame=function(t,n){return{id:t,frameName:n,iterationId:0}},Object.defineProperty(e.prototype,"currentContext",{get:function(){return this.contexts},set:function(t){this.contexts!==t&&(this.contexts=t,this.generateCurrentContextIds())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentContextId",{get:function(){return this._currentContextIds[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentContextIds",{get:function(){return this._currentContextIds},enumerable:!1,configurable:!0}),e.prototype.generateCurrentContextIds=function(){for(var t=[],n=0;n<this.contexts.length-1;n++){var r=this.contexts.slice(0,this.contexts.length-n);t.push(this.contextIdforContexts(r))}t.push(""),this._currentContextIds=t},e.prototype.contextIdforContexts=function(t){return t?t.map(function(n){return n.id===0&&n.iterationId===0?"":"".concat(n.frameName,"-").concat(n.iterationId)}).join("/"):""},e.prototype.enterFrame=function(t){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,t)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))},e.prototype.exitFrame=function(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")},e.prototype.nextIteration=function(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;var t=Object.assign({},this.contexts[this.contexts.length-1]);t.iterationId+=1,t.id=this.lastId,this.contexts.splice(-1,1,t),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")},e.prototype.getWeight=function(t){return this.weightMap[t]},e.prototype.addTensorArray=function(t){this.tensorArrayMap[t.id]=t},e.prototype.getTensorArray=function(t){return this.tensorArrayMap[t]},e.prototype.addTensorList=function(t){this.tensorListMap[t.id]=t},e.prototype.getTensorList=function(t){return this.tensorListMap[t]},e.prototype.dispose=function(t){for(var n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(t);for(var n in this.tensorListMap)this.tensorListMap[n].clearAndClose(t)},e}();function gD(e,t,n,r){var a=new Set,i=[],o=null,s=null,u=new Set,l=new Set(Object.keys(e).map(function(f){return Xa(f)[0]}));r=r||[];for(var c=new Set(r.map(function(f){return Xa(f.name)[0]})),p=jt([],ke(t),!1);p.length>0;){var d=p.pop();if((ql(d)||cwe(d)||pwe(d))&&o==null&&(o=d,s=o.children.map(function(f){return f.name}).filter(function(f){return a.has(f)})),a.add(d.name),n[d.name]==null&&!l.has(d.name)&&!c.has(d.name)){if(d.inputs.length===0){i.push(d.name);continue}d.inputs.forEach(function(f){u.has(f.name)||(u.add(f.name),p.push(f))})}}return{inputs:e,outputs:t,usedNodes:a,missingInputs:i,dynamicNode:o,syncInputs:s}}function rwe(e,t){var n,r,a,i,o,s,u=t.usedNodes,l=t.inputs,c=Object.keys(l).map(function(L){return Xa(L)[0]}).map(function(L){return e.nodes[L]}),p=e.initNodes||[],d=function(L){return u.has(typeof L=="string"?L:L.name)};function f(L){return jt([],ke(new Map(L.map(function(B){return[B.name,B]})).values()),!1)}var h=f(jt(jt(jt([],ke(c),!1),ke(e.weights),!1),ke(p),!1)).filter(d),m=f(jt(jt([],ke(h),!1),ke(Object.values(e.nodes)),!1)).filter(d),v=new Map(m.map(function(L){return[L.name,L]})),g={};try{for(var y=Tr(m),w=y.next();!w.done;w=y.next()){var b=w.value;g[b.name]=g[b.name]||0;try{for(var x=(a=void 0,Tr(b.children)),k=x.next();!k.done;k=x.next()){var N=k.value;d(N)||(g[N.name]=Number.POSITIVE_INFINITY),g[N.name]=(g[N.name]||0)+1}}catch(L){a={error:L}}finally{try{k&&!k.done&&(i=x.return)&&i.call(x)}finally{if(a)throw a.error}}}}catch(L){n={error:L}}finally{try{w&&!w.done&&(r=y.return)&&r.call(y)}finally{if(n)throw n.error}}for(var E=Object.entries(g).filter(function(L){var B=ke(L,2),W=B[1];return W===0}).map(function(L){var B=ke(L,1),W=B[0];return W}),C=jt([],ke(E),!1);E.length>0;){var R=E.pop(),b=v.get(R);try{for(var A=(o=void 0,Tr(b.children.filter(d))),M=A.next();!M.done;M=A.next()){var N=M.value;--g[N.name]===0&&(C.push(N.name),E.push(N.name))}}catch(B){o={error:B}}finally{try{M&&!M.done&&(s=A.return)&&s.call(A)}finally{if(o)throw o.error}}}var $=C.map(function(L){return v.get(L)}),z=awe($,h);return iwe(z,h),z}function awe(e,t){for(var n,r,a=new Map(e.map(function(f){return[f.name,f]})),i=t.map(function(f){return f.name}),o=new Set(i);i.length>0;){var s=i.pop(),u=a.get(s);try{for(var l=(n=void 0,Tr(u.children)),c=l.next();!c.done;c=l.next()){var p=c.value;!a.has(p.name)||o.has(p.name)||(o.add(p.name),i.push(p.name))}}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}}var d=e.filter(function(f){return o.has(f.name)});return d}var zv=function(e){wD(t,e);function t(n){return e.call(this,"NodesExecutionOrderError: ".concat(n))||this}return t}(Error);function iwe(e,t){var n,r,a,i,o,s,u=new Map(e.map(function(k,N){return[k.name,N]})),l=new Set(t.map(function(k){return k.name})),c=function(k){return l.has(typeof k=="string"?k:k.name)},p=new Set(e.map(function(k){return k.name})),d=function(k){return p.has(typeof k=="string"?k:k.name)};try{for(var f=Tr(e),h=f.next();!h.done;h=f.next()){var m=h.value;try{for(var v=(a=void 0,Tr(m.children.filter(d))),g=v.next();!g.done;g=v.next()){var y=g.value;if(!u.has(y.name))throw new zv("Child ".concat(y.name," of node ").concat(m.name," is unreachable."));if(u.get(m.name)>u.get(y.name))throw new zv("Node ".concat(m.name," is scheduled to run after its child ").concat(y.name,"."))}}catch(k){a={error:k}}finally{try{g&&!g.done&&(i=v.return)&&i.call(v)}finally{if(a)throw a.error}}if(!c(m))try{for(var w=(o=void 0,Tr(m.inputs)),b=w.next();!b.done;b=w.next()){var x=b.value;if(!u.has(x.name))throw new zv("Input ".concat(x.name," of node ").concat(m.name," is unreachable."));if(u.get(x.name)>u.get(m.name))throw new zv("Node ".concat(m.name," is scheduled to run before its input ").concat(x.name,"."))}}catch(k){o={error:k}}finally{try{b&&!b.done&&(s=w.return)&&s.call(w)}finally{if(o)throw o.error}}}}catch(k){n={error:k}}finally{try{h&&!h.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}}function owe(e){for(var t=new Map(e.map(function(p,d){return[p.name,d]})),n=Number.MAX_SAFE_INTEGER,r=e.map(function(p,d){return ql(p)?n:d}),a=function(p){var d=r[t.get(p.name)];return d??-1},i=e.map(function(p,d){return p.children.map(a).reduce(function(f,h){return Math.max(f,h)},r[d])}),o=new Map,s=0;s<e.length;++s){var u=i[s];if(u!==n){var l=e[s],c=e[u];o.has(c.name)||o.set(c.name,[]),o.get(c.name).push(l)}}return o}var swe=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),uwe=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),lwe=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function ql(e){return swe.has(e.op)}function cwe(e){return uwe.has(e.op)}function pwe(e){return lwe.has(e.op)}var yD=function(){function e(t,n){var r=this;this.graph=t,this.parent=n,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,t.functions!=null&&Object.keys(t.functions).forEach(function(a){r._functionExecutorMap[a]=new e(t.functions[a],r)})}return Object.defineProperty(e.prototype,"weightIds",{get:function(){return this.parent?this.parent.weightIds:this._weightIds},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"functionExecutorMap",{get:function(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"weightMap",{get:function(){return this.parent?this.parent.weightMap:this._weightMap},set:function(t){var n=Object.keys(t).map(function(r){return t[r].map(function(a){return a.id})});this._weightIds=[].concat.apply([],jt([],ke(n),!1)),this._weightMap=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resourceManager",{set:function(t){this._resourceManager=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"inputs",{get:function(){return this._inputs.map(function(t){return{name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){return this._outputs.map(function(t){return{name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"inputNodes",{get:function(){return this._inputs.map(function(t){return t.signatureKey||t.name})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"outputNodes",{get:function(){return this._outputs.map(function(t){var n=t.signatureKey||t.name;return t.defaultOutput?"".concat(n,":").concat(t.defaultOutput):n})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"functions",{get:function(){var t=this;return Object.keys(this._functions).reduce(function(n,r){return n[r]=t._functions[r].signature,n},{})},enumerable:!1,configurable:!0}),e.prototype.getCompilationKey=function(t,n){var r=t.map(function(i){return i.name}).sort(),a=n.map(function(i){return i.name}).sort();return r.join(this.SEPARATOR)+"--"+a.join(this.SEPARATOR)},e.prototype.compile=function(t,n){var r=gD(t,n,this.weightMap,this._initNodes),a=r.missingInputs,i=r.dynamicNode,o=r.syncInputs;if(i!=null)throw new Error("This execution contains the node '".concat(i.name,"', which has ")+"the dynamic op '".concat(i.op,"'. Please use ")+"model.executeAsync() instead. Alternatively, to avoid the "+"dynamic ops, specify the inputs [".concat(o,"]"));if(a.length>0){var s=n.map(function(p){return p.name}),u=Object.keys(t);throw new Error("Cannot compute the outputs [".concat(s,"] from the provided inputs ")+"[".concat(u,"]. Missing the following inputs: [").concat(a,"]"))}var l=rwe(this.graph,r),c=owe(l);return{orderedNodes:l,nodeLiveUntilMap:c}},e.prototype.cloneAndKeepTensor=function(t){if(t==null)return null;var n=t.clone();return Ke.keep(n),n},e.prototype.cloneTensorList=function(t){var n=this;if(!t)return null;var r=t.map(function(a){return n.cloneAndKeepTensor(a)});return r},e.prototype.cloneTensorMap=function(t){var n=this;return Object.fromEntries(Object.entries(t).map(function(r){var a=ke(r,2),i=a[0],o=a[1];return[i,n.cloneTensorList(o)]}))},e.prototype.execute=function(t,n){var r=this;this.disposeIntermediateTensors(),t=this.mapInputs(t);var a=Object.keys(t).sort();this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n);var i=a.map(function(f){return r.graph.nodes[Xa(f)[0]]}),o=n.map(function(f){return Xa(f)[0]}),s=new Set(o),u=o.map(function(f){return r.graph.nodes[f]});u.length===0&&(u=this._outputs);var l=this.getCompilationKey(i,u),c=this.compiledMap.get(l);c==null&&(c=this.compile(t,u),this.compiledMap.set(l,c));try{this.keepIntermediateTensors=Ke.env().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(f){this.keepIntermediateTensors=!1,console.warn(f.message)}var p={},d={};return Ke.tidy(function(){var f,h,m=new vD(r.weightMap,p,d,r.functionExecutorMap,r.parseNodeNameCache),v=Object.assign({},r.weightMap);r.keepIntermediateTensors&&(r.clonedTensorsMap=r.cloneTensorMap(r.weightMap)),Object.keys(t).forEach(function(E){var C=ke(Xa(E,m),2),R=C[0],A=C[1],M=[];M[A]=t[E],v[R]=M,r.keepIntermediateTensors&&(r.clonedTensorsMap[R]=r.cloneTensorList(M))});var g=r.getFrozenTensorIds(v),y=c.orderedNodes,w=c.nodeLiveUntilMap;try{for(var b=Tr(y),x=b.next();!x.done;x=b.next()){var k=x.value;if(!v[k.name]){var N=mD(k,v,m,r._resourceManager);if(Ke.util.isPromise(N))throw new Error("The execution of the op '".concat(k.op,"' returned a promise. ")+"Please use model.executeAsync() instead.");v[k.name]=N,r.keepIntermediateTensors&&(r.clonedTensorsMap[k.name]=r.cloneTensorList(N)),r.checkTensorForDisposalWithNodeLiveUntilInfo(k,v,m,g,s,w.get(k.name))}}}catch(E){f={error:E}}finally{try{x&&!x.done&&(h=b.return)&&h.call(b)}finally{if(f)throw f.error}}return r.parent==null&&m.dispose(g),n.map(function(E){return Hr(E,v,m)})})},e.prototype.getFrozenTensorIds=function(t){var n=[].concat.apply([],Object.keys(t).map(function(r){return t[r]}).map(function(r){return r.map(function(a){return a.id})}));return new Set(n)},e.prototype.checkTensorForDisposal=function(t,n,r,a,i,o,s){var u,l,c,p,d,f;if(!(ql(n)||o.has(t))){try{for(var h=Tr(r[t]),m=h.next();!m.done;m=h.next()){var v=m.value;v!=null&&(s[v.id]=(s[v.id]||0)+n.children.length)}}catch(E){u={error:E}}finally{try{m&&!m.done&&(l=h.return)&&l.call(h)}finally{if(u)throw u.error}}try{for(var g=Tr(n.inputs),y=g.next();!y.done;y=g.next()){var w=y.value;if(!ql(w)){var b=UC(w.name,r,a);if(b!=null)try{for(var x=(d=void 0,Tr(b)),k=x.next();!k.done;k=x.next()){var v=k.value;if(!(!v||v.kept||i.has(v.id))){var N=s[v.id];N===1?(v.dispose(),delete s[v.id]):N!=null&&s[v.id]--}}}catch(E){d={error:E}}finally{try{k&&!k.done&&(f=x.return)&&f.call(x)}finally{if(d)throw d.error}}}}}catch(E){c={error:E}}finally{try{y&&!y.done&&(p=g.return)&&p.call(g)}finally{if(c)throw c.error}}}},e.prototype.checkTensorForDisposalWithNodeLiveUntilInfo=function(t,n,r,a,i,o){var s,u,l,c;function p(w){return ql(w)||i.has(w.name)}if(!(ql(t)||o==null))try{for(var d=Tr(o),f=d.next();!f.done;f=d.next()){var h=f.value;if(!p(h)){var m=UC(h.name,n,r);try{for(var v=(l=void 0,Tr(m)),g=v.next();!g.done;g=v.next()){var y=g.value;!y||y.kept||a.has(y.id)||y.dispose()}}catch(w){l={error:w}}finally{try{g&&!g.done&&(c=v.return)&&c.call(v)}finally{if(l)throw l.error}}}}}catch(w){s={error:w}}finally{try{f&&!f.done&&(u=d.return)&&u.call(d)}finally{if(s)throw s.error}}},e.prototype.executeAsync=function(t,n){return Vt(this,void 0,void 0,function(){return $t(this,function(r){return[2,this._executeAsync(t,n)]})})},e.prototype.disposeIntermediateTensors=function(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(function(t){var n,r;try{for(var a=Tr(t),i=a.next();!i.done;i=a.next()){var o=i.value;o&&!o.isDisposed&&o.dispose()}}catch(s){n={error:s}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}),this.clonedTensorsMap=null)},e.prototype.getIntermediateTensors=function(){return this.clonedTensorsMap},e.prototype._executeAsync=function(t,n,r,a,i){return r===void 0&&(r=!1),a===void 0&&(a={}),i===void 0&&(i={}),Vt(this,void 0,void 0,function(){var o,s,u,l,c,p;return $t(this,function(d){switch(d.label){case 0:this.disposeIntermediateTensors(),r||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepIntermediateTensors=Ke.env().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(f){this.keepIntermediateTensors=!1,console.warn(f.message)}return o=new vD(this.weightMap,a,i,this.functionExecutorMap,this.parseNodeNameCache),this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),[4,this.executeWithControlFlow(t,o,n,r)];case 1:return s=d.sent(),u=n.map(function(f){return Hr(f,s,o)}),l=u.map(function(f){return f.id}),c=Object.keys(t).map(function(f){return t[f].id}),p=new Set(jt(jt(jt([],ke(l),!1),ke(c),!1),ke(this.weightIds),!1)),Object.values(s).forEach(function(f){f.forEach(function(h){h&&!h.isDisposed&&!p.has(h.id)&&h.dispose()})}),this.parent==null&&o.dispose(p),[2,u]}})})},e.prototype.executeFunctionAsync=function(t,n,r){return Vt(this,void 0,void 0,function(){var a,i=this;return $t(this,function(o){return a=t.reduce(function(s,u,l){return s[i.inputs[l].name]=u,s},{}),[2,this._executeAsync(a,this.outputNodes,!0,n,r)]})})},e.prototype.executeWithControlFlow=function(t,n,r,a){return Vt(this,void 0,void 0,function(){var i,o,s,u,l,c,p,d,f,h,m,v,g,y,w,b,x,k,N=this;return $t(this,function(E){switch(E.label){case 0:i=Object.keys(t),o=i.map(function(C){return N.graph.nodes[Xa(C)[0]]}),s=r.map(function(C){return Xa(C)[0]}),u=new Set(s),l=s.map(function(C){return N.graph.nodes[C]}),l.length===0&&(l=this._outputs),c=gD(t,l,this.weightMap,this._initNodes),p=c.usedNodes,d=c.missingInputs,f=c.dynamicNode,h=c.syncInputs,m=jt(jt(jt([],ke(o),!1),ke(this.graph.weights),!1),ke(this._initNodes||[]),!1).map(function(C){return{node:C,contexts:n.currentContext}}),v=Object.assign({},this.weightMap),Object.keys(t).forEach(function(C){var R=ke(Xa(C),2),A=R[0],M=R[1],$=[];$[M]=t[C],v[A]=$}),g={},y=this.getFrozenTensorIds(v),w={},E.label=1;case 1:return m.length>0?(b=this.processStack(o,m,n,v,w,y,u,g,p),[4,Promise.all(b)]):[3,3];case 2:return E.sent(),[3,1];case 3:if(f==null&&!a&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead."),x=l.filter(function(C){return!ql(C)&&!Hr(C.name,v,n)}).map(function(C){return C.name}),x.length>0)throw k="",f!=null&&(k="Alternatively, to avoid the dynamic ops, use model.execute() "+"and specify the inputs [".concat(h,"]")),new Error("Cannot compute the outputs [".concat(x,"] from the provided ")+"inputs [".concat(i,"]. Consider providing the following inputs: ")+"[".concat(d,"]. ").concat(k));return[2,v]}})})},e.prototype.processStack=function(t,n,r,a,i,o,s,u,l){for(var c=this,p=[],d=function(){var h,m,v=n.pop();r.currentContext=v.contexts;var g="";if(v.node.op==="Enter"&&I("isConstant",v.node,a,r)&&(h=ke(Vs(v.node.name,r),1),g=h[0]),a[v.node.name]==null){var y=mD(v.node,a,r,f._resourceManager);g||(m=ke(Vs(v.node.name,r),1),g=m[0]);var w=r.currentContext;Ke.util.isPromise(y)?p.push(y.then(function(b){return a[g]=b,c.keepIntermediateTensors&&(c.clonedTensorsMap[g]=c.cloneTensorList(b)),r.currentContext=w,c.checkTensorForDisposal(g,v.node,a,r,o,s,u),c.processChildNodes(v.node,n,r,a,i,l),b})):(a[g]=y,f.keepIntermediateTensors&&(f.clonedTensorsMap[g]=f.cloneTensorList(y)),f.checkTensorForDisposal(g,v.node,a,r,o,s,u),f.processChildNodes(v.node,n,r,a,i,l))}else f.processChildNodes(v.node,n,r,a,i,l)},f=this;n.length>0;)d();return p},e.prototype.processChildNodes=function(t,n,r,a,i,o){t.children.forEach(function(s){var u=ke(Vs(s.name,r),1),l=u[0];i[l]||!o.has(s.name)||(s.op==="Merge"?s.inputNames.some(function(c){return!!Hr(c,a,r)})&&(i[l]=!0,n.push({contexts:r.currentContext,node:s})):s.inputNames.every(function(c){return!!Hr(c,a,r)})&&(i[l]=!0,n.push({contexts:r.currentContext,node:s})))})},e.prototype.dispose=function(){var t=this;Object.keys(this.weightMap).forEach(function(n){return t.weightMap[n].forEach(function(r){return r.dispose()})})},e.prototype.checkInputShapeAndType=function(t){var n=this;Object.keys(t).forEach(function(r){var a=t[r],i=ke(Xa(r),1),o=i[0],s=n.graph.nodes[o];if(s.attrParams.shape&&s.attrParams.shape.value){var u=s.attrParams.shape.value,l=u.length===a.shape.length&&a.shape.every(function(c,p){return u[p]===-1||u[p]===c});Ke.util.assert(l,function(){return"The shape of dict['".concat(s.name,"'] provided in ")+"model.execute(dict) must be [".concat(u,"], but was ")+"[".concat(a.shape,"]")})}s.attrParams.dtype&&s.attrParams.dtype.value&&Ke.util.assert(a.dtype===s.attrParams.dtype.value,function(){return"The dtype of dict['".concat(s.name,"'] provided in ")+"model.execute(dict) must be "+"".concat(s.attrParams.dtype.value,", but was ").concat(a.dtype)})})},e.prototype.mapInputs=function(t){var n,r,a={};for(var i in t){var o=(r=(n=this._signature)===null||n===void 0?void 0:n.inputs)===null||r===void 0?void 0:r[i];o!=null?a[o.name]=t[i]:a[i]=t[i]}return a},e.prototype.checkInputs=function(t){var n=this,r=Object.keys(t).filter(function(a){var i=ke(Xa(a),1),o=i[0];return n.graph.nodes[o]==null});if(r.length>0)throw new Error("The dict provided in model.execute(dict) has "+"keys: [".concat(r,"] that are not part of graph"))},e.prototype.mapOutputs=function(t){var n=this;return t.map(function(r){var a,i,o=(i=(a=n._signature)===null||a===void 0?void 0:a.outputs)===null||i===void 0?void 0:i[r];return o!=null?o.name:r},{})},e.prototype.checkOutputs=function(t){var n=this;t.forEach(function(r){var a=ke(Xa(r),1),i=a[0];if(!n.graph.nodes[i])throw new Error("The output '".concat(r,"' is not found in the graph"))})},e}(),dwe=function(){function e(t,n){t===void 0&&(t={}),n===void 0&&(n={}),this.hashTableNameToHandle=t,this.hashTableMap=n}return e.prototype.addHashTable=function(t,n){this.hashTableNameToHandle[t]=n.handle,this.hashTableMap[n.id]=n},e.prototype.getHashTableHandleByName=function(t){return this.hashTableNameToHandle[t]},e.prototype.getHashTableById=function(t){return this.hashTableMap[t]},e.prototype.dispose=function(){for(var t in this.hashTableMap)this.hashTableMap[t].clearAndClose(),delete this.hashTableMap[t];for(var n in this.hashTableNameToHandle)this.hashTableNameToHandle[n].dispose(),delete this.hashTableNameToHandle[n]},e}();var e0={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8},t0=4;function fwe(e,t){return Vt(this,void 0,void 0,function(){var n,r,a,i,o,s,u,l;return $t(this,function(c){switch(c.label){case 0:return n=Fr(e.shape),"quantization"in e?(a=e.quantization,r=e0[a.dtype],[3,7]):[3,1];case 1:if(e.dtype!=="string")return[3,6];i=0,o=0,c.label=2;case 2:return o<n?(s=i,u=t0,l=Uint32Array.bind,[4,t(i,i+t0)]):[3,5];case 3:i=s+(u+new(l.apply(Uint32Array,[void 0,c.sent()]))()[0]),c.label=4;case 4:return o++,[3,2];case 5:return[2,i];case 6:r=e0[e.dtype],c.label=7;case 7:return[2,n*r]}})})}function hwe(e,t){var n=e.name,r=e.dtype,a=e.shape,i=Fr(a),o,s=0;if("quantization"in e){var u=e.quantization;if(u.dtype==="uint8"||u.dtype==="uint16"){if(!("min"in u&&"scale"in u))throw new Error("Weight ".concat(e.name," with quantization ").concat(u.dtype," ")+"doesn't have corresponding metadata min and scale.")}else if(u.dtype==="float16"){if(r!=="float32")throw new Error("Weight ".concat(e.name," is quantized with ").concat(u.dtype," ")+"which only supports weights of type float32 not ".concat(r,"."))}else throw new Error("Weight ".concat(e.name," has unknown ")+"quantization dtype ".concat(u.dtype,". ")+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");var l=e0[u.dtype],c=u.dtype==="uint8"?new Uint8Array(t):new Uint16Array(t);if(r==="float32")if(u.dtype==="uint8"||u.dtype==="uint16"){o=new Float32Array(c.length);for(var p=0;p<c.length;p++){var d=c[p];o[p]=d*u.scale+u.min}}else if(u.dtype==="float16"){var f=bwe();o=f(c)}else throw new Error("Unsupported quantization type ".concat(u.dtype," ")+"for weight type float32.");else if(r==="int32"){if(u.dtype!=="uint8"&&u.dtype!=="uint16")throw new Error("Unsupported quantization type ".concat(u.dtype," ")+"for weight type int32.");o=new Int32Array(c.length);for(var p=0;p<c.length;p++){var d=c[p];o[p]=Math.round(d*u.scale+u.min)}}else throw new Error("Unsupported dtype in weight '".concat(n,"': ").concat(r));s+=i*l}else if(r==="string"){var h=Fr(e.shape);o=[];for(var p=0;p<h;p++){var m=new Uint32Array(t.slice(s,s+t0))[0];s+=t0;var v=new Uint8Array(t.slice(s,s+m));o.push(v),s+=m}}else{var g=e0[r];if(r==="float32")o=new Float32Array(t);else if(r==="int32")o=new Int32Array(t);else if(r==="bool")o=new Uint8Array(t);else if(r==="complex64"){o=new Float32Array(t);for(var y=new Float32Array(o.length/2),w=new Float32Array(o.length/2),p=0;p<y.length;p++)y[p]=o[p*2],w[p]=o[p*2+1];var b=Dp(y,a,"float32"),x=Dp(w,a,"float32"),k=Lu(b,x);return b.dispose(),x.dispose(),k}else throw new Error("Unsupported dtype in weight '".concat(n,"': ").concat(r));s+=i*g}return Dp(o,a,r)}function bD(e,t,n){return Vt(this,void 0,void 0,function(){var r,a,i,o,s,u;return $t(this,function(l){switch(l.label){case 0:r=new Uint8Array(t),l.label=1;case 1:return r.byteLength<n?[4,e.read()]:[3,3];case 2:if(a=l.sent(),i=a.done,o=a.value,i&&o==null)throw s=n-r.byteLength,new Error("Reader is done but ".concat(s," bytes are still expected"));return u=new Uint8Array(r.length+o.byteLength),u.set(r,0),u.set(new Uint8Array(o),r.length),r=u,[3,1];case 3:return[2,r.buffer]}})})}function mwe(e,t){return Vt(this,void 0,void 0,function(){var n,r,a,i,o,s,u,l,c,p,d,f,h,m=this;return $t(this,function(v){switch(v.label){case 0:n={},r=e.getReader(),a=new ArrayBuffer(0),v.label=1;case 1:v.trys.push([1,7,8,9]),i=Tr(t),o=i.next(),v.label=2;case 2:return o.done?[3,6]:(s=o.value,[4,fwe(s,function(g,y){return Vt(m,void 0,void 0,function(){return $t(this,function(w){switch(w.label){case 0:return[4,bD(r,a,y)];case 1:return a=w.sent(),[2,a.slice(g,y)]}})})})]);case 3:return u=v.sent(),[4,bD(r,a,u)];case 4:a=v.sent(),l=a.slice(0,u),a=a.slice(u),c=hwe(s,l),n[s.name]=c,m4e()==="webgpu"&&(p=v4e(),"uploadToGPU"in p&&Fr(c.shape)>=Ia().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&p.uploadToGPU(c.dataId)),v.label=5;case 5:return o=i.next(),[3,2];case 6:return[3,9];case 7:return d=v.sent(),f={error:d},[3,9];case 8:try{o&&!o.done&&(h=i.return)&&h.call(i)}finally{if(f)throw f.error}return[7];case 9:return[2,n]}})})}function vwe(){var e=function(r){for(var a=r<<13,i=0;!(a&8388608);)i-=8388608,a<<=1;return a&=-8388609,i+=947912704,a|i},t=new Uint32Array(2048);t[0]=0;for(var n=1;n<1024;n++)t[n]=e(n);for(var n=1024;n<2048;n++)t[n]=939524096+(n-1024<<13);return t}function gwe(){var e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(var t=1;t<31;t++)e[t]=t<<23;for(var t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}function ywe(){for(var e=new Uint32Array(64),t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}function bwe(){var e=vwe(),t=gwe(),n=ywe();return function(r){for(var a=new ArrayBuffer(4*r.length),i=new Uint32Array(a),o=0;o<r.length;o++){var s=r[o],u=e[n[s>>10]+(s&1023)]+t[s>>10];i[o]=u}return new Float32Array(a)}}var wwe="?tfjs-format=file",xwe="model.json",d6=function(){function e(t,n,r){n===void 0&&(n={}),r===void 0&&(r=Ke.io),this.modelUrl=t,this.loadOptions=n,this.version="n/a",this.io=r,n==null&&(this.loadOptions={}),this.resourceManager=new dwe}return Object.defineProperty(e.prototype,"modelVersion",{get:function(){return this.version},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"inputNodes",{get:function(){return this.executor.inputNodes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"outputNodes",{get:function(){return this.executor.outputNodes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"inputs",{get:function(){return this.executor.inputs},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){return this.executor.outputs},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"weights",{get:function(){return this.executor.weightMap},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.artifacts.userDefinedMetadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"modelSignature",{get:function(){return this.signature},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"modelStructuredOutputKeys",{get:function(){return this.structuredOutputKeys},enumerable:!1,configurable:!0}),e.prototype.findIOHandler=function(){var t=this.modelUrl;if(t.load!=null)this.handler=t;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(t,this.loadOptions);else{var n=this.io.getLoadHandlers(t,this.loadOptions);if(n.length===0)n.push(this.io.browserHTTPRequest(t,this.loadOptions));else if(n.length>1)throw new Error("Found more than one (".concat(n.length,") load handlers for ")+"URL '".concat([t],"'"));this.handler=n[0]}},e.prototype.load=function(){var t=this;if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");var n=this.handler.load();return Ke.util.isPromise(n)?n.then(function(r){return r.getWeightStream==null?t.loadSync(r):t.loadStreaming(r)}):this.loadSync(n)},e.prototype.loadSync=function(t){var n=this.io.decodeWeights(t.weightData,t.weightSpecs);return this.loadWithWeightMap(t,n)},e.prototype.loadStreaming=function(t){return Vt(this,void 0,void 0,function(){var n;return $t(this,function(r){switch(r.label){case 0:if(t.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");return[4,mwe(t.getWeightStream(),t.weightSpecs)];case 1:return n=r.sent(),[2,this.loadWithWeightMap(t,n)]}})})},e.prototype.loadWithWeightMap=function(t,n){this.artifacts=t;var r=this.artifacts.modelTopology,a=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){var i=this.artifacts.userDefinedMetadata;i.signature!=null&&(a=i.signature),i.structuredOutputKeys!=null&&(this.structuredOutputKeys=i.structuredOutputKeys)}if(this.signature=a,this.version="".concat(r.versions.producer,".").concat(r.versions.minConsumer),this.executor=new yD(GC.Instance.transformGraph(r,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(n),this.executor.resourceManager=this.resourceManager,t.modelInitializer!=null&&t.modelInitializer.node!=null){var o=GC.Instance.transformGraph(t.modelInitializer);this.initializer=new yD(o),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=t.initializerSignature}return!0},e.prototype.save=function(t,n){return Vt(this,void 0,void 0,function(){var r;return $t(this,function(a){if(typeof t=="string"){if(r=this.io.getSaveHandlers(t),r.length===0)throw new Error("Cannot find any save handlers for URL '".concat(t,"'"));if(r.length>1)throw new Error("Found more than one (".concat(r.length,") save handlers for ")+"URL '".concat(t,"'"));t=r[0]}if(t.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return[2,t.save(this.artifacts)]})})},e.prototype.addStructuredOutputNames=function(t){var n=this;if(this.structuredOutputKeys){var r=t instanceof Ke.Tensor?[t]:t,a={};return r.forEach(function(i,o){return a[n.structuredOutputKeys[o]]=i}),a}return t},e.prototype.predict=function(t,n){var r=this.execute(t,this.outputNodes);return this.addStructuredOutputNames(r)},e.prototype.predictAsync=function(t,n){return Vt(this,void 0,void 0,function(){var r;return $t(this,function(a){switch(a.label){case 0:return[4,this.executeAsync(t,this.outputNodes)];case 1:return r=a.sent(),[2,this.addStructuredOutputNames(r)]}})})},e.prototype.normalizeInputs=function(t){var n=this,r;if(!(t instanceof Ke.Tensor)&&!Array.isArray(t)){var a=(r=this.signature)===null||r===void 0?void 0:r.inputs;if(a!=null)for(var i in a){var o=a[i];o.resourceId!=null&&(t[i]=this.resourceIdToCapturedInput[o.resourceId])}return t}t=Array.isArray(t)?t:[t];var s=Object.keys(this.resourceIdToCapturedInput).length;if(t.length+s!==this.inputNodes.length)throw new Error("Input tensor count mismatch, the graph model has ".concat(this.inputNodes.length-s," non-resource placeholders, while there are ").concat(t.length," input tensors provided."));var u=0;return this.inputNodes.reduce(function(l,c){var p,d,f,h=(f=(d=(p=n.signature)===null||p===void 0?void 0:p.inputs)===null||d===void 0?void 0:d[c])===null||f===void 0?void 0:f.resourceId;return h!=null?l[c]=n.resourceIdToCapturedInput[h]:l[c]=t[u++],l},{})},e.prototype.normalizeOutputs=function(t){return t=t||this.outputNodes,Array.isArray(t)?t:[t]},e.prototype.executeInitializerGraph=function(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))},e.prototype.executeInitializerGraphAsync=function(){return Vt(this,void 0,void 0,function(){return $t(this,function(t){return this.initializer==null?[2,[]]:this.initializerSignature==null?[2,this.initializer.executeAsync({},[])]:[2,this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))]})})},e.prototype.setResourceIdToCapturedInput=function(t){if(this.resourceIdToCapturedInput={},this.initializerSignature)for(var n=this.initializerSignature.outputs,r=Object.keys(n),a=0;a<r.length;a++){var i=r[a],o=n[i];this.resourceIdToCapturedInput[o.resourceId]=t[a]}},e.prototype.execute=function(t,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),t=this.normalizeInputs(t),n=this.normalizeOutputs(n);var r=this.executor.execute(t,n);return r.length>1?r:r[0]},e.prototype.executeAsync=function(t,n){return Vt(this,void 0,void 0,function(){var r,a;return $t(this,function(i){switch(i.label){case 0:return this.resourceIdToCapturedInput!=null?[3,2]:(r=this.setResourceIdToCapturedInput,[4,this.executeInitializerGraphAsync()]);case 1:r.apply(this,[i.sent()]),i.label=2;case 2:return t=this.normalizeInputs(t),n=this.normalizeOutputs(n),[4,this.executor.executeAsync(t,n)];case 3:return a=i.sent(),[2,a.length>1?a:a[0]]}})})},e.prototype.getIntermediateTensors=function(){return this.executor.getIntermediateTensors()},e.prototype.disposeIntermediateTensors=function(){this.executor.disposeIntermediateTensors()},e.prototype.convertTensorMapToTensorsMap=function(t){return Object.keys(t).reduce(function(n,r){return n[r]=[t[r]],n},{})},e.prototype.dispose=function(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&Ke.dispose(this.resourceIdToCapturedInput)),this.resourceManager.dispose()},e}();function Swe(e,t,n){return t===void 0&&(t={}),n===void 0&&(n=Ke.io),Vt(this,void 0,void 0,function(){var r;return $t(this,function(a){switch(a.label){case 0:if(e==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");return t==null&&(t={}),t.fromTFHub&&typeof e=="string"&&(e=Nwe(e)),r=new d6(e,t,n),[4,r.load()];case 1:return a.sent(),[2,r]}})})}function kwe(e){if(e==null)throw new Error("modelUrl in loadGraphModelSync() cannot be null. Please provide model artifacts or an IOHandler that loads the model");var t;if(e instanceof Array){var n=ke(e,2),r=n[0],a=n[1];if(!r)throw new Error("modelJSON must be the first element of the array");if(!a||!(a instanceof ArrayBuffer))throw new Error("An ArrayBuffer of weights must be the second element of the array");if(!("modelTopology"in r))throw new Error("Model JSON is missing 'modelTopology'");if(!("weightsManifest"in r))throw new Error("Model JSON is missing 'weightsManifest'");var i=Ke.io.getWeightSpecs(r.weightsManifest),o=Ke.io.getModelArtifactsForJSONSync(r,i,a);t=Ke.io.fromMemorySync(o)}else if("load"in e)t=e;else if("modelTopology"in e&&"weightSpecs"in e&&"weightData"in e)t=Ke.io.fromMemorySync(e);else throw new Error("Unknown model format");var s=new d6(t);return s.load(),s}function Nwe(e){return e.endsWith("/")||(e=e+"/"),"".concat(e).concat(xwe).concat(wwe)}var Twe="4.21.0";ec.GraphModel=d6;ec.deregisterOp=Qde;ec.loadGraphModel=Swe;ec.loadGraphModelSync=kwe;ec.registerOp=Zde;ec.version_converter=Twe});var lA=An(ti=>{"use strict";var jn=Il();function Ewe(e){var t=Object.create(null);return e&&Object.keys(e).forEach(function(n){if(n!=="default"){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}}),t.default=e,t}var zn=Ewe(jn),h6=function(e,t){return h6=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},h6(e,t)};function Kt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");h6(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function Xe(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function s(c){try{l(r.next(c))}catch(p){o(p)}}function u(c){try{l(r.throw(c))}catch(p){o(p)}}function l(c){c.done?i(c.value):a(c.value).then(s,u)}l((r=r.apply(e,t||[])).next())})}function Ye(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,a,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,a&&(i=l[0]&2?a.return:l[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,l[1])).done)return i;switch(a=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,a=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],a=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function tc(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Iwe(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function Cwe(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var nc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dwe(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){if(this instanceof r){var a=[null];a.push.apply(a,arguments);var i=Function.bind.apply(t,a);return new i}return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var a=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return e[r]}})}),n}var z_={exports:{}};(function(e){(function(t,n,r){function a(u){var l=this,c=s();l.next=function(){var p=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=p-(l.c=p|0)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(u),l.s0<0&&(l.s0+=1),l.s1-=c(u),l.s1<0&&(l.s1+=1),l.s2-=c(u),l.s2<0&&(l.s2+=1),c=null}function i(u,l){return l.c=u.c,l.s0=u.s0,l.s1=u.s1,l.s2=u.s2,l}function o(u,l){var c=new a(u),p=l&&l.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,p&&(typeof p=="object"&&i(p,c),d.state=function(){return i(c,{})}),d}function s(){var u=4022871197,l=function(c){c=String(c);for(var p=0;p<c.length;p++){u+=c.charCodeAt(p);var d=.02519603282416938*u;u=d>>>0,d-=u,d*=u,u=d>>>0,d-=u,u+=d*4294967296}return(u>>>0)*23283064365386963e-26};return l}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.alea=o})(nc,e,!1)})(z_);var _we=z_.exports,$_={exports:{}};(function(e){(function(t,n,r){function a(s){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var p=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^p^p>>>8},s===(s|0)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,u.next()}function i(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u}function o(s,u){var l=new a(s),c=u&&u.state,p=function(){return(l.next()>>>0)/4294967296};return p.double=function(){do var d=l.next()>>>11,f=(l.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},p.int32=l.next,p.quick=p,c&&(typeof c=="object"&&i(c,l),p.state=function(){return i(l,{})}),p}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor128=o})(nc,e,!1)})($_);var Awe=$_.exports,V_={exports:{}};(function(e){(function(t,n,r){function a(s){var u=this,l="";u.next=function(){var p=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^(p^p<<1))|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,s===(s|0)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,c==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function i(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u.v=s.v,u.d=s.d,u}function o(s,u){var l=new a(s),c=u&&u.state,p=function(){return(l.next()>>>0)/4294967296};return p.double=function(){do var d=l.next()>>>11,f=(l.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},p.int32=l.next,p.quick=p,c&&(typeof c=="object"&&i(c,l),p.state=function(){return i(l,{})}),p}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorwow=o})(nc,e,!1)})(V_);var Fwe=V_.exports,W_={exports:{}};(function(e){(function(t,n,r){function a(s){var u=this;u.next=function(){var c=u.x,p=u.i,d,f;return d=c[p],d^=d>>>7,f=d^d<<24,d=c[p+1&7],f^=d^d>>>10,d=c[p+3&7],f^=d^d>>>3,d=c[p+4&7],f^=d^d<<7,d=c[p+7&7],d=d^d<<13,f^=d^d<<9,c[p]=f,u.i=p+1&7,f};function l(c,p){var d,f=[];if(p===(p|0))f[0]=p;else for(p=""+p,d=0;d<p.length;++d)f[d&7]=f[d&7]<<15^p.charCodeAt(d)+f[d+1&7]<<13;for(;f.length<8;)f.push(0);for(d=0;d<8&&f[d]===0;++d);for(d==8?f[7]=-1:f[d],c.x=f,c.i=0,d=256;d>0;--d)c.next()}l(u,s)}function i(s,u){return u.x=s.x.slice(),u.i=s.i,u}function o(s,u){s==null&&(s=+new Date);var l=new a(s),c=u&&u.state,p=function(){return(l.next()>>>0)/4294967296};return p.double=function(){do var d=l.next()>>>11,f=(l.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},p.int32=l.next,p.quick=p,c&&(c.x&&i(c,l),p.state=function(){return i(l,{})}),p}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorshift7=o})(nc,e,!1)})(W_);var Rwe=W_.exports,U_={exports:{}};(function(e){(function(t,n,r){function a(s){var u=this;u.next=function(){var c=u.w,p=u.X,d=u.i,f,h;return u.w=c=c+1640531527|0,h=p[d+34&127],f=p[d=d+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,h=p[d]=h^f,u.i=d,h+(c^c>>>16)|0};function l(c,p){var d,f,h,m,v,g=[],y=128;for(p===(p|0)?(f=p,p=null):(p=p+"\0",f=0,y=Math.max(y,p.length)),h=0,m=-32;m<y;++m)p&&(f^=p.charCodeAt((m+32)%p.length)),m===0&&(v=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,m>=0&&(v=v+1640531527|0,d=g[m&127]^=f+v,h=d==0?h+1:0);for(h>=128&&(g[(p&&p.length||0)&127]=-1),h=127,m=4*128;m>0;--m)f=g[h+34&127],d=g[h=h+1&127],f^=f<<13,d^=d<<17,f^=f>>>15,d^=d>>>12,g[h]=f^d;c.w=v,c.X=g,c.i=h}l(u,s)}function i(s,u){return u.i=s.i,u.w=s.w,u.X=s.X.slice(),u}function o(s,u){s==null&&(s=+new Date);var l=new a(s),c=u&&u.state,p=function(){return(l.next()>>>0)/4294967296};return p.double=function(){do var d=l.next()>>>11,f=(l.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},p.int32=l.next,p.quick=p,c&&(c.X&&i(c,l),p.state=function(){return i(l,{})}),p}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor4096=o})(nc,e,!1)})(U_);var Owe=U_.exports,G_={exports:{}};(function(e){(function(t,n,r){function a(s){var u=this,l="";u.next=function(){var p=u.b,d=u.c,f=u.d,h=u.a;return p=p<<25^p>>>7^d,d=d-f|0,f=f<<24^f>>>8^h,h=h-p|0,u.b=p=p<<20^p>>>12^d,u.c=d=d-f|0,u.d=f<<16^d>>>16^h,u.a=h-p|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,s===Math.floor(s)?(u.a=s/4294967296|0,u.b=s|0):l+=s;for(var c=0;c<l.length+20;c++)u.b^=l.charCodeAt(c)|0,u.next()}function i(s,u){return u.a=s.a,u.b=s.b,u.c=s.c,u.d=s.d,u}function o(s,u){var l=new a(s),c=u&&u.state,p=function(){return(l.next()>>>0)/4294967296};return p.double=function(){do var d=l.next()>>>11,f=(l.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},p.int32=l.next,p.quick=p,c&&(typeof c=="object"&&i(c,l),p.state=function(){return i(l,{})}),p}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.tychei=o})(nc,e,!1)})(G_);var Mwe=G_.exports,q_={exports:{}},Pwe={},Bwe={__proto__:null,default:Pwe},Lwe=Dwe(Bwe);(function(e){(function(t,n,r){var a=256,i=6,o=52,s="random",u=r.pow(a,i),l=r.pow(2,o),c=l*2,p=a-1,d;function f(b,x,k){var N=[];x=x==!0?{entropy:!0}:x||{};var E=g(v(x.entropy?[b,w(n)]:b??y(),3),N),C=new h(N),R=function(){for(var A=C.g(i),M=u,$=0;A<l;)A=(A+$)*a,M*=a,$=C.g(1);for(;A>=c;)A/=2,M/=2,$>>>=1;return(A+$)/M};return R.int32=function(){return C.g(4)|0},R.quick=function(){return C.g(4)/4294967296},R.double=R,g(w(C.S),n),(x.pass||k||function(A,M,$,z){return z&&(z.S&&m(z,C),A.state=function(){return m(C,{})}),$?(r[s]=A,M):A})(R,E,"global"in x?x.global:this==r,x.state)}function h(b){var x,k=b.length,N=this,E=0,C=N.i=N.j=0,R=N.S=[];for(k||(b=[k++]);E<a;)R[E]=E++;for(E=0;E<a;E++)R[E]=R[C=p&C+b[E%k]+(x=R[E])],R[C]=x;(N.g=function(A){for(var M,$=0,z=N.i,L=N.j,B=N.S;A--;)M=B[z=p&z+1],$=$*a+B[p&(B[z]=B[L=p&L+M])+(B[L]=M)];return N.i=z,N.j=L,$})(a)}function m(b,x){return x.i=b.i,x.j=b.j,x.S=b.S.slice(),x}function v(b,x){var k=[],N=typeof b,E;if(x&&N=="object")for(E in b)try{k.push(v(b[E],x-1))}catch{}return k.length?k:N=="string"?b:b+"\0"}function g(b,x){for(var k=b+"",N,E=0;E<k.length;)x[p&E]=p&(N^=x[p&E]*19)+k.charCodeAt(E++);return w(x)}function y(){try{var b;return d&&(b=d.randomBytes)?b=b(a):(b=new Uint8Array(a),(t.crypto||t.msCrypto).getRandomValues(b)),w(b)}catch{var x=t.navigator,k=x&&x.plugins;return[+new Date,t,k,t.screen,w(n)]}}function w(b){return String.fromCharCode.apply(0,b)}if(g(r.random(),n),e.exports){e.exports=f;try{d=Lwe}catch{}}else r["seed"+s]=f})(typeof self<"u"?self:nc,[],Math)})(q_);var zwe=q_.exports,$we=_we,Vwe=Awe,Wwe=Fwe,Uwe=Rwe,Gwe=Owe,qwe=Mwe,rc=zwe;rc.alea=$we;rc.xor128=Vwe;rc.xorwow=Wwe;rc.xorshift7=Uwe;rc.xor4096=Gwe;rc.tychei=qwe;var H_=rc;function Hwe(e,t){return v0(e,t)}function v0(e,t,n,r){if(n===void 0&&(n=new Map),r===void 0&&(r=new Set),e==null)return null;if(typeof Blob=="function"&&e instanceof Blob)return e.slice();if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);var a=t(e);if(a.recurse&&a.value!==null)throw new Error("A deep map function may not return both a value and recurse=true.");if(a.recurse)if(Mp(e)){var i=Array.isArray(e)?[]:{};r.add(e);for(var o in e){var s=e[o],u=v0(s,t,n,r);i[o]=u}return r.delete(e),e.__proto__&&(i.__proto__=e.__proto__),i}else throw new Error("Can't recurse into non-iterable type: ".concat(e));else return n.set(e,a.value),a.value}function jwe(e,t){return t===void 0&&(t=K_),j_(e,t)}function j_(e,t,n){n===void 0&&(n=new Set);var r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");var a=t(e);if(a.recurse&&a.value!==null)throw new Error("A deep zip function may not return both a value and recurse=true.");if(a.recurse)if(Mp(r)){var i=Array.isArray(r)?[]:{};n.add(r);var o=function(u){var l=e.map(function(p){return p[u]}),c=j_(l,t,n);i[u]=c};for(var s in r)o(s);return n.delete(r),i}else throw new Error("Can't recurse into non-iterable type: ".concat(r));else return a.value}function K_(e){return e===null?null:Mp(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function X_(e,t){return Xe(this,void 0,void 0,function(){var n,r,a,i,o,s,u,l,c,p;return Ye(this,function(d){switch(d.label){case 0:n=new Map,v0(e,t,n),d.label=1;case 1:d.trys.push([1,6,7,8]),r=tc(Array.from(n.keys())),a=r.next(),d.label=2;case 2:return a.done?[3,5]:(i=a.value,o=n.get(i),zn.util.isPromise(o)?[4,o]:[3,4]);case 3:s=d.sent(),n.set(i,s),d.label=4;case 4:return a=r.next(),[3,2];case 5:return[3,8];case 6:return u=d.sent(),c={error:u},[3,8];case 7:try{a&&!a.done&&(p=r.return)&&p.call(r)}finally{if(c)throw c.error}return[7];case 8:return l=v0(e,t,n),[2,l]}})})}function Mp(e){var t=!1;if(zn.env().get("IS_BROWSER"))t=e instanceof TextDecoder;else{var n=require("string_decoder").StringDecoder;t=e instanceof n}return e!=null&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||typeof e=="object"&&!(e instanceof zn.Tensor)&&!(e instanceof Promise)&&!t)}function Kwe(e){return e==null||Xwe(e)||Array.isArray(e)||typeof e=="object"&&e instanceof zn.Tensor||zn.util.isTypedArray(e)}function Xwe(e){return e===null||typeof e!="object"&&typeof e!="function"}function Ywe(e){return Hwe(e,Jwe)}function Jwe(e){return e instanceof zn.Tensor?{value:e.clone(),recurse:!1}:Mp(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}var Y_=function(){function e(t){if(this.capacity=t,this.begin=0,this.end=0,t==null)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(t<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(t),this.doubledCapacity=2*t}return e.prototype.wrap=function(t){for(;t<0;)t+=this.doubledCapacity;return t%this.doubledCapacity},e.prototype.get=function(t){if(t<0)throw new RangeError("Can't get item at a negative index.");return this.data[t%this.capacity]},e.prototype.set=function(t,n){if(t<0)throw new RangeError("Can't set item at a negative index.");this.data[t%this.capacity]=n},e.prototype.length=function(){var t=this.end-this.begin;return t<0&&(t=this.doubledCapacity+t),t},e.prototype.isFull=function(){return this.length()===this.capacity},e.prototype.isEmpty=function(){return this.length()===0},e.prototype.push=function(t){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,t),this.end=this.wrap(this.end+1)},e.prototype.pushAll=function(t){var n,r;try{for(var a=tc(t),i=a.next();!i.done;i=a.next()){var o=i.value;this.push(o)}}catch(s){n={error:s}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}},e.prototype.pop=function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);var t=this.get(this.end);return this.set(this.end,void 0),t},e.prototype.unshift=function(t){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,t)},e.prototype.shift=function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var t=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),t},e.prototype.shuffleExcise=function(t){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var n=this.wrap(this.begin+t),r=this.get(n);return this.set(n,this.pop()),r},e}(),J_=function(e){Kt(t,e);function t(){return e.call(this,t.INITIAL_CAPACITY)||this}return t.prototype.isFull=function(){return!1},t.prototype.push=function(n){e.prototype.isFull.call(this)&&this.expand(),e.prototype.push.call(this,n)},t.prototype.unshift=function(n){e.prototype.isFull.call(this)&&this.expand(),e.prototype.unshift.call(this,n)},t.prototype.expand=function(){for(var n=this.capacity*2,r=new Array(n),a=this.length(),i=0;i<a;i++)r[i]=this.get(this.wrap(this.begin+i));this.data=r,this.capacity=n,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=a},t}(Y_);J_.INITIAL_CAPACITY=32;function Z_(e){return new e5e(e)}function m6(e){return new t5e(e)}function Zwe(e,t){return new Q_(e,t)}function Qwe(e,t){return t===void 0&&(t=Wu.FAIL),new c5e(e,t)}var Mr=function(){function e(){}return e.prototype.toArray=function(){return Xe(this,void 0,void 0,function(){var t,n;return Ye(this,function(r){switch(r.label){case 0:return t=[],[4,this.next()];case 1:n=r.sent(),r.label=2;case 2:return n.done?[3,4]:(t.push(n.value),[4,this.next()]);case 3:return n=r.sent(),[3,2];case 4:return[2,t]}})})},e.prototype.toArrayForTest=function(){return Xe(this,void 0,void 0,function(){var t,n,r;return Ye(this,function(a){switch(a.label){case 0:return t=this.prefetch(100),n=[],[4,t.next()];case 1:r=a.sent(),a.label=2;case 2:return r.done?[3,4]:(n.push(r.value),[4,t.next()]);case 3:return r=a.sent(),[3,2];case 4:return[2,n]}})})},e.prototype.resolveFully=function(){return Xe(this,void 0,void 0,function(){var t;return Ye(this,function(n){switch(n.label){case 0:return[4,this.next()];case 1:t=n.sent(),n.label=2;case 2:return t.done?[3,4]:[4,this.next()];case 3:return t=n.sent(),[3,2];case 4:return[2]}})})},e.prototype.resolveWhile=function(t){return Xe(this,void 0,void 0,function(){var n,r;return Ye(this,function(a){switch(a.label){case 0:return[4,this.next()];case 1:n=a.sent(),r=t(n.value),a.label=2;case 2:return!n.done&&r?[4,this.next()]:[3,4];case 3:return n=a.sent(),r=t(n.value),[3,2];case 4:return[2]}})})},e.prototype.handleErrors=function(t){return new u5e(this,t)},e.prototype.filter=function(t){return new o5e(this,t)},e.prototype.map=function(t){return new s5e(this,t)},e.prototype.mapAsync=function(t){return new P_(this,t)},e.prototype.serialMapAsync=function(t){return new P_(this,t).serial()},e.prototype.flatmap=function(t){return new l5e(this,t)},e.prototype.forEachAsync=function(t){return Xe(this,void 0,void 0,function(){return Ye(this,function(n){return[2,this.map(t).resolveFully()]})})},e.prototype.serialForEach=function(t){return Xe(this,void 0,void 0,function(){return Ye(this,function(n){return[2,this.serialMapAsync(t).resolveWhile(function(r){return r===!0})]})})},e.prototype.rowMajorBatch=function(t,n){return n===void 0&&(n=!0),new i5e(this,t,n)},e.prototype.columnMajorBatch=function(t,n,r){n===void 0&&(n=!0),r===void 0&&(r=K_);var a=this.rowMajorBatch(t,n);return a.map(function(i){return jwe(i,r)})},e.prototype.concatenate=function(t,n){return new Q_(Z_([this,t]),n)},e.prototype.take=function(t){return t<0||t==null?this:new a5e(this,t)},e.prototype.skip=function(t){return t<0||t==null?this:new r5e(this,t)},e.prototype.prefetch=function(t){return new eA(this,t)},e.prototype.shuffle=function(t,n){return new p5e(this,t,n)},e.prototype.serial=function(){return new n5e(this)},e}(),e5e=function(e){Kt(t,e);function t(n){var r=e.call(this)||this;return r.items=n,r.trav=0,r}return t.prototype.summary=function(){return"Array of ".concat(this.items.length," items")},t.prototype.next=function(){return Xe(this,void 0,void 0,function(){var n;return Ye(this,function(r){return this.trav>=this.items.length?[2,{value:null,done:!0}]:(n=this.items[this.trav],this.trav++,[2,{value:Ywe(n),done:!1}])})})},t}(Mr),t5e=function(e){Kt(t,e);function t(n){var r=e.call(this)||this;return r.nextFn=n,r}return t.prototype.summary=function(){return"Function call"},t.prototype.next=function(){return Xe(this,void 0,void 0,function(){return Ye(this,function(n){try{return[2,this.nextFn()]}catch(r){throw r.message="Error thrown while iterating through a dataset: ".concat(r.message),r}return[2]})})},t}(Mr),n5e=function(e){Kt(t,e);function t(n){var r=e.call(this)||this;return r.upstream=n,r.lastRead=Promise.resolve({value:null,done:!1}),r}return t.prototype.summary=function(){return"".concat(this.upstream.summary()," -> Serial")},t.prototype.next=function(){return Xe(this,void 0,void 0,function(){var n=this;return Ye(this,function(r){return this.lastRead=this.lastRead.then(function(){return n.serialNext()}),[2,this.lastRead]})})},t.prototype.serialNext=function(){return Xe(this,void 0,void 0,function(){return Ye(this,function(n){return[2,this.upstream.next()]})})},t}(Mr),r5e=function(e){Kt(t,e);function t(n,r){var a=e.call(this)||this;return a.upstream=n,a.maxCount=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return t.prototype.summary=function(){return"".concat(this.upstream.summary()," -> Skip")},t.prototype.next=function(){return Xe(this,void 0,void 0,function(){var n=this;return Ye(this,function(r){return this.lastRead=this.lastRead.then(function(){return n.serialNext()}),[2,this.lastRead]})})},t.prototype.serialNext=function(){return Xe(this,void 0,void 0,function(){var n;return Ye(this,function(r){switch(r.label){case 0:return this.count++<this.maxCount?[4,this.upstream.next()]:[3,2];case 1:return n=r.sent(),n.done?[2,n]:(zn.dispose(n.value),[3,0]);case 2:return[2,this.upstream.next()]}})})},t}(Mr),a5e=function(e){Kt(t,e);function t(n,r){var a=e.call(this)||this;return a.upstream=n,a.maxCount=r,a.count=0,a}return t.prototype.summary=function(){return"".concat(this.upstream.summary()," -> Take")},t.prototype.next=function(){return Xe(this,void 0,void 0,function(){return Ye(this,function(n){return this.count++>=this.maxCount?[2,{value:null,done:!0}]:[2,this.upstream.next()]})})},t}(Mr),i5e=function(e){Kt(t,e);function t(n,r,a){a===void 0&&(a=!0);var i=e.call(this)||this;return i.upstream=n,i.batchSize=r,i.enableSmallLastBatch=a,i.lastRead=Promise.resolve({value:null,done:!1}),i}return t.prototype.summary=function(){return"".concat(this.upstream.summary()," -> RowMajorBatch")},t.prototype.next=function(){return Xe(this,void 0,void 0,function(){var n=this;return Ye(this,function(r){return this.lastRead=this.lastRead.then(function(){return n.serialNext()}),[2,this.lastRead]})})},t.prototype.serialNext=function(){return Xe(this,void 0,void 0,function(){var n,r;return Ye(this,function(a){switch(a.label){case 0:n=[],a.label=1;case 1:return n.length<this.batchSize?[4,this.upstream.next()]:[3,3];case 2:return r=a.sent(),r.done?this.enableSmallLastBatch&&n.length>0?[2,{value:n,done:!1}]:[2,{value:null,done:!0}]:(n.push(r.value),[3,1]);case 3:return[2,{value:n,done:!1}]}})})},t}(Mr),o5e=function(e){Kt(t,e);function t(n,r){var a=e.call(this)||this;return a.upstream=n,a.predicate=r,a.lastRead=Promise.resolve({value:null,done:!1}),a}return t.prototype.summary=function(){return"".concat(this.upstream.summary()," -> Filter")},t.prototype.next=function(){return Xe(this,void 0,void 0,function(){var n=this;return Ye(this,function(r){return this.lastRead=this.lastRead.then(function(){return n.serialNext()}),[2,this.lastRead]})})},t.prototype.serialNext=function(){return Xe(this,void 0,void 0,function(){var n;return Ye(this,function(r){switch(r.label){case 0:return[4,this.upstream.next()];case 1:return n=r.sent(),n.done||this.predicate(n.value)?[2,n]:(zn.dispose(n.value),[3,0]);case 2:return[2]}})})},t}(Mr),s5e=function(e){Kt(t,e);function t(n,r){var a=e.call(this)||this;return a.upstream=n,a.transform=r,a}return t.prototype.summary=function(){return"".concat(this.upstream.summary()," -> Map")},t.prototype.next=function(){return Xe(this,void 0,void 0,function(){var n,r,a,i,o,s,u,l,c;return Ye(this,function(p){switch(p.label){case 0:return[4,this.upstream.next()];case 1:if(n=p.sent(),n.done)return[2,{value:null,done:!0}];r=zn.tensor_util.getTensorsInContainer(n.value),a=this.transform(n.value),i=zn.tensor_util.getTensorsInContainer(a);try{for(o=tc(r),s=o.next();!s.done;s=o.next())u=s.value,zn.tensor_util.isTensorInList(u,i)||u.dispose()}catch(d){l={error:d}}finally{try{s&&!s.done&&(c=o.return)&&c.call(o)}finally{if(l)throw l.error}}return[2,{value:a,done:!1}]}})})},t}(Mr),u5e=function(e){Kt(t,e);function t(n,r){var a=e.call(this)||this;return a.upstream=n,a.handler=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return t.prototype.summary=function(){return"".concat(this.upstream.summary()," -> handleErrors")},t.prototype.next=function(){return Xe(this,void 0,void 0,function(){var n=this;return Ye(this,function(r){return this.lastRead=this.lastRead.then(function(){return n.serialNext()}),[2,this.lastRead]})})},t.prototype.serialNext=function(){return Xe(this,void 0,void 0,function(){var n;return Ye(this,function(r){switch(r.label){case 0:r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.upstream.next()];case 2:return[2,r.sent()];case 3:return n=r.sent(),this.handler(n)?[3,4]:[2,{value:null,done:!0}];case 4:return[3,0];case 5:return[2]}})})},t}(Mr),P_=function(e){Kt(t,e);function t(n,r){var a=e.call(this)||this;return a.upstream=n,a.transform=r,a}return t.prototype.summary=function(){return"".concat(this.upstream.summary()," -> AsyncMap")},t.prototype.next=function(){return Xe(this,void 0,void 0,function(){var n,r,a,i,o,s,u,l,c;return Ye(this,function(p){switch(p.label){case 0:return[4,this.upstream.next()];case 1:return n=p.sent(),n.done?[2,{value:null,done:!0}]:(r=zn.tensor_util.getTensorsInContainer(n.value),[4,this.transform(n.value)]);case 2:a=p.sent(),i=zn.tensor_util.getTensorsInContainer(a);try{for(o=tc(r),s=o.next();!s.done;s=o.next())u=s.value,zn.tensor_util.isTensorInList(u,i)||u.dispose()}catch(d){l={error:d}}finally{try{s&&!s.done&&(c=o.return)&&c.call(o)}finally{if(l)throw l.error}}return[2,{value:a,done:!1}]}})})},t}(Mr),v6=function(e){Kt(t,e);function t(){var n=e.call(this)||this;return n.outputQueue=new J_,n.lastRead=Promise.resolve({value:null,done:!1}),n}return t.prototype.next=function(){return Xe(this,void 0,void 0,function(){var n=this;return Ye(this,function(r){return this.lastRead=this.lastRead.then(function(){return n.serialNext()}),[2,this.lastRead]})})},t.prototype.serialNext=function(){return Xe(this,void 0,void 0,function(){return Ye(this,function(n){switch(n.label){case 0:return this.outputQueue.length()!==0?[3,2]:[4,this.pump()];case 1:return n.sent()?[3,0]:[2,{value:null,done:!0}];case 2:return[2,{value:this.outputQueue.shift(),done:!1}]}})})},t}(Mr),l5e=function(e){Kt(t,e);function t(n,r){var a=e.call(this)||this;return a.upstream=n,a.transform=r,a}return t.prototype.summary=function(){return"".concat(this.upstream.summary()," -> Flatmap")},t.prototype.pump=function(){return Xe(this,void 0,void 0,function(){var n,r,a,i,o,s,u,l,c;return Ye(this,function(p){switch(p.label){case 0:return[4,this.upstream.next()];case 1:if(n=p.sent(),n.done)return[2,!1];r=zn.tensor_util.getTensorsInContainer(n.value),a=this.transform(n.value),i=zn.tensor_util.getTensorsInContainer(a),this.outputQueue.pushAll(a);try{for(o=tc(r),s=o.next();!s.done;s=o.next())u=s.value,zn.tensor_util.isTensorInList(u,i)||u.dispose()}catch(d){l={error:d}}finally{try{s&&!s.done&&(c=o.return)&&c.call(o)}finally{if(l)throw l.error}}return[2,!0]}})})},t}(v6),Q_=function(e){Kt(t,e);function t(n,r){var a=e.call(this)||this;return a.baseErrorHandler=r,a.lastRead=null,a.iterator=null,a.moreIterators=n,a}return t.prototype.summary=function(){var n="TODO: fill in upstream of chained summaries";return"".concat(n," -> Chained")},t.prototype.next=function(){return Xe(this,void 0,void 0,function(){return Ye(this,function(n){return this.lastRead=this.readFromChain(this.lastRead),[2,this.lastRead]})})},t.prototype.readFromChain=function(n){return Xe(this,void 0,void 0,function(){var r,a;return Ye(this,function(i){switch(i.label){case 0:return[4,n];case 1:return i.sent(),this.iterator!=null?[3,3]:[4,this.moreIterators.next()];case 2:if(r=i.sent(),r.done)return[2,{value:null,done:!0}];this.iterator=r.value,this.baseErrorHandler!=null&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler)),i.label=3;case 3:return[4,this.iterator.next()];case 4:return a=i.sent(),a.done?(this.iterator=null,[2,this.readFromChain(n)]):[2,a]}})})},t}(Mr),Wu;(function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"})(Wu||(Wu={}));var c5e=function(e){Kt(t,e);function t(n,r){r===void 0&&(r=Wu.FAIL);var a=e.call(this)||this;return a.iterators=n,a.mismatchMode=r,a.count=0,a.currentPromise=null,a}return t.prototype.summary=function(){var n="TODO: fill in upstream of zip summaries";return"{".concat(n,"} -> Zip")},t.prototype.nextState=function(n){return Xe(this,void 0,void 0,function(){function r(s){if(s instanceof Mr){var u=s.next();return{value:u.then(function(l){return a++,l.done&&i++,l.value}),recurse:!1}}else return{value:null,recurse:!0}}var a,i,o;return Ye(this,function(s){switch(s.label){case 0:return[4,n];case 1:return s.sent(),a=0,i=0,[4,X_(this.iterators,r)];case 2:if(o=s.sent(),a===i)return[2,{value:null,done:!0}];if(i>0)switch(this.mismatchMode){case Wu.FAIL:throw new Error("Zipped streams should have the same length. "+"Mismatched at element ".concat(this.count,"."));case Wu.SHORTEST:return[2,{value:null,done:!0}];case Wu.LONGEST:}return this.count++,[2,{value:o,done:!1}]}})})},t.prototype.next=function(){return Xe(this,void 0,void 0,function(){return Ye(this,function(n){return this.currentPromise=this.nextState(this.currentPromise),[2,this.currentPromise]})})},t}(Mr),eA=function(e){Kt(t,e);function t(n,r){var a=e.call(this)||this;return a.upstream=n,a.bufferSize=r,a.buffer=new Y_(r),a}return t.prototype.summary=function(){return"".concat(this.upstream.summary()," -> Prefetch")},t.prototype.refill=function(){for(;!this.buffer.isFull();){var n=this.upstream.next();this.buffer.push(n)}},t.prototype.next=function(){return this.refill(),this.buffer.shift()},t}(Mr),p5e=function(e){Kt(t,e);function t(n,r,a){var i=e.call(this,n,r)||this;return i.upstream=n,i.windowSize=r,i.upstreamExhausted=!1,i.random=H_.alea(a||zn.util.now().toString()),i.lastRead=Promise.resolve({value:null,done:!1}),i}return t.prototype.next=function(){return Xe(this,void 0,void 0,function(){var n=this;return Ye(this,function(r){return this.lastRead=this.lastRead.then(function(){return n.serialNext()}),[2,this.lastRead]})})},t.prototype.randomInt=function(n){return Math.floor(this.random()*n)},t.prototype.chooseIndex=function(){return this.randomInt(this.buffer.length())},t.prototype.serialNext=function(){return Xe(this,void 0,void 0,function(){var n,r;return Ye(this,function(a){switch(a.label){case 0:this.upstreamExhausted||this.refill(),a.label=1;case 1:return this.buffer.isEmpty()?[3,3]:(n=this.chooseIndex(),[4,this.buffer.shuffleExcise(n)]);case 2:if(r=a.sent(),r.done)this.upstreamExhausted=!0;else return this.refill(),[2,r];return[3,1];case 3:return[2,{value:null,done:!0}]}})})},t}(eA),Pp=function(){function e(){this.size=null}return e.prototype.batch=function(t,n){var r=this;n===void 0&&(n=!0);var a=this;zn.util.assert(t>0,function(){return`batchSize needs to be positive, but it is
      `.concat(t)});var i;return this.size===1/0||this.size==null?i=this.size:n?i=Math.ceil(this.size/t):i=Math.floor(this.size/t),ei(function(){return Xe(r,void 0,void 0,function(){return Ye(this,function(o){switch(o.label){case 0:return[4,a.iterator()];case 1:return[2,o.sent().columnMajorBatch(t,n,h5e)]}})})},i)},e.prototype.concatenate=function(t){var n=this,r=this,a;return this.size===1/0||t.size===1/0?a=1/0:this.size!=null&&t.size!=null?a=this.size+t.size:a=null,ei(function(){return Xe(n,void 0,void 0,function(){var i,o;return Ye(this,function(s){switch(s.label){case 0:return[4,r.iterator()];case 1:return o=(i=s.sent()).concatenate,[4,t.iterator()];case 2:return[2,o.apply(i,[s.sent()])]}})})},a)},e.prototype.filter=function(t){var n=this,r=this,a;return this.size===1/0?a=1/0:a=null,ei(function(){return Xe(n,void 0,void 0,function(){return Ye(this,function(i){switch(i.label){case 0:return[4,r.iterator()];case 1:return[2,i.sent().filter(function(o){return zn.tidy(function(){return t(o)})})]}})})},a)},e.prototype.forEachAsync=function(t){return Xe(this,void 0,void 0,function(){return Ye(this,function(n){switch(n.label){case 0:return[4,this.iterator()];case 1:return[2,n.sent().forEachAsync(t)]}})})},e.prototype.map=function(t){var n=this,r=this;return ei(function(){return Xe(n,void 0,void 0,function(){return Ye(this,function(a){switch(a.label){case 0:return[4,r.iterator()];case 1:return[2,a.sent().map(function(i){return zn.tidy(function(){return t(i)})})]}})})},this.size)},e.prototype.mapAsync=function(t){var n=this,r=this;return ei(function(){return Xe(n,void 0,void 0,function(){return Ye(this,function(a){switch(a.label){case 0:return[4,r.iterator()];case 1:return[2,a.sent().mapAsync(t)]}})})},this.size)},e.prototype.prefetch=function(t){var n=this;if(t==null)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");var r=this;return ei(function(){return Xe(n,void 0,void 0,function(){return Ye(this,function(a){switch(a.label){case 0:return[4,r.iterator()];case 1:return[2,a.sent().prefetch(t)]}})})},this.size)},e.prototype.repeat=function(t){var n=this,r=this,a;return this.size!=null&&t>0?a=this.size*t:t===0?a=0:this.size!=null&&(t===void 0||t<0)?a=1/0:a=null,ei(function(){return Xe(n,void 0,void 0,function(){var i,o=this;return Ye(this,function(s){return i=m6(function(){return Xe(o,void 0,void 0,function(){var u;return Ye(this,function(l){switch(l.label){case 0:return u={},[4,r.iterator()];case 1:return[2,(u.value=l.sent(),u.done=!1,u)]}})})}),[2,Zwe(i.take(t))]})})},a)},e.prototype.skip=function(t){var n=this,r=this,a;return this.size!=null&&t>=0&&this.size>=t?a=this.size-t:this.size!=null&&(this.size<t||t===void 0||t<0)?a=0:a=null,ei(function(){return Xe(n,void 0,void 0,function(){return Ye(this,function(i){switch(i.label){case 0:return[4,r.iterator()];case 1:return[2,i.sent().skip(t)]}})})},a)},e.prototype.shuffle=function(t,n,r){var a=this;if(r===void 0&&(r=!0),t==null||t<0)throw this.size==null?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting "+"bufferSize to the dataset size (".concat(this.size," elements)"));var i=this,o=H_.alea(n||zn.util.now().toString());return ei(function(){return Xe(a,void 0,void 0,function(){var s;return Ye(this,function(u){switch(u.label){case 0:return s=o.int32(),r&&(s+=o.int32()),[4,i.iterator()];case 1:return[2,u.sent().shuffle(t,s.toString())]}})})},this.size)},e.prototype.take=function(t){var n=this,r=this,a;return this.size!=null&&this.size>t?a=t:this.size!=null&&this.size<=t?a=this.size:a=null,ei(function(){return Xe(n,void 0,void 0,function(){return Ye(this,function(i){switch(i.label){case 0:return[4,r.iterator()];case 1:return[2,i.sent().take(t)]}})})},a)},e.prototype.toArray=function(){return Xe(this,void 0,void 0,function(){return Ye(this,function(t){switch(t.label){case 0:if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return[4,this.iterator()];case 1:return[2,t.sent().toArray()]}})})},e.prototype.toArrayForTest=function(){return Xe(this,void 0,void 0,function(){return Ye(this,function(t){switch(t.label){case 0:if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return[4,this.iterator()];case 1:return[2,t.sent().toArrayForTest()]}})})},e}();Pp.MAX_BUFFER_SIZE=1e4;function ei(e,t){return t===void 0&&(t=null),new(function(n){Kt(r,n);function r(){var a=n.apply(this,Cwe([],Iwe(arguments),!1))||this;return a.size=t,a}return r.prototype.iterator=function(){return Xe(this,void 0,void 0,function(){return Ye(this,function(a){return[2,e()]})})},r}(Pp))}function d5e(e){var t=this;return ei(function(){return Xe(t,void 0,void 0,function(){return Ye(this,function(n){return[2,Z_(e)]})})},e.length)}function f5e(e){var t=this;if(!Mp(e))throw new Error("The argument to zip() must be an object or array.");var n;if(Array.isArray(e))for(var r=0;r<e.length;r++)n=n==null?e[r].size:Math.min(n,e[r].size);else if(e instanceof Object)for(var a in e)n=n==null?e[a].size:Math.min(n,e[a].size);return ei(function(){return Xe(t,void 0,void 0,function(){var i;return Ye(this,function(o){switch(o.label){case 0:return[4,X_(e,function(s){if(s instanceof Pp)return{value:s.iterator(),recurse:!1};if(Mp(s))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")})];case 1:return i=o.sent(),[2,Qwe(i,Wu.SHORTEST)]}})})},n)}function h5e(e){if(e===null)return null;var t=e[0];if(Kwe(t)){var n=m5e(e);return{value:n,recurse:!1}}return{value:null,recurse:!0}}function m5e(e){if(e.length===0)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof zn.Tensor?zn.stack(e):zn.tensor(e)}var tA=function(e){Kt(t,e);function t(n){var r=e.call(this)||this;return r.input=n,r}return t.prototype.iterator=function(){return Xe(this,void 0,void 0,function(){var n,r,a;return Ye(this,function(i){switch(i.label){case 0:return[4,this.input.iterator()];case 1:return n=i.sent(),r=n.decodeUTF8(),a=r.split(`
`).map(function(o){return o.endsWith("\r")&&(o=o.slice(0,-1)),o}),[2,a]}})})},t}(Pp),h0='"',wh=Symbol("out"),B_=Symbol("field"),m0=Symbol("quote"),f6=Symbol("quoteafterquote"),L_=Symbol("quoteinquote"),nA=function(e){Kt(t,e);function t(n,r){var a=e.call(this)||this;return a.input=n,a.hasHeader=!0,a.fullColumnNames=null,a.columnNamesValidated=!1,a.columnConfigs=null,a.configuredColumnsOnly=!1,a.delimiter=",",a.delimWhitespace=!1,a.base=new tA(n),r||(r={}),a.hasHeader=r.hasHeader!==!1,a.fullColumnNames=r.columnNames,a.columnConfigs=r.columnConfigs,a.configuredColumnsOnly=r.configuredColumnsOnly,r.delimWhitespace?(jn.util.assert(r.delimiter==null,function(){return"Delimiter should not be provided when delimWhitespace is true."}),a.delimWhitespace=!0,a.delimiter=" "):a.delimiter=r.delimiter?r.delimiter:",",a}return t.prototype.columnNames=function(){return Xe(this,void 0,void 0,function(){return Ye(this,function(n){switch(n.label){case 0:return this.columnNamesValidated?[3,2]:[4,this.setColumnNames()];case 1:n.sent(),n.label=2;case 2:return[2,this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames]}})})},t.prototype.setColumnNames=function(){return Xe(this,void 0,void 0,function(){var n,r,a,i,o,s,u,l,c,p=this;return Ye(this,function(d){switch(d.label){case 0:return[4,this.maybeReadHeaderLine()];case 1:if(n=d.sent(),!this.fullColumnNames&&!n)throw new Error("Column names must be provided if there is no header line.");if(this.fullColumnNames&&n&&jn.util.assert(n.length===this.fullColumnNames.length,function(){return"The length of provided columnNames ("+p.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+n.length.toString()+")."}),this.fullColumnNames||(this.fullColumnNames=n),r=this.fullColumnNames.reduce(function(f,h){return f[h]=f[h]+1||1,f},{}),a=Object.keys(r).filter(function(f){return r[f]>1}),jn.util.assert(a.length===0,function(){return"Duplicate column names found: "+a.toString()}),this.columnConfigs)try{for(i=tc(Object.keys(this.columnConfigs)),o=i.next();!o.done;o=i.next())if(s=o.value,u=this.fullColumnNames.indexOf(s),u===-1)throw new Error('The key "'+s+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").")}catch(f){l={error:f}}finally{try{o&&!o.done&&(c=i.return)&&c.call(i)}finally{if(l)throw l.error}}return this.columnNamesValidated=!0,[2]}})})},t.prototype.maybeReadHeaderLine=function(){return Xe(this,void 0,void 0,function(){var n,r,a,i;return Ye(this,function(o){switch(o.label){case 0:return this.hasHeader?[4,this.base.iterator()]:[3,3];case 1:return n=o.sent(),[4,n.next()];case 2:if(r=o.sent(),r.done)throw new Error("No data was found for CSV parsing.");return a=r.value,i=this.parseRow(a,!1),[2,i];case 3:return[2,null]}})})},t.prototype.iterator=function(){return Xe(this,void 0,void 0,function(){var n,r=this;return Ye(this,function(a){switch(a.label){case 0:return this.columnNamesValidated?[3,2]:[4,this.setColumnNames()];case 1:a.sent(),a.label=2;case 2:return[4,this.base.iterator()];case 3:return n=a.sent(),this.hasHeader&&(n=n.skip(1)),[2,n.map(function(i){return r.makeDataElement(i)})]}})})},t.prototype.makeDataElement=function(n){for(var r=this.parseRow(n),a={},i={},o=0;o<this.fullColumnNames.length;o++){var s=this.fullColumnNames[o],u=this.columnConfigs?this.columnConfigs[s]:null;if(!(this.configuredColumnsOnly&&!u)){var l=r[o],c=null;if(l==="")if(u&&u.default!==void 0)c=u.default;else{if(u&&(u.required||u.isLabel))throw new Error("Required column ".concat(s," is empty in this line: ").concat(n));c=void 0}else{var p=Number(l);if(isNaN(p))u&&u.dtype==="bool"?c=this.getBoolean(l):c=l;else if(!u||!u.dtype)c=p;else switch(u.dtype){case"float32":c=p;break;case"int32":c=Math.floor(p);break;case"bool":c=this.getBoolean(l);break;default:c=p}}u&&u.isLabel?i[s]=c:a[s]=c}}return Object.keys(i).length===0?a:{xs:a,ys:i}},t.prototype.getBoolean=function(n){return n==="1"||n.toLowerCase()==="true"?1:0},t.prototype.parseRow=function(n,r){r===void 0&&(r=!0);for(var a=[],i=0,o=n.length,s=wh,u=0;u<o;u++)switch(s){case wh:switch(n.charAt(u)){case h0:i=u+1,s=m0;break;case this.delimiter:if(i=u+1,this.delimiter===" "&&this.delimWhitespace)break;a.push(""),s=wh;break;default:s=B_,i=u;break}break;case B_:switch(n.charAt(u)){case this.delimiter:a.push(n.substring(i,u)),s=wh,i=u+1;break}break;case m0:switch(n.charAt(u)){case h0:s=f6;break}break;case f6:switch(n.charAt(u)){case this.delimiter:a.push(n.substring(i,u-1)),s=wh,i=u+1;break;case h0:s=m0;break;default:s=L_;break}break;case L_:switch(n.charAt(u)){case h0:s=m0;break}break}if(s===f6?a.push(n.substring(i,o-1)):a.push(n.substring(i)),r&&a.length!==this.fullColumnNames.length)throw new Error("Invalid row in csv file. Should have ".concat(this.fullColumnNames.length," elements in a row, but got ").concat(a));return a},t}(Pp),v5e=function(e){Kt(t,e);function t(n){var r=e.call(this)||this;r.microphoneConfig=n,r.isClosed=!1,r.fftSize=n.fftSize||1024;var a=Math.log2(r.fftSize);if(r.fftSize<0||a<4||a>14||!Number.isInteger(a))throw new Error("Invalid fftSize: it must be a power of 2 between "+"2 to 4 and 2 to 14, but got ".concat(r.fftSize));if(r.numFrames=n.numFramesPerSpectrogram||43,r.sampleRateHz=n.sampleRateHz,r.columnTruncateLength=n.columnTruncateLength||r.fftSize,r.audioTrackConstraints=n.audioTrackConstraints,r.smoothingTimeConstant=n.smoothingTimeConstant||0,r.includeSpectrogram=n.includeSpectrogram!==!1,r.includeWaveform=n.includeWaveform===!0,!r.includeSpectrogram&&!r.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.");return r}return t.prototype.summary=function(){return"microphone"},t.create=function(n){return n===void 0&&(n={}),Xe(this,void 0,void 0,function(){var r;return Ye(this,function(a){switch(a.label){case 0:if(!jn.env().get("IS_BROWSER"))throw new Error("microphone API is only supported in browser environment.");return r=new t(n),[4,r.start()];case 1:return a.sent(),[2,r]}})})},t.prototype.start=function(){return Xe(this,void 0,void 0,function(){var n,r,a,i;return Ye(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),n=this,[4,navigator.mediaDevices.getUserMedia({audio:this.audioTrackConstraints==null?!0:this.audioTrackConstraints,video:!1})];case 1:return n.stream=o.sent(),[3,3];case 2:throw r=o.sent(),new Error("Error thrown while initializing video stream: ".concat(r.message));case 3:if(!this.stream)throw new Error("Could not obtain audio from microphone.");if(a=window.AudioContext||window.webkitAudioContext,this.audioContext=new a,!this.sampleRateHz)this.sampleRateHz=this.audioContext.sampleRate;else if(this.audioContext.sampleRate!==this.sampleRateHz)throw new Error("Mismatch in sampling rate: "+"Expected: ".concat(this.sampleRateHz,"; ")+"Actual: ".concat(this.audioContext.sampleRate));return i=this.audioContext.createMediaStreamSource(this.stream),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=this.fftSize*2,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,i.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize),[2]}})})},t.prototype.next=function(){return Xe(this,void 0,void 0,function(){var n,r,a,i,o;return Ye(this,function(s){switch(s.label){case 0:return this.isClosed?[2,{value:null,done:!0}]:[4,this.getAudioData()];case 1:return a=s.sent(),this.includeSpectrogram&&(i=this.flattenQueue(a.freqDataQueue),n=this.getTensorFromAudioDataArray(i,[this.numFrames,this.columnTruncateLength,1])),this.includeWaveform&&(o=this.flattenQueue(a.timeDataQueue),r=this.getTensorFromAudioDataArray(o,[this.numFrames*this.fftSize,1])),[2,{value:{spectrogram:n,waveform:r},done:!1}]}})})},t.prototype.capture=function(){return Xe(this,void 0,void 0,function(){return Ye(this,function(n){switch(n.label){case 0:return[4,this.next()];case 1:return[2,n.sent().value]}})})},t.prototype.getAudioData=function(){return Xe(this,void 0,void 0,function(){var n,r,a,i=this;return Ye(this,function(o){return n=[],r=[],a=0,[2,new Promise(function(s){var u=setInterval(function(){i.includeSpectrogram&&(i.analyser.getFloatFrequencyData(i.freqData),i.freqData[0]===-1/0&&s({freqDataQueue:n,timeDataQueue:r}),n.push(i.freqData.slice(0,i.columnTruncateLength))),i.includeWaveform&&(i.analyser.getFloatTimeDomainData(i.timeData),r.push(i.timeData.slice())),++a===i.numFrames&&(clearInterval(u),s({freqDataQueue:n,timeDataQueue:r}))},i.fftSize/i.sampleRateHz*1e3)})]})})},t.prototype.stop=function(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),this.stream!=null&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())},t.prototype.toArray=function(){throw new Error("Can not convert infinite audio stream to array.")},t.prototype.getSampleRate=function(){return this.sampleRateHz},t.prototype.flattenQueue=function(n){var r=n[0].length,a=new Float32Array(n.length*r);return n.forEach(function(i,o){return a.set(i,o*r)}),a},t.prototype.getTensorFromAudioDataArray=function(n,r){var a=new Float32Array(jn.util.sizeFromShape(r));return a.set(n,a.length-n.length),jn.tensor(a,r)},t}(Mr),g5e=function(e){Kt(t,e);function t(n,r){var a=e.call(this)||this;if(a.webcamVideoElement=n,a.webcamConfig=r,a.isClosed=!0,a.resize=!1,a.needToResize())if(a.resize=!0,a.cropSize=[a.webcamConfig.resizeHeight,a.webcamConfig.resizeWidth],a.cropBoxInd=jn.tensor1d([0],"int32"),a.webcamConfig.centerCrop){var i=a.webcamConfig.resizeWidth*1/a.webcamVideoElement.width,o=a.webcamConfig.resizeHeight*1/a.webcamVideoElement.height,s=(1-i)/2,u=(1-o)/2,l=s+i,c=o+u;a.cropBox=jn.tensor2d([u,s,c,l],[1,4])}else a.cropBox=jn.tensor2d([0,0,1,1],[1,4]);return a}return t.prototype.summary=function(){return"webcam"},t.create=function(n,r){return r===void 0&&(r={}),Xe(this,void 0,void 0,function(){var a;return Ye(this,function(i){switch(i.label){case 0:if(!jn.env().get("IS_BROWSER"))throw new Error("tf.data.webcam is only supported in browser environment.");if(!n){if(n=document.createElement("video"),!r.resizeWidth||!r.resizeHeight)throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");n.width=r.resizeWidth,n.height=r.resizeHeight}return a=new t(n,r),[4,a.start()];case 1:return i.sent(),[2,a]}})})},t.prototype.start=function(){return Xe(this,void 0,void 0,function(){var n,r,a=this;return Ye(this,function(i){switch(i.label){case 0:this.webcamConfig.facingMode&&jn.util.assert(this.webcamConfig.facingMode==="user"||this.webcamConfig.facingMode==="environment",function(){return"Invalid webcam facing mode: ".concat(a.webcamConfig.facingMode,". ")+"Please provide 'user' or 'environment'"}),i.label=1;case 1:return i.trys.push([1,3,,4]),n=this,[4,navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}})];case 2:return n.stream=i.sent(),[3,4];case 3:throw r=i.sent(),r.message="Error thrown while initializing video stream: ".concat(r.message),r;case 4:if(!this.stream)throw new Error("Could not obtain video from webcam.");try{this.webcamVideoElement.srcObject=this.stream}catch(o){console.log(o),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,[2,new Promise(function(o){a.webcamVideoElement.onloadedmetadata=function(){o()}})]}})})},t.prototype.next=function(){return Xe(this,void 0,void 0,function(){var n;return Ye(this,function(r){if(this.isClosed)return[2,{value:null,done:!0}];try{n=jn.browser.fromPixels(this.webcamVideoElement)}catch(a){throw new Error("Error thrown converting video to pixels: ".concat(JSON.stringify(a)))}if(this.resize)try{return[2,{value:this.cropAndResizeFrame(n),done:!1}]}catch(a){throw new Error("Error thrown cropping the video: ".concat(a.message))}finally{n.dispose()}else return[2,{value:n,done:!1}];return[2]})})},t.prototype.needToResize=function(){return!!(this.webcamConfig.resizeWidth&&this.webcamConfig.resizeHeight&&(this.webcamVideoElement.width!==this.webcamConfig.resizeWidth||this.webcamVideoElement.height!==this.webcamConfig.resizeHeight))},t.prototype.cropAndResizeFrame=function(n){var r=this;return jn.tidy(function(){var a=jn.expandDims(jn.cast(n,"float32"),0),i;i=jn.image.cropAndResize(a,r.cropBox,r.cropBoxInd,r.cropSize,"bilinear");var o=i.shape;return jn.reshape(i,o.slice(1))})},t.prototype.capture=function(){return Xe(this,void 0,void 0,function(){return Ye(this,function(n){switch(n.label){case 0:return[4,this.next()];case 1:return[2,n.sent().value]}})})},t.prototype.stop=function(){var n=this.stream.getTracks();n.forEach(function(r){return r.stop()});try{this.webcamVideoElement.srcObject=null}catch(r){console.log(r),this.webcamVideoElement.src=null}this.isClosed=!0},t.prototype.toArray=function(){throw new Error("Can not convert infinite video stream to array.")},t}(Mr);var rA=function(){function e(){}return e}(),aA=function(e){Kt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.split=function(n){return new y5e(this,n)},t}(Mr),y5e=function(e){Kt(t,e);function t(n,r){var a=e.call(this)||this;return a.upstream=n,a.impl=new b5e(n,r),a}return t.prototype.summary=function(){return this.impl.summary()},t.prototype.next=function(){return Xe(this,void 0,void 0,function(){return Ye(this,function(n){return[2,this.impl.next()]})})},t}(aA),b5e=function(e){Kt(t,e);function t(n,r){var a=e.call(this)||this;return a.upstream=n,a.separator=r,a.carryover="",a}return t.prototype.summary=function(){return"".concat(this.upstream.summary()," -> Split('").concat(this.separator,"')")},t.prototype.pump=function(){return Xe(this,void 0,void 0,function(){var n,r,a,i,o,s,u;return Ye(this,function(l){switch(l.label){case 0:return[4,this.upstream.next()];case 1:if(n=l.sent(),n.done)return this.carryover===""?[2,!1]:(this.outputQueue.push(this.carryover),this.carryover="",[2,!0]);r=n.value.split(this.separator),r[0]=this.carryover+r[0];try{for(a=tc(r.slice(0,-1)),i=a.next();!i.done;i=a.next())o=i.value,this.outputQueue.push(o)}catch(c){s={error:c}}finally{try{i&&!i.done&&(u=a.return)&&u.call(a)}finally{if(s)throw s.error}}return this.carryover=r[r.length-1],[2,!0]}})})},t}(v6),w5e=function(e){Kt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.decodeUTF8=function(){return new x5e(this)},t}(Mr),x5e=function(e){Kt(t,e);function t(n){var r=e.call(this)||this;return r.upstream=n,r.impl=new S5e(n),r}return t.prototype.summary=function(){return this.impl.summary()},t.prototype.next=function(){return Xe(this,void 0,void 0,function(){return Ye(this,function(n){return[2,this.impl.next()]})})},t}(aA),S5e=function(e){Kt(t,e);function t(n){var r=e.call(this)||this;if(r.upstream=n,jn.env().get("IS_BROWSER"))r.decoder=new TextDecoder("utf-8");else{var a=require("string_decoder").StringDecoder;r.decoder=new a("utf8")}return r}return t.prototype.summary=function(){return"".concat(this.upstream.summary()," -> Utf8")},t.prototype.pump=function(){return Xe(this,void 0,void 0,function(){var n,r,a;return Ye(this,function(i){switch(i.label){case 0:return[4,this.upstream.next()];case 1:return n=i.sent(),n.done?[2,!1]:(r=n.value,jn.env().get("IS_BROWSER")?a=this.decoder.decode(r,{stream:!0}):a=this.decoder.write(Buffer.from(r.buffer)),this.outputQueue.push(a),[2,!0])}})})},t}(v6),iA=function(e){Kt(t,e);function t(n,r){r===void 0&&(r={});var a=e.call(this)||this;return a.file=n,a.options=r,jn.util.assert(n instanceof Uint8Array||(jn.env().get("IS_BROWSER")?n instanceof File||n instanceof Blob:!1),function(){return"FileChunkIterator only supports File, Blob and Uint8Array right now."}),a.offset=r.offset||0,a.chunkSize=r.chunkSize||1024*1024,a}return t.prototype.summary=function(){return"FileChunks ".concat(this.file)},t.prototype.next=function(){return Xe(this,void 0,void 0,function(){var n,r,a=this;return Ye(this,function(i){switch(i.label){case 0:return this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size)?[2,{value:null,done:!0}]:(n=new Promise(function(o,s){var u=a.offset+a.chunkSize;if(a.file instanceof Uint8Array)o(new Uint8Array(a.file.slice(a.offset,u)));else{var l=new FileReader;l.onload=function(p){var d=l.result;if(d instanceof ArrayBuffer&&(d=new Uint8Array(d)),!(d instanceof Uint8Array))return s(new TypeError("FileReader returned unknown type."));o(d)},l.onabort=function(p){return s(new Error("Aborted"))},l.onerror=function(p){return s(new Error(p.type))};var c=a.file.slice(a.offset,u);l.readAsArrayBuffer(c)}a.offset=u}),r={},[4,n]);case 1:return[2,(r.value=i.sent(),r.done=!1,r)]}})})},t}(w5e);function k5e(e,t,n){return t===void 0&&(t={}),Xe(this,void 0,void 0,function(){var r,a,i,o,s;return Ye(this,function(u){switch(u.label){case 0:return typeof e=="string"?r=e:(r=e.url,a=N5e(e)),[4,(n||jn.util.fetch)(r,a)];case 1:return i=u.sent(),i.ok?(s=Uint8Array.bind,[4,i.arrayBuffer()]):[3,3];case 2:return o=new(s.apply(Uint8Array,[void 0,u.sent()])),[2,new iA(o,t)];case 3:throw new Error(i.statusText)}})})}var N5e=function(e){var t={method:e.method,headers:e.headers,body:e.body,mode:e.mode,credentials:e.credentials,cache:e.cache,redirect:e.redirect,referrer:e.referrer,integrity:e.integrity};return t};function oA(e){return typeof e=="string"&&e.slice(0,7)==="file://"}var sA=function(e){Kt(t,e);function t(n,r){r===void 0&&(r={});var a=e.call(this)||this;return a.input=n,a.options=r,a}return t.prototype.iterator=function(){return Xe(this,void 0,void 0,function(){var n;return Ye(this,function(r){return oA(this.input)&&jn.env().get("IS_NODE")&&(n=require("fs"),this.input=n.readFileSync(this.input.slice(7))),[2,new iA(this.input,this.options)]})})},t}(rA),uA=function(e){Kt(t,e);function t(n,r){r===void 0&&(r={});var a=e.call(this)||this;return a.url=n,a.fileOptions=r,a}return t.prototype.iterator=function(){return Xe(this,void 0,void 0,function(){return Ye(this,function(n){return oA(this.url)?[2,new sA(this.url,this.fileOptions).iterator()]:[2,k5e(this.url,this.fileOptions)]})})},t}(rA);function T5e(e,t){return t===void 0&&(t={}),new nA(new uA(e),t)}function E5e(e){var t=this,n=m6(e);return ei(function(){return Xe(t,void 0,void 0,function(){return Ye(this,function(r){return[2,n]})})})}function I5e(e){var t=this;return ei(function(){return Xe(t,void 0,void 0,function(){var n;return Ye(this,function(r){switch(r.label){case 0:return[4,e()];case 1:return n=r.sent(),[2,m6(function(){return n.next()})]}})})})}function C5e(e,t){return Xe(this,void 0,void 0,function(){return Ye(this,function(n){return[2,g5e.create(e,t)]})})}function D5e(e){return Xe(this,void 0,void 0,function(){return Ye(this,function(t){return[2,v5e.create(e)]})})}var _5e="4.21.0";ti.CSVDataset=nA;ti.Dataset=Pp;ti.FileDataSource=sA;ti.TextLineDataset=tA;ti.URLDataSource=uA;ti.array=d5e;ti.csv=T5e;ti.func=E5e;ti.generator=I5e;ti.microphone=D5e;ti.version_data=_5e;ti.webcam=C5e;ti.zip=f5e});var pA=An((cA,g6)=>{(function(e,t,n){function r(s){var u=this,l=o();u.next=function(){var c=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=c-(u.c=c|0)},u.c=1,u.s0=l(" "),u.s1=l(" "),u.s2=l(" "),u.s0-=l(s),u.s0<0&&(u.s0+=1),u.s1-=l(s),u.s1<0&&(u.s1+=1),u.s2-=l(s),u.s2<0&&(u.s2+=1),l=null}function a(s,u){return u.c=s.c,u.s0=s.s0,u.s1=s.s1,u.s2=s.s2,u}function i(s,u){var l=new r(s),c=u&&u.state,p=l.next;return p.int32=function(){return l.next()*4294967296|0},p.double=function(){return p()+(p()*2097152|0)*11102230246251565e-32},p.quick=p,c&&(typeof c=="object"&&a(c,l),p.state=function(){return a(l,{})}),p}function o(){var s=4022871197,u=function(l){l=String(l);for(var c=0;c<l.length;c++){s+=l.charCodeAt(c);var p=.02519603282416938*s;s=p>>>0,p-=s,p*=s,s=p>>>0,p-=s,s+=p*4294967296}return(s>>>0)*23283064365386963e-26};return u}t&&t.exports?t.exports=i:n&&n.amd?n(function(){return i}):this.alea=i})(cA,typeof g6=="object"&&g6,typeof define=="function"&&define)});var fA=An((dA,y6)=>{(function(e,t,n){function r(o){var s=this,u="";s.x=0,s.y=0,s.z=0,s.w=0,s.next=function(){var c=s.x^s.x<<11;return s.x=s.y,s.y=s.z,s.z=s.w,s.w^=s.w>>>19^c^c>>>8},o===(o|0)?s.x=o:u+=o;for(var l=0;l<u.length+64;l++)s.x^=u.charCodeAt(l)|0,s.next()}function a(o,s){return s.x=o.x,s.y=o.y,s.z=o.z,s.w=o.w,s}function i(o,s){var u=new r(o),l=s&&s.state,c=function(){return(u.next()>>>0)/4294967296};return c.double=function(){do var p=u.next()>>>11,d=(u.next()>>>0)/4294967296,f=(p+d)/(1<<21);while(f===0);return f},c.int32=u.next,c.quick=c,l&&(typeof l=="object"&&a(l,u),c.state=function(){return a(u,{})}),c}t&&t.exports?t.exports=i:n&&n.amd?n(function(){return i}):this.xor128=i})(dA,typeof y6=="object"&&y6,typeof define=="function"&&define)});var mA=An((hA,b6)=>{(function(e,t,n){function r(o){var s=this,u="";s.next=function(){var c=s.x^s.x>>>2;return s.x=s.y,s.y=s.z,s.z=s.w,s.w=s.v,(s.d=s.d+362437|0)+(s.v=s.v^s.v<<4^(c^c<<1))|0},s.x=0,s.y=0,s.z=0,s.w=0,s.v=0,o===(o|0)?s.x=o:u+=o;for(var l=0;l<u.length+64;l++)s.x^=u.charCodeAt(l)|0,l==u.length&&(s.d=s.x<<10^s.x>>>4),s.next()}function a(o,s){return s.x=o.x,s.y=o.y,s.z=o.z,s.w=o.w,s.v=o.v,s.d=o.d,s}function i(o,s){var u=new r(o),l=s&&s.state,c=function(){return(u.next()>>>0)/4294967296};return c.double=function(){do var p=u.next()>>>11,d=(u.next()>>>0)/4294967296,f=(p+d)/(1<<21);while(f===0);return f},c.int32=u.next,c.quick=c,l&&(typeof l=="object"&&a(l,u),c.state=function(){return a(u,{})}),c}t&&t.exports?t.exports=i:n&&n.amd?n(function(){return i}):this.xorwow=i})(hA,typeof b6=="object"&&b6,typeof define=="function"&&define)});var gA=An((vA,w6)=>{(function(e,t,n){function r(o){var s=this;s.next=function(){var l=s.x,c=s.i,p,d,f;return p=l[c],p^=p>>>7,d=p^p<<24,p=l[c+1&7],d^=p^p>>>10,p=l[c+3&7],d^=p^p>>>3,p=l[c+4&7],d^=p^p<<7,p=l[c+7&7],p=p^p<<13,d^=p^p<<9,l[c]=d,s.i=c+1&7,d};function u(l,c){var p,d,f=[];if(c===(c|0))d=f[0]=c;else for(c=""+c,p=0;p<c.length;++p)f[p&7]=f[p&7]<<15^c.charCodeAt(p)+f[p+1&7]<<13;for(;f.length<8;)f.push(0);for(p=0;p<8&&f[p]===0;++p);for(p==8?d=f[7]=-1:d=f[p],l.x=f,l.i=0,p=256;p>0;--p)l.next()}u(s,o)}function a(o,s){return s.x=o.x.slice(),s.i=o.i,s}function i(o,s){o==null&&(o=+new Date);var u=new r(o),l=s&&s.state,c=function(){return(u.next()>>>0)/4294967296};return c.double=function(){do var p=u.next()>>>11,d=(u.next()>>>0)/4294967296,f=(p+d)/(1<<21);while(f===0);return f},c.int32=u.next,c.quick=c,l&&(l.x&&a(l,u),c.state=function(){return a(u,{})}),c}t&&t.exports?t.exports=i:n&&n.amd?n(function(){return i}):this.xorshift7=i})(vA,typeof w6=="object"&&w6,typeof define=="function"&&define)});var bA=An((yA,x6)=>{(function(e,t,n){function r(o){var s=this;s.next=function(){var l=s.w,c=s.X,p=s.i,d,f;return s.w=l=l+1640531527|0,f=c[p+34&127],d=c[p=p+1&127],f^=f<<13,d^=d<<17,f^=f>>>15,d^=d>>>12,f=c[p]=f^d,s.i=p,f+(l^l>>>16)|0};function u(l,c){var p,d,f,h,m,v=[],g=128;for(c===(c|0)?(d=c,c=null):(c=c+"\0",d=0,g=Math.max(g,c.length)),f=0,h=-32;h<g;++h)c&&(d^=c.charCodeAt((h+32)%c.length)),h===0&&(m=d),d^=d<<10,d^=d>>>15,d^=d<<4,d^=d>>>13,h>=0&&(m=m+1640531527|0,p=v[h&127]^=d+m,f=p==0?f+1:0);for(f>=128&&(v[(c&&c.length||0)&127]=-1),f=127,h=4*128;h>0;--h)d=v[f+34&127],p=v[f=f+1&127],d^=d<<13,p^=p<<17,d^=d>>>15,p^=p>>>12,v[f]=d^p;l.w=m,l.X=v,l.i=f}u(s,o)}function a(o,s){return s.i=o.i,s.w=o.w,s.X=o.X.slice(),s}function i(o,s){o==null&&(o=+new Date);var u=new r(o),l=s&&s.state,c=function(){return(u.next()>>>0)/4294967296};return c.double=function(){do var p=u.next()>>>11,d=(u.next()>>>0)/4294967296,f=(p+d)/(1<<21);while(f===0);return f},c.int32=u.next,c.quick=c,l&&(l.X&&a(l,u),c.state=function(){return a(u,{})}),c}t&&t.exports?t.exports=i:n&&n.amd?n(function(){return i}):this.xor4096=i})(yA,typeof x6=="object"&&x6,typeof define=="function"&&define)});var xA=An((wA,S6)=>{(function(e,t,n){function r(o){var s=this,u="";s.next=function(){var c=s.b,p=s.c,d=s.d,f=s.a;return c=c<<25^c>>>7^p,p=p-d|0,d=d<<24^d>>>8^f,f=f-c|0,s.b=c=c<<20^c>>>12^p,s.c=p=p-d|0,s.d=d<<16^p>>>16^f,s.a=f-c|0},s.a=0,s.b=0,s.c=-1640531527,s.d=1367130551,o===Math.floor(o)?(s.a=o/4294967296|0,s.b=o|0):u+=o;for(var l=0;l<u.length+20;l++)s.b^=u.charCodeAt(l)|0,s.next()}function a(o,s){return s.a=o.a,s.b=o.b,s.c=o.c,s.d=o.d,s}function i(o,s){var u=new r(o),l=s&&s.state,c=function(){return(u.next()>>>0)/4294967296};return c.double=function(){do var p=u.next()>>>11,d=(u.next()>>>0)/4294967296,f=(p+d)/(1<<21);while(f===0);return f},c.int32=u.next,c.quick=c,l&&(typeof l=="object"&&a(l,u),c.state=function(){return a(u,{})}),c}t&&t.exports?t.exports=i:n&&n.amd?n(function(){return i}):this.tychei=i})(wA,typeof S6=="object"&&S6,typeof define=="function"&&define)});var kA=An((SA,g0)=>{(function(e,t,n){var r=256,a=6,i=52,o="random",s=n.pow(r,a),u=n.pow(2,i),l=u*2,c=r-1,p;function d(w,b,x){var k=[];b=b==!0?{entropy:!0}:b||{};var N=v(m(b.entropy?[w,y(t)]:w??g(),3),k),E=new f(k),C=function(){for(var R=E.g(a),A=s,M=0;R<u;)R=(R+M)*r,A*=r,M=E.g(1);for(;R>=l;)R/=2,A/=2,M>>>=1;return(R+M)/A};return C.int32=function(){return E.g(4)|0},C.quick=function(){return E.g(4)/4294967296},C.double=C,v(y(E.S),t),(b.pass||x||function(R,A,M,$){return $&&($.S&&h($,E),R.state=function(){return h(E,{})}),M?(n[o]=R,A):R})(C,N,"global"in b?b.global:this==n,b.state)}function f(w){var b,x=w.length,k=this,N=0,E=k.i=k.j=0,C=k.S=[];for(x||(w=[x++]);N<r;)C[N]=N++;for(N=0;N<r;N++)C[N]=C[E=c&E+w[N%x]+(b=C[N])],C[E]=b;(k.g=function(R){for(var A,M=0,$=k.i,z=k.j,L=k.S;R--;)A=L[$=c&$+1],M=M*r+L[c&(L[$]=L[z=c&z+A])+(L[z]=A)];return k.i=$,k.j=z,M})(r)}function h(w,b){return b.i=w.i,b.j=w.j,b.S=w.S.slice(),b}function m(w,b){var x=[],k=typeof w,N;if(b&&k=="object")for(N in w)try{x.push(m(w[N],b-1))}catch{}return x.length?x:k=="string"?w:w+"\0"}function v(w,b){for(var x=w+"",k,N=0;N<x.length;)b[c&N]=c&(k^=b[c&N]*19)+x.charCodeAt(N++);return y(b)}function g(){try{var w;return p&&(w=p.randomBytes)?w=w(r):(w=new Uint8Array(r),(e.crypto||e.msCrypto).getRandomValues(w)),y(w)}catch{var b=e.navigator,x=b&&b.plugins;return[+new Date,e,x,e.screen,y(t)]}}function y(w){return String.fromCharCode.apply(0,w)}if(v(n.random(),t),typeof g0=="object"&&g0.exports){g0.exports=d;try{p=require("crypto")}catch{}}else typeof define=="function"&&define.amd?define(function(){return d}):n["seed"+o]=d})(typeof self<"u"?self:SA,[],Math)});var TA=An((QXe,NA)=>{var A5e=pA(),F5e=fA(),R5e=mA(),O5e=gA(),M5e=bA(),P5e=xA(),ac=kA();ac.alea=A5e;ac.xor128=F5e;ac.xorwow=R5e;ac.xorshift7=O5e;ac.xor4096=M5e;ac.tychei=P5e;NA.exports=ac});var HF=An(k0=>{"use strict";var T=Il(),B5e=TA();function L5e(e){var t=Object.create(null);return e&&Object.keys(e).forEach(function(n){if(n!=="default"){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}}),t.default=e,t}var z5e=L5e(B5e),N6=function(e,t){return N6=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},N6(e,t)};function $5e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");N6(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function EA(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function s(c){try{l(r.next(c))}catch(p){o(p)}}function u(c){try{l(r.throw(c))}catch(p){o(p)}}function l(c){c.done?i(c.value):a(c.value).then(s,u)}l((r=r.apply(e,t||[])).next())})}function IA(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,a,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,a&&(i=l[0]&2?a.return:l[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,l[1])).done)return i;switch(a=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,a=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],a=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Lp(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function rt(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function yi(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}function st(e,t){Array.isArray(e)||(e=[e]),e.forEach(function(n){n!=null&&T.util.assert(n.dtype!=="complex64",function(){return"".concat(t," does not support complex64 tensors in the CPU backend.")})})}var V5e=T.kernel_impls.whereImpl,I6=function(e){$5e(t,e);function t(){var n=e.call(this)||this;return n.blockSize=48,n.firstUse=!0,n.data=new T.DataStorage(n,T.engine()),n}return t.prototype.nextDataId=function(){return t.nextDataId++},t.prototype.write=function(n,r,a){this.firstUse&&(this.firstUse=!1,T.env().get("IS_NODE")&&T.backend_util.warn(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));var i={id:this.nextDataId()};return this.data.set(i,{values:n,dtype:a,refCount:1}),i},t.prototype.makeTensorInfo=function(n,r,a){var i;if(r==="string"&&a!=null&&a.length>0&&T.util.isString(a[0])){var o=a.map(function(s){return T.util.encodeString(s)});i=this.write(o,n,r)}else i=this.write(a,n,r);return{dataId:i,shape:n,dtype:r}},t.prototype.refCount=function(n){if(this.data.has(n)){var r=this.data.get(n);return r.refCount}return 0},t.prototype.incRef=function(n){var r=this.data.get(n);r.refCount++},t.prototype.decRef=function(n){if(this.data.has(n)){var r=this.data.get(n);r.refCount--}},t.prototype.move=function(n,r,a,i,o){this.data.set(n,{values:r,dtype:i,refCount:o})},t.prototype.numDataIds=function(){return this.data.numDataIds()},t.prototype.read=function(n){return EA(this,void 0,void 0,function(){return IA(this,function(r){return[2,this.readSync(n)]})})},t.prototype.readSync=function(n){var r=this.data.get(n),a=r.dtype,i=r.complexTensorInfos;if(a==="complex64"){var o=this.readSync(i.real.dataId),s=this.readSync(i.imag.dataId);return T.backend_util.mergeRealAndImagArrays(o,s)}return T.util.convertBackendValuesAndArrayBuffer(this.data.get(n).values,a)},t.prototype.bufferSync=function(n){var r=this.readSync(n.dataId);if(n.dtype==="string")try{var a=r.map(function(i){return T.util.decodeString(i)});return T.buffer(n.shape,n.dtype,a)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return T.buffer(n.shape,n.dtype,r)},t.prototype.makeOutput=function(n,r,a){return T.engine().makeTensorFromTensorInfo(this.makeTensorInfo(r,a,n),this)},t.prototype.disposeData=function(n,r){if(r===void 0&&(r=!1),this.data.has(n)){if(this.data.get(n).refCount--,!r&&this.data.get(n).refCount>0)return!1;var a=this.data.get(n).complexTensorInfos;a!=null&&(this.disposeData(a.real.dataId,!0),this.disposeData(a.imag.dataId,!0)),this.data.delete(n)}return!0},t.prototype.disposeIntermediateTensorInfo=function(n){this.disposeData(n.dataId)},t.prototype.time=function(n){return EA(this,void 0,void 0,function(){var r,a;return IA(this,function(i){return r=T.util.now(),n(),a=T.util.now()-r,[2,{kernelMs:a}]})})},t.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},t.prototype.where=function(n){st([n],"where");var r=this.readSync(n.dataId);return V5e(n.shape,r)},t.prototype.dispose=function(){},t.prototype.floatPrecision=function(){return 32},t.prototype.epsilon=function(){return e.prototype.epsilon.call(this)},t}(T.KernelBackend);I6.nextDataId=0;function PA(e){for(var t=new Float32Array(e.length),n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}var W5e=function(e){var t=e.inputs.x,n=e.backend;st(t,"abs");var r=new Float32Array(T.util.sizeFromShape(t.shape)),a=n.data.get(t.dataId).values;return r=PA(a),n.makeOutput(r,t.shape,t.dtype)},U5e={kernelName:T.Abs,backendName:"cpu",kernelFunc:W5e};function pr(e){return function(t,n,r,a,i){var o=T.backend_util.assertAndGetBroadcastShape(t,n),s=o.length,u=T.util.computeStrides(o),l=T.util.sizeFromShape(o),c=T.util.getTypedArrayFromDType(i,l),p=t.length,d=n.length,f=T.util.computeStrides(t),h=T.util.computeStrides(n),m=T.backend_util.getBroadcastDims(t,o),v=T.backend_util.getBroadcastDims(n,o);if(m.length+v.length===0)for(var g=0;g<c.length;++g)c[g]=e(r[g%r.length],a[g%a.length]);else for(var y=function(w){var b=T.util.indexToLoc(w,s,u),x=b.slice(-p);m.forEach(function(C){return x[C]=0});var k=T.util.locToIndex(x,p,f),N=b.slice(-d);v.forEach(function(C){return N[C]=0});var E=T.util.locToIndex(N,d,h);c[w]=e(r[k],a[E])},g=0;g<c.length;++g)y(g);return[c,o]}}function ni(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=n.makeTensorInfo(r.shape,"complex64"),u=n.data.get(s.dataId);return u.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",o)},s}var G5e={kernelName:T.Complex,backendName:"cpu",kernelFunc:ni};function y0(e,t,n){if(n===void 0&&(n="float32"),n==="complex64"){var r=y0(e,t,"float32"),a=y0(e,t,"float32");return ni({inputs:{real:r,imag:a},backend:e})}var i=T.util.makeZerosTypedArray(T.util.sizeFromShape(t),n);return e.makeTensorInfo(t,n,i)}function ls(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var q5e={kernelName:T.Identity,backendName:"cpu",kernelFunc:ls};function oc(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var H5e={kernelName:T.Real,backendName:"cpu",kernelFunc:oc};function BA(e,t,n,r){if(r==="int32"){var a=Int32Array.from(e);return[t,"int32",a]}if(r==="bool"){var i=T.util.toTypedArray([0],n),o=rt(pr(function(l,c){return l!==c?1:0})(t,[],e,i,"bool"),2),s=o[0],u=o[1];return[u,"bool",s]}throw new Error("Error in Cast: failed to cast ".concat(n," to ").concat(r))}function Uu(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dtype;if(i==="complex64"){if(a.dtype==="complex64")return ls({inputs:{x:a},backend:n});var o=y0(n,a.shape,a.dtype),s=Uu({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),u=ni({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}if(a.dtype==="complex64"){var l=oc({inputs:{input:a},backend:n}),u=Uu({inputs:{x:l},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(l),u}if(!T.util.hasEncodingLoss(a.dtype,i)){var u=ls({inputs:{x:a},backend:n});return{dataId:u.dataId,shape:u.shape,dtype:i}}var c=n.data.get(a.dataId).values,p=rt(BA(c,a.shape,a.dtype,i),3),d=p[0],f=p[1],h=p[2];return n.makeTensorInfo(d,f,h)}var j5e={kernelName:T.Cast,backendName:"cpu",kernelFunc:Uu};function Ir(e,t,n,r){return n==null?function(a){var i=a.inputs,o=a.backend,s=i.a,u=i.b,l=o;st([s,u],e);var c=l.data.get(s.dataId).values,p=l.data.get(u.dataId).values,d=s.dtype==="string"?T.backend_util.fromUint8ToStringArray(c):c,f=s.dtype==="string"?T.backend_util.fromUint8ToStringArray(p):p,h=r||s.dtype,m=rt(t(s.shape,u.shape,d,f,h),2),v=m[0],g=m[1];return l.makeTensorInfo(g,h,v)}:function(a){var i=a.inputs,o=a.backend,s=i.a,u=i.b,l=o;if(s.dtype==="complex64"||u.dtype==="complex64"){var c=Uu({inputs:{x:s},backend:l,attrs:{dtype:"complex64"}}),p=l.data.get(c.dataId),d=p.complexTensorInfos.real,f=p.complexTensorInfos.imag,h=l.data.get(d.dataId).values,m=l.data.get(f.dataId).values,v=Uu({inputs:{x:u},backend:l,attrs:{dtype:"complex64"}}),g=l.data.get(v.dataId),y=g.complexTensorInfos.real,w=g.complexTensorInfos.imag,b=l.data.get(y.dataId).values,x=l.data.get(w.dataId).values,k=rt(n(s.shape,u.shape,h,m,b,x),3),N=k[0],E=k[1],C=k[2],R=l.makeTensorInfo(C,"float32",N),A=l.makeTensorInfo(C,"float32",E),M=ni({inputs:{real:R,imag:A},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(v),l.disposeIntermediateTensorInfo(R),l.disposeIntermediateTensorInfo(A),M}else{var $=l.data.get(s.dataId).values,z=l.data.get(u.dataId).values,L=r||s.dtype,B=rt(t(s.shape,u.shape,$,z,L),2),W=B[0],C=B[1];return l.makeTensorInfo(C,L,W)}}}function C6(e){return function(t,n,r,a,i,o){var s=T.backend_util.assertAndGetBroadcastShape(t,n),u=T.util.sizeFromShape(s),l=s.length,c=T.util.computeStrides(s),p=T.util.getTypedArrayFromDType("float32",u),d=T.util.getTypedArrayFromDType("float32",u),f=T.backend_util.getBroadcastDims(t,s),h=T.backend_util.getBroadcastDims(n,s),m=T.backend_util.mergeRealAndImagArrays(r,a),v=T.backend_util.mergeRealAndImagArrays(i,o),g=t.length,y=T.util.computeStrides(t),w=n.length,b=T.util.computeStrides(n);if(f.length+h.length===0)for(var x=0;x<p.length;x++){var k=x%m.length,N=x%v.length,E=e(m[k*2],m[k*2+1],v[N*2],v[N*2+1]);p[x]=E.real,d[x]=E.imag}else for(var C=function(R){var A=T.util.indexToLoc(R,l,c),M=A.slice(-g);f.forEach(function(W){return M[W]=0});var $=T.util.locToIndex(M,g,y),z=A.slice(-w);h.forEach(function(W){return z[W]=0});var L=T.util.locToIndex(z,w,b),B=e(m[$*2],m[$*2+1],v[L*2],v[L*2+1]);p[R]=B.real,d[R]=B.imag},x=0;x<p.length;x++)C(x);return[p,d,s]}}var LA=pr(function(e,t){return e+t}),K5e=C6(function(e,t,n,r){return{real:e+n,imag:t+r}}),zp=Ir(T.Add,LA,K5e),X5e={kernelName:T.Add,backendName:"cpu",kernelFunc:zp};function D6(e,t,n,r,a){for(var i=T.util.sizeFromShape(r),o=T.util.makeZerosTypedArray(a,n),s=0;s<e.length;s++){var u=e[s];if(u<0)throw new Error("Input x must be non-negative!");u>=a||(i>0?o[u]+=t[s]:o[u]+=1)}return o}function zA(e,t,n,r){r===void 0&&(r=!1);for(var a=e.shape[0],i=e.shape[1],o=T.buffer([a,n],t.dtype),s=0;s<a;s++)for(var u=0;u<i;u++){var l=e.get(s,u);if(l<0)throw new Error("Input x must be non-negative!");l>=n||(r?o.set(1,s,l):t.size>0?o.set(o.get(s,l)+t.get(s,u),s,l):o.set(o.get(s,l)+1,s,l))}return o}var $A=pr(function(e,t){return e&t}),Y5e=Ir(T.BitwiseAnd,$A),J5e={kernelName:T.BitwiseAnd,backendName:"cpu",kernelFunc:Y5e};function cs(e){return function(t,n,r){for(var a=T.util.getArrayFromDType(n,t.length),i=0;i<t.length;++i)a[i]=e(t[i],r);return a}}function Zt(e,t,n){var r=cs(t);return Gu(e,r,n)}function Gu(e,t,n){return function(r){var a=r.inputs,i=r.attrs,o=r.backend,s=a.x;st(s,e);var u=o,l=u.data.get(s.dataId).values,c;if(s.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=T.backend_util.fromUint8ToStringArray(l)}else c=l;var p=n||s.dtype,d=t(c,p,i);return u.makeTensorInfo(s.shape,p,d)}}var VA=cs(function(e){return Math.ceil(e)}),Z5e=Gu(T.Ceil,VA),Q5e={kernelName:T.Ceil,backendName:"cpu",kernelFunc:Z5e};function WA(e,t,n,r){var a=T.util.getArrayFromDType(n,T.util.sizeFromShape(t));if(r&&n!=="string"){var i=0;e.forEach(function(s){var u=T.util.sizeFromShape(s.shape);a.set(s.vals,i),i+=u})}else{var o=0;e.forEach(function(s){for(var u=n==="string"?T.backend_util.fromUint8ToStringArray(s.vals):s.vals,l=0,c=0;c<s.shape[0];++c)for(var p=c*t[1]+o,d=0;d<s.shape[1];++d)a[p+d]=u[l++];o+=s.shape[1]})}return a}var UA=pr(function(e,t){return e===t?1:0}),GA=Ir(T.Equal,UA,null,"bool"),e8e={kernelName:T.Equal,backendName:"cpu",kernelFunc:GA};var qA=cs(function(e){return Math.exp(e)}),HA=Gu(T.Exp,qA,"float32"),t8e={kernelName:T.Exp,backendName:"cpu",kernelFunc:HA};var jA=cs(function(e){return Math.expm1(e)}),n8e=Gu(T.Expm1,jA),r8e={kernelName:T.Expm1,backendName:"cpu",kernelFunc:n8e};var KA=cs(function(e){return Math.floor(e)}),a8e=Gu(T.Floor,KA),i8e={kernelName:T.Floor,backendName:"cpu",kernelFunc:a8e};var XA=pr(function(e,t){return Math.floor(e/t)}),o8e=Ir(T.FloorDiv,XA,null,"int32"),s8e={kernelName:T.FloorDiv,backendName:"cpu",kernelFunc:o8e};function YA(e,t,n,r,a,i,o,s,u){for(var l=T.buffer([r,i],n),c=0;c<r;c++){for(var p=[],d=0,f=0;f<a;f++){var h=e[c*a+f];d+=h*o[f],p.push(h)}if(d<0||d>=u/i)throw new Error("Invalid indices: ".concat(p," does not index into ").concat(s));for(var m=0;m<i;m++)l.values[c*i+m]=t.get.apply(t,yi([],rt(t.indexToLoc(d*i+m)),!1))}return l}function JA(e,t,n){for(var r=T.buffer(n,e.dtype),a=0;a<r.size;++a){var i=r.indexToLoc(a),o=i.slice(),s=o[0],u=o[2],l=t.locToIndex([s,u]);o[2]=t.values[l];var c=e.locToIndex(o);0<=c&&c<e.values.length&&(r.values[a]=e.values[c])}return r}var ZA=pr(function(e,t){return e>t?1:0}),u8e=Ir(T.Greater,ZA,null,"bool"),l8e={kernelName:T.Greater,backendName:"cpu",kernelFunc:u8e};var QA=pr(function(e,t){return e>=t?1:0}),c8e=Ir(T.GreaterEqual,QA,null,"bool"),p8e={kernelName:T.GreaterEqual,backendName:"cpu",kernelFunc:c8e};var eF=pr(function(e,t){return e<t?1:0}),d8e=Ir(T.Less,eF,null,"bool"),f8e={kernelName:T.Less,backendName:"cpu",kernelFunc:d8e};var tF=pr(function(e,t){return e<=t?1:0}),h8e=Ir(T.LessEqual,tF,null,"bool"),m8e={kernelName:T.LessEqual,backendName:"cpu",kernelFunc:h8e};function nF(e,t,n){var r=(t-e)/(n-1),a=T.util.makeZerosTypedArray(n,"float32");a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+r;return a}var rF=cs(function(e){return Math.log(e)}),v8e=Gu(T.Log,rF),g8e={kernelName:T.Log,backendName:"cpu",kernelFunc:v8e};function aF(e,t,n,r){for(var a=T.util.getTypedArrayFromDType(r,T.util.sizeFromShape(n)),i=0;i<a.length;++i){for(var o=i*t,s=e[o],u=0;u<t;++u){var l=e[o+u];(Number.isNaN(l)||l>s)&&(s=l)}a[i]=s}return a}var iF=pr(function(e,t){return Math.max(e,t)}),y8e=Ir(T.Maximum,iF),b8e={kernelName:T.Maximum,backendName:"cpu",kernelFunc:y8e};var oF=pr(function(e,t){return Math.min(e,t)}),w8e=Ir(T.Minimum,oF),x8e={kernelName:T.Minimum,backendName:"cpu",kernelFunc:w8e};var _6=pr(function(e,t){return e*t}),S8e=C6(function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}}),S0=Ir(T.Multiply,_6,S8e),k8e={kernelName:T.Multiply,backendName:"cpu",kernelFunc:S0};function sF(e,t,n){var r=T.util.createScalarValue(-1,n);return _6([],t,r,e,n)}function N8e(e){var t=e.inputs,n=e.backend,r=t.x;st(r,"neg");var a=n.data.get(r.dataId).values,i=rt(sF(a,r.shape,r.dtype),2),o=i[0],s=i[1];return n.makeTensorInfo(s,r.dtype,o)}var T8e={kernelName:T.Neg,backendName:"cpu",kernelFunc:N8e};var uF=pr(function(e,t){return e!==t?1:0}),E8e=Ir(T.NotEqual,uF,null,"bool"),I8e={kernelName:T.NotEqual,backendName:"cpu",kernelFunc:E8e};function A6(e,t,n,r,a){for(var i=t.length,o=T.util.sizeFromShape(t),s=T.util.computeStrides(t),u=T.util.computeStrides(a),l=T.util.getTypedArrayFromDType(n,T.util.sizeFromShape(a)),c=0;c<o;++c){for(var p=T.util.indexToLoc(c,i,s),d=new Array(p.length),f=0;f<d.length;f++)d[f]=p[r[f]];var h=T.util.locToIndex(d,i,u);l[h]=e[c]}return l}function Ca(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.perm;st(a,"transpose");for(var o=a.shape.length,s=new Array(o),u=0;u<s.length;u++)s[u]=a.shape[i[u]];var l=r.data.get(a.dataId).values,c=A6(l,a.shape,a.dtype,i,s),p=r.write(c,s,a.dtype);return{dataId:p,shape:s,dtype:a.dtype}}var C8e={kernelName:T.Transpose,backendName:"cpu",kernelFunc:Ca};function lF(e,t,n,r){for(var a=rt(T.backend_util.computeOutAndReduceShapes(e,r),2),i=a[0],o=a[1],s=T.upcastType(t,"int32"),u=T.util.makeZerosTypedArray(T.util.sizeFromShape(i),s),l=T.util.sizeFromShape(o),c=0;c<u.length;++c){for(var p=c*l,d=1,f=0;f<l;++f)d*=n[p+f];u[c]=d}return{outVals:u,outShape:i,outDtype:s}}function D8e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;st(a,"prod");var s=a.shape.length,u=T.util.parseAxisParam(i,a.shape),l=T.backend_util.getAxesPermutation(u,s),c=u,p=a,d=[];l!=null&&(p=Ca({inputs:{x:a},backend:n,attrs:{perm:l}}),d.push(p),c=T.backend_util.getInnerMostAxes(c.length,s));var f=n.data.get(p.dataId).values,h=lF(p.shape,p.dtype,f,c),m=h.outVals,v=h.outShape,g=h.outDtype,y=v;return o&&(y=T.backend_util.expandShapeToKeepDim(v,u)),d.forEach(function(w){return n.disposeIntermediateTensorInfo(w)}),n.makeTensorInfo(y,g,m)}var _8e={kernelName:T.Prod,backendName:"cpu",kernelFunc:D8e};function A8e(e,t,n){e.forEach(function(r,a){if(r<0||r>=n){var i=T.util.indexToLoc(a,t.length,T.util.computeStrides(t)).join(",");throw new Error("indices[".concat(i,"] = ").concat(r," is not in [0, ").concat(n,")"))}})}function F8e(e,t){for(var n=0;n<e.length;++n){var r=e[n],a=n===e.length-1?t:e[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>a)throw new Error("Ragged splits must not point past values");for(var i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}function R8e(e,t,n,r){var a=[],i=0,o=t.length-1+n.length,s=new Array(o).fill(null).map(function(){return[0]});F8e(n,r);for(var u=1,l=0;l<t.length-1;++l){u*=t[l];for(var c=t[l+1],p=1;p<u+1;++p)s[l].push(p*c)}for(var p=0;p<e.length;++p){for(var d=e[p],f=e[p]+1,l=0;l<n.length;++l){var h=n[l],m=l+t.length-1;if(m>=0)for(var v=s[m],g=v[v.length-1]-h[d],y=d;y<f;++y)s[m].push(h[y+1]+g);d=h[d],f=h[f]}f!==d&&(a.push([d,f]),i+=f-d)}return{outSplits:s,valueSlices:a,numValues:i}}function O8e(e){for(var t=[],n=function(a){var i=e[a].length,o=T.util.getArrayFromDType("int32",i);t.push(o),e[a].forEach(function(s,u){return o[u]=s})},r=0;r<e.length;++r)n(r);return t}function CA(e,t){for(var n=e.slice(0,t);n.length<t;)n.push(1);for(var r=t;r<e.length;r++)n[t-1]*=e[r];return n}function M8e(e,t,n,r,a,i){var o,s,u=CA(t,2)[1],l=CA(i,2)[1],c=0;try{for(var p=Lp(n),d=p.next();!d.done;d=p.next())for(var f=d.value,h=f[0];h<f[1];++h){for(var m=0;m<r;++m)a[c*l+m]=e[h*u+m];++c}}catch(v){o={error:v}}finally{try{d&&!d.done&&(s=p.return)&&s.call(p)}finally{if(o)throw o.error}}}function P8e(e,t,n,r,a){var i=t.slice();i[0]=a;var o=T.util.getArrayFromDType(n,T.util.sizeFromShape(i)),s=e.length,u=s===0?0:s/t[0];return M8e(e,t,r,u,o,i),[o,i]}function cF(e,t,n,r,a,i,o,s){if(e.length===0)throw new Error("paramsNestedSplits must be non empty");if(t[0].length===0)throw new Error("Split tensors must not be scalars");var u=t[0][0]-1;if(A8e(i,o,u),r.length===0)throw new Error("params.rank must be nonzero");var l=r[0],c=R8e(i,o,e,l),p=c.outSplits,d=c.valueSlices,f=c.numValues,h=O8e(p),m=P8e(n,r,a,d,f);return[h,m[0],m[1]]}var DA=2147483647;function pF(e,t,n,r,a,i,o){if(t.length>1)throw new Error("starts must be a scalar or vector");if(a.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");var s=t.length===0,u=a.length===0,l=o.length===0,c=[];s||c.push(t[0]),u||c.push(a[0]),l||c.push(o[0]);for(var p=1;p<c.length;++p)if(c[p]!==c[p-1])throw new Error("starts, limits, and deltas must have the same shape");var d=c.length===0?1:c[0],f=T.util.getArrayFromDType("int32",d+1);f[0]=0;for(var h=0;h<d;++h){var m=s?e[0]:e[h],v=u?r[0]:r[h],g=l?i[0]:i[h];if(g===0)throw new Error("Requires delta != 0");var y=void 0;if(g>0&&v<m||g<0&&v>m)y=0;else if(y=Math.ceil(Math.abs((v-m)/g)),y>DA)throw new Error("Requires ((limit - start) / delta) <= ".concat(DA));f[h+1]=f[h]+y}for(var w=f[d],b=T.util.getArrayFromDType(n,w),x=0,h=0;h<d;++h)for(var k=f[h+1]-f[h],N=s?e[0]:e[h],g=l?i[0]:i[h],p=0;p<k;++p)b[x++]=N,N+=g;return[f,b]}var ao=T.backend_util.RowPartitionType,B8e=function(){function e(t,n,r,a,i,o,s,u,l,c){this.shape=t,this.shapeShape=n,this.values=r,this.valuesShape=a,this.valuesDType=i,this.defaultValue=o,this.defaultValueShape=s,this.rowPartitionValues=u,this.rowPartitionValuesShapes=l,this.rowPartitionTypes=T.backend_util.getRowPartitionTypesHelper(c),this.raggedRank=T.backend_util.getRaggedRank(this.rowPartitionTypes)}return e.prototype.getRowPartitionTypeByDimension=function(t){return this.rowPartitionTypes[0]===ao.FIRST_DIM_SIZE?this.rowPartitionTypes[t+1]:this.rowPartitionTypes[t]},e.prototype.getRowPartitionTensor=function(t){return this.rowPartitionTypes[0]===ao.FIRST_DIM_SIZE?this.rowPartitionValues[t+1]:this.rowPartitionValues[t]},e.prototype.getMaxWidth=function(t){var n=this.getRowPartitionTensor(t-1);switch(this.getRowPartitionTypeByDimension(t-1)){case ao.VALUE_ROWIDS:return e.getMaxWidthValueRowID(n);case ao.ROW_SPLITS:return e.getMaxWidthRowSplit(n);default:throw new Error("Cannot handle partition type ".concat(ao[this.getRowPartitionTypeByDimension(t-1)]))}},e.getMaxWidthRowSplit=function(t){var n=t.length;if(n===0||n===1)return 0;for(var r=0,a=0;a<n-1;++a){var i=t[a+1]-t[a];i>r&&(r=i)}return r},e.getMaxWidthValueRowID=function(t){var n=t.length;if(n===0)return 0;for(var r=0,a=t[0],i=0,o=1;o<n;++o){var s=t[o];s!==a&&(a=s,i=Math.max(o-r,i),r=o)}return Math.max(n-r,i)},e.prototype.tensorShapeFromTensor=function(t,n,r){if(r===void 0&&(r=!0),n.length===0){if(t[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return AA(t,r)},e.prototype.calculateOutputSize=function(t){var n=this.valuesShape,r=this.defaultValueShape;T.backend_util.validateDefaultValueShape(r,n);var a=this.tensorShapeFromTensor(this.shape,this.shapeShape),i=T.backend_util.combineRaggedTensorToTensorShapes(this.raggedRank,a,n),o=i;o[0]<0&&(o[0]=t);for(var s=1;s<=this.raggedRank;++s)o[s]<0&&(o[s]=this.getMaxWidth(s));return o},e.prototype.calculateFirstParentOutputIndex=function(t,n,r){for(var a=Math.min(t,r),i=[],o=0,s=0;s<a;++s,o+=n)i.push(o);for(var s=a;s<t;++s)i.push(-1);return T.util.assert(i.length===t,function(){return"Final length of result must be equal to firstDimension."}),i},e.prototype.calculateOutputIndexRowSplit=function(t,n,r,a){for(var i=t.length,o=[],s=0;s<i-1;++s){var u=t[s+1]-t[s],l=Math.min(a,u),c=n[s];c===-1&&(l=0);for(var p=0;p<l;++p)o.push(c),c+=r;for(var p=0;p<u-l;++p)o.push(-1)}if(i>0&&o.length!==t[i-1])throw new Error("Invalid row split size.");return o},e.prototype.calculateOutputIndexValueRowID=function(t,n,r,a){var i=t.length,o=[];if(i===0)return[];var s=0,u=t[0];if(u>=n.length)throw new Error("Got currentValueRowId=".concat(u,", which is not less than ").concat(n.length));var l=n[u];o.push(l);for(var c=1;c<i;++c){var p=t[c];if(p===u)l>=0&&(++s,s<a?l+=r:l=-1);else{if(s=0,u=p,p>=n.length)throw new Error("Got nextValueRowId=".concat(p," which is not less than ").concat(n.length));l=n[p]}o.push(l)}if(o.length!==t.length)throw new Error("Invalid row ids.");return o},e.prototype.calculateOutputIndex=function(t,n,r,a){var i=this.getRowPartitionTensor(t),o=this.getRowPartitionTypeByDimension(t);switch(o){case ao.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,n,r,a);case ao.ROW_SPLITS:if(i.length-1>n.length)throw new Error("Row partition size is greater than output size: ".concat(i.length-1," > ").concat(n.length));return this.calculateOutputIndexRowSplit(i,n,r,a);default:throw new Error("Unsupported partition type: ".concat(ao[o]))}},e.prototype.getFirstDimensionSize=function(){var t=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");var n=this.rowPartitionTypes[0];switch(n){case ao.FIRST_DIM_SIZE:return t[0];case ao.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case ao.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error("Cannot handle type ".concat(ao[n]))}},e.prototype.compute=function(){var t=this.rowPartitionValues[0];if(t.length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");var n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),a=new Array(this.raggedRank+1);a[a.length-1]=1;for(var i=a.length-2;i>=0;--i)a[i]=a[i+1]*r[i+1];var o=AA(r,!1),s=T.util.getArrayFromDType(this.valuesDType,T.util.sizeFromShape(o)),u=a[0]*r[0];if(u>0){for(var l=this.calculateFirstParentOutputIndex(n,a[0],r[0]),i=1;i<=this.raggedRank;++i){var c=this.calculateOutputIndex(i-1,l,a[i],r[i]);l=c}this.setOutput(this.raggedRank,l,s,o)}return[o,s]},e.prototype.setOutput=function(t,n,r,a){if(r.length!==0){var i=this.values,o=r,s=a.slice();s=s.slice(t+1);var u=T.util.sizeFromShape(s),l=n.length,c=this.defaultValue;if(c.length!==u&&c.length!==1){var p=this.defaultValueShape;T.tidy(function(){var x=T.reshape(c,p),k=T.broadcastTo(x,s);c=k.dataSync()})}for(var d=0,f=0,h=0,m=0;m<=l;++m){var v=m<l?n[m]:-1;if(v===h){++h;continue}if(f<h){var g=i.subarray(d*u),y=o.subarray(f*u),w=(h-f)*u;_A(y,g,w)}if(m>=l){var b=r.length;v=Math.floor(b/u)}if(v>h)if(this.defaultValue.length===1)o.subarray(h*u,v*u).fill(this.defaultValue[0]),h=v;else for(;v>h;){var y=o.slice(h*u);_A(y,c,u),++h}v<0?(d=m+1,f=h):(d=m,f=h,h=f+1)}}},e}();function _A(e,t,n){for(var r=0;r<n;r++)e[r]=t[r]}function AA(e,t){var n,r,a=[];try{for(var i=Lp(e),o=i.next();!o.done;o=i.next()){var s=o.value;if(s<0){if(!t)throw new Error("Dimension ".concat(s," must be >= 0"));if(s<-1)throw new Error("Dimension ".concat(s," must be >= -1"));s=-1}a.push(s)}}catch(u){n={error:u}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return a}function dF(e,t,n,r,a,i,o,s,u,l){return new B8e(e,t,n,r,a,i,o,s,u,l).compute()}function fF(e,t,n,r){var a=e===t,i=e<t&&n<0,o=t<e&&n>1;if(a||i||o)return T.util.makeZerosTypedArray(0,r);var s=Math.abs(Math.ceil((t-e)/n)),u=T.util.makeZerosTypedArray(s,r);t<e&&n===1&&(n=-1),u[0]=e;for(var l=1;l<u.length;l++)u[l]=u[l-1]+n;return u}var hF=cs(function(e){return 1/Math.sqrt(e)}),L8e=Gu(T.Rsqrt,hF),z8e={kernelName:T.Rsqrt,backendName:"cpu",kernelFunc:L8e};function ic(e,t,n,r,a,i,o,s,u,l){var c=[r/a,a],p=e.values,d=t.values;if(r===0)return T.buffer(n,t.dtype);var f=u instanceof T.TensorBuffer?u:T.buffer(c,t.dtype);typeof u=="string"||typeof u=="number"?f.values.fill(u):typeof u=="boolean"&&f.values.fill(+u);for(var h=0;h<i;h++){for(var m=[],v=0,g=0;g<o;g++){var y=p[h*o+g];m.push(y),v+=y*s[g]}if(v<0||v>=r/a)throw new Error("Invalid indices: ".concat(m," does not index into ").concat(n));for(var w=0;w<a;w++)l?f.values[v*a+w]+=d[h*a+w]:f.values[v*a+w]=t.rank===0?d[0]:d[h*a+w]}return f}var $8e=cs(function(e){return 1/(1+Math.exp(-e))}),mF=Zt(T.Sigmoid,function(e){return 1/(1+Math.exp(-e))}),V8e={kernelName:T.Sigmoid,backendName:"cpu",kernelFunc:mF};function vF(e,t,n,r,a){var i=T.slice_util.isSliceContinous(r,t,n),o=T.util.sizeFromShape(n),s=T.util.computeStrides(r);if(i){var u=T.slice_util.computeFlatOffset(t,s);return a==="string"?e.slice(u,u+o):e.subarray(u,u+o)}for(var l=a==="string"?T.backend_util.fromUint8ToStringArray(e):e,c=T.buffer(r,a,l),p=T.buffer(n,a),d=0;d<p.size;++d){var f=p.indexToLoc(d),h=f.map(function(m,v){return m+t[v]});p.set.apply(p,yi([c.get.apply(c,yi([],rt(h),!1))],rt(f),!1))}return a==="string"?T.backend_util.fromStringArrayToUint8(p.values):p.values}function sc(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.size;st(a,"slice");var s=rt(T.slice_util.parseSliceParams(a,i,o),2),u=s[0],l=s[1];T.slice_util.assertParamsValid(a,u,l);var c=n.data.get(a.dataId).values,p=vF(c,u,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,p)}var W8e={kernelName:T.Slice,backendName:"cpu",kernelFunc:sc};function gF(e,t,n,r,a,i,o){var s=t[0],u=i[0],l=new Array(u),c=new Array(s),p=t[1];if(u===0){if(s!==0)throw new Error(T.backend_util.getSparseFillEmptyRowsIndicesDenseShapeMismatch(s));var d=T.util.getArrayFromDType(n,0),f=T.util.getArrayFromDType(a,0);return[d,[0,p],f,l,c]}for(var h=!0,m=0,v=new Array(u).fill(0),g=0;g<s;++g){var y=e[g*p];if(y<0)throw new Error(T.backend_util.getSparseFillEmptyRowsNegativeIndexErrorMessage(g,y));if(y>=u)throw new Error(T.backend_util.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(g,y,u));++v[y],h=h&&y>=m,m=y}for(var w=!0,y=0;y<u;++y){var b=v[y]===0;l[y]=b,w=w&&!b,v[y]=Math.max(v[y],1),y>0&&(v[y]+=v[y-1])}if(w&&h){for(var d=e,f=r,g=0;g<s;++g)c[g]=g;return[d,[s,p],f,l,c]}else{for(var x=v[u-1],d=T.util.getArrayFromDType(n,x*p),f=T.util.getArrayFromDType(a,x),k=new Array(u).fill(0),g=0;g<s;++g){var y=e[g*p],N=k[y],E=(y===0?0:v[y-1])+N;k[y]++;for(var C=0;C<p;++C)d[E*p+C]=e[g*p+C];f[E]=r[g],c[g]=E}for(var y=0;y<u;++y){var R=k[y];if(R===0){var A=y===0?0:v[y-1];d[A*p+0]=y;for(var M=1;M<p;++M)d[A*p+M]=0;f[A]=o}}return[d,[x,p],f,l,c]}}function yF(e,t,n,r,a){for(var i=T.util.sizeFromShape(r),o=t[0],s=a.length,u=[],l=1,c=-1,p=0;p<s;++p){var d=a[p];if(d===-1){if(c!==-1)throw new Error(T.backend_util.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(c,p));c=p,u.push(1)}else{if(d<0)throw new Error(T.backend_util.getSparseReshapeNegativeOutputDimErrorMessage(p,d));l*=d,u.push(d)}}if(c!==-1){if(l<=0)throw new Error(T.backend_util.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());var f=Math.trunc(i/l);if(l*f!==i)throw new Error(T.backend_util.getSparseReshapeInputOutputMultipleErrorMessage(r,u));u[c]=f}var h=T.util.sizeFromShape(u);if(h!==i)throw new Error(T.backend_util.getSparseReshapeInputOutputMismatchErrorMessage(r,u));var m=r.length,v=[];if(m>0){v[m-1]=1;for(var p=m-2;p>=0;--p)v[p]=v[p+1]*r[p+1]}var g=[];if(s>0){g[s-1]=1;for(var p=s-2;p>=0;--p)g[p]=g[p+1]*u[p+1]}for(var y=T.util.getArrayFromDType(n,o*s),w=0;w<o;++w){for(var b=0,x=0;x<m;++x)b+=e[w*m+x]*v[x];for(var x=0;x<s;++x)y[w*s+x]=Math.trunc(b/g[x]),b%=g[x]}return[y,[o,s],u]}function F6(e,t,n,r,a,i,o){i===void 0&&(i=!1),o===void 0&&(o=0);var s=r.length,u=[t[0],e.length/t[0]],l=u[1],c=s>0?a[s-1]+1:0,p=c;if(p<0)throw new Error(T.backend_util.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());var d=t.slice();d[0]=p;var f=d.reduce(function(N,E){return N*E},1),h=T.util.getArrayFromDType(n,f);if(s===0)return p>0&&h.fill(o),[h,d];if(p<=0)throw new Error(T.backend_util.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());for(var m=0,v=1,g=0,y=a[m];;){var w=0;if(v<s){if(w=a[v],y===w){++v;continue}if(y>=w)throw new Error(T.backend_util.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(y<0||y>=p)throw new Error(T.backend_util.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(y,p));y>g&&h.fill(o,g*l,y*l);for(var b=m;b<v;++b){var x=r[b];if(x<0||x>=u[0])throw new Error(T.backend_util.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(b,r[b],u[0]));for(var k=0;k<l;k++)h[y*l+k]+=e[x*l+k]}if(i)for(var k=0;k<l;k++)h[y*l+k]/=v-m;if(m=v,++v,g=y+1,y=w,v>s)break}return g<p&&h.fill(o,g*l,p*l),[h,d]}var U8e=cs(function(e){return Math.sqrt(e)}),G8e=Zt(T.Sqrt,function(e){return Math.sqrt(e)}),q8e={kernelName:T.Sqrt,backendName:"cpu",kernelFunc:G8e};var bF=pr(function(e,t){var n=e-t;return n*n}),H8e=Ir(T.SquaredDifference,bF),j8e={kernelName:T.SquaredDifference,backendName:"cpu",kernelFunc:H8e};var wF=cs(function(e,t){var n=t.pattern,r=t.replaceGlobal,a=t.rewrite;return e.replace(new RegExp(n,r?"g":""),a)}),K8e=Gu(T.StaticRegexReplace,wF),X8e={kernelName:T.StaticRegexReplace,backendName:"cpu",kernelFunc:K8e};function xF(e,t,n,r){for(var a=T.buffer(e,t.dtype),i=0;i<a.size;i++){for(var o=a.indexToLoc(i),s=new Array(o.length),u=0;u<s.length;u++)s[u]=o[u]*n[u]+r[u];a.set.apply(a,yi([t.get.apply(t,yi([],rt(s),!1))],rt(o),!1))}return a}var Y8e=function(){function e(t,n,r,a,i,o){this.separator=T.util.encodeString(t),this.nGramWidths=n,this.leftPad=T.util.encodeString(r),this.rightPad=T.util.encodeString(a),this.padWidth=i,this.preserveShort=o}return e.prototype.getPadWidth=function(t){return Math.min(this.padWidth<0?t-1:this.padWidth,t-1)},e.prototype.getNumNGrams=function(t,n){var r=this.getPadWidth(n);return Math.max(0,t+2*r-n+1)},e.prototype.createNGrams=function(t,n,r,a,i,o){for(var s=function(c){var p=u.getPadWidth(o),d=Math.max(0,p-c),f=Math.max(0,p-(i-(c+1))),h=o-(d+f),m=n+(d>0?0:c-p),v=0;v+=d*u.leftPad.length;for(var g=0;g<h;++g)v+=t[m+g].length;v+=f*u.rightPad.length;var y=d+f+h-1;v+=y*u.separator.length,r[a+c]=new Uint8Array(v);for(var w=r[a+c],b=0,x=function(k){return k.forEach(function(N){return w[b++]=N})},g=0;g<d;++g)x(u.leftPad),x(u.separator);for(var g=0;g<h-1;++g)x(t[m+g]),x(u.separator);if(h>0){x(t[m+h-1]);for(var g=0;g<f;++g)x(u.separator),x(u.rightPad)}else{for(var g=0;g<f-1;++g)x(u.rightPad),x(u.separator);x(u.rightPad)}},u=this,l=0;l<i;++l)s(l)},e.prototype.compute=function(t,n){var r=this,a=t.length,i=n.length;if(i>0){var o=n[0];if(o!==0)throw new Error("First split value must be 0, got ".concat(o));for(var s=1;s<i;++s){var u=n[s]>=o;if(u=u&&n[s]<=a,!u)throw new Error("Invalid split value ".concat(n[s],", must be in [").concat(o,", ").concat(a,"]"));o=n[s]}if(o!==a)throw new Error("Last split value must be data size. Expected ".concat(a,", got ").concat(o))}var l=i-1,c=T.util.getArrayFromDType("int32",i);if(a===0||i===0){for(var p=new Array(a),s=0;s<=l;++s)c[s]=0;return[p,c]}c[0]=0;for(var d=function(g){var y=n[g]-n[g-1],w=0;f.nGramWidths.forEach(function(b){w+=r.getNumNGrams(y,b)}),f.preserveShort&&y>0&&w===0&&(w=1),c[g]=c[g-1]+w},f=this,s=1;s<=l;++s)d(s);for(var h=new Array(c[l]),m=function(g){var y=n[g],w=c[g];if(v.nGramWidths.forEach(function(N){var E=n[g+1]-n[g],C=r.getNumNGrams(E,N);r.createNGrams(t,y,h,w,C,N),w+=C}),v.preserveShort&&w===c[g]){var b=n[g+1]-n[g];if(b===0)return"continue";var x=b+2*v.padWidth,k=1;v.createNGrams(t,y,h,w,k,x)}},v=this,s=0;s<l;++s)m(s);return[h,c]},e}();function SF(e,t,n,r,a,i,o,s){return new Y8e(n,r,a,i,o,s).compute(e,t)}function J8e(e,t,n,r){if(e.length){if(t.length===0){for(var a=0;a<e.length;++a)r.push(e.subarray(a,a+1));return}if(t.length===1){for(var i=t[0],o=e.indexOf(i);o!==-1;){var s=e.subarray(0,o);(!n||s.length!==0)&&r.push(s),e=e.subarray(o+1),o=e.indexOf(i)}(!n||e.length!==0)&&r.push(e);return}for(var u=0,a=0;a<e.length+1;a++)if(a===e.length||t.indexOf(e[a])!==-1){var s=e.subarray(u,a);(!n||s.length!==0)&&r.push(s),u=a+1}}}function kF(e,t,n){for(var r=e.length,a=[],i=0,o=0,s=new Array(r),u=0;u<r;++u){var l=a.length;J8e(e[u],t,n,a);var c=a.length-l;s[u]=c,i+=c,o=Math.max(o,c)}for(var p=T.util.getArrayFromDType("int32",i*2),d=new Array(i),f=[r,o],h=0,u=0;u<r;++u)for(var m=0;m<s[u];++m)p[h*2]=u,p[h*2+1]=m,d[h]=a[h],++h;return[p,d,f]}function NF(e,t){for(var n=T.util.getArrayFromDType("int32",e.length),r=0;r<e.length;++r)n[r]=T.util.fingerPrint64(e[r]).modulo(t).getLowBitsUnsigned();return n}var TF=pr(function(e,t){return e-t}),Z8e=C6(function(e,t,n,r){return{real:e-n,imag:t-r}}),R6=Ir(T.Sub,TF,Z8e),Q8e={kernelName:T.Sub,backendName:"cpu",kernelFunc:R6};function EF(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];for(var a=T.buffer(n,e.dtype),r=0;r<a.values.length;++r){for(var i=a.indexToLoc(r),o=new Array(e.rank),s=0;s<o.length;s++)o[s]=i[s]%e.shape[s];var u=e.locToIndex(o);a.values[r]=e.values[u]}return a}var Sh=function(e,t){var n=t.value-e.value;return n===0?e.index-t.index:n};function IF(e,t,n,r){for(n===void 0&&(n=0),r===void 0&&(r=e.length-1);r>n;){if(r-n>600){var a=r-n+1,i=t-n+1,o=Math.log(a),s=.5*Math.exp(2*o/3),u=.5*Math.sqrt(o*s*(a-s)/a)*Math.sign(i-a/2),l=Math.max(n,Math.floor(t-i*s/a+u)),c=Math.min(r,Math.floor(t+(a-i)*s/a+u));IF(e,t,l,c)}var p=e[t],d=n,f=r;for(T.util.swap(e,n,t),Sh(e[r],p)>0&&T.util.swap(e,n,r);d<f;){for(T.util.swap(e,d,f),d++,f--;Sh(e[d],p)<0;)d=d+1;for(;Sh(e[f],p)>0;)f=f-1}Sh(e[n],p)===0?T.util.swap(e,n,f):(f=f+1,T.util.swap(e,f,r)),f<=t&&(n=f+1),t<=f&&(r=f-1)}}function CF(e,t,n,r,a){for(var i=t[t.length-1],o=rt([e.length/i,i],2),s=o[0],u=o[1],l=T.util.getTypedArrayFromDType(n,s*r),c=T.util.getTypedArrayFromDType("int32",s*r),p=function(h){var m=h*u,v=e.subarray(m,m+u),g=new Array(v.length);v.forEach(function(k,N){return g[N]={value:k,index:N}}),r<g.length&&(IF(g,r),g=g.slice(0,r)),a&&g.sort(Sh);for(var y=h*r,w=l.subarray(y,y+r),b=c.subarray(y,y+r),x=0;x<r;x++)w[x]=g[x].value,b[x]=g[x].index},d=0;d<s;d++)p(d);var f=t.slice();return f[f.length-1]=r,[T.buffer(f,n,l),T.buffer(f,"int32",c)]}function DF(e,t,n,r){for(var a=T.util.parseAxisParam(t,n)[0],i=[1,n[0],1],o=0;o<a;o++)i[0]*=n[o];i[1]=n[a];for(var o=a+1;o<n.length;o++)i[2]*=n[o];for(var s=new Map,u=new Int32Array(n[a]),l=new T.TensorBuffer(i,r,e),c=[],p=i[0]===1&&i[2]===1,o=0;o<n[a];o++){var d=void 0;if(p)d=e[o].toString();else{for(var f=[],h=0;h<i[0];h++)for(var m=0;m<i[2];m++)f.push(l.get(h,o,m));d=f.join(",")}var v=s.get(d);if(v!=null)u[o]=v;else{var g=s.size;s.set(d,g),u[o]=g,c.push(o)}}var y=i.slice();y[1]=s.size;var w=new T.TensorBuffer(y,r);c.forEach(function(x,k){for(var N=0;N<i[0];N++)for(var E=0;E<i[2];E++)w.set(l.get(N,x,E),N,k,E)});var b=n.slice();return b[a]=y[1],{outputValues:w.values,outputShape:b,indices:u}}var e9e={__proto__:null,addImpl:LA,bincountImpl:D6,bincountReduceImpl:zA,bitwiseAndImpl:$A,castImpl:BA,ceilImpl:VA,concatImpl:WA,equalImpl:UA,expImpl:qA,expm1Impl:jA,floorDivImpl:XA,floorImpl:KA,gatherNdImpl:YA,gatherV2Impl:JA,greaterEqualImpl:QA,greaterImpl:ZA,lessEqualImpl:tF,lessImpl:eF,linSpaceImpl:nF,logImpl:rF,maxImpl:aF,maximumImpl:iF,minimumImpl:oF,multiplyImpl:_6,negImpl:sF,notEqualImpl:uF,prodImpl:lF,raggedGatherImpl:cF,raggedRangeImpl:pF,raggedTensorToTensorImpl:dF,rangeImpl:fF,rsqrtImpl:hF,scatterImpl:ic,sigmoidImpl:$8e,simpleAbsImpl:PA,sliceImpl:vF,sparseFillEmptyRowsImpl:gF,sparseReshapeImpl:yF,sparseSegmentReductionImpl:F6,sqrtImpl:U8e,squaredDifferenceImpl:bF,staticRegexReplaceImpl:wF,stridedSliceImpl:xF,stringNGramsImpl:SF,stringSplitImpl:kF,stringToHashBucketFastImpl:NF,subImpl:TF,tileImpl:EF,topKImpl:CF,transposeImpl:A6,uniqueImpl:DF};var t9e="4.21.0";T.registerBackend("cpu",function(){return new I6},1);var _F=Zt(T.Elu,function(e){return e>=0?e:Math.exp(e)-1}),n9e={kernelName:T.Elu,backendName:"cpu",kernelFunc:_F};function AF(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.alpha;st([a],"leakyRelu");for(var o=T.util.sizeFromShape(a.shape),s=n.data.get(a.dataId).values,u=T.util.getTypedArrayFromDType("float32",o),l=0;l<s.length;l++)u[l]=s[l]<0?i*s[l]:s[l];return n.makeTensorInfo(a.shape,"float32",u)}var r9e={kernelName:T.LeakyRelu,backendName:"cpu",kernelFunc:AF},a9e=pr(function(e,t){return e<0?t*e:e});function FF(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha;st([r,a],"prelu");var i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=rt(a9e(r.shape,a.shape,i,o,"float32"),2),u=s[0],l=s[1];return n.makeTensorInfo(l,"float32",u)}var i9e={kernelName:T.Prelu,backendName:"cpu",kernelFunc:FF};var RF=Zt(T.Relu,function(e){return Math.max(0,e)}),o9e={kernelName:T.Relu,backendName:"cpu",kernelFunc:RF};var OF=Zt(T.Relu6,function(e){return Math.min(Math.max(0,e),6)}),s9e={kernelName:T.Relu6,backendName:"cpu",kernelFunc:OF};function b0(e,t,n,r,a){if(n==="linear")return ls({inputs:{x:t},backend:e});if(n==="relu")return RF({inputs:{x:t},backend:e});if(n==="elu")return _F({inputs:{x:t},backend:e});if(n==="relu6")return OF({inputs:{x:t},backend:e});if(n==="prelu")return FF({inputs:{x:t,alpha:r},backend:e});if(n==="leakyrelu")return AF({inputs:{x:t},backend:e,attrs:{alpha:a}});if(n==="sigmoid")return mF({inputs:{x:t},backend:e});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}function ln(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.shape,o=T.util.sizeFromShape(a.shape),s=T.util.inferFromImplicitShape(i,o),u=T.util.sizeFromShape(s);T.util.assert(o===u,function(){return"The new shape (".concat(s,") has ").concat(u," elements and the old ")+"shape (".concat(a.shape,") has ").concat(o," elements. The new shape and old ")+"shape must have the same number of elements."}),n.incRef(a.dataId);var l=n.data.get(a.dataId);if(l.complexTensorInfos!=null){var c=l.complexTensorInfos.real,p=l.complexTensorInfos.imag;c.shape=s,p.shape=s}return{dataId:a.dataId,shape:s,dtype:a.dtype}}var u9e={kernelName:T.Reshape,backendName:"cpu",kernelFunc:ln};function MF(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=r.transposeA,s=r.transposeB;st([a,i],"matMul");var u=a.shape.length,l=i.shape.length,c=o?a.shape[u-2]:a.shape[u-1],p=s?i.shape[l-1]:i.shape[l-2],d=o?a.shape[u-1]:a.shape[u-2],f=s?i.shape[l-2]:i.shape[l-1],h=a.shape.slice(0,-2),m=i.shape.slice(0,-2),v=T.util.sizeFromShape(h),g=T.util.sizeFromShape(m),y=T.broadcast_util.assertAndGetBroadcastShape(a.shape.slice(0,-2),i.shape.slice(0,-2)),w=y.concat([d,f]);T.util.assert(c===p,function(){return"Error in matMul: inner shapes (".concat(c,") and (")+"".concat(p,") of Tensors with shapes ").concat(a.shape," and ")+"".concat(i.shape," and transposeA=").concat(o)+" and transposeB=".concat(s," must match.")});for(var b=o?[v,c,d]:[v,d,c],x=s?[g,f,p]:[g,p,f],k=ln({inputs:{x:a},backend:n,attrs:{shape:b}}),N=ln({inputs:{x:i},backend:n,attrs:{shape:x}}),E=o?k.shape[1]:k.shape[2],C=o?k.shape[2]:k.shape[1],R=s?N.shape[1]:N.shape[2],A=Math.max(v,g),M=n.data.get(k.dataId).values,$=n.data.get(N.dataId).values,z=T.util.computeStrides(k.shape),L=T.util.computeStrides(N.shape),B=rt(o?[z[0],1,z[1]]:[z[0],z[1],1],3),W=B[0],Y=B[1],Q=B[2],G=rt(s?[1,L[1],L[0]]:[L[1],1,L[0]],3),X=G[0],ie=G[1],ae=G[2],le=C*R,de=T.buffer([A,C,R],k.dtype),ge=de.values,Ee=n.blockSize,he=0;he<A;he++)for(var xe=he%v,Ne=he%g,$e=0;$e<C;$e+=Ee)for(var pt=Math.min($e+Ee,C),It=0;It<R;It+=Ee)for(var xt=Math.min(It+Ee,R),yt=0;yt<E;yt+=Ee)for(var Et=Math.min(yt+Ee,E),Nt=$e;Nt<pt;Nt++)for(var dt=It;dt<xt;dt++){for(var gt=0,mt=yt;mt<Et;mt++){var Dn=M[xe*W+Nt*Y+mt*Q],ct=$[mt*X+dt*ie+Ne*ae];gt+=Dn*ct}ge[he*le+(Nt*R+dt)]+=gt}return n.disposeIntermediateTensorInfo(k),n.disposeIntermediateTensorInfo(N),n.makeTensorInfo(w,de.dtype,de.values)}var l9e={kernelName:T.BatchMatMul,backendName:"cpu",kernelFunc:MF};function c9e(e){var t,n,r=e.inputs,a=e.backend,i=e.attrs,o=r.a,s=r.b,u=r.bias,l=r.preluActivationWeights,c=i.transposeA,p=i.transposeB,d=i.activation,f=i.leakyreluAlpha,h,m,v,g=[],y=MF({inputs:{a:o,b:s},attrs:{transposeA:c,transposeB:p},backend:a});h=y,u&&(m=zp({inputs:{a:h,b:u},backend:a}),g.push(h),h=m),d&&(v=b0(a,h,d,l,f),g.push(h),h=v);try{for(var w=Lp(g),b=w.next();!b.done;b=w.next()){var x=b.value;a.disposeIntermediateTensorInfo(x)}}catch(k){t={error:k}}finally{try{b&&!b.done&&(n=w.return)&&n.call(w)}finally{if(t)throw t.error}}return h}var p9e={kernelName:T._FusedMatMul,backendName:"cpu",kernelFunc:c9e};var d9e=Zt(T.Acos,function(e){return Math.acos(e)}),f9e={kernelName:T.Acos,backendName:"cpu",kernelFunc:d9e};var h9e=Zt(T.Acosh,function(e){return Math.acosh(e)}),m9e={kernelName:T.Acosh,backendName:"cpu",kernelFunc:h9e};function v9e(e){var t=e.inputs,n=e.backend,r=t;st(t,"addN");for(var a=r.map(function(c){return n.data.get(c.dataId).values}),i=T.buffer(r[0].shape,r[0].dtype),o=i.values,s=0;s<r.length;s++)for(var u=a[s],l=0;l<o.length;l++)o[l]+=u[l];return n.makeTensorInfo(i.shape,i.dtype,i.values)}var g9e={kernelName:T.AddN,backendName:"cpu",kernelFunc:v9e};function y9e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;st(a,"all");var s=T.util.parseAxisParam(i,a.shape),u=s,l=T.backend_util.getAxesPermutation(u,a.shape.length),c=a;l!=null&&(c=Ca({inputs:{x:a},backend:n,attrs:{perm:l}}),u=T.backend_util.getInnerMostAxes(u.length,a.shape.length)),T.backend_util.assertAxesAreInnerMostDims("all",u,c.shape.length);for(var p=rt(T.backend_util.computeOutAndReduceShapes(c.shape,u),2),d=p[0],f=p[1],h=T.util.sizeFromShape(f),m=T.util.makeZerosTypedArray(T.util.sizeFromShape(d),c.dtype),v=n.data.get(c.dataId).values,g=0;g<m.length;++g){for(var y=g*h,w=v[y],b=0;b<h;++b){var x=v[y+b];w=w&&x}m[g]=w}l!=null&&n.disposeIntermediateTensorInfo(c);var k=n.makeTensorInfo(d,c.dtype,m);if(o){var N=T.backend_util.expandShapeToKeepDim(d,s),E=ln({inputs:{x:k},backend:n,attrs:{shape:N}});return n.disposeIntermediateTensorInfo(k),E}return k}var b9e={kernelName:T.All,backendName:"cpu",kernelFunc:y9e};function w9e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;st(a,"any");var s=T.util.parseAxisParam(i,a.shape),u=s,l=T.backend_util.getAxesPermutation(u,a.shape.length),c=a;l!=null&&(c=Ca({inputs:{x:a},backend:n,attrs:{perm:l}}),u=T.backend_util.getInnerMostAxes(u.length,a.shape.length)),T.backend_util.assertAxesAreInnerMostDims("any",u,c.shape.length);for(var p=rt(T.backend_util.computeOutAndReduceShapes(c.shape,u),2),d=p[0],f=p[1],h=T.util.sizeFromShape(f),m=T.util.makeZerosTypedArray(T.util.sizeFromShape(d),c.dtype),v=n.data.get(c.dataId).values,g=0;g<m.length;++g){for(var y=g*h,w=v[y],b=0;b<h;++b){var x=v[y+b];w=w||x}m[g]=w}l!=null&&n.disposeIntermediateTensorInfo(c);var k=n.makeTensorInfo(d,c.dtype,m);if(o){var N=T.backend_util.expandShapeToKeepDim(d,s),E=ln({inputs:{x:k},backend:n,attrs:{shape:N}});return n.disposeIntermediateTensorInfo(k),E}return k}var x9e={kernelName:T.Any,backendName:"cpu",kernelFunc:w9e};function S9e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis;st(a,"argMax");var o=T.util.parseAxisParam(i,a.shape),s=T.backend_util.getAxesPermutation(o,a.shape.length),u=a,l=[];s!=null&&(u=Ca({inputs:{x:a},backend:n,attrs:{perm:s}}),l.push(u),o=T.backend_util.getInnerMostAxes(o.length,u.shape.length)),o=[o[0]],T.backend_util.assertAxesAreInnerMostDims("argMax",o,u.shape.length);for(var c=rt(T.backend_util.computeOutAndReduceShapes(u.shape,o),2),p=c[0],d=c[1],f=T.util.sizeFromShape(p),h=T.util.makeZerosTypedArray(f,"int32"),m=T.util.sizeFromShape(d),v=n.data.get(u.dataId).values,g=0;g<h.length;++g){for(var y=g*m,w=v[y],b=0,x=0;x<m;++x){var k=v[y+x];k>w&&(w=k,b=x)}h[g]=b}return l.forEach(function(N){return n.disposeIntermediateTensorInfo(N)}),n.makeTensorInfo(p,"int32",h)}var k9e={kernelName:T.ArgMax,backendName:"cpu",kernelFunc:S9e};function N9e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis;st(a,"argMin");var o=T.util.parseAxisParam(i,a.shape),s=T.backend_util.getAxesPermutation(o,a.shape.length),u=a,l=[];s!=null&&(u=Ca({inputs:{x:a},backend:n,attrs:{perm:s}}),l.push(u),o=T.backend_util.getInnerMostAxes(o.length,u.shape.length)),o=[o[0]],T.backend_util.assertAxesAreInnerMostDims("argMin",o,u.shape.length);for(var c=rt(T.backend_util.computeOutAndReduceShapes(u.shape,o),2),p=c[0],d=c[1],f=T.util.sizeFromShape(p),h=T.util.makeZerosTypedArray(f,"int32"),m=T.util.sizeFromShape(d),v=n.data.get(u.dataId).values,g=0;g<h.length;++g){for(var y=g*m,w=v[y],b=0,x=0;x<m;++x){var k=v[y+x];k<w&&(w=k,b=x)}h[g]=b}return l.forEach(function(N){return n.disposeIntermediateTensorInfo(N)}),n.makeTensorInfo(p,"int32",h)}var T9e={kernelName:T.ArgMin,backendName:"cpu",kernelFunc:N9e};var E9e=Zt(T.Asin,function(e){return Math.asin(e)}),I9e={kernelName:T.Asin,backendName:"cpu",kernelFunc:E9e};var C9e=Zt(T.Asinh,function(e){return Math.asinh(e)}),D9e={kernelName:T.Asinh,backendName:"cpu",kernelFunc:C9e};var _9e=Zt(T.Atan,function(e){return Math.atan(e)}),A9e={kernelName:T.Atan,backendName:"cpu",kernelFunc:_9e};var F9e=pr(function(e,t){return Math.atan2(e,t)}),R9e=Ir(T.Atan2,F9e),O9e={kernelName:T.Atan2,backendName:"cpu",kernelFunc:R9e};var M9e=Zt(T.Atanh,function(e){return Math.atanh(e)}),P9e={kernelName:T.Atanh,backendName:"cpu",kernelFunc:M9e};function O6(e,t,n,r,a,i){for(var o=a.strideHeight,s=a.strideWidth,u=a.dilationHeight,l=a.dilationWidth,c=a.effectiveFilterHeight,p=a.effectiveFilterWidth,d=a.padInfo.top,f=a.padInfo.left,h=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=T.buffer(a.outShape,n),v=m.values,g=a.outShape[1]*a.outShape[2]*a.outShape[3],y=a.outShape[2]*a.outShape[3],w=a.outShape[3],b=0;b<a.batchSize;++b)for(var x=b*g,k=b*r[0],N=0;N<a.inChannels;++N)for(var E=0;E<a.outHeight;++E)for(var C=E*o-d,R=Math.max(0,C),A=Math.min(a.inHeight,c+C),M=x+E*y,$=0;$<a.outWidth;++$){for(var z=$*s-f,L=Math.max(0,z),B=Math.min(a.inWidth,p+z),W=h,Y=0,Q=0,G=R;G<A;G+=u){for(var X=k+G*r[1],ie=L;ie<B;ie+=l){var ae=X+ie*r[2],le=e[ae+N];i==="max"&&le>W?W=le:i==="avg"&&(Y+=le,Q++)}if(isNaN(W))break}var de=M+$*w+N;v[de]=i==="avg"?Y/Q:W}return m}function PF(e,t,n,r,a,i){a===void 0&&(a=!1),i===void 0&&(i=!1);for(var o=T.buffer(r.outShape,"int32"),s=r.strideHeight,u=r.strideWidth,l=r.dilationHeight,c=r.dilationWidth,p=r.effectiveFilterHeight,d=r.effectiveFilterWidth,f=r.padInfo.top,h=r.padInfo.left,m=T.buffer(t,n,e),v=0;v<r.batchSize;++v)for(var g=0;g<r.inChannels;++g)for(var y=0;y<r.outHeight;++y){for(var w=y*s-f,b=w;b<0;)b+=l;for(var x=Math.min(r.inHeight,p+w),k=0;k<r.outWidth;++k){for(var N=k*u-h,E=N;E<0;)E+=c;for(var C=Math.min(r.inWidth,d+N),R=Number.NEGATIVE_INFINITY,A=-1,M=b;M<x;M+=l)for(var $=M-w,z=E;z<C;z+=c){var L=z-N,B=m.get(v,M,z,g);B>R&&(R=B,a?A=i?((v*r.inHeight+M)*r.inWidth+z)*r.inChannels+g:(M*r.inWidth+z)*r.inChannels+g:A=$*d+L)}o.set(A,v,y,k,g)}}return o}function BF(e,t,n,r,a,i){for(var o=a.strideDepth,s=a.strideHeight,u=a.strideWidth,l=a.dilationDepth,c=a.dilationHeight,p=a.dilationWidth,d=a.effectiveFilterDepth,f=a.effectiveFilterHeight,h=a.effectiveFilterWidth,m=a.padInfo.front,v=a.padInfo.top,g=a.padInfo.left,y=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,w=T.buffer(a.outShape,n),b=w.values,x=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],k=a.outShape[2]*a.outShape[3]*a.outShape[4],N=a.outShape[3]*a.outShape[4],E=a.outShape[4],C=0;C<a.batchSize;++C)for(var R=C*x,A=C*r[0],M=0;M<a.inChannels;++M)for(var $=0;$<a.outDepth;++$){for(var z=$*o-m,L=z;L<0;)L+=l;for(var B=Math.min(a.inDepth,d+z),W=R+$*k,Y=0;Y<a.outHeight;++Y){for(var Q=Y*s-v,G=Q;G<0;)G+=c;for(var X=Math.min(a.inHeight,f+Q),ie=W+Y*N,ae=0;ae<a.outWidth;++ae){for(var le=ae*u-g,de=le;de<0;)de+=p;for(var ge=Math.min(a.inWidth,h+le),Ee=ie+ae*E,he=y,xe=0,Ne=0,$e=L;$e<B;$e+=l){for(var pt=A+$e*r[1],It=G;It<X;It+=c){for(var xt=pt+It*r[2],yt=de;yt<ge;yt+=p){var Et=xt+yt*r[3],Nt=e[Et+M];if(i==="max"&&Nt>he?he=Nt:i==="avg"&&(xe+=Nt,Ne++),isNaN(he))break}if(isNaN(he))break}if(isNaN(he))break}var dt=Ee+M;b[dt]=i==="avg"?xe/Math.max(Ne,1):he}}}return w}function B9e(e,t){for(var n=T.buffer(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,i=t.strideWidth,o=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,l=t.effectiveFilterDepth,c=t.effectiveFilterHeight,p=t.effectiveFilterWidth,d=t.padInfo.front,f=t.padInfo.top,h=t.padInfo.left,m=0;m<t.batchSize;++m)for(var v=0;v<t.inChannels;++v)for(var g=0;g<t.outDepth;++g){for(var y=g*r-d,w=y;w<0;)w+=o;for(var b=Math.min(t.inDepth,l+y),x=0;x<t.outHeight;++x){for(var k=x*a-f,N=k;N<0;)N+=s;for(var E=Math.min(t.inHeight,c+k),C=0;C<t.outWidth;++C){for(var R=C*i-h,A=R;A<0;)A+=u;for(var M=Math.min(t.inWidth,p+R),$=Number.NEGATIVE_INFINITY,z=-1,L=w;L<b;L+=o)for(var B=L-y,W=N;W<E;W+=s)for(var Y=W-k,Q=A;Q<M;Q+=u){var G=Q-R,X=e.get(m,L,W,Q,v);X>=$&&($=X,z=B*c*p+Y*c+G)}n.set(z,m,g,x,C,v)}}}return n}function L9e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;st(a,"avgPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,l=1;T.util.assert(T.backend_util.eitherStridesOrDilationsAreOne(o,l),function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(l,"'")});var c=T.backend_util.computePool2DInfo(a.shape,i,o,l,s,u),p;if(c.filterWidth===1&&c.filterHeight===1&&T.util.arraysEqual(c.inShape,c.outShape))p=ls({inputs:{x:a},backend:n});else{var d=n.data.get(a.dataId).values,f=T.util.computeStrides(a.shape),h=O6(d,a.shape,a.dtype,f,c,"avg");p=n.makeTensorInfo(c.outShape,a.dtype,h.values)}return p}var z9e={kernelName:T.AvgPool,backendName:"cpu",kernelFunc:L9e};function $9e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,l=r.dataFormat;st(a,"avgPool3d");var c=T.backend_util.computePool3DInfo(a.shape,i,o,1,s,u,l),p=n.data.get(a.dataId).values,d=BF(p,a.shape,a.dtype,T.util.computeStrides(a.shape),c,"avg");return n.makeTensorInfo(d.shape,"float32",d.values)}var V9e={kernelName:T.AvgPool3D,backendName:"cpu",kernelFunc:$9e};function W9e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,l=r.dimRoundingMode;st([a,i],"avgPool3DGrad");for(var c=T.backend_util.computePool3DInfo(i.shape,o,s,1,u,l),p=c.strideDepth,d=c.strideHeight,f=c.strideWidth,h=c.filterDepth,m=c.filterHeight,v=c.filterWidth,g=c.dilationDepth,y=c.dilationHeight,w=c.dilationWidth,b=c.effectiveFilterDepth,x=c.effectiveFilterHeight,k=c.effectiveFilterWidth,N=b-1-c.padInfo.front,E=k-1-c.padInfo.left,C=x-1-c.padInfo.top,R=T.buffer(i.shape,"float32"),A=1/(h*m*v),M=n.bufferSync(a),$=0;$<c.batchSize;++$)for(var z=0;z<c.inChannels;++z)for(var L=0;L<c.inDepth;++L)for(var B=0;B<c.inHeight;++B)for(var W=0;W<c.inWidth;++W){for(var Y=L-N,Q=B-C,G=W-E,X=0,ie=0;ie<b;ie+=g){var ae=(Y+ie)/p;if(!(ae<0||ae>=c.outDepth||Math.floor(ae)!==ae))for(var le=0;le<x;le+=y){var de=(Q+le)/d;if(!(de<0||de>=c.outHeight||Math.floor(de)!==de))for(var ge=0;ge<k;ge+=w){var Ee=(G+ge)/f;if(!(Ee<0||Ee>=c.outWidth||Math.floor(Ee)!==Ee)){var he=M.get($,ae,de,Ee,z);X+=he}}}}R.set(X*A,$,L,B,W,z)}return n.makeTensorInfo(R.shape,R.dtype,R.values)}var U9e={kernelName:T.AvgPool3DGrad,backendName:"cpu",kernelFunc:W9e};function G9e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;st([a,i],"avgPoolGrad");for(var s=r.filterSize,u=r.strides,l=r.pad,c=T.backend_util.computePool2DInfo(o.shape,s,u,1,l),p=c.strideHeight,d=c.strideWidth,f=c.filterHeight,h=c.filterWidth,m=c.dilationHeight,v=c.dilationWidth,g=c.effectiveFilterHeight,y=c.effectiveFilterWidth,w=y-1-c.padInfo.left,b=g-1-c.padInfo.top,x=T.buffer(o.shape,"float32"),k=1/(f*h),N=n.data.get(a.dataId).values,E=T.buffer(a.shape,"float32",N),C=0;C<c.batchSize;++C)for(var R=0;R<c.inChannels;++R)for(var A=0;A<c.inHeight;++A)for(var M=0;M<c.inWidth;++M){for(var $=A-b,z=M-w,L=0,B=0;B<g;B+=m){var W=($+B)/p;if(!(W<0||W>=c.outHeight||Math.floor(W)!==W))for(var Y=0;Y<y;Y+=v){var Q=(z+Y)/d;if(!(Q<0||Q>=c.outWidth||Math.floor(Q)!==Q)){var G=E.get(C,W,Q,R);L+=G}}}x.set(L*k,C,A,M,R)}return n.makeTensorInfo(x.shape,x.dtype,x.values)}var q9e={kernelName:T.AvgPoolGrad,backendName:"cpu",kernelFunc:G9e};function H9e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.scale,o=t.offset,s=t.mean,u=t.variance;T.util.assert(s.shape.length===u.shape.length,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),T.util.assert(o==null||s.shape.length===o.shape.length,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),T.util.assert(i==null||s.shape.length===i.shape.length,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),st([a,s,u,i,o],"batchNorm");var l=r.varianceEpsilon;l==null&&(l=.001);for(var c=n.data.get(a.dataId).values,p=n.data.get(s.dataId).values,d=n.data.get(u.dataId).values,f=i?n.data.get(i.dataId).values:new Float32Array([1]),h=o?n.data.get(o.dataId).values:new Float32Array([0]),m=new Float32Array(c.length),v=h.length,g=f.length,y=d.length,w=p.length,b=0,x=0,k=0,N=0,E=0;E<c.length;++E)m[E]=h[b++]+(c[E]-p[x++])*f[k++]/Math.sqrt(d[N++]+l),b>=v&&(b=0),x>=w&&(x=0),k>=g&&(k=0),N>=y&&(N=0);return n.makeTensorInfo(a.shape,a.dtype,m)}var j9e={kernelName:T.FusedBatchNorm,backendName:"cpu",kernelFunc:H9e};function K9e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops;st([a],"batchToSpaceND");var s=i.reduce(function(g,y){return g*y}),u=T.backend_util.getReshaped(a.shape,i,s),l=T.backend_util.getPermuted(u.length,i.length),c=T.backend_util.getReshapedPermuted(a.shape,i,s),p=T.backend_util.getSliceBeginCoords(o,i.length),d=T.backend_util.getSliceSize(c,o,i.length),f=ln({inputs:{x:a},backend:n,attrs:{shape:u}}),h=Ca({inputs:{x:f},backend:n,attrs:{perm:l}}),m=ln({inputs:{x:h},backend:n,attrs:{shape:c}}),v=sc({inputs:{x:m},backend:n,attrs:{begin:p,size:d}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),v}var X9e={kernelName:T.BatchToSpaceND,backendName:"cpu",kernelFunc:K9e};function Y9e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,l=D6(s,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,l)}var J9e={kernelName:T.Bincount,backendName:"cpu",kernelFunc:Y9e};function Z9e(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=T.backend_util.assertAndGetBroadcastShape(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}var Q9e={kernelName:T.BroadcastArgs,backendName:"cpu",kernelFunc:Z9e};var e7e=Zt(T.ClipByValue,function(e,t){var n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e}),t7e={kernelName:T.ClipByValue,backendName:"cpu",kernelFunc:e7e};var n7e=function(e){for(var t=e.inputs.x,n=e.backend,r=new Float32Array(T.util.sizeFromShape(t.shape)),a=n.data.get(t.dataId),i=a.complexTensorInfos.real,o=a.complexTensorInfos.imag,s=n.data.get(i.dataId).values,u=n.data.get(o.dataId).values,l=0;l<s.length;l++){var c=s[l],p=u[l];r[l]=Math.hypot(c,p)}return n.makeOutput(r,t.shape,"float32")},r7e={kernelName:T.ComplexAbs,backendName:"cpu",kernelFunc:n7e};function $p(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var a7e={kernelName:T.Imag,backendName:"cpu",kernelFunc:$p};function Vp(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.axis,i=T.util.parseAxisParam(a,t[0].shape)[0],o=t.map(function(b){return b.shape});T.backend_util.assertParamsConsistent(o,i);var s=T.backend_util.computeOutShape(t.map(function(b){return b.shape}),i);if(T.util.sizeFromShape(s)===0)return n.makeTensorInfo(s,t[0].dtype,[]);var u=t.filter(function(b){return T.util.sizeFromShape(b.shape)>0});if(u.length===1)return ls({inputs:{x:u[0]},backend:n});if(u[0].dtype==="complex64"){var l=u.map(function(b){return oc({inputs:{input:b},backend:n})}),c=u.map(function(b){return $p({inputs:{input:b},backend:n})}),p=Vp({inputs:l,backend:n,attrs:{axis:i}}),d=Vp({inputs:c,backend:n,attrs:{axis:i}}),f=ni({inputs:{real:p,imag:d},backend:n});return l.forEach(function(b){return n.disposeIntermediateTensorInfo(b)}),c.forEach(function(b){return n.disposeIntermediateTensorInfo(b)}),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(d),f}var h=u.map(function(b){var x=T.util.sizeFromShape(b.shape.slice(i)),k=[-1,x];return ln({inputs:{x:b},backend:n,attrs:{shape:k}})}),m=h.map(function(b){return{vals:n.data.get(b.dataId).values,shape:b.shape}});s=T.backend_util.computeOutShape(h.map(function(b){return b.shape}),1);var v=h[0].shape[0]===1,g=WA(m,s,t[0].dtype,v),y=T.backend_util.computeOutShape(u.map(function(b){return b.shape}),i),w=n.makeTensorInfo(y,t[0].dtype,g);return h.forEach(function(b){return n.disposeIntermediateTensorInfo(b)}),w}var i7e={kernelName:T.Concat,backendName:"cpu",kernelFunc:Vp};function LF(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dataFormat,l=r.dilations,c=r.dimRoundingMode;st([a,i],"conv2d");for(var p=T.backend_util.convertConv2DDataFormat(u),d=T.backend_util.computeConv2DInfo(a.shape,i.shape,o,l,s,c,!1,p),f=d.filterHeight,h=d.filterWidth,m=d.dilationHeight,v=d.dilationWidth,g=d.padInfo.left,y=d.padInfo.top,w=d.dataFormat==="channelsLast",b=new T.TensorBuffer(d.outShape,a.dtype),x=T.util.computeStrides(a.shape),k=T.util.computeStrides(i.shape),N=x[0],E=w?x[1]:x[2],C=w?x[2]:1,R=w?1:x[1],A=b.strides[0],M=w?b.strides[1]:b.strides[2],$=w?b.strides[2]:1,z=w?1:b.strides[1],L=n.data.get(a.dataId).values,B=n.data.get(i.dataId).values,W=b.values,Y=0;Y<d.batchSize;++Y)for(var Q=Y*N,G=Y*A,X=0;X<d.outHeight;++X)for(var ie=G+X*M,ae=X*d.strideHeight-y,le=0;le<f;++le){var de=ae+le*m;if(!(de<0||de>=d.inHeight))for(var ge=le*k[0],Ee=Q+de*E,he=0;he<d.outWidth;++he)for(var xe=ie+he*$,Ne=he*d.strideWidth-g,$e=0;$e<h;++$e){var pt=Ne+$e*v;if(!(pt<0||pt>=d.inWidth))for(var It=ge+$e*k[1],xt=Ee+pt*C,yt=It,Et=0;Et<d.inChannels;++Et){for(var Nt=L[xt+Et*R],dt=0;dt<d.outChannels;++dt)W[xe+dt*z]+=Nt*B[yt+dt];yt+=d.outChannels}}}return n.makeTensorInfo(b.shape,b.dtype,W)}var o7e={kernelName:T.Conv2D,backendName:"cpu",kernelFunc:LF};function s7e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.dataFormat,l=r.dimRoundingMode,c=r.filterShape;st([a,i],"conv2dBackpropFilter");for(var p=T.backend_util.convertConv2DDataFormat(u),d=T.backend_util.computeConv2DInfo(a.shape,c,o,1,s,l,!1,p),f=d.strideHeight,h=d.strideWidth,m=d.filterHeight,v=d.filterWidth,g=d.dataFormat==="channelsLast",y=new T.TensorBuffer(d.filterShape,"float32"),w=d.padInfo.left,b=d.padInfo.top,x=n.data.get(a.dataId).values,k=n.data.get(i.dataId).values,N=new T.TensorBuffer(a.shape,a.dtype,x),E=new T.TensorBuffer(i.shape,i.dtype,k),C=0;C<m;++C)for(var R=Math.max(0,Math.ceil((b-C)/f)),A=Math.min(d.outHeight,(d.inHeight+b-C)/f),M=0;M<v;++M)for(var $=Math.max(0,Math.ceil((w-M)/h)),z=Math.min(d.outWidth,(d.inWidth+w-M)/h),L=0;L<d.inChannels;++L)for(var B=0;B<d.outChannels;++B){for(var W=0,Y=0;Y<d.batchSize;++Y)for(var Q=R;Q<A;++Q)for(var G=C+Q*f-b,X=$;X<z;++X){var ie=M+X*h-w;g?W+=N.get(Y,G,ie,L)*E.get(Y,Q,X,B):W+=N.get(Y,L,G,ie)*E.get(Y,B,Q,X)}y.set(W,C,M,L,B)}return n.makeTensorInfo(y.shape,y.dtype,y.values)}var u7e={kernelName:T.Conv2DBackpropFilter,backendName:"cpu",kernelFunc:s7e};function l7e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.inputShape,s=r.strides,u=r.pad,l=r.dataFormat,c=r.dimRoundingMode;st([a,i],"conv2dBackpropInput");var p=T.util.computeStrides(i.shape),d=T.util.computeStrides(a.shape),f=T.backend_util.convertConv2DDataFormat(l),h=T.backend_util.computeConv2DInfo(o,i.shape,s,1,u,c,!1,f),m=new T.TensorBuffer(h.inShape,"float32"),v=m.values,g=n.data.get(a.dataId).values,y=n.data.get(i.dataId).values,w=rt(p,3),b=w[0],x=w[1],k=w[2],N=h.batchSize,E=h.filterHeight,C=h.filterWidth,R=h.inChannels,A=h.inHeight,M=h.inWidth,$=h.outChannels,z=h.outHeight,L=h.outWidth,B=h.strideHeight,W=h.strideWidth;f=h.dataFormat;for(var Y=E-1-h.padInfo.top,Q=C-1-h.padInfo.left,G=f==="channelsLast",X=m.strides[0],ie=G?m.strides[1]:m.strides[2],ae=G?m.strides[2]:1,le=G?1:m.strides[1],de=d[0],ge=G?d[1]:d[2],Ee=G?d[2]:1,he=G?1:d[1],xe=0;xe<N;++xe)for(var Ne=0;Ne<R;++Ne)for(var $e=0;$e<A;++$e)for(var pt=$e-Y,It=Math.max(0,Math.ceil(pt/B)),xt=Math.min(z,(E+pt)/B),yt=0;yt<M;++yt){for(var Et=yt-Q,Nt=Math.max(0,Math.ceil(Et/W)),dt=Math.min(L,(C+Et)/W),gt=0,mt=It;mt<xt;++mt)for(var Dn=mt*B-pt,ct=Nt;ct<dt;++ct)for(var Bt=ct*W-Et,rr=de*xe+ge*mt+Ee*ct,oa=b*(E-1-Dn)+x*(C-1-Bt)+k*Ne,mr=0;mr<$;++mr){var ar=g[rr+he*mr],_n=y[oa+mr];gt+=ar*_n}var Ra=X*xe+ie*$e+ae*yt+le*Ne;v[Ra]=gt}return n.makeTensorInfo(m.shape,m.dtype,m.values)}var c7e={kernelName:T.Conv2DBackpropInput,backendName:"cpu",kernelFunc:l7e};function p7e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations;st([a,i],"conv3d");for(var l=T.backend_util.computeConv3DInfo(a.shape,i.shape,o,u,s),c=l.filterDepth,p=l.filterHeight,d=l.filterWidth,f=l.dilationDepth,h=l.dilationHeight,m=l.dilationWidth,v=l.padInfo,g=v.front,y=v.left,w=v.top,b=new T.TensorBuffer(l.outShape,a.dtype),x=n.data.get(a.dataId).values,k=n.data.get(i.dataId).values,N=b.values,E=T.util.computeStrides(a.shape),C=T.util.computeStrides(i.shape),R=0;R<l.batchSize;++R)for(var A=R*E[0],M=R*b.strides[0],$=0;$<l.outDepth;++$)for(var z=M+$*b.strides[1],L=$*l.strideDepth-g,B=0;B<c;++B){var W=L+B*f;if(!(W<0||W>=l.inDepth))for(var Y=B*C[0],Q=A+W*E[1],G=0;G<l.outHeight;++G)for(var X=z+G*b.strides[2],ie=G*l.strideHeight-w,ae=0;ae<p;++ae){var le=ie+ae*h;if(!(le<0||le>=l.inHeight))for(var de=Y+ae*C[1],ge=Q+le*E[2],Ee=0;Ee<l.outWidth;++Ee)for(var he=X+Ee*l.outChannels,xe=Ee*l.strideWidth-y,Ne=0;Ne<d;++Ne){var $e=xe+Ne*m;if(!($e<0||$e>=l.inWidth))for(var pt=de+Ne*C[2],It=ge+$e*l.inChannels,xt=pt,yt=0;yt<l.inChannels;++yt){for(var Et=x[It+yt],Nt=0;Nt<l.outChannels;++Nt)N[he+Nt]+=Et*k[xt+Nt];xt+=l.outChannels}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}var d7e={kernelName:T.Conv3D,backendName:"cpu",kernelFunc:p7e};function f7e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.filterShape;st([a,i],"conv3dBackpropFilterV2");for(var l=T.util.computeStrides(a.shape),c=T.util.computeStrides(i.shape),p=T.backend_util.computeConv3DInfo(a.shape,u,o,1,s),d=p.strideDepth,f=p.strideHeight,h=p.strideWidth,m=p.filterDepth,v=p.filterHeight,g=p.filterWidth,y=new T.TensorBuffer(p.filterShape,"float32"),w=y.values,b=rt(y.strides,4),x=b[0],k=b[1],N=b[2],E=b[3],C=n.data.get(i.dataId).values,R=rt(c,4),A=R[0],M=R[1],$=R[2],z=R[3],L=n.data.get(a.dataId).values,B=rt(l,4),W=B[0],Y=B[1],Q=B[2],G=B[3],X=p.padInfo.front,ie=p.padInfo.left,ae=p.padInfo.top,le=0;le<m;++le)for(var de=Math.max(0,Math.ceil((X-le)/d)),ge=Math.min(p.outDepth,(p.inDepth+X-le)/d),Ee=le*x,he=0;he<v;++he)for(var xe=Math.max(0,Math.ceil((ae-he)/f)),Ne=Math.min(p.outHeight,(p.inHeight+ae-he)/f),$e=he*k+Ee,pt=0;pt<g;++pt)for(var It=Math.max(0,Math.ceil((ie-pt)/h)),xt=Math.min(p.outWidth,(p.inWidth+ie-pt)/h),yt=pt*N+$e,Et=0;Et<p.inChannels;++Et)for(var Nt=Et*E+yt,dt=0;dt<p.outChannels;++dt){for(var gt=0,mt=0;mt<p.batchSize;++mt)for(var Dn=mt*W,ct=mt*A,Bt=de;Bt<ge;++Bt)for(var rr=le+Bt*d-X,oa=rr*Y+Dn,mr=Bt*M+ct,ar=xe;ar<Ne;++ar)for(var _n=he+ar*f-ae,Ra=_n*Q+oa,sa=ar*$+mr,Oa=It;Oa<xt;++Oa){var Xn=pt+Oa*h-ie,Ss=Xn*G+Ra,Dc=Oa*z+sa;gt+=L[Ss+Et]*C[Dc+dt]}w[Nt+dt]=gt}return n.makeTensorInfo(y.shape,y.dtype,y.values)}var h7e={kernelName:T.Conv3DBackpropFilterV2,backendName:"cpu",kernelFunc:f7e};function m7e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.pad,s=r.strides,u=r.inputShape;st([a],"conv3dBackpropInputV2");for(var l=T.util.computeStrides(a.shape),c=T.util.computeStrides(i.shape),p=T.backend_util.computeConv3DInfo(u,i.shape,s,1,o),d=new T.TensorBuffer(p.inShape,"float32"),f=d.values,h=rt(d.strides,4),m=h[0],v=h[1],g=h[2],y=h[3],w=n.data.get(a.dataId).values,b=rt(l,4),x=b[0],k=b[1],N=b[2],E=b[3],C=n.data.get(i.dataId).values,R=rt(c,4),A=R[0],M=R[1],$=R[2],z=R[3],L=p.batchSize,B=p.filterDepth,W=p.filterHeight,Y=p.filterWidth,Q=p.inChannels,G=p.inDepth,X=p.inHeight,ie=p.inWidth,ae=p.outChannels,le=p.outDepth,de=p.outHeight,ge=p.outWidth,Ee=p.strideDepth,he=p.strideHeight,xe=p.strideWidth,Ne=B-1-p.padInfo.front,$e=W-1-p.padInfo.top,pt=Y-1-p.padInfo.left,It=0;It<L;++It)for(var xt=0;xt<Q;++xt)for(var yt=0;yt<G;++yt)for(var Et=yt-Ne,Nt=Math.max(0,Math.ceil(Et/Ee)),dt=Math.min(le,(B+Et)/Ee),gt=0;gt<X;++gt)for(var mt=gt-$e,Dn=Math.max(0,Math.ceil(mt/he)),ct=Math.min(de,(W+mt)/he),Bt=0;Bt<ie;++Bt){for(var rr=Bt-pt,oa=Math.max(0,Math.ceil(rr/xe)),mr=Math.min(ge,(Y+rr)/xe),ar=0,_n=Nt;_n<dt;++_n)for(var Ra=_n*Ee-Et,sa=Dn;sa<ct;++sa)for(var Oa=sa*he-mt,Xn=oa;Xn<mr;++Xn)for(var Ss=Xn*xe-rr,Dc=x*It+k*_n+N*sa+E*Xn,R1=A*(B-1-Ra)+M*(W-1-Oa)+$*(Y-1-Ss)+z*xt,ks=0;ks<ae;++ks){var al=w[Dc+ks],_c=C[R1+ks];ar+=al*_c}f[m*It+v*yt+g*gt+y*Bt+xt]=ar}return n.makeTensorInfo(d.shape,d.dtype,d.values)}var v7e={kernelName:T.Conv3DBackpropInputV2,backendName:"cpu",kernelFunc:m7e};var g7e=Zt(T.Cos,function(e){return Math.cos(e)}),y7e={kernelName:T.Cos,backendName:"cpu",kernelFunc:g7e};var b7e=Zt(T.Cosh,function(e){return Math.cosh(e)}),w7e={kernelName:T.Cosh,backendName:"cpu",kernelFunc:b7e};function x7e(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,s=r.cropSize,u=r.method,l=r.extrapolationValue,c=rt(a.shape,4),p=c[0],d=c[1],f=c[2],h=c[3],m=i.shape[0],v=rt(s,2),g=v[0],y=v[1],w=T.buffer([m,g,y,h],"float32"),b=n.data.get(i.dataId).values,x=n.data.get(o.dataId).values,k=n.data.get(a.dataId).values,N=T.util.computeStrides(a.shape),E=T.util.computeStrides(w.shape),C=0;C<m;C++){var R=C*4,A=b[R],M=b[R+1],$=b[R+2],z=b[R+3],L=x[C];if(!(L>=p))for(var B=g>1?($-A)*(d-1)/(g-1):0,W=y>1?(z-M)*(f-1)/(y-1):0,Y=0;Y<g;Y++){var Q=g>1?A*(d-1)+Y*B:.5*(A+$)*(d-1);if(Q<0||Q>d-1){for(var G=0;G<y;G++)for(var X=0;X<h;X++){var ie=X+G*E[2]+Y*E[1]+C*E[0];w.values[ie]=l}continue}if(u==="bilinear")for(var ae=Math.floor(Q),le=Math.ceil(Q),de=Q-ae,G=0;G<y;G++){var ge=y>1?M*(f-1)+G*W:.5*(M+z)*(f-1);if(ge<0||ge>f-1){for(var X=0;X<h;X++){var ie=X+G*E[2]+Y*E[1]+C*E[0];w.values[ie]=l}continue}for(var Ee=Math.floor(ge),he=Math.ceil(ge),xe=ge-Ee,X=0;X<h;X++){var ie=X+Ee*N[2]+ae*N[1]+L*N[0],Ne=k[ie];ie=X+he*N[2]+ae*N[1]+L*N[0];var $e=k[ie];ie=X+Ee*N[2]+le*N[1]+L*N[0];var pt=k[ie];ie=X+he*N[2]+le*N[1]+L*N[0];var It=k[ie],xt=Ne+($e-Ne)*xe,yt=pt+(It-pt)*xe;ie=X+G*E[2]+Y*E[1]+C*E[0],w.values[ie]=xt+(yt-xt)*de}}else for(var G=0;G<y;++G){var ge=y>1?M*(f-1)+G*W:.5*(M+z)*(f-1);if(ge<0||ge>f-1){for(var X=0;X<h;X++){var ie=X+G*E[2]+Y*E[1]+C*E[0];w.values[ie]=l}continue}for(var Et=Math.round(ge),Nt=Math.round(Q),X=0;X<h;X++){var dt=X+Et*N[2]+Nt*N[1]+L*N[0],gt=X+G*E[2]+Y*E[1]+C*E[0];w.values[gt]=k[dt]}}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}var S7e={kernelName:T.CropAndResize,backendName:"cpu",kernelFunc:x7e};function k7e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;st(a,"cumprod");var u=T.backend_util.getAxesPermutation([i],a.shape.length),l=a;u!=null&&(l=Ca({inputs:{x:a},backend:n,attrs:{perm:u}}));var c=T.backend_util.getInnerMostAxes(1,a.shape.length)[0];if(c!==l.shape.length-1)throw new Error("backend.cumprod in CPU expects an inner-most "+"axis=".concat(l.shape.length-1," but got axis=").concat(c));for(var p=T.upcastType(l.dtype,"int32"),d=T.util.makeOnesTypedArray(T.util.sizeFromShape(l.shape),p),f=n.data.get(l.dataId).values,h=l.shape[l.shape.length-1],m=s?function(N,E){return N+h-E-1}:function(N,E){return N+E},v=0;v<f.length;v+=h)for(var g=0;g<h;g++){var y=m(v,g);if(g===0)d[y]=o?1:f[y];else{var w=m(v,g-1);d[y]=o?f[w]*d[w]:f[y]*d[w]}}var b=n.makeTensorInfo(l.shape,p,d);if(u!=null){var x=T.backend_util.getUndoAxesPermutation(u),k=Ca({inputs:{x:b},backend:n,attrs:{perm:x}});return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(l),k}return b}var N7e={kernelName:T.Cumprod,backendName:"cpu",kernelFunc:k7e};function T7e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;st(a,"cumsum");var u=T.backend_util.getAxesPermutation([i],a.shape.length),l=a;u!=null&&(l=Ca({inputs:{x:a},backend:n,attrs:{perm:u}}));var c=T.backend_util.getInnerMostAxes(1,a.shape.length)[0];if(c!==l.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most "+"axis=".concat(l.shape.length-1," but got axis=").concat(c));for(var p=T.upcastType(l.dtype,"int32"),d=T.util.makeZerosTypedArray(T.util.sizeFromShape(l.shape),p),f=n.data.get(l.dataId).values,h=l.shape[l.shape.length-1],m=s?function(N,E){return N+h-E-1}:function(N,E){return N+E},v=0;v<f.length;v+=h)for(var g=0;g<h;g++){var y=m(v,g);if(g===0)d[y]=o?0:f[y];else{var w=m(v,g-1);d[y]=o?f[w]+d[w]:f[y]+d[w]}}var b=n.makeTensorInfo(l.shape,p,d);if(u!=null){var x=T.backend_util.getUndoAxesPermutation(u),k=Ca({inputs:{x:b},backend:n,attrs:{perm:x}});return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(l),k}return b}var E7e={kernelName:T.Cumsum,backendName:"cpu",kernelFunc:T7e};function I7e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=r.binaryOutput;if(a.shape.length===1){var u=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,c=D6(u,l,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}else if(a.shape.length===2){var p=n.bufferSync(a),d=n.bufferSync(i),f=zA(p,d,o,s);return n.makeTensorInfo(f.shape,i.dtype,f.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}var C7e={kernelName:T.DenseBincount,backendName:"cpu",kernelFunc:I7e};function D7e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockSize,o=r.dataFormat;T.util.assert(o==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(o)});for(var s=a.shape[0],u=a.shape[1],l=a.shape[2],c=a.shape[3],p=u*i,d=l*i,f=c/(i*i),h=n.data.get(a.dataId).values,m=new Float32Array(s*p*d*f),v=0,g=0;g<s;++g)for(var y=0;y<p;++y)for(var w=Math.floor(y/i),b=y%i,x=0;x<d;++x)for(var k=Math.floor(x/i),N=x%i,E=(b*i+N)*f,C=0;C<f;++C){var R=C+E,A=R+c*(k+l*(w+u*g));m[v++]=h[A]}return n.makeTensorInfo([s,p,d,f],a.dtype,m)}var _7e={kernelName:T.DepthToSpace,backendName:"cpu",kernelFunc:D7e};function zF(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,l=r.dimRoundingMode;st([a,i],"depthwiseConv2DNative");var c=T.util.computeStrides(a.shape),p=T.util.computeStrides(i.shape),d=u;d==null&&(d=[1,1]),T.util.assert(T.backend_util.eitherStridesOrDilationsAreOne(o,d),function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(o," and dilations '").concat(d,"'")});for(var f=T.backend_util.computeConv2DInfo(a.shape,i.shape,o,d,s,l,!0),h=f.filterHeight,m=f.filterWidth,v=f.dilationHeight,g=f.dilationWidth,y=f.padInfo,w=y.left,b=y.top,x=f.outChannels/f.inChannels,k=new T.TensorBuffer(f.outShape,a.dtype),N=n.data.get(a.dataId).values,E=n.data.get(i.dataId).values,C=k.values,R=0;R<f.batchSize;++R)for(var A=R*c[0],M=R*k.strides[0],$=0;$<f.outHeight;++$)for(var z=M+$*k.strides[1],L=$*f.strideHeight-b,B=0;B<h;++B){var W=L+B*v;if(!(W<0||W>=f.inHeight))for(var Y=B*p[0],Q=A+W*c[1],G=0;G<f.outWidth;++G)for(var X=z+G*k.strides[2],ie=G*f.strideWidth-w,ae=0;ae<m;++ae){var le=ie+ae*g;if(!(le<0||le>=f.inWidth))for(var de=Y+ae*p[1],ge=Q+le*f.inChannels,Ee=X,he=de,xe=0;xe<f.inChannels;++xe){for(var Ne=N[ge+xe],$e=0;$e<x;++$e)C[Ee+$e]+=Ne*E[he+$e];Ee+=x,he+=x}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}var A7e={kernelName:T.DepthwiseConv2dNative,backendName:"cpu",kernelFunc:zF};function F7e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.dilations,u=r.pad,l=r.dimRoundingMode,c=r.filterShape;st([a,i],"depthwiseConv2dNativeBackpropFilter");for(var p=T.backend_util.computeConv2DInfo(a.shape,c,o,s,u,l,!0),d=p.strideHeight,f=p.strideWidth,h=p.filterHeight,m=p.filterWidth,v=new T.TensorBuffer(p.filterShape,"float32"),g=p.padInfo.left,y=p.padInfo.top,w=p.outChannels/p.inChannels,b=n.data.get(a.dataId).values,x=new T.TensorBuffer(a.shape,a.dtype,b),k=n.data.get(i.dataId).values,N=new T.TensorBuffer(i.shape,i.dtype,k),E=0;E<h;++E)for(var C=Math.max(0,Math.ceil((y-E)/d)),R=Math.min(p.outHeight,(p.inHeight+y-E)/d),A=0;A<m;++A)for(var M=Math.max(0,Math.ceil((g-A)/f)),$=Math.min(p.outWidth,(p.inWidth+g-A)/f),z=0;z<p.outChannels;++z){for(var L=Math.trunc(z/w),B=z%w,W=0,Y=0;Y<p.batchSize;++Y)for(var Q=C;Q<R;++Q)for(var G=E+Q*d-y,X=M;X<$;++X){var ie=A+X*f-g;W+=x.get(Y,G,ie,L)*N.get(Y,Q,X,z)}v.set(W,E,A,L,B)}return n.makeTensorInfo(v.shape,v.dtype,v.values)}var R7e={kernelName:T.DepthwiseConv2dNativeBackpropFilter,backendName:"cpu",kernelFunc:F7e};function O7e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.strides,s=r.dilations,u=r.pad,l=r.dimRoundingMode,c=r.inputShape;st([a,i],"depthwiseConv2DNativeBackpropInput");for(var p=T.util.computeStrides(a.shape),d=T.util.computeStrides(i.shape),f=T.backend_util.computeConv2DInfo(c,i.shape,o,s,u,l,!0),h=new T.TensorBuffer(f.inShape,"float32"),m=h.values,v=rt(h.strides,3),g=v[0],y=v[1],w=v[2],b=n.data.get(a.dataId).values,x=rt(p,3),k=x[0],N=x[1],E=x[2],C=n.data.get(i.dataId).values,R=rt(d,3),A=R[0],M=R[1],$=R[2],z=f.batchSize,L=f.filterHeight,B=f.filterWidth,W=f.inChannels,Y=f.inHeight,Q=f.inWidth,G=f.outChannels,X=f.outHeight,ie=f.outWidth,ae=f.strideHeight,le=f.strideWidth,de=L-1-f.padInfo.top,ge=B-1-f.padInfo.left,Ee=G/W,he=0;he<z;++he)for(var xe=0;xe<W;++xe)for(var Ne=0;Ne<Y;++Ne)for(var $e=Ne-de,pt=Math.max(0,Math.ceil($e/ae)),It=Math.min(X,(L+$e)/ae),xt=0;xt<Q;++xt){for(var yt=xt-ge,Et=Math.max(0,Math.ceil(yt/le)),Nt=Math.min(ie,(B+yt)/le),dt=0,gt=pt;gt<It;++gt)for(var mt=gt*ae-$e,Dn=Et;Dn<Nt;++Dn)for(var ct=Dn*le-yt,Bt=k*he+N*gt+E*Dn,rr=A*(L-1-mt)+M*(B-1-ct)+$*xe,oa=0;oa<Ee;++oa){var mr=xe*Ee+oa,ar=b[Bt+mr],_n=C[rr+oa];dt+=ar*_n}m[g*he+y*Ne+w*xt+xe]=dt}return n.makeTensorInfo(h.shape,h.dtype,h.values)}var M7e={kernelName:T.DepthwiseConv2dNativeBackpropInput,backendName:"cpu",kernelFunc:O7e};function P7e(e){for(var t=e.inputs,n=e.backend,r=t.x,a=T.util.sizeFromShape(r.shape),i=n.data.get(r.dataId).values,o=T.buffer([a,a],r.dtype),s=o.values,u=0;u<i.length;u++)s[u*a+u]=i[u];var l=yi(yi([],rt(r.shape),!1),rt(r.shape),!1);return n.makeTensorInfo(l,o.dtype,o.values)}var B7e={kernelName:T.Diag,backendName:"cpu",kernelFunc:P7e};var L7e={kernelName:T.Dilation2D,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,l=n,c=l.data.get(a.dataId).values,p=a.shape.length,d=l.data.get(i.dataId).values,f=i.shape.length,h=T.backend_util.computeDilation2DInfo(a.shape,i.shape,o,s,"NHWC",u),m=h.batchSize,v=h.inHeight,g=h.inWidth,y=h.inChannels,w=h.outHeight,b=h.outWidth,x=h.padInfo,k=h.strideHeight,N=h.strideWidth,E=h.filterHeight,C=h.filterWidth,R=h.dilationHeight,A=h.dilationWidth,M=h.outShape,$=T.util.sizeFromShape(M),z=M.length,L=T.util.getArrayFromDType(a.dtype,$),B=0;B<m;++B)for(var W=0;W<w;++W)for(var Y=W*k-x.top,Q=0;Q<b;++Q)for(var G=Q*N-x.left,X=0;X<y;++X){for(var ie=Number.MIN_SAFE_INTEGER,ae=0;ae<E;++ae){var le=Y+ae*R;if(le>=0&&le<v)for(var de=0;de<C;++de){var ge=G+de*A;if(ge>=0&&ge<g){var Ee=T.util.locToIndex([B,le,ge,X],p,T.util.computeStrides(a.shape)),he=T.util.locToIndex([ae,de,X],f,T.util.computeStrides(i.shape)),xe=c[Ee]+d[he];xe>ie&&(ie=xe)}}}var Ne=T.util.locToIndex([B,W,Q,X],z,T.util.computeStrides(M));L[Ne]=ie}var $e=l.write(T.util.toTypedArray(L,a.dtype),M,a.dtype);return{dataId:$e,shape:M,dtype:a.dtype}}};var z7e={kernelName:T.Dilation2DBackpropFilter,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.dy,s=r.strides,u=r.pad,l=r.dilations,c=n,p=T.util.toNestedArray(a.shape,c.data.get(a.dataId).values),d=T.util.toNestedArray(i.shape,c.data.get(i.dataId).values),f=T.backend_util.computeDilation2DInfo(a.shape,i.shape,s,u,"NHWC",l),h=f.batchSize,m=f.inHeight,v=f.inWidth,g=f.inChannels,y=f.outHeight,w=f.outWidth,b=f.padInfo,x=f.strideHeight,k=f.strideWidth,N=f.filterHeight,E=f.filterWidth,C=f.dilationHeight,R=f.dilationWidth,A=f.outShape;T.util.assert(o.rank===A.length,function(){return"Error in ".concat(T.Dilation2DBackpropFilter,", dy ")+"must have the same rank as output ".concat(A.length,", but got ")+"".concat(o.rank)});for(var M=T.util.toNestedArray(A,c.data.get(o.dataId).values),$=T.util.makeZerosNestedTypedArray(i.shape,i.dtype),z=0;z<h;++z)for(var L=0;L<y;++L)for(var B=L*x-b.top,W=0;W<w;++W)for(var Y=W*k-b.left,Q=0;Q<g;++Q){for(var G=Number.MIN_SAFE_INTEGER,X=0,ie=0,ae=0;ae<N;++ae){var le=B+ae*C;if(le>=0&&le<m)for(var de=0;de<E;++de){var ge=Y+de*R;if(ge>=0&&ge<v){var Ee=p[z][le][ge][Q]+d[ae][de][Q];Ee>G&&(G=Ee,X=ae,ie=de)}}}$[X][ie][Q]+=M[z][L][W][Q]}var he=c.write(T.util.toTypedArray($,a.dtype),i.shape,i.dtype);return{dataId:he,shape:i.shape,dtype:i.dtype}}};var $7e={kernelName:T.Dilation2DBackpropInput,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.dy,s=r.strides,u=r.pad,l=r.dilations,c=n,p=T.util.toNestedArray(a.shape,c.data.get(a.dataId).values),d=T.util.toNestedArray(i.shape,c.data.get(i.dataId).values),f=T.backend_util.computeDilation2DInfo(a.shape,i.shape,s,u,"NHWC",l),h=f.batchSize,m=f.inHeight,v=f.inWidth,g=f.inChannels,y=f.outHeight,w=f.outWidth,b=f.padInfo,x=f.strideHeight,k=f.strideWidth,N=f.filterHeight,E=f.filterWidth,C=f.dilationHeight,R=f.dilationWidth,A=f.outShape;T.util.assert(o.rank===A.length,function(){return"Error in ".concat(T.Dilation2DBackpropInput,", dy ")+"must have the same rank as output ".concat(A.length,", but got ")+"".concat(o.rank)});for(var M=T.util.toNestedArray(A,c.data.get(o.dataId).values),$=T.util.makeZerosNestedTypedArray(a.shape,a.dtype),z=0;z<h;++z)for(var L=0;L<y;++L)for(var B=L*x-b.top,W=0;W<w;++W)for(var Y=W*k-b.left,Q=0;Q<g;++Q){for(var G=Number.MIN_SAFE_INTEGER,X=B<0?0:B,ie=Y<0?0:Y,ae=0;ae<N;++ae){var le=B+ae*C;if(le>=0&&le<m)for(var de=0;de<E;++de){var ge=Y+de*R;if(ge>=0&&ge<v){var Ee=p[z][le][ge][Q]+d[ae][de][Q];Ee>G&&(G=Ee,X=le,ie=ge)}}}$[z][X][ie][Q]+=M[z][L][W][Q]}var he=c.write(T.util.toTypedArray($,a.dtype),a.shape,a.dtype);return{dataId:he,shape:a.shape,dtype:a.dtype}}};function V7e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=r.canvas,o=r.options,s=o||{},u=s.contextOptions,l=s.imageOptions,c=l?.alpha||1,p=u?.contextType||"2d";if(p!=="2d")throw new Error("Context type ".concat(u.contextType," is not supported by the CPU backend."));var d=i.getContext(p,u?.contextAttributes||{});if(d==null)throw new Error("Could not get the context with ".concat(p," type."));for(var f=rt(a.shape.slice(0,2),2),h=f[0],m=f[1],v=a.shape.length===2?1:a.shape[2],g=n.data.get(a.dataId).values,y=a.dtype==="float32"?255:1,w=new Uint8ClampedArray(m*h*4),b=0;b<h*m;++b){for(var x=[0,0,0,255*c],k=0;k<v;k++){var N=g[b*v+k];if(a.dtype==="float32"){if(N<0||N>1)throw new Error("Tensor values for a float32 Tensor must be in the "+"range [0 - 1] but encountered ".concat(N,"."))}else if(a.dtype==="int32"&&(N<0||N>255))throw new Error("Tensor values for a int32 Tensor must be in the "+"range [0 - 255] but encountered ".concat(N,"."));v===1?(x[0]=N*y,x[1]=N*y,x[2]=N*y):x[k]=N*y}var E=b*4;w[E+0]=Math.round(x[0]),w[E+1]=Math.round(x[1]),w[E+2]=Math.round(x[2]),w[E+3]=Math.round(x[3])}i.width=m,i.height=h;var C=new ImageData(w,m,h);return d.putImageData(C,0,0),a}var W7e={kernelName:T.Draw,backendName:"cpu",kernelFunc:V7e};function Nh(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;st(a,"sum");var s;a.dtype==="bool"?s=Uu({inputs:{x:a},backend:n,attrs:{dtype:"int32"}}):s=ls({inputs:{x:a},backend:n});var u=s.shape.length,l=T.util.parseAxisParam(i,s.shape),c=T.backend_util.getAxesPermutation(l,u),p=l,d=s;c!=null&&(d=Ca({inputs:{x:s},backend:n,attrs:{perm:c}}),p=T.backend_util.getInnerMostAxes(p.length,u)),T.backend_util.assertAxesAreInnerMostDims("sum",p,d.shape.length);for(var f=rt(T.backend_util.computeOutAndReduceShapes(d.shape,p),2),h=f[0],m=f[1],v=T.backend_util.upcastType(d.dtype,"int32"),g=y0(n,h,v),y=T.util.sizeFromShape(m),w=n.data.get(g.dataId).values,b=n.data.get(d.dataId).values,x=0;x<w.length;++x){for(var k=x*y,N=0,E=0;E<y;++E)N+=b[k+E];w[x]=N}if(o){var C=T.backend_util.expandShapeToKeepDim(g.shape,l),R=g;g=ln({inputs:{x:g},backend:n,attrs:{shape:C}}),n.disposeIntermediateTensorInfo(R)}return n.disposeIntermediateTensorInfo(s),c!=null&&n.disposeIntermediateTensorInfo(d),g}var U7e={kernelName:T.Sum,backendName:"cpu",kernelFunc:Nh};function G7e(e){var t,n,r,a,i=e.inputs,o=e.backend,s=e.attrs,u=s.equation,l=i,c=T.backend_util.decodeEinsumEquation(u,l.length),p=c.allDims,d=c.summedDims,f=c.idDims;T.backend_util.checkEinsumDimSizes(p.length,f,l);for(var h=T.backend_util.getEinsumComputePath(d,f),m=h.path,v=h.steps,g=v.length,y=null,w=p.length,b=[],x=0;x<g;++x){try{for(var k=(t=void 0,Lp(v[x])),N=k.next();!N.done;N=k.next()){var E=N.value,C=T.backend_util.getEinsumPermutation(w,f[E]),R=C.permutationIndices,A=C.expandDims,M=void 0;T.backend_util.isIdentityPermutation(R)?M=l[E]:(M=Ca({inputs:{x:l[E]},backend:o,attrs:{perm:R}}),b.push(M));for(var $=M.shape.slice(),z=0;z<A.length;++z)$.splice(A[z],0,1);T.util.arraysEqual(M.shape,$)||(M=ln({inputs:{x:M},backend:o,attrs:{shape:$}}),b.push(M)),y===null?y=M:(y=S0({inputs:{a:M,b:y},backend:o}),b.push(y))}}catch(Y){t={error:Y}}finally{try{N&&!N.done&&(n=k.return)&&n.call(k)}finally{if(t)throw t.error}}x<g-1&&(m[x]>=0&&(y=Nh({inputs:{x:y},backend:o,attrs:{axis:m[x]-(p.length-w),keepDims:!1}}),b.push(y)),w--)}try{for(var L=Lp(b),B=L.next();!B.done;B=L.next()){var W=B.value;W!==y&&o.disposeIntermediateTensorInfo(W)}}catch(Y){r={error:Y}}finally{try{B&&!B.done&&(a=L.return)&&a.call(L)}finally{if(r)throw r.error}}return y}var q7e={kernelName:T.Einsum,backendName:"cpu",kernelFunc:G7e};function H7e(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y;st([r,a],"eluGrad");for(var i=new Float32Array(T.util.sizeFromShape(a.shape)),o=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values,u=0;u<o.length;++u){var l=o[u];l>=0?i[u]=s[u]:i[u]=s[u]*(l+1)}return n.makeTensorInfo(a.shape,"float32",i)}var j7e={kernelName:T.EluGrad,backendName:"cpu",kernelFunc:H7e};var K7e=T.backend_util.ERF_P,X7e=T.backend_util.ERF_A1,Y7e=T.backend_util.ERF_A2,J7e=T.backend_util.ERF_A3,Z7e=T.backend_util.ERF_A4,Q7e=T.backend_util.ERF_A5,exe=Zt(T.Erf,function(e){var t=Math.sign(e),n=Math.abs(e),r=1/(1+K7e*n);return t*(1-((((Q7e*r+Z7e)*r+J7e)*r+Y7e)*r+X7e)*r*Math.exp(-n*n))}),txe={kernelName:T.Erf,backendName:"cpu",kernelFunc:exe};function w0(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.input,i=r.dim,o=a.shape.length,s=a.shape.slice(),u=i;return i<0&&(T.util.assert(-(o+1)<=i,function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")}),u=o+i+1),s.splice(u,0,1),ln({inputs:{x:a},backend:n,attrs:{shape:s}})}var nxe={kernelName:T.ExpandDims,backendName:"cpu",kernelFunc:w0};var rxe=pr(function(e,t){return e/t}),M6=Ir(T.RealDiv,rxe),T6={kernelName:T.RealDiv,backendName:"cpu",kernelFunc:M6};function $F(e,t,n){for(var r=e.shape,a=r[0],i=r[1],o=n.data.get(e.dataId),s=o.complexTensorInfos.real,u=o.complexTensorInfos.imag,l=[a,i],c=T.util.sizeFromShape(l),p=T.util.getTypedArrayFromDType("float32",c),d=T.util.getTypedArrayFromDType("float32",c),f=0;f<a;f++){for(var h=sc({inputs:{x:s},backend:n,attrs:{begin:[f,0],size:[1,i]}}),m=sc({inputs:{x:u},backend:n,attrs:{begin:[f,0],size:[1,i]}}),v=ni({inputs:{real:h,imag:m},backend:n}),g=axe(v,t,n),y=g.real,w=g.imag,b=T.backend_util.mergeRealAndImagArrays(y,w),x=0;x<i;x++){var k=T.backend_util.getComplexWithIndex(b,x);p[f*i+x]=k.real,d[f*i+x]=k.imag}n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v)}var N=n.makeTensorInfo(l,"float32",p),E=n.makeTensorInfo(l,"float32",d),C=ni({inputs:{real:N,imag:E},backend:n});return n.disposeIntermediateTensorInfo(N),n.disposeIntermediateTensorInfo(E),C}function axe(e,t,n){var r=T.util.sizeFromShape(e.shape),a=n.data.get(e.dataId),i=n.data.get(a.complexTensorInfos.real.dataId).values,o=n.data.get(a.complexTensorInfos.imag.dataId).values;if(ixe(r)){var s=E6(i,o,r,t,n),u=[e.shape[0],e.shape[1]];if(t){var l=n.makeTensorInfo(u,"float32",s.real),c=n.makeTensorInfo(u,"float32",s.imag),p=n.makeTensorInfo([],"float32",T.util.createScalarValue(r,"float32")),d=ls({inputs:{x:p},backend:n}),f=T6.kernelFunc({inputs:{a:l,b:p},backend:n}),h=T6.kernelFunc({inputs:{a:c,b:d},backend:n}),m=n.data.get(f.dataId).values,v=n.data.get(h.dataId).values;return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),{real:m,imag:v}}return s}else{var g=T.backend_util.mergeRealAndImagArrays(i,o),y=oxe(g,r,t);return T.backend_util.splitRealAndImagArrays(y)}}function ixe(e){return(e&e-1)===0}function E6(e,t,n,r,a){if(n===1)return{real:e,imag:t};var i=T.backend_util.mergeRealAndImagArrays(e,t),o=n/2,s=T.backend_util.complexWithEvenIndex(i),u=s.real,l=s.imag,c=[u.length],p=a.makeTensorInfo(c,"float32",u),d=a.makeTensorInfo(c,"float32",l),f=ni({inputs:{real:p,imag:d},backend:a}),h=T.backend_util.complexWithOddIndex(i),m=h.real,v=h.imag,g=[m.length],y=a.makeTensorInfo(g,"float32",m),w=a.makeTensorInfo(g,"float32",v),b=ni({inputs:{real:y,imag:w},backend:a}),x=E6(u,l,o,r,a),k=x.real,N=x.imag,E=[k.length],C=a.makeTensorInfo(E,"float32",k),R=a.makeTensorInfo(E,"float32",N),A=ni({inputs:{real:C,imag:R},backend:a}),M=E6(m,v,o,r,a),$=M.real,z=M.imag,L=[$.length],B=a.makeTensorInfo(L,"float32",$),W=a.makeTensorInfo(L,"float32",z),Y=ni({inputs:{real:B,imag:W},backend:a}),Q=T.backend_util.exponents(n,r),G=[Q.real.length],X=a.makeTensorInfo(G,"float32",Q.real),ie=a.makeTensorInfo(G,"float32",Q.imag),ae=ni({inputs:{real:X,imag:ie},backend:a}),le=S0({inputs:{a:ae,b:Y},backend:a}),de=zp({inputs:{a:A,b:le},backend:a}),ge=R6({inputs:{a:A,b:le},backend:a}),Ee=oc({inputs:{input:de},backend:a}),he=oc({inputs:{input:ge},backend:a}),xe=$p({inputs:{input:de},backend:a}),Ne=$p({inputs:{input:ge},backend:a}),$e=Vp({inputs:[Ee,he],backend:a,attrs:{axis:0}}),pt=Vp({inputs:[xe,Ne],backend:a,attrs:{axis:0}}),It=a.data.get($e.dataId).values,xt=a.data.get(pt.dataId).values;return a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(f),a.disposeIntermediateTensorInfo(y),a.disposeIntermediateTensorInfo(w),a.disposeIntermediateTensorInfo(b),a.disposeIntermediateTensorInfo(C),a.disposeIntermediateTensorInfo(R),a.disposeIntermediateTensorInfo(A),a.disposeIntermediateTensorInfo(B),a.disposeIntermediateTensorInfo(W),a.disposeIntermediateTensorInfo(Y),a.disposeIntermediateTensorInfo(X),a.disposeIntermediateTensorInfo(ie),a.disposeIntermediateTensorInfo(ae),a.disposeIntermediateTensorInfo(le),a.disposeIntermediateTensorInfo(de),a.disposeIntermediateTensorInfo(ge),a.disposeIntermediateTensorInfo(Ee),a.disposeIntermediateTensorInfo(xe),a.disposeIntermediateTensorInfo(he),a.disposeIntermediateTensorInfo(Ne),a.disposeIntermediateTensorInfo($e),a.disposeIntermediateTensorInfo(pt),{real:It,imag:xt}}function oxe(e,t,n){for(var r=new Float32Array(t*2),a=0;a<t;a++){for(var i=0,o=0,s=0;s<t;s++){var u=T.backend_util.exponent(a*s,t,n),l=T.backend_util.getComplexWithIndex(e,s);i+=l.real*u.real-l.imag*u.imag,o+=l.real*u.imag+l.imag*u.real}n&&(i/=t,o/=t),T.backend_util.assignToTypedArray(r,i,o,a)}return r}function sxe(e){var t=e.inputs,n=e.backend,r=t.input,a=T.util.sizeFromShape(r.shape),i=r.shape[r.shape.length-1],o=a/i,s=ln({inputs:{x:r},backend:n,attrs:{shape:[o,i]}}),u=$F(s,!1,n),l=ln({inputs:{x:u},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(u),l}var uxe={kernelName:T.FFT,backendName:"cpu",kernelFunc:sxe};function P6(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,i=n.dtype,o=i||T.util.inferDtype(a),s=T.util.getArrayFromDType(o,T.util.sizeFromShape(r));return cxe(s,a,o),t.makeTensorInfo(r,o,s)}var lxe={kernelName:T.Fill,backendName:"cpu",kernelFunc:P6};function cxe(e,t,n){e.fill(t)}var pxe={kernelName:T.FlipLeftRight,backendName:"cpu",kernelFunc:function(e){var t=e.inputs;e.attrs;for(var n=e.backend,r=t.image,a=n,i=T.util.getTypedArrayFromDType(r.dtype,T.util.sizeFromShape(r.shape)),o=rt(r.shape,4),s=o[0],u=o[1],l=o[2],c=o[3],p=a.data.get(r.dataId).values,d=0;d<s;d++)for(var f=d*l*u*c,h=0;h<u;h++)for(var m=h*(l*c),v=0;v<l;v++)for(var g=v*c,y=0;y<c;y++){var w=Math.round(l-v-1),b=f+m+g+y,x=p[b];if(w>=0&&w<l){var k=w*c,N=f+m+k+y;x=p[N]}i[b]=x}var E=a.write(i,r.shape,r.dtype);return{dataId:E,shape:r.shape,dtype:r.dtype}}};function dxe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,l=r.pad,c=r.dataFormat,p=r.dilations,d=r.dimRoundingMode,f=r.activation,h=r.leakyreluAlpha,m=LF({inputs:{x:a,filter:i},backend:n,attrs:{strides:u,pad:l,dataFormat:c,dilations:p,dimRoundingMode:d}});if(o){var v=m;if(c==="NCHW"&&o.shape.length===1&&o.shape[0]!==1){var g=ln({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});m=zp({inputs:{a:m,b:g},backend:n}),n.disposeIntermediateTensorInfo(g)}else m=zp({inputs:{a:m,b:o},backend:n});n.disposeIntermediateTensorInfo(v)}if(f){var v=m;if(c==="NCHW"&&f==="prelu"&&s.shape.length===1&&s.shape[0]!==1){var y=ln({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});m=b0(n,m,f,y,h),n.disposeIntermediateTensorInfo(y)}else m=b0(n,m,f,s,h);n.disposeIntermediateTensorInfo(v)}return m}var fxe={kernelName:T.FusedConv2D,backendName:"cpu",kernelFunc:dxe};function hxe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,l=r.pad,c=r.dataFormat,p=r.dilations,d=r.dimRoundingMode,f=r.activation,h=r.leakyreluAlpha,m=zF({inputs:{x:a,filter:i},backend:n,attrs:{strides:u,pad:l,dataFormat:c,dilations:p,dimRoundingMode:d}});if(o){var v=m;m=zp({inputs:{a:m,b:o},backend:n}),n.disposeIntermediateTensorInfo(v)}if(f){var v=m;m=b0(n,m,f,s,h),n.disposeIntermediateTensorInfo(v)}return m}var mxe={kernelName:T.FusedDepthwiseConv2D,backendName:"cpu",kernelFunc:hxe};function vxe(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,i=T.util.sizeFromShape(r.shape),o=a.shape,s=o[o.length-1],u=rt(T.backend_util.prepareAndValidate(r,a),4),l=u[0],c=u[1],p=u[2],d=u[3];if(c===0)return n.makeTensorInfo(l,r.dtype,[]);var f=n.data.get(a.dataId).values,h=n.bufferSync(r),m=YA(f,h,r.dtype,c,s,p,d,r.shape,i);return n.makeTensorInfo(l,r.dtype,m.values)}var gxe={kernelName:T.GatherNd,backendName:"cpu",kernelFunc:vxe};function yxe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.indices,o=r.axis,s=r.batchDims;st([a,i],"gatherV2");for(var u=T.util.parseAxisParam(o,a.shape)[0],l=n.data.get(i.dataId).values,c=a.shape[u],p=function(k){var N=l[k];T.util.assert(N<=c-1&&N>=0,function(){return"GatherV2: the index value ".concat(N," is not in [0, ").concat(c-1,"]")})},d=0;d<l.length;++d)p(d);var f=s;s==null&&(f=0);var h=T.util.sizeFromShape(i.shape),m=T.backend_util.segment_util.collectGatherOpShapeInfo(a,i,u,f),v=ln({inputs:{x:a},backend:n,attrs:{shape:[m.batchSize,m.outerSize,m.dimSize,m.sliceSize]}}),g=ln({inputs:{x:i},backend:n,attrs:{shape:[m.batchSize,h/m.batchSize]}}),y=[m.batchSize,m.outerSize,h/m.batchSize,m.sliceSize],w=n.bufferSync(g),b=n.bufferSync(v),x=JA(b,w,y);return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),n.makeTensorInfo(m.outputShape,x.dtype,x.values)}var bxe={kernelName:T.GatherV2,backendName:"cpu",kernelFunc:yxe};function wxe(e){var t=e.inputs,n=e.backend,r=t.input,a=T.util.sizeFromShape(r.shape),i=r.shape[r.shape.length-1],o=a/i,s=ln({inputs:{x:r},backend:n,attrs:{shape:[o,i]}}),u=$F(s,!0,n),l=ln({inputs:{x:u},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(u),l}var xxe={kernelName:T.IFFT,backendName:"cpu",kernelFunc:wxe};var Sxe=Zt(T.IsFinite,function(e){return Number.isFinite(e)?1:0},"bool"),kxe={kernelName:T.IsFinite,backendName:"cpu",kernelFunc:Sxe};var Nxe=Zt(T.IsInf,function(e){return Math.abs(e)===1/0?1:0},"bool"),Txe={kernelName:T.IsInf,backendName:"cpu",kernelFunc:Nxe};var Exe=Zt(T.IsNan,function(e){return Number.isNaN(e)?1:0},"bool"),Ixe={kernelName:T.IsNan,backendName:"cpu",kernelFunc:Exe};function Cxe(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.num,o=nF(r,a,i);return t.makeTensorInfo([o.length],"float32",o)}var Dxe={kernelName:T.LinSpace,backendName:"cpu",kernelFunc:Cxe};var _xe=Zt(T.Log1p,function(e){return Math.log1p(e)}),Axe={kernelName:T.Log1p,backendName:"cpu",kernelFunc:_xe};var Fxe=pr(function(e,t){return e&&t}),Rxe=Ir(T.LogicalAnd,Fxe,null,"bool"),Oxe={kernelName:T.LogicalAnd,backendName:"cpu",kernelFunc:Rxe};var Mxe=Zt(T.LogicalNot,function(e){return e?0:1},"bool"),Pxe={kernelName:T.LogicalNot,backendName:"cpu",kernelFunc:Mxe};var Bxe=pr(function(e,t){return e||t}),Lxe=Ir(T.LogicalOr,Bxe,null,"bool"),zxe={kernelName:T.LogicalOr,backendName:"cpu",kernelFunc:Lxe};function $xe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.depthRadius,o=r.bias,s=r.alpha,u=r.beta;st(a,"LRN");var l=a.shape[3],c=l-1,p=n.data.get(a.dataId).values,d=T.util.sizeFromShape(a.shape),f=new Float32Array(d);function h(y){for(var w=y%l,b=y-w+Math.max(0,w-i),x=y-w+Math.min(w+i,c),k=0;b<=x;b++){var N=p[b];k+=N*N}return k}for(var m=0;m<d;m++){var v=h(m),g=p[m]*Math.pow(o+s*v,-u);f[m]=g}return n.makeTensorInfo(a.shape,a.dtype,f)}var Vxe={kernelName:T.LRN,backendName:"cpu",kernelFunc:$xe};function Wxe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.y,o=t.dy,s=r.depthRadius,u=r.bias,l=r.alpha,c=r.beta;st(o,"LRNGrad");for(var p=T.util.sizeFromShape(o.shape),d=o.shape[3],f=n.data.get(o.dataId).values,h=n.data.get(a.dataId).values,m=n.data.get(i.dataId).values,v=new Float32Array(p),g=p,y=0;y<g;y++){for(var w=y%d,b=y-w+Math.max(0,w-s),x=y-w+Math.min(d,w+s+1),k=0,N=b;N<x;N++)k+=Math.pow(h[N],2);k=l*k+u;for(var N=b;N<x;N++){var E=-2*l*c*h[N]*m[y]/k;y===N&&(E+=Math.pow(k,-c)),E*=f[y],v[N]+=E}}return n.makeTensorInfo(o.shape,a.dtype,v)}var Uxe={kernelName:T.LRNGrad,backendName:"cpu",kernelFunc:Wxe};function VF(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reductionIndices,o=r.keepDims,s=n,u=a.shape,l=u.length,c=T.util.parseAxisParam(i,u),p=c,d=T.backend_util.getAxesPermutation(p,l),f=s.data.get(a.dataId).values;if(d!=null){for(var h=new Array(l),m=0;m<h.length;m++)h[m]=u[d[m]];f=A6(f,u,a.dtype,d,h),p=T.backend_util.getInnerMostAxes(p.length,l),u=h}st(a,"max"),T.backend_util.assertAxesAreInnerMostDims("max",p,l);var v=rt(T.backend_util.computeOutAndReduceShapes(u,p),2),g=v[0],y=v[1],w=T.util.sizeFromShape(y),b=aF(f,w,g,a.dtype),x=s.write(b,g,a.dtype),k=g;if(o){var h=T.backend_util.expandShapeToKeepDim(g,c);k=h}return{dataId:x,shape:k,dtype:a.dtype}}var Gxe={kernelName:T.Max,backendName:"cpu",kernelFunc:VF};function qxe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;st(a,"maxPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,l=1;T.util.assert(T.backend_util.eitherStridesOrDilationsAreOne(o,l),function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(l,"'")});var c=T.backend_util.computePool2DInfo(a.shape,i,o,l,s,u),p;if(c.filterWidth===1&&c.filterHeight===1&&T.util.arraysEqual(c.inShape,c.outShape))p=ls({inputs:{x:a},backend:n});else{var d=n.data.get(a.dataId).values,f=T.util.computeStrides(a.shape),h=O6(d,a.shape,a.dtype,f,c,"max");p=n.makeTensorInfo(c.outShape,a.dtype,h.values)}return p}var Hxe={kernelName:T.MaxPool,backendName:"cpu",kernelFunc:qxe};function jxe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,l=r.dataFormat;st(a,"maxPool3d");var c=T.backend_util.computePool3DInfo(a.shape,i,o,1,s,u,l),p=n.data.get(a.dataId).values,d=BF(p,a.shape,a.dtype,T.util.computeStrides(a.shape),c,"max");return n.makeTensorInfo(d.shape,"float32",d.values)}var Kxe={kernelName:T.MaxPool3D,backendName:"cpu",kernelFunc:jxe};function Xxe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,l=r.dimRoundingMode;st([a,i],"maxPool3DGrad");for(var c=T.backend_util.computePool3DInfo(i.shape,o,s,1,u,l),p=n.bufferSync(i),d=B9e(p,c),f=c.strideDepth,h=c.strideHeight,m=c.strideWidth,v=c.dilationDepth,g=c.dilationHeight,y=c.dilationWidth,w=c.effectiveFilterDepth,b=c.effectiveFilterHeight,x=c.effectiveFilterWidth,k=w-1-c.padInfo.front,N=x-1-c.padInfo.left,E=b-1-c.padInfo.top,C=T.buffer(i.shape,"float32"),R=n.bufferSync(a),A=0;A<c.batchSize;++A)for(var M=0;M<c.inChannels;++M)for(var $=0;$<c.inDepth;++$)for(var z=0;z<c.inHeight;++z)for(var L=0;L<c.inWidth;++L){for(var B=$-k,W=z-E,Y=L-N,Q=0,G=0;G<w;G+=v){var X=(B+G)/f;if(!(X<0||X>=c.outDepth||Math.floor(X)!==X))for(var ie=0;ie<b;ie+=g){var ae=(W+ie)/h;if(!(ae<0||ae>=c.outHeight||Math.floor(ae)!==ae))for(var le=0;le<x;le+=y){var de=(Y+le)/m;if(!(de<0||de>=c.outWidth||Math.floor(de)!==de)){var ge=w*b*x-1-d.get(A,X,ae,de,M),Ee=G*b*x+ie*x+le,he=ge===Ee?1:0;if(he!==0){var xe=R.get(A,X,ae,de,M);Q+=xe*he}}}}}C.set(Q,A,$,z,L,M)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}var Yxe={kernelName:T.MaxPool3DGrad,backendName:"cpu",kernelFunc:Xxe};function Jxe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=t.output,s=i;st([i,o],"maxPoolGrad");for(var u=r.filterSize,l=r.strides,c=r.pad,p=r.dimRoundingMode,d=T.backend_util.computePool2DInfo(s.shape,u,l,1,c,p),f=n.data.get(s.dataId).values,h=T.buffer(d.outShape,s.dtype,PF(f,s.shape,s.dtype,d).values),m=d.strideHeight,v=d.strideWidth,g=d.dilationHeight,y=d.dilationWidth,w=d.effectiveFilterHeight,b=d.effectiveFilterWidth,x=b-1-d.padInfo.left,k=w-1-d.padInfo.top,N=T.buffer(s.shape,"float32"),E=n.data.get(a.dataId).values,C=T.buffer(a.shape,"float32",E),R=0;R<d.batchSize;++R)for(var A=0;A<d.inChannels;++A)for(var M=0;M<d.inHeight;++M)for(var $=0;$<d.inWidth;++$){for(var z=M-k,L=$-x,B=0,W=0;W<w;W+=g){var Y=(z+W)/m;if(!(Y<0||Y>=d.outHeight||Math.floor(Y)!==Y))for(var Q=0;Q<b;Q+=y){var G=(L+Q)/v;if(!(G<0||G>=d.outWidth||Math.floor(G)!==G)){var X=w*b-1-h.get(R,Y,G,A),ie=W*b+Q,ae=X===ie?1:0;if(ae!==0){var le=C.get(R,Y,G,A);B+=le*ae}}}}N.set(B,R,M,$,A)}return n.makeTensorInfo(N.shape,N.dtype,N.values)}var Zxe={kernelName:T.MaxPoolGrad,backendName:"cpu",kernelFunc:Jxe};function Qxe(e,t,n,r,a){var i=T.util.computeStrides(t),o=O6(e,t,n,i,a,"max"),s=PF(e,t,n,a,!0,r);return[o.values,s.values]}var eSe={kernelName:T.MaxPoolWithArgmax,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.filterSize,o=n.strides,s=n.pad,u=n.includeBatchInIndex,l=r;st(a,"MaxPoolWithArgmax");var c=l.data.get(a.dataId).values,p=T.backend_util.computePool2DInfo(a.shape,i,o,[1,1],s),d=rt(Qxe(c,a.shape,a.dtype,u,p),2),f=d[0],h=d[1],m=l.write(f,p.outShape,a.dtype),v=l.write(h,p.outShape,a.dtype);return[{dataId:m,shape:p.outShape,dtype:a.dtype},{dataId:v,shape:p.outShape,dtype:"int32"}]}};function tSe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=T.util.parseAxisParam(i,a.shape),u=T.backend_util.computeOutAndReduceShapes(a.shape,s),l=u[1],c=T.util.sizeFromShape(l),p=[],d=n.makeTensorInfo([],"float32",new Float32Array([c]));p.push(d);var f=Uu({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});p.push(f);var h=M6({inputs:{a:f,b:d},backend:n});p.push(h);var m=Nh({inputs:{x:h},backend:n,attrs:{axis:i,keepDims:o}});return p.forEach(function(v){return n.disposeIntermediateTensorInfo(v)}),m}var nSe={kernelName:T.Mean,backendName:"cpu",kernelFunc:tSe};function rSe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;st(a,"min");var s=T.util.parseAxisParam(i,a.shape),u=s,l=T.backend_util.getAxesPermutation(u,a.shape.length),c=a;l!=null&&(c=Ca({inputs:{x:a},backend:n,attrs:{perm:l}}),u=T.backend_util.getInnerMostAxes(u.length,a.shape.length)),T.backend_util.assertAxesAreInnerMostDims("min",u,c.shape.length);for(var p=rt(T.backend_util.computeOutAndReduceShapes(c.shape,u),2),d=p[0],f=p[1],h=T.util.sizeFromShape(f),m=T.util.makeZerosTypedArray(T.util.sizeFromShape(d),c.dtype),v=n.data.get(c.dataId).values,g=0;g<m.length;++g){for(var y=g*h,w=v[y],b=0;b<h;++b){var x=v[y+b];(Number.isNaN(x)||x<w)&&(w=x)}m[g]=w}l!=null&&n.disposeIntermediateTensorInfo(c);var k=n.makeTensorInfo(d,c.dtype,m);if(o){var N=T.backend_util.expandShapeToKeepDim(d,s),E=ln({inputs:{x:k},backend:n,attrs:{shape:N}});return n.disposeIntermediateTensorInfo(k),E}return k}var aSe={kernelName:T.Min,backendName:"cpu",kernelFunc:rSe};function iSe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.mode;st(a,"mirrorPad");for(var s=i.map(function(N,E){return N[0]+a.shape[E]+N[1]}),u=i.map(function(N){return N[0]}),l=i.map(function(N,E){return N[0]+a.shape[E]}),c=o==="reflect"?0:1,p=n.data.get(a.dataId).values,d=a.shape.length,f=T.util.computeStrides(a.shape),h=T.util.sizeFromShape(s),m=s.length,v=T.util.computeStrides(s),g=T.util.getTypedArrayFromDType(a.dtype,h),y=0;y<h;y++){for(var w=T.util.indexToLoc(y,m,v),b=0;b<m;b++)w[b]<u[b]?w[b]=u[b]*2-w[b]-c:w[b]>=l[b]&&(w[b]=(l[b]-1)*2-w[b]+c);w=w.map(function(N,E){return N-u[E]});var x=T.util.locToIndex(w,d,f);g[y]=p[x]}var k=n.write(g,s,a.dtype);return{dataId:k,shape:s,dtype:a.dtype}}var oSe={kernelName:T.MirrorPad,backendName:"cpu",kernelFunc:iSe};var sSe=pr(function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}),uSe=Ir(T.Mod,sSe),lSe={kernelName:T.Mod,backendName:"cpu",kernelFunc:uSe};function WF(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.dim,o=a.shape.length,s=i;if(s===-1&&(s=o-1),s!==o-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(o," and dim was ").concat(s));var u=T.util.parseAxisParam([s],a.shape),l=VF({inputs:{x:a},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),c=T.backend_util.expandShapeToKeepDim(l.shape,u),p=ln({inputs:{x:l},backend:n,attrs:{shape:c}}),d=R6({inputs:{a,b:p},backend:n}),f=HA({inputs:{x:d},backend:n}),h=Nh({inputs:{x:f},backend:n,attrs:{axis:u,keepDims:!1}}),m=ln({inputs:{x:h},backend:n,attrs:{shape:c}}),v=M6({inputs:{a:f,b:m},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),v}var cSe={kernelName:T.Softmax,backendName:"cpu",kernelFunc:WF};function pSe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.numSamples,o=r.seed,s=r.normalized;st(a,"multinomial");for(var u=s?a:WF({inputs:{logits:a},backend:n,attrs:{dim:-1}}),l=u.shape[0],c=u.shape[1],p=n.data.get(u.dataId).values,d=[l,i],f=T.util.makeZerosTypedArray(T.util.sizeFromShape(d),"int32"),h=0;h<l;++h){var m=h*c,v=new Float32Array(c-1);v[0]=p[m];for(var g=1;g<v.length;++g)v[g]=v[g-1]+p[m+g];for(var y=z5e.alea(o.toString()),w=h*i,b=0;b<i;++b){var x=y();f[w+b]=v.length;for(var g=0;g<v.length;g++)if(x<v[g]){f[w+b]=g;break}}}return s||n.disposeIntermediateTensorInfo(u),n.makeTensorInfo(d,"int32",f)}var dSe={kernelName:T.Multinomial,backendName:"cpu",kernelFunc:pSe};var fSe=T.kernel_impls.nonMaxSuppressionV3Impl;function hSe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold;st(a,"NonMaxSuppression");var l=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,p=fSe(l,c,o,s,u).selectedIndices;return n.makeTensorInfo([p.length],"int32",new Int32Array(p))}var mSe={kernelName:T.NonMaxSuppressionV3,backendName:"cpu",kernelFunc:hSe};var vSe=T.kernel_impls.nonMaxSuppressionV4Impl;function gSe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=r.padToMaxOutputSize;st(a,"NonMaxSuppressionPadded");var c=n.data.get(a.dataId).values,p=n.data.get(i.dataId).values,d=vSe(c,p,o,s,u,l),f=d.selectedIndices,h=d.validOutputs;return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}var ySe={kernelName:T.NonMaxSuppressionV4,backendName:"cpu",kernelFunc:gSe};var bSe=T.kernel_impls.nonMaxSuppressionV5Impl;function wSe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=r.softNmsSigma;st(a,"NonMaxSuppressionWithScore");var c=n.data.get(a.dataId).values,p=n.data.get(i.dataId).values,d=o,f=s,h=u,m=l,v=bSe(c,p,d,f,h,m),g=v.selectedIndices,y=v.selectedScores;return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}var xSe={kernelName:T.NonMaxSuppressionV5,backendName:"cpu",kernelFunc:wSe};function SSe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.dtype,o=r.depth,s=r.onValue,u=r.offValue;st(a,"oneHot");var l=T.util.sizeFromShape(a.shape),c=new Float32Array(l*o);c.fill(u);for(var p=n.data.get(a.dataId).values,d=0;d<l;++d)p[d]>=0&&p[d]<o&&(c[d*o+p[d]]=s);return n.makeTensorInfo(yi(yi([],rt(a.shape),!1),[o],!1),i,c)}var kSe={kernelName:T.OneHot,backendName:"cpu",kernelFunc:SSe};function x0(e){var t=e.inputs,n=e.backend,r=t.x;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){var a=oc({inputs:{input:r},backend:n}),i=x0({inputs:{x:a},backend:n}),o=$p({inputs:{input:r},backend:n}),s=x0({inputs:{x:o},backend:n}),u=ni({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}else return P6({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var NSe={kernelName:T.ZerosLike,backendName:"cpu",kernelFunc:x0};function UF(e){var t=e.inputs,n=e.backend,r=t.x;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){var a=oc({inputs:{input:r},backend:n}),i=UF({inputs:{x:a},backend:n}),o=$p({inputs:{input:r},backend:n}),s=x0({inputs:{x:o},backend:n}),u=ni({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}else return P6({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}var TSe={kernelName:T.OnesLike,backendName:"cpu",kernelFunc:UF};function GF(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.axis;if(t.length===1)return w0({inputs:{input:t[0]},backend:n,attrs:{dim:a}});var i=t[0].shape,o=t[0].dtype;t.forEach(function(c){T.util.assertShapesMatch(i,c.shape,"All tensors passed to stack must have matching shapes"),T.util.assert(o===c.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var s=[],u=t.map(function(c){var p=w0({inputs:{input:c},backend:n,attrs:{dim:a}});return s.push(p),p}),l=Vp({inputs:u,backend:n,attrs:{axis:a}});return s.forEach(function(c){return n.disposeIntermediateTensorInfo(c)}),l}var ESe={kernelName:T.Pack,backendName:"cpu",kernelFunc:GF};function ISe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.constantValue;st(a,"pad");var s=i.map(function(k,N){return k[0]+a.shape[N]+k[1]}),u=i.map(function(k){return k[0]}),l=n.data.get(a.dataId).values,c=T.util.sizeFromShape(a.shape),p=a.shape.length,d=T.util.computeStrides(a.shape),f=T.util.sizeFromShape(s),h=s.length,m=T.util.computeStrides(s),v=T.util.getTypedArrayFromDType(a.dtype,f);o!==0&&v.fill(o);for(var g=0;g<c;g++){var y=T.util.indexToLoc(g,p,d),w=y.map(function(k,N){return k+u[N]}),b=T.util.locToIndex(w,h,m);v[b]=l[g]}var x=n.write(v,s,a.dtype);return{dataId:x,shape:s,dtype:a.dtype}}var qF={kernelName:T.PadV2,backendName:"cpu",kernelFunc:ISe};var CSe=pr(function(e,t){return Math.pow(e,t)}),DSe=Ir(T.Pow,CSe),_Se={kernelName:T.Pow,backendName:"cpu",kernelFunc:DSe};function ASe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.paramsNestedSplits,i=t.paramsDenseValues,o=t.indices;r.outputRaggedRank;var s=a.map(function(g){return n.data.get(g.dataId).values}),u=a.map(function(g){return g.shape}),l=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values,p=rt(cF(s,u,l,i.shape,i.dtype,c,o.shape),3),d=p[0],f=p[1],h=p[2],m=d.map(function(g){return n.makeTensorInfo([g.length],"int32",g)}),v=n.makeTensorInfo(h,i.dtype,f);return m.concat([v])}var FSe={kernelName:T.RaggedGather,backendName:"cpu",kernelFunc:ASe};function RSe(e){var t=e.inputs,n=e.backend,r=t.starts,a=t.limits,i=t.deltas,o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,l=rt(pF(o,r.shape,r.dtype,s,a.shape,u,i.shape),2),c=l[0],p=l[1],d=n.makeTensorInfo([c.length],"int32",c),f=n.makeTensorInfo([p.length],r.dtype,p);return[d,f]}var OSe={kernelName:T.RaggedRange,backendName:"cpu",kernelFunc:RSe};function MSe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.shape,i=t.values,o=t.defaultValue,s=t.rowPartitionTensors,u=r.rowPartitionTypes,l=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,p=n.data.get(o.dataId).values,d=s.map(function(g){return n.data.get(g.dataId).values}),f=s.map(function(g){return g.shape}),h=rt(dF(l,a.shape,c,i.shape,i.dtype,p,o.shape,d,f,u),2),m=h[0],v=h[1];return n.makeTensorInfo(m,i.dtype,v)}var PSe={kernelName:T.RaggedTensorToTensor,backendName:"cpu",kernelFunc:MSe};function BSe(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.dtype,o=n.step,s=fF(r,a,o,i);return t.makeTensorInfo([s.length],i,s)}var LSe={kernelName:T.Range,backendName:"cpu",kernelFunc:BSe};var zSe=Zt(T.Reciprocal,function(e){return 1/e}),$Se={kernelName:T.Reciprocal,backendName:"cpu",kernelFunc:zSe};function VSe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size;st(a,"resizeBilinear");for(var u=T.util.computeStrides(a.shape),l=rt(s,2),c=l[0],p=l[1],d=rt(a.shape,4),f=d[0],h=d[1],m=d[2],v=d[3],g=n.data.get(a.dataId).values,y=new Float32Array(T.util.sizeFromShape([f,c,p,v])),w=[i&&c>1?h-1:h,i&&p>1?m-1:m],b=[i&&c>1?c-1:c,i&&p>1?p-1:p],x=0,k=w[0]/b[0],N=w[1]/b[1],E=0;E<f;E++)for(var C=0;C<c;C++){var R=void 0;o?R=k*(C+.5)-.5:R=k*C;for(var A=Math.max(0,Math.floor(R)),M=R-A,$=Math.min(h-1,Math.ceil(R)),z=E*u[0]+A*u[1],L=E*u[0]+$*u[1],B=0;B<p;B++){var W=void 0;o?W=N*(B+.5)-.5:W=N*B;for(var Y=Math.max(0,Math.floor(W)),Q=W-Y,G=Math.min(m-1,Math.ceil(W)),X=z+Y*u[2],ie=L+Y*u[2],ae=z+G*u[2],le=L+G*u[2],de=0;de<v;de++){var ge=g[X+de],Ee=g[ie+de],he=g[ae+de],xe=g[le+de],Ne=ge+(he-ge)*Q,$e=Ee+(xe-Ee)*Q,pt=Ne+($e-Ne)*M;y[x++]=pt}}}return n.makeTensorInfo([f,c,p,v],"float32",y)}var WSe={kernelName:T.ResizeBilinear,backendName:"cpu",kernelFunc:VSe};function USe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners;st([i,a],"resizeBilinearGrad");for(var s=T.util.computeStrides(a.shape),u=rt(a.shape,4),l=u[0],c=u[1],p=u[2],d=u[3],f=rt(i.shape,3),h=f[1],m=f[2],v=new Float32Array(l*c*p*d),g=[o&&h>1?c-1:c,o&&m>1?p-1:p],y=[o&&h>1?h-1:h,o&&m>1?m-1:m],w=g[0]/y[0],b=g[1]/y[1],x=n.data.get(i.dataId).values,k=0,N=0;N<l;N++)for(var E=N*s[0],C=0;C<h;C++)for(var R=C*w,A=Math.floor(R),M=Math.min(Math.ceil(R),c-1),$=E+A*s[1],z=E+M*s[1],L=R-A,B=1-L,W=0;W<m;W++)for(var Y=W*b,Q=Math.floor(Y),G=Math.min(Math.ceil(Y),p-1),X=Y-Q,ie=1-X,ae=$+Q*s[2],le=$+G*s[2],de=z+Q*s[2],ge=z+G*s[2],Ee=B*ie,he=B*X,xe=L*ie,Ne=L*X,$e=0;$e<d;$e++){var pt=x[k++];v[ae+$e]+=pt*Ee,v[le+$e]+=pt*he,v[de+$e]+=pt*xe,v[ge+$e]+=pt*Ne}return n.makeTensorInfo([l,p,c,d],"float32",v)}var GSe={kernelName:T.ResizeBilinearGrad,backendName:"cpu",kernelFunc:USe};function qSe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size;st(a,"resizeNearestNeighbor");for(var u=T.util.computeStrides(a.shape),l=rt(s,2),c=l[0],p=l[1],d=rt(a.shape,4),f=d[0],h=d[1],m=d[2],v=d[3],g=n.data.get(a.dataId).values,y=new Float32Array(f*c*p*v),w=[i&&c>1?h-1:h,i&&p>1?m-1:m],b=[i&&c>1?c-1:c,i&&p>1?p-1:p],x=w[0]/b[0],k=w[1]/b[1],N=0,E=0;E<f;E++)for(var C=E*u[0],R=0;R<c;R++){var A=o?x*(R+.5):x*R,M=Math.min(h-1,i?Math.round(A):Math.floor(A));o&&(M=Math.max(0,M));for(var $=C+M*u[1],z=0;z<p;z++){var L=o?k*(z+.5):k*z,B=Math.min(m-1,i?Math.round(L):Math.floor(L));o&&(B=Math.max(0,B));for(var W=$+B*u[2],Y=0;Y<v;Y++){var Q=g[W+Y];y[N++]=Q}}}return n.makeTensorInfo([f,c,p,v],a.dtype,y)}var HSe={kernelName:T.ResizeNearestNeighbor,backendName:"cpu",kernelFunc:qSe};function jSe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners;st([i,a],"resizeNearestNeighborGrad");for(var s=T.util.computeStrides(a.shape),u=T.util.computeStrides(i.shape),l=rt(a.shape,4),c=l[0],p=l[1],d=l[2],f=l[3],h=rt(i.shape,3),m=h[1],v=h[2],g=new Float32Array(c*p*d*f),y=n.data.get(i.dataId).values,w=[o&&m>1?p-1:p,o&&v>1?d-1:d],b=[o&&m>1?m-1:m,o&&v>1?v-1:v],x=w[0]/b[0],k=w[1]/b[1],N=1/x,E=1/k,C=Math.ceil(N)*2+2,R=Math.ceil(E)*2+2,A=0;A<c;A++)for(var M=A*s[0],$=0;$<p;$++)for(var z=M+$*s[1],L=Math.floor($*N),B=Math.floor(L-C/2),W=0;W<d;W++)for(var Y=z+W*s[2],Q=Math.floor(W*E),G=Math.floor(Q-R/2),X=0;X<f;X++){for(var ie=0,ae=0;ae<C;ae++){var le=ae+B;if(!(le<0||le>=m)){var de=M+le*u[1],ge=le*x,Ee=Math.min(p-1,o?Math.round(ge):Math.floor(ge));if($===Ee)for(var he=0;he<R;he++){var xe=he+G;if(!(xe<0||xe>=v)){var Ne=de+xe*u[2],$e=xe*k,pt=Math.min(d-1,o?Math.round($e):Math.floor($e));W===pt&&(ie+=y[Ne+X])}}}}g[Y+X]=ie}return n.makeTensorInfo(a.shape,a.dtype,g)}var KSe={kernelName:T.ResizeNearestNeighborGrad,backendName:"cpu",kernelFunc:jSe};function XSe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dims;st(a,"reverse");var o=a.shape.length,s=T.util.parseAxisParam(i,a.shape);if(o===0)return ls({inputs:{x:a},backend:n});for(var u=new T.TensorBuffer(a.shape,a.dtype),l=n.bufferSync(a),c=function(d){var f=u.indexToLoc(d),h=f.slice();s.forEach(function(m){return h[m]=a.shape[m]-1-h[m]}),u.set.apply(u,yi([l.get.apply(l,yi([],rt(h),!1))],rt(f),!1))},p=0;p<u.size;p++)c(p);return n.makeTensorInfo(u.shape,u.dtype,u.values)}var YSe={kernelName:T.Reverse,backendName:"cpu",kernelFunc:XSe},JSe={kernelName:T.RotateWithOffset,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=n.radians,o=n.fillValue,s=n.center,u=r,l=T.util.getTypedArrayFromDType(a.dtype,T.util.sizeFromShape(a.shape)),c=rt(a.shape,4),p=c[0],d=c[1],f=c[2],h=c[3],m=rt(T.backend_util.getImageCenter(s,d,f),2),v=m[0],g=m[1],y=255,w=Math.sin(i),b=Math.cos(i),x=u.data.get(a.dataId).values,k=0;k<p;k++)for(var N=k*f*d*h,E=0;E<d;E++)for(var C=E*(f*h),R=0;R<f;R++)for(var A=R*h,M=0;M<h;M++){var $=[p,E,R,M],z=$[2],L=$[1],B=(z-v)*b-(L-g)*w,W=(z-v)*w+(L-g)*b;B=Math.round(B+v),W=Math.round(W+g);var Y=o;if(typeof o!="number"&&(M===3?Y=y:Y=o[M]),B>=0&&B<f&&W>=0&&W<d){var Q=W*(f*h),G=B*h,X=N+Q+G+M;Y=x[X]}var ie=N+C+A+M;l[ie]=Y}var ae=u.write(l,a.shape,a.dtype);return{dataId:ae,shape:a.shape,dtype:a.dtype}}};var ZSe=Zt(T.Round,function(e){var t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1}),QSe={kernelName:T.Round,backendName:"cpu",kernelFunc:ZSe};function eke(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=t.updates,o=r.shape,s=T.backend_util.calculateShapes(i,a,o),u=s.sliceRank,l=s.numUpdates,c=s.sliceSize,p=s.strides,d=s.outputSize,f=!0,h=n.bufferSync(a),m=n.bufferSync(i),v=ic(h,m,o,d,c,l,u,p,0,f);return n.makeTensorInfo(o,v.dtype,v.values)}var tke={kernelName:T.ScatterNd,backendName:"cpu",kernelFunc:eke};function nke(e,t){for(var n=0,r=e.length,a=0;n<r;)a=Math.floor((n+r)/2),e[a]<t?n=a+1:r=a;return r}function rke(e,t){for(var n=0,r=e.length,a=0;n<r;)a=Math.floor((n+r)/2),e[a]<=t?n=a+1:r=a;return r}function ake(e,t,n,r,a,i){for(var o=T.util.getArrayFromDType("int32",n*a),s=0;s<n;++s)for(var u=e.slice(s*r,(s+1)*r),l=s*a,c=0;c<a;++c)o[l+c]=i==="left"?nke(u,t[c+l]):rke(u,t[c+l]);return o}function ike(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sortedSequence,i=t.values,o=r.side,s=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,l=ake(s,u,a.shape[0],a.shape[1],i.shape[1],o);return n.makeTensorInfo(i.shape,"int32",l)}var oke={kernelName:T.SearchSorted,backendName:"cpu",kernelFunc:ike};function ske(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e;st([r,a,i],"select");for(var o=r.shape.length,s=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,c=T.upcastType(a.dtype,i.dtype),p=T.util.makeZerosTypedArray(T.util.sizeFromShape(a.shape),c),d=0,f=o===0||o>1||a.shape.length===1?1:T.util.sizeFromShape(a.shape.slice(1)),h=0;h<s.length;h++)for(var m=0;m<f;m++)s[h]===1?p[d++]=u[h]:p[d++]=l[h];return n.makeTensorInfo(a.shape,c,p)}var uke={kernelName:T.Select,backendName:"cpu",kernelFunc:ske};var lke=T.backend_util.SELU_SCALEALPHA,cke=T.backend_util.SELU_SCALE,pke=Zt(T.Selu,function(e){return e>=0?cke*e:lke*(Math.exp(e)-1)}),dke={kernelName:T.Selu,backendName:"cpu",kernelFunc:pke};var fke=Zt(T.Sign,function(e){return e<0?-1:e>0?1:0}),hke={kernelName:T.Sign,backendName:"cpu",kernelFunc:fke};var mke=Zt(T.Sin,function(e){return Math.sin(e)}),vke={kernelName:T.Sin,backendName:"cpu",kernelFunc:mke};var gke=Zt(T.Sinh,function(e){return Math.sinh(e)}),yke={kernelName:T.Sinh,backendName:"cpu",kernelFunc:gke};var bke=11920928955078125e-23,FA=Math.log(bke)+2,wke=Zt(T.Softplus,function(e){var t=e>-FA,n=e<FA,r=Math.exp(e),a;return n?a=r:t?a=e:a=Math.log(1+r),a}),xke={kernelName:T.Softplus,backendName:"cpu",kernelFunc:wke};function Ske(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings;st([a],"spaceToBatchND");var s=T.util.sizeFromShape(i),u=[[0,0]];u.push.apply(u,yi([],rt(o),!1));for(var l=1+i.length;l<a.shape.length;++l)u.push([0,0]);var c=qF.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),p=T.backend_util.getReshaped(c.shape,i,s,!1),d=T.backend_util.getPermuted(p.length,i.length,!1),f=T.backend_util.getReshapedPermuted(c.shape,i,s,!1),h={x:c},m={shape:p},v=ln({inputs:h,backend:n,attrs:m}),g={x:v},y={perm:d},w=Ca({inputs:g,backend:n,attrs:y}),b={x:w},x={shape:f},k=ln({inputs:b,backend:n,attrs:x});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(w),k}var kke={kernelName:T.SpaceToBatchND,backendName:"cpu",kernelFunc:Ske};function Nke(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,i=t.denseShape,o=t.defaultValue;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        `.concat(i.shape));if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        `.concat(r.shape));if(a.shape.length!==1)throw new Error(`Values must be a vector, saw:
        `.concat(a.shape));if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        `.concat(o.shape));var s=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values[0],p=rt(gF(s,r.shape,r.dtype,u,a.dtype,l,c),5),d=p[0],f=p[1],h=p[2],m=p[3],v=p[4];return[n.makeTensorInfo(f,r.dtype,d),n.makeTensorInfo([f[0]],a.dtype,h),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map(function(g){return Number(g)}))),n.makeTensorInfo([v.length],r.dtype,new Int32Array(v))]}var Tke={kernelName:T.SparseFillEmptyRows,backendName:"cpu",kernelFunc:Nke};function Eke(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,i=t.newShape;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        `.concat(r.shape));if(a.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        `.concat(a.shape));if(i.shape.length!==1)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=Array.from(n.data.get(a.dataId).values),s=n.data.get(r.dataId).values,u=Array.from(n.data.get(i.dataId).values),l=rt(yF(s,r.shape,r.dtype,o,u),3),c=l[0],p=l[1],d=l[2];return[n.makeTensorInfo(p,r.dtype,c),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}var Ike={kernelName:T.SparseReshape,backendName:"cpu",kernelFunc:Eke};function Cke(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          `.concat(a.shape));if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          `.concat(i.shape));if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");var o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,l=rt(F6(o,r.shape,r.dtype,s,u,!0),2),c=l[0],p=l[1];return n.makeTensorInfo(p,r.dtype,c)}var Dke={kernelName:T.SparseSegmentMean,backendName:"cpu",kernelFunc:Cke};function _ke(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         `.concat(a.shape));if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         `.concat(i.shape));if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");var o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,l=rt(F6(o,r.shape,r.dtype,s,u),2),c=l[0],p=l[1];return n.makeTensorInfo(p,r.dtype,c)}var Ake={kernelName:T.SparseSegmentSum,backendName:"cpu",kernelFunc:_ke};function Fke(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,i=t.sparseValues,o=t.defaultValue,s=r.outputShape,u=T.backend_util.calculateShapes(i,a,s),l=u.sliceRank,c=u.numUpdates,p=u.sliceSize,d=u.strides,f=u.outputSize,h=!1,m=n.bufferSync(a),v;switch(i.dtype){case"bool":{var g=n.bufferSync(i),y=!!n.data.get(o.dataId).values[0];v=ic(m,g,s,f,p,c,l,d,y,h);break}case"float32":{var g=n.bufferSync(i),y=n.data.get(o.dataId).values[0];v=ic(m,g,s,f,p,c,l,d,y,h);break}case"int32":{var g=n.bufferSync(i),y=n.data.get(o.dataId).values[0];v=ic(m,g,s,f,p,c,l,d,y,h);break}case"string":{var g=n.bufferSync(i),y=T.util.decodeString(n.data.get(o.dataId).values[0]);v=ic(m,g,s,f,p,c,l,d,y,h);break}default:throw new Error("Unsupported type ".concat(i.dtype))}return n.makeTensorInfo(s,v.dtype,v.values)}var Rke={kernelName:T.SparseToDense,backendName:"cpu",kernelFunc:Fke};function Oke(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.numOrSizeSplits,o=r.axis,s=T.util.parseAxisParam(o,a.shape)[0],u=T.backend_util.prepareSplitSize(a,i,s),l=new Array(a.shape.length).fill(0),c=a.shape.slice();return u.map(function(p){var d=yi([],rt(c),!1);d[s]=p;var f=sc({inputs:{x:a},backend:n,attrs:{begin:l,size:d}});return l[s]+=p,f})}var Mke={kernelName:T.SplitV,backendName:"cpu",kernelFunc:Oke};var Pke={kernelName:T.Square,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n;st(r,"square");for(var i=a.data.get(r.dataId).values,o=new Float32Array(i.length),s=0;s<i.length;++s){var u=i[s];o[s]=u*u}var l=a.write(o,r.shape,r.dtype);return{dataId:l,shape:r.shape,dtype:r.dtype}}};var Bke=Zt(T.Step,function(e,t){var n=t;return isNaN(e)?NaN:e>0?1:n.alpha}),Lke={kernelName:T.Step,backendName:"cpu",kernelFunc:Bke};function zke(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.end,s=r.strides,u=r.beginMask,l=r.endMask,c=r.ellipsisMask,p=r.newAxisMask,d=r.shrinkAxisMask;st(a,"stridedSlice");var f=T.slice_util.sliceInfo(a.shape,i,o,s,u,l,c,p,d),h=f.finalShapeSparse,m=f.finalShape,v=f.isIdentity,g=f.sliceDim0,y=f.isSimpleSlice,w=f.begin,b=f.end,x=f.strides,k;if(v)k=ln({inputs:{x:a},backend:n,attrs:{shape:m}});else if(g||y){T.util.assert(a.shape.length>=1,function(){return"Input must have rank at least 1, got: ".concat(a.shape.length)});var N=T.slice_util.computeOutShape(w,b,x),E=sc({inputs:{x:a},backend:n,attrs:{begin:w,size:N}});k=ln({inputs:{x:E},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(E)}else{var C=n.bufferSync(a),R=xF(h,C,x,w);k=n.makeTensorInfo(m,R.dtype,R.values)}return k}var $ke={kernelName:T.StridedSlice,backendName:"cpu",kernelFunc:zke};function Vke(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,i=r.nGramWidths,o=r.leftPad,s=r.rightPad,u=r.padWidth,l=r.preserveShortSequences,c=t.data,p=t.dataSplits,d=n.data.get(c.dataId).values,f=n.data.get(p.dataId).values,h=rt(SF(d,f,a,i,o,s,u,l),2),m=h[0],v=h[1];return[n.makeTensorInfo([m.length],"string",m),n.makeTensorInfo(p.shape,"int32",v)]}var Wke={kernelName:T.StringNGrams,backendName:"cpu",kernelFunc:Vke};function Uke(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.skipEmpty,i=t.input,o=t.delimiter;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error("Input must be a vector, got shape: ".concat(i.shape));if(o.shape.length!==0)throw new Error("Delimiter must be a scalar, got shape: ".concat(o.shape));var s=n.data.get(i.dataId).values,u=n.data.get(o.dataId).values[0],l=rt(kF(s,u,a),3),c=l[0],p=l[1],d=l[2],f=p.length;return[n.makeTensorInfo([f,2],"int32",c),n.makeTensorInfo([f],"string",p),n.makeTensorInfo([2],"int32",new Int32Array(d))]}var Gke={kernelName:T.StringSplit,backendName:"cpu",kernelFunc:Uke};function qke(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.numBuckets,i=t.input;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");var o=n.data.get(i.dataId).values,s=NF(o,a);return n.makeTensorInfo(i.shape,"int32",s)}var Hke={kernelName:T.StringToHashBucketFast,backendName:"cpu",kernelFunc:qke};var jke=Zt(T.Tan,function(e){return Math.tan(e)}),Kke={kernelName:T.Tan,backendName:"cpu",kernelFunc:jke};var Xke=Zt(T.Tanh,function(e){return Math.tanh(e)}),Yke={kernelName:T.Tanh,backendName:"cpu",kernelFunc:Xke};function Jke(e){var t=e.inputs,n=e.backend,r=t.tensor,a=t.indices,i=t.updates,o=T.backend_util.calculateShapes(i,a,r.shape),s=o.sliceRank,u=o.numUpdates,l=o.sliceSize,c=o.strides,p=o.outputSize,d=!1,f=n.bufferSync(a),h=n.bufferSync(i),m=n.bufferSync(r),v=ic(f,h,r.shape,p,l,u,s,c,m,d);return n.makeTensorInfo(r.shape,v.dtype,v.values)}var Zke={kernelName:T.TensorScatterUpdate,backendName:"cpu",kernelFunc:Jke};function Qke(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;st(a,"tile");var o=EF(n.bufferSync(a),i);return n.makeTensorInfo(o.shape,o.dtype,o.values)}var eNe={kernelName:T.Tile,backendName:"cpu",kernelFunc:Qke};function tNe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted;st(a,"topk");var s=n.data.get(a.dataId).values,u=rt(CF(s,a.shape,a.dtype,i,o),2),l=u[0],c=u[1];return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}var nNe={kernelName:T.TopK,backendName:"cpu",kernelFunc:tNe};function rNe(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=t.transforms,o=n.interpolation,s=n.fillMode,u=n.fillValue,l=n.outputShape,c=rt(a.shape,4),p=c[0],d=c[1],f=c[2],h=c[3],m=rt(l??[d,f],2),v=m[0],g=m[1],y=[p,v,g,h],w=T.util.computeStrides(a.shape),b=w[0],x=w[1],k=w[2],N=T.util.computeStrides(y),E=N[0],C=N[1],R=N[2],A=T.util.getTypedArrayFromDType(a.dtype,T.util.sizeFromShape(y));A.fill(u);for(var M=r.data.get(a.dataId).values,$=r.data.get(i.dataId).values,z=0;z<p;++z){for(var L=i.shape[0]===1?$:$.subarray(z*8,z*8+8),B=0;B<v;++B)for(var W=0;W<g;++W)for(var Y=0;Y<h;++Y){var Q=void 0,G=L[6]*W+L[7]*B+1;if(G!==0){var X=(L[0]*W+L[1]*B+L[2])/G,ie=(L[3]*W+L[4]*B+L[5])/G,ae=RA(X,f,s),le=RA(ie,d,s);switch(o){case"nearest":Q=lNe(M,d,f,b,x,k,z,le,ae,Y,u);break;case"bilinear":Q=cNe(M,d,f,b,x,k,z,le,ae,Y,u);break;default:throw new Error("Error in Transform: Expect 'nearest' or "+"'bilinear', but got ".concat(o))}var de=z*E+B*C+W*R+Y;A[de]=Q}}return r.makeTensorInfo(y,a.dtype,A)}var ge=r.write(A,y,a.dtype);return{dataId:ge,shape:a.shape,dtype:a.dtype}}var aNe={kernelName:T.Transform,backendName:"cpu",kernelFunc:rNe};function RA(e,t,n){switch(n){case"reflect":return iNe(e,t);case"wrap":return oNe(e,t);case"nearest":return uNe(e,t);case"constant":default:return sNe(e)}}function iNe(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=2*t;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-t?n+r:-n-1}else if(n>t-1)if(t<=1)n=0;else{var r=2*t;n-=r*Math.trunc(n/r),n>=t&&(n=r-n-1)}return T.util.clamp(0,n,t-1)}function oNe(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=t-1;n+=t*(Math.trunc(-n/r)+1)}else if(n>t-1)if(t<=1)n=0;else{var r=t-1;n-=t*Math.trunc(n/r)}return T.util.clamp(0,n,t-1)}function sNe(e,t){return e}function uNe(e,t){return T.util.clamp(0,e,t-1)}function kh(e,t,n,r,a,i,o,s,u,l,c){var p=o*r+s*a+u*i+l;return 0<=s&&s<t&&0<=u&&u<n?e[p]:c}function lNe(e,t,n,r,a,i,o,s,u,l,c){var p=Math.round(s),d=Math.round(u);return kh(e,t,n,r,a,i,o,p,d,l,c)}function cNe(e,t,n,r,a,i,o,s,u,l,c){var p=Math.floor(s),d=Math.floor(u),f=p+1,h=d+1,m=(h-u)*kh(e,t,n,r,a,i,o,p,d,l,c)+(u-d)*kh(e,t,n,r,a,i,o,p,h,l,c),v=(h-u)*kh(e,t,n,r,a,i,o,f,d,l,c)+(u-d)*kh(e,t,n,r,a,i,o,f,h,l,c);return(f-s)*m+(s-p)*v}function pNe(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;st(i,"unique");var o=r.data.get(i.dataId).values,s=DF(o,a,i.shape,i.dtype),u=s.outputValues,l=s.outputShape,c=s.indices;return[r.makeTensorInfo(l,i.dtype,u),r.makeTensorInfo([c.length],"int32",c)]}var dNe={kernelName:T.Unique,backendName:"cpu",kernelFunc:pNe};function fNe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a.shape.length,s=a.shape[i],u=new Array(o-1),l=0,c=0;c<o;c++)c!==i&&(u[l++]=a.shape[c]);var p=new Array(o).fill(0),d=a.shape.slice();d[i]=1;for(var f=new Array(s),c=0;c<f.length;c++){p[i]=c;var h=sc({inputs:{x:a},backend:n,attrs:{begin:p,size:d}});f[c]=ln({inputs:{x:h},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(h)}return f}var hNe={kernelName:T.Unpack,backendName:"cpu",kernelFunc:fNe};function mNe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.segmentIds,o=r.numSegments;st(a,"unsortedSegmentSum");for(var s=a.shape.length,u=i.shape.length,l=[],c=[],p=s-u,d=i,f=0;f<p;++f){var h=w0({inputs:{input:d},backend:n,attrs:{dim:f+1}});d=h,c.push(h)}for(var f=0;f<o;++f){var m=T.util.createScalarValue(f,"int32"),v=n.makeTensorInfo([],"int32",m),g=GA({inputs:{a:v,b:d},backend:n}),y=Uu({inputs:{x:g},backend:n,attrs:{dtype:"float32"}}),w=S0({inputs:{a:y,b:a},backend:n}),b=Nh({inputs:{x:w},backend:n,attrs:{axis:0,keepDims:!1}});l.push(b),c.push(v),c.push(g),c.push(y),c.push(w),c.push(b)}var x=GF({inputs:l,backend:n,attrs:{axis:0}});return c.forEach(function(k){return n.disposeIntermediateTensorInfo(k)}),x}var vNe={kernelName:T.UnsortedSegmentSum,backendName:"cpu",kernelFunc:mNe},k6,OA,gNe=[p9e,U5e,f9e,m9e,X5e,g9e,b9e,x9e,k9e,T9e,I9e,D9e,A9e,O9e,P9e,z9e,V9e,U9e,q9e,l9e,j9e,X9e,J9e,J5e,Q9e,j5e,Q5e,t7e,G5e,r7e,i7e,o7e,u7e,c7e,d7e,h7e,v7e,y7e,w7e,S7e,N7e,E7e,C7e,_7e,A7e,R7e,M7e,B7e,L7e,z7e,$7e,W7e,q7e,n9e,j7e,e8e,txe,t8e,nxe,r8e,uxe,lxe,pxe,i8e,s8e,fxe,mxe,gxe,bxe,l8e,p8e,q5e,xxe,a7e,kxe,Txe,Ixe,r9e,f8e,m8e,Dxe,g8e,Axe,Oxe,Pxe,zxe,Vxe,Uxe,Gxe,b8e,Hxe,Kxe,Yxe,Zxe,eSe,nSe,aSe,x8e,oSe,lSe,dSe,k8e,T8e,mSe,ySe,xSe,I8e,kSe,TSe,ESe,qF,_Se,i9e,_8e,FSe,OSe,PSe,LSe,H5e,T6,$Se,o9e,s9e,u9e,WSe,GSe,HSe,KSe,YSe,JSe,QSe,z8e,tke,oke,uke,dke,V8e,hke,vke,yke,W8e,cSe,xke,kke,Tke,Ike,Dke,Ake,Rke,Mke,q8e,Pke,j8e,X8e,Lke,$ke,Wke,Gke,Hke,Q8e,U7e,Kke,Yke,Zke,eNe,nNe,aNe,C8e,dNe,hNe,vNe,NSe];try{for(xh=Lp(gNe),Bp=xh.next();!Bp.done;Bp=xh.next())MA=Bp.value,T.registerKernel(MA)}catch(e){k6={error:e}}finally{try{Bp&&!Bp.done&&(OA=xh.return)&&OA.call(xh)}finally{if(k6)throw k6.error}}var MA,xh,Bp;k0.MathBackendCPU=I6;k0.shared=e9e;k0.version_cpu=t9e});var ZO=An(js=>{"use strict";var S=Il();function yNe(e){var t=Object.create(null);return e&&Object.keys(e).forEach(function(n){if(n!=="default"){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}}),t.default=e,t}var bNe=yNe(S),z6=function(e,t){return z6=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},z6(e,t)};function wNe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");z6(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function Gp(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function s(c){try{l(r.next(c))}catch(p){o(p)}}function u(c){try{l(r.throw(c))}catch(p){o(p)}}function l(c){c.done?i(c.value):a(c.value).then(s,u)}l((r=r.apply(e,t||[])).next())})}function qp(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,a,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,a&&(i=l[0]&2?a.return:l[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,l[1])).done)return i;switch(a=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,a=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],a=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function ha(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ae(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function $n(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var lc={},N0={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function kR(e,t){lc[e]=t}function Po(e,t){if(!(e in lc)||t!=null){var n=SNe(e,t);if(n!==null)lc[e]=n;else return console.log("Could not get context for WebGL version",e),null}var r=lc[e];return r==null||r.isContextLost()?(delete lc[e],Po(e)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),lc[e])}function xNe(e){if(!S.env().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&e===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function SNe(e,t){if(e!==1&&e!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var n=t??xNe(e);return n.addEventListener("webglcontextlost",function(r){r.preventDefault(),delete lc[e]},!1),S.env().getBool("SOFTWARE_WEBGL_ENABLED")&&(N0.failIfMajorPerformanceCaveat=!1),e===1?n.getContext("webgl",N0)||n.getContext("experimental-webgl",N0):n.getContext("webgl2",N0)}var Ah;(function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"})(Ah||(Ah={}));var bi;(function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"})(bi||(bi={}));var Kr;(function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Kr||(Kr={}));function Ph(e,t){return[t,e]}function kNe(e,t){return e*t}function T0(e){var t=S.util.sizeFromShape(e),n=Math.ceil(t/4);return S.util.sizeToSquarishShape(n)}function Hp(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function NNe(e,t){var n=Ae(Hp(e,t),2),r=n[0],a=n[1];return r*a*4}function j6(e,t){var n=e,r,a,i,o,s,u,l,c,p,d;return S.env().getNumber("WEBGL_VERSION")===2?(r=n.R32F,a=n.R16F,i=n.RGBA16F,o=n.RGBA32F,s=n.RED,l=4,c=1,p=n.HALF_FLOAT,d=n.FLOAT,u=n.RGBA8):(r=e.RGBA,a=e.RGBA,i=e.RGBA,o=n.RGBA,s=e.RGBA,l=4,c=4,p=t!=null?t.HALF_FLOAT_OES:null,d=e.FLOAT,u=e.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:a,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:s,downloadTextureFormat:u,downloadUnpackNumChannels:l,defaultNumChannels:c,textureTypeHalfFloat:p,textureTypeFloat:d}}function qe(e,t){var n=t();return S.env().getBool("DEBUG")&&TNe(e),n}function TNe(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+TR(e,t))}var ENe=596e-10,INe=65504;function NR(e){return!!(S.env().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||e===0||ENe<Math.abs(e)&&Math.abs(e)<INe)}function TR(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}function Eh(e,t){return qs(e,function(){return e.getExtension(t)},'Extension "'+t+'" not supported on this browser.')}function ER(e,t){var n=qs(e,function(){return e.createShader(e.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(qe(e,function(){return e.shaderSource(n,t)}),qe(e,function(){return e.compileShader(n)}),e.getShaderParameter(n,e.COMPILE_STATUS)===!1)throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function IR(e,t){var n=qs(e,function(){return e.createShader(e.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(qe(e,function(){return e.shaderSource(n,t)}),qe(e,function(){return e.compileShader(n)}),S.env().get("ENGINE_COMPILE_ONLY"))return n;if(e.getShaderParameter(n,e.COMPILE_STATUS)===!1)throw K6(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}var CNe=/ERROR: [0-9]+:([0-9]+):/g;function K6(e,t){var n=CNe.exec(t);if(n==null){console.log("Couldn't parse line number in error: ".concat(t)),console.log(e);return}for(var r=+n[1],a=e.split(`
`),i=a.length.toString().length+2,o=a.map(function(d,f){return S.util.rightPad((f+1).toString(),i)+d}),s=0,u=0;u<o.length;u++)s=Math.max(o[u].length,s);var l=o.slice(0,r-1),c=o.slice(r-1,r),p=o.slice(r);console.log(l.join(`
`)),console.log(t.split(`
`)[0]),console.log("%c ".concat(S.util.rightPad(c[0],s)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(p.join(`
`))}function CR(e){return qs(e,function(){return e.createProgram()},"Unable to create WebGLProgram.")}function DR(e,t){if(qe(e,function(){return e.linkProgram(t)}),!S.env().get("ENGINE_COMPILE_ONLY")&&e.getProgramParameter(t,e.LINK_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function D0(e,t){if(qe(e,function(){return e.validateProgram(t)}),e.getProgramParameter(t,e.VALIDATE_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function _R(e,t){var n=qs(e,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return qe(e,function(){return e.bindBuffer(e.ARRAY_BUFFER,n)}),qe(e,function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)}),n}function AR(e,t){var n=qs(e,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return qe(e,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)}),qe(e,function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)}),n}function DNe(){return S.env().getNumber("WEBGL_VERSION")===2?1:4}function FR(e){return qs(e,function(){return e.createTexture()},"Unable to create WebGLTexture.")}function RR(e,t){var n=S.env().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n){var r="[".concat(e,"x").concat(t,"]"),a="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+a+".")}}function OR(e){return qs(e,function(){return e.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function $6(e,t,n,r,a,i,o){var s=e.getAttribLocation(t,n);return s===-1?!1:(qe(e,function(){return e.bindBuffer(e.ARRAY_BUFFER,r)}),qe(e,function(){return e.vertexAttribPointer(s,a,e.FLOAT,!1,i,o)}),qe(e,function(){return e.enableVertexAttribArray(s)}),!0)}function MR(e,t,n){$R(e,n),qe(e,function(){return e.activeTexture(e.TEXTURE0+n)}),qe(e,function(){return e.bindTexture(e.TEXTURE_2D,t)})}function _Ne(e,t){$R(e,t),qe(e,function(){return e.activeTexture(e.TEXTURE0+t)}),qe(e,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function PR(e,t,n){return qs(e,function(){return e.getUniformLocation(t,n)},'uniform "'+n+'" not present in program.')}function BR(e,t,n){return e.getUniformLocation(t,n)}function LR(e,t,n,r){qe(e,function(){return MR(e,t,r)}),qe(e,function(){return e.uniform1i(n,r)})}function ANe(e){qe(e,function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)}),qe(e,function(){return e.viewport(0,0,e.canvas.width,e.canvas.height)}),qe(e,function(){return e.scissor(0,0,e.canvas.width,e.canvas.height)})}function _0(e,t,n){qe(e,function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)}),qe(e,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)})}function V6(e,t){qe(e,function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)}),qe(e,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)})}function Ih(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+zR(e,t))}function zR(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}function qs(e,t,n){var r=qe(e,function(){return t()});if(r==null)throw new Error(n);return r}function $R(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){var a="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(a,"."))}}function cc(e,t){return t===void 0&&(t=2),S.util.sizeFromShape(e.slice(0,e.length-t))}function pc(e){if(e.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function Ch(e){var t=[1,1,1],n=e.length===0||e.length===1&&e[0]===1;return n||(t=$n([cc(e)],Ae(pc(e)),!1)),t}function VR(e,t){var n;t===void 0&&(t=!1);var r=S.env().getNumber("WEBGL_MAX_TEXTURE_SIZE"),a=S.env().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");if(a===1/0&&S.env().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(a=r/2),t&&(r=r*2,a=a*2,e=e.map(function(d,f){return f>=e.length-2?S.util.nearestLargerEven(e[f]):e[f]}),e.length===1&&(e=[2,e[0]])),e.length!==2){var i=S.util.squeezeShape(e);e=i.newShape}var o=S.util.sizeFromShape(e),s=null;e.length<=1&&o<=r?s=[1,o]:e.length===2&&e[0]<=r&&e[1]<=r?s=e:e.length===3&&e[0]*e[1]<=r&&e[2]<=r?s=[e[0]*e[1],e[2]]:e.length===3&&e[0]<=r&&e[1]*e[2]<=r?s=[e[0],e[1]*e[2]]:e.length===4&&e[0]*e[1]*e[2]<=r&&e[3]<=r?s=[e[0]*e[1]*e[2],e[3]]:e.length===4&&e[0]<=r&&e[1]*e[2]*e[3]<=r&&(s=[e[0],e[1]*e[2]*e[3]]);var u=s!=null&&Math.max.apply(Math,$n([],Ae(s),!1))>a&&Math.min.apply(Math,$n([],Ae(s),!1))<=(t?2:1)&&Math.min.apply(Math,$n([],Ae(s),!1))>0;if(s==null||u)if(t){var l=cc(e),c=2,p=2;e.length&&(n=Ae(pc(e),2),c=n[0],p=n[1]),o=l*(c/2)*(p/2),s=S.util.sizeToSquarishShape(o).map(function(d){return d*2})}else s=S.util.sizeToSquarishShape(o);return s}function E0(e){return e%2===0}function Fh(e,t){if(e=e.slice(-2),t=t.slice(-2),S.util.arraysEqual(e,t)||!e.length||!t.length||e[0]===0||e[1]===0||t[0]===0||t[1]===0)return!0;if(e.length!==t.length){var n=e[e.length-1],r=t[t.length-1];if(n===r||E0(n)&&E0(r)&&(e[0]===1||t[0]===1))return!0}return e[1]===t[1]&&E0(e[0])&&E0(t[0])}var A0,F0;function WR(e){if(A0==null){var t=Po(e);A0=t.getParameter(t.MAX_TEXTURE_SIZE)}return A0}function FNe(){A0=null}function RNe(){F0=null}function UR(e){if(F0==null){var t=Po(e);F0=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,F0)}function GR(e){if(e===0)return 0;var t,n=Po(e);return wi(n,"EXT_disjoint_timer_query_webgl2")&&e===2?t=2:wi(n,"EXT_disjoint_timer_query")?t=1:t=0,t}function wi(e,t){var n=e.getExtension(t);return n!=null}function W6(e){try{var t=Po(e);if(t!=null)return!0}catch(n){return console.log("Error when getting WebGL context: ",n),!1}return!1}function qR(e){if(e===0)return!1;var t=Po(e);if(e===1){if(!wi(t,"OES_texture_float"))return!1}else if(!wi(t,"EXT_color_buffer_float"))return!1;var n=U6(t);return n}function HR(e){if(e===0)return!1;var t=Po(e);if(e===1){if(!wi(t,"OES_texture_float")||!wi(t,"WEBGL_color_buffer_float"))return!1}else{if(wi(t,"EXT_color_buffer_float"))return U6(t);var n="EXT_color_buffer_half_float";if(wi(t,n)){var r=t.getExtension(n);return ONe(t,r)}return!1}var a=U6(t);return a}function U6(e){var t=j6(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);var r=1,a=1;e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,r,a,0,t.textureFormatFloat,t.textureTypeFloat,null);var i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(i),o}function ONe(e,t){var n=j6(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);var a=1,i=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,a,i,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(o),s}function jR(e){if(e!==2)return!1;var t=Po(e),n=t.fenceSync!=null;return n}function jp(e,t){Array.isArray(e)||(e=[e]),e.forEach(function(n){n!=null&&S.util.assert(n.dtype!=="complex64",function(){return"".concat(t," does not support complex64 tensors ")+"in the WebGL backend."})})}var MNe={__proto__:null,assertNotComplex:jp,bindCanvasToFramebuffer:ANe,bindColorTextureToFramebuffer:_0,bindTextureToProgramUniformSampler:LR,bindTextureUnit:MR,bindVertexBufferToProgramAttribute:$6,callAndCheck:qe,canBeRepresented:NR,createFragmentShader:IR,createFramebuffer:OR,createProgram:CR,createStaticIndexBuffer:AR,createStaticVertexBuffer:_R,createTexture:FR,createVertexShader:ER,getBatchDim:cc,getExtensionOrThrow:Eh,getFramebufferErrorMessage:zR,getMaxTexturesInShader:UR,getNumChannels:DNe,getProgramUniformLocation:BR,getProgramUniformLocationOrThrow:PR,getRowsCols:pc,getShapeAs3D:Ch,getTextureShapeFromLogicalShape:VR,getWebGLDisjointQueryTimerVersion:GR,getWebGLErrorMessage:TR,getWebGLMaxTextureSize:WR,hasExtension:wi,isCapableOfRenderingToFloatTexture:qR,isDownloadFloatTextureEnabled:HR,isReshapeFree:Fh,isWebGLFenceEnabled:jR,isWebGLVersionEnabled:W6,linkProgram:DR,logShaderSourceAndInfoLog:K6,resetMaxTextureSize:FNe,resetMaxTexturesInShader:RNe,unbindColorTextureFromFramebuffer:V6,unbindTextureUnit:_Ne,validateFramebuffer:Ih,validateProgram:D0,validateTextureSize:RR};var ut=S.env();ut.registerFlag("HAS_WEBGL",function(){return ut.getNumber("WEBGL_VERSION")>0});ut.registerFlag("WEBGL_VERSION",function(){return W6(2)?2:W6(1)?1:0});ut.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",function(){return!1});ut.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return ut.get("WEBGL_VERSION")===2});ut.registerFlag("WEBGL_CPU_FORWARD",function(){return!0});ut.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1});ut.registerFlag("WEBGL_PACK",function(){return ut.getBool("HAS_WEBGL")});ut.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return ut.getBool("WEBGL_PACK")});ut.registerFlag("WEBGL_PACK_CLIP",function(){return ut.getBool("WEBGL_PACK")});ut.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return ut.getBool("WEBGL_PACK")});ut.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return ut.getBool("WEBGL_PACK")});ut.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return ut.getBool("WEBGL_PACK")});ut.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return ut.getBool("WEBGL_PACK")});ut.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return ut.getBool("WEBGL_PACK")});ut.registerFlag("WEBGL_PACK_REDUCE",function(){return ut.getBool("WEBGL_PACK")});ut.registerFlag("WEBGL_LAZILY_UNPACK",function(){return ut.getBool("WEBGL_PACK")});ut.registerFlag("WEBGL_CONV_IM2COL",function(){return ut.getBool("WEBGL_PACK")});ut.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",function(){return ut.getBool("WEBGL_PACK")});ut.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return WR(ut.getNumber("WEBGL_VERSION"))});ut.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return UR(ut.getNumber("WEBGL_VERSION"))});ut.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var e=ut.getNumber("WEBGL_VERSION");return e===0?0:GR(e)});ut.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return ut.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!S.device_util.isMobile()});ut.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return qR(ut.getNumber("WEBGL_VERSION"))});ut.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return ut.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:ut.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")});ut.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return HR(ut.getNumber("WEBGL_VERSION"))});ut.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return jR(ut.getNumber("WEBGL_VERSION"))});ut.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){var e=ut.getBool("WEBGL_RENDER_FLOAT32_ENABLED");return e?4:0});ut.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",function(){return-1},function(e){if(typeof e!="number")throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but "+"got ".concat(e,"."));if(e<0&&e!==-1)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(e,"."))});ut.registerFlag("WEBGL_FLUSH_THRESHOLD",function(){return S.device_util.isMobile()?1:-1},function(e){if(typeof e!="number")throw new Error("WEBGL_FLUSH_THRESHOLD must be a number but got "+"".concat(e,"."));if(e<0&&e!==-1)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+"manual flush) or at least 0, but got ".concat(e,"."))});ut.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",function(){return 128});ut.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",function(){return!1});ut.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",function(){return 1e5});ut.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",function(){return 128});ut.registerFlag("WEBGL_EXP_CONV",function(){return!1});ut.registerFlag("SOFTWARE_WEBGL_ENABLED",function(){return ut.getBool("IS_TEST")});ut.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",function(){return 1/0});ut.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",function(){return!1});ut.registerFlag("WEBGL2_ISNAN_CUSTOM",function(){return!1});ut.registerFlag("ENGINE_COMPILE_ONLY",function(){return!1});function va(){var e,t,n,r,a,i,o,s,u,l;return S.env().getNumber("WEBGL_VERSION")===2?(e="#version 300 es",t="in",n="out",r="in",a="texture",i="outputColor",o="out vec4 outputColor;",s=S.env().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",u="",l=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(e="",t="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",o="",s=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,u=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,l=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:u,defineRound:l}}function fc(e,t,n){n===void 0&&(n="index");var r=S.util.computeStrides(t);return r.map(function(a,i){var o="int ".concat(e[i]," = ").concat(n," / ").concat(a),s=i===r.length-1?"int ".concat(e[i+1]," = ").concat(n," - ").concat(e[i]," * ").concat(a):"index -= ".concat(e[i]," * ").concat(a);return"".concat(o,"; ").concat(s,";")}).join("")}function L0(e,t,n){n===void 0&&(n="index");var r=S.util.computeStrides(t);return r.map(function(a,i){var o="int ".concat(e[i]," = ").concat(n," / outShapeStrides[").concat(i,"]"),s=i===r.length-1?"int ".concat(e[i+1]," = ").concat(n," - ").concat(e[i]," * outShapeStrides[").concat(i,"]"):"index -= ".concat(e[i]," * outShapeStrides[").concat(i,"]");return"".concat(o,"; ").concat(s,";")}).join("")}function PNe(e,t){var n=e.length,r=e.map(function(o){return"".concat(t,"[").concat(o,"]")}),a=new Array(n-1);a[n-2]=r[n-1];for(var i=n-3;i>=0;--i)a[i]="(".concat(a[i+1]," * ").concat(r[i+1],")");return a}function BNe(e,t,n){n===void 0&&(n="index");var r=e.map(function(i,o){return o}),a=PNe(r,t);return a.map(function(i,o){var s="int ".concat(e[o]," = ").concat(n," / ").concat(a[o]),u=o===a.length-1?"int ".concat(e[o+1]," = ").concat(n," - ").concat(e[o]," * ").concat(a[o]):"index -= ".concat(e[o]," * ").concat(a[o]);return"".concat(s,"; ").concat(u,";")}).join("")}function X6(e){var t=S.util.computeStrides(e).map(function(n){return n.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `.concat(t[0]," + coords.y * ").concat(t[1],` + coords.z;
  }
`)}function Y6(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}var KR=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`,XR=S.backend_util.getBroadcastDims;function LNe(e,t,n){var r=[];if(e.forEach(function(f){var h=S.util.sizeFromShape(f.shapeInfo.logicalShape);if(f.shapeInfo.isUniform?r.push("uniform float ".concat(f.name).concat(h>1?"[".concat(h,"]"):"",";")):(r.push("uniform sampler2D ".concat(f.name,";")),r.push("uniform int offset".concat(f.name,";"))),n.enableShapeUniforms){var m=J6(n.packedInputs,f.shapeInfo.logicalShape,f.shapeInfo.texShape).uniformShape;switch(m.length){case 1:r.push("uniform int ".concat(f.name,"Shape;"));break;case 2:r.push("uniform ivec2 ".concat(f.name,"Shape;"));break;case 3:r.push("uniform ivec3 ".concat(f.name,"Shape;"));break;case 4:r.push("uniform ivec4 ".concat(f.name,"Shape;"));break}r.push("uniform ivec2 ".concat(f.name,"TexShape;"))}}),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(function(f){r.push("uniform ".concat(f.type," ").concat(f.name).concat(f.arrayIndex?"[".concat(f.arrayIndex,"]"):"",";"))});var a=r.join(`
`),i=e.map(function(f){return zNe(f,t,n.packedInputs,n.enableShapeUniforms)}).join(`
`),o=t.texShape,s=va(),u=WNe(s),l,c,p=qNe(s);t.isPacked?(l=$Ne(t.logicalShape,o,n.enableShapeUniforms),c=GNe(s)):(l=VNe(t.logicalShape,o,n.enableShapeUniforms),c=UNe(s)),n.packedInputs&&(p+=XNe);var d=[p,u,c,a,l,i,n.userCode].join(`
`);return d}function Kp(e,t){t===void 0&&(t=!1);var n=e.shapeInfo.logicalShape;switch(n.length){case 0:return sTe(e,t);case 1:return lTe(e,t);case 2:return pTe(e,t);case 3:return fTe(e,t);case 4:return mTe(e,t);case 5:return vTe(e);case 6:return gTe(e);default:throw new Error("".concat(n.length,"-D input sampling")+" is not yet supported")}}function YR(e,t){var n=e.shapeInfo.logicalShape;switch(n.length){case 0:return oTe(e);case 1:return uTe(e,t);case 2:return cTe(e,t);case 3:return dTe(e,t);default:return hTe(e,t)}}function zNe(e,t,n,r){n===void 0&&(n=!1);var a="";n?a+=YR(e,r):a+=Kp(e,r);var i=e.shapeInfo.logicalShape,o=t.logicalShape;return i.length<=o.length&&(n?a+=yTe(e,t):a+=bTe(e,t)),a}function $Ne(e,t,n){switch(e.length){case 0:return JR();case 1:return YNe(e,t,n);case 2:return aTe(e,t,n);case 3:return ZNe(e,t,n);default:return eTe(e,t,n)}}function VNe(e,t,n){switch(e.length){case 0:return JR();case 1:return JNe(e,t,n);case 2:return iTe(e,t,n);case 3:return QNe(e,t,n);case 4:return tTe(e,t,n);case 5:return nTe(e,t);case 6:return rTe(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}function WNe(e){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `.concat(e.texture2D,`(textureSampler, uv).r;
    }
  `)}function UNe(e){return`
    void setOutput(float val) {
      `.concat(e.output,` = vec4(val, 0, 0, 0);
    }
  `)}function GNe(e){return`
    void setOutput(vec4 val) {
      `.concat(e.output,` = val;
    }
  `)}function qNe(e){var t="".concat(e.version,`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `).concat(e.varyingFs,` vec2 resultUV;
    `).concat(e.defineOutput,`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `).concat(e.defineSpecialNaN,`
    `).concat(e.defineSpecialInf,`
    `).concat(e.defineRound,`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `).concat(HNe,`
    `).concat(jNe,`
    `).concat(KNe,`
  `);return t}var HNe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,jNe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,KNe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,XNe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function JR(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function YNe(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `.concat(r[1],`.0);
      }
    `):r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `.concat(r[0],`.0);
      }
    `):n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`.concat(r[0],", ").concat(r[1],`));
      return 2 * (resTexRC.x * `).concat(r[1],` + resTexRC.y);
    }
  `)}function JNe(e,t,n){return t[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * `.concat(t[1],`.0);
      }
    `):t[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * `.concat(t[0],`.0);
      }
    `):n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`.concat(t[0],", ").concat(t[1],`));
      return resTexRC.x * `).concat(t[1],` + resTexRC.y;
    }
  `)}function ZNe(e,t,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[2]/2),i=a*Math.ceil(e[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`.concat(r[0],", ").concat(r[1],`));
      int index = resTexRC.x * `).concat(r[1],` + resTexRC.y;

      int b = index / `).concat(i,`;
      index -= b * `).concat(i,`;

      int r = 2 * (index / `).concat(a,`);
      int c = imod(index, `).concat(a,`) * 2;

      return ivec3(b, r, c);
    }
  `)}function QNe(e,t,n){if(n){var r=L0(["r","c","d"],e);return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    `.concat(r,`
    return ivec3(r, c, d);
  }
`)}var a=fc(["r","c","d"],e);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`.concat(t[0],", ").concat(t[1],`));
      int index = resTexRC.x * `).concat(t[1],` + resTexRC.y;
      `).concat(a,`
      return ivec3(r, c, d);
    }
  `)}function eTe(e,t,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;for(var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[e.length-1]/2),i=a*Math.ceil(e[e.length-2]/2),o=i,s="",u="b, r, c",l=2;l<e.length-1;l++)o*=e[e.length-l-1],s=`
      int b`.concat(l," = index / ").concat(o,`;
      index -= b`).concat(l," * ").concat(o,`;
    `)+s,u="b".concat(l,", ")+u;return`
    ivec`.concat(e.length,` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`).concat(r[0],", ").concat(r[1],`));
      int index = resTexRC.x * `).concat(r[1],` + resTexRC.y;

      `).concat(s,`

      int b = index / `).concat(i,`;
      index -= b * `).concat(i,`;

      int r = 2 * (index / `).concat(a,`);
      int c = imod(index, `).concat(a,`) * 2;

      return ivec`).concat(e.length,"(").concat(u,`);
    }
  `)}function tTe(e,t,n){if(n){var r=L0(["r","c","d","d2"],e);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      `.concat(r,`
      return ivec4(r, c, d, d2);
    }
  `)}var a=fc(["r","c","d","d2"],e);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`.concat(t[0],", ").concat(t[1],`));
      int index = resTexRC.x * `).concat(t[1],` + resTexRC.y;
      `).concat(a,`
      return ivec4(r, c, d, d2);
    }
  `)}function nTe(e,t){var n=fc(["r","c","d","d2","d3"],e);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`.concat(t[0],`,
                             `).concat(t[1],`));

      int index = resTexRC.x * `).concat(t[1],` + resTexRC.y;

      `).concat(n,`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `)}function rTe(e,t){var n=fc(["r","c","d","d2","d3","d4"],e);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`.concat(t[0],", ").concat(t[1],`));
      int index = resTexRC.x * `).concat(t[1],` + resTexRC.y;

      `).concat(n,`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `)}function aTe(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(S.util.arraysEqual(e,t))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`.concat(r[0],", ").concat(r[1],`));
      }
    `);var a=Math.ceil(e[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`.concat(r[0],", ").concat(r[1],`));

      int index = resTexRC.x * `).concat(r[1],` + resTexRC.y;
      int r = 2 * (index / `).concat(a,`);
      int c = imod(index, `).concat(a,`) * 2;

      return ivec2(r, c);
    }
  `)}function iTe(e,t,n){return S.util.arraysEqual(e,t)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`.concat(t[0],", ").concat(t[1],`));
      }
    `):e[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`.concat(t[0],", ").concat(t[1],`));
        int index = resTexRC.x * `).concat(t[1],` + resTexRC.y;
        return ivec2(index, 0);
      }
    `):e[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`.concat(t[0],", ").concat(t[1],`));
        int index = resTexRC.x * `).concat(t[1],` + resTexRC.y;
        return ivec2(0, index);
      }
    `):n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`.concat(t[0],", ").concat(t[1],`));
      int index = resTexRC.x * `).concat(t[1],` + resTexRC.y;
      int r = index / `).concat(e[1],`;
      int c = index - r * `).concat(e[1],`;
      return ivec2(r, c);
    }
  `)}function hc(e){return"offset".concat(e)}function oTe(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=va();return`
    vec4 `.concat(n,`() {
      return `).concat(r.texture2D,"(").concat(t,`, halfCR);
    }
  `)}function sTe(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(r,"() {return ").concat(n,";}");var a=Ae(e.shapeInfo.texShape,2),i=a[0],o=a[1];if(i===1&&o===1)return`
      float `.concat(r,`() {
        return sampleTexture(`).concat(n,`, halfCR);
      }
    `);var s=hc(n);if(t)return`
    float `.concat(r,`() {
      vec2 uv = uvFromFlat(`).concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(s,`);
      return sampleTexture(`).concat(n,`, uv);
    }
  `);var u=Ae(e.shapeInfo.texShape,2),l=u[0],c=u[1];return`
    float `.concat(r,`() {
      vec2 uv = uvFromFlat(`).concat(l,", ").concat(c,", ").concat(s,`);
      return sampleTexture(`).concat(n,`, uv);
    }
  `)}function uTe(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,i=va();if(t)return`
    vec4 `.concat(r,`(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(`).concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,`TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return `).concat(i.texture2D,"(").concat(n,`, uv);
    }
  `);var o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return`
    vec4 `.concat(r,`(int index) {
      vec2 uv = packedUVfrom1D(
        `).concat(o[0],", ").concat(o[1],`, index);
      return `).concat(i.texture2D,"(").concat(n,`, uv);
    }
  `)}function lTe(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`
      float `.concat(r,`(int index) {
        `).concat(Xp(e),`
      }
    `);var a=e.shapeInfo.texShape,i=a[0],o=a[1];if(o===1&&i===1)return`
      float `.concat(r,`(int index) {
        return sampleTexture(`).concat(n,`, halfCR);
      }
    `);var s=hc(n);return o===1?t?`
      float `.concat(r,`(int index) {
        vec2 uv = vec2(0.5, (float(index + `).concat(s,") + 0.5) / float(").concat(n,`TexShape[0]));
        return sampleTexture(`).concat(n,`, uv);
      }
    `):`
      float `.concat(r,`(int index) {
        vec2 uv = vec2(0.5, (float(index + `).concat(s,") + 0.5) / ").concat(i,`.0);
        return sampleTexture(`).concat(n,`, uv);
      }
    `):i===1?t?`
      float `.concat(r,`(int index) {
        vec2 uv = vec2((float(index + `).concat(s,") + 0.5) / float(").concat(n,`TexShape[1]), 0.5);
        return sampleTexture(`).concat(n,`, uv);
      }
    `):`
      float `.concat(r,`(int index) {
        vec2 uv = vec2((float(index + `).concat(s,") + 0.5) / ").concat(o,`.0, 0.5);
        return sampleTexture(`).concat(n,`, uv);
      }
    `):t?`
    float `.concat(r,`(int index) {
      vec2 uv = uvFromFlat(`).concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(s,`);
      return sampleTexture(`).concat(n,`, uv);
    }
  `):`
    float `.concat(r,`(int index) {
      vec2 uv = uvFromFlat(`).concat(i,", ").concat(o,", index + ").concat(s,`);
      return sampleTexture(`).concat(n,`, uv);
    }
  `)}function cTe(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=i[0],s=i[1],u=va();if(i!=null&&S.util.arraysEqual(n,i))return t?`
      vec4 `.concat(a,`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`).concat(r,"TexShape[1], ").concat(r,`TexShape[0]);

        return `).concat(u.texture2D,"(").concat(r,`, uv);
      }
    `):`
      vec4 `.concat(a,`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`).concat(s,".0, ").concat(o,`.0);

        return `).concat(u.texture2D,"(").concat(r,`, uv);
      }
    `);if(t)return`
    vec4 `.concat(a,`(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(`).concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,`TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(`).concat(r,`Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return `).concat(u.texture2D,"(").concat(r,`, uv);
    }
  `);var l=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],c=Math.ceil(n[1]/2);return`
    vec4 `.concat(a,`(int row, int col) {
      vec2 uv = packedUVfrom2D(`).concat(c,", ").concat(l[0],", ").concat(l[1],`, row, col);
      return `).concat(u.texture2D,"(").concat(r,`, uv);
    }
  `)}function pTe(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape;if(i!=null&&S.util.arraysEqual(n,i)){if(t)return`
      float `.concat(a,`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`).concat(r,"TexShape[1], ").concat(r,`TexShape[0]);
        return sampleTexture(`).concat(r,`, uv);
      }
    `);var o=i[0],s=i[1];return`
    float `.concat(a,`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`).concat(s,".0, ").concat(o,`.0);
      return sampleTexture(`).concat(r,`, uv);
    }
  `)}var u=S.util.squeezeShape(n),l=u.newShape,c=u.keptDims,p=l;if(p.length<n.length){var d=Yp(e,p),f=["row","col"];return`
      `.concat(Kp(d,t),`
      float `).concat(a,`(int row, int col) {
        return `).concat(a,"(").concat(Jp(f,c),`);
      }
    `)}if(e.shapeInfo.isUniform)return`
      float `.concat(a,`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`).concat(n[1],`, 1)));
        `).concat(Xp(e),`
      }
    `);var h=i[0],m=i[1],v=hc(r);return m===1?t?`
      float `.concat(a,`(int row, int col) {
        float index = dot(vec3(row, col, `).concat(v,"), vec3(").concat(r,`Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(`).concat(r,`TexShape[0]));
        return sampleTexture(`).concat(r,`, uv);
      }
    `):`
    float `.concat(a,`(int row, int col) {
      float index = dot(vec3(row, col, `).concat(v,"), vec3(").concat(n[1],`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `).concat(h,`.0);
      return sampleTexture(`).concat(r,`, uv);
    }
  `):h===1?t?`
      float `.concat(a,`(int row, int col) {
        float index = dot(vec3(row, col, `).concat(v,"), vec3(").concat(r,`Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(`).concat(r,`TexShape[1]), 0.5);
        return sampleTexture(`).concat(r,`, uv);
      }
    `):`
    float `.concat(a,`(int row, int col) {
      float index = dot(vec3(row, col, `).concat(v,"), vec3(").concat(n[1],`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `).concat(m,`.0, 0.5);
      return sampleTexture(`).concat(r,`, uv);
    }
  `):t?`
      float `.concat(a,`(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `).concat(r,"Shape[1] + col + ").concat(v,`;
        vec2 uv = uvFromFlat(`).concat(r,"TexShape[0], ").concat(r,`TexShape[1], index);
        return sampleTexture(`).concat(r,`, uv);
      }
    `):`
  float `.concat(a,`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `).concat(n[1]," + col + ").concat(v,`;
    vec2 uv = uvFromFlat(`).concat(h,", ").concat(m,`, index);
    return sampleTexture(`).concat(r,`, uv);
  }
`)}function dTe(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(n[0]===1){var s=n.slice(1),u=[1,2],l=Yp(e,s),c=["b","row","col"];return`
        `.concat(YR(l,t),`
        vec4 `).concat(a,`(int b, int row, int col) {
          return `).concat(a,"(").concat(Jp(c,u),`);
        }
      `)}var p=va();if(t)return`
    vec4 `.concat(a,`(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(`).concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,`TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(`).concat(r,`Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(`).concat(r,`Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return `).concat(p.texture2D,"(").concat(r,`, uv);
    }
  `);var d=o[0],f=o[1],h=Math.ceil(n[2]/2),m=h*Math.ceil(n[1]/2);return`
    vec4 `.concat(a,`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `).concat(d,", ").concat(f,", ").concat(m,", ").concat(h,`, b, row, col);
      return `).concat(p.texture2D,"(").concat(r,`, uv);
    }
  `)}function fTe(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],o=n[2],s=S.util.squeezeShape(n),u=s.newShape,l=s.keptDims,c=u;if(c.length<n.length){var p=Yp(e,c),d=["row","col","depth"];return`
        `.concat(Kp(p,t),`
        float `).concat(a,`(int row, int col, int depth) {
          return `).concat(a,"(").concat(Jp(d,l),`);
        }
      `)}if(e.shapeInfo.isUniform)return`
      float `.concat(a,`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`).concat(i,", ").concat(o,`, 1)));
        `).concat(Xp(e),`
      }
    `);var f=e.shapeInfo.texShape,h=f[0],m=f[1],v=e.shapeInfo.flatOffset;if(m===i&&v==null)return t?`
      float `.concat(a,`(int row, int col, int depth) {
        int stride1 = `).concat(r,`Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`).concat(r,"TexShape[1], ").concat(r,`TexShape[0]);
        return sampleTexture(`).concat(r,`, uv);
      }
    `):`
        float `.concat(a,`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`).concat(o,`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`).concat(m,".0, ").concat(h,`.0);
          return sampleTexture(`).concat(r,`, uv);
        }
      `);if(m===o&&v==null)return t?`
      float `.concat(a,`(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(`).concat(r,`Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`).concat(r,"TexShape[1], ").concat(r,`TexShape[0]);
        return sampleTexture(`).concat(r,`, uv);
      }
    `):`
    float `.concat(a,`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`).concat(n[1],`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`).concat(m,".0, ").concat(h,`.0);
      return sampleTexture(`).concat(r,`, uv);
    }
  `);var g=hc(r);return t?`
    float `.concat(a,`(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = `).concat(r,"Shape[1] * ").concat(r,`Shape[2];
      int stride1 = `).concat(r,`Shape[2];
      int index = row * stride0 + col * stride1 + depth + `).concat(g,`;
      vec2 uv = uvFromFlat(`).concat(r,"TexShape[0], ").concat(r,`TexShape[1], index);
      return sampleTexture(`).concat(r,`, uv);
    }
    `):`
      float `.concat(a,`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `).concat(i," + col * ").concat(o," + depth + ").concat(g,`;
        vec2 uv = uvFromFlat(`).concat(h,", ").concat(m,`, index);
        return sampleTexture(`).concat(r,`, uv);
      }
  `)}function hTe(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=va();if(t)return`
    vec4 `.concat(r,`(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(`).concat(n,`Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(`).concat(n,`Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= `).concat(n,`Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(`).concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,`TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return `).concat(a.texture2D,"(").concat(n,`, uv);
    }
  `);for(var i=e.shapeInfo.logicalShape,o=i.length,s=e.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],l=u[0],c=u[1],p=Math.ceil(i[o-1]/2),d=p*Math.ceil(i[o-2]/2),f="int b, int row, int col",h="b * ".concat(d," + (row / 2) * ").concat(p," + (col / 2)"),m=2;m<o-1;m++)f="int b".concat(m,", ")+f,d*=i[o-m-1],h="b".concat(m," * ").concat(d," + ")+h;return`
    vec4 `.concat(r,"(").concat(f,`) {
      int index = `).concat(h,`;
      int texR = index / `).concat(c,`;
      int texC = index - texR * `).concat(c,`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`).concat(c,", ").concat(l,`);
      return `).concat(a.texture2D,"(").concat(n,`, uv);
    }
  `)}function mTe(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],o=n[2]*i,s=n[1]*o,u=S.util.squeezeShape(n),l=u.newShape,c=u.keptDims;if(l.length<n.length){var p=Yp(e,l),d=["row","col","depth","depth2"];return`
      `.concat(Kp(p,t),`
      float `).concat(a,`(int row, int col, int depth, int depth2) {
        return `).concat(a,"(").concat(Jp(d,c),`);
      }
    `)}if(e.shapeInfo.isUniform)return`
      float `.concat(a,`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`).concat(s,", ").concat(o,", ").concat(i,`, 1)));
        `).concat(Xp(e),`
      }
    `);var f=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,m=h[0],v=h[1],g="int stride2 = ".concat(r,"Shape[3];"),y="int stride1 = ".concat(r,"Shape[2] * stride2;"),w="int stride0 = ".concat(r,"Shape[1] * stride1;");if(v===s&&f==null)return t?`
      float `.concat(a,`(int row, int col, int depth, int depth2) {
        `).concat(g,`
        `).concat(y,`
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`).concat(r,"TexShape[1], ").concat(r,`TexShape[0]);
        return sampleTexture(`).concat(r,`, uv);
      }
    `):`
      float `.concat(a,`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`).concat(o,", ").concat(i,`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`).concat(v,".0, ").concat(m,`.0);
        return sampleTexture(`).concat(r,`, uv);
      }
    `);if(v===i&&f==null)return t?`
      float `.concat(a,`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`).concat(r,"Shape[1] * ").concat(r,"Shape[2], ").concat(r,`Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`).concat(r,"TexShape[1], ").concat(r,`TexShape[0]);
        return sampleTexture(`).concat(r,`, uv);
      }
    `):`
      float `.concat(a,`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`).concat(n[1]*n[2],", ").concat(n[2],`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`).concat(v,".0, ").concat(m,`.0);
        return sampleTexture(`).concat(r,`, uv);
      }
    `);var b=hc(r);return t?`
    float `.concat(a,`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      `).concat(g,`
      `).concat(y,`
      `).concat(w,`
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(`).concat(r,"TexShape[0], ").concat(r,"TexShape[1], index + ").concat(b,`);
      return sampleTexture(`).concat(r,`, uv);
    }
  `):`
    float `.concat(a,`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `).concat(s," + col * ").concat(o,` +
          depth * `).concat(i,` + depth2;
      vec2 uv = uvFromFlat(`).concat(m,", ").concat(v,", index + ").concat(b,`);
      return sampleTexture(`).concat(r,`, uv);
    }
  `)}function vTe(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],i=t[3]*a,o=t[2]*i,s=t[1]*o,u=S.util.squeezeShape(t),l=u.newShape,c=u.keptDims;if(l.length<t.length){var p=Yp(e,l),d=["row","col","depth","depth2","depth3"];return`
      `.concat(Kp(p),`
      float `).concat(r,`(int row, int col, int depth, int depth2, int depth3) {
        return `).concat(r,"(").concat(Jp(d,c),`);
      }
    `)}if(e.shapeInfo.isUniform)return`
      float `.concat(r,`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`).concat(s,", ").concat(o,", ").concat(i,", ").concat(a,`)) +
          depth3;
        `).concat(Xp(e),`
      }
    `);var f=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,m=h[0],v=h[1];if(v===s&&f==null)return`
      float `.concat(r,`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`).concat(o,", ").concat(i,", ").concat(a,`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`).concat(v,".0, ").concat(m,`.0);
        return sampleTexture(`).concat(n,`, uv);
      }
    `);if(v===a&&f==null)return`
      float `.concat(r,`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`).concat(t[1]*t[2]*t[3],`,
               `).concat(t[2]*t[3],", ").concat(t[3],`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`).concat(v,".0, ").concat(m,`.0);
        return sampleTexture(`).concat(n,`, uv);
      }
    `);var g=hc(n);return`
    float `.concat(r,`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `).concat(s," + col * ").concat(o," + depth * ").concat(i,` +
          depth2 * `).concat(a," + depth3 + ").concat(g,`;
      vec2 uv = uvFromFlat(`).concat(m,", ").concat(v,`, index);
      return sampleTexture(`).concat(n,`, uv);
    }
  `)}function gTe(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=S.util.squeezeShape(t),i=a.newShape,o=a.keptDims;if(i.length<t.length){var s=Yp(e,i),u=["row","col","depth","depth2","depth3","depth4"];return`
      `.concat(Kp(s),`
      float `).concat(r,`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `).concat(r,"(").concat(Jp(u,o),`);
      }
    `)}var l=t[5],c=t[4]*l,p=t[3]*c,d=t[2]*p,f=t[1]*d;if(e.shapeInfo.isUniform)return`
      float `.concat(r,`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`).concat(f,", ").concat(d,", ").concat(p,", ").concat(c,`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`).concat(l,`, 1)));
        `).concat(Xp(e),`
      }
    `);var h=e.shapeInfo.flatOffset,m=e.shapeInfo.texShape,v=m[0],g=m[1];if(g===f&&h==null)return`
      float `.concat(r,`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`).concat(d,", ").concat(p,", ").concat(c,", ").concat(l,`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`).concat(g,".0, ").concat(v,`.0);
        return sampleTexture(`).concat(n,`, uv);
      }
    `);if(g===l&&h==null)return`
      float `.concat(r,`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`).concat(t[1]*t[2]*t[3]*t[4],`,
               `).concat(t[2]*t[3]*t[4],`,
               `).concat(t[3]*t[4],`,
               `).concat(t[4],`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`).concat(g,".0, ").concat(v,`.0);
        return sampleTexture(`).concat(n,`, uv);
      }
    `);var y=hc(n);return`
    float `.concat(r,`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `).concat(f," + col * ").concat(d," + depth * ").concat(p,` +
          depth2 * `).concat(c," + depth3 * ").concat(l," + depth4 + ").concat(y,`;
      vec2 uv = uvFromFlat(`).concat(v,", ").concat(g,`, index);
      return sampleTexture(`).concat(n,`, uv);
    }
  `)}function Xp(e){var t=e.name,n=S.util.sizeFromShape(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):`
    for (int i = 0; i < `.concat(n,`; i++) {
      if (i == index) {
        return `).concat(t,`[i];
      }
    }
  `)}function yTe(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=e.shapeInfo.logicalShape.length,o=t.logicalShape.length,s=XR(e.shapeInfo.logicalShape,t.logicalShape),u=tn(o),l=o-i,c,p=["x","y","z","w","u","v"];i===0?c="":o<2&&s.length>=1?c="coords = 0;":c=s.map(function(b){return"coords.".concat(p[b+l]," = 0;")}).join(`
`);var d="";o<2&&i>0?d="coords":d=e.shapeInfo.logicalShape.map(function(b,x){return"coords.".concat(p[x+l])}).join(", ");var f="return outputValue;",h=S.util.sizeFromShape(e.shapeInfo.logicalShape),m=h===1,v=S.util.sizeFromShape(t.logicalShape),g=v===1;if(i===1&&!m&&!g)f=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(m&&!g)o===1?f=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:f=`
        return vec4(outputValue.x);
      `;else if(s.length){var y=i-2,w=i-1;s.indexOf(y)>-1&&s.indexOf(w)>-1?f="return vec4(outputValue.x);":s.indexOf(y)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":s.indexOf(w)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 `.concat(a,`() {
      `).concat(u,` coords = getOutputCoords();
      `).concat(c,`
      vec4 outputValue = get`).concat(r,"(").concat(d,`);
      `).concat(f,`
    }
  `)}function bTe(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=t.texShape,o=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===u&&e.shapeInfo.flatOffset==null&&S.util.arraysEqual(o,i))return`
      float `.concat(a,`() {
        return sampleTexture(`).concat(n,`, resultUV);
      }
    `);var l=tn(u),c=XR(e.shapeInfo.logicalShape,t.logicalShape),p=u-s,d,f=["x","y","z","w","u","v"];s===0?d="":u<2&&c.length>=1?d="coords = 0;":d=c.map(function(m){return"coords.".concat(f[m+p]," = 0;")}).join(`
`);var h="";return u<2&&s>0?h="coords":h=e.shapeInfo.logicalShape.map(function(m,v){return"coords.".concat(f[v+p])}).join(", "),`
    float `.concat(a,`() {
      `).concat(l,` coords = getOutputCoords();
      `).concat(d,`
      return get`).concat(r,"(").concat(h,`);
    }
  `)}function tn(e){if(e<=1)return"int";if(e===2)return"ivec2";if(e===3)return"ivec3";if(e===4)return"ivec4";if(e===5)return"ivec5";if(e===6)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function J6(e,t,n){var r=S.util.squeezeShape(t),a=r.newShape,i=r.keptDims,o=t.length,s=e&&o===3&&t[0]===1,u=s?t.slice(1):a,l=!e&&o>1&&!S.util.arraysEqual(t,n)&&a.length<o||s,c=l?u:t;return{useSqueezeShape:l,uniformShape:c,keptDims:i}}function Yp(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function Jp(e,t){return t.map(function(n){return e[n]}).join(", ")}function wTe(e,t,n,r){var a=n.map(function(c,p){var d={logicalShape:c.shape,texShape:c.isUniform?null:c.texData.texShape,isUniform:c.isUniform,isPacked:c.isUniform?!1:c.texData.isPacked,flatOffset:null};return c.texData!=null&&c.texData.slice!=null&&c.texData.slice.flatOffset>0&&(d.flatOffset=c.texData.slice.flatOffset),{name:t.variableNames[p],shapeInfo:d}}),i=a.map(function(c){return c.shapeInfo}),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=LNe(a,o,t),u=IR(e.gl,s),l=e.createProgram(u);return S.env().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:u,source:s,webGLProgram:l,inShapeInfos:i,outShapeInfo:o,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(e.buildVao(l),Object.assign({program:t,fragmentShader:u,source:s,webGLProgram:l,inShapeInfos:i,outShapeInfo:o},ZR(e,t,l)))}function ZR(e,t,n){var r,a,i,o,s=[],u=[],l,c,p,d=null,f=null;f=e.getUniformLocation(n,"NAN",!1),S.env().getNumber("WEBGL_VERSION")===1&&(d=e.getUniformLocation(n,"INFINITY",!1));var h=!1;try{for(var m=ha(t.variableNames),v=m.next();!v.done;v=m.next()){var g=v.value,y={name:g,uniform:e.getUniformLocation(n,g,h),offset:e.getUniformLocation(n,"offset".concat(g),h)};t.enableShapeUniforms&&(y.shape=e.getUniformLocation(n,"".concat(g,"Shape"),h),y.texShape=e.getUniformLocation(n,"".concat(g,"TexShape"),h)),s.push(y)}}catch(k){r={error:k}}finally{try{v&&!v.done&&(a=m.return)&&a.call(m)}finally{if(r)throw r.error}}if(t.enableShapeUniforms&&(l=e.getUniformLocation(n,"outShape",h),p=e.getUniformLocation(n,"outShapeStrides",h),c=e.getUniformLocation(n,"outTexShape",h)),t.customUniforms)try{for(var w=ha(t.customUniforms),b=w.next();!b.done;b=w.next()){var x=b.value;u.push(e.getUniformLocation(n,x.name,h))}}catch(k){i={error:k}}finally{try{b&&!b.done&&(o=w.return)&&o.call(w)}finally{if(i)throw i.error}}return{variablesLocations:s,customUniformLocations:u,infLoc:d,nanLoc:f,outShapeLocation:l,outShapeStridesLocation:p,outTexShapeLocation:c}}function jF(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but ")+"was executed with ".concat(t.length," inputs"));e.forEach(function(n,r){var a=n.logicalShape,i=t[r],o=i.shape;if(!S.util.arraysEqual(a,o))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(a," and ").concat(o," must match"));if(!(n.isUniform&&i.isUniform)){var s=n.texShape,u=i.isUniform?null:i.texData.texShape;if(!S.util.arraysEqual(s,u))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(s," and ").concat(u," must match"))}})}function xTe(e,t,n,r,a){t.program.enableShapeUniforms||(jF(t.inShapeInfos,n),jF([t.outShapeInfo],[r]));var i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(i.texture,o[0],o[1]):e.setOutputMatrixTexture(i.texture,o[0],o[1]),e.setProgram(t.webGLProgram),e.bindVertexArray(t.webGLProgram.vao),S.env().getNumber("WEBGL_VERSION")===1&&t.infLoc!==null&&e.gl.uniform1f(t.infLoc,1/0),t.nanLoc!==null&&e.gl.uniform1f(t.nanLoc,NaN);for(var s=0;s<n.length;++s){var u=n[s],l=t.variablesLocations[s],c=l.uniform,p=l.offset,d=l.shape,f=l.texShape;if(d){var h=J6(t.program.packedInputs,u.shape,u.texData.texShape).uniformShape;switch(h.length){case 1:e.gl.uniform1iv(d,new Int32Array(h));break;case 2:e.gl.uniform2iv(d,new Int32Array(h));break;case 3:e.gl.uniform3iv(d,new Int32Array(h));break;case 4:e.gl.uniform4iv(d,new Int32Array(h));break}}if(f&&e.gl.uniform2i(f,u.texData.texShape[0],u.texData.texShape[1]),c!=null){if(u.isUniform){if(S.util.sizeFromShape(u.shape)<2)e.gl.uniform1f(c,u.uniformValues[0]);else{var m=u.uniformValues;m instanceof Float32Array||(m=new Float32Array(m)),e.gl.uniform1fv(c,m)}continue}u.texData.slice!=null&&p!=null&&e.gl.uniform1i(p,u.texData.slice.flatOffset),e.setInputMatrixTexture(u.texData.texture.texture,c,s)}}var v=t.outShapeLocation;if(v)switch(r.shape.length){case 1:e.gl.uniform1iv(v,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(v,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(v,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(v,new Int32Array(r.shape));break}if(t.outShapeStridesLocation){var g=S.util.computeStrides(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(g));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(g));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(g));break}}if(t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&a)for(var s=0;s<t.program.customUniforms.length;++s){var y=t.program.customUniforms[s],w=t.customUniformLocations[s],b=a[s];if(y.type==="float")e.gl.uniform1fv(w,b);else if(y.type==="vec2")e.gl.uniform2fv(w,b);else if(y.type==="vec3")e.gl.uniform3fv(w,b);else if(y.type==="vec4")e.gl.uniform4fv(w,b);else if(y.type==="int")e.gl.uniform1iv(w,b);else if(y.type==="ivec2")e.gl.uniform2iv(w,b);else if(y.type==="ivec3")e.gl.uniform3iv(w,b);else if(y.type==="ivec4")e.gl.uniform4iv(w,b);else throw Error("uniform type ".concat(y.type," is not supported yet."))}e.executeProgram()}function STe(e,t,n){var r="";t.concat(n).forEach(function(o){var s=o.texData!=null&&o.texData.slice!=null&&o.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!o.isUniform){var u=o.texData.texShape,l=J6(e.packedInputs,o.shape,u),c=l.useSqueezeShape,p=l.uniformShape,d=l.keptDims,f="",h="",m="";if(p.length===1&&e.packedInputs){var v=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];f="".concat(v[0]>1,"_").concat(v[1]>1)}else if(p.length===2&&!e.packedInputs)h="".concat(p[0]>1,"_").concat(p[1]>1);else if(p.length>2&&!e.packedInputs){var g=S.util.computeStrides(p);m="".concat(g[0]===u[1],"_").concat(g[g.length-1]===u[1])}var y=o.shape.length,w=p.length===2&&S.util.arraysEqual(o.shape,u),b=S.util.sizeFromShape(o.shape)===1,x=S.backend_util.getBroadcastDims(o.shape,n.shape),k=!e.packedInputs&&y===n.shape.length&&S.util.arraysEqual(u,n.texData.texShape),N=e.packedInputs||p.length>2?"":"".concat(u[0]>1,"_").concat(u[1]>1);r+="".concat(y,"_").concat(k,"_").concat(c?d:"","_").concat(p.length,"_").concat(b,"_").concat(x,"_").concat(w,"_").concat(f,"_").concat(h,"_").concat(m,"_").concat(N,"_").concat(s)}else{var E=o.isUniform?"uniform":o.texData.texShape;r+="".concat(o.shape,"_").concat(E,"_").concat(s)}});var a=e.userCode,i=e.constructor.name;return i+="_"+r+"_"+a+"".concat(S.env().getNumber("WEBGL_VERSION")),i}function ra(e){return S.env().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}var kTe=function(){function e(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Ah.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=va();this.outputShape=t,this.enableShapeUniforms=ra(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `.concat(this.enableShapeUniforms?L0(["r","c","d"],t):fc(["r","c","d"],t),`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `).concat(n.output,` = result;
      }
    `)}return e}();var NTe=function(){function e(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Ah.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=va();this.outputShape=t,this.enableShapeUniforms=ra(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `.concat(this.enableShapeUniforms?L0(["r","c","d"],t):fc(["r","c","d"],t),`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `).concat(n.output,` = result;
      }
    `)}return e}();var TTe=function(){function e(t){this.variableNames=["A"],this.outTexUsage=bi.DOWNLOAD;var n=va();this.outputShape=t,this.userCode=`
      `.concat(KR,`

      void main() {
        float x = getAAtOutCoords();
        `).concat(n.output,` = encode_float(x);
      }
    `)}return e}();var ETe=function(){function e(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=bi.DOWNLOAD;var n=va();this.outputShape=t,this.userCode=`
      `.concat(KR,`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `).concat(n.output,` = encode_float(x);
      }
    `)}return e}();var ITe={R:0,G:1,B:2,A:3},KF=function(){function e(t,n,r){n===void 0&&(n=!1),r===void 0&&(r="RGBA"),this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];var a=va();this.outputShape=t,this.enableShapeUniforms=ra(this.outputShape.length);var i="result";n&&(i="floor(result * 255. + 0.5)");for(var o="",s=0;s<r.length;s++){var u=r[s];o+=`
          if(offset == `.concat(s,`) {
            result = values[`).concat(ITe[u],`];
          }`)}this.userCode=`
      `.concat(this.enableShapeUniforms?Y6():X6(t),`

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, `).concat(r.length,`);

        flatIndex = idiv(flatIndex, `).concat(r.length,`, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = `).concat(a.texture2D,`(A, uv);
          `).concat(o,`
        }
        `).concat(a.output," = vec4(").concat(i,`, 0., 0., 0.);
      }
    `)}return e}();var CTe=function(){function e(t,n){n===void 0&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=va();this.outputShape=t,this.enableShapeUniforms=ra(this.outputShape.length);var a="",i="result";n&&(i="floor(result * 255. + 0.5)");for(var o=0;o<=1;o++)for(var s=0;s<=1;s++){var u=o*2+s;a+=`
          localCoords = coords;
          if(localCoords[2] + `.concat(s," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(t[2]),`) {
          localCoords[2] += `).concat(s,`;
          if (localCoords[1] + `).concat(o," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(t[1]),`) {
            localCoords[1] += `).concat(o,`;

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = `).concat(r.texture2D,`(A, uv);

            if (offset == 0) {
              result[`).concat(u,`] = values[0];
            } else if (offset == 1) {
              result[`).concat(u,`] = values[1];
            } else if (offset == 2) {
              result[`).concat(u,`] = values[2];
            } else {
              result[`).concat(u,`] = values[3];
            }
          }
        }
        `)}this.userCode=`
        `.concat(this.enableShapeUniforms?Y6():X6(t),`

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          `).concat(a,`

          `).concat(r.output," = ").concat(i,`;
        }
    `)}return e}();function QR(e){var t=va(),n="".concat(t.version,`
    precision highp float;
    `).concat(t.attribute,` vec3 clipSpacePos;
    `).concat(t.attribute,` vec2 uv;
    `).concat(t.varyingVs,` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`);return ER(e,n)}function eO(e){var t=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return _R(e,t)}function tO(e){var t=new Uint16Array([0,1,2,2,1,3]);return AR(e,t)}function Bh(e,t,n,r,a,i){RR(t,n);var o=FR(e),s=e.TEXTURE_2D;return qe(e,function(){return e.bindTexture(s,o)}),qe(e,function(){return e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)}),qe(e,function(){return e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}),qe(e,function(){return e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)}),qe(e,function(){return e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)}),S.env().getNumber("WEBGL_VERSION")===1?qe(e,function(){return e.texImage2D(s,0,r,t,n,0,a,i,null)}):qe(e,function(){return e.texStorage2D(s,1,r,t,n)}),qe(e,function(){return e.bindTexture(e.TEXTURE_2D,null)}),{texture:o,texShape:[n,t]}}function Z6(e){return e.internalFormatFloat}function nO(e,t,n,r){var a=Ae(Ph(t,n),2),i=a[0],o=a[1];return Bh(e,i,o,Z6(r),r.textureFormatFloat,e.FLOAT)}function Q6(e){return e.internalFormatHalfFloat}function rO(e,t,n,r){var a=Ae(Ph(t,n),2),i=a[0],o=a[1];return Bh(e,i,o,Q6(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function ew(e){return e.downloadTextureFormat}function aO(e,t,n,r){var a=Ae(Ph(t,n),2),i=a[0],o=a[1];return Bh(e,i,o,ew(r),e.RGBA,e.UNSIGNED_BYTE)}function tw(e){return e.internalFormatPackedFloat}function iO(e,t,n,r){var a=Ae(Hp(t,n),2),i=a[0],o=a[1];return Bh(e,i,o,tw(r),e.RGBA,e.FLOAT)}function nw(e){return e.internalFormatPackedHalfFloat}function oO(e,t,n,r){var a=Ae(Hp(t,n),2),i=a[0],o=a[1];return Bh(e,i,o,nw(r),e.RGBA,r.textureTypeHalfFloat)}function sO(e,t,n){var r=0,a=3*4,i=3*4+2*4;qe(e,function(){return e.bindBuffer(e.ARRAY_BUFFER,n)});var o=$6(e,t,"clipSpacePos",n,3,i,r);return o&&$6(e,t,"uv",n,2,i,a)}function uO(e,t,n,r,a,i){qe(e,function(){return e.bindTexture(e.TEXTURE_2D,t)});var o,s,u;a instanceof Uint8Array?(o=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,u=e.RGBA):(o=new Float32Array(n*r*4),s=e.FLOAT,u=i.internalFormatPackedFloat),o.set(a),S.env().getNumber("WEBGL_VERSION")===2?qe(e,function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,s,o)}):qe(e,function(){return e.texImage2D(e.TEXTURE_2D,0,u,n,r,0,e.RGBA,s,o)}),qe(e,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function lO(e,t,n){qe(e,function(){return e.bindTexture(e.TEXTURE_2D,t)}),n.data instanceof Uint8Array?S.env().getNumber("WEBGL_VERSION")===2?qe(e,function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)}):qe(e,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)}):S.env().getNumber("WEBGL_VERSION")===2?qe(e,function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)}):qe(e,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)}),qe(e,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function cO(e,t,n,r){var a=e.createBuffer();qe(e,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)});var i=4,o=4,s=i*o*t*n;return qe(e,function(){return e.bufferData(e.PIXEL_PACK_BUFFER,s,e.STREAM_READ)}),qe(e,function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)}),qe(e,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)}),a}function pO(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function dO(e,t,n,r){var a=Ae(Ph(t,n),2),i=a[0],o=a[1],s=4,u=new Uint8Array(kNe(t*n,s));return qe(e,function(){return e.readPixels(0,0,i,o,r.downloadTextureFormat,e.UNSIGNED_BYTE,u)}),new Float32Array(u.buffer)}function fO(e,t,n,r,a,i,o,s){var u=e,l=new Float32Array(NNe(i,o));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}function hO(e,t,n){var r=new Float32Array(t*n*4);return qe(e,function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)}),r}var DTe={__proto__:null,bindVertexProgramAttributeStreams:sO,createBufferFromOutputTexture:cO,createFloat16MatrixTexture:rO,createFloat16PackedMatrixTexture:oO,createFloat32MatrixTexture:nO,createIndexBuffer:tO,createPackedMatrixTexture:iO,createUnsignedBytesMatrixTexture:aO,createVertexBuffer:eO,createVertexShader:QR,downloadByteEncodedFloatMatrixFromOutputTexture:dO,downloadFloat32MatrixFromBuffer:pO,downloadMatrixFromPackedOutputTexture:hO,downloadPackedMatrixFromBuffer:fO,getInternalFormatForFloat16MatrixTexture:Q6,getInternalFormatForFloat16PackedMatrixTexture:nw,getInternalFormatForFloat32MatrixTexture:Z6,getInternalFormatForPackedMatrixTexture:tw,getInternalFormatForUnsignedBytesMatrixTexture:ew,uploadDenseMatrixToTexture:uO,uploadPixelDataToTexture:lO},R0=function(){function e(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];var n=S.env().getNumber("WEBGL_VERSION");if(t!=null?(this.gl=t,kR(n,t)):this.gl=Po(n),t=this.gl,S.env().getNumber("WEBGL_VERSION")===2){var r=t;this.createVertexArray=function(){return qe(r,function(){return r.createVertexArray()})},this.bindVertexArray=function(l){return qe(r,function(){return r.bindVertexArray(l)})},this.deleteVertexArray=function(l){return qe(r,function(){return r.deleteVertexArray(l)})},this.getVertexArray=function(){return qe(r,function(){return r.getParameter(r.VERTEX_ARRAY_BINDING)})}}else if(t!=null){var a=t.getExtension("OES_vertex_array_object");if(a==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=function(){return qe(t,function(){return a.createVertexArrayOES()})},this.bindVertexArray=function(l){return qe(t,function(){return a.bindVertexArrayOES(l)})},this.deleteVertexArray=function(l){return qe(t,function(){return a.deleteVertexArrayOES(l)})},this.getVertexArray=function(){return qe(t,function(){return t.getParameter(a.VERTEX_ARRAY_BINDING_OES)})}}var i="WEBGL_color_buffer_float",o="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),S.env().getNumber("WEBGL_VERSION")===1){var s="OES_texture_float",u="OES_texture_half_float";if(this.textureFloatExtension=Eh(this.gl,s),wi(this.gl,u))this.textureHalfFloatExtension=Eh(this.gl,u);else if(S.env().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(i),wi(this.gl,o))this.colorBufferHalfFloatExtension=Eh(this.gl,o);else if(S.env().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(i="EXT_color_buffer_float",wi(this.gl,i))this.colorBufferFloatExtension=this.gl.getExtension(i);else if(wi(this.gl,o))this.colorBufferHalfFloatExtension=this.gl.getExtension(o);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=eO(this.gl),this.indexBuffer=tO(this.gl),this.framebuffer=OR(this.gl),this.textureConfig=j6(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(e.prototype,"debug",{get:function(){return S.env().getBool("DEBUG")},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){var t=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var n=this.gl;qe(n,function(){return n.finish()}),qe(n,function(){return n.bindFramebuffer(n.FRAMEBUFFER,null)}),qe(n,function(){return n.deleteFramebuffer(t.framebuffer)}),qe(n,function(){return n.bindBuffer(n.ARRAY_BUFFER,null)}),qe(n,function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)}),qe(n,function(){return n.deleteBuffer(t.indexBuffer)}),this.disposed=!0}},e.prototype.createFloat32MatrixTexture=function(t,n){return this.throwIfDisposed(),nO(this.gl,t,n,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(t,n){return this.throwIfDisposed(),rO(this.gl,t,n,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(t,n){return this.throwIfDisposed(),aO(this.gl,t,n,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(t,n){this.throwIfDisposed(),lO(this.gl,t,n)},e.prototype.uploadDenseMatrixToTexture=function(t,n,r,a){this.throwIfDisposed(),uO(this.gl,t,n,r,a,this.textureConfig)},e.prototype.createFloat16PackedMatrixTexture=function(t,n){return this.throwIfDisposed(),oO(this.gl,t,n,this.textureConfig)},e.prototype.createPackedMatrixTexture=function(t,n){return this.throwIfDisposed(),iO(this.gl,t,n,this.textureConfig)},e.prototype.deleteMatrixTexture=function(t){var n=this;this.throwIfDisposed(),this.outputTexture===t&&(V6(this.gl,this.framebuffer),this.outputTexture=null),qe(this.gl,function(){return n.gl.deleteTexture(t)})},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(t,n,r){var a=this;return this.downloadMatrixDriver(t,function(){return dO(a.gl,n,r,a.textureConfig)})},e.prototype.downloadPackedMatrixFromBuffer=function(t,n,r,a,i,o){return fO(this.gl,t,n,r,a,i,o,this.textureConfig)},e.prototype.downloadFloat32MatrixFromBuffer=function(t,n){return pO(this.gl,t,n)},e.prototype.createBufferFromTexture=function(t,n,r){this.bindTextureToFrameBuffer(t);var a=cO(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),a},e.prototype.createAndWaitForFence=function(){var t=this.createFence(this.gl);return this.pollFence(t)},e.prototype.createFence=function(t){var n=this,r,a;if(S.env().getBool("WEBGL_FENCE_API_ENABLED")){var i=t,o=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),a=function(){var s=i.clientWaitSync(o,0,0);return s===i.ALREADY_SIGNALED||s===i.CONDITION_SATISFIED},r=o}else S.env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(r=this.beginQuery(),this.endQuery(),a=function(){return n.isQueryAvailable(r,S.env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):a=function(){return!0};return{query:r,isFencePassed:a}},e.prototype.downloadMatrixFromPackedTexture=function(t,n,r){var a=this;return this.downloadMatrixDriver(t,function(){return hO(a.gl,n,r)})},e.prototype.createProgram=function(t){var n=this;this.throwIfDisposed();var r=this.gl;this.vertexShader==null&&(this.vertexShader=QR(r));var a=CR(r);qe(r,function(){return r.attachShader(a,n.vertexShader)}),qe(r,function(){return r.attachShader(a,t)}),DR(r,a);var i=Object.assign(a,{vao:this.createVertexArray()});return this.debug&&D0(r,i),i},e.prototype.buildVao=function(t){var n=this;this.setProgram(t),this.bindVertexArray(t.vao);var r=this.gl;qe(r,function(){return r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,n.indexBuffer)}),sO(r,t,this.vertexBuffer)},e.prototype.deleteProgram=function(t){var n=this;this.throwIfDisposed(),t===this.program&&(this.program=null),t!=null&&(qe(this.gl,function(){return n.gl.deleteProgram(t)}),this.deleteVertexArray(t.vao))},e.prototype.setProgram=function(t){var n=this;this.throwIfDisposed(),this.program=t,this.program!=null&&this.debug&&D0(this.gl,this.program),qe(this.gl,function(){return n.gl.useProgram(t)})},e.prototype.getUniformLocation=function(t,n,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?PR(this.gl,t,n):BR(this.gl,t,n)},e.prototype.getAttributeLocation=function(t,n){var r=this;return this.throwIfDisposed(),qe(this.gl,function(){return r.gl.getAttribLocation(t,n)})},e.prototype.getUniformLocationNoThrow=function(t,n){return this.throwIfDisposed(),this.gl.getUniformLocation(t,n)},e.prototype.setInputMatrixTexture=function(t,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),LR(this.gl,t,n,r)},e.prototype.setOutputMatrixTexture=function(t,n,r){this.setOutputMatrixTextureDriver(t,r,n)},e.prototype.setOutputPackedMatrixTexture=function(t,n,r){this.throwIfDisposed();var a=Ae(Hp(n,r),2),i=a[0],o=a[1];this.setOutputMatrixTextureDriver(t,i,o)},e.prototype.setOutputMatrixWriteRegion=function(t,n,r,a){this.setOutputMatrixWriteRegionDriver(r,t,a,n)},e.prototype.setOutputPackedMatrixWriteRegion=function(t,n,r,a){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){this.program!=null&&D0(this.gl,this.program),Ih(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var t=this.gl;if(this.debug){var n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}qe(t,function(){return t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)})},e.prototype.blockUntilAllProgramsCompleted=function(){var t=this;this.throwIfDisposed(),qe(this.gl,function(){return t.gl.finish()})},e.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Eh(this.gl,S.env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if(S.env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var t=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=t.createQuery();return t.beginQuery(n.TIME_ELAPSED_EXT,r),r}var a=this.getQueryTimerExtensionWebGL1(),i=a.createQueryEXT();return a.beginQueryEXT(a.TIME_ELAPSED_EXT,i),i},e.prototype.endQuery=function(){if(S.env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT);return}var r=this.getQueryTimerExtensionWebGL1();r.endQueryEXT(r.TIME_ELAPSED_EXT)},e.prototype.waitForQueryAndGetTime=function(t){return Gp(this,void 0,void 0,function(){var n=this;return qp(this,function(r){switch(r.label){case 0:return[4,S.util.repeatedTry(function(){return n.disposed||n.isQueryAvailable(t,S.env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return r.sent(),[2,this.getQueryTime(t,S.env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},e.prototype.getQueryTime=function(t,n){if(n===0)return null;if(n===2){var r=this.gl,a=r.getQueryParameter(t,r.QUERY_RESULT);return a/1e6}else{var i=this.getQueryTimerExtensionWebGL1(),a=i.getQueryObjectEXT(t,i.QUERY_RESULT_EXT);return a/1e6}},e.prototype.isQueryAvailable=function(t,n){if(n===0)return!0;if(n===2){var r=this.gl,a=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(t,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),i&&!this.disjoint}else{var a=this.getQueryTimerExtensionWebGL1(),i=a.getQueryObjectEXT(t,a.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),i&&!this.disjoint}},e.prototype.pollFence=function(t){var n=this;return new Promise(function(r){n.addItemToPoll(function(){return t.isFencePassed()},function(){return r()})})},e.prototype.pollItems=function(){for(var t=_Te(this.itemsToPoll.map(function(a){return a.isDoneFn})),n=0;n<=t;++n){var r=this.itemsToPoll[n].resolveFn;r()}this.itemsToPoll=this.itemsToPoll.slice(t+1)},e.prototype.addItemToPoll=function(t,n){var r=this;if(this.itemsToPoll.push({isDoneFn:t,resolveFn:n}),!(this.itemsToPoll.length>1)){var a=void 0;"setTimeoutCustom"in S.env().platform&&(a=S.env().platform.setTimeoutCustom.bind(S.env().platform)),S.util.repeatedTry(function(){return r.pollItems(),r.itemsToPoll.length===0},function(){return 0},null,a)}},e.prototype.bindTextureToFrameBuffer=function(t){this.throwIfDisposed(),_0(this.gl,t,this.framebuffer),this.debug&&Ih(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(_0(this.gl,this.outputTexture,this.framebuffer),this.debug&&Ih(this.gl)):V6(this.gl,this.framebuffer)},e.prototype.downloadMatrixDriver=function(t,n){this.bindTextureToFrameBuffer(t);var r=n();return this.unbindTextureToFrameBuffer(),r},e.prototype.setOutputMatrixTextureDriver=function(t,n,r){this.throwIfDisposed();var a=this.gl;_0(a,t,this.framebuffer),this.debug&&Ih(a),this.outputTexture=t,qe(a,function(){return a.viewport(0,0,n,r)}),qe(a,function(){return a.scissor(0,0,n,r)})},e.prototype.setOutputMatrixWriteRegionDriver=function(t,n,r,a){var i=this;this.throwIfDisposed(),qe(this.gl,function(){return i.gl.scissor(t,n,r,a)})},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},e}();function _Te(e){for(var t=0;t<e.length;++t){var n=e[t]();if(!n)break}return t-1}function ATe(e){for(var t=new Float32Array(e.length),n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}function xi(e){return function(t,n,r,a,i){var o=S.backend_util.assertAndGetBroadcastShape(t,n),s=o.length,u=S.util.computeStrides(o),l=S.util.sizeFromShape(o),c=S.util.getTypedArrayFromDType(i,l),p=t.length,d=n.length,f=S.util.computeStrides(t),h=S.util.computeStrides(n),m=S.backend_util.getBroadcastDims(t,o),v=S.backend_util.getBroadcastDims(n,o);if(m.length+v.length===0)for(var g=0;g<c.length;++g)c[g]=e(r[g%r.length],a[g%a.length]);else for(var y=function(w){var b=S.util.indexToLoc(w,s,u),x=b.slice(-p);m.forEach(function(C){return x[C]=0});var k=S.util.locToIndex(x,p,f),N=b.slice(-d);v.forEach(function(C){return N[C]=0});var E=S.util.locToIndex(N,d,h);c[w]=e(r[k],a[E])},g=0;g<c.length;++g)y(g);return[c,o]}}function FTe(e,t,n,r){if(r==="int32"){var a=Int32Array.from(e);return[t,"int32",a]}if(r==="bool"){var i=S.util.toTypedArray([0],n),o=Ae(xi(function(l,c){return l!==c?1:0})(t,[],e,i,"bool"),2),s=o[0],u=o[1];return[u,"bool",s]}throw new Error("Error in Cast: failed to cast ".concat(n," to ").concat(r))}var RTe=xi(function(e,t){return e+t});function OTe(e,t,n,r,a){for(var i=S.util.sizeFromShape(r),o=S.util.makeZerosTypedArray(a,n),s=0;s<e.length;s++){var u=e[s];if(u<0)throw new Error("Input x must be non-negative!");u>=a||(i>0?o[u]+=t[s]:o[u]+=1)}return o}function MTe(e,t,n,r){r===void 0&&(r=!1);for(var a=e.shape[0],i=e.shape[1],o=S.buffer([a,n],t.dtype),s=0;s<a;s++)for(var u=0;u<i;u++){var l=e.get(s,u);if(l<0)throw new Error("Input x must be non-negative!");l>=n||(r?o.set(1,s,l):t.size>0?o.set(o.get(s,l)+t.get(s,u),s,l):o.set(o.get(s,l)+1,s,l))}return o}var PTe=xi(function(e,t){return e&t});function Hs(e){return function(t,n,r){for(var a=S.util.getArrayFromDType(n,t.length),i=0;i<t.length;++i)a[i]=e(t[i],r);return a}}var BTe=Hs(function(e){return Math.ceil(e)});function LTe(e,t,n,r){var a=S.util.getArrayFromDType(n,S.util.sizeFromShape(t));if(r&&n!=="string"){var i=0;e.forEach(function(s){var u=S.util.sizeFromShape(s.shape);a.set(s.vals,i),i+=u})}else{var o=0;e.forEach(function(s){for(var u=n==="string"?S.backend_util.fromUint8ToStringArray(s.vals):s.vals,l=0,c=0;c<s.shape[0];++c)for(var p=c*t[1]+o,d=0;d<s.shape[1];++d)a[p+d]=u[l++];o+=s.shape[1]})}return a}var zTe=xi(function(e,t){return e===t?1:0});var $Te=Hs(function(e){return Math.exp(e)});var VTe=Hs(function(e){return Math.expm1(e)});var WTe=Hs(function(e){return Math.floor(e)});function UTe(e,t,n,r,a,i,o,s,u){for(var l=S.buffer([r,i],n),c=0;c<r;c++){for(var p=[],d=0,f=0;f<a;f++){var h=e[c*a+f];d+=h*o[f],p.push(h)}if(d<0||d>=u/i)throw new Error("Invalid indices: ".concat(p," does not index into ").concat(s));for(var m=0;m<i;m++)l.values[c*i+m]=t.get.apply(t,$n([],Ae(t.indexToLoc(d*i+m)),!1))}return l}function GTe(e,t,n){for(var r=S.buffer(n,e.dtype),a=0;a<r.size;++a){var i=r.indexToLoc(a),o=i.slice(),s=o[0],u=o[2],l=t.locToIndex([s,u]);o[2]=t.values[l];var c=e.locToIndex(o);0<=c&&c<e.values.length&&(r.values[a]=e.values[c])}return r}var qTe=xi(function(e,t){return e>t?1:0});var HTe=xi(function(e,t){return e>=t?1:0});var jTe=xi(function(e,t){return e<t?1:0});var KTe=xi(function(e,t){return e<=t?1:0});function XTe(e,t,n){var r=(t-e)/(n-1),a=S.util.makeZerosTypedArray(n,"float32");a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+r;return a}var YTe=Hs(function(e){return Math.log(e)});function JTe(e,t,n,r){for(var a=S.util.getTypedArrayFromDType(r,S.util.sizeFromShape(n)),i=0;i<a.length;++i){for(var o=i*t,s=e[o],u=0;u<t;++u){var l=e[o+u];(Number.isNaN(l)||l>s)&&(s=l)}a[i]=s}return a}var ZTe=xi(function(e,t){return Math.max(e,t)});var QTe=xi(function(e,t){return Math.min(e,t)});var mO=xi(function(e,t){return e*t});function eEe(e,t,n){var r=S.util.createScalarValue(-1,n);return mO([],t,r,e,n)}var tEe=xi(function(e,t){return e!==t?1:0});function nEe(e,t,n,r,a){for(var i=t.length,o=S.util.sizeFromShape(t),s=S.util.computeStrides(t),u=S.util.computeStrides(a),l=S.util.getTypedArrayFromDType(n,S.util.sizeFromShape(a)),c=0;c<o;++c){for(var p=S.util.indexToLoc(c,i,s),d=new Array(p.length),f=0;f<d.length;f++)d[f]=p[r[f]];var h=S.util.locToIndex(d,i,u);l[h]=e[c]}return l}function rEe(e,t,n,r){for(var a=Ae(S.backend_util.computeOutAndReduceShapes(e,r),2),i=a[0],o=a[1],s=S.upcastType(t,"int32"),u=S.util.makeZerosTypedArray(S.util.sizeFromShape(i),s),l=S.util.sizeFromShape(o),c=0;c<u.length;++c){for(var p=c*l,d=1,f=0;f<l;++f)d*=n[p+f];u[c]=d}return{outVals:u,outShape:i,outDtype:s}}function aEe(e,t,n){e.forEach(function(r,a){if(r<0||r>=n){var i=S.util.indexToLoc(a,t.length,S.util.computeStrides(t)).join(",");throw new Error("indices[".concat(i,"] = ").concat(r," is not in [0, ").concat(n,")"))}})}function iEe(e,t){for(var n=0;n<e.length;++n){var r=e[n],a=n===e.length-1?t:e[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>a)throw new Error("Ragged splits must not point past values");for(var i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}function oEe(e,t,n,r){var a=[],i=0,o=t.length-1+n.length,s=new Array(o).fill(null).map(function(){return[0]});iEe(n,r);for(var u=1,l=0;l<t.length-1;++l){u*=t[l];for(var c=t[l+1],p=1;p<u+1;++p)s[l].push(p*c)}for(var p=0;p<e.length;++p){for(var d=e[p],f=e[p]+1,l=0;l<n.length;++l){var h=n[l],m=l+t.length-1;if(m>=0)for(var v=s[m],g=v[v.length-1]-h[d],y=d;y<f;++y)s[m].push(h[y+1]+g);d=h[d],f=h[f]}f!==d&&(a.push([d,f]),i+=f-d)}return{outSplits:s,valueSlices:a,numValues:i}}function sEe(e){for(var t=[],n=function(a){var i=e[a].length,o=S.util.getArrayFromDType("int32",i);t.push(o),e[a].forEach(function(s,u){return o[u]=s})},r=0;r<e.length;++r)n(r);return t}function XF(e,t){for(var n=e.slice(0,t);n.length<t;)n.push(1);for(var r=t;r<e.length;r++)n[t-1]*=e[r];return n}function uEe(e,t,n,r,a,i){var o,s,u=XF(t,2)[1],l=XF(i,2)[1],c=0;try{for(var p=ha(n),d=p.next();!d.done;d=p.next())for(var f=d.value,h=f[0];h<f[1];++h){for(var m=0;m<r;++m)a[c*l+m]=e[h*u+m];++c}}catch(v){o={error:v}}finally{try{d&&!d.done&&(s=p.return)&&s.call(p)}finally{if(o)throw o.error}}}function lEe(e,t,n,r,a){var i=t.slice();i[0]=a;var o=S.util.getArrayFromDType(n,S.util.sizeFromShape(i)),s=e.length,u=s===0?0:s/t[0];return uEe(e,t,r,u,o,i),[o,i]}function cEe(e,t,n,r,a,i,o,s){if(e.length===0)throw new Error("paramsNestedSplits must be non empty");if(t[0].length===0)throw new Error("Split tensors must not be scalars");var u=t[0][0]-1;if(aEe(i,o,u),r.length===0)throw new Error("params.rank must be nonzero");var l=r[0],c=oEe(i,o,e,l),p=c.outSplits,d=c.valueSlices,f=c.numValues,h=sEe(p),m=lEe(n,r,a,d,f);return[h,m[0],m[1]]}var YF=2147483647;function pEe(e,t,n,r,a,i,o){if(t.length>1)throw new Error("starts must be a scalar or vector");if(a.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");var s=t.length===0,u=a.length===0,l=o.length===0,c=[];s||c.push(t[0]),u||c.push(a[0]),l||c.push(o[0]);for(var p=1;p<c.length;++p)if(c[p]!==c[p-1])throw new Error("starts, limits, and deltas must have the same shape");var d=c.length===0?1:c[0],f=S.util.getArrayFromDType("int32",d+1);f[0]=0;for(var h=0;h<d;++h){var m=s?e[0]:e[h],v=u?r[0]:r[h],g=l?i[0]:i[h];if(g===0)throw new Error("Requires delta != 0");var y=void 0;if(g>0&&v<m||g<0&&v>m)y=0;else if(y=Math.ceil(Math.abs((v-m)/g)),y>YF)throw new Error("Requires ((limit - start) / delta) <= ".concat(YF));f[h+1]=f[h]+y}for(var w=f[d],b=S.util.getArrayFromDType(n,w),x=0,h=0;h<d;++h)for(var k=f[h+1]-f[h],N=s?e[0]:e[h],g=l?i[0]:i[h],p=0;p<k;++p)b[x++]=N,N+=g;return[f,b]}var io=S.backend_util.RowPartitionType,dEe=function(){function e(t,n,r,a,i,o,s,u,l,c){this.shape=t,this.shapeShape=n,this.values=r,this.valuesShape=a,this.valuesDType=i,this.defaultValue=o,this.defaultValueShape=s,this.rowPartitionValues=u,this.rowPartitionValuesShapes=l,this.rowPartitionTypes=S.backend_util.getRowPartitionTypesHelper(c),this.raggedRank=S.backend_util.getRaggedRank(this.rowPartitionTypes)}return e.prototype.getRowPartitionTypeByDimension=function(t){return this.rowPartitionTypes[0]===io.FIRST_DIM_SIZE?this.rowPartitionTypes[t+1]:this.rowPartitionTypes[t]},e.prototype.getRowPartitionTensor=function(t){return this.rowPartitionTypes[0]===io.FIRST_DIM_SIZE?this.rowPartitionValues[t+1]:this.rowPartitionValues[t]},e.prototype.getMaxWidth=function(t){var n=this.getRowPartitionTensor(t-1);switch(this.getRowPartitionTypeByDimension(t-1)){case io.VALUE_ROWIDS:return e.getMaxWidthValueRowID(n);case io.ROW_SPLITS:return e.getMaxWidthRowSplit(n);default:throw new Error("Cannot handle partition type ".concat(io[this.getRowPartitionTypeByDimension(t-1)]))}},e.getMaxWidthRowSplit=function(t){var n=t.length;if(n===0||n===1)return 0;for(var r=0,a=0;a<n-1;++a){var i=t[a+1]-t[a];i>r&&(r=i)}return r},e.getMaxWidthValueRowID=function(t){var n=t.length;if(n===0)return 0;for(var r=0,a=t[0],i=0,o=1;o<n;++o){var s=t[o];s!==a&&(a=s,i=Math.max(o-r,i),r=o)}return Math.max(n-r,i)},e.prototype.tensorShapeFromTensor=function(t,n,r){if(r===void 0&&(r=!0),n.length===0){if(t[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return ZF(t,r)},e.prototype.calculateOutputSize=function(t){var n=this.valuesShape,r=this.defaultValueShape;S.backend_util.validateDefaultValueShape(r,n);var a=this.tensorShapeFromTensor(this.shape,this.shapeShape),i=S.backend_util.combineRaggedTensorToTensorShapes(this.raggedRank,a,n),o=i;o[0]<0&&(o[0]=t);for(var s=1;s<=this.raggedRank;++s)o[s]<0&&(o[s]=this.getMaxWidth(s));return o},e.prototype.calculateFirstParentOutputIndex=function(t,n,r){for(var a=Math.min(t,r),i=[],o=0,s=0;s<a;++s,o+=n)i.push(o);for(var s=a;s<t;++s)i.push(-1);return S.util.assert(i.length===t,function(){return"Final length of result must be equal to firstDimension."}),i},e.prototype.calculateOutputIndexRowSplit=function(t,n,r,a){for(var i=t.length,o=[],s=0;s<i-1;++s){var u=t[s+1]-t[s],l=Math.min(a,u),c=n[s];c===-1&&(l=0);for(var p=0;p<l;++p)o.push(c),c+=r;for(var p=0;p<u-l;++p)o.push(-1)}if(i>0&&o.length!==t[i-1])throw new Error("Invalid row split size.");return o},e.prototype.calculateOutputIndexValueRowID=function(t,n,r,a){var i=t.length,o=[];if(i===0)return[];var s=0,u=t[0];if(u>=n.length)throw new Error("Got currentValueRowId=".concat(u,", which is not less than ").concat(n.length));var l=n[u];o.push(l);for(var c=1;c<i;++c){var p=t[c];if(p===u)l>=0&&(++s,s<a?l+=r:l=-1);else{if(s=0,u=p,p>=n.length)throw new Error("Got nextValueRowId=".concat(p," which is not less than ").concat(n.length));l=n[p]}o.push(l)}if(o.length!==t.length)throw new Error("Invalid row ids.");return o},e.prototype.calculateOutputIndex=function(t,n,r,a){var i=this.getRowPartitionTensor(t),o=this.getRowPartitionTypeByDimension(t);switch(o){case io.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,n,r,a);case io.ROW_SPLITS:if(i.length-1>n.length)throw new Error("Row partition size is greater than output size: ".concat(i.length-1," > ").concat(n.length));return this.calculateOutputIndexRowSplit(i,n,r,a);default:throw new Error("Unsupported partition type: ".concat(io[o]))}},e.prototype.getFirstDimensionSize=function(){var t=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");var n=this.rowPartitionTypes[0];switch(n){case io.FIRST_DIM_SIZE:return t[0];case io.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case io.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error("Cannot handle type ".concat(io[n]))}},e.prototype.compute=function(){var t=this.rowPartitionValues[0];if(t.length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");var n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),a=new Array(this.raggedRank+1);a[a.length-1]=1;for(var i=a.length-2;i>=0;--i)a[i]=a[i+1]*r[i+1];var o=ZF(r,!1),s=S.util.getArrayFromDType(this.valuesDType,S.util.sizeFromShape(o)),u=a[0]*r[0];if(u>0){for(var l=this.calculateFirstParentOutputIndex(n,a[0],r[0]),i=1;i<=this.raggedRank;++i){var c=this.calculateOutputIndex(i-1,l,a[i],r[i]);l=c}this.setOutput(this.raggedRank,l,s,o)}return[o,s]},e.prototype.setOutput=function(t,n,r,a){if(r.length!==0){var i=this.values,o=r,s=a.slice();s=s.slice(t+1);var u=S.util.sizeFromShape(s),l=n.length,c=this.defaultValue;if(c.length!==u&&c.length!==1){var p=this.defaultValueShape;S.tidy(function(){var x=S.reshape(c,p),k=S.broadcastTo(x,s);c=k.dataSync()})}for(var d=0,f=0,h=0,m=0;m<=l;++m){var v=m<l?n[m]:-1;if(v===h){++h;continue}if(f<h){var g=i.subarray(d*u),y=o.subarray(f*u),w=(h-f)*u;JF(y,g,w)}if(m>=l){var b=r.length;v=Math.floor(b/u)}if(v>h)if(this.defaultValue.length===1)o.subarray(h*u,v*u).fill(this.defaultValue[0]),h=v;else for(;v>h;){var y=o.slice(h*u);JF(y,c,u),++h}v<0?(d=m+1,f=h):(d=m,f=h,h=f+1)}}},e}();function JF(e,t,n){for(var r=0;r<n;r++)e[r]=t[r]}function ZF(e,t){var n,r,a=[];try{for(var i=ha(e),o=i.next();!o.done;o=i.next()){var s=o.value;if(s<0){if(!t)throw new Error("Dimension ".concat(s," must be >= 0"));if(s<-1)throw new Error("Dimension ".concat(s," must be >= -1"));s=-1}a.push(s)}}catch(u){n={error:u}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return a}function fEe(e,t,n,r,a,i,o,s,u,l){return new dEe(e,t,n,r,a,i,o,s,u,l).compute()}function hEe(e,t,n,r){var a=e===t,i=e<t&&n<0,o=t<e&&n>1;if(a||i||o)return S.util.makeZerosTypedArray(0,r);var s=Math.abs(Math.ceil((t-e)/n)),u=S.util.makeZerosTypedArray(s,r);t<e&&n===1&&(n=-1),u[0]=e;for(var l=1;l<u.length;l++)u[l]=u[l-1]+n;return u}var mEe=Hs(function(e){return 1/Math.sqrt(e)});function vEe(e,t,n,r,a,i,o,s,u,l){var c=[r/a,a],p=e.values,d=t.values;if(r===0)return S.buffer(n,t.dtype);var f=u instanceof S.TensorBuffer?u:S.buffer(c,t.dtype);typeof u=="string"||typeof u=="number"?f.values.fill(u):typeof u=="boolean"&&f.values.fill(+u);for(var h=0;h<i;h++){for(var m=[],v=0,g=0;g<o;g++){var y=p[h*o+g];m.push(y),v+=y*s[g]}if(v<0||v>=r/a)throw new Error("Invalid indices: ".concat(m," does not index into ").concat(n));for(var w=0;w<a;w++)l?f.values[v*a+w]+=d[h*a+w]:f.values[v*a+w]=t.rank===0?d[0]:d[h*a+w]}return f}var gEe=Hs(function(e){return 1/(1+Math.exp(-e))});function yEe(e,t,n,r,a){var i=S.slice_util.isSliceContinous(r,t,n),o=S.util.sizeFromShape(n),s=S.util.computeStrides(r);if(i){var u=S.slice_util.computeFlatOffset(t,s);return a==="string"?e.slice(u,u+o):e.subarray(u,u+o)}for(var l=a==="string"?S.backend_util.fromUint8ToStringArray(e):e,c=S.buffer(r,a,l),p=S.buffer(n,a),d=0;d<p.size;++d){var f=p.indexToLoc(d),h=f.map(function(m,v){return m+t[v]});p.set.apply(p,$n([c.get.apply(c,$n([],Ae(h),!1))],Ae(f),!1))}return a==="string"?S.backend_util.fromStringArrayToUint8(p.values):p.values}function bEe(e,t,n,r,a,i,o){var s=t[0],u=i[0],l=new Array(u),c=new Array(s),p=t[1];if(u===0){if(s!==0)throw new Error(S.backend_util.getSparseFillEmptyRowsIndicesDenseShapeMismatch(s));var d=S.util.getArrayFromDType(n,0),f=S.util.getArrayFromDType(a,0);return[d,[0,p],f,l,c]}for(var h=!0,m=0,v=new Array(u).fill(0),g=0;g<s;++g){var y=e[g*p];if(y<0)throw new Error(S.backend_util.getSparseFillEmptyRowsNegativeIndexErrorMessage(g,y));if(y>=u)throw new Error(S.backend_util.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(g,y,u));++v[y],h=h&&y>=m,m=y}for(var w=!0,y=0;y<u;++y){var b=v[y]===0;l[y]=b,w=w&&!b,v[y]=Math.max(v[y],1),y>0&&(v[y]+=v[y-1])}if(w&&h){for(var d=e,f=r,g=0;g<s;++g)c[g]=g;return[d,[s,p],f,l,c]}else{for(var x=v[u-1],d=S.util.getArrayFromDType(n,x*p),f=S.util.getArrayFromDType(a,x),k=new Array(u).fill(0),g=0;g<s;++g){var y=e[g*p],N=k[y],E=(y===0?0:v[y-1])+N;k[y]++;for(var C=0;C<p;++C)d[E*p+C]=e[g*p+C];f[E]=r[g],c[g]=E}for(var y=0;y<u;++y){var R=k[y];if(R===0){var A=y===0?0:v[y-1];d[A*p+0]=y;for(var M=1;M<p;++M)d[A*p+M]=0;f[A]=o}}return[d,[x,p],f,l,c]}}function wEe(e,t,n,r,a){for(var i=S.util.sizeFromShape(r),o=t[0],s=a.length,u=[],l=1,c=-1,p=0;p<s;++p){var d=a[p];if(d===-1){if(c!==-1)throw new Error(S.backend_util.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(c,p));c=p,u.push(1)}else{if(d<0)throw new Error(S.backend_util.getSparseReshapeNegativeOutputDimErrorMessage(p,d));l*=d,u.push(d)}}if(c!==-1){if(l<=0)throw new Error(S.backend_util.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());var f=Math.trunc(i/l);if(l*f!==i)throw new Error(S.backend_util.getSparseReshapeInputOutputMultipleErrorMessage(r,u));u[c]=f}var h=S.util.sizeFromShape(u);if(h!==i)throw new Error(S.backend_util.getSparseReshapeInputOutputMismatchErrorMessage(r,u));var m=r.length,v=[];if(m>0){v[m-1]=1;for(var p=m-2;p>=0;--p)v[p]=v[p+1]*r[p+1]}var g=[];if(s>0){g[s-1]=1;for(var p=s-2;p>=0;--p)g[p]=g[p+1]*u[p+1]}for(var y=S.util.getArrayFromDType(n,o*s),w=0;w<o;++w){for(var b=0,x=0;x<m;++x)b+=e[w*m+x]*v[x];for(var x=0;x<s;++x)y[w*s+x]=Math.trunc(b/g[x]),b%=g[x]}return[y,[o,s],u]}function xEe(e,t,n,r,a,i,o){i===void 0&&(i=!1),o===void 0&&(o=0);var s=r.length,u=[t[0],e.length/t[0]],l=u[1],c=s>0?a[s-1]+1:0,p=c;if(p<0)throw new Error(S.backend_util.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());var d=t.slice();d[0]=p;var f=d.reduce(function(N,E){return N*E},1),h=S.util.getArrayFromDType(n,f);if(s===0)return p>0&&h.fill(o),[h,d];if(p<=0)throw new Error(S.backend_util.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());for(var m=0,v=1,g=0,y=a[m];;){var w=0;if(v<s){if(w=a[v],y===w){++v;continue}if(y>=w)throw new Error(S.backend_util.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(y<0||y>=p)throw new Error(S.backend_util.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(y,p));y>g&&h.fill(o,g*l,y*l);for(var b=m;b<v;++b){var x=r[b];if(x<0||x>=u[0])throw new Error(S.backend_util.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(b,r[b],u[0]));for(var k=0;k<l;k++)h[y*l+k]+=e[x*l+k]}if(i)for(var k=0;k<l;k++)h[y*l+k]/=v-m;if(m=v,++v,g=y+1,y=w,v>s)break}return g<p&&h.fill(o,g*l,p*l),[h,d]}var SEe=Hs(function(e){return Math.sqrt(e)});var kEe=Hs(function(e,t){var n=t.pattern,r=t.replaceGlobal,a=t.rewrite;return e.replace(new RegExp(n,r?"g":""),a)});function NEe(e,t,n,r){for(var a=S.buffer(e,t.dtype),i=0;i<a.size;i++){for(var o=a.indexToLoc(i),s=new Array(o.length),u=0;u<s.length;u++)s[u]=o[u]*n[u]+r[u];a.set.apply(a,$n([t.get.apply(t,$n([],Ae(s),!1))],Ae(o),!1))}return a}var TEe=function(){function e(t,n,r,a,i,o){this.separator=S.util.encodeString(t),this.nGramWidths=n,this.leftPad=S.util.encodeString(r),this.rightPad=S.util.encodeString(a),this.padWidth=i,this.preserveShort=o}return e.prototype.getPadWidth=function(t){return Math.min(this.padWidth<0?t-1:this.padWidth,t-1)},e.prototype.getNumNGrams=function(t,n){var r=this.getPadWidth(n);return Math.max(0,t+2*r-n+1)},e.prototype.createNGrams=function(t,n,r,a,i,o){for(var s=function(c){var p=u.getPadWidth(o),d=Math.max(0,p-c),f=Math.max(0,p-(i-(c+1))),h=o-(d+f),m=n+(d>0?0:c-p),v=0;v+=d*u.leftPad.length;for(var g=0;g<h;++g)v+=t[m+g].length;v+=f*u.rightPad.length;var y=d+f+h-1;v+=y*u.separator.length,r[a+c]=new Uint8Array(v);for(var w=r[a+c],b=0,x=function(k){return k.forEach(function(N){return w[b++]=N})},g=0;g<d;++g)x(u.leftPad),x(u.separator);for(var g=0;g<h-1;++g)x(t[m+g]),x(u.separator);if(h>0){x(t[m+h-1]);for(var g=0;g<f;++g)x(u.separator),x(u.rightPad)}else{for(var g=0;g<f-1;++g)x(u.rightPad),x(u.separator);x(u.rightPad)}},u=this,l=0;l<i;++l)s(l)},e.prototype.compute=function(t,n){var r=this,a=t.length,i=n.length;if(i>0){var o=n[0];if(o!==0)throw new Error("First split value must be 0, got ".concat(o));for(var s=1;s<i;++s){var u=n[s]>=o;if(u=u&&n[s]<=a,!u)throw new Error("Invalid split value ".concat(n[s],", must be in [").concat(o,", ").concat(a,"]"));o=n[s]}if(o!==a)throw new Error("Last split value must be data size. Expected ".concat(a,", got ").concat(o))}var l=i-1,c=S.util.getArrayFromDType("int32",i);if(a===0||i===0){for(var p=new Array(a),s=0;s<=l;++s)c[s]=0;return[p,c]}c[0]=0;for(var d=function(g){var y=n[g]-n[g-1],w=0;f.nGramWidths.forEach(function(b){w+=r.getNumNGrams(y,b)}),f.preserveShort&&y>0&&w===0&&(w=1),c[g]=c[g-1]+w},f=this,s=1;s<=l;++s)d(s);for(var h=new Array(c[l]),m=function(g){var y=n[g],w=c[g];if(v.nGramWidths.forEach(function(N){var E=n[g+1]-n[g],C=r.getNumNGrams(E,N);r.createNGrams(t,y,h,w,C,N),w+=C}),v.preserveShort&&w===c[g]){var b=n[g+1]-n[g];if(b===0)return"continue";var x=b+2*v.padWidth,k=1;v.createNGrams(t,y,h,w,k,x)}},v=this,s=0;s<l;++s)m(s);return[h,c]},e}();function EEe(e,t,n,r,a,i,o,s){return new TEe(n,r,a,i,o,s).compute(e,t)}function IEe(e,t,n,r){if(e.length){if(t.length===0){for(var a=0;a<e.length;++a)r.push(e.subarray(a,a+1));return}if(t.length===1){for(var i=t[0],o=e.indexOf(i);o!==-1;){var s=e.subarray(0,o);(!n||s.length!==0)&&r.push(s),e=e.subarray(o+1),o=e.indexOf(i)}(!n||e.length!==0)&&r.push(e);return}for(var u=0,a=0;a<e.length+1;a++)if(a===e.length||t.indexOf(e[a])!==-1){var s=e.subarray(u,a);(!n||s.length!==0)&&r.push(s),u=a+1}}}function CEe(e,t,n){for(var r=e.length,a=[],i=0,o=0,s=new Array(r),u=0;u<r;++u){var l=a.length;IEe(e[u],t,n,a);var c=a.length-l;s[u]=c,i+=c,o=Math.max(o,c)}for(var p=S.util.getArrayFromDType("int32",i*2),d=new Array(i),f=[r,o],h=0,u=0;u<r;++u)for(var m=0;m<s[u];++m)p[h*2]=u,p[h*2+1]=m,d[h]=a[h],++h;return[p,d,f]}function DEe(e,t){for(var n=S.util.getArrayFromDType("int32",e.length),r=0;r<e.length;++r)n[r]=S.util.fingerPrint64(e[r]).modulo(t).getLowBitsUnsigned();return n}var _Ee=xi(function(e,t){return e-t});function AEe(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];for(var a=S.buffer(n,e.dtype),r=0;r<a.values.length;++r){for(var i=a.indexToLoc(r),o=new Array(e.rank),s=0;s<o.length;s++)o[s]=i[s]%e.shape[s];var u=e.locToIndex(o);a.values[r]=e.values[u]}return a}var Dh=function(e,t){var n=t.value-e.value;return n===0?e.index-t.index:n};function vO(e,t,n,r){for(n===void 0&&(n=0),r===void 0&&(r=e.length-1);r>n;){if(r-n>600){var a=r-n+1,i=t-n+1,o=Math.log(a),s=.5*Math.exp(2*o/3),u=.5*Math.sqrt(o*s*(a-s)/a)*Math.sign(i-a/2),l=Math.max(n,Math.floor(t-i*s/a+u)),c=Math.min(r,Math.floor(t+(a-i)*s/a+u));vO(e,t,l,c)}var p=e[t],d=n,f=r;for(S.util.swap(e,n,t),Dh(e[r],p)>0&&S.util.swap(e,n,r);d<f;){for(S.util.swap(e,d,f),d++,f--;Dh(e[d],p)<0;)d=d+1;for(;Dh(e[f],p)>0;)f=f-1}Dh(e[n],p)===0?S.util.swap(e,n,f):(f=f+1,S.util.swap(e,f,r)),f<=t&&(n=f+1),t<=f&&(r=f-1)}}function FEe(e,t,n,r,a){for(var i=t[t.length-1],o=Ae([e.length/i,i],2),s=o[0],u=o[1],l=S.util.getTypedArrayFromDType(n,s*r),c=S.util.getTypedArrayFromDType("int32",s*r),p=function(h){var m=h*u,v=e.subarray(m,m+u),g=new Array(v.length);v.forEach(function(k,N){return g[N]={value:k,index:N}}),r<g.length&&(vO(g,r),g=g.slice(0,r)),a&&g.sort(Dh);for(var y=h*r,w=l.subarray(y,y+r),b=c.subarray(y,y+r),x=0;x<r;x++)w[x]=g[x].value,b[x]=g[x].index},d=0;d<s;d++)p(d);var f=t.slice();return f[f.length-1]=r,[S.buffer(f,n,l),S.buffer(f,"int32",c)]}function REe(e,t,n,r){for(var a=S.util.parseAxisParam(t,n)[0],i=[1,n[0],1],o=0;o<a;o++)i[0]*=n[o];i[1]=n[a];for(var o=a+1;o<n.length;o++)i[2]*=n[o];for(var s=new Map,u=new Int32Array(n[a]),l=new S.TensorBuffer(i,r,e),c=[],p=i[0]===1&&i[2]===1,o=0;o<n[a];o++){var d=void 0;if(p)d=e[o].toString();else{for(var f=[],h=0;h<i[0];h++)for(var m=0;m<i[2];m++)f.push(l.get(h,o,m));d=f.join(",")}var v=s.get(d);if(v!=null)u[o]=v;else{var g=s.size;s.set(d,g),u[o]=g,c.push(o)}}var y=i.slice();y[1]=s.size;var w=new S.TensorBuffer(y,r);c.forEach(function(x,k){for(var N=0;N<i[0];N++)for(var E=0;E<i[2];E++)w.set(l.get(N,x,E),N,k,E)});var b=n.slice();return b[a]=y[1],{outputValues:w.values,outputShape:b,indices:u}}var OEe=RTe,gO=OTe,MEe=MTe,PEe=PTe,BEe=FTe,LEe=BTe,zEe=LTe,$Ee=zTe,VEe=$Te,WEe=VTe,UEe=WTe,GEe=UTe,qEe=GTe,HEe=qTe,jEe=HTe,KEe=jTe,XEe=KTe,YEe=XTe,JEe=YTe,ZEe=JTe,QEe=ZTe,eIe=QTe,tIe=mO,nIe=eEe,rIe=tEe,aIe=rEe,iIe=cEe,oIe=pEe,sIe=fEe,uIe=hEe,lIe=mEe,cIe=vEe,pIe=gEe,yO=ATe,dIe=yEe,fIe=bEe,hIe=wEe,bO=xEe,mIe=SEe,vIe=kEe,gIe=NEe,yIe=EEe,bIe=CEe,wIe=DEe,xIe=_Ee,SIe=AEe,kIe=FEe,rw=nEe,NIe=REe;function wO(e,t){return["x","y","z","w","u","v"].slice(0,t).map(function(n){return"".concat(e,".").concat(n)})}function fa(e,t){return t===1?[e]:wO(e,t)}function TIe(e,t){if(e===1)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}var EIe=function(){function e(t){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=ra(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var n=fa("rc",this.rank),r=tn(this.rank),a=this.getOutOfBoundsCondition(n),i=this.getSetup(n),o=this.getOutput(n);this.userCode=`
        void main() {
          `.concat(r,` rc = getOutputCoords();

          if(`).concat(a,`) {
            setOutput(vec4(0));
          } else {
            `).concat(i,`

            setOutput(vec4(`).concat(o,`));
          }
        }
      `)}}return e.prototype.getSourceCoordsArr=function(t){for(var n=[],r=0;r<=1;r++)for(var a=0;a<=1;a++){for(var i="".concat(r===0?"r":"rp1",", ").concat(a===0?"c":"cp1"),o=2;o<this.rank;o++)i="".concat(t[t.length-1-o],",")+i;n.push(i)}return n},e.prototype.getOutOfBoundsCondition=function(t){if(this.rank===1)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);for(var n="",r=this.rank-2;r<this.rank;r++)n+="".concat(t[r]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(r,"]"):this.outputShape[r]),r<this.rank-1&&(n+="||");return n},e.prototype.getSetup=function(t){if(this.rank===1)return"";var n=t.slice(-2),r=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],a=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return`
      int r = `.concat(n[0],`;
      int c = `).concat(n[1],`;
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= `).concat(r,`;
      bool rEdge = rp1 >= `).concat(a,`;
    `)},e.prototype.getOutput=function(t){var n=this.getSourceCoordsArr(t);if(this.rank===1){var r=this.enableShapeUniforms?"outShape":this.outputShape[0];return"getA(rc), (rc + 1 >= ".concat(r," ? 0. : getA(rc + 1)), 0, 0")}return"getA(".concat(n[0],`),
            cEdge ? 0. : getA(`).concat(n[1],`),
            rEdge ? 0. : getA(`).concat(n[2],`),
            rEdge || cEdge ? 0. : getA(`).concat(n[3],")")},e}();var xO=function(){function e(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=ra(this.outputShape.length);for(var r="",a=0;a<4;a++){var i="thisRC = rc;";a%2===1&&(i+="thisRC.z += 1;"),a>1&&(i+="thisRC.y += 1;"),r+=`
        `.concat(i,`
        `).concat(a>0?"if(thisRC.y < rows && thisRC.z < cols){":"",`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`).concat(a,`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `).concat(a>0?"}":"",`
      `)}this.userCode=`
      `.concat(IIe(n,this.enableShapeUniforms),`
      `).concat(this.enableShapeUniforms?Y6():X6(t),`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `).concat(this.enableShapeUniforms?"outShape[1]":t[1],`;
        int cols = `).concat(this.enableShapeUniforms?"outShape[2]":t[2],`;

        `).concat(r,`

        setOutput(result);
      }
    `)}return e}();function IIe(e,t){var n=t?BNe(["r","c","d"],"inputShape"):fc(["r","c","d"],e);return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `.concat(n,`
      return ivec3(r, c, d);
    }
  `)}var CIe=function(){function e(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}return e.prototype.acquireTexture=function(t,n,r){var a=eR(n,r),i=tR(t,a,r);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);var o=QF(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();var s=this.freeTextures[i].pop();return this.usedTextures[i].push(s),s}var u;return a===Kr.PACKED_2X2_FLOAT32?u=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):a===Kr.PACKED_2X2_FLOAT16?u=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):a===Kr.UNPACKED_FLOAT32?u=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):a===Kr.UNPACKED_FLOAT16?u=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):a===Kr.PACKED_4X1_UNSIGNED_BYTE&&(u=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[i].push(u),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),u},e.prototype.releaseTexture=function(t,n,r,a){if(this.freeTextures!=null){var i=eR(r,a),o=tR(n,i,a);o in this.freeTextures||(this.freeTextures[o]=[]);var s=QF(n,i,this.gpgpu.gl,this.gpgpu.textureConfig,a),u=S.env().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");u!==-1&&this._numBytesAllocated>u?(this.gpgpu.deleteMatrixTexture(t.texture),this._numBytesAllocated-=s):(this.freeTextures[o].push(t),this.numFreeTextures++,this._numBytesFree+=s),this.numUsedTextures--;var l=this.usedTextures[o],c=l&&l.indexOf(t);if(c==null||c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l[c]=l[l.length-1],l.pop(),this.log()}},e.prototype.log=function(){if(this.logEnabled){var t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(t,")"));var n=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*n),"%)"))}},Object.defineProperty(e.prototype,"numBytesAllocated",{get:function(){return this._numBytesAllocated},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numBytesFree",{get:function(){return this._numBytesFree},enumerable:!1,configurable:!0}),e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var t=this;if(this.freeTextures!=null){for(var n in this.freeTextures)this.freeTextures[n].forEach(function(r){t.gpgpu.deleteMatrixTexture(r.texture)});for(var n in this.usedTextures)this.usedTextures[n].forEach(function(a){t.gpgpu.deleteMatrixTexture(a.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}},e}();function DIe(e,t){var n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(t))}function QF(e,t,n,r,a){var i=_Ie(t,r),o;if(a){var s=Ae(Hp(e[0],e[1]),2),u=s[0],l=s[1];o=u*l}else{var c=Ae(Ph(e[0],e[1]),2),p=c[0],d=c[1];o=p*d}var f=DIe(n,i);return o*f}function _Ie(e,t){switch(e){case Kr.PACKED_2X2_FLOAT32:return tw(t);case Kr.PACKED_2X2_FLOAT16:return nw(t);case Kr.UNPACKED_FLOAT32:return Z6(t);case Kr.UNPACKED_FLOAT16:return Q6(t);case Kr.PACKED_4X1_UNSIGNED_BYTE:return ew(t);default:throw new Error("Unknown physical texture type ".concat(e))}}function AIe(e){return S.env().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?Kr.PACKED_2X2_FLOAT32:Kr.UNPACKED_FLOAT32:e?Kr.PACKED_2X2_FLOAT16:Kr.UNPACKED_FLOAT16}function eR(e,t){if(e===bi.UPLOAD)return Kr.PACKED_2X2_FLOAT32;if(e===bi.RENDER||e==null)return AIe(t);if(e===bi.DOWNLOAD||e===bi.PIXELS)return Kr.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function tR(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}var ps=function(){function e(t,n){this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=ra(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        `.concat(n,`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `)}return e}(),oo="if (isnan(x)) return x;",FIe="return x;",nR="return abs(x);",RIe="return (x >= 0.0) ? x : (exp(x) - 1.0);",OIe=oo+`
  return (x < 0.0) ? 0.0 : x;
`,MIe=oo+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,qu="return x;",PIe="return 1.0 / (1.0 + exp(-1.0 * x));";var BIe="return x;",LIe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,zIe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,$Ie=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,VIe="return 1.0 / (1.0 + exp(-1.0 * x));",Hu=function(){function e(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=ra(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `.concat(n,`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `)}return e}();var WIe=function(){function e(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=ra(this.outputShape.length);var n=t.length,r=fa("rc",n),a=tn(n),i=TIe(n,r),o=r.slice(-2),s=n<=1?"rc":"vec2(".concat(o.join(","),")");this.userCode=`
      void main() {
        `.concat(a,` rc = getOutputCoords();
        vec4 packedInput = getA(`).concat(i,`);

        setOutput(getChannel(packedInput, `).concat(s,`));
      }
    `)}return e}(),UIe=S.kernel_impls.whereImpl,GIe=1e-7,qIe=1e-4,I0={};function HIe(e){return e in I0||(I0[e]={}),I0[e]}var jIe=S.env().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),KIe=600;function XIe(){return S.env().global.screen==null?1024:S.env().global.screen.height*S.env().global.screen.width*window.devicePixelRatio*KIe/1024/1024}var aw=function(e){wNe(t,e);function t(n){var r=e.call(this)||this;if(r.pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.lastGlFlushTime=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!S.env().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");var a;if(n!=null){if(n instanceof R0)a=n;else{var i=Po(S.env().getNumber("WEBGL_VERSION"),n);a=new R0(i)}r.binaryCache={},r.gpgpuCreatedLocally=!1}else{var i=Po(S.env().getNumber("WEBGL_VERSION"));a=new R0(i),r.binaryCache=HIe(S.env().getNumber("WEBGL_VERSION")),r.gpgpuCreatedLocally=!0}return r.gpgpu=a,r.canvas=r.gpgpu.gl.canvas,r.textureManager=new CIe(r.gpgpu),r.numMBBeforeWarning=XIe(),r.texData=new S.DataStorage(r,S.engine()),r}return t.prototype.nextDataId=function(){return t.nextDataId++},t.prototype.numDataIds=function(){return this.texData.numDataIds()-this.pendingDeletes},t.prototype.writeTexture=function(n,r,a,i,o,s){var u=this.makeTensorInfo(r,a),l=this.texData.get(u.dataId);l.isPacked=!1,l.texture={texture:n,texShape:[i,o]},l.texShape=[i,o];var c=Ch(r),p=new KF(c,!1,s),d=this.runWebGLProgram(p,[u],a,[[i,o]]);return d.shape=r,l.texture=null,this.disposeIntermediateTensorInfo(u),d.dataId},t.prototype.write=function(n,r,a){if((S.env().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||S.env().getBool("DEBUG"))&&this.checkNumericalProblems(n),a==="complex64"&&n!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var i={id:this.nextDataId()};return this.texData.set(i,{shape:r,dtype:a,values:n,usage:bi.UPLOAD,refCount:1}),i},t.prototype.refCount=function(n){if(this.texData.has(n)){var r=this.texData.get(n);return r.refCount}return 0},t.prototype.incRef=function(n){var r=this.texData.get(n);r.refCount++},t.prototype.decRef=function(n){if(this.texData.has(n)){var r=this.texData.get(n);r.refCount--}},t.prototype.move=function(n,r,a,i,o){if(S.env().getBool("DEBUG")&&this.checkNumericalProblems(r),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(n,{shape:a,dtype:i,values:r,usage:bi.UPLOAD,refCount:o})},t.prototype.disposeIntermediateTensorInfo=function(n){this.disposeData(n.dataId)},t.prototype.readSync=function(n){var r=this.texData.get(n),a=r.values,i=r.dtype,o=r.complexTensorInfos,s=r.slice,u=r.shape,l=r.isPacked;if(s!=null){var c=void 0;l?c=new Hu(u,qu):c=new ps(u,qu);var p=this.runWebGLProgram(c,[{dataId:n,shape:u,dtype:i}],i),d=this.readSync(p.dataId);return this.disposeIntermediateTensorInfo(p),d}if(a!=null)return this.convertAndCacheOnCPU(n);if(i==="string")return a;var f=this.activeTimers!=null,h;f&&(h=S.util.now());var m;if(i==="complex64"){var v=this.readSync(o.real.dataId),g=this.readSync(o.imag.dataId);m=S.backend_util.mergeRealAndImagArrays(v,g)}else m=this.getValuesFromTexture(n);return f&&(this.downloadWaitMs+=S.util.now()-h),this.convertAndCacheOnCPU(n,m)},t.prototype.read=function(n){return Gp(this,void 0,void 0,function(){var r,a,i,o,s,u,l,c,p,d,f,h,m,v,g,y,w,b,x,k,N,E,C;return qp(this,function(R){switch(R.label){case 0:if(this.pendingRead.has(n))return r=this.pendingRead.get(n),[2,new Promise(function(A){return r.push(A)})];if(a=this.texData.get(n),i=a.values,o=a.shape,s=a.slice,u=a.dtype,l=a.complexTensorInfos,c=a.isPacked,s!=null)return p=void 0,c?p=new Hu(o,qu):p=new ps(o,qu),d=this.runWebGLProgram(p,[{dataId:n,shape:o,dtype:u}],u),f=this.read(d.dataId),this.disposeIntermediateTensorInfo(d),[2,f];if(i!=null)return[2,this.convertAndCacheOnCPU(n)];if(S.env().getBool("DEBUG")&&!S.env().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&S.env().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return h=null,u!=="complex64"&&S.env().get("WEBGL_BUFFER_SUPPORTED")&&(m=this.decode(n),v=this.texData.get(m.dataId),h=(C=this.gpgpu).createBufferFromTexture.apply(C,$n([v.texture.texture],Ae(T0(o)),!1))),this.pendingRead.set(n,[]),u==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:R.sent(),R.label=2;case 2:return u!=="complex64"?[3,4]:[4,Promise.all([this.read(l.real.dataId),this.read(l.imag.dataId)])];case 3:return y=R.sent(),w=y[0],b=y[1],g=S.backend_util.mergeRealAndImagArrays(w,b),[3,5];case 4:h==null?g=this.getValuesFromTexture(n):(x=S.util.sizeFromShape(o),g=this.gpgpu.downloadFloat32MatrixFromBuffer(h,x)),R.label=5;case 5:return m!=null&&this.disposeIntermediateTensorInfo(m),h!=null&&(k=this.gpgpu.gl,qe(k,function(){return k.deleteBuffer(h)})),N=this.convertAndCacheOnCPU(n,g),E=this.pendingRead.get(n),this.pendingRead.delete(n),E.forEach(function(A){return A(N)}),this.pendingDisposal.has(n)&&(this.pendingDisposal.delete(n),this.disposeData(n)&&S.engine().removeDataId(n,this),this.pendingDeletes--),[2,N]}})})},t.prototype.readToGPU=function(n,r){r===void 0&&(r={});var a=this.texData.get(n),i=a.values,o=a.shape,s=a.slice,u=a.dtype,l=a.isPacked,c=a.texture;if(u==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(s!=null){var p=void 0;l?p=new Hu(o,qu):p=new ps(o,qu);var d=this.runWebGLProgram(p,[{dataId:n,shape:o,dtype:u}],u),f=this.readToGPU(d,r);return this.disposeIntermediateTensorInfo(d),f}if(c==null)throw i!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");var h=this.decode(n,r.customTexShape),m=S.engine().makeTensorFromTensorInfo(h),v=this.texData.get(h.dataId);return Object.assign({tensorRef:m},v.texture)},t.prototype.bufferSync=function(n){var r=this.readSync(n.dataId);if(n.dtype==="string")try{var a=r.map(function(i){return S.util.decodeString(i)});return S.buffer(n.shape,n.dtype,a)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return S.buffer(n.shape,n.dtype,r)},t.prototype.checkNumericalProblems=function(n){if(n!=null)for(var r=0;r<n.length;r++){var a=n[r];if(!NR(a))throw S.env().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value ".concat(a," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value ".concat(a," cannot be represented on this device."))}},t.prototype.getValuesFromTexture=function(n){var r,a=this.texData.get(n),i=a.shape,o=a.dtype,s=a.isPacked,u=S.util.sizeFromShape(i);if(S.env().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var l=this.decode(n),c=this.texData.get(l.dataId),p=(r=this.gpgpu).downloadMatrixFromPackedTexture.apply(r,$n([c.texture.texture],Ae(T0(i)),!1)).subarray(0,u);return this.disposeIntermediateTensorInfo(l),p}var d=S.env().getBool("WEBGL_PACK")&&s===!0,f=d?Ch(i):i,h=d?new ETe(f):new TTe(f),m=this.runWebGLProgram(h,[{shape:f,dtype:o,dataId:n}],"float32"),v=this.texData.get(m.dataId),g=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(v.texture.texture,v.texShape[0],v.texShape[1]).subarray(0,u);return this.disposeIntermediateTensorInfo(m),g},t.prototype.timerAvailable=function(){return S.env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0},t.prototype.time=function(n){var r=this,a=this.activeTimers,i=[],o=!1;this.programTimersStack==null?(this.programTimersStack=i,o=!0):this.activeTimers.push(i),this.activeTimers=i,n();var s=S.util.flatten(this.activeTimers.map(function(c){return c.query})).filter(function(c){return c!=null}),u=S.util.flatten(this.activeTimers.map(function(c){return c.name})).filter(function(c){return c!=null});this.activeTimers=a,o&&(this.programTimersStack=null);var l={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return function(){return Gp(r,void 0,void 0,function(){var c;return qp(this,function(p){switch(p.label){case 0:return S.env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(s)]:[3,2];case 1:return c=p.sent(),l.kernelMs=S.util.sum(c),l.getExtraProfileInfo=function(){return c.map(function(d,f){return{name:u[f],ms:d}}).map(function(d){return"".concat(d.name,": ").concat(d.ms)}).join(", ")},[3,3];case 2:l.kernelMs={error:"WebGL query timers are not supported in this environment."},p.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,l]}})})}()},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}},t.prototype.startTimer=function(){return S.env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:S.util.now(),endMs:null}},t.prototype.endTimer=function(n){return S.env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),n):(n.endMs=S.util.now(),n)},t.prototype.getQueryTime=function(n){return Gp(this,void 0,void 0,function(){var r;return qp(this,function(a){return S.env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(n)]:(r=n,[2,r.endMs-r.startMs])})})},t.prototype.disposeData=function(n,r){if(r===void 0&&(r=!1),this.pendingDisposal.has(n))return!1;if(!this.texData.has(n))return!0;if(r?this.texData.get(n).refCount=0:this.texData.get(n).refCount--,!r&&this.texData.get(n).refCount>0)return!1;if(this.pendingRead.has(n))return this.pendingDisposal.add(n),this.pendingDeletes++,!1;this.releaseGPUData(n);var a=this.texData.get(n).complexTensorInfos;return a!=null&&(this.disposeData(a.real.dataId,r),this.disposeData(a.imag.dataId,r)),this.texData.delete(n),!0},t.prototype.releaseGPUData=function(n){var r=this.texData.get(n),a=r.texture,i=r.dtype,o=r.texShape,s=r.usage,u=r.isPacked,l=r.slice,c=l&&l.origDataId||n,p=this.dataRefCount.get(c);p>1?this.dataRefCount.set(c,p-1):(this.dataRefCount.delete(c),a!=null&&(this.numBytesInGPU-=this.computeBytes(o,i),this.textureManager.releaseTexture(a,o,s,u)));var d=this.texData.get(n);d.texture=null,d.texShape=null,d.isPacked=!1,d.slice=null},t.prototype.getTexture=function(n){return this.uploadToGPU(n),this.texData.get(n).texture.texture},t.prototype.getDataInfo=function(n){return this.texData.get(n)},t.prototype.shouldExecuteOnCPU=function(n,r){var a=this;return r===void 0&&(r=jIe),S.env().getBool("WEBGL_CPU_FORWARD")&&n.every(function(i){return a.texData.get(i.dataId).texture==null&&S.util.sizeFromShape(i.shape)<r})},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.where=function(n){S.backend_util.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var r=n.dataSync();return UIe(n.shape,r)},t.prototype.packedUnaryOp=function(n,r,a){var i=new Hu(n.shape,r),o=this.compileAndRun(i,[n],a);return S.engine().makeTensorFromTensorInfo(o)},t.prototype.abs=function(n){if(this.shouldExecuteOnCPU([n])&&n.dtype!=="complex64"){var r=yO(this.texData.get(n.dataId).values);return this.makeOutput(n.shape,n.dtype,r)}if(S.env().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,nR,n.dtype);var a=new ps(n.shape,nR),i=this.compileAndRun(a,[n]);return S.engine().makeTensorFromTensorInfo(i)},t.prototype.makeTensorInfo=function(n,r,a){var i;if(r==="string"&&a!=null&&a.length>0&&S.util.isString(a[0])){var o=a.map(function(s){return S.util.encodeString(s)});i=this.write(o,n,r)}else i=this.write(a,n,r);return this.texData.get(i).usage=null,{dataId:i,shape:n,dtype:r}},t.prototype.makeOutput=function(n,r,a){return S.engine().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,a),this)},t.prototype.unpackTensor=function(n){var r=new WIe(n.shape);return this.runWebGLProgram(r,[n],n.dtype)},t.prototype.packTensor=function(n){var r=new EIe(n.shape),a=!0;return this.runWebGLProgram(r,[n],n.dtype,null,a)},t.prototype.packedReshape=function(n,r){var a=$n([cc(n.shape)],Ae(pc(n.shape)),!1),i={dtype:n.dtype,shape:a,dataId:n.dataId},o=$n([cc(r)],Ae(pc(r)),!1),s=new xO(o,a),u=!0,l=[a],c=this.runWebGLProgram(s,[i],n.dtype,l,u);return{dataId:c.dataId,shape:r,dtype:c.dtype}},t.prototype.decode=function(n,r){var a=this.texData.get(n),i=a.isPacked,o=a.shape,s=a.dtype;if(r!=null){var u=S.util.sizeFromShape(o),l=r[0]*r[1]*4;S.util.assert(u<=l,function(){return"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."})}var c=Ch(o),p;i?p=new NTe(c):p=new kTe(c);var d=!0,f=[r??T0(c)],h=this.runWebGLProgram(p,[{shape:c,dtype:s,dataId:n}],s,f,d,r);return{dtype:s,shape:o,dataId:h.dataId}},t.prototype.runWebGLProgram=function(n,r,a,i,o,s){var u=this;o===void 0&&(o=!1);var l=this.makeTensorInfo(n.outputShape,a),c=this.texData.get(l.dataId);if(n.packedOutput&&(c.isPacked=!0),n.outPackingScheme===Ah.DENSE){var p=s??T0(n.outputShape);c.texShape=p.map(function(k){return k*2})}if(n.outTexUsage!=null&&(c.usage=n.outTexUsage),S.util.sizeFromShape(l.shape)===0)return c.values=S.util.getTypedArrayFromDType(l.dtype,0),l;var d=[],f=r.map(function(k){if(k.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var N=u.texData.get(k.dataId);if(N.texture==null){if(!n.packedInputs&&S.util.sizeFromShape(k.shape)<=S.env().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:k.shape,texData:null,isUniform:!0,uniformValues:N.values};n.packedInputs&&(N.isPacked=!0,N.shape=k.shape)}if(u.uploadToGPU(k.dataId),!!N.isPacked!=!!n.packedInputs)k=N.isPacked?u.unpackTensor(k):u.packTensor(k),d.push(k),N=u.texData.get(k.dataId);else if(N.isPacked&&!Fh(N.shape,k.shape)){var E=k,C=k.shape;k.shape=N.shape,k=u.packedReshape(k,C),d.push(k),N=u.texData.get(k.dataId),E.shape=C}return{shape:k.shape,texData:N,isUniform:!1}});this.uploadToGPU(l.dataId);var h={shape:l.shape,texData:c,isUniform:!1},m=STe(n,f,h),v=this.getAndSaveBinary(m,function(){return wTe(u.gpgpu,n,f,h)}),g=this.activeTimers!=null,y;g&&(y=this.startTimer()),S.env().get("ENGINE_COMPILE_ONLY")||xTe(this.gpgpu,v,f,h,i),d.forEach(function(k){return u.disposeIntermediateTensorInfo(k)}),g&&(y=this.endTimer(y),this.activeTimers.push({name:n.constructor.name,query:this.getQueryTime(y)}));var w=S.env().getNumber("WEBGL_FLUSH_THRESHOLD");if(w>0){var b=S.util.now();b-this.lastGlFlushTime>w&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=b)}if(!S.env().getBool("WEBGL_LAZILY_UNPACK")&&c.isPacked&&o===!1){var x=this.unpackTensor(l);return this.disposeIntermediateTensorInfo(l),x}return l},t.prototype.compileAndRun=function(n,r,a,i,o){o===void 0&&(o=!1),a=a||r[0].dtype;var s=this.runWebGLProgram(n,r,a,i,o);return s},t.prototype.getAndSaveBinary=function(n,r){return n in this.binaryCache||(this.binaryCache[n]=r()),this.binaryCache[n]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){var n=this;if(!this.disposed){if(!S.env().getBool("IS_TEST")){var r=Object.keys(this.binaryCache);r.forEach(function(a){n.gpgpu.deleteProgram(n.binaryCache[a].webGLProgram),delete n.binaryCache[a]})}this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}},t.prototype.floatPrecision=function(){var n=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=S.tidy(function(){if(!S.env().get("WEBGL_RENDER_FLOAT32_ENABLED")){var r=S.env().getBool("DEBUG");S.env().set("DEBUG",!1);var a=n.abs(S.scalar(1e-8)).dataSync()[0];if(S.env().set("DEBUG",r),a>0)return 32}return 16})),this.floatPrecisionValue},t.prototype.epsilon=function(){return this.floatPrecision()===32?GIe:qIe},t.prototype.uploadToGPU=function(n){var r,a=this.texData.get(n),i=a.shape,o=a.dtype,s=a.values,u=a.texture,l=a.usage,c=a.isPacked;if(u==null){var p=this.activeTimers!=null,d;p&&(d=S.util.now());var f=a.texShape;if(f==null&&(f=VR(i,c),a.texShape=f),s!=null){var h=Ch(i),m=void 0,v=f[1],g=f[0],y=s instanceof Uint8Array||s instanceof Uint8ClampedArray;(c||!y)&&(r=Ae(Hp(f[0],f[1]),2),v=r[0],g=r[1]),c?m=new CTe(h,y):m=new KF(h,y);var w=y?[g,v]:f,b=this.makeTensorInfo(w,o),x=this.texData.get(b.dataId);y?x.usage=bi.PIXELS:x.usage=bi.UPLOAD,x.texShape=w,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),v,g,s);var k=[[g,v]],N=!0,E=this.runWebGLProgram(m,[b],o,k,N),C=this.texData.get(E.dataId);a.texShape=C.texShape,a.isPacked=C.isPacked,a.usage=C.usage,S.env().get("ENGINE_COMPILE_ONLY")?this.disposeData(E.dataId):(a.texture=C.texture,a.values=null,this.texData.delete(E.dataId)),this.disposeIntermediateTensorInfo(b),p&&(this.uploadWaitMs+=S.util.now()-d)}else{var R=this.acquireTexture(f,l,o,c);a.texture=R}}},t.prototype.convertAndCacheOnCPU=function(n,r){var a=this.texData.get(n),i=a.dtype;return r!=null&&(a.values=YIe(r,i)),a.values},t.prototype.acquireTexture=function(n,r,a,i){if(this.numBytesInGPU+=this.computeBytes(n,a),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){var o=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(o," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(n,r,i)},t.prototype.computeBytes=function(n,r){return n[0]*n[1]*S.util.bytesPerElement(r)},t.prototype.checkCompileCompletion=function(){var n,r;try{for(var a=ha(Object.entries(this.binaryCache)),i=a.next();!i.done;i=a.next()){var o=Ae(i.value,2),s=o[1];this.checkCompletion_(s)}}catch(u){n={error:u}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}},t.prototype.checkCompileCompletionAsync=function(){return Gp(this,void 0,void 0,function(){var n,r,a,i,c,o,s,u,l,c,p,d,f,h,m=this;return qp(this,function(v){if(n=[],this.gpgpu.parallelCompilationExtension){try{for(r=ha(Object.entries(this.binaryCache)),a=r.next();!a.done;a=r.next())i=Ae(a.value,2),c=i[1],n.push(this.checkCompletionAsync_(c))}catch(g){p={error:g}}finally{try{a&&!a.done&&(d=r.return)&&d.call(r)}finally{if(p)throw p.error}}return[2,Promise.all(n)]}else{o=function(g){var y=new Promise(function(w){try{m.checkCompletion_(g),w(!0)}catch(b){throw b}});n.push(y)};try{for(s=ha(Object.entries(this.binaryCache)),u=s.next();!u.done;u=s.next())l=Ae(u.value,2),c=l[1],o(c)}catch(g){f={error:g}}finally{try{u&&!u.done&&(h=s.return)&&h.call(s)}finally{if(f)throw f.error}}return[2,Promise.all(n)]}})})},t.prototype.checkCompletionAsync_=function(n){return Gp(this,void 0,void 0,function(){return qp(this,function(r){switch(r.label){case 0:return this.gpgpu.gl.getProgramParameter(n.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?[2,this.checkCompletion_(n)]:[3,1];case 1:return[4,S.nextFrame()];case 2:return r.sent(),[2,this.checkCompletionAsync_(n)]}})})},t.prototype.checkCompletion_=function(n){if(this.gpgpu.gl.getProgramParameter(n.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(n.webGLProgram)),this.gpgpu.gl.getShaderParameter(n.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(K6(n.source,this.gpgpu.gl.getShaderInfoLog(n.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0},t.prototype.getUniformLocations=function(){var n,r;try{for(var a=ha(Object.values(this.binaryCache)),i=a.next();!i.done;i=a.next()){var o=i.value;this.gpgpu.buildVao(o.webGLProgram);var s=ZR(this.gpgpu,o.program,o.webGLProgram),u=s.variablesLocations,l=s.customUniformLocations,c=s.infLoc,p=s.nanLoc,d=s.outShapeLocation,f=s.outShapeStridesLocation,h=s.outTexShapeLocation;o.variablesLocations=u,o.customUniformLocations=l,o.infLoc=c,o.nanLoc=p,o.outShapeLocation=d,o.outShapeStridesLocation=f,o.outTexShapeLocation=h}}catch(m){n={error:m}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}},t.prototype.createTensorFromGPUData=function(n,r,a){n.channels=n.channels||"RGBA";var i=n.texture,o=n.height,s=n.width,u=n.channels,l=S.engine().backend;if(!l.gpgpu.gl.isTexture(i))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");var c=l.writeTexture(i,r,a,o,s,u);return S.engine().makeTensorFromDataId(c,r,a,l)},t}(S.KernelBackend);aw.nextDataId=0;function YIe(e,t){if(t==="float32"||t==="complex64")return e;if(t==="int32"||t==="bool"){for(var n=t==="int32"?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}else throw new Error("Unknown dtype ".concat(t))}var JIe="4.21.0";function SO(){S.env().set("WEBGL_FORCE_F16_TEXTURES",!0)}S.device_util.isBrowser()&&S.registerBackend("webgl",function(){return new aw},2);var ZIe={forceHalfFloat:SO};var iw=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`,dc=function(){function e(t,n,r){this.variableNames=["A","B"],this.outputShape=S.backend_util.assertAndGetBroadcastShape(n,r),this.enableShapeUniforms=ra(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        `.concat(t,`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `)}return e}();var mc=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`,Zp=function(){function e(t,n,r,a){a===void 0&&(a=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=S.backend_util.assertAndGetBroadcastShape(n,r);var i=this.outputShape.length;this.enableShapeUniforms=ra(i);var o="";if(a)if(i===0||S.util.sizeFromShape(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else{var s=tn(i);if(o=`
          `.concat(s,` coords = getOutputCoords();
        `),i===1)this.enableShapeUniforms?o+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:o+=`
            result.y = (coords + 1) >= `.concat(this.outputShape[0],` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `);else{var u=fa("coords",i);this.enableShapeUniforms?o+=`
            bool nextRowOutOfBounds =
              (`.concat(u[i-2]," + 1) >= outShape[").concat(i,` - 2];
            bool nextColOutOfBounds =
              (`).concat(u[i-1]," + 1) >= outShape[").concat(i,` - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `):o+=`
            bool nextRowOutOfBounds =
              (`.concat(u[i-2]," + 1) >= ").concat(this.outputShape[i-2],`;
            bool nextColOutOfBounds =
              (`).concat(u[i-1]," + 1) >= ").concat(this.outputShape[i-1],`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `)}}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `.concat(t,`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `).concat(o,`

        setOutput(result);
      }
    `)}return e}();function ri(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var QIe={kernelName:S.Identity,backendName:"webgl",kernelFunc:ri};function ju(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),s=ri({inputs:{x:r},backend:n}),u=ri({inputs:{x:a},backend:n});return o.complexTensorInfos={real:s,imag:u},i}var eCe={kernelName:S.Complex,backendName:"webgl",kernelFunc:ju};var kO="return (a < 0.) ? b * a : a;",NO=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function tCe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.alpha,o=n.makeTensorInfo([],"float32",S.util.createScalarValue(i,"float32")),s=S.env().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Zp(NO,a.shape,o.shape):new dc(kO,a.shape,o.shape),u=n.runWebGLProgram(s,[a,o],"float32");return n.disposeIntermediateTensorInfo(o),u}var nCe={kernelName:S.LeakyRelu,backendName:"webgl",kernelFunc:tCe};var TO="return (a < 0.) ? b * a : a;",EO=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function rCe(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,i=S.env().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Zp(EO,r.shape,a.shape):new dc(TO,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],"float32")}var aCe={kernelName:S.Prelu,backendName:"webgl",kernelFunc:rCe},Qp="if (isnan(x)) return x;";function Wt(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.cpuKernelImpl,a=e.dtype;return function(i){var o=i.inputs,s=i.backend,u=o.x,l=s,c=a||u.dtype;if(l.shouldExecuteOnCPU([u])&&r!=null){var p=l.texData.get(u.dataId),d=r(p.values,c);return l.makeTensorInfo(u.shape,c,d)}var f=S.env().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&n!=null,h;return f?h=new Hu(u.shape,n):h=new ps(u.shape,t),l.runWebGLProgram(h,[u],c)}}function Xr(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.checkOutOfBounds,a=r===void 0?!1:r,i=e.supportsComplex,o=i===void 0?!1:i,s=e.cpuKernelImpl,u=e.dtype;return function(l){var c=l.inputs,p=l.backend,d=c.a,f=c.b,h=p;if(o&&d.dtype==="complex64"){var m=h.texData.get(d.dataId),v=h.texData.get(f.dataId),g=Ae([[m.complexTensorInfos.real,v.complexTensorInfos.real],[m.complexTensorInfos.imag,v.complexTensorInfos.imag]].map(function(W){var Y=Ae(W,2),Q=Y[0],G=Y[1],X={dataId:Q.dataId,dtype:Q.dtype,shape:d.shape},ie={dataId:G.dataId,dtype:G.dtype,shape:f.shape},ae=new dc(t,d.shape,f.shape);return h.runWebGLProgram(ae,[X,ie],S.upcastType(Q.dtype,G.dtype))}),2),y=g[0],w=g[1],b=ju({inputs:{real:y,imag:w},backend:h});return h.disposeIntermediateTensorInfo(y),h.disposeIntermediateTensorInfo(w),b}var x=u||S.upcastType(d.dtype,f.dtype);if((d.dtype==="string"||f.dtype==="string"||h.shouldExecuteOnCPU([d,f]))&&s!=null){var k=h.texData.get(d.dataId).values,N=h.texData.get(f.dataId).values,E=d.dtype==="string"?S.backend_util.fromUint8ToStringArray(k):k,C=d.dtype==="string"?S.backend_util.fromUint8ToStringArray(N):N,R=Ae(s(d.shape,f.shape,E,C,x),2),A=R[0],M=R[1],$=h.makeTensorInfo(M,x),z=h.texData.get($.dataId);return z.values=A,$}var L=S.env().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&n!=null,B;return L?B=new Zp(n,d.shape,f.shape,a):B=new dc(t,d.shape,f.shape),h.runWebGLProgram(B,[d,f],x)}}function Rh(e,t){if(t===void 0&&(t=!1),e==="linear")return t?BIe:FIe;if(e==="relu")return t?zIe:OIe;if(e==="elu")return t?LIe:RIe;if(e==="relu6")return t?$Ie:MIe;if(e==="prelu")return t?EO:TO;if(e==="leakyrelu")return t?NO:kO;if(e==="sigmoid")return t?VIe:PIe;throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}var IO=function(){function e(t,n,r,a,i,o,s,u,l){a===void 0&&(a=!1),i===void 0&&(i=!1),o===void 0&&(o=!1),s===void 0&&(s=null),u===void 0&&(u=!1),l===void 0&&(l=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=ra(this.outputShape.length);var c=a?t[1]:t[2],p=Math.ceil(c/2),d=a?"i * 2, rc.y":"rc.y, i * 2",f=i?"rc.z, i * 2":"i * 2, rc.z",h=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],v="",g="";s&&(u?v=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `.concat(s,`
        }`):l?v=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          `.concat(s,`
        }`):v=`vec4 activation(vec4 x) {
          `.concat(s,`
        }`),g="result = activation(result);");var y=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");var w="rc.x",b="rc.x";t[0]<n[0]?w="imod(rc.x, ".concat(t[0],")"):n[0]<t[0]&&(b="imod(rc.x, ".concat(n[0],")")),this.userCode=`
      `.concat(v,`
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = `).concat(p,`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = `).concat(w,`;
        int batchB = `).concat(b,`;
        for (int i = 0; i < `).concat(p,`; i++) {
          vec4 a = getMatrixA(batchA, `).concat(d,`);
          vec4 b = getMatrixB(batchB, `).concat(f,`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`).concat(h[0]," * ").concat(m[0],`);
          result += (`).concat(h[1]," * ").concat(m[1],`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `).concat(y,`

        `).concat(g,`

        setOutput(result);
      }
    `)}return e}();var rR={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"},aR=function(){function e(t,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=S.backend_util.assertAndGetBroadcastShape(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `.concat(t,`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `)}return e}(),iR="return a * b;";function ow(e){var t=e.inputs,n=e.backend,r=t.a,a=t.b,i=S.backend_util.upcastType(r.dtype,a.dtype);if(r.dtype==="complex64"){var o=n.texData.get(r.dataId),s=n.texData.get(a.dataId),u=new aR(rR.REAL,r.shape,a.shape),l=new aR(rR.IMAG,r.shape,a.shape),c=[{dataId:o.complexTensorInfos.real.dataId,dtype:o.complexTensorInfos.real.dtype,shape:r.shape},{dataId:o.complexTensorInfos.imag.dataId,dtype:o.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:a.shape},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:a.shape}],p=n.runWebGLProgram(u,c,"float32"),d=n.runWebGLProgram(l,c,"float32"),f=ju({inputs:{real:p,imag:d},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(d),f}if(n.shouldExecuteOnCPU([r,a])){var o=n.texData.get(r.dataId),s=n.texData.get(a.dataId),h=Ae(tIe(r.shape,a.shape,o.values,s.values,i),2),m=h[0],v=h[1],g=n.makeTensorInfo(v,i),y=n.texData.get(g.dataId);return y.values=m,g}var w;return S.env().getBool("WEBGL_PACK_BINARY_OPERATIONS")?w=new Zp(iR,r.shape,a.shape):w=new dc(iR,r.shape,a.shape),n.runWebGLProgram(w,[r,a],i)}var iCe={kernelName:S.Multiply,backendName:"webgl",kernelFunc:ow};function oCe(e,t,n){var r=$n([cc(e.shape)],Ae(pc(e.shape)),!1),a={dtype:e.dtype,shape:r,dataId:e.dataId},i=$n([cc(t)],Ae(pc(t)),!1),o=new xO(i,r),s=!0,u=[r],l=n.runWebGLProgram(o,[a],e.dtype,u,s);return{dataId:l.dataId,shape:t,dtype:l.dtype}}function Le(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.shape,o=n,s=S.util.sizeFromShape(a.shape),u=S.util.inferFromImplicitShape(i,s),l=S.util.sizeFromShape(u);S.util.assert(s===l,function(){return"The new shape (".concat(u,") has ").concat(l," elements and the old ")+"shape (".concat(a.shape,") has ").concat(s," elements. The new shape and old ")+"shape must have the same number of elements."});var c=o.texData.get(a.dataId);return c.isPacked&&!Fh(a.shape,u)&&!(c.texture!==null&&Fh(c.shape,u))?oCe(a,u,o):(o.incRef(a.dataId),{dataId:a.dataId,shape:u,dtype:a.dtype})}var sCe={kernelName:S.Reshape,backendName:"webgl",kernelFunc:Le};var oR=function(){function e(t,n){this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var s=Math.floor(r/4)*4,u=r%4,l="sumValue += dot(values, ones);";if(n!=null){var c=1/n;l="sumValue += dot(values * ".concat(S.util.isInt(c)?c.toPrecision(2):c,", ones);")}var p="";i%r>0&&(p=`
        if (inIdx < 0 || inIdx >= `.concat(i,`) {
          return 0.0;
        }
      `)),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `.concat(p,`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `).concat(r,`;

        float sumValue = 0.0;

        for (int i = 0; i < `).concat(s,`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `).concat(l,`
        }

        int inIdx = inOffset + `).concat(s,`;
        if (`).concat(u===1,`) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          `).concat(l,`
        } else if (`).concat(u===2,`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          `).concat(l,`
        } else if (`).concat(u===3,`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          `).concat(l,`
        }
        setOutput(sumValue);
      }
    `)}return e}();var uCe=function(){function e(t,n){this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var s="0.0",u="";n==="prod"?s="1.0":n==="min"?(s="1.0 / 1e-20",u="min"):n==="max"&&(s="-1.0 / 1e-20",u="max");var l="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="sum"?l="sumValue":n==="prod"?l="prodValue":n==="all"?l="allValue":n==="any"&&(l="anyValue");var c=Math.floor(r/4)*4,p=r%4,d=`
      if (`.concat(n==="sum",`) {
        sumValue += dot(values, ones);
      } else if (`).concat(n==="prod",`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `).concat(u,`(values, minMaxValue);
        if (`).concat(n==="min"," || ").concat(n==="max",`) {
          minMaxValue = `).concat(u,`(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `),f="vec4";n==="all"?(s="1.0",d=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,f="bvec4"):n==="any"&&(s="0.0",d=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,f="bvec4");var h="";i%r>0&&(h=`
        if (inIdx < 0 || inIdx >= `.concat(i,`) {
          return initializationValue;
        }
      `)),this.userCode=`
      const float initializationValue = `.concat(s,`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `).concat(h,`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `).concat(r,`;

        vec4 minMaxValue = vec4(`).concat(s,`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `).concat(c,`; i += 4) {
          int inIdx = inOffset + i;
          `).concat(f," values = ").concat(f,`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `).concat(d,`
        }

        int inIdx = inOffset + `).concat(c,`;
        if (`).concat(p===1,`) {
          `).concat(f," values = ").concat(f,`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `).concat(d,`
        } else if (`).concat(p===2,`) {
          `).concat(f," values = ").concat(f,`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `).concat(d,`
        } else if (`).concat(p===3,`) {
          `).concat(f," values = ").concat(f,`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `).concat(d,`
        }
        setOutput(`).concat(l,`);
      }
    `)}return e}();function lCe(e){for(var t=[];t.length===0||t[t.length-1].outSize!==1;){var n=t.length?t[t.length-1].outSize:e[1],r=S.backend_util.computeOptimalWindowSize(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}function vc(e,t,n,r){for(var a=lCe(e.shape),i=e,o=0;o<a.length;o++){var s=a[o],u=s.inSize,l=s.windowSize,c=s.outSize,p=void 0,d=void 0;n==="mean"?p=o===0?new oR({windowSize:l,inSize:u,batchSize:e.shape[0],outSize:c},u):new oR({windowSize:l,inSize:u,batchSize:e.shape[0],outSize:c}):p=new uCe({windowSize:l,inSize:u,batchSize:e.shape[0],outSize:c},n),d=i,i=r.runWebGLProgram(p,[i],t),d.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(d)}return i}var cCe=function(){function e(t,n){this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];this.outputShape=r,this.rank=r.length;var i=tn(this.rank),o=pCe(n);this.userCode=`
    void main() {
      `.concat(i,` resRC = getOutputCoords();
      setOutput(getA(`).concat(o,`));
    }
    `)}return e}();function pCe(e){var t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}var dCe=function(){function e(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));for(var i=tn(this.rank),o=wO("rc",this.rank),s=new Array(this.rank),a=0;a<n.length;a++)s[n[a]]=o[a];var u="vec2(".concat(s.slice(-2).join(),")"),l="++".concat(o[this.rank-1]," < ").concat(r[this.rank-1]),c="getChannel(getA(".concat(s.join(),"), ").concat(u,")");this.userCode=`
    void main() {
      `.concat(i,` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `).concat(c,`;
      if(`).concat(l,`) {
        result[1] = `).concat(c,`;
      }
      --`).concat(o[this.rank-1],`;
      if(++`).concat(o[this.rank-2]," < ").concat(r[this.rank-2],`) {
        result[2] = `).concat(c,`;
        if(`).concat(l,`) {
          result[3] = `).concat(c,`;
        }
      }
      setOutput(result);
    }
    `)}return e}();function z0(e,t,n){var r=S.env().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new dCe(e.shape,t):new cCe(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function fCe(e,t,n,r){var a=t,i=e.shape.length,o=S.util.parseAxisParam(a,e.shape),s=o,u=S.backend_util.getAxesPermutation(s,i),l=u!=null,c=e;l&&(c=z0(e,u,r),s=S.backend_util.getInnerMostAxes(s.length,i)),S.backend_util.assertAxesAreInnerMostDims("sum",s,i);var p=Ae(S.backend_util.computeOutAndReduceShapes(c.shape,s),2),d=p[0],f=p[1],h=d;n&&(h=S.backend_util.expandShapeToKeepDim(d,o));var m=S.util.sizeFromShape(f),v=S.util.sizeFromShape(e.shape),g=v/m,y=Le({inputs:{x:c},attrs:{shape:[g,m]},backend:r}),w=S.sumOutType(e.dtype),b=vc(y,w,"sum",r),x=Le({inputs:{x:b},attrs:{shape:h},backend:r});return r.disposeIntermediateTensorInfo(y),r.disposeIntermediateTensorInfo(b),l&&r.disposeIntermediateTensorInfo(c),x}function $0(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;return fCe(a,i,o,n)}var hCe={kernelName:S.Sum,backendName:"webgl",kernelFunc:$0};function ma(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.perm,o=n,s=a.shape.length,u=new Array(s),l=0;l<u.length;l++)u[l]=a.shape[i[l]];var c;if(o.shouldExecuteOnCPU([a])){var p=o.texData.get(a.dataId),d=p.values,f=rw(d,a.shape,a.dtype,i,u);c=o.makeTensorInfo(u,a.dtype);var h=o.texData.get(c.dataId);h.values=f}else c=z0(a,i,o);return c}var mCe={kernelName:S.Transpose,backendName:"webgl",kernelFunc:ma},CO=1e3;function M0(e){var t,n,r=e.a,a=e.b,i=e.transposeA,o=e.transposeB,s=e.backend,u=e.bias,l=u===void 0?null:u,c=e.preluActivationWeights,p=c===void 0?null:c,d=e.leakyreluAlpha,f=d===void 0?0:d,h=e.activation,m=h===void 0?null:h,v=r.shape.length,g=a.shape.length,y=i?r.shape[v-2]:r.shape[v-1],w=o?a.shape[g-1]:a.shape[g-2],b=i?r.shape[v-1]:r.shape[v-2],x=o?a.shape[g-2]:a.shape[g-1],k=r.shape.slice(0,-2),N=a.shape.slice(0,-2),E=S.util.sizeFromShape(k),C=S.util.sizeFromShape(N),R=S.broadcast_util.assertAndGetBroadcastShape(r.shape.slice(0,-2),a.shape.slice(0,-2)),A=R.concat([b,x]);S.util.assert(y===w,function(){return"Error in matMul: inner shapes (".concat(y,") and (")+"".concat(w,") of Tensors with shapes ").concat(r.shape," and ")+"".concat(a.shape," and transposeA=").concat(i)+" and transposeB=".concat(o," must match.")});var M=i?[E,y,b]:[E,b,y],$=o?[C,x,w]:[C,w,x],z=Le({inputs:{x:r},backend:s,attrs:{shape:M}}),L=Le({inputs:{x:a},backend:s,attrs:{shape:$}}),B=[z,L],W=Math.max(E,C),Y=i?z.shape[1]:z.shape[2],Q=l!=null,G=p!=null,X=m==="leakyrelu",ie=m!=null?Rh(m,!0):null,ae=Q||G||X||ie!=null,le;if((b===1||x===1)&&Y>CO&&ae===!1){var de=z,ge=L;i&&(de=ma({inputs:{x:z},backend:s,attrs:{perm:[0,2,1]}}),B.push(de)),o&&(ge=ma({inputs:{x:L},backend:s,attrs:{perm:[0,2,1]}}),B.push(ge));var Ee=x!==1,he=x===1,xe=de;Ee&&(xe=Le({inputs:{x:de},backend:s,attrs:{shape:[W,Y,1]}}),B.push(xe));var Ne=x===1?2:1,$e=ge;he&&($e=Le({inputs:{x:ge},backend:s,attrs:{shape:[W,1,Y]}}),B.push($e));var pt=ow({inputs:{a:xe,b:$e},backend:s});le=$0({inputs:{x:pt},backend:s,attrs:{axis:Ne,keepDims:!0}}),B.push(pt)}else{var It=S.upcastType(r.dtype,a.dtype),xt=new IO(M,$,[W,b,x],i,o,Q,ie,G,X),yt=[z,L];if(l!=null&&yt.push(l),G&&yt.push(p),X){var Et=s.makeTensorInfo([],"float32",S.util.createScalarValue(f,"float32"));yt.push(Et),B.push(Et)}le=s.runWebGLProgram(xt,yt,It)}var Nt=Le({inputs:{x:le},backend:s,attrs:{shape:A}});B.push(le);try{for(var dt=ha(B),gt=dt.next();!gt.done;gt=dt.next()){var mt=gt.value;s.disposeIntermediateTensorInfo(mt)}}catch(Dn){t={error:Dn}}finally{try{gt&&!gt.done&&(n=dt.return)&&n.call(dt)}finally{if(t)throw t.error}}return Nt}function vCe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=t.bias,s=t.preluActivationWeights,u=r.transposeA,l=r.transposeB,c=r.activation,p=r.leakyreluAlpha;return M0({a,b:i,transposeA:u,transposeB:l,backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:p,activation:c})}var gCe={kernelName:S._FusedMatMul,backendName:"webgl",kernelFunc:vCe};var sR="return abs(x);";function yCe(e){var t=e.inputs,n=e.backend,r=t.x;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){var a=n.texData.get(r.dataId),i=yO(a.values);return n.makeTensorInfo(r.shape,r.dtype,i)}var o;return S.env().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new Hu(r.shape,sR):o=new ps(r.shape,sR),n.runWebGLProgram(o,[r],r.dtype)}var bCe={kernelName:S.Abs,backendName:"webgl",kernelFunc:yCe};var wCe=oo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,xCe=Wt({opSnippet:wCe}),SCe={kernelName:S.Acos,backendName:"webgl",kernelFunc:xCe};var kCe=oo+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,NCe=Wt({opSnippet:kCe}),TCe={kernelName:S.Acosh,backendName:"webgl",kernelFunc:NCe};var uR="return a + b;",ECe=Xr({opSnippet:uR,packedOpSnippet:uR,supportsComplex:!0,cpuKernelImpl:OEe}),ICe={kernelName:S.Add,backendName:"webgl",kernelFunc:ECe};var CCe=function(){function e(t,n){this.outputShape=[],this.outputShape=t,this.variableNames=n.map(function(i,o){return"T".concat(o)});var r=[];this.variableNames.forEach(function(i){r.push("float v".concat(i," = get").concat(i,"AtOutCoords();"))});var a=this.variableNames.map(function(i){return"v".concat(i)}).join(" + ");this.userCode=`
      void main() {
        `.concat(r.join(`
        `),`

        float result = `).concat(a,`;
        setOutput(result);
      }
    `)}return e}();var DCe=function(){function e(t,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map(function(i,o){return"T".concat(o)});var r=[];this.variableNames.forEach(function(i){r.push("vec4 v".concat(i," = get").concat(i,"AtOutCoords();"))});var a=this.variableNames.map(function(i){return"v".concat(i)}).join(" + ");this.userCode=`
      void main() {
        `.concat(r.join(`
        `),`

        vec4 result = `).concat(a,`;
        setOutput(result);
      }
    `)}return e}();function O0(e){var t=e.inputs,n=e.backend,r=t;if(r.length===1)return ri({inputs:{x:r[0]},backend:n});if(r.length>S.env().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var a=Math.floor(r.length/2),i=O0({inputs:r.slice(0,a),backend:n}),o=O0({inputs:r.slice(a),backend:n});return O0({inputs:[i,o],backend:n})}var s=r.map(function(p){return p.dtype}).reduce(function(p,d){return S.upcastType(p,d)}),u=r.map(function(p){return p.shape}),l=S.env().getBool("WEBGL_PACK"),c=l?new DCe(r[0].shape,u):new CCe(r[0].shape,u);return n.runWebGLProgram(c,r,s)}var _Ce={kernelName:S.AddN,backendName:"webgl",kernelFunc:O0};function ACe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,u=S.util.parseAxisParam(i,a.shape),l=u,c=S.backend_util.getAxesPermutation(l,s),p=a;c!=null&&(p=ma({inputs:{x:a},backend:n,attrs:{perm:c}}),l=S.backend_util.getInnerMostAxes(l.length,s)),S.backend_util.assertAxesAreInnerMostDims("all",l,s);var d=Ae(S.backend_util.computeOutAndReduceShapes(p.shape,l),2),f=d[0],h=d[1],m=S.util.sizeFromShape(h),v=Le({inputs:{x:p},backend:n,attrs:{shape:[-1,m]}}),g=vc(v,v.dtype,"all",n),y;if(o){var w=S.backend_util.expandShapeToKeepDim(f,u);y=Le({inputs:{x:g},backend:n,attrs:{shape:w}})}else y=Le({inputs:{x:g},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(p),y}var FCe={kernelName:S.All,backendName:"webgl",kernelFunc:ACe};function RCe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,u=S.util.parseAxisParam(i,a.shape),l=u,c=S.backend_util.getAxesPermutation(l,s),p=a;c!=null&&(p=ma({inputs:{x:a},backend:n,attrs:{perm:c}}),l=S.backend_util.getInnerMostAxes(l.length,s)),S.backend_util.assertAxesAreInnerMostDims("any",l,s);var d=Ae(S.backend_util.computeOutAndReduceShapes(p.shape,l),2),f=d[0],h=d[1],m=S.util.sizeFromShape(h),v=Le({inputs:{x:p},backend:n,attrs:{shape:[-1,m]}}),g=vc(v,v.dtype,"any",n),y;if(o){var w=S.backend_util.expandShapeToKeepDim(f,u);y=Le({inputs:{x:g},backend:n,attrs:{shape:w}})}else y=Le({inputs:{x:g},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(p),y}var OCe={kernelName:S.Any,backendName:"webgl",kernelFunc:RCe};var MCe=function(){function e(t,n,r){this.variableNames=["A"];var a=t.windowSize,i=t.batchSize,o=t.outSize;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];var s=n==="max"?">":"<",u=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `.concat(a,`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `).concat(a,`; i++) {
          int inIdx = `).concat(u,`;
          float candidate = getA(batch, inIdx);
          if (candidate `).concat(s,` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `)}return e}();var PCe=function(){function e(t,n,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,S.util.assert(t.length>2,function(){return"Packed arg".concat(r.charAt(0).toUpperCase()+r.slice(1)," supports only inputs with rank above 2.")});var i=t[t.length-1],o=Math.ceil(i/n);this.outputShape=t.slice(0,-1),o>1&&this.outputShape.push(o),a||this.variableNames.push("bestIndicesA");var s=this.outputShape,u=s.length,l=tn(u),c=fa("coords",u),p,d;if(o===1){d=u+1;var f=tn(d);p=`
        `.concat(f," sourceLocR = ").concat(f,"(").concat(c.join(),`, 0);
        ++`).concat(c[u-1],`;
        `).concat(f," sourceLocG = ").concat(f,"(").concat(c.join(),`, 0);
        ++`).concat(c[u-2],`;
        `).concat(f," sourceLocA = ").concat(f,"(").concat(c.join(),`, 0);
        --`).concat(c[u-1],`;
        `).concat(f," sourceLocB = ").concat(f,"(").concat(c.join(),`, 0);
        --`).concat(c[u-2],";")}else d=u,p=`
        `.concat(l,` sourceLocR = coords;
        ++`).concat(c[u-1],`;
        `).concat(l,` sourceLocG = coords;
        ++`).concat(c[u-2],`;
        `).concat(l,` sourceLocA = coords;
        --`).concat(c[u-1],`;
        `).concat(l,` sourceLocB = coords;
        --`).concat(c[u-2],";");var h=["x","y","z","w","u","v"].slice(0,d),m="."+h[d-1],v=h.map(function(C){return"int "+C}),g=fa("sourceLocR",d-1).concat("inIdx.r"),y=fa("sourceLocG",d-1).concat("inIdx.g"),w=fa("sourceLocB",d-1).concat("inIdx.b"),b=fa("sourceLocA",d-1).concat("inIdx.a"),x=r==="max"?"greaterThan":"lessThan",k=a?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`.concat(g.join(),`),
                             getBestIndicesAChannel(`).concat(y.join(),`),
                             getBestIndicesAChannel(`).concat(w.join(),`),
                             getBestIndicesAChannel(`).concat(b.join(),")));"),N=`vec4(
            getAChannel(`.concat(g.join(),`),
            hasNextCol ? getAChannel(`).concat(y.join(),`) : 0.,
            hasNextRow ? getAChannel(`).concat(w.join(),`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`).concat(b.join(),") : 0.)"),E=a?"":`
      float getBestIndicesAChannel(`.concat(v.join(),`) {
        return getChannel(getBestIndicesA(`).concat(h.join(),`),
                                          vec2(`).concat(h.slice(-2).join(),`));
      }`);this.userCode=`
      float getAChannel(`.concat(v.join(),`) {
        return getChannel(getA(`).concat(h.join(),`),
                               vec2(`).concat(h.slice(-2).join(),`));
      }
      `).concat(E,`
      void main() {
        `).concat(l,` coords = getOutputCoords();
        bool hasNextCol = `).concat(c[u-1]," < ").concat(s[u-1]-1,`;
        bool hasNextRow = `).concat(c[u-2]," < ").concat(s[u-2]-1,`;
        `).concat(p,`
        ivec4 srcIdx = ivec4(sourceLocR`).concat(m,", sourceLocG").concat(m,`,
          sourceLocB`).concat(m,", sourceLocA").concat(m,") * ").concat(n,`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `).concat(N,`;

        for (int i = 0; i < `).concat(n,`; i++) {
          inIdx = srcIdx;
          `).concat(k,`
          vec4 candidate = `).concat(N,`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`).concat(x,`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `)}return e}();function DO(e,t,n,r){r===void 0&&(r=null);var a=t.shape[0],i=t.shape[1];r!=null&&(a=r.shape[0],i=r.shape[1]);var o=S.backend_util.computeOptimalWindowSize(i),s={windowSize:o,inSize:i,batchSize:a,outSize:Math.ceil(i/o)},u=new MCe(s,n,r==null),l=[t];r!=null&&l.push(r);var c=e.runWebGLProgram(u,l,"int32");if(c.shape[1]===1)return c;var p=DO(e,t,n,c);return e.disposeIntermediateTensorInfo(c),p}function _O(e,t,n,r){r===void 0&&(r=null);var a=r!=null?r.shape:t.shape,i=a[a.length-1],o=S.backend_util.computeOptimalWindowSize(i),s=new PCe(a,o,n,r==null),u=r==null?[t]:[t,r],l=e.runWebGLProgram(s,u,"int32");if(l.shape.length===t.shape.length){var c=_O(e,t,n,l);return e.disposeIntermediateTensorInfo(l),c}return l}function AO(e,t,n,r){var a=[n];if(S.backend_util.assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.shape.length),!S.env().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){var i=[],o=e.texData.get(t.dataId),s=o!==null&&o.isPacked,u=t;s&&(u=e.unpackTensor(t),i.push(u));var l=Ae(S.backend_util.computeOutAndReduceShapes(u.shape,a),2),c=l[0],p=l[1],d=S.util.sizeFromShape(p),f=Le({inputs:{x:u},backend:e,attrs:{shape:[-1,d]}});i.push(f);var h=DO(e,f,r);i.push(h);var m=Le({inputs:{x:h},backend:e,attrs:{shape:c}});return i.forEach(function(v){return e.disposeIntermediateTensorInfo(v)}),m}return _O(e,t,r)}function BCe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=S.util.parseAxisParam(i,a.shape),s=S.backend_util.getAxesPermutation(o,a.shape.length),u=a,l=[];s!=null&&(u=ma({inputs:{x:a},backend:n,attrs:{perm:s}}),l.push(u),o=S.backend_util.getInnerMostAxes(o.length,u.shape.length)),S.backend_util.assertAxesAreInnerMostDims("argMax",[o[0]],u.shape.length);var c=AO(n,u,o[0],"max");return l.forEach(function(p){return n.disposeIntermediateTensorInfo(p)}),c}var LCe={kernelName:S.ArgMax,backendName:"webgl",kernelFunc:BCe};function zCe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=S.util.parseAxisParam(i,a.shape),s=S.backend_util.getAxesPermutation(o,a.shape.length),u=a,l=[];s!=null&&(u=ma({inputs:{x:a},backend:n,attrs:{perm:s}}),l.push(u),o=S.backend_util.getInnerMostAxes(o.length,u.shape.length)),S.backend_util.assertAxesAreInnerMostDims("argMin",[o[0]],u.shape.length);var c=AO(n,u,o[0],"min");return l.forEach(function(p){return n.disposeIntermediateTensorInfo(p)}),c}var $Ce={kernelName:S.ArgMin,backendName:"webgl",kernelFunc:zCe};var VCe=oo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,WCe=Wt({opSnippet:VCe}),UCe={kernelName:S.Asin,backendName:"webgl",kernelFunc:WCe};var GCe=oo+"return log(x + sqrt(x * x + 1.0));",qCe=Wt({opSnippet:GCe}),HCe={kernelName:S.Asinh,backendName:"webgl",kernelFunc:qCe};var jCe=oo+`
  return atan(x);
`,KCe=Wt({opSnippet:jCe}),XCe={kernelName:S.Atan,backendName:"webgl",kernelFunc:KCe};var YCe=iw+`
  return atan(a, b);
`,JCe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+mc+`
  return result;
`,ZCe=Xr({opSnippet:YCe,packedOpSnippet:JCe}),QCe={kernelName:S.Atan2,backendName:"webgl",kernelFunc:ZCe};var eDe=oo+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,tDe=Wt({opSnippet:eDe}),nDe={kernelName:S.Atanh,backendName:"webgl",kernelFunc:tDe};var Oh=function(){function e(t,n,r,a,i){if(a===void 0&&(a=!1),i===void 0&&(i=!1),this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideHeight,u=t.strideWidth,l=t.dilationHeight,c=t.dilationWidth,p=t.effectiveFilterHeight,d=t.effectiveFilterWidth,f=t.padInfo.top,h=t.padInfo.left;this.outputShape=t.outShape;var m=n==="avg",v="((batch  * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),g="(xR * ".concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),y="0.0";if(m||(y="-1.0 / 1e-20"),r){var w=">=";this.userCode=`
        const ivec2 strides = ivec2(`.concat(s,", ").concat(u,`);
        const ivec2 pads = ivec2(`).concat(f,", ").concat(h,`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `).concat(p,`;
              wR += `).concat(l,`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `).concat(t.inHeight,`) {
              continue;
            }

            for (int wC = 0; wC < `).concat(d,`;
                wC += `).concat(c,`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `).concat(t.inWidth,`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value `).concat(w,` currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = `).concat(a?i?v:g:"wR * ".concat(d," + wC"),`;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `);return}var b="max",x="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="avg"&&(x="avgValue / max(count, 1.0)");var k=Math.floor(o/4)*4,N=o%4,E=`
      if (`.concat(m,`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = `).concat(b,`(values, minMaxValue);
      }
    `);this.userCode=`
      const ivec2 strides = ivec2(`.concat(s,", ").concat(u,`);
      const ivec2 pads = ivec2(`).concat(f,", ").concat(h,`);
      const float initializationValue = `).concat(y,`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `).concat(t.inWidth,`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`).concat(y,`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `).concat(p,`;
            wR += `).concat(l,`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `).concat(t.inHeight,`) {
            continue;
          }

          for (int wC = 0; wC < `).concat(k,`; wC += 4) {
            int xC = xCCorner + wC * `).concat(c,`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `).concat(c,`, d),
              getValue(batch, xR, xC + 2 * `).concat(c,`, d),
              getValue(batch, xR, xC + 3 * `).concat(c,`, d)
            );

            `).concat(E,`
          }

          int xC = xCCorner + `).concat(k,`;
          if (`).concat(N===1,`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `).concat(E,`
          } else if (`).concat(N===2,`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `).concat(c,`, d),
              initializationValue,
              initializationValue
            );

            `).concat(E,`
          } else if (`).concat(N===3,`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `).concat(c,`, d),
              getValue(batch, xR, xC + 2 * `).concat(c,`, d),
              initializationValue
            );

            `).concat(E,`
          }
        }
        setOutput(`).concat(x,`);
      }
    `)}return e}(),sw=function(){function e(t,n,r,a,i){if(a===void 0&&(a=!1),i===void 0&&(i=!1),this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideDepth,u=t.strideHeight,l=t.strideWidth,c=t.dilationDepth,p=t.dilationHeight,d=t.dilationWidth,f=t.effectiveFilterDepth,h=t.effectiveFilterHeight,m=t.effectiveFilterWidth,v=t.padInfo.front,g=t.padInfo.top,y=t.padInfo.left;this.outputShape=t.outShape;var w=n==="avg",b="0.0";if(w||(b="-1.0 / 1e-20"),r){var x=">=";this.userCode=`
        const ivec3 strides =
            ivec3(`.concat(s,", ").concat(u,", ").concat(l,`);
        const ivec3 pads = ivec3(`).concat(v,", ").concat(g,", ").concat(y,`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `).concat(f,`;
              wD += `).concat(c,`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `).concat(t.inDepth,`) {
              continue;
            }

            for (int wR = 0; wR < `).concat(h,`;
                wR += `).concat(p,`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `).concat(t.inHeight,`) {
                continue;
              }

              for (int wC = 0; wC < `).concat(m,`;
                  wC += `).concat(d,`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `).concat(t.inWidth,`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value `).concat(x,` currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = `).concat(a?i?"(((batch * ".concat(t.inDepth," + xD) * ").concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"((xD * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"wD * ".concat(h," * ").concat(m,` +
                      wR * `).concat(m," + wC"),`;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `);return}var k="max",N="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="avg"&&(N="avgValue / max(count, 1.0)");var E=Math.floor(o/4)*4,C=o%4,R=`
      if (`.concat(w,`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = `).concat(k,`(values, minMaxValue);
      }
    `);this.userCode=`
      const ivec3 strides =
        ivec3(`.concat(s,", ").concat(u,", ").concat(l,`);
      const ivec3 pads = ivec3(`).concat(v,", ").concat(g,", ").concat(y,`);
      const float initializationValue = `).concat(b,`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `).concat(t.inWidth,`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`).concat(b,`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `).concat(f,`;
            wD += `).concat(c,`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `).concat(t.inDepth,`) {
            continue;
          }

          for (int wR = 0; wR < `).concat(h,`;
            wR += `).concat(p,`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `).concat(t.inHeight,`) {
              continue;
            }

            for (int wC = 0; wC < `).concat(E,`; wC += 4) {
              int xC = xCCorner + wC * `).concat(d,`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `).concat(d,`, ch),
                getValue(batch, xD, xR, xC + 2 * `).concat(d,`, ch),
                getValue(batch, xD, xR, xC + 3 * `).concat(d,`, ch)
              );

              `).concat(R,`
            }

            int xC = xCCorner + `).concat(E,`;
            if (`).concat(C===1,`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `).concat(R,`
            } else if (`).concat(C===2,`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `).concat(d,`, ch),
                initializationValue,
                initializationValue
              );

              `).concat(R,`
            } else if (`).concat(C===3,`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `).concat(d,`, ch),
                getValue(batch, xD, xR, xC + 2 * `).concat(d,`, ch),
                initializationValue
              );

              `).concat(R,`
            }
          }
        }
        setOutput(`).concat(N,`);
      }
    `)}return e}();function rDe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;jp(a,"avgPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,l=1;S.util.assert(S.backend_util.eitherStridesOrDilationsAreOne(o,l),function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(l,"'")});var c=S.backend_util.computePool2DInfo(a.shape,i,o,l,s,u);if(c.filterWidth===1&&c.filterHeight===1&&S.util.arraysEqual(c.inShape,c.outShape))return ri({inputs:{x:a},backend:n});var p=new Oh(c,"avg",!1);return n.runWebGLProgram(p,[a],"float32")}var aDe={kernelName:S.AvgPool,backendName:"webgl",kernelFunc:rDe};function iDe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,l=r.dataFormat,c=[1,1,1],p=S.backend_util.computePool3DInfo(a.shape,i,o,c,s,u,l),d=new sw(p,"avg",!1);return n.runWebGLProgram(d,[a],"float32")}var oDe={kernelName:S.AvgPool3D,backendName:"webgl",kernelFunc:iDe};var sDe=function(){function e(t){this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterHeight,l=t.effectiveFilterWidth,c=u-1-t.padInfo.top,p=l-1-t.padInfo.left,d=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(`.concat(c,", ").concat(p,`);
      const float avgMultiplier = float(`).concat(d,`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `).concat(u,`;
            wR += `).concat(o,`) {
          float dyR = float(dyRCorner + wR) / `).concat(a,`.0;

          if (dyR < 0.0 || dyR >= `).concat(t.outHeight,`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `).concat(l,`;
            wC+= `).concat(s,`) {
            float dyC = float(dyCCorner + wC) / `).concat(i,`.0;

            if (dyC < 0.0 || dyC >= `).concat(t.outWidth,`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `)}return e}(),uDe=function(){function e(t){this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,l=t.dilationHeight,c=t.dilationWidth,p=t.effectiveFilterDepth,d=t.effectiveFilterHeight,f=t.effectiveFilterWidth,h=p-1-t.padInfo.front,m=d-1-t.padInfo.top,v=f-1-t.padInfo.left,g=1/(n*r*a);this.userCode=`
      const ivec3 pads = ivec3(`.concat(h,", ").concat(m,", ").concat(v,`);
      const float avgMultiplier = float(`).concat(g,`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `).concat(p,`;
            wD += `).concat(u,`) {
          float dyD = float(dyDCorner + wD) / `).concat(i,`.0;

          if (dyD < 0.0 || dyD >= `).concat(t.outDepth,`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `).concat(d,`;
              wR += `).concat(l,`) {
            float dyR = float(dyRCorner + wR) / `).concat(o,`.0;

            if (dyR < 0.0 || dyR >= `).concat(t.outHeight,`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `).concat(f,`;
                wC += `).concat(c,`) {
              float dyC = float(dyCCorner + wC) / `).concat(s,`.0;

              if (dyC < 0.0 || dyC >= `).concat(t.outWidth,`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `)}return e}();function lDe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i,s=r.filterSize,u=r.strides,l=r.pad,c=r.dimRoundingMode,p=[1,1,1],d=S.backend_util.computePool3DInfo(o.shape,s,u,p,l,c),f=new uDe(d);return n.runWebGLProgram(f,[a],o.dtype)}var cDe={kernelName:S.AvgPool3DGrad,backendName:"webgl",kernelFunc:lDe};function pDe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;jp([a,i],"avgPoolGrad");var s=r.filterSize,u=r.strides,l=r.pad,c=S.backend_util.computePool2DInfo(o.shape,s,u,1,l),p=new sDe(c);return n.runWebGLProgram(p,[a],o.dtype)}var dDe={kernelName:S.AvgPoolGrad,backendName:"webgl",kernelFunc:pDe};function fDe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=r.transposeA,s=r.transposeB;return M0({a,b:i,transposeA:o,transposeB:s,backend:n})}var hDe={kernelName:S.BatchMatMul,backendName:"webgl",kernelFunc:fDe};var mDe=function(){function e(t,n,r,a,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],S.backend_util.assertAndGetBroadcastShape(t,n),S.backend_util.assertAndGetBroadcastShape(t,r);var s="0.0";a!=null&&(S.backend_util.assertAndGetBroadcastShape(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="1.0";i!=null&&(S.backend_util.assertAndGetBroadcastShape(t,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `.concat(s,`;
        float scale = `).concat(u,`;
        float inv = scale * inversesqrt(variance + float(`).concat(o,`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `)}return e}();var vDe=function(){function e(t,n,r,a,i,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],S.backend_util.assertAndGetBroadcastShape(t,n),S.backend_util.assertAndGetBroadcastShape(t,r);var s="vec4(0.0)";a!=null&&(S.backend_util.assertAndGetBroadcastShape(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="vec4(1.0)";i!=null&&(S.backend_util.assertAndGetBroadcastShape(t,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        vec4 offset = `.concat(s,`;
        vec4 scale = `).concat(u,`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`).concat(o,`));

        setOutput((x - mean) * inv + offset);
      }
    `)}return e}();var gDe=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.mean,o=t.variance,s=t.offset,u=t.scale;S.util.assert(i.shape.length===o.shape.length,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),S.util.assert(s==null||i.shape.length===s.shape.length,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),S.util.assert(u==null||i.shape.length===u.shape.length,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."});var l=r.varianceEpsilon;l==null&&(l=.001);var c=[a,i,o],p=null;s!=null&&(p=s.shape,c.push(s));var d=null;u!=null&&(d=u.shape,c.push(u));var f=S.env().getBool("WEBGL_PACK_NORMALIZATION")?new vDe(a.shape,i.shape,o.shape,p,d,l):new mDe(a.shape,i.shape,o.shape,p,d,l),h=n.runWebGLProgram(f,c,c[0].dtype);return h},yDe={kernelName:S.FusedBatchNorm,backendName:"webgl",kernelFunc:gDe};var bDe=function(){function e(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n=tn(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var r=wDe(this.rank),a,i=t.map(function(o,s){return"sourceLoc.".concat(G6[s]," = start[").concat(s,"] + coords.").concat(G6[s],";")});a=`
        `.concat(n,` sourceLoc;
        `).concat(n,` coords = getOutputCoords();
        `).concat(i.join(`
`),`
      `),this.userCode=`
      void main() {
        `.concat(a,`
        setOutput(getSource(`).concat(r,`));
      }
    `)}return e}(),G6=["x","y","z","w","u","v"];function wDe(e){if(e===1)return"sourceLoc";if(e<=6)return G6.slice(0,e).map(function(t){return"sourceLoc."+t}).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}var xDe=function(){function e(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var n=tn(this.rank),r=fa("coords",this.rank),a=fa("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":"vec2(".concat(a.slice(-2).join(),")"),o="getChannel(getSource(".concat(a.join(),"), ").concat(i,")"),s=`
      result.x = `.concat(o,`;
      if (++`).concat(r[this.rank-1]," < ").concat(t[this.rank-1],`) {
        ++`).concat(a[this.rank-1],`;
        result.y = `).concat(o,`;
        --`).concat(a[this.rank-1],`;
      }
    `),u=this.rank===1?"":`
      --`.concat(r[this.rank-1],`;
      if (++`).concat(r[this.rank-2]," < ").concat(t[this.rank-2],`) {
        ++`).concat(a[this.rank-2],`;
        result.z = `).concat(o,`;
        if (++`).concat(r[this.rank-1]," < ").concat(t[this.rank-1],`) {
          ++`).concat(a[this.rank-1],`;
          result.w = `).concat(o,`;
        }
      }
    `),l=this.rank<=4?`sourceLoc = coords +
            `.concat(n,"(").concat(t.map(function(c,p){return"start[".concat(p,"]")}).join(),");"):t.map(function(c,p){return"".concat(a[p]," = ").concat(r[p]," + start[").concat(p,"];")}).join(`
`);this.userCode=`
      void main() {
        `.concat(n,` coords = getOutputCoords();
        `).concat(n,` sourceLoc;
        `).concat(l,`
        vec4 result = vec4(0.);
        `).concat(s,`
        `).concat(u,`
        setOutput(result);
      }
    `)}return e}();function SDe(e,t,n,r){var a=r.texData.get(e.dataId),i=r.makeTensorInfo(n,e.dtype),o=r.texData.get(i.dataId);Object.assign(o,a),o.refCount=1,o.shape=n,o.dtype=e.dtype;var s=S.slice_util.computeFlatOffset(t,S.util.computeStrides(e.shape));a.slice&&(s+=a.slice.flatOffset),o.slice={flatOffset:s,origDataId:a.slice&&a.slice.origDataId||e.dataId};var u=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,u+1),i}function ed(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.size,s=Ae(S.slice_util.parseSliceParams(a,i,o),2),u=s[0],l=s[1];if(S.slice_util.assertParamsValid(a,u,l),S.util.sizeFromShape(l)===0)return n.makeTensorInfo(l,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||a.dtype==="string"){var c=n.texData.get(a.dataId),p=dIe(c.values,u,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,p)}var d=n.texData.get(a.dataId).isPacked,f=S.slice_util.isSliceContinous(a.shape,u,l);if(d||!f){var h=S.env().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new xDe(l):new bDe(l),m=[u];return n.runWebGLProgram(h,[a],a.dtype,m)}return n.uploadToGPU(a.dataId),SDe(a,u,l,n)}var kDe={kernelName:S.Slice,backendName:"webgl",kernelFunc:ed};var NDe=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops;S.util.assert(a.shape.length<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var s=i.reduce(function(y,w){return y*w}),u=S.backend_util.getReshaped(a.shape,i,s),l=S.backend_util.getPermuted(u.length,i.length),c=S.backend_util.getReshapedPermuted(a.shape,i,s),p=S.backend_util.getSliceBeginCoords(o,i.length),d=S.backend_util.getSliceSize(c,o,i.length),f=[],h=Le({inputs:{x:a},backend:n,attrs:{shape:u}}),m=ma({inputs:{x:h},backend:n,attrs:{perm:l}}),v=Le({inputs:{x:m},backend:n,attrs:{shape:c}}),g=ed({inputs:{x:v},backend:n,attrs:{begin:p,size:d}});return f.push(h),f.push(m),f.push(v),f.forEach(function(y){return n.disposeIntermediateTensorInfo(y)}),g},TDe={kernelName:S.BatchToSpaceND,backendName:"webgl",kernelFunc:NDe};function EDe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=n.readSync(a.dataId),u=n.readSync(i.dataId),l=gO(s,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,l)}var IDe={kernelName:S.Bincount,backendName:"webgl",kernelFunc:EDe},CDe=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,DDe=`
  return float(int(a.r) & int(b.r));
`;function _De(e){var t=e.inputs,n=e.backend,r=t.a,a=t.b,i=S.env().getBool("WEBGL_PACK_BINARY_OPERATIONS"),o=S.env().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,a])||o===1){var s=n.texData.get(r.dataId).values,u=n.texData.get(a.dataId).values,l=Ae(PEe(r.shape,a.shape,s,u,r.dtype),2),c=l[0],p=l[1],d=n.makeTensorInfo(p,r.dtype),f=n.texData.get(d.dataId);return f.values=c,d}var h;return i?h=new Zp(CDe,r.shape,a.shape,!1):h=new dc(DDe,r.shape,a.shape),n.runWebGLProgram(h,[r,a],r.dtype)}var ADe={kernelName:S.BitwiseAnd,backendName:"webgl",kernelFunc:_De};function FDe(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,i=n.readSync(r.dataId),o=n.readSync(a.dataId),s=S.backend_util.assertAndGetBroadcastShape(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}var RDe={kernelName:S.BroadcastArgs,backendName:"webgl",kernelFunc:FDe};var ODe="return float(a != b);",FO=Xr({opSnippet:ODe,cpuKernelImpl:rIe,dtype:"bool"}),MDe={kernelName:S.NotEqual,backendName:"webgl",kernelFunc:FO};function Lh(e){var t=e.inputs,n=e.backend,r=t.input,a=n.texData.get(r.dataId);return ri({inputs:{x:a.complexTensorInfos.real},backend:n})}var PDe={kernelName:S.Real,backendName:"webgl",kernelFunc:Lh};var BDe="return float(int(x));";function LDe(e,t){var n=new ps(e.shape,BDe),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}function q6(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dtype;if(i==="complex64"){if(a.dtype==="complex64")return ri({inputs:{x:a},backend:n});var o=bNe.zeros(a.shape),s=q6({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),u=ju({inputs:{real:s,imag:o},backend:n});return o.dispose(),n.disposeIntermediateTensorInfo(s),u}if(a.dtype==="complex64"){var l=Lh({inputs:{input:a},backend:n}),u=q6({inputs:{x:l},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(l),u}if(!S.util.hasEncodingLoss(a.dtype,i)){var u=ri({inputs:{x:a},backend:n});return{dataId:u.dataId,shape:u.shape,dtype:i}}if(n.shouldExecuteOnCPU([a])){var c=n.texData.get(a.dataId).values,p=Ae(BEe(c,a.shape,a.dtype,i),3),d=p[0],f=p[1],h=p[2];return n.makeTensorInfo(d,f,h)}if(i==="int32")return LDe(a,n);if(i==="bool"){var m=n.makeTensorInfo([],"bool",S.util.getTypedArrayFromDType("bool",1)),v={a,b:m},u=FO({inputs:v,backend:n});return n.disposeIntermediateTensorInfo(m),u}throw new Error("Error in Cast: failed to cast ".concat(a.dtype," to ").concat(i))}var zDe={kernelName:S.Cast,backendName:"webgl",kernelFunc:q6};var lR="return ceil(x);",$De=Wt({opSnippet:lR,packedOpSnippet:lR,cpuKernelImpl:LEe}),VDe={kernelName:S.Ceil,backendName:"webgl",kernelFunc:$De};var WDe=function(){function e(t){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return e}();var UDe=function(){function e(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return e}();function GDe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.clipValueMin,o=r.clipValueMax,s;S.env().getBool("WEBGL_PACK_CLIP")?s=new UDe(a.shape):s=new WDe(a.shape);var u=[[i],[o]];return n.runWebGLProgram(s,[a],a.dtype,u)}var qDe={kernelName:S.ClipByValue,backendName:"webgl",kernelFunc:GDe};var HDe=function(){function e(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}return e}();function cR(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}function jDe(e){var t=e.inputs,n=e.backend,r=t.x,a=n.texData.get(r.dataId),i=new HDe(r.shape),o=[cR(r,a.complexTensorInfos.real),cR(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}var KDe={kernelName:S.ComplexAbs,backendName:"webgl",kernelFunc:jDe};var XDe=function(){function e(t){this.outputShape=[],this.outputShape=S.backend_util.computeOutShape(t,1),this.variableNames=t.map(function(u,l){return"T".concat(l)});var n=new Array(t.length-1);n[0]=t[0][1];for(var r=1;r<n.length;r++)n[r]=n[r-1]+t[r][1];for(var a=["if (yC < ".concat(n[0],") setOutput(getT0(yR, yC));")],r=1;r<n.length;r++){var i=n[r-1];a.push("else if (yC < ".concat(n[r],") ")+"setOutput(getT".concat(r,"(yR, yC-").concat(i,"));"))}var o=n.length,s=n[n.length-1];a.push("else setOutput(getT".concat(o,"(yR, yC-").concat(s,"));")),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `.concat(a.join(`
        `),`
      }
    `)}return e}();var YDe=function(){function e(t,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=S.backend_util.computeOutShape(t,n);var r=this.outputShape,a=r.length,i=tn(a),o=fa("coords",a),s=["x","y","z","w","u","v"].slice(0,a);this.variableNames=t.map(function(g,y){return"T".concat(y)});var u=new Array(t.length-1);u[0]=t[0][n];for(var l=1;l<u.length;l++)u[l]=u[l-1]+t[l][n];for(var c=s[n],p=s.slice(-2),d=s.join(),f="if (".concat(c," < ").concat(u[0],`) {
        return getChannel(
            getT0(`).concat(d,"), vec2(").concat(p.join(),`));
        }`),l=1;l<u.length;l++){var h=u[l-1];f+=`
        if (`.concat(c," < ").concat(u[l],"  && ").concat(c," >= ").concat(u[l-1],`) {
          return getChannel(
            getT`).concat(l,"(").concat(C0(s,c,h),`),
            vec2(`).concat(C0(p,c,h),`));
        }`)}var m=u.length,v=u[u.length-1];f+=`
        return getChannel(
          getT`.concat(m,"(").concat(C0(s,c,v),`),
          vec2(`).concat(C0(p,c,v),"));"),this.userCode=`
      float getValue(`.concat(s.map(function(g){return"int "+g}),`) {
        `).concat(f,`
      }

      void main() {
        `).concat(i,` coords = getOutputCoords();
        vec4 result = vec4(getValue(`).concat(o,`), 0., 0., 0.);

        `).concat(o[a-1]," = ").concat(o[a-1],` + 1;
        if (`).concat(o[a-1]," < ").concat(r[a-1],`) {
          result.g = getValue(`).concat(o,`);
        }

        `).concat(o[a-2]," = ").concat(o[a-2],` + 1;
        if (`).concat(o[a-2]," < ").concat(r[a-2],`) {
          result.a = getValue(`).concat(o,`);
        }

        `).concat(o[a-1]," = ").concat(o[a-1],` - 1;
        if (`).concat(o[a-2]," < ").concat(r[a-2],` &&
            `).concat(o[a-1]," < ").concat(r[a-1],`) {
          result.b = getValue(`).concat(o,`);
        }
        setOutput(result);
      }
    `)}return e}();function C0(e,t,n){var r=e.indexOf(t),a=e.map(function(i,o){return o===r?"".concat(i," - ").concat(n):i});return a.join()}function V0(e){var t=e.inputs,n=e.backend,r=t.input,a=n.texData.get(r.dataId);return ri({inputs:{x:a.complexTensorInfos.imag},backend:n})}var JDe={kernelName:S.Imag,backendName:"webgl",kernelFunc:V0};function _h(e,t,n){var r,a,i=e[0].dtype;if(i==="complex64"){var o=e.map(function(G){return Lh({inputs:{input:G},backend:n})}),s=e.map(function(G){return V0({inputs:{input:G},backend:n})}),u=_h(o,t,n),l=_h(s,t,n),c=ju({inputs:{real:u,imag:l},backend:n});return o.forEach(function(G){return n.disposeIntermediateTensorInfo(G)}),s.forEach(function(G){return n.disposeIntermediateTensorInfo(G)}),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(l),c}var p=n.shouldExecuteOnCPU(e);if(i==="string"&&(p=!0),p){var d=e.map(function(G){var X=S.util.sizeFromShape(G.shape.slice(t)),ie=[-1,X];return Le({inputs:{x:G},backend:n,attrs:{shape:ie}})}),f=d.map(function(G){return{vals:n.readSync(G.dataId),shape:G.shape}}),h=S.backend_util.computeOutShape(d.map(function(G){return G.shape}),1),m=d[0].shape[0]===1,v=zEe(f,h,i,m),g=S.backend_util.computeOutShape(e.map(function(G){return G.shape}),t),y=n.makeTensorInfo(g,i,v);return d.forEach(function(G){return n.disposeIntermediateTensorInfo(G)}),y}var w=e.filter(function(G){return S.util.sizeFromShape(G.shape)>0}),b=S.env().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&w[0].shape.length>1;if(w.length===1){var x=b?new ps(e[0].shape,qu):new Hu(e[0].shape,qu);return n.runWebGLProgram(x,e,i)}var k=S.env().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(w.length>k){for(var N=[],E=0;E<w.length;E+=k){var C=w.slice(E,E+k);N.push(_h(C,t,n))}var R=_h(N,t,n);try{for(var A=ha(N),M=A.next();!M.done;M=A.next()){var E=M.value;n.disposeIntermediateTensorInfo(E)}}catch(G){r={error:G}}finally{try{M&&!M.done&&(a=A.return)&&a.call(A)}finally{if(r)throw r.error}}return R}if(b){var $=new YDe(w.map(function(G){return G.shape}),t);return n.runWebGLProgram($,w,i)}var z=ZDe(w,t,n),L=z.tensors2D,B=z.outShape,W=new XDe(L.map(function(G){return G.shape})),Y=n.runWebGLProgram(W,L,i);L.forEach(function(G){return n.disposeIntermediateTensorInfo(G)});var Q=Le({inputs:{x:Y},attrs:{shape:B},backend:n});return n.disposeIntermediateTensorInfo(Y),Q}function ZDe(e,t,n){var r=S.backend_util.computeOutShape(e.map(function(i){return i.shape}),t),a=e.map(function(i){return Le({inputs:{x:i},attrs:{shape:[-1,S.util.sizeFromShape(i.shape.slice(t))]},backend:n})});return{tensors2D:a,outShape:r}}function RO(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.axis,i=S.util.parseAxisParam(a,t[0].shape)[0],o=t.map(function(l){return l.shape});S.backend_util.assertParamsConsistent(o,i);var s=S.backend_util.computeOutShape(t.map(function(l){return l.shape}),i);if(S.util.sizeFromShape(s)===0)return n.makeTensorInfo(s,t[0].dtype,[]);var u=t.filter(function(l){return S.util.sizeFromShape(l.shape)>0});return u.length===1?ri({inputs:{x:u[0]},backend:n}):_h(u,i,n)}var QDe={kernelName:S.Concat,backendName:"webgl",kernelFunc:RO};var OO=function(){function e(t,n,r,a,i){n===void 0&&(n=!1),r===void 0&&(r=null),a===void 0&&(a=!1),i===void 0&&(i=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,l=t.strideWidth,c=t.dilationHeight,p=t.dilationWidth,d=t.filterHeight,f=t.filterWidth,h=Math.floor(t.inChannels/4)*4,m=t.inChannels%4,v=t.dataFormat==="channelsLast",g=v?1:2,y=v?2:3,w=v?3:1,b="",x="";r&&(a?b=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `.concat(r,`
        }`):i?b=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          `.concat(r,`
        }`):b=`
          float activation(float x) {
            `.concat(r,`
          }
        `),x="result = activation(result);");var k=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      `.concat(b,`

      const ivec2 strides = ivec2(`).concat(u,", ").concat(l,`);
      const ivec2 pads = ivec2(`).concat(o,", ").concat(s,`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`).concat(w,`];

        ivec2 xRCCorner =
            ivec2(coords[`).concat(g,"], coords[").concat(y,`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `).concat(d,`; wR++) {
          int xR = xRCorner + wR * `).concat(c,`;

          if (xR < 0 || xR >= `).concat(t.inHeight,`) {
            continue;
          }

          for (int wC = 0; wC < `).concat(f,`; wC++) {
            int xC = xCCorner + wC * `).concat(p,`;

            if (xC < 0 || xC >= `).concat(t.inWidth,`) {
              continue;
            }

            for (int d1 = 0; d1 < `).concat(h,`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`).concat(v,`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`).concat(m===1,`) {

              if (`).concat(v,`) {
                dotProd +=
                    getX(batch, xR, xC, `).concat(h,`) *
                    getW(wR, wC, `).concat(h,`, d2);
              } else {
                dotProd +=
                    getX(batch, `).concat(h,`, xR, xC) *
                    getW(wR, wC, `).concat(h,`, d2);
              }

            } else if (`).concat(m===2,`) {
              vec2 wValues = vec2(
                getW(wR, wC, `).concat(h,`, d2),
                getW(wR, wC, `).concat(h,` + 1, d2)
              );

              if (`).concat(v,`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `).concat(h,`),
                  getX(batch, xR, xC, `).concat(h,` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `).concat(h,`, xR, xC),
                  getX(batch, `).concat(h,` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`).concat(m===3,`) {
              vec3 wValues = vec3(
                getW(wR, wC, `).concat(h,`, d2),
                getW(wR, wC, `).concat(h,` + 1, d2),
                getW(wR, wC, `).concat(h,` + 2, d2)
              );

              if (`).concat(v,`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `).concat(h,`),
                  getX(batch, xR, xC, `).concat(h,` + 1),
                  getX(batch, xR, xC, `).concat(h,` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `).concat(h,`, xR, xC),
                  getX(batch, `).concat(h,` + 1, xR, xC),
                  getX(batch, `).concat(h,` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `).concat(k,`
        `).concat(x,`
        setOutput(result);
      }
    `)}return e}(),e_e=function(){function e(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,r=t.padInfo.top,a=t.padInfo.left,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,l=t.dilationHeight,c=t.dilationWidth,p=t.filterDepth,d=t.filterHeight,f=t.filterWidth,h=Math.floor(t.inChannels/4)*4,m=t.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`.concat(i,", ").concat(o,", ").concat(s,`);
      const ivec3 pads = ivec3(`).concat(n,", ").concat(r,", ").concat(a,`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `).concat(p,`; wF++) {
          int xF = xFCorner + wF * `).concat(u,`;

          if (xF < 0 || xF >= `).concat(t.inDepth,`) {
            continue;
          }

          for (int wR = 0; wR < `).concat(d,`; wR++) {
            int xR = xRCorner + wR * `).concat(l,`;

            if (xR < 0 || xR >= `).concat(t.inHeight,`) {
              continue;
            }

            for (int wC = 0; wC < `).concat(f,`; wC++) {
              int xC = xCCorner + wC * `).concat(c,`;

              if (xC < 0 || xC >= `).concat(t.inWidth,`) {
                continue;
              }

              for (int d1 = 0; d1 < `).concat(h,`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`).concat(m===1,`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `).concat(h,`) *
                  getW(wF, wR, wC, `).concat(h,`, d2);
              } else if (`).concat(m===2,`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `).concat(h,`),
                  getX(batch, xF, xR, xC, `).concat(h,` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `).concat(h,`, d2),
                  getW(wF, wR, wC, `).concat(h,` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`).concat(m===3,`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `).concat(h,`),
                  getX(batch, xF, xR, xC, `).concat(h,` + 1),
                  getX(batch, xF, xR, xC, `).concat(h,` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `).concat(h,`, d2),
                  getW(wF, wR, wC, `).concat(h,` + 1, d2),
                  getW(wF, wR, wC, `).concat(h,` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `)}return e}();var MO=function(){function e(t,n,r,a,i){n===void 0&&(n=!1),r===void 0&&(r=null),a===void 0&&(a=!1),i===void 0&&(i=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=ra(this.outputShape.length);for(var o=t.padInfo.left,s=t.strideWidth,u=t.dilationWidth,l=t.filterHeight,c=t.filterWidth,p=c,d=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`,f=0;f<c;f++)d+=`
           vec4 xTexelC`.concat(f*2,`;
           int xTexelC`).concat(f*2,`Ready;
           vec4 xTexelC`).concat(f*2+1,`;
           int xTexelC`).concat(f*2+1,`Ready;
           vec4 xC`).concat(f,";");d+=`
     for (int r = 0; r < `.concat(l,`; r++) {
      for (int d1 = 0; d1 < `).concat(t.inChannels,`; d1 += 2) {
       `);for(var f=0;f<c;f++)d+=`
           xTexelC`.concat(f*2,` = vec4(0.0);
           xTexelC`).concat(f*2,`Ready = 0;
           xTexelC`).concat(f*2+1,` = vec4(0.0);
           xTexelC`).concat(f*2+1,`Ready = 0;
           xC`).concat(f," = vec4(0.0);");d+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(var h=0;h<(p+1)/2;h++){var m=h*2;if(d+=`
           xC = xCCorner + `.concat(m*u,`;
           `),s===1){if(m<c&&(o%2===1?(d+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC`.concat(m,`Ready == 0) {
                   xTexelC`).concat(m,` = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC`).concat(m,`.zw = vec2(0.0);
                   }
                   xTexelC`).concat(m,`Ready = 1;
                 }
               `),u===1&&m>0?d+=`
                 xC`.concat(m," = vec4(xTexelC").concat(m-2,".zw, xTexelC").concat(m,`.xy);
                 `):d+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC`.concat(m," = vec4(previous.zw, xTexelC").concat(m,`.xy);
                   } else {
                     xC`).concat(m," = vec4(0.0, 0.0, xTexelC").concat(m,`.xy);
                   }
                   `)):d+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC`.concat(m,`Ready == 0) {
                   xTexelC`).concat(m,` = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC`).concat(m,`.zw = vec2(0.0);
                   }
                   xTexelC`).concat(m,`Ready = 1;
                 }

                 xC`).concat(m," = xTexelC").concat(m,`;
                 `),m+1<c)){var v=o%2===0?S.util.nearestLargerEven(u):u;u%2===0&&o%2===1||u%2!==0&&o%2!==1?(d+=`
                   xCOffset = xC + imod(pads[1], 2) + `.concat(v,`;

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC`).concat(m+1,`Ready == 0) {
                     xTexelC`).concat(m+1,` = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC`).concat(m+1,`.zw = vec2(0.0);
                     }
                     xTexelC`).concat(m+1,`Ready = 1;
                   }
                   `),u>1?d+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC`.concat(m+1," = vec4(previous.zw, xTexelC").concat(m+1,`.xy);
                     } else {
                      xC`).concat(m+1," = vec4(0.0, 0.0, xTexelC").concat(m+1,`.xy);
                     }
                     `):d+=`
                     xC`.concat(m+1," = vec4(xTexelC").concat(m,".zw, xTexelC").concat(m+1,`.xy);
                     `)):v===1?d+=`
                     xC`.concat(m+1," = xTexelC").concat(m,`;
                     `):d+=`
                     xCOffset = xC + `.concat(v,`;

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC`).concat(m+1,`Ready == 0) {
                       xTexelC`).concat(m+1,` = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC`).concat(m+1,`.zw = vec2(0.0);
                       }
                       xTexelC`).concat(m+1,`Ready = 1;
                     }

                     xC`).concat(m+1," = xTexelC").concat(m+1,`;
                     `)}}else m<c&&(o%2===1?(d+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC`.concat(m,`Ready == 0) {
                   xTexelC`).concat(m,` = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC`).concat(m,`.zw = vec2(0.0);
                   }
                   xTexelC`).concat(m,`Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC`).concat(m+1,`Ready == 0) {
                   xTexelC`).concat(m+1,` = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC`).concat(m+1,`.zw = vec2(0.0);
                   }
                   xTexelC`).concat(m+1,`Ready = 1;
                 }

                 xC`).concat(m," = vec4(xTexelC").concat(m,".zw, xTexelC").concat(m+1,`.zw);
               `),m+1<c&&(d+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC`.concat(m+1," = vec4(xTexelC").concat(m+1,`.xy, final.xy);
                 `))):(d+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC`.concat(m,`Ready == 0) {
                   xTexelC`).concat(m,` = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC`).concat(m,`.zw = vec2(0.0);
                   }
                   xTexelC`).concat(m,`Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC`).concat(m+1,`Ready == 0) {
                   xTexelC`).concat(m+1,` = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC`).concat(m+1,`.zw = vec2(0.);
                   }
                   xTexelC`).concat(m+1,`Ready = 1;
                 }

                 xC`).concat(m,` = vec4(
                   xTexelC`).concat(m,".xy, xTexelC").concat(m+1,`.xy);
               `),m+1<c&&(d+=`
                   xC`.concat(m+1," = vec4(xTexelC").concat(m,".zw, xTexelC").concat(m+1,`.zw);
                 `))));m<c&&(d+=`
             wTexel = getW(r, `.concat(m,`, d1, d2);
             dotProd += xC`).concat(m,`.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < `).concat(t.inChannels,`) {
               dotProd += xC`).concat(m,`.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `),m+1<c&&(d+=`
               wTexel = getW(r, `.concat(m+1,`, d1, d2);
               dotProd += xC`).concat(m+1,`.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < `).concat(t.inChannels,`) {
                 dotProd += xC`).concat(m+1,`.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `)))}d+=`
     }
   `,d+=`
     }
   `,d+=`
     }
   `;var g="",y="";r&&(a?g=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           `.concat(r,`
         }`):i?g=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           `.concat(r,`
         }`):g=`vec4 activation(vec4 x) {
           `.concat(r,`
         }`),y="result = activation(result);");var w=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       `.concat(g,`

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         `).concat(d,`

         vec4 result = dotProd - vec4(0.000000000000001);
         `).concat(w,`
         `).concat(y,`
         setOutput(result);
       }
     `)}return e}();var t_e=function(){function e(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=ra(this.outputShape.length);for(var r=n.dataFormat,a=va(),i=r==="channelsLast",o=i?1:2,s=i?2:3,u=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":"if(blockIndex < ".concat(t[2]," && pos < ").concat(t[1],") {"),l="",c=0;c<=1;c++)for(var p=0;p<=1;p++)l+=`
          blockIndex = rc.z + `.concat(p,`;
          pos = rc.y + `).concat(c,`;

          `).concat(u,`
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[`).concat(o,`] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[`).concat(s,`] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (`).concat(i,`) {
                  innerDims = vec2(d1, ch);
                  result[`).concat(c*2+p,`] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`).concat(c*2+p,`] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `);this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `.concat(l,`

        `).concat(a.output,` = result;
      }
    `)}return e}();function P0(e,t){var n=e.length;return n>=3?t?$n($n([],Ae(e.slice(0,-3)),!1),[e[n-3]*e[n-2],e[n-1]],!1):$n($n([],Ae(e.slice(0,-3)),!1),[e[n-3],e[n-2]*e[n-1]],!1):!t&&n===1&&e[0]>1?[e[0],1]:null}function PO(e){var t,n,r=e.x,a=e.filter,i=e.convInfo,o=e.backend,s=e.bias,u=s===void 0?null:s,l=e.preluActivationWeights,c=l===void 0?null:l,p=e.leakyreluAlpha,d=p===void 0?0:p,f=e.activation,h=f===void 0?null:f,m=r.shape,v=o.texData.get(r.dataId),g=i.inChannels,y=m[0]*m[1]*m[2],w=i.outChannels,b=i.dataFormat==="channelsLast",x=!1,k=!1,N,E=[];if(c!=null){var C=P0(c.shape,b);C!=null&&(c=Le({inputs:{x:c},backend:o,attrs:{shape:C}}),E.push(c))}if(u!=null){var C=P0(u.shape,b);C!=null&&(u=Le({inputs:{x:u},backend:o,attrs:{shape:C}}),E.push(u))}var R=(y===1||w===1)&&g>CO,A=!R&&v.isPacked&&b&&v.texture!=null&&m[2]%2!==0&&S.util.arraysEqual(v.shape.slice(-3),m.slice(-3));if(A){var C=m[0]*m[1]*(m[2]+1),M={dataId:r.dataId,shape:[1,C,i.inChannels],dtype:r.dtype},$=v.shape;v.shape=v.shape.slice(),v.shape[v.shape.length-2]++,S.util.assert(Fh(v.shape,M.shape),function(){return"packed reshape ".concat(v.shape," to ").concat(M.shape," isn't free")});var z=Le({inputs:{x:a},backend:o,attrs:{shape:[1,i.inChannels,i.outChannels]}});E.push(z);var L=M0({a:M,b:z,backend:o,transposeA:x,transposeB:k,bias:u,activation:h,preluActivationWeights:c,leakyreluAlpha:d}),B=o.texData.get(L.dataId);S.util.assert(B.isPacked,function(){return"batchMatMul result is expected to be packed"}),v.shape=$,B.shape=i.outShape,N=ri({inputs:{x:L},backend:o}),N.shape=i.outShape,E.push(L)}else{var W=i.outHeight*i.outWidth,Y=Le({inputs:{x:r},backend:o,attrs:{shape:b?[i.batchSize,W,i.inChannels]:[i.batchSize,i.inChannels,W]}}),z=Le({inputs:{x:a},backend:o,attrs:{shape:[1,i.inChannels,i.outChannels]}}),Q=M0({a:b?Y:z,b:b?z:Y,transposeA:!b,transposeB:k,backend:o,bias:u,activation:h,preluActivationWeights:c,leakyreluAlpha:d});N=Le({inputs:{x:Q},backend:o,attrs:{shape:i.outShape}}),E.push(Y),E.push(z),E.push(Q)}try{for(var G=ha(E),X=G.next();!X.done;X=G.next()){var ie=X.value;o.disposeIntermediateTensorInfo(ie)}}catch(ae){t={error:ae}}finally{try{X&&!X.done&&(n=G.return)&&n.call(G)}finally{if(t)throw t.error}}return N}function BO(e){var t,n,r=e.x,a=e.filter,i=e.convInfo,o=e.backend,s=e.bias,u=s===void 0?null:s,l=e.preluActivationWeights,c=l===void 0?null:l,p=e.leakyreluAlpha,d=p===void 0?0:p,f=e.activation,h=f===void 0?null:f,m=i.filterWidth,v=i.filterHeight,g=i.inChannels,y=i.outWidth,w=i.outHeight,b=i.dataFormat,x=b==="channelsLast",k=m*v*g,N=w*y,E=[i.batchSize,k,N],C=!0,R=!1,A=[];if(c!=null){var M=P0(c.shape,x);M!=null&&(c=Le({inputs:{x:c},backend:o,attrs:{shape:M}}),A.push(c))}if(u!=null){var M=P0(u.shape,x);M!=null&&(u=Le({inputs:{x:u},backend:o,attrs:{shape:M}}),A.push(u))}var $=Le({inputs:{x:a},backend:o,attrs:{shape:[1,k,S.util.sizeFromShape(a.shape)/k]}});A.push($);var z=new t_e(E,i),L=[r.shape,[i.padInfo.top,i.padInfo.left],[i.strideHeight,i.strideWidth],[i.dilationHeight,i.dilationWidth],[i.inChannels],[i.filterWidth*i.inChannels],[i.outWidth]],B=o.runWebGLProgram(z,[r],"float32",L),W=Le({inputs:{x:B},backend:o,attrs:{shape:E}});A.push(B),A.push(W);var Y=u!=null,Q=c!=null,G=h==="leakyrelu",X=h?Rh(h,!0):null,ie=new IO(x?W.shape:$.shape,x?$.shape:W.shape,x?[i.batchSize,N,i.outChannels]:[i.batchSize,i.outChannels,N],C,R,Y,X,Q,G),ae=x?[W,$]:[$,W];if(u&&ae.push(u),Q&&ae.push(c),G){var le=o.makeTensorInfo([],"float32",S.util.createScalarValue(d,"float32"));ae.push(le),A.push(le)}var de=o.runWebGLProgram(ie,ae,"float32"),ge=Le({inputs:{x:de},backend:o,attrs:{shape:i.outShape}});A.push(de);try{for(var Ee=ha(A),he=Ee.next();!he.done;he=Ee.next()){var xe=he.value;o.disposeIntermediateTensorInfo(xe)}}catch(Ne){t={error:Ne}}finally{try{he&&!he.done&&(n=Ee.return)&&n.call(Ee)}finally{if(t)throw t.error}}return ge}function n_e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dataFormat,l=r.dilations,c=r.dimRoundingMode,p=S.backend_util.convertConv2DDataFormat(u),d=S.backend_util.computeConv2DInfo(a.shape,i.shape,o,l,s,c,!1,p),f;if(d.filterHeight===1&&d.filterWidth===1&&d.dilationHeight===1&&d.dilationWidth===1&&d.strideHeight===1&&d.strideWidth===1&&(d.padInfo.type==="SAME"||d.padInfo.type==="VALID"))f=PO({x:a,filter:i,convInfo:d,backend:n});else if(d.strideWidth<=2&&p==="channelsLast"&&S.env().getBool("WEBGL_EXP_CONV")){var h=new MO(d),m=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];f=n.runWebGLProgram(h,[a,i],"float32",m)}else if(S.env().getBool("WEBGL_CONV_IM2COL"))f=BO({x:a,filter:i,convInfo:d,backend:n});else{var h=new OO(d);f=n.runWebGLProgram(h,[a,i],"float32")}var v=Le({inputs:{x:f},backend:n,attrs:{shape:d.outShape}});return n.disposeIntermediateTensorInfo(f),v}var r_e={kernelName:S.Conv2D,backendName:"webgl",kernelFunc:n_e};var a_e=function(){function e(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o=t.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `.concat(t.batchSize,`; b++) {
          for (int yR = 0; yR < `).concat(t.outHeight,`; yR++) {
            int xR = wR + yR * `).concat(n," - ").concat(a,`;

            if (xR < 0 || xR >= `).concat(t.inHeight,`) {
              continue;
            }

            for (int yC = 0; yC < `).concat(t.outWidth,`; yC++) {
              int xC = wC + yC * `).concat(r," - ").concat(i,`;

              if (xC < 0 || xC >= `).concat(t.inWidth,`) {
                continue;
              }

              `).concat(o?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`,`
            }
          }
        }
        setOutput(dotProd);
      }
    `)}return e}(),i_e=function(){function e(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=t.dataFormat==="channelsLast",s=n-1-t.padInfo.top,u=r-1-t.padInfo.left,l=o?1:2,c=o?2:3,p=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(`.concat(s,", ").concat(u,`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`).concat(p,`];

        ivec2 dyCorner = ivec2(coords[`).concat(l,"], coords[").concat(c,`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `).concat(n,`; wR++) {
          float dyR = float(dyRCorner + wR) / `).concat(a,`.0;

          if (dyR < 0.0 || dyR >= `).concat(t.outHeight,`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `).concat(n,` - 1 - wR;

          for (int wC = 0; wC < `).concat(r,`; wC++) {
            float dyC = float(dyCCorner + wC) / `).concat(i,`.0;

            if (dyC < 0.0 || dyC >= `).concat(t.outWidth,`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `).concat(r,` - 1 - wC;

            for (int d2 = 0; d2 < `).concat(t.outChannels,`; d2++) {

              if (`).concat(o,`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `)}return e}(),o_e=function(){function e(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.padInfo.front,o=t.padInfo.top,s=t.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `.concat(t.batchSize,`; b++) {
          for (int yF = 0; yF < `).concat(t.outDepth,`; yF++) {
            int xF = wF + yF * `).concat(n," - ").concat(i,`;

            if (xF < 0 || xF >= `).concat(t.inDepth,`) {
              continue;
            }

            for (int yR = 0; yR < `).concat(t.outHeight,`; yR++) {
              int xR = wR + yR * `).concat(r," - ").concat(o,`;

              if (xR < 0 || xR >= `).concat(t.inHeight,`) {
                continue;
              }

              for (int yC = 0; yC < `).concat(t.outWidth,`; yC++) {
                int xC = wC + yC * `).concat(a," - ").concat(s,`;

                if (xC < 0 || xC >= `).concat(t.inWidth,`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `)}return e}(),s_e=function(){function e(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=n-1-t.padInfo.front,l=r-1-t.padInfo.top,c=a-1-t.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`.concat(u,", ").concat(l,", ").concat(c,`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `).concat(n,`; wF++) {
          float dyF = float(dyFCorner + wF) / `).concat(i,`.0;

          if (dyF < 0.0 || dyF >= `).concat(t.outDepth,`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `).concat(n,` - 1 - wF;

          for (int wR = 0; wR < `).concat(r,`; wR++) {
            float dyR = float(dyRCorner + wR) / `).concat(o,`.0;

            if (dyR < 0.0 || dyR >= `).concat(t.outHeight,`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `).concat(r,` - 1 - wR;

            for (int wC = 0; wC < `).concat(a,`; wC++) {
              float dyC = float(dyCCorner + wC) / `).concat(s,`.0;

              if (dyC < 0.0 || dyC >= `).concat(t.outWidth,`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `).concat(a,` - 1 - wC;

              for (int d2 = 0; d2 < `).concat(t.outChannels,`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `)}return e}();function u_e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.dataFormat,l=r.dimRoundingMode,c=r.filterShape,p=S.backend_util.convertConv2DDataFormat(u),d=S.backend_util.computeConv2DInfo(a.shape,c,o,1,s,l,!1,p),f=new a_e(d);return n.runWebGLProgram(f,[a,i],"float32")}var l_e={kernelName:S.Conv2DBackpropFilter,backendName:"webgl",kernelFunc:u_e};var c_e=function(){function e(t){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=t.inShape,this.enableShapeUniforms=ra(this.outputShape.length);var n=t.filterHeight,r=t.filterWidth,a=n-1-t.padInfo.top,i=r-1-t.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(`.concat(a,", ").concat(i,`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < `).concat(n,`; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= `).concat(t.outHeight,`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = `).concat(n,` - 1 - wR;

          for (int wC = 0; wC < `).concat(r,`; wC++) {
            int wCPerm = `).concat(r,` - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < `).concat(t.outWidth,`.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < `).concat(t.outWidth,`.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < `).concat(t.outChannels,`; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < `).concat(t.outChannels,`; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < `).concat(t.outChannels,`; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `)}return e}();function p_e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.inputShape,s=r.strides,u=r.pad,l=r.dataFormat,c=r.dimRoundingMode,p=S.backend_util.convertConv2DDataFormat(l),d=S.backend_util.computeConv2DInfo(o,i.shape,s,1,u,c,!1,p);if(S.env().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&p==="channelsLast"){var f=[[d.strideHeight,d.strideWidth]],h=new c_e(d);return n.runWebGLProgram(h,[a,i],"float32",f)}else{var h=new i_e(d);return n.runWebGLProgram(h,[a,i],"float32")}}var d_e={kernelName:S.Conv2DBackpropInput,backendName:"webgl",kernelFunc:p_e};function f_e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,l=S.backend_util.computeConv3DInfo(a.shape,i.shape,o,u,s),c=new e_e(l);return n.runWebGLProgram(c,[a,i],"float32")}var h_e={kernelName:S.Conv3D,backendName:"webgl",kernelFunc:f_e};function m_e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.filterShape,l=S.backend_util.computeConv3DInfo(a.shape,u,o,1,s),c=new o_e(l);return n.runWebGLProgram(c,[a,i],"float32")}var v_e={kernelName:S.Conv3DBackpropFilterV2,backendName:"webgl",kernelFunc:m_e};function g_e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.pad,s=r.strides,u=r.inputShape,l=S.backend_util.computeConv3DInfo(u,i.shape,s,1,o),c=new s_e(l);return n.runWebGLProgram(c,[a,i],"float32")}var y_e={kernelName:S.Conv3DBackpropInputV2,backendName:"webgl",kernelFunc:g_e};var b_e=Qp+`
  return cos(x);
`,w_e=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  `.concat(mc,`
  return result;
`),x_e=Wt({opSnippet:b_e,packedOpSnippet:w_e}),S_e={kernelName:S.Cos,backendName:"webgl",kernelFunc:x_e};var k_e=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,N_e=Wt({opSnippet:k_e}),T_e={kernelName:S.Cosh,backendName:"webgl",kernelFunc:N_e};var E_e=function(){function e(t,n,r,a,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=Ae(t,4),s=o[0],u=o[1],l=o[2],c=o[3],p=Ae(n,1),d=p[0],f=Ae(r,2),h=f[0],m=f[1];this.outputShape=[d,h,m,c];var v=a==="bilinear"?1:0,g=Ae(["".concat(u-1,".0"),"".concat(l-1,".0")],2),y=g[0],w=g[1],b=Ae(h>1?["".concat((u-1)/(h-1)),"(y2-y1) * height_ratio","y1*".concat(y," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(y)],3),x=b[0],k=b[1],N=b[2],E=Ae(m>1?["".concat((l-1)/(m-1)),"(x2-x1) * width_ratio","x1*".concat(w," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(w)],3),C=E[0],R=E[1],A=E[2];this.userCode=`
      const float height_ratio = float(`.concat(x,`);
      const float width_ratio = float(`).concat(C,`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `).concat(s,`) {
          return;
        }

        float height_scale = `).concat(k,`;
        float width_scale = `).concat(R,`;

        float in_y = `).concat(N,`;
        if( in_y < 0.0 || in_y > `).concat(y,` ) {
          setOutput(float(`).concat(i,`));
          return;
        }
        float in_x = `).concat(A,`;
        if( in_x < 0.0 || in_x > `).concat(w,` ) {
          setOutput(float(`).concat(i,`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`).concat(v,` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `)}return e}();var I_e=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,s=r.cropSize,u=r.method,l=r.extrapolationValue,c=new E_e(a.shape,i.shape,s,u,l);return n.runWebGLProgram(c,[a,i,o],"float32")},C_e={kernelName:S.CropAndResize,backendName:"webgl",kernelFunc:I_e},Mh;(function(e){e.Prod="*",e.Sum="+"})(Mh||(Mh={}));var pR=function(){function e(t,n,r,a){this.op=t,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];var i=this.outputShape.length,o=this.op===Mh.Prod?"1.0":"0.0",s=r?o:"getX(".concat(dR(i,"coords",this.op),")"),u=this.outputShape[this.outputShape.length-1],l="",c="";r?(l=a?"end != ".concat(u-1):"end != 0",c=a?"end + 1":"end - 1"):(l=a?"end + pow2 < ".concat(u):"end >= pow2",c=a?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        `.concat(tn(i),` coords = getOutputCoords();
        int end = `).concat(fR(i,"coords",this.op),`;
        float val = `).concat(s,`;
        int pow2 = int(pow(2.0, index));
        if (`).concat(l,`) {
          int idx = `).concat(c,`;
          `).concat(fR(i,"coords",this.op),` = idx;
          val `).concat(this.op,"= getX(").concat(dR(i,"coords",this.op),`);
        }
        setOutput(val);
      }
    `)}return e}();function dR(e,t,n){if(e===1)return"".concat(t);if(e===2)return"".concat(t,".x, ").concat(t,".y");if(e===3)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(e===4)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function fR(e,t,n){if(e===1)return"".concat(t);if(e===2)return"".concat(t,".y");if(e===3)return"".concat(t,".z");if(e===4)return"".concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function LO(e,t,n,r,a,i){var o=t.shape.length,s=S.backend_util.getAxesPermutation([r],o),u=t;s!=null&&(u=ma({inputs:{x:t},backend:n,attrs:{perm:s}}));var l=S.backend_util.getInnerMostAxes(1,o)[0];if(l!==o-1)throw new Error("WebGL cumprod shader expects an inner-most axis=".concat(t.shape.length-1," ")+"but got axis=".concat(r));for(var c=u.shape[l],p=ri({inputs:{x:u},backend:n}),d=0;d<=Math.ceil(Math.log2(c))-1;d++){var f=new pR(e,u.shape,!1,i),h=[[d]],m=p;p=n.runWebGLProgram(f,[p],p.dtype,h),n.disposeIntermediateTensorInfo(m)}if(a){var f=new pR(e,u.shape,a,i),m=p;p=n.runWebGLProgram(f,[p],p.dtype),n.disposeIntermediateTensorInfo(m)}if(s!=null){var v=S.backend_util.getUndoAxesPermutation(s),g=ma({inputs:{x:p},backend:n,attrs:{perm:v}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(u),g}return p}function D_e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;return LO(Mh.Prod,a,n,i,o,s)}var __e={kernelName:S.Cumprod,backendName:"webgl",kernelFunc:D_e};function A_e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;return LO(Mh.Sum,a,n,i,o,s)}var F_e={kernelName:S.Cumsum,backendName:"webgl",kernelFunc:A_e};function R_e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=r.binaryOutput;if(a.shape.length===1){var u=n.readSync(a.dataId),l=n.readSync(i.dataId),c=gO(u,l,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}else if(a.shape.length===2){var p=n.bufferSync(a),d=n.bufferSync(i),f=MEe(p,d,o,s);return n.makeTensorInfo(f.shape,i.dtype,f.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}var O_e={kernelName:S.DenseBincount,backendName:"webgl",kernelFunc:R_e};var M_e=function(){function e(t,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `.concat(this.getHeightCoordString(),`;
      int w = `).concat(this.getWidthCoordString(),`;
      int d = `).concat(this.getDepthCoordString(),`;

      int in_h = h / `).concat(n,`;
      int offset_h = imod(h, `).concat(n,`);
      int in_w = w / `).concat(n,`;
      int offset_w = imod(w, `).concat(n,`);
      int offset_d = (offset_h * `).concat(n,` + offset_w) *
        `).concat(this.getOutputDepthSize(),`;
      int in_d = d + offset_d;

      float result = `).concat(this.getInputSamplingString(),`;
      setOutput(result);
    }
  `)}return e.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}();function P_e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockSize,o=r.dataFormat,s=a.shape[0],u=o==="NHWC"?a.shape[1]:a.shape[2],l=o==="NHWC"?a.shape[2]:a.shape[3],c=o==="NHWC"?a.shape[3]:a.shape[1],p=u*i,d=l*i,f=c/(i*i),h=o==="NHWC"?[s,p,d,f]:[s,f,p,d],m=new M_e(h,i,o);return n.runWebGLProgram(m,[a],a.dtype)}var B_e={kernelName:S.DepthToSpace,backendName:"webgl",kernelFunc:P_e};var zO=function(){function e(t,n,r,a,i){n===void 0&&(n=!1),r===void 0&&(r=null),a===void 0&&(a=!1),i===void 0&&(i=!1),this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=ra(this.outputShape.length);var o=t.filterHeight,s=t.filterWidth,u=t.outChannels/t.inChannels,l="",c="";r&&(a?l=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `.concat(r,`
        }`):i?l=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          `.concat(r,`
        }`):l=`
          float activation(float x) {
            `.concat(r,`
          }
        `),c="result = activation(result);");var p=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      `.concat(l,`

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `).concat(u,`;
        int q = d2 - d1 * `).concat(u,`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `).concat(o,`; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < `).concat(s,`; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `).concat(p,`
        `).concat(c,`
        setOutput(result);
      }
    `)}return e}();var $O=function(){function e(t,n,r,a,i){n===void 0&&(n=!1),r===void 0&&(r=null),a===void 0&&(a=!1),i===void 0&&(i=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=ra(this.outputShape.length);for(var o=t.outChannels/t.inChannels,s=t.padInfo.left,u=t.strideWidth,l=t.dilationWidth,c=t.filterHeight,p=t.filterWidth,d=p,f=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`,h=0;h<p;h++)f+=`
          vec4 xTexelC`.concat(h*2,`;
          int xTexelC`).concat(h*2,`Ready;
          vec4 xTexelC`).concat(h*2+1,`;
          int xTexelC`).concat(h*2+1,`Ready;
          vec4 xC`).concat(h,";");f+=`
    for (int r = 0; r < `.concat(c,`; r++) {
      `);for(var h=0;h<p;h++)f+=`
          xTexelC`.concat(h*2,` = vec4(0.0);
          xTexelC`).concat(h*2,`Ready = 0;
          xTexelC`).concat(h*2+1,` = vec4(0.0);
          xTexelC`).concat(h*2+1,`Ready = 0;
          xC`).concat(h," = vec4(0.0);");f+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(var m=0;m<(d+1)/2;m++){var v=m*2;if(f+=`
          xC = xCCorner + `.concat(v*l,`;
          `),u===1){if(v<p&&(s%2===1?(f+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC`.concat(v,`Ready == 0) {
                  xTexelC`).concat(v,` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC`).concat(v,`.zw = vec2(0.0);
                  }
                  xTexelC`).concat(v,`Ready = 1;
                }
              `),l===1&&v>0?f+=`
                xC`.concat(v," = vec4(xTexelC").concat(v-2,".zw, xTexelC").concat(v,`.xy);
                `):f+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC`.concat(v," = vec4(previous.zw, xTexelC").concat(v,`.xy);
                  } else {
                    xC`).concat(v," = vec4(0.0, 0.0, xTexelC").concat(v,`.xy);
                  }
                  `)):f+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC`.concat(v,`Ready == 0) {
                  xTexelC`).concat(v,` = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC`).concat(v,`.zw = vec2(0.0);
                  }
                  xTexelC`).concat(v,`Ready = 1;
                }

                xC`).concat(v," = xTexelC").concat(v,`;
                `),v+1<p)){var g=s%2===0?S.util.nearestLargerEven(l):l;l%2===0&&s%2===1||l%2!==0&&s%2!==1?(f+=`
                  xCOffset = xC + imod(pads[1], 2) + `.concat(g,`;

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC`).concat(v+1,`Ready == 0) {
                    xTexelC`).concat(v+1,` = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC`).concat(v+1,`.zw = vec2(0.0);
                    }
                    xTexelC`).concat(v+1,`Ready = 1;
                  }
                  `),l>1?f+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC`.concat(v+1," = vec4(previous.zw, xTexelC").concat(v+1,`.xy);
                    } else {
                     xC`).concat(v+1," = vec4(0.0, 0.0, xTexelC").concat(v+1,`.xy);
                    }
                    `):f+=`
                    xC`.concat(v+1," = vec4(xTexelC").concat(v,".zw, xTexelC").concat(v+1,`.xy);
                    `)):g===1?f+=`
                    xC`.concat(v+1," = xTexelC").concat(v,`;
                    `):f+=`
                    xCOffset = xC + `.concat(g,`;

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC`).concat(v+1,`Ready == 0) {
                      xTexelC`).concat(v+1,` = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC`).concat(v+1,`.zw = vec2(0.0);
                      }
                      xTexelC`).concat(v+1,`Ready = 1;
                    }

                    xC`).concat(v+1," = xTexelC").concat(v+1,`;
                    `)}}else v<p&&(s%2===1?(f+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC`.concat(v,`Ready == 0) {
                  xTexelC`).concat(v,` = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC`).concat(v,`.zw = vec2(0.0);
                  }
                  xTexelC`).concat(v,`Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC`).concat(v+1,`Ready == 0) {
                  xTexelC`).concat(v+1,` = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC`).concat(v+1,`.zw = vec2(0.0);
                  }
                  xTexelC`).concat(v+1,`Ready = 1;
                }

                xC`).concat(v," = vec4(xTexelC").concat(v,".zw, xTexelC").concat(v+1,`.zw);
              `),v+1<p&&(f+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC`.concat(v+1," = vec4(xTexelC").concat(v+1,`.xy, final.xy);
                `))):(f+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC`.concat(v,`Ready == 0) {
                  xTexelC`).concat(v,` = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC`).concat(v,`.zw = vec2(0.0);
                  }
                  xTexelC`).concat(v,`Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC`).concat(v+1,`Ready == 0) {
                  xTexelC`).concat(v+1,` = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC`).concat(v+1,`.zw = vec2(0.);
                  }
                  xTexelC`).concat(v+1,`Ready = 1;
                }

                xC`).concat(v,` = vec4(
                  xTexelC`).concat(v,".xy, xTexelC").concat(v+1,`.xy);
              `),v+1<p&&(f+=`
                  xC`.concat(v+1," = vec4(xTexelC").concat(v,".zw, xTexelC").concat(v+1,`.zw);
                `))));v<p&&(f+=`
            wTexel = getW(r, `.concat(v,`, d1, q);
            dotProd += xC`).concat(v,` * vec4(wTexel.xz, wTexel.xz);
          `),v+1<p&&(f+=`
              wTexel = getW(r, `.concat(v+1,`, d1, q);
              dotProd += xC`).concat(v+1,` * vec4(wTexel.xz, wTexel.xz);
            `)))}f+=`
    }
  `,f+=`
      }
    `;var y="",w="";r&&(a?y=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `.concat(r,`
        }`):i?y=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          `.concat(r,`
        }`):y=`vec4 activation(vec4 x) {
          `.concat(r,`
        }`),w="result = activation(result);");var b=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      `.concat(y,`

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `).concat(o,`;
        int q = d2 - d1 * `).concat(o,`;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        `).concat(f,`

        vec4 result = dotProd - vec4(0.000000000000001);
        `).concat(b,`
        `).concat(w,`
        setOutput(result);
      }
    `)}return e}();function L_e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,l=r.dimRoundingMode,c=u;c==null&&(c=[1,1]),S.util.assert(S.backend_util.eitherStridesOrDilationsAreOne(o,c),function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(o," and dilations '").concat(c,"'")});var p=S.backend_util.computeConv2DInfo(a.shape,i.shape,o,c,s,l,!0),d;S.env().getBool("WEBGL_PACK_DEPTHWISECONV")&&p.strideWidth<=2&&p.outChannels/p.inChannels===1?d=new $O(p):d=new zO(p);var f=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];return n.runWebGLProgram(d,[a,i],"float32",f)}var z_e={kernelName:S.DepthwiseConv2dNative,backendName:"webgl",kernelFunc:L_e};var $_e=function(){function e(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o=t.outChannels/t.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `.concat(o,` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `).concat(t.batchSize,`; b++) {
          for (int yR = 0; yR < `).concat(t.outHeight,`; yR++) {
            int xR = wR + yR * `).concat(n," - ").concat(a,`;

            if (xR < 0 || xR >= `).concat(t.inHeight,`) {
              continue;
            }

            for (int yC = 0; yC < `).concat(t.outWidth,`; yC++) {
              int xC = wC + yC * `).concat(r," - ").concat(i,`;

              if (xC < 0 || xC >= `).concat(t.inWidth,`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `)}return e}(),V_e=function(){function e(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=n-1-t.padInfo.top,s=r-1-t.padInfo.left,u=t.outChannels/t.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`.concat(o,", ").concat(s,`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `).concat(n,`; wR++) {
          float dyR = float(dyRCorner + wR) / `).concat(a,`.0;

          if (dyR < 0.0 || dyR >= `).concat(t.outHeight,`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `).concat(n,` - 1 - wR;

          for (int wC = 0; wC < `).concat(r,`; wC++) {
            float dyC = float(dyCCorner + wC) / `).concat(i,`.0;

            if (dyC < 0.0 || dyC >= `).concat(t.outWidth,`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `).concat(r,` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `).concat(u,`; dm++) {
              int d2 = d1 * `).concat(u,` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `)}return e}();function W_e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.dilations,u=r.pad,l=r.dimRoundingMode,c=r.filterShape,p=S.backend_util.computeConv2DInfo(a.shape,c,o,s,u,l,!0),d=new $_e(p);return n.runWebGLProgram(d,[a,i],"float32")}var U_e={kernelName:S.DepthwiseConv2dNativeBackpropFilter,backendName:"webgl",kernelFunc:W_e};function G_e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.strides,s=r.dilations,u=r.pad,l=r.dimRoundingMode,c=r.inputShape,p=S.backend_util.computeConv2DInfo(c,i.shape,o,s,u,l,!0),d=new V_e(p);return n.runWebGLProgram(d,[a,i],"float32")}var q_e={kernelName:S.DepthwiseConv2dNativeBackpropInput,backendName:"webgl",kernelFunc:G_e};var H_e=function(){function e(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}return e}();function j_e(e){var t=e.inputs,n=e.backend,r=t.x,a=$n($n([],Ae(r.shape),!1),Ae(r.shape),!1),i=S.util.sizeFromShape(r.shape),o=Le({inputs:{x:r},backend:n,attrs:{shape:[i]}}),s=new H_e(i),u=n.runWebGLProgram(s,[o],o.dtype),l=Le({inputs:{x:u},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),l}var K_e={kernelName:S.Diag,backendName:"webgl",kernelFunc:j_e};var X_e=function(){function e(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.inHeight,r=t.inWidth,a=t.padInfo,i=t.strideHeight,o=t.strideWidth,s=t.filterHeight,u=t.filterWidth,l=t.dilationHeight,c=t.dilationWidth,p=a.top,d=a.left;this.userCode=`
      const ivec2 strides = ivec2(`.concat(i,", ").concat(o,`);
      const ivec2 pads = ivec2(`).concat(p,", ").concat(d,`);
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < `).concat(s,`; h++) {
          int hIn = hBeg + h * `).concat(l,`;

          if (hIn >= 0 && hIn < `).concat(n,`) {
            for (int w = 0; w < `).concat(u,`; w++) {
              int wIn = wBeg + w * `).concat(c,`;

              if (wIn >= 0 && wIn < `).concat(r,`) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `)}return e}();function Y_e(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,l=S.backend_util.computeDilation2DInfo(a.shape,i.shape,o,s,"NHWC",u),c,p=new X_e(l);c=n.runWebGLProgram(p,[a,i],"float32");var d=Le({inputs:{x:c},backend:n,attrs:{shape:l.outShape}});return n.disposeIntermediateTensorInfo(c),d}var J_e={kernelName:S.Dilation2D,backendName:"webgl",kernelFunc:Y_e};function Z_e(e){var t,n,r,a,i=e.inputs,o=e.backend,s=e.attrs,u=s.equation,l=i,c=S.backend_util.decodeEinsumEquation(u,l.length),p=c.allDims,d=c.summedDims,f=c.idDims;S.backend_util.checkEinsumDimSizes(p.length,f,l);for(var h=S.backend_util.getEinsumComputePath(d,f),m=h.path,v=h.steps,g=v.length,y=null,w=p.length,b=[],x=0;x<g;++x){try{for(var k=(t=void 0,ha(v[x])),N=k.next();!N.done;N=k.next()){var E=N.value,C=S.backend_util.getEinsumPermutation(w,f[E]),R=C.permutationIndices,A=C.expandDims,M=void 0;S.backend_util.isIdentityPermutation(R)?M=l[E]:(M=ma({inputs:{x:l[E]},backend:o,attrs:{perm:R}}),b.push(M));for(var $=M.shape.slice(),z=0;z<A.length;++z)$.splice(A[z],0,1);S.util.arraysEqual(M.shape,$)||(M=Le({inputs:{x:M},backend:o,attrs:{shape:$}}),b.push(M)),y===null?y=M:(y=ow({inputs:{a:M,b:y},backend:o}),b.push(y))}}catch(Y){t={error:Y}}finally{try{N&&!N.done&&(n=k.return)&&n.call(k)}finally{if(t)throw t.error}}x<g-1&&(m[x]>=0&&(y=$0({inputs:{x:y},backend:o,attrs:{axis:m[x]-(p.length-w),keepDims:!1}}),b.push(y)),w--)}try{for(var L=ha(b),B=L.next();!B.done;B=L.next()){var W=B.value;W!==y&&o.disposeIntermediateTensorInfo(W)}}catch(Y){r={error:Y}}finally{try{B&&!B.done&&(a=L.return)&&a.call(L)}finally{if(r)throw r.error}}return y}var Q_e={kernelName:S.Einsum,backendName:"webgl",kernelFunc:Z_e};var eAe="return (x >= 0.0) ? x : (exp(x) - 1.0);",tAe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,nAe=Wt({opSnippet:eAe,packedOpSnippet:tAe}),rAe={kernelName:S.Elu,backendName:"webgl",kernelFunc:nAe};var aAe="return (b >= 0.0) ? a : a * (b + 1.0);",iAe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,oAe=function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y,i=S.env().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Zp(iAe,r.shape,a.shape):new dc(aAe,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)},sAe={kernelName:S.EluGrad,backendName:"webgl",kernelFunc:oAe};var uAe=`
  return vec4(equal(a, b));
`,lAe="return float(a == b);",cAe=Xr({opSnippet:lAe,packedOpSnippet:uAe,dtype:"bool",cpuKernelImpl:$Ee}),pAe={kernelName:S.Equal,backendName:"webgl",kernelFunc:cAe};var dAe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = `.concat(S.backend_util.ERF_P,`;
  float a1 = `).concat(S.backend_util.ERF_A1,`;
  float a2 = `).concat(S.backend_util.ERF_A2,`;
  float a3 = `).concat(S.backend_util.ERF_A3,`;
  float a4 = `).concat(S.backend_util.ERF_A4,`;
  float a5 = `).concat(S.backend_util.ERF_A5,`;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`),fAe=Wt({opSnippet:dAe}),hAe={kernelName:S.Erf,backendName:"webgl",kernelFunc:fAe};var mAe=Qp+`
  return exp(x);
`,vAe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,VO=Wt({opSnippet:mAe,packedOpSnippet:vAe,cpuKernelImpl:VEe,dtype:"float32"}),gAe={kernelName:S.Exp,backendName:"webgl",kernelFunc:VO};function H6(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.dim,i=t.input,o=i.shape.length,s=i.shape.slice(),u=a;return a<0&&(S.util.assert(-(o+1)<=a,function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")}),u=o+a+1),s.splice(u,0,1),Le({inputs:{x:i},backend:r,attrs:{shape:s}})}var yAe={kernelName:S.ExpandDims,backendName:"webgl",kernelFunc:H6};var hR="return exp(x) - 1.0;",bAe=Wt({opSnippet:hR,packedOpSnippet:hR,cpuKernelImpl:WEe}),wAe={kernelName:S.Expm1,backendName:"webgl",kernelFunc:bAe};var mR=function(){function e(t,n,r){this.variableNames=["real","imag"];var a=n[1];this.outputShape=n;var i=r?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),o=r?"".concat(a,".0"):"1.0",s;if(t==="real")s="return real * expR - imag * expI;";else if(t==="imag")s="return real * expI + imag * expR;";else throw new Error('FFT component must be either "real" or "imag", got '.concat(t,"."));this.userCode=`
      const float exponentMultiplier = `.concat(i,`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `).concat(s,`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`).concat(a,`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `).concat(a,`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `).concat(o,`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `)}return e}();function WO(e,t,n){var r=n.texData.get(e.dataId),a=S.util.sizeFromShape(e.shape),i=e.shape[e.shape.length-1],o=a/i,s=Le({inputs:{x:e},backend:n,attrs:{shape:[o,i]}}),u=s.shape,l=new mR("real",u,t),c=new mR("imag",u,t),p=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:u},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:u}],d=n.runWebGLProgram(l,p,"float32"),f=n.runWebGLProgram(c,p,"float32"),h=ju({inputs:{real:d,imag:f},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f);var m=Le({inputs:{x:h},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(h),m}function xAe(e){var t=e.inputs,n=e.backend,r=t.input;return WO(r,!1,n)}var SAe={kernelName:S.FFT,backendName:"webgl",kernelFunc:xAe};var kAe=function(){function e(t,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return e}();function zh(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,i=n.dtype;if(i=i||S.util.inferDtype(a),i==="string"){var o=S.util.getArrayFromDType(i,S.util.sizeFromShape(r));return o.fill(a),t.makeTensorInfo(r,i,o)}else{var s=new kAe(r,a),u=[[a]];return t.runWebGLProgram(s,[],i,u)}}var NAe={kernelName:S.Fill,backendName:"webgl",kernelFunc:zh};var TAe=function(){function e(t){this.variableNames=["Image"],this.outputShape=[];var n=t[2];this.outputShape=t,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = `.concat(n,` - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < `).concat(n,`) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `)}return e}();var EAe={kernelName:S.FlipLeftRight,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n,i=new TAe(r.shape),o=a.runWebGLProgram(i,[r],r.dtype);return o}};var vR="return floor(x);",IAe=Wt({opSnippet:vR,packedOpSnippet:vR,cpuKernelImpl:UEe}),CAe={kernelName:S.Floor,backendName:"webgl",kernelFunc:IAe};var DAe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,_Ae=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,AAe=Xr({opSnippet:DAe,packedOpSnippet:_Ae,dtype:"int32"}),FAe={kernelName:S.FloorDiv,backendName:"webgl",kernelFunc:AAe},RAe=function(){function e(t){this.variableNames=["A"];var n=va(),r=Ae(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`.concat(i,".0, ").concat(a,`.0);

        vec4 values = `).concat(n.texture2D,`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `)}return e}(),OAe=function(){function e(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=va(),r=Ae(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`.concat(i,".0, ").concat(a,`.0);
            vec4 values = `).concat(n.texture2D,`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `).concat(n.output,` = result;
      }
    `)}return e}(),MAe={kernelName:S.FromPixels,backendName:"webgl",kernelFunc:PAe},Wp,B6=S.env().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function PAe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,i=r.numChannels,o=typeof HTMLVideoElement<"u"&&a instanceof HTMLVideoElement,s=typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement,u=Ae(o?[a.videoWidth,a.videoHeight]:[a.width,a.height],2),l=u[0],c=u[1],p=[c,l],d=[c,l,i];if(s||o){var f=S.env().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(Wp==null||f!==B6)&&(B6=f,Wp=document.createElement("canvas").getContext("2d",{willReadFrequently:B6})),Wp.canvas.width=l,Wp.canvas.height=c,Wp.drawImage(a,0,0,l,c),a=Wp.canvas}var h=n.makeTensorInfo(p,"int32");n.texData.get(h.dataId).usage=bi.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),a);var m=S.env().getBool("WEBGL_PACK")?new OAe(d):new RAe(d),v=n.runWebGLProgram(m,[h],"int32");return n.disposeData(h.dataId),v}function BAe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,l=r.pad,c=r.dataFormat,p=r.dilations,d=r.dimRoundingMode,f=r.activation,h=r.leakyreluAlpha,m=S.backend_util.convertConv2DDataFormat(c),v=S.backend_util.computeConv2DInfo(a.shape,i.shape,u,p,l,d,!1,m),g,y=[],w=o!=null,b=s!=null,x=f==="leakyrelu",k=function(){var $=[a,i],z=function(B,W){if(W==="NCHW"&&B.shape.length===1&&B.shape[0]!==1){var Y=Le({inputs:{x:B},backend:n,attrs:{shape:[B.shape[0],1,1]}});return y.push(Y),Y}return B};if(w&&$.push(z(o,c)),b&&$.push(z(s,c)),x){var L=n.makeTensorInfo([],"float32",S.util.createScalarValue(h,"float32"));$.push(L),y.push(L)}return $};if(v.filterHeight===1&&v.filterWidth===1&&v.dilationHeight===1&&v.dilationWidth===1&&v.strideHeight===1&&v.strideWidth===1&&(v.padInfo.type==="SAME"||v.padInfo.type==="VALID"))g=PO({x:a,filter:i,convInfo:v,backend:n,bias:o,activation:f,preluActivationWeights:s,leakyreluAlpha:h});else if(v.strideWidth<=2&&m==="channelsLast"&&S.env().getBool("WEBGL_EXP_CONV")){var N=f?Rh(f,!0):null,E=new MO(v,w,N,b,x),C=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]],R=k();g=n.runWebGLProgram(E,R,"float32",C)}else if(S.env().getBool("WEBGL_CONV_IM2COL"))g=BO({x:a,filter:i,convInfo:v,backend:n,bias:o,activation:f,preluActivationWeights:s,leakyreluAlpha:h});else{var N=f?Rh(f,!1):null,E=new OO(v,w,N,b,x),A=k();g=n.runWebGLProgram(E,A,"float32")}var M=Le({inputs:{x:g},backend:n,attrs:{shape:v.outShape}});return y.push(g),y.forEach(function($){return n.disposeIntermediateTensorInfo($)}),M}var LAe={kernelName:S.FusedConv2D,backendName:"webgl",kernelFunc:BAe};function zAe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,l=r.pad,c=r.dilations,p=r.dimRoundingMode,d=r.activation,f=r.leakyreluAlpha,h=[],m=c;m==null&&(m=[1,1]),S.util.assert(S.backend_util.eitherStridesOrDilationsAreOne(u,m),function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(u," and dilations '").concat(m,"'")});var v=S.backend_util.computeConv2DInfo(a.shape,i.shape,u,m,l,p,!0),g=S.env().getBool("WEBGL_PACK_DEPTHWISECONV")&&v.strideWidth<=2&&v.outChannels/v.inChannels===1,y=d?Rh(d,g):null,w=[a,i],b=o!=null,x=s!=null,k=d==="leakyrelu";if(b&&w.push(o),x&&w.push(s),k){var N=n.makeTensorInfo([],"float32",S.util.createScalarValue(f,"float32"));w.push(N),h.push(N)}var E;g?E=new $O(v,b,y,x,k):E=new zO(v,b,y,x,k);var C=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]],R=n.runWebGLProgram(E,w,"float32",C);return h.forEach(function(A){return n.disposeIntermediateTensorInfo(A)}),R}var $Ae={kernelName:S.FusedDepthwiseConv2D,backendName:"webgl",kernelFunc:zAe},VAe=function(){function e(t,n,r,a){this.sliceDim=t,this.strides=n,this.paramsShape=a,this.variableNames=["x","indices"],this.outputShape=r;for(var i=tn(r.length),o=`
    int index;`,s=0;s<this.sliceDim;s++)o+=`
          index = round(getIndices(coords[0], `.concat(s,`));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= `).concat(this.paramsShape[s],`;
          flattenIndex += index * `).concat(this.strides[s],";");this.userCode=`
         void main() {
          `.concat(i,` coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          `).concat(o,`

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `)}return e}();function WAe(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,i=a.shape,o=i[i.length-1],s=S.util.sizeFromShape(r.shape),u=Ae(S.backend_util.prepareAndValidate(r,a),4),l=u[0],c=u[1],p=u[2],d=u[3],f=Le({inputs:{x:a},backend:n,attrs:{shape:[c,o]}}),h=Le({inputs:{x:r},backend:n,attrs:{shape:[S.util.sizeFromShape(r.shape)/p,p]}});if(n.shouldExecuteOnCPU([r,a])||r.dtype==="string"){var m=n.readSync(a.dataId),v=n.bufferSync(r),g=GEe(m,v,r.dtype,c,o,p,d,r.shape,s);return n.makeTensorInfo(l,r.dtype,g.values)}var y=new VAe(o,d,[c,p],r.shape),w=n.runWebGLProgram(y,[h,f],h.dtype),b=Le({inputs:{x:w},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(w),b}var UAe={kernelName:S.GatherNd,backendName:"webgl",kernelFunc:WAe};var GAe=function(){function e(t,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;var r=tn(this.rank),a=qAe(t);this.userCode=`
      void main() {
        `.concat(r,` resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < `).concat(t[2],`) ? 1.0 : 0.0;
        setOutput(inBounds * getA(`).concat(a,`));
      }
    `)}return e}();function qAe(e,t){for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],a=0;a<e.length;a++)a===2?r.push("index"):r.push("".concat(n[a]));return r.join()}function UO(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.indices,o=r.axis,s=r.batchDims,u=S.util.parseAxisParam(o,a.shape)[0];if(S.env().get("DEBUG"))for(var l=n.readSync(i.dataId),c=a.shape[u],p=function(C){var R=l[C];S.util.assert(R<=c-1&&R>=0,function(){return"GatherV2: the index value ".concat(R," is not in [0, ").concat(c-1,"]")})},d=0;d<l.length;++d)p(d);var f=S.backend_util.segment_util.collectGatherOpShapeInfo(a,i,u,s),h=S.util.sizeFromShape(i.shape),m=[],v=Le({inputs:{x:a},backend:n,attrs:{shape:[f.batchSize,f.outerSize,f.dimSize,f.sliceSize]}}),g=Le({inputs:{x:i},backend:n,attrs:{shape:[f.batchSize,h/f.batchSize]}});m.push(v),m.push(g);var y=[f.batchSize,f.outerSize,h/f.batchSize,f.sliceSize];if(n.shouldExecuteOnCPU([a,i])||a.dtype==="string"){var w=n.bufferSync(g),b=n.bufferSync(v),x=qEe(b,w,y);return m.forEach(function(C){return n.disposeIntermediateTensorInfo(C)}),n.makeTensorInfo(f.outputShape,x.dtype,x.values)}var k=new GAe(v.shape,y),N=n.runWebGLProgram(k,[v,g],v.dtype);m.push(N);var E=Le({inputs:{x:N},backend:n,attrs:{shape:f.outputShape}});return m.forEach(function(C){return n.disposeIntermediateTensorInfo(C)}),E}var HAe={kernelName:S.GatherV2,backendName:"webgl",kernelFunc:UO};var jAe="return float(a > b);",KAe=`
  return vec4(greaterThan(a, b));
`,XAe=Xr({opSnippet:jAe,packedOpSnippet:KAe,cpuKernelImpl:HEe,dtype:"bool"}),YAe={kernelName:S.Greater,backendName:"webgl",kernelFunc:XAe};var JAe="return float(a >= b);",ZAe=`
  return vec4(greaterThanEqual(a, b));
`,QAe=Xr({opSnippet:JAe,packedOpSnippet:ZAe,dtype:"bool",cpuKernelImpl:jEe}),eFe={kernelName:S.GreaterEqual,backendName:"webgl",kernelFunc:QAe};function tFe(e){var t=e.inputs,n=e.backend,r=t.input;return WO(r,!0,n)}var nFe={kernelName:S.IFFT,backendName:"webgl",kernelFunc:tFe};var rFe="return float(!isnan(x) && !isinf(x));",aFe=Wt({opSnippet:rFe,dtype:"bool"}),iFe={kernelName:S.IsFinite,backendName:"webgl",kernelFunc:aFe};var oFe="return float(isinf(x));",sFe=Wt({opSnippet:oFe,dtype:"bool"}),uFe={kernelName:S.IsInf,backendName:"webgl",kernelFunc:sFe};var lFe="return float(isnan(x));",cFe=Wt({opSnippet:lFe,dtype:"bool"}),pFe={kernelName:S.IsNan,backendName:"webgl",kernelFunc:cFe};var dFe="return float(a < b);",fFe=`
  return vec4(lessThan(a, b));
`,hFe=Xr({opSnippet:dFe,packedOpSnippet:fFe,cpuKernelImpl:KEe,dtype:"bool"}),mFe={kernelName:S.Less,backendName:"webgl",kernelFunc:hFe};var vFe="return float(a <= b);",gFe=`
  return vec4(lessThanEqual(a, b));
`,yFe=Xr({opSnippet:vFe,packedOpSnippet:gFe,cpuKernelImpl:XEe,dtype:"bool"}),bFe={kernelName:S.LessEqual,backendName:"webgl",kernelFunc:yFe};function wFe(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.num,o=YEe(r,a,i);return t.makeTensorInfo([o.length],"float32",o)}var xFe={kernelName:S.LinSpace,backendName:"webgl",kernelFunc:wFe};var SFe=Qp+`
  return x < 0.0 ? 0./0. : log(x);
`,kFe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,NFe=Wt({opSnippet:SFe,packedOpSnippet:kFe,cpuKernelImpl:JEe}),TFe={kernelName:S.Log,backendName:"webgl",kernelFunc:NFe};var EFe=Qp+`
  return log(1.0 + x);
`,IFe=Wt({opSnippet:EFe}),CFe={kernelName:S.Log1p,backendName:"webgl",kernelFunc:IFe};var DFe="return float(a >= 1.0 && b >= 1.0);",_Fe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,AFe=Xr({opSnippet:DFe,packedOpSnippet:_Fe,dtype:"bool"}),FFe={kernelName:S.LogicalAnd,backendName:"webgl",kernelFunc:AFe};var RFe="return float(!(x >= 1.0));",OFe=Wt({opSnippet:RFe}),MFe={kernelName:S.LogicalNot,backendName:"webgl",kernelFunc:OFe};var PFe="return float(a >= 1.0 || b >= 1.0);",BFe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,LFe=Xr({opSnippet:PFe,packedOpSnippet:BFe,dtype:"bool"}),zFe={kernelName:S.LogicalOr,backendName:"webgl",kernelFunc:LFe};var $Fe=function(){function e(t,n,r,a,i){this.variableNames=["x"],this.outputShape=[];var o=n,s=t[3]-1;this.outputShape=t;var u,l="float(".concat(r,") + float(").concat(a,") * sum");i===.5?u="inversesqrt(".concat(l,")"):i===1?u="1.0/(".concat(l,")"):u="exp(log(".concat(l,") * float(-").concat(i,"));"),this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`.concat(o,"; j <= ").concat(o,`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `).concat(s,`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `).concat(u,`;
        setOutput(val);
      }
    `)}return e}();var VFe=function(){function e(t,n,r,a,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o=n,s=t[3]-1;this.outputShape=t;var u,l="float(".concat(r,") + float(").concat(a,") * sum");i===.5?u="inversesqrt(".concat(l,")"):i===1?u="1.0/(".concat(l,")"):u="exp(log(".concat(l,") * float(-").concat(i,"));"),this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `.concat(this.outputShape[3],`;
        bool hasNextRow = c < `).concat(this.outputShape[2],`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `).concat(o,`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `).concat(o,"; j <= ").concat(o,`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`).concat(s,`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `).concat(u,`;
        setOutput(result);
      }
    `)}return e}();var WFe=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.depthRadius,o=r.bias,s=r.alpha,u=r.beta,l=S.env().getBool("WEBGL_PACK_NORMALIZATION")?new VFe(a.shape,i,o,s,u):new $Fe(a.shape,i,o,s,u);return n.runWebGLProgram(l,[a],a.dtype)},UFe={kernelName:S.LRN,backendName:"webgl",kernelFunc:WFe};var GFe=function(){function e(t,n,r,a,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `.concat(this.depth,`; ++d) {
          int depthBegin = int(max(0.0, float(d - `).concat(n,`)));
          int depthEnd = int(min(float(`).concat(this.depth,`),
              float(d + `).concat(n,` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `).concat(this.depth,`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`).concat(a,") * norm + float(").concat(r,`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`).concat(a,`)
                * float(`).concat(i,`)
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `).concat(i,`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `)}return e}();var qFe=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.y,o=t.dy,s=r.depthRadius,u=r.bias,l=r.alpha,c=r.beta,p=new GFe(a.shape,s,u,l,c);return n.runWebGLProgram(p,[a,i,o],a.dtype)},HFe={kernelName:S.LRNGrad,backendName:"webgl",kernelFunc:qFe};function jFe(e,t,n,r){var a=S.util.sizeFromShape(t),i=S.util.sizeFromShape(e.shape),o=i/a,s=Le({inputs:{x:e},attrs:{shape:[o,a]},backend:r}),u=vc(s,e.dtype,"max",r),l=Le({inputs:{x:u},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),l}function GO(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reductionIndices,o=r.keepDims,s=a.shape.length,u=S.util.parseAxisParam(i,a.shape),l=u,c=S.backend_util.getAxesPermutation(l,s),p=c!=null,d=n.shouldExecuteOnCPU([a]),f=a;if(p){if(d){for(var h=n.texData.get(f.dataId),m=h.values,v=new Array(s),g=0;g<v.length;g++)v[g]=a.shape[c[g]];var y=rw(m,a.shape,a.dtype,c,v);f=n.makeTensorInfo(v,a.dtype);var w=n.texData.get(f.dataId);w.values=y}else f=z0(a,c,n);l=S.backend_util.getInnerMostAxes(l.length,s)}S.backend_util.assertAxesAreInnerMostDims("max",l,s);var b=Ae(S.backend_util.computeOutAndReduceShapes(f.shape,l),2),x=b[0],k=b[1],N=x;o&&(N=S.backend_util.expandShapeToKeepDim(x,u));var E;if(d){var h=n.texData.get(f.dataId),m=h.values,C=ZEe(m,S.util.sizeFromShape(k),N,a.dtype);E=n.makeTensorInfo(N,a.dtype);var R=n.texData.get(E.dataId);R.values=C}else E=jFe(f,k,N,n);return p&&n.disposeIntermediateTensorInfo(f),E}var KFe={kernelName:S.Max,backendName:"webgl",kernelFunc:GO};var XFe=iw+`
  return max(a, b);
`,YFe=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+mc+`
  return result;
`,JFe=Xr({opSnippet:XFe,packedOpSnippet:YFe,cpuKernelImpl:QEe}),ZFe={kernelName:S.Maximum,backendName:"webgl",kernelFunc:JFe};function QFe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;jp(a,"maxPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,l=1;S.util.assert(S.backend_util.eitherStridesOrDilationsAreOne(o,l),function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(l,"'")});var c=S.backend_util.computePool2DInfo(a.shape,i,o,l,s,u);if(c.filterWidth===1&&c.filterHeight===1&&S.util.arraysEqual(c.inShape,c.outShape))return ri({inputs:{x:a},backend:n});var p=new Oh(c,"max",!1);return n.runWebGLProgram(p,[a],a.dtype)}var eRe={kernelName:S.MaxPool,backendName:"webgl",kernelFunc:QFe};function tRe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dataFormat,l=r.dimRoundingMode,c=[1,1,1],p=S.backend_util.computePool3DInfo(a.shape,i,o,c,s,l,u),d=new sw(p,"max",!1);return n.runWebGLProgram(d,[a],a.dtype)}var nRe={kernelName:S.MaxPool3D,backendName:"webgl",kernelFunc:tRe};var rRe=function(){function e(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideHeight,r=t.strideWidth,a=t.dilationHeight,i=t.effectiveFilterHeight,o=t.effectiveFilterWidth,s=i-1-t.padInfo.top,u=o-1-t.padInfo.left,l=i*o-1;this.userCode=`
      const ivec2 pads = ivec2(`.concat(s,", ").concat(u,`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `).concat(i,`;
          wR += `).concat(a,`) {
          float dyR = float(dyRCorner + wR) / `).concat(n,`.0;

          if (dyR < 0.0 || dyR >= `).concat(t.outHeight,`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `).concat(o,`; wC++) {
            float dyC = float(dyCCorner + wC) / `).concat(r,`.0;

            if (dyC < 0.0 || dyC >= `).concat(t.outWidth,`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `).concat(l,` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `).concat(o,` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `)}return e}(),aRe=function(){function e(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.dilationDepth,o=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterDepth,l=t.effectiveFilterHeight,c=t.effectiveFilterWidth,p=u-1-t.padInfo.front,d=l-1-t.padInfo.top,f=c-1-t.padInfo.left,h=u*l*c-1;this.userCode=`
      const ivec3 pads = ivec3(`.concat(p,", ").concat(d,", ").concat(f,`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `).concat(u,`;
           wD += `).concat(i,`) {
          float dyD = float(dyDCorner + wD) / `).concat(n,`.0;

          if (dyD < 0.0 || dyD >= `).concat(t.outDepth,`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `).concat(l,`;
              wR += `).concat(o,`) {
            float dyR = float(dyRCorner + wR) / `).concat(r,`.0;

            if (dyR < 0.0 || dyR >= `).concat(t.outHeight,`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `).concat(c,`;
                wC += `).concat(s,`) {
              float dyC = float(dyCCorner + wC) / `).concat(a,`.0;

              if (dyC < 0.0 || dyC >= `).concat(t.outWidth,`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `).concat(h,` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `).concat(l," * ").concat(c,` +
                  wR * `).concat(c,` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `)}return e}();function iRe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i,s=r.filterSize,u=r.strides,l=r.pad,c=r.dimRoundingMode,p=[1,1,1],d=S.backend_util.computePool3DInfo(o.shape,s,u,p,l,c),f=new sw(d,"max",!0),h=n.runWebGLProgram(f,[o],o.dtype),m=new aRe(d),v=n.runWebGLProgram(m,[a,h],o.dtype);return n.disposeIntermediateTensorInfo(h),v}var oRe={kernelName:S.MaxPool3DGrad,backendName:"webgl",kernelFunc:iRe};function sRe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=t.output,s=i;jp([i,o],"maxPoolGrad");var u=r.filterSize,l=r.strides,c=r.pad,p=r.dimRoundingMode,d=S.backend_util.computePool2DInfo(s.shape,u,l,1,c,p),f=!0,h=new Oh(d,"max",f),m=n.runWebGLProgram(h,[s],s.dtype),v=new rRe(d),g=n.runWebGLProgram(v,[a,m],s.dtype);return n.disposeIntermediateTensorInfo(m),g}var uRe={kernelName:S.MaxPoolGrad,backendName:"webgl",kernelFunc:sRe};function lRe(e,t,n,r){var a=new Oh(n,"max",!1),i=r.runWebGLProgram(a,[e],"float32");a=new Oh(n,"max",!0,!0,t);var o=r.runWebGLProgram(a,[e],"float32");return[i,o]}var cRe={kernelName:S.MaxPoolWithArgmax,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.filterSize,o=n.strides,s=n.pad,u=n.includeBatchInIndex,l=r;S.util.assert(a.shape.length===4,function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(a.shape.length,".")});var c=[1,1];S.util.assert(S.backend_util.eitherStridesOrDilationsAreOne(o,c),function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(c,"'")});var p=S.backend_util.computePool2DInfo(a.shape,i,o,c,s),d=Ae(lRe(a,u,p,l),2),f=d[0],h=d[1];return[f,h]}};function pRe(e,t,n,r){var a=S.util.sizeFromShape(t),i=S.util.sizeFromShape(e.shape),o=i/a,s=Le({inputs:{x:e},attrs:{shape:[o,a]},backend:r}),u=vc(s,"float32","mean",r),l=Le({inputs:{x:u},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),l}var dRe={kernelName:S.Mean,backendName:"webgl",kernelFunc:function(e){var t,n,r=e.inputs,a=e.attrs,i=e.backend,o=r.x,s=a.keepDims,u=a.axis,l=i,c=o.shape.length,p=S.util.parseAxisParam(u,o.shape),d=p,f=S.backend_util.getAxesPermutation(d,c),h=f!=null,m=l.shouldExecuteOnCPU([o]),v=[],g=o;if(h){if(m){for(var y=l.texData.get(g.dataId),w=y.values,b=new Array(c),x=0;x<b.length;x++)b[x]=o.shape[f[x]];var k=rw(w,o.shape,o.dtype,f,b);g=l.makeTensorInfo(b,o.dtype);var N=l.texData.get(g.dataId);N.values=k}else g=z0(o,f,l);v.push(g),d=S.backend_util.getInnerMostAxes(d.length,c)}S.backend_util.assertAxesAreInnerMostDims("sum",d,c);var E=Ae(S.backend_util.computeOutAndReduceShapes(g.shape,d),2),C=E[0],R=E[1],A=C;s&&(A=S.backend_util.expandShapeToKeepDim(C,p));var M=pRe(g,R,A,l);try{for(var $=ha(v),z=$.next();!z.done;z=$.next()){var x=z.value;l.disposeIntermediateTensorInfo(x)}}catch(L){t={error:L}}finally{try{z&&!z.done&&(n=$.return)&&n.call($)}finally{if(t)throw t.error}}return M}};function fRe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,u=S.util.parseAxisParam(i,a.shape),l=u,c=S.backend_util.getAxesPermutation(l,s),p=a;c!=null&&(p=ma({inputs:{x:a},backend:n,attrs:{perm:c}}),l=S.backend_util.getInnerMostAxes(l.length,a.shape.length)),S.backend_util.assertAxesAreInnerMostDims("min",l,s);var d=Ae(S.backend_util.computeOutAndReduceShapes(p.shape,l),2),f=d[0],h=d[1],m=S.util.sizeFromShape(h),v=Le({inputs:{x:p},backend:n,attrs:{shape:[-1,m]}}),g=vc(v,v.dtype,"min",n),y;if(o){var w=S.backend_util.expandShapeToKeepDim(f,u);y=Le({inputs:{x:g},backend:n,attrs:{shape:w}})}else y=Le({inputs:{x:g},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(p),y}var hRe={kernelName:S.Min,backendName:"webgl",kernelFunc:fRe};var mRe=iw+`
  return min(a, b);
`,vRe=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+mc+`
  return result;
`,gRe=Xr({opSnippet:mRe,packedOpSnippet:vRe,cpuKernelImpl:eIe}),yRe={kernelName:S.Minimum,backendName:"webgl",kernelFunc:gRe};var bRe=function(){function e(t,n,r){this.variableNames=["x"],this.outputShape=n.map(function(c,p){return c[0]+t[p]+c[1]});var a=t.length,i=tn(a),o=n.map(function(c){return c[0]}).join(","),s=n.map(function(c,p){return c[0]+t[p]}).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),l=r==="reflect"?0:1;if(a===1){this.userCode=`
        int start = `.concat(o,`;
        int end = `).concat(s,`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - `).concat(l,`;
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + `).concat(l,`;
          }
          setOutput(getX(outC - start));
        }
      `);return}this.userCode=`
      `.concat(i," start = ").concat(i,"(").concat(o,`);
      `).concat(i," end = ").concat(i,"(").concat(s,`);

      void main() {
        `).concat(i,` outC = getOutputCoords();
        for (int i = 0; i < `).concat(a,`; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - `).concat(l,`;
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + `).concat(l,`;
          }
        }
        `).concat(i,` coords = outC - start;
        setOutput(getX(`).concat(u,`));
      }
    `)}return e}();var wRe=function(){function e(t,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map(function(m,v){return m[0]+t[v]+m[1]});var a=t.length,i=tn(a),o=n.map(function(m){return m[0]}).join(","),s=n.map(function(m,v){return m[0]+t[v]}).join(","),u=fa("rc",a),l=fa("source",a),c="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),p=a===1?"source":"vec2(".concat(l.slice(-2).join(),")"),d=r==="reflect"?0:1,f="";if(a===1){var h=`
        `.concat(i,` source = rc;
        if (source < start) {
          source = start * 2 - source - `).concat(d,`;
        } else if (source >= end) {
          source = (end - 1) * 2 - source + `).concat(d,`;
        }
        source -= start;
      `);f=`
        `.concat(i,` rc = outputLoc;
        `).concat(h,`
        result[0] = getChannel(getX(`).concat(l.join(),"), ").concat(p,`);
        `).concat(u[a-1],` += 1;
        if(`).concat(c,`) {
          `).concat(h,`
          result[1] = getChannel(getX(`).concat(l.join(),"), ").concat(p,`);
        }
      `)}else{var h=`
        `.concat(i,` source = rc;
        `).concat(i," lt = ").concat(i,`(lessThan(source, start));
        `).concat(i," gte = ").concat(i,`(greaterThanEqual(source, end));
        `).concat(i,` orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - `).concat(d,`) +
                gte * ((end - 1) * 2 - source + `).concat(d,`);
        source -= start;
      `);f=`
        `.concat(i,` rc = outputLoc;
        `).concat(h,`
        result[0] = getChannel(getX(`).concat(l.join(),"), ").concat(p,`);
        `).concat(u[a-1],` += 1;
        if(`).concat(c,`) {
          `).concat(h,`
          result[1] = getChannel(getX(`).concat(l.join(),"), ").concat(p,`);
        }
        rc = outputLoc;
        `).concat(u[a-2],` += 1;
        if(`).concat(u[a-2]," < ").concat(this.outputShape[a-2],`) {
          `).concat(h,`
          result[2] = getChannel(getX(`).concat(l.join(),"), ").concat(p,`);
          `).concat(u[a-1],` += 1;
          if(`).concat(c,`) {
            `).concat(h,`
            result[3] = getChannel(getX(`).concat(l.join(),"), ").concat(p,`);
          }
        }
      `)}this.userCode=`
      const `.concat(i," start = ").concat(i,"(").concat(o,`);
      const `).concat(i," end = ").concat(i,"(").concat(s,`);

      void main() {
        `).concat(i,` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `).concat(f,`
        setOutput(result);
      }
    `)}return e}();var xRe=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.mode,s=S.env().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new wRe(a.shape,i,o):new bRe(a.shape,i,o),u=n.runWebGLProgram(s,[a],a.dtype);return u},SRe={kernelName:S.MirrorPad,backendName:"webgl",kernelFunc:xRe};var kRe=`if (b == 0.0) return NAN;
  return mod(a, b);`,NRe=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+mc+`
  return result;
`,TRe=Xr({opSnippet:kRe,packedOpSnippet:NRe}),ERe={kernelName:S.Mod,backendName:"webgl",kernelFunc:TRe};var IRe=function(){function e(t,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `.concat(n-1,`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`).concat(n-1,`));
      }
    `)}return e}();var CRe=`
if (a == b) {
  return 1.0;
};
return a / b;`,DRe=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,qO=Xr({opSnippet:CRe,packedOpSnippet:DRe,checkOutOfBounds:!0}),_Re={kernelName:S.RealDiv,backendName:"webgl",kernelFunc:qO};var gR="return a - b;",HO=Xr({opSnippet:gR,packedOpSnippet:gR,supportsComplex:!0,cpuKernelImpl:xIe}),ARe={kernelName:S.Sub,backendName:"webgl",kernelFunc:HO};function jO(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.dim,o=S.util.parseAxisParam([i],a.shape),s=GO({inputs:{x:a},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),u=S.backend_util.expandShapeToKeepDim(s.shape,o),l=Le({inputs:{x:s},backend:n,attrs:{shape:u}}),c=HO({inputs:{a,b:l},backend:n}),p=VO({inputs:{x:c},backend:n}),d=$0({inputs:{x:p},backend:n,attrs:{axis:o,keepDims:!1}}),f=Le({inputs:{x:d},backend:n,attrs:{shape:u}}),h=qO({inputs:{a:p,b:f},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),h}var FRe={kernelName:S.Softmax,backendName:"webgl",kernelFunc:jO};function RRe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.numSamples,o=r.seed,s=r.normalized,u=s?a:jO({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),l=u.shape[0],c=u.shape[1],p=new IRe(l,c,i),d=[[o]],f=n.runWebGLProgram(p,[u],"int32",d);return s||n.disposeIntermediateTensorInfo(u),f}var ORe={kernelName:S.Multinomial,backendName:"webgl",kernelFunc:RRe},MRe=oo+`
  return -x;
`,PRe=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function BRe(e){var t=e.inputs,n=e.backend,r=t.x;if(n.shouldExecuteOnCPU([r])){var a=n.texData.get(r.dataId),i=Ae(nIe(a.values,r.shape,r.dtype),2),o=i[0],s=i[1];return n.makeTensorInfo(s,r.dtype,o)}var u;return S.env().getBool("WEBGL_PACK_UNARY_OPERATIONS")?u=new Hu(r.shape,PRe):u=new ps(r.shape,MRe),n.runWebGLProgram(u,[r],r.dtype)}var LRe={kernelName:S.Neg,backendName:"webgl",kernelFunc:BRe};var zRe=S.kernel_impls.nonMaxSuppressionV3Impl;function $Re(e){S.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=n.readSync(a.dataId),c=n.readSync(i.dataId),p=zRe(l,c,o,s,u).selectedIndices;return n.makeTensorInfo([p.length],"int32",new Int32Array(p))}var VRe={kernelName:S.NonMaxSuppressionV3,backendName:"webgl",kernelFunc:$Re};var WRe=S.kernel_impls.nonMaxSuppressionV4Impl;function URe(e){S.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=r.padToMaxOutputSize,c=n.readSync(a.dataId),p=n.readSync(i.dataId),d=WRe(c,p,o,s,u,l),f=d.selectedIndices,h=d.validOutputs;return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}var GRe={kernelName:S.NonMaxSuppressionV4,backendName:"webgl",kernelFunc:URe};var qRe=S.kernel_impls.nonMaxSuppressionV5Impl;function HRe(e){S.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=r.softNmsSigma,c=n.readSync(a.dataId),p=n.readSync(i.dataId),d=o,f=s,h=u,m=l,v=qRe(c,p,d,f,h,m),g=v.selectedIndices,y=v.selectedScores;return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}var jRe={kernelName:S.NonMaxSuppressionV5,backendName:"webgl",kernelFunc:HRe};var KRe=function(){function e(t,n,r,a){this.variableNames=["indices"],this.outputShape=[t,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`.concat(a,"), float(").concat(r,`),
                      float(index == coords.y)));
      }
    `)}return e}(),XRe=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.dtype,o=r.depth,s=r.onValue,u=r.offValue,l=S.util.sizeFromShape(a.shape),c=new KRe(l,o,s,u),p=Le({inputs:{x:a},backend:n,attrs:{shape:[l]}}),d=n.runWebGLProgram(c,[p],i);n.disposeIntermediateTensorInfo(p);var f=$n($n([],Ae(a.shape),!1),[o],!1),h=Le({inputs:{x:d},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(d),h},YRe={kernelName:S.OneHot,backendName:"webgl",kernelFunc:XRe};function B0(e){var t=e.inputs,n=e.backend,r=t.x;if(r.dtype==="complex64"){var a=Lh({inputs:{input:r},backend:n}),i=B0({inputs:{x:a},backend:n}),o=V0({inputs:{input:r},backend:n}),s=B0({inputs:{x:o},backend:n}),u=ju({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}else return zh({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}var JRe={kernelName:S.ZerosLike,backendName:"webgl",kernelFunc:B0};function KO(e){var t=e.inputs,n=e.backend,r=t.x;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){var a=Lh({inputs:{input:r},backend:n}),i=KO({inputs:{x:a},backend:n}),o=V0({inputs:{input:r},backend:n}),s=B0({inputs:{x:o},backend:n}),u=ju({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}else return zh({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}var ZRe={kernelName:S.OnesLike,backendName:"webgl",kernelFunc:KO};function QRe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.axis;if(t.length===1)return H6({inputs:{input:t[0]},backend:n,attrs:{dim:a}});var i=t[0].shape,o=t[0].dtype;t.forEach(function(c){S.util.assertShapesMatch(i,c.shape,"All tensors passed to stack must have matching shapes"),S.util.assert(o===c.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var s=[],u=t.map(function(c){var p=H6({inputs:{input:c},backend:n,attrs:{dim:a}});return s.push(p),p}),l=RO({inputs:u,backend:n,attrs:{axis:a}});return s.forEach(function(c){return n.disposeIntermediateTensorInfo(c)}),l}var eOe={kernelName:S.Pack,backendName:"webgl",kernelFunc:QRe};var tOe=function(){function e(t,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map(function(l,c){return l[0]+t[c]+l[1]});var a=t.length,i=tn(a),o=n.map(function(l){return l[0]}).join(","),s=n.map(function(l,c){return l[0]+t[c]}).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);if(a===1){this.userCode=`
        int start = `.concat(o,`;
        int end = `).concat(s,`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `);return}this.userCode=`
      `.concat(i," start = ").concat(i,"(").concat(o,`);
      `).concat(i," end = ").concat(i,"(").concat(s,`);

      void main() {
        `).concat(i,` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          `).concat(i,` coords = outC - start;
          setOutput(getX(`).concat(u,`));
        }
      }
    `)}return e}();var nOe=function(){function e(t,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map(function(g,y){return g[0]+t[y]+g[1]});for(var a=t.length,i=tn(a),o=n.map(function(g){return g[0]}).join(","),s=n.map(function(g,y){return g[0]+t[y]}).join(","),u=fa("rc",a),l=fa("source",a),c="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),p=a===1?"source":"vec2(".concat(l.slice(-2).join(),")"),d=["".concat(i," rc = outputLoc;"),"".concat(u[a-1],` += 1;
       if(`).concat(c,`) {
      `),a===1?"":`}
       rc = outputLoc;
       `.concat(u[a-2],` += 1;
       if(`).concat(u[a-2]," < ").concat(this.outputShape[a-2],") {"),a===1?"":"  ".concat(u[a-1],` += 1;
         if(`).concat(c,") {")],f=a===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",h="",m=0,v=a===1?2:4;m<v;m++)h+=`
        `.concat(d[m],`
        if (`).concat(f,`) {
          result[`).concat(m,`] = float(value);
        } else {
          `).concat(i,` source = rc - start;
          result[`).concat(m,"] = getChannel(getX(").concat(l.join(),"), ").concat(p,`);
        }
      `);h+=a===1?"} ":"}}",this.userCode=`
      const `.concat(i," start = ").concat(i,"(").concat(o,`);
      const `).concat(i," end = ").concat(i,"(").concat(s,`);

      void main() {
        `).concat(i,` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `).concat(h,`
        setOutput(result);
      }
    `)}return e}();var XO=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.constantValue;if(S.util.sizeFromShape(a.shape)===0){var s=i.map(function(c,p){return c[0]+a.shape[p]+c[1]});return zh({backend:n,attrs:{shape:s,value:o,dtype:a.dtype}})}var u=S.env().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new nOe(a.shape,i,o):new tOe(a.shape,i,o),l=[[o]];return n.runWebGLProgram(u,[a],a.dtype,l)},rOe={kernelName:S.PadV2,backendName:"webgl",kernelFunc:XO};var aOe=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,iOe=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+mc+`
  return result;
`,oOe=Xr({opSnippet:aOe,packedOpSnippet:iOe}),sOe={kernelName:S.Pow,backendName:"webgl",kernelFunc:oOe};function uOe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,u=[],l=S.util.parseAxisParam(i,a.shape),c=l,p=S.backend_util.getAxesPermutation(c,s),d=a;p!=null&&(d=ma({inputs:{x:a},backend:n,attrs:{perm:p}}),c=S.backend_util.getInnerMostAxes(c.length,s),u.push(d)),S.backend_util.assertAxesAreInnerMostDims("prod",c,s);var f;if(n.shouldExecuteOnCPU([d])){var h=n.texData.get(d.dataId).values,m=aIe(d.shape,d.dtype,h,c),v=m.outVals,g=m.outShape,y=m.outDtype;f=n.makeTensorInfo(g,y,v)}else{var w=Ae(S.backend_util.computeOutAndReduceShapes(d.shape,c),2),g=w[0],b=w[1],x=S.util.sizeFromShape(b),k=Le({inputs:{x:d},backend:n,attrs:{shape:[-1,x]}}),N=S.sumOutType(a.dtype),E=vc(k,N,"prod",n);f=Le({inputs:{x:E},backend:n,attrs:{shape:g}}),u.push(k),u.push(E)}if(o){u.push(f);var C=S.backend_util.expandShapeToKeepDim(f.shape,l);f=Le({inputs:{x:f},backend:n,attrs:{shape:C}})}return u.forEach(function(R){return n.disposeIntermediateTensorInfo(R)}),f}var lOe={kernelName:S.Prod,backendName:"webgl",kernelFunc:uOe};function cOe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.paramsNestedSplits,i=t.paramsDenseValues,o=t.indices;r.outputRaggedRank;var s=a.map(function(g){return n.readSync(g.dataId)}),u=a.map(function(g){return g.shape}),l=n.readSync(i.dataId),c=n.readSync(o.dataId),p=Ae(iIe(s,u,l,i.shape,i.dtype,c,o.shape),3),d=p[0],f=p[1],h=p[2],m=d.map(function(g){return n.makeTensorInfo([g.length],"int32",g)}),v=n.makeTensorInfo(h,i.dtype,f);return m.concat([v])}var pOe={kernelName:S.RaggedGather,backendName:"webgl",kernelFunc:cOe};function dOe(e){var t=e.inputs,n=e.backend,r=t.starts,a=t.limits,i=t.deltas,o=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(i.dataId),l=Ae(oIe(o,r.shape,r.dtype,s,a.shape,u,i.shape),2),c=l[0],p=l[1],d=n.makeTensorInfo([c.length],"int32",c),f=n.makeTensorInfo([p.length],r.dtype,p);return[d,f]}var fOe={kernelName:S.RaggedRange,backendName:"webgl",kernelFunc:dOe};function hOe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.shape,i=t.values,o=t.defaultValue,s=t.rowPartitionTensors,u=r.rowPartitionTypes,l=n.readSync(a.dataId),c=n.readSync(i.dataId),p=n.readSync(o.dataId),d=s.map(function(g){return n.readSync(g.dataId)}),f=s.map(function(g){return g.shape}),h=Ae(sIe(l,a.shape,c,i.shape,i.dtype,p,o.shape,d,f,u),2),m=h[0],v=h[1];return n.makeTensorInfo(m,i.dtype,v)}var mOe={kernelName:S.RaggedTensorToTensor,backendName:"webgl",kernelFunc:hOe};var YO=function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.step,o=n.dtype,s=uIe(r,a,i,o);return t.makeTensorInfo([s.length],o,s)},vOe={kernelName:S.Range,backendName:"webgl",kernelFunc:YO};var gOe="return 1.0 / x;",yOe=Wt({opSnippet:gOe}),bOe={kernelName:S.Reciprocal,backendName:"webgl",kernelFunc:yOe};var wOe=oo+`
  return (x < 0.0) ? 0.0 : x;
`,xOe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,SOe=Wt({opSnippet:wOe,packedOpSnippet:xOe}),kOe={kernelName:S.Relu,backendName:"webgl",kernelFunc:SOe};var NOe=oo+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,TOe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,EOe=Wt({opSnippet:NOe,packedOpSnippet:TOe}),IOe={kernelName:S.Relu6,backendName:"webgl",kernelFunc:EOe};var COe=function(){function e(t,n,r,a,i){this.variableNames=["A"],this.outputShape=[];var o=Ae(t,4),s=o[0],u=o[1],l=o[2],c=o[3];this.outputShape=[s,n,r,c];var p=[a&&n>1?u-1:u,a&&r>1?l-1:l],d=[a&&n>1?n-1:n,a&&r>1?r-1:r],f;i?f="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `.concat(p[0]/d[0],`,
          `).concat(p[1]/d[1],`);
      const vec2 inputShapeRC = vec2(`).concat(u,".0, ").concat(l,`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = `).concat(f,`;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `)}return e}();var DOe=function(){function e(t,n,r,a,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=Ae(t,4),s=o[0],u=o[1],l=o[2],c=o[3];this.outputShape=[s,n,r,c];var p=[a&&n>1?u-1:u,a&&r>1?l-1:l],d=[a&&n>1?n-1:n,a&&r>1?r-1:r],f;i?f="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `.concat(p[0]/d[0],`,
          `).concat(p[1]/d[1],`,
          `).concat(p[1]/d[1],`);
      const vec3 inputShapeRC = vec3(`).concat(u,".0, ").concat(l,`.0,
                                     `).concat(l,`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = `).concat(f,`;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `).concat(c-1,`;
        bool hasNextRow = coords.z < `).concat(r-1,`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `)}return e}();function _Oe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size,u=Ae(s,2),l=u[0],c=u[1],p=S.env().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new DOe(a.shape,l,c,i,o):new COe(a.shape,l,c,i,o);return n.runWebGLProgram(p,[a],"float32")}var AOe={kernelName:S.ResizeBilinear,backendName:"webgl",kernelFunc:_Oe};var FOe=function(){function e(t,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=Ae(n,3),i=a[1],o=a[2],s=Ae(t,3),u=s[1],l=s[2],c=[r&&u>1?i-1:i,r&&l>1?o-1:o],p=[r&&u>1?u-1:u,r&&l>1?l-1:l],d=c[0]/p[0],f=c[1]/p[1],h=1/d,m=1/f,v=Math.ceil(h)*2+2,g=Math.ceil(m)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`.concat(d,`);
        const float widthScale = float(`).concat(f,`);

        const float invHeightScale = float(`).concat(h,`);
        const float invWidthScale = float(`).concat(m,`);

        const int winHeight = int(`).concat(v,`);
        const int winWidth = int(`).concat(g,`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `).concat(u,`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `).concat(l,`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `).concat(i-1,`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `).concat(o-1,`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `)}return e}();function ROe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,s=new FOe(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}var OOe={kernelName:S.ResizeBilinearGrad,backendName:"webgl",kernelFunc:ROe};var MOe=function(){function e(t,n,r,a,i){this.variableNames=["A"],this.outputShape=[];var o=Ae(t,4),s=o[0],u=o[1],l=o[2],c=o[3];this.outputShape=[s,n,r,c];var p=[a&&n>1?u-1:u,a&&r>1?l-1:l],d=[a&&n>1?n-1:n,a&&r>1?r-1:r],f=a?"0.5":"0.0",h;i?h="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `.concat(p[0]/d[0],`,
          `).concat(p[1]/d[1],`);
      const vec2 inputShapeRC = vec2(`).concat(u,".0, ").concat(l,`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = `).concat(h,`;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `).concat(f,`)));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `)}return e}();var POe=function(){function e(t,n,r,a,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=Ae(t,4),s=o[0],u=o[1],l=o[2],c=o[3];this.outputShape=[s,n,r,c];var p=[a&&n>1?u-1:u,a&&r>1?l-1:l],d=[a&&n>1?n-1:n,a&&r>1?r-1:r],f=a?"0.5":"0.0",h;i?h="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `.concat(p[0]/d[0],`,
          `).concat(p[1]/d[1],`,
          `).concat(p[1]/d[1],`);
      const vec3 inputShapeRC = vec3(`).concat(u,".0, ").concat(l,`.0,
                                     `).concat(l,`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = `).concat(h,`;

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `).concat(f,`)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `).concat(c-1,`;
        bool hasNextRow = coords.z < `).concat(r-1,`;

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `)}return e}();function BOe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size,u=Ae(s,2),l=u[0],c=u[1],p=S.env().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new POe(a.shape,l,c,i,o):new MOe(a.shape,l,c,i,o);return n.runWebGLProgram(p,[a],a.dtype)}var LOe={kernelName:S.ResizeNearestNeighbor,backendName:"webgl",kernelFunc:BOe};var zOe=function(){function e(t,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=Ae(n,3),i=a[1],o=a[2],s=Ae(t,3),u=s[1],l=s[2],c=[r&&u>1?i-1:i,r&&l>1?o-1:o],p=[r&&u>1?u-1:u,r&&l>1?l-1:l],d=c[0]/p[0],f=c[1]/p[1],h=1/d,m=1/f,v=Math.ceil(h)*2+2,g=Math.ceil(m)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`.concat(d,`);
        const float widthScale = float(`).concat(f,`);

        const float invHeightScale = float(`).concat(h,`);
        const float invWidthScale = float(`).concat(m,`);

        const int winHeight = int(`).concat(v,`);
        const int winWidth = int(`).concat(g,`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `).concat(u,`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `).concat(l,`) {
              continue;
            }

            float sourceFracRow =
              float(`).concat(c[0],`) *
                (float(dyR) / float(`).concat(p[0],`));

            float sourceFracCol =
                float(`).concat(c[1],`) *
                  (float(dyC) / float(`).concat(p[1],`));

            int sourceNearestRow = int(min(
                float(int(`).concat(i,`) - 1),
                `).concat(r,` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`).concat(o,`) - 1),
                `).concat(r,` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `)}return e}();function $Oe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,s=new zOe(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}var VOe={kernelName:S.ResizeNearestNeighborGrad,backendName:"webgl",kernelFunc:$Oe};var WOe=function(){function e(t,n){this.variableNames=["x"];var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));if(this.outputShape=t,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`.concat(t[0],` - coord - 1));
        }
      `);return}var a=function(s){return n.indexOf(s)!==-1&&t[s]!==1?"".concat(t[s]," - coords[").concat(s,"] - 1"):"coords[".concat(s,"]")},i=t.map(function(s,u){return a(u)}).join(","),o=tn(r);this.userCode=`
      void main() {
        `.concat(o,` coords = getOutputCoords();
        setOutput(getX(`).concat(i,`));
      }
    `)}return e}();var UOe=function(){function e(t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));this.outputShape=t;var a=fa("rc",r),i="".concat(a[r-1]," + 1 < ").concat(this.outputShape[r-1]),o="".concat(a[r-2]," + 1 < ").concat(this.outputShape[r-2]),s=tn(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`.concat(t[0],` - rc - 1),
            `).concat(t[0],` - rc - 1);
          if(`).concat(i,`){
              result.g = getChannel(getX(`).concat(t[0],` - (rc  + 1) - 1),
                `).concat(t[0],` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `):this.userCode=`
        void main() {
          `.concat(s,` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `).concat(u(a.slice()),`;
          if(`).concat(i,`){
            result.g = `).concat(l(a.slice()),`;
          }
          if(`).concat(o,`) {
            result.b = `).concat(c(a.slice()),`;
            if(`).concat(i,`) {
              result.a = `).concat(p(a.slice()),`;
            }
          }
          setOutput(result);
        }
    `);function u(h){return d(h)}function l(h){return h[r-1]="("+h[r-1]+" + 1)",d(h)}function c(h){return h[r-2]="("+h[r-2]+" + 1)",d(h)}function p(h){return h[r-1]="("+h[r-1]+" + 1)",h[r-2]="("+h[r-2]+" + 1)",d(h)}function d(h){var m=t.map(function(y,w){return f(w,h)}),v=m.join(","),g=m.slice(-2).join(",");return"getChannel(getX(".concat(v,"), vec2(").concat(g,"))")}function f(h,m){return n.indexOf(h)!==-1&&t[h]!==1?"".concat(t[h]," - ").concat(m[h]," - 1"):"".concat(m[h])}}return e}();function GOe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dims,o=a.shape.length,s=S.util.parseAxisParam(i,a.shape);if(o===0)return ri({inputs:{x:a},backend:n});var u=S.env().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new UOe(a.shape,s):new WOe(a.shape,s);return n.runWebGLProgram(u,[a],a.dtype)}var qOe={kernelName:S.Reverse,backendName:"webgl",kernelFunc:GOe};var HOe=function(){function e(t,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];var r=t[1],a=t[2];this.outputShape=t;var i="";typeof n=="number"?i="float outputValue = ".concat(n.toFixed(2),";"):i=`
        vec3 fill = vec3(`.concat(n.join(","),`);
        float outputValue = fill[coords[3]];`),this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          `.concat(i,`
          if(coordX >= 0 && coordX < `).concat(a," && coordY >= 0 && coordY < ").concat(r,`) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `)}return e}(),jOe={kernelName:S.RotateWithOffset,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=n.radians,o=n.fillValue,s=n.center,u=r,l=new HOe(a.shape,o),c=Ae(S.backend_util.getImageCenter(s,a.shape[1],a.shape[2]),2),p=c[0],d=c[1],f=[[p,d,Math.sin(i),Math.cos(i)]],h=u.runWebGLProgram(l,[a],a.dtype,f);return h}};var KOe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,XOe=Wt({opSnippet:KOe}),YOe={kernelName:S.Round,backendName:"webgl",kernelFunc:XOe};var JOe="return inversesqrt(x);",ZOe=Wt({opSnippet:JOe,cpuKernelImpl:lIe}),QOe={kernelName:S.Rsqrt,backendName:"webgl",kernelFunc:ZOe};var uw=function(){function e(t,n,r,a,i,o,s,u){u===void 0&&(u=!1),this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var l=tn(i.length),c=tn(o.length),p="";r===1?p="i":r===2&&(p="i, j");var d="getIndices(".concat(p,")"),f="";a===1?f="i":a===2&&(f="i, coords[1]");var h="getUpdates(".concat(f,")"),m="";u&&(m="coords[0], coords[1]");var v="getDefaultValue(".concat(m,")"),g=n>1?"strides[j]":"strides";this.userCode=`
        `.concat(l," strides = ").concat(l,"(").concat(i,`);

        void main() {
          `).concat(c,` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `).concat(t,`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `).concat(n,`; j++) {
              int index = round(`).concat(d,`);
              flattenedIndex += index * `).concat(g,`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `).concat(h,`;
              found = true;
            }
          }
          setOutput(mix(`).concat(v,`, sum, float(found)));
        }
      `)}return e}();var eMe=function(){function e(t,n,r,a,i,o,s,u){u===void 0&&(u=!1),this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;var l=tn(i.length),c=tn(o.length),p="";r===1?p="i":r===2&&(p="i, j");var d="getIndices(".concat(p,")"),f="";a===1?f="i":a===2&&(f="i, coords[1]");var h="getUpdates(".concat(f,")"),m="";u&&(m="coords[0], coords[1]");var v="getDefaultValue(".concat(m,")"),g=n>1?"strides[j]":"strides",y=n>1?"strides[j + 1]":"strides";this.userCode=`
        `.concat(l," strides = ").concat(l,"(").concat(i,`);

        void main() {
          `).concat(c,` coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < `).concat(t,`; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < `).concat(n,`; j+=2) {
              ivec4 index = round(`).concat(d,`);
              flattenedIndex += index.xz * `).concat(g,`;
              if (j + 1 < `).concat(n,`) {
                flattenedIndex += index.yw * `).concat(y,`;
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = `).concat(h,`;
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(`).concat(v,`, sum, found));
        }
      `)}return e}();function tMe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=t.updates,o=r.shape,s=S.backend_util.calculateShapes(i,a,o),u=s.sliceRank,l=s.numUpdates,c=s.sliceSize,p=s.strides,d=s.outputSize,f=[d/c,c];if(d===0)return n.makeTensorInfo(o,a.dtype);var h=Le({inputs:{x:a},backend:n,attrs:{shape:[l,u]}}),m=Le({inputs:{x:i},backend:n,attrs:{shape:[l,c]}}),v=n.makeTensorInfo([],"float32",new Float32Array([0])),g;S.env().getBool("WEBGL_PACK")?g=new eMe(l,u,h.shape.length,m.shape.length,p,f):g=new uw(l,u,h.shape.length,m.shape.length,p,f);var y=n.runWebGLProgram(g,[m,h,v],m.dtype),w=Le({inputs:{x:y},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),w}var nMe={kernelName:S.ScatterNd,backendName:"webgl",kernelFunc:tMe};var rMe=function(){function e(t,n,r,a){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[t,r];var i="while (left < right) {",o="for (int i = 0; i < ".concat(Math.ceil(Math.log2(n+1)),"; ++i) { if (left >= right) break;"),s=S.env().getNumber("WEBGL_VERSION")===2?i:o,u=a==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         `.concat(s,`
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) `).concat(u,` value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `)}return e}();function aMe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sortedSequence,i=t.values,o=r.side,s=new rMe(a.shape[0],a.shape[1],i.shape[1],o),u=[[a.shape[1]]];return n.runWebGLProgram(s,[a,i],"int32",u)}var iMe={kernelName:S.SearchSorted,backendName:"webgl",kernelFunc:aMe};var oMe=function(){function e(t,n,r){this.variableNames=["c","a","b"],this.outputShape=n;var a,i;if(r>4)throw Error("Where for rank ".concat(r," is not yet supported"));if(r===1)i="resRC",a="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],u=[],l=0;l<n.length;l++)u.push("".concat(o[l])),l<t&&s.push("".concat(o[l]));a=s.join(),i=u.join()}var c=tn(r);this.userCode=`
      void main() {
        `.concat(c,` resRC = getOutputCoords();
        float cVal = getC(`).concat(a,`);
        if (cVal >= 1.0) {
          setOutput(getA(`).concat(i,`));
        } else {
          setOutput(getB(`).concat(i,`));
        }
      }
    `)}return e}();function sMe(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e,o=new oMe(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(o,[r,a,i],S.upcastType(a.dtype,i.dtype))}var uMe={kernelName:S.Select,backendName:"webgl",kernelFunc:sMe};var lMe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `.concat(S.backend_util.SELU_SCALEALPHA,`;
  float scale = `).concat(S.backend_util.SELU_SCALE,`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`),cMe=Wt({opSnippet:lMe}),pMe={kernelName:S.Selu,backendName:"webgl",kernelFunc:cMe};var dMe=Qp+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,fMe=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,hMe=Wt({opSnippet:dMe,packedOpSnippet:fMe,cpuKernelImpl:pIe}),mMe={kernelName:S.Sigmoid,backendName:"webgl",kernelFunc:hMe};var vMe=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,gMe=Wt({opSnippet:vMe}),yMe={kernelName:S.Sign,backendName:"webgl",kernelFunc:gMe};var bMe=Qp+`
  return sin(x);
`,wMe=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  `.concat(mc,`
  return result;
`),xMe=Wt({opSnippet:bMe,packedOpSnippet:wMe}),SMe={kernelName:S.Sin,backendName:"webgl",kernelFunc:xMe};var kMe=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,NMe=Wt({opSnippet:kMe}),TMe={kernelName:S.Sinh,backendName:"webgl",kernelFunc:NMe};var EMe=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,IMe=Wt({opSnippet:EMe}),CMe={kernelName:S.Softplus,backendName:"webgl",kernelFunc:IMe},DMe=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings;S.util.assert(a.shape.length<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var s=i.reduce(function(y,w){return y*w}),u=[[0,0]];u.push.apply(u,$n([],Ae(o),!1));for(var l=1+i.length;l<a.shape.length;++l)u.push([0,0]);var c=[],p=XO({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),d=S.backend_util.getReshaped(p.shape,i,s,!1),f=S.backend_util.getPermuted(d.length,i.length,!1),h=S.backend_util.getReshapedPermuted(p.shape,i,s,!1),m=Le({inputs:{x:p},backend:n,attrs:{shape:d}}),v=ma({inputs:{x:m},backend:n,attrs:{perm:f}}),g=Le({inputs:{x:v},backend:n,attrs:{shape:h}});return c.push(p),c.push(m),c.push(v),c.forEach(function(y){return n.disposeIntermediateTensorInfo(y)}),g},_Me={kernelName:S.SpaceToBatchND,backendName:"webgl",kernelFunc:DMe};function AMe(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,i=t.denseShape,o=t.defaultValue;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         `.concat(i.shape));if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         `.concat(r.shape));if(a.shape.length!==1)throw new Error(`Values must be a vector, saw:
         `.concat(a.shape));if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        `.concat(o.shape));var s=n.readSync(r.dataId),u=n.readSync(a.dataId),l=n.readSync(i.dataId),c=n.readSync(o.dataId)[0],p=Ae(fIe(s,r.shape,r.dtype,u,a.dtype,l,c),5),d=p[0],f=p[1],h=p[2],m=p[3],v=p[4];return[n.makeTensorInfo(f,r.dtype,d),n.makeTensorInfo([f[0]],a.dtype,h),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map(function(g){return Number(g)}))),n.makeTensorInfo([v.length],r.dtype,new Int32Array(v))]}var FMe={kernelName:S.SparseFillEmptyRows,backendName:"webgl",kernelFunc:AMe};function RMe(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,i=t.newShape;if(r.shape.length!==2)throw new Error("Input indices should be a matrix but received shape ".concat(r.shape));if(a.shape.length!==1)throw new Error("Input shape should be a vector but received shape ".concat(a.shape));if(i.shape.length!==1)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=Array.from(n.readSync(a.dataId)),s=n.readSync(r.dataId),u=Array.from(n.readSync(i.dataId)),l=Ae(hIe(s,r.shape,r.dtype,o,u),3),c=l[0],p=l[1],d=l[2];return[n.makeTensorInfo(p,r.dtype,c),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}var OMe={kernelName:S.SparseReshape,backendName:"webgl",kernelFunc:RMe};function MMe(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              `.concat(a.shape));if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              `.concat(i.shape));var o=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(i.dataId),l=Ae(bO(o,r.shape,r.dtype,s,u,!0),2),c=l[0],p=l[1];return n.makeTensorInfo(p,r.dtype,c)}var PMe={kernelName:S.SparseSegmentMean,backendName:"webgl",kernelFunc:MMe};function BMe(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             `.concat(a.shape));if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             `.concat(i.shape));var o=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(i.dataId),l=Ae(bO(o,r.shape,r.dtype,s,u),2),c=l[0],p=l[1];return n.makeTensorInfo(p,r.dtype,c)}var LMe={kernelName:S.SparseSegmentSum,backendName:"webgl",kernelFunc:BMe};function zMe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,i=t.sparseValues,o=t.defaultValue,s=r.outputShape,u=S.backend_util.calculateShapes(i,a,s),l=u.sliceRank,c=u.numUpdates,p=u.sliceSize,d=u.strides,f=u.outputSize,h=!1;if(i.dtype==="string"){var m=n.bufferSync(a),v=n.bufferSync(i),g=S.util.decodeString(n.readSync(o.dataId)[0]),y=cIe(m,v,s,f,p,c,l,d,g,h);return n.makeTensorInfo(s,y.dtype,y.values)}var w=new uw(c,l,a.shape.length,i.shape.length,d,[f,1],h),b=n.runWebGLProgram(w,[i,a,o],i.dtype),x=Le({inputs:{x:b},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(b),x}var $Me={kernelName:S.SparseToDense,backendName:"webgl",kernelFunc:zMe};function VMe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.numOrSizeSplits,o=r.axis,s=S.util.parseAxisParam(o,a.shape)[0],u=S.backend_util.prepareSplitSize(a,i,s),l=a.shape.length,c=new Array(l).fill(0),p=a.shape.slice();return u.map(function(d){var f=$n([],Ae(p),!1);f[s]=d;var h=ed({inputs:{x:a},backend:n,attrs:{begin:c,size:f}});return c[s]+=d,h})}var WMe={kernelName:S.SplitV,backendName:"webgl",kernelFunc:VMe};var yR="return sqrt(x);",UMe=Wt({opSnippet:yR,packedOpSnippet:yR,cpuKernelImpl:mIe}),GMe={kernelName:S.Sqrt,backendName:"webgl",kernelFunc:UMe};var qMe="return x * x;",HMe=Wt({opSnippet:qMe}),jMe={kernelName:S.Square,backendName:"webgl",kernelFunc:HMe};var bR="return (a - b) * (a - b);",KMe=Xr({opSnippet:bR,packedOpSnippet:bR}),XMe={kernelName:S.SquaredDifference,backendName:"webgl",kernelFunc:KMe};function YMe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;if(a.dtype!=="string")throw new Error("Input must be of datatype string");var i=n.readSync(a.dataId),o=S.backend_util.fromUint8ToStringArray(i),s=vIe(o,"string",r);return n.makeTensorInfo(a.shape,"string",s)}var JMe={kernelName:S.StaticRegexReplace,backendName:"webgl",kernelFunc:YMe};function ZMe(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=oo+`
    return x > 0.0 ? 1.0 : float(`.concat(n.alpha,`);
  `),o=new ps(a.shape,i);return r.runWebGLProgram(o,[a],a.dtype)}var QMe={kernelName:S.Step,backendName:"webgl",kernelFunc:ZMe};var ePe=function(){function e(t,n,r){this.variableNames=["x"],this.outputShape=r;var a=r.length,i=tn(r.length),o=tn(r.length),s="";if(a===1)s="coords * strides + begin";else{var u=0;s=r.map(function(l,c){return u++,r.length===1?"coords * strides[".concat(c,"] + begin[").concat(c,"]"):"coords[".concat(u-1,"] * strides[").concat(c,"] + begin[").concat(c,"]")}).join(",")}this.userCode=`
      `.concat(i," begin = ").concat(i,"(").concat(t,`);
      `).concat(i," strides = ").concat(i,"(").concat(n,`);

      void main() {
        `).concat(o,` coords = getOutputCoords();
        setOutput(getX(`).concat(s,`));
      }
    `)}return e}();function tPe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.end,s=r.strides,u=r.beginMask,l=r.endMask,c=r.ellipsisMask,p=r.newAxisMask,d=r.shrinkAxisMask,f=S.slice_util.sliceInfo(a.shape,i,o,s,u,l,c,p,d),h=f.finalShapeSparse,m=f.finalShape,v=f.isIdentity,g=f.sliceDim0,y=f.isSimpleSlice,w=f.begin,b=f.end,x=f.strides,k;if(v)k=Le({inputs:{x:a},backend:n,attrs:{shape:m}});else if(g||y){S.util.assert(a.shape.length>=1,function(){return"Input must have rank at least 1, got: ".concat(a.shape.length)});var N=S.slice_util.computeOutShape(w,b,x),E=ed({inputs:{x:a},backend:n,attrs:{begin:w,size:N}});k=Le({inputs:{x:E},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(E)}else{var C=n.shouldExecuteOnCPU([a]);if(C){var R=n.readSync(a.dataId),A=S.buffer(a.shape,a.dtype,R),M=gIe(h,A,x,w);k=n.makeTensorInfo(m,a.dtype,M.values)}else{var $=new ePe(w,x,h);k=n.runWebGLProgram($,[a],a.dtype)}}var z=Le({inputs:{x:k},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(k),z}var nPe={kernelName:S.StridedSlice,backendName:"webgl",kernelFunc:tPe};function rPe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,i=r.nGramWidths,o=r.leftPad,s=r.rightPad,u=r.padWidth,l=r.preserveShortSequences,c=t.data,p=t.dataSplits,d=n.readSync(c.dataId),f=n.readSync(p.dataId),h=Ae(yIe(d,f,a,i,o,s,u,l),2),m=h[0],v=h[1];return[n.makeTensorInfo([m.length],"string",m),n.makeTensorInfo(p.shape,"int32",v)]}var aPe={kernelName:S.StringNGrams,backendName:"webgl",kernelFunc:rPe};function iPe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.skipEmpty,i=t.input,o=t.delimiter;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error("Input must be a vector, got shape: ".concat(i.shape));if(o.shape.length!==0)throw new Error("Delimiter must be a scalar, got shape: ".concat(o.shape));var s=n.readSync(i.dataId),u=n.readSync(o.dataId)[0],l=Ae(bIe(s,u,a),3),c=l[0],p=l[1],d=l[2],f=p.length;return[n.makeTensorInfo([f,2],"int32",c),n.makeTensorInfo([f],"string",p),n.makeTensorInfo([2],"int32",new Int32Array(d))]}var oPe={kernelName:S.StringSplit,backendName:"webgl",kernelFunc:iPe};function sPe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.numBuckets,i=t.input;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");var o=n.readSync(i.dataId),s=wIe(o,a);return n.makeTensorInfo(i.shape,"int32",s)}var uPe={kernelName:S.StringToHashBucketFast,backendName:"webgl",kernelFunc:sPe};var lPe="return tan(x);",cPe=Wt({opSnippet:lPe}),pPe={kernelName:S.Tan,backendName:"webgl",kernelFunc:cPe};var dPe=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,fPe=Wt({opSnippet:dPe}),hPe={kernelName:S.Tanh,backendName:"webgl",kernelFunc:fPe};function mPe(e){var t=e.inputs,n=e.backend;e.attrs;var r=t.tensor,a=t.indices,i=t.updates,o=S.backend_util.calculateShapes(i,a,r.shape),s=o.sliceRank,u=o.numUpdates,l=o.sliceSize,c=o.strides,p=o.outputSize,d=[p/l,l];if(p===0)return n.makeTensorInfo(r.shape,a.dtype);var f=Le({inputs:{x:a},backend:n,attrs:{shape:[u,s]}}),h=Le({inputs:{x:i},backend:n,attrs:{shape:[u,l]}}),m=Le({inputs:{x:r},backend:n,attrs:{shape:d}}),v=new uw(u,s,f.shape.length,h.shape.length,c,d,!1,!0),g=n.runWebGLProgram(v,[h,f,m],m.dtype),y=Le({inputs:{x:g},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),y}var vPe={kernelName:S.TensorScatterUpdate,backendName:"webgl",kernelFunc:mPe};var gPe=function(){function e(t,n){this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[a]*n[a];this.outputShape=r,this.rank=r.length;var i=tn(this.rank),o=yPe(t);this.userCode=`
      void main() {
        `.concat(i,` resRC = getOutputCoords();
        setOutput(getA(`).concat(o,`));
      }
    `)}return e}();function yPe(e){var t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(t===1)return"imod(resRC, ".concat(e[0],")");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod(".concat(n[a],", ").concat(e[a],")"));return r.join()}function JO(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;if(a.dtype==="string"||a.shape.length>5){var o=n.readSync(a.dataId),s=a.dtype==="string"?o.map(function(d){return S.util.decodeString(d)}):o,u=S.buffer(a.shape,a.dtype,s),l=SIe(u,i);return n.makeTensorInfo(l.shape,l.dtype,l.values)}var c=new gPe(a.shape,i),p=n.runWebGLProgram(c,[a],a.dtype);return p}var bPe={kernelName:S.Tile,backendName:"webgl",kernelFunc:JO},wPe=function(){function e(t){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}return e}(),xPe=function(){function e(t){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}return e}();function uc(e,t){t!==null&&e.disposeIntermediateTensorInfo(t)}function wR(e){for(var t=1;t<e;)t*=2;return t}function SPe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted,s=S.env().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),u=S.env().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),l=a.shape,c=l[l.length-1];if(n.shouldExecuteOnCPU([a])||c<s||i>u){var p=n.readSync(a.dataId),d=Ae(kIe(p,l,a.dtype,i,o),2),f=d[0],h=d[1];return[n.makeTensorInfo(f.shape,f.dtype,f.values),n.makeTensorInfo(h.shape,h.dtype,h.values)]}if(i===0)return l[l.length-1]=0,[n.makeTensorInfo(l,a.dtype,[]),n.makeTensorInfo(l,"int32",[])];if(c===1)return[a,zh({attrs:{shape:l,dtype:"int32",value:0},backend:n})];var m=n.texData.get(a.dataId),v=m!==null&&m.isPacked,g=v?n.unpackTensor(a):a,y=S.util.sizeFromShape(l),w=y/c,b=Le({inputs:{x:g},attrs:{shape:[w,c]},backend:n});v&&uc(n,g);for(var x=wR(i),k=wR(c),N=null,E=function(){return N===null?[b,b]:[b,N]},C=function(ae,le,de){var ge=E(),Ee=new wPe(de),he=N===null?1:0,xe=[[c],[he],[Number.NEGATIVE_INFINITY],[ae],[le]],Ne=N;N=n.runWebGLProgram(Ee,ge,"int32",xe),uc(n,Ne)},R=1;R<x;R*=2)for(var A=R*2,M=R;M>=1;M/=2)C(A,M,[w,k]);for(var $=k;$>x;$/=2){var z=E(),L=new xPe([w,$/2]),B=N===null?1:0,W=[[c],[B],[x]],Y=N;N=n.runWebGLProgram(L,z,"int32",W),uc(n,Y);for(var R=x/2,A=R*2,M=R;M>=1;M/=2)C(A,M,N.shape)}var Q=N;N=ed({inputs:{x:N},backend:n,attrs:{begin:0,size:[w,i]}}),uc(n,Q);var G=UO({inputs:{x:b,indices:N},backend:n,attrs:{axis:1,batchDims:1}});uc(n,b);var X=l.slice(0,-1);X.push(i),Q=N,N=Le({inputs:{x:N},attrs:{shape:X},backend:n}),uc(n,Q);var ie=G;return G=Le({inputs:{x:G},attrs:{shape:X},backend:n}),uc(n,ie),[G,N]}var kPe={kernelName:S.TopK,backendName:"webgl",kernelFunc:SPe};var NPe=function(){function e(t,n,r,a,i,o){this.variableNames=["Image","Transforms"],this.outputShape=o;var s=r==="nearest"?1:2,u;switch(a){case"constant":u=1;break;case"reflect":u=2;break;case"wrap":u=3;break;case"nearest":u=4;break;default:u=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(`.concat(u,` == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (`).concat(u,` == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (`).concat(u,` == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < `).concat(t," && 0 <= coordX && coordX < ").concat(n,`) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(`).concat(i,`);
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(`).concat(i,`);
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(`).concat(n,`));
                float mapY = mapCoord(inY, float(`).concat(t,`));

                if (`).concat(s,` == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `)}return e}();function TPe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.transforms,o=r.interpolation,s=r.fillMode,u=r.fillValue,l=r.outputShape,c=Ae(a.shape,4),p=c[0],d=c[1],f=c[2],h=c[3],m=Ae(l??[d,f],2),v=m[0],g=m[1],y=[p,v,g,h],w=new NPe(d,f,o,s,u,y);return n.runWebGLProgram(w,[a,i],"float32")}var EPe={kernelName:S.Transform,backendName:"webgl",kernelFunc:TPe};function IPe(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;jp(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");var o=r.readSync(i.dataId),s=NIe(o,a,i.shape,i.dtype),u=s.outputValues,l=s.outputShape,c=s.indices;return[r.makeTensorInfo(l,i.dtype,u),r.makeTensorInfo([c.length],"int32",c)]}var CPe={kernelName:S.Unique,backendName:"webgl",kernelFunc:IPe};function DPe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a,s=o.shape.length,u=a.shape[i],l=new Array(s-1),c=0,p=0;p<s;p++)p!==i&&(l[c++]=o.shape[p]);var d=[],f=new Array(s).fill(0),h=o.shape.slice();h[i]=1;for(var m=new Array(u),p=0;p<m.length;p++){f[i]=p;var v=ed({inputs:{x:o},backend:n,attrs:{begin:f,size:h}}),g=Le({inputs:{x:v},backend:n,attrs:{shape:l}});m[p]=g,d.push(v)}return d.forEach(function(y){return n.disposeIntermediateTensorInfo(y)}),m}var _Pe={kernelName:S.Unpack,backendName:"webgl",kernelFunc:DPe};var APe=function(){function e(t,n){this.variableNames=["x","segmentIds"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.numSegments,s=o*Math.ceil(i/r);this.outputShape=[a,s];var u="0.0",l="sumValue",c=Math.floor(r/4)*4,p=r%4,d=`
        sumValue += dot(values, segFilter);
    `,f="";i%r>0&&(f=`
        if (inIdx < 0 || inIdx >= `.concat(i,`) {
          return initializationValue;
        }
      `));var h="";i%r>0&&(h=`
        if (inIdx < 0 || inIdx >= `.concat(i,`) {
          return -1.0;
        }
      `)),this.userCode=`
      const float initializationValue = `.concat(u,`;

      float getValue(int batch, int inIdx) {
        `).concat(f,`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `).concat(h,`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `).concat(o,")) * float(").concat(r,`));
        int currentSeg = int(mod(float(outIdx), float(`).concat(o,`)));

        float sumValue = 0.0;

        for (int i = 0; i < `).concat(c,`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `).concat(d,`
        }

        int inIdx = inOffset + `).concat(c,`;
        if (`).concat(p===1,`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `).concat(d,`
        } else if (`).concat(p===2,`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `).concat(d,`
        } else if (`).concat(p===3,`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `).concat(d,`
        }
        setOutput(`).concat(l,`);
      }
    `)}return e}();function FPe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.segmentIds,o=r.numSegments,s=a.shape.length,u=[],l=0,c=S.backend_util.getAxesPermutation([l],s),p=a;c!=null&&(p=ma({inputs:{x:a},backend:n,attrs:{perm:c}}),u.push(p),l=S.backend_util.getInnerMostAxes(1,s)[0]);var d=S.backend_util.segment_util.computeOutShape(p.shape,l,o),f=S.util.sizeFromShape([p.shape[l]]),h=Le({inputs:{x:p},backend:n,attrs:{shape:[-1,f]}});u.push(h);var m=S.sumOutType(a.dtype),v=function(x,k,N,E,C){var R=x.shape[0],A=x.shape[1],M=S.backend_util.segment_util.segOpComputeOptimalWindowSize(A,C),$={windowSize:M,inSize:A,batchSize:R,numSegments:C},z=new APe($,k),L=n.compileAndRun(z,[x,N],E);if(u.push(L),L.shape[1]===C)return L;var B=YO({backend:n,attrs:{start:0,stop:C,step:1,dtype:"float32"}}),W=JO({inputs:{x:B},backend:n,attrs:{reps:[A/M]}});u.push(B),u.push(W);var Y=v(L,k,W,E,C);return Y},g=v(h,"unsortedSegmentSum",i,m,o),y=Le({inputs:{x:g},backend:n,attrs:{shape:d}}),w=y;if(c!=null){u.push(y);var b=S.backend_util.getUndoAxesPermutation(c);w=ma({inputs:{x:w},backend:n,attrs:{perm:b}})}return u.forEach(function(x){return n.disposeIntermediateTensorInfo(x)}),w}var RPe={kernelName:S.UnsortedSegmentSum,backendName:"webgl",kernelFunc:FPe},L6,xR,OPe=[gCe,bCe,SCe,TCe,ICe,_Ce,FCe,OCe,LCe,$Ce,UCe,HCe,XCe,QCe,nDe,aDe,oDe,cDe,dDe,hDe,yDe,TDe,IDe,ADe,RDe,zDe,VDe,qDe,eCe,KDe,QDe,r_e,l_e,d_e,h_e,v_e,y_e,S_e,T_e,C_e,__e,F_e,O_e,B_e,z_e,U_e,q_e,K_e,J_e,Q_e,rAe,sAe,pAe,hAe,gAe,yAe,wAe,SAe,NAe,EAe,CAe,FAe,MAe,LAe,$Ae,UAe,HAe,YAe,eFe,QIe,nFe,JDe,iFe,uFe,pFe,nCe,mFe,bFe,xFe,TFe,CFe,FFe,MFe,zFe,UFe,HFe,KFe,ZFe,eRe,nRe,oRe,uRe,cRe,dRe,hRe,yRe,SRe,ERe,ORe,iCe,LRe,VRe,GRe,jRe,MDe,YRe,ZRe,eOe,rOe,sOe,aCe,lOe,pOe,fOe,mOe,vOe,PDe,_Re,bOe,kOe,IOe,sCe,AOe,OOe,LOe,VOe,qOe,jOe,YOe,QOe,nMe,iMe,uMe,pMe,mMe,yMe,SMe,TMe,kDe,FRe,CMe,_Me,FMe,OMe,PMe,LMe,$Me,WMe,GMe,jMe,XMe,JMe,QMe,nPe,aPe,oPe,uPe,ARe,hCe,pPe,hPe,vPe,bPe,kPe,EPe,mCe,CPe,_Pe,RPe,JRe];try{for(Th=ha(OPe),Up=Th.next();!Up.done;Up=Th.next())SR=Up.value,S.registerKernel(SR)}catch(e){L6={error:e}}finally{try{Up&&!Up.done&&(xR=Th.return)&&xR.call(Th)}finally{if(L6)throw L6.error}}var SR,Th,Up;js.GPGPUContext=R0;js.MathBackendWebGL=aw;js.forceHalfFloat=SO;js.gpgpu_util=DTe;js.setWebGLContext=kR;js.version_webgl=JIe;js.webgl=ZIe;js.webgl_util=MNe});var r1=An(ki=>{"use strict";var dw=Il(),MPe=KN(),fw=$C(),hw=M_(),kM=lA(),mw=HF(),vw=ZO();function NM(e){var t=Object.create(null);return e&&Object.keys(e).forEach(function(n){if(n!=="default"){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}}),t.default=e,t}var QO=NM(MPe),PPe=NM(kM),TM="Abs",EM="Acos",IM="Acosh",Ow="Add",BPe="AddN",LPe="All",zPe="Any",CM="ArgMax",DM="ArgMin",_M="Asin",AM="Asinh",FM="Atan",RM="Atanh",OM="Atan2",MM="AvgPool",$Pe="AvgPoolGrad",VPe="AvgPool3D",WPe="AvgPool3DGrad",PM="BatchMatMul",BM="BatchToSpaceND",UPe="BroadcastTo",Mw="Cast",LM="Ceil",zM="ClipByValue",GPe="Complex",$M="ComplexAbs",VM="Concat",WM="Conv2D",qPe="Conv2DBackpropFilter",UM="Conv2DBackpropInput",HPe="Conv3D",jPe="Conv3DBackpropFilterV2",KPe="Conv3DBackpropInputV2",GM="Cos",qM="Cosh",XPe="Cumprod",HM="Cumsum",YPe="DepthToSpace",jM="DepthwiseConv2dNative",JPe="DepthwiseConv2dNativeBackpropFilter",ZPe="DepthwiseConv2dNativeBackpropInput",KM="Dilation2D",QPe="Dilation2DBackpropInput",eBe="Dilation2DBackpropFilter",XM="RealDiv",YM="Elu",tBe="EluGrad",JM="Erf",nBe="Equal",ZM="Exp",QM="ExpandDims",eP="Expm1",rBe="FFT",aBe="Fill",tP="Floor",nP="FloorDiv",rP="FusedBatchNorm",aP="GatherV2",iBe="Greater",iP="GreaterEqual",Pw="Identity",oBe="IFFT",sBe="Imag",oP="IsFinite",sP="IsInf",uP="IsNan",lP="LeakyRelu",uBe="Less",lBe="LessEqual",cP="Log",pP="Log1p",cBe="LogicalAnd",pBe="LogicalNot",dBe="LogicalOr",fBe="LogSoftmax",dP="LRN",hBe="LRNGrad",fP="Max",hP="Maximum",mP="MaxPool",mBe="MaxPoolGrad",vBe="MaxPool3D",gBe="MaxPool3DGrad",vP="Mean",gP="Min",yP="Minimum",bP="MirrorPad",wP="Mod",xP="Multiply",SP="Neg",yBe="NotEqual",kP="OnesLike",NP="OneHot",TP="Pack",EP="PadV2",IP="Pow",CP="Prelu",DP="Prod",bBe="Real",_P="Reciprocal",AP="Relu",FP="Reshape",RP="ResizeNearestNeighbor",wBe="ResizeNearestNeighborGrad",OP="ResizeBilinear",xBe="ResizeBilinearGrad",MP="Relu6",PP="Reverse",BP="Round",LP="Rsqrt",SBe="TensorScatterUpdate",zP="Select",$P="Selu",VP="Slice",WP="Sin",UP="Sinh",GP="Sign",qP="Sigmoid",HP="Softplus",jP="Sqrt",KP="Sum",XP="SpaceToBatchND",YP="SplitV",JP="Softmax",ZP="SquaredDifference",kBe="Square",NBe="StridedSlice",QP="Sub",eB="Tan",tB="Tanh",Bw="Tile",TBe="TopK",W0="Transpose",EBe="Unique",nB="Unpack",rB="UnsortedSegmentSum",aB="ZerosLike",iB="Step";var IBe=1e-7,CBe=1e-4,gw=class{refCount(t){return ai("refCount")}incRef(t){return ai("incRef")}timerAvailable(){return!0}time(t){return ai("time")}read(t){return ai("read")}readSync(t){return ai("readSync")}readToGPU(t,n){return ai("readToGPU")}numDataIds(){return ai("numDataIds")}disposeData(t,n){return ai("disposeData")}write(t,n,r){return ai("write")}move(t,n,r,a,i){return ai("move")}createTensorFromGPUData(t,n,r){return ai("createTensorFromGPUData")}memory(){return ai("memory")}floatPrecision(){return ai("floatPrecision")}epsilon(){return this.floatPrecision()===32?IBe:CBe}dispose(){return ai("dispose")}};function ai(e){throw new Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}function se(e,t){if(!e)throw new Error(typeof t=="string"?t:t())}function DBe(e,t,n=""){se(Lw(e,t),()=>n+` Shapes ${e} and ${t} must match`)}function Xs(e){if(e.length===0)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function Lw(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function jh(e){return e%1===0}function U0(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function hs(e,t){let n=t.length;return e=e==null?t.map((r,a)=>a):[].concat(e),se(e.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${e}`),se(e.every(r=>jh(r)),()=>`All values in axis param must be integers but got axis ${e}`),e.map(r=>r<0?n+r:r)}function _Be(e,t){let n=[],r=[],a=t!=null&&Array.isArray(t)&&t.length===0,i=t==null||a?null:hs(t,e).sort(),o=0;for(let s=0;s<e.length;++s){if(i!=null){if(i[o]===s&&e[s]!==1)throw new Error(`Can't squeeze axis ${s} since its dim '${e[s]}' is not 1`);(i[o]==null||i[o]>s)&&e[s]===1&&(n.push(e[s]),r.push(s)),i[o]<=s&&o++}e[s]!==1&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function ABe(e,t){for(let n=0;n<e.length;n++){let r=e[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${t} being uploaded contains ${r}.`)}}function FBe(e){return e==="bool"||e==="complex64"||e==="float32"||e==="int32"||e==="string"}function yw(e){if(e==="float32"||e==="int32")return 4;if(e==="complex64")return 8;if(e==="bool")return 1;throw new Error(`Unknown dtype ${e}`)}function RBe(e){if(e==null)return 0;let t=0;return e.forEach(n=>t+=n.length),t}function zw(e){return typeof e=="string"||e instanceof String}function OBe(e){return typeof e=="boolean"}function MBe(e){return typeof e=="number"}function t2(e){return Array.isArray(e)?t2(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":MBe(e)?"float32":zw(e)?"string":OBe(e)?"bool":"float32"}function bw(e){return!!(e&&e.constructor&&e.call&&e.apply)}function oB(e){let t=e.length;if(t<2)return[];let n=new Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function sB(e,t,n,r=!1){let a=new Array;if(t.length===1){let i=t[0]*(r?2:1);for(let o=0;o<i;o++)a[o]=n[e+o]}else{let i=t[0],o=t.slice(1),s=o.reduce((u,l)=>u*l)*(r?2:1);for(let u=0;u<i;u++)a[u]=sB(e+u*s,o,n,r)}return a}function eM(e,t,n=!1){if(e.length===0)return t[0];let r=e.reduce((a,i)=>a*i)*(n?2:1);if(r===0)return[];if(r!==t.length)throw new Error(`[${e}] does not match the input size ${t.length}${n?" for a complex tensor":""}.`);return sB(0,e,t,n)}function uB(e,t){let n=$w(e,t);for(let r=0;r<n.length;r++)n[r]=1;return n}function $w(e,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool")return new Uint8Array(e);throw new Error(`Unknown data type ${t}`)}function n1(e){e.forEach(t=>{se(Number.isInteger(t)&&t>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`)})}function Vw(e){return e&&e.then&&typeof e.then=="function"}var tM="tfjsflags",ww=class{constructor(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=PBe,this.populateURLFlags()}setPlatform(t,n){this.platform!=null&&(In().getBool("IS_TEST")||In().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${t}.`)),this.platformName=t,this.platform=n}registerFlag(t,n,r){if(this.flagRegistry[t]={evaluationFn:n,setHook:r},this.urlFlags[t]!=null){let a=this.urlFlags[t];In().getBool("IS_TEST")||In().getBool("PROD")||console.warn(`Setting feature override from URL ${t}: ${a}.`),this.set(t,a)}}async getAsync(t){return t in this.flags?this.flags[t]:(this.flags[t]=await this.evaluateFlag(t),this.flags[t])}get(t){if(t in this.flags)return this.flags[t];let n=this.evaluateFlag(t);if(Vw(n))throw new Error(`Flag ${t} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[t]=n,this.flags[t]}getNumber(t){return this.get(t)}getBool(t){return this.get(t)}getString(t){return this.get(t)}getFlags(){return this.flags}get features(){return this.flags}set(t,n){if(this.flagRegistry[t]==null)throw new Error(`Cannot set flag ${t} as it has not been registered.`);this.flags[t]=n,this.flagRegistry[t].setHook!=null&&this.flagRegistry[t].setHook(n)}evaluateFlag(t){if(this.flagRegistry[t]==null)throw new Error(`Cannot evaluate flag '${t}': no evaluation function found.`);return this.flagRegistry[t].evaluationFn()}setFlags(t){this.flags=Object.assign({},t)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;let t=this.getQueryParams(this.global.location.search);tM in t&&t[tM].split(",").forEach(r=>{let[a,i]=r.split(":");this.urlFlags[a]=LBe(a,i)})}};function PBe(e){let t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(BBe(t,r[0],r[1]),r.join("="))),t}function BBe(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function LBe(e,t){let n=t.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:t}function In(){return lB}var lB=null;function zBe(e){lB=e}var lw;function cB(){if(lw==null){let e;if(typeof window<"u")e=window;else if(typeof global<"u")e=global;else if(typeof process<"u")e=process;else if(typeof self<"u")e=self;else throw new Error("Could not find a global object");lw=e}return lw}function $Be(){let e=cB();return e._tfGlobals==null&&(e._tfGlobals=new Map),e._tfGlobals}function Ww(e,t){let n=$Be();if(n.has(e))return n.get(e);{let r=t();return n.set(e,r),n.get(e)}}function td(...e){In().getBool("IS_TEST")||In().getBool("PROD")||console.warn(...e)}var pB=Ww("kernelRegistry",()=>new Map),xw=Ww("gradRegistry",()=>new Map);function nM(e,t){let n=WBe(e,t);return pB.get(n)}function rM(e){return xw.get(e)}function aM(e){let t=pB.entries(),n=[];for(;;){let{done:r,value:a}=t.next();if(r)break;let[i,o]=a,[s]=i.split("_");s===e&&n.push(o)}return n}function VBe(e){let{kernelName:t}=e;xw.has(t)&&In().getBool("DEBUG")&&td(`Overriding the gradient for '${t}'`),xw.set(t,e)}function WBe(e,t){return`${t}_${e}`}function UBe(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}var GBe=QO.default||QO;function Uw(e){return GBe.fromString(e,!0,16)}var nYe=Uw("c3a5c85c97cb3127"),rYe=Uw("b492b66fbe98f273"),aYe=Uw("9ae16a3b2f90404f");function qBe(e,t){return e instanceof Float32Array&&t==="float32"||e instanceof Int32Array&&t==="int32"||e instanceof Uint8Array&&t==="bool"}function dB(e,t){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=Kh(e)),In().getBool("DEBUG")&&ABe(e,t),qBe(e,t))return e;if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool"){let n=new Uint8Array(e.length);for(let r=0;r<n.length;++r)Math.round(e[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${t}`)}function j0(){return In().platform.now()}function HBe(e,t="utf-8"){return t=t||"utf-8",In().platform.encode(e,t)}function iM(e,t="utf-8"){return t=t||"utf-8",In().platform.decode(e,t)}function uo(e){return In().platform.isTypedArray!=null?In().platform.isTypedArray(e):UBe(e)}function Kh(e,t=[],n=!1){if(t==null&&(t=[]),typeof e=="boolean"||typeof e=="number"||typeof e=="string"||Vw(e)||e==null||uo(e)&&n)t.push(e);else if(Array.isArray(e)||uo(e))for(let r=0;r<e.length;++r)Kh(e[r],t,n);else{let r=-1;for(let a of Object.keys(e))/^([1-9]+[0-9]*|0)$/.test(a)&&(r=Math.max(r,Number(a)));for(let a=0;a<=r;a++)Kh(e[a],t,n)}return t}var Sw=class{constructor(t,n){this.backendTimer=t,this.logger=n,n==null&&(this.logger=new kw)}profileKernel(t,n,r){let a,i=()=>{a=r()},o,s=j0();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(i);else{i();for(let l of a)l.dataSync();o=Promise.resolve({kernelMs:j0()-s})}if(In().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let l=0;l<a.length;l++){let c=a[l];c.data().then(p=>{jBe(p,c.dtype,t)})}return{kernelName:t,outputs:a,inputs:n,timeMs:o.then(l=>l.kernelMs),extraInfo:o.then(l=>l.getExtraProfileInfo!=null?l.getExtraProfileInfo():"")}}logKernelProfile(t){let{kernelName:n,outputs:r,timeMs:a,inputs:i,extraInfo:o}=t;r.forEach(s=>{Promise.all([s.data(),a,o]).then(u=>{this.logger.logKernelProfile(n,s,u[0],u[1],i,u[2])})})}};function jBe(e,t,n){if(t!=="float32")return!1;for(let r=0;r<e.length;r++){let a=e[r];if(isNaN(a)||!isFinite(a))return console.warn(`Found ${a} in the result of '${n}'`),!0}return!1}var kw=class{logKernelProfile(t,n,r,a,i,o){let s=typeof a=="number"?U0(`${a}ms`,9):a.error,u=U0(t,25),l=n.rank,c=n.size,p=U0(n.shape.toString(),14),d="";for(let f in i){let h=i[f];if(h!=null){let m=h.shape||n.shape,v=m.length;d+=`${f}: ${v}D ${v>0?m:""} `}}console.log(`%c${u}	%c${s}	%c${l}D ${p}	%c${c}	%c${d}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}};function KBe(e,t,n){let r={},a={};for(let u=0;u<t.length;u++)r[t[u].id]=!0;for(let u=0;u<e.length;u++){let l=e[u],c=l.inputs;for(let p in c){let d=c[p],f=!1;for(let h=0;h<t.length;h++)if(r[d.id]){l.outputs.forEach(m=>r[m.id]=!0),f=!0,a[l.id]=!0;break}if(f)break}}let i={};i[n.id]=!0;let o={};for(let u=e.length-1;u>=0;u--){let l=e[u],c=l.inputs;for(let p=0;p<l.outputs.length;p++)if(i[l.outputs[p].id]){for(let d in c)i[c[d].id]=!0,o[l.id]=!0;break}}let s=[];for(let u=0;u<e.length;u++){let l=e[u];if(a[l.id]&&o[l.id]){let c={};for(let d in l.inputs){let f=l.inputs[d];r[f.id]&&(c[d]=f)}let p=Object.assign({},l);p.inputs=c,p.outputs=l.outputs,s.push(p)}}return s}function XBe(e,t,n,r){for(let a=t.length-1;a>=0;a--){let i=t[a],o=[];if(i.outputs.forEach(u=>{let l=e[u.id];l!=null?o.push(l):o.push(null)}),i.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);let s=i.gradient(o);for(let u in i.inputs){if(!(u in s))throw new Error(`Cannot backprop through input ${u}. Available gradients found: ${Object.keys(s)}.`);let l=n(()=>s[u]());if(l.dtype!=="float32")throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${u} must have 'float32' dtype, but has '${l.dtype}'`);let c=i.inputs[u];if(!Lw(l.shape,c.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${u}' has shape '${l.shape}', which does not match the shape of the input '${c.shape}'`);if(e[c.id]==null)e[c.id]=l;else{let p=e[c.id];e[c.id]=r(p,l),p.dispose()}}}}var oM=20,$h=3,cw=7;function YBe(e,t,n,r){let a=oB(t),i=JBe(e,t,n,a),o=t.length,s=G0(e,t,n,a,i),u=["Tensor"];return r&&(u.push(`  dtype: ${n}`),u.push(`  rank: ${o}`),u.push(`  shape: [${t}]`),u.push("  values:")),u.push(s.map(l=>"    "+l).join(`
`)),u.join(`
`)}function JBe(e,t,n,r){let a=Xs(t),i=r[r.length-1],o=new Array(i).fill(0),s=t.length,u=n==="complex64"?qh(e):e;if(s>1)for(let l=0;l<a/i;l++){let c=l*i;for(let p=0;p<i;p++)o[p]=Math.max(o[p],Gh(u[c+p],0,n).length)}return o}function Gh(e,t,n){let r;return Array.isArray(e)?r=`${parseFloat(e[0].toFixed(cw))} + ${parseFloat(e[1].toFixed(cw))}j`:zw(e)?r=`'${e}'`:n==="bool"?r=fB(e):r=parseFloat(e.toFixed(cw)).toString(),U0(r,t)}function fB(e){return e===0?"false":"true"}function G0(e,t,n,r,a,i=!0){let o=n==="complex64"?2:1,s=t[0],u=t.length;if(u===0){if(n==="complex64"){let m=qh(e);return[Gh(m[0],0,n)]}return n==="bool"?[fB(e[0])]:[e[0].toString()]}if(u===1){if(s>oM){let v=$h*o,g=Array.from(e.slice(0,v)),y=Array.from(e.slice((s-$h)*o,s*o));return n==="complex64"&&(g=qh(g),y=qh(y)),["["+g.map((w,b)=>Gh(w,a[b],n)).join(", ")+", ..., "+y.map((w,b)=>Gh(w,a[s-$h+b],n)).join(", ")+"]"]}return["["+(n==="complex64"?qh(e):Array.from(e)).map((v,g)=>Gh(v,a[g],n)).join(", ")+"]"]}let l=t.slice(1),c=r.slice(1),p=r[0]*o,d=[];if(s>oM){for(let m=0;m<$h;m++){let v=m*p,g=v+p;d.push(...G0(e.slice(v,g),l,n,c,a,!1))}d.push("...");for(let m=s-$h;m<s;m++){let v=m*p,g=v+p;d.push(...G0(e.slice(v,g),l,n,c,a,m===s-1))}}else for(let m=0;m<s;m++){let v=m*p,g=v+p;d.push(...G0(e.slice(v,g),l,n,c,a,m===s-1))}let f=u===2?",":"";d[0]="["+(s>0?d[0]+f:"");for(let m=1;m<d.length-1;m++)d[m]=" "+d[m]+f;let h=`,
`;for(let m=2;m<u;m++)h+=`
`;return d[d.length-1]=" "+d[d.length-1]+"]"+(i?"":h),d}function qh(e){let t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var ds=null,Vh=null,ZBe=null;function QBe(e){ds=e}function eLe(e){ZBe=e}var Da=class{constructor(t,n,r,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=Xs(t),this.strides=oB(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){let t=await this.data();return Vh.buffer(this.shape,this.dtype,t)}bufferSync(){return Vh.buffer(this.shape,this.dtype,this.dataSync())}async array(){let t=await this.data();return eM(this.shape,t,this.dtype==="complex64")}arraySync(){return eM(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();let t=ds().read(this.dataId);if(this.dtype==="string"){let n=await t;try{return n.map(r=>iM(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return t}dataToGPU(t){return this.throwIfDisposed(),ds().readToGPU(this.dataId,t)}dataSync(){this.throwIfDisposed();let t=ds().readSync(this.dataId);if(this.dtype==="string")try{return t.map(n=>iM(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t}async bytes(){this.throwIfDisposed();let t=await ds().read(this.dataId);return this.dtype==="string"?t:new Uint8Array(t.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),ds().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(t=!1){return Vh.print(this,t)}clone(){return this.throwIfDisposed(),Vh.clone(this)}toString(t=!1){let n=this.dataSync();return YBe(n,this.shape,this.dtype,t)}cast(t){return this.throwIfDisposed(),Vh.cast(this,t)}variable(t=!0,n,r){return this.throwIfDisposed(),ds().makeVariable(this,t,n,r)}};Object.defineProperty(Da,Symbol.hasInstance,{value:e=>!!e&&e.data!=null&&e.dataSync!=null&&e.throwIfDisposed!=null});function pe(){return Ww("Tensor",()=>Da)}pe();var rd=class extends Da{constructor(t,n,r,a){super(t.shape,t.dtype,t.dataId,a),this.trainable=n,this.name=r}assign(t){if(t.dtype!==this.dtype)throw new Error(`dtype of the new value (${t.dtype}) and previous value (${this.dtype}) must match`);if(!Lw(t.shape,this.shape))throw new Error(`shape of the new value (${t.shape}) and previous value (${this.shape}) must match`);ds().disposeTensor(this),this.dataId=t.dataId,ds().incRef(this,null)}dispose(){ds().disposeVariable(this),this.isDisposedInternal=!0}};Object.defineProperty(rd,Symbol.hasInstance,{value:e=>e instanceof Da&&e.assign!=null&&e.assign instanceof Function});var sM;(function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"})(sM||(sM={}));var Nw;(function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"})(Nw||(Nw={}));var Tw;(function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"})(Tw||(Tw={}));var Ew;(function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"})(Ew||(Ew={}));var Iw;(function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"})(Iw||(Iw={}));var tLe={float32:Ew,int32:Nw,bool:Tw,complex64:Iw};function nLe(e,t){if(e==="string"||t==="string"){if(e==="string"&&t==="string")return"string";throw new Error(`Can not upcast ${e} with ${t}`)}return tLe[e][t]}function hB(e){return e!=null&&typeof e=="object"&&"texture"in e&&e.texture instanceof WebGLTexture}function mB(e){return typeof GPUBuffer<"u"&&e!=null&&typeof e=="object"&&"buffer"in e&&e.buffer instanceof GPUBuffer}function Br(e,t){if(e.dtype===t.dtype)return[e,t];let n=nLe(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function vB(e){let t=[];return gB(e,t,new Set),t}function gB(e,t,n){if(e==null)return;if(e instanceof Da){t.push(e);return}if(!rLe(e))return;let r=e;for(let a in r){let i=r[a];n.has(i)||(n.add(i),gB(i,t,n))}}function rLe(e){return Array.isArray(e)||typeof e=="object"}function pw(e){return e.kernelName!=null}var K0=class{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(t=>t.name)))}}}dispose(){for(let t in this.registeredVariables)this.registeredVariables[t].dispose()}},Xh=class e{constructor(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new K0}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;let t=this.getSortedBackends();for(let n=0;n<t.length;n++){let r=t[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){let{name:t,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${t}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(t)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(t){if(!(t in this.registry))if(t in this.registryFactory){let{asyncInit:n}=this.initializeBackend(t);if(n)return null}else return null;return this.registry[t]}findBackendFactory(t){return t in this.registryFactory?this.registryFactory[t].factory:null}registerBackend(t,n,r=1){return t in this.registryFactory?(td(`${t} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[t]={factory:n,priority:r},!0)}async setBackend(t){if(this.registryFactory[t]==null)throw new Error(`Backend name '${t}' not found in registry`);if(this.backendName=t,this.registry[t]==null){this.backendInstance=null;let{success:n,asyncInit:r}=this.initializeBackend(t);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new Sw(this.backendInstance),!0}setupRegisteredKernels(){aM(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(t){aM(t).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[t])})}initializeBackend(t){let n=this.registryFactory[t];if(n==null)throw new Error(`Cannot initialize backend ${t}, no registration found.`);try{let r=n.factory();if(r&&!(r instanceof gw)&&typeof r.then=="function"){let a=++this.pendingBackendInitId,i=r.then(o=>a<this.pendingBackendInitId?!1:(this.registry[t]=o,this.pendingBackendInit=null,!0)).catch(o=>(a<this.pendingBackendInitId||(this.pendingBackendInit=null,td(`Initialization of backend ${t} failed`),td(o.stack||o.message)),!1));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}else return this.registry[t]=r,{success:!0,asyncInit:!1}}catch(r){return td(`Initialization of backend ${t} failed`),td(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(t){if(!(t in this.registryFactory))throw new Error(`${t} backend not found in registry`);this.backendName===t&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((t,n)=>this.registryFactory[n].priority-this.registryFactory[t].priority)}initializeBackendsAndReturnBest(){let t=this.getSortedBackends();for(let n=0;n<t.length;n++){let r=t[n],{success:a,asyncInit:i}=this.initializeBackend(r);if(i||a)return{name:r,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(t,n){let r=this.state.tensorInfo.get(n),a=r.backend,i=this.readSync(n),o=a.refCount(n);a.disposeData(n,!0),r.backend=t,t.move(n,i,r.shape,r.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(t,n){let r=null;if(n==null){if(typeof t!="function")throw new Error("Please provide a function to tidy()");n=t}else{if(typeof t!="string"&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=t}let a;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(a),()=>(a=n(),a instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),a))}scopedRun(t,n,r){t();try{let a=r();return n(),a}catch(a){throw n(),a}}nextTensorId(){return e.nextTensorId++}nextVariableId(){return e.nextVariableId++}clone(t){let n=oe.runKernel(Pw,{x:t}),r={x:t},a=o=>({x:()=>{let s="float32",u={x:o},l={dtype:s};return oe.runKernel(Mw,u,l)}}),i=[];return this.addTapeNode(this.state.activeScope.name,r,[n],a,i,{}),n}runKernel(t,n,r){if(this.backendName==null&&this.backend,!(nM(t,this.backendName)!=null))throw new Error(`Kernel '${t}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:t,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(t,n,r){let a=this.backend.numDataIds(),i=0;r.forEach(u=>{i+=u.dtype==="complex64"?3:1});let o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=a-n-i-o;if(s>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${s} data ids) after running '${t}'`)}runKernelFunc(t){let n,r=[],a=this.isTapeOn(),i=this.state.numBytes,o=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let s;this.backendName==null&&this.backend;let u,l=pw(t)?t.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(pw(t)){let{kernelName:h,inputs:m,attrs:v}=t;this.backendName==null&&this.backend;let g=nM(h,this.backendName);se(g!=null,()=>`Cannot find registered kernel '${h}' for backend '${this.backendName}'`),s=()=>{let y=this.backend.numDataIds();u=g.kernelFunc({inputs:m,attrs:v,backend:this.backend});let w=Array.isArray(u)?u:[u];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(h,y,w);let b=w.map(x=>x.rank!=null?x:this.makeTensorFromTensorInfo(x));if(a){let x=this.getTensorsForGradient(h,m,b);r=this.saveTensorsForBackwardMode(x)}return b}}else{let{forwardFunc:h}=t,m=v=>{a&&(r=v.map(g=>this.keep(this.clone(g))))};s=()=>{let v=this.backend.numDataIds();u=this.tidy(()=>h(this.backend,m));let g=Array.isArray(u)?u:[u];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,v,g),g}}let{inputs:c,attrs:p}=t,d=pw(t)?null:t.backwardsFunc,f;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=s():(f=this.profiler.profileKernel(l,c,()=>s()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(f),n=f.outputs)}),a&&this.addTapeNode(l,c,n,d,r,p),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(h=>c[h]!=null?c[h].shape:null),outputShapes:n.map(h=>h.shape),kernelTimeMs:f.timeMs,extraInfo:f.extraInfo}),Array.isArray(u)?n:n[0]}saveTensorsForBackwardMode(t){return t.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(t,n,r){let a=rM(t);if(a!=null){let i=a.inputsToSave||[],o=a.outputsToSave||[],s;a.saveAllInputs?(se(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),s=Object.keys(n).map(l=>n[l])):s=i.map(l=>n[l]);let u=r.filter((l,c)=>o[c]);return s.concat(u)}return[]}makeTensor(t,n,r,a){if(t==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",a=a||this.backend;let i=t;r==="string"&&zw(t[0])&&(i=t.map(u=>HBe(u)));let o=a.write(i,n,r),s=new Da(n,r,o,this.nextTensorId());if(this.trackTensor(s,a),r==="string"){let u=this.state.tensorInfo.get(o),l=RBe(i);this.state.numBytes+=l-u.bytes,u.bytes=l}return s}makeTensorFromDataId(t,n,r,a){r=r||"float32";let i={dataId:t,shape:n,dtype:r};return this.makeTensorFromTensorInfo(i,a)}makeTensorFromTensorInfo(t,n){let{dataId:r,shape:a,dtype:i}=t,o=new Da(a,i,r,this.nextTensorId());return this.trackTensor(o,n),o}makeVariable(t,n=!0,r,a){r=r||this.nextVariableId().toString(),a!=null&&a!==t.dtype&&(t=t.cast(a));let i=new rd(t,n,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(t,n){this.state.numTensors++,t.dtype==="string"&&this.state.numStringTensors++;let r=0;t.dtype!=="complex64"&&t.dtype!=="string"&&(r=t.size*yw(t.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(t.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(t.dataId,{backend:n||this.backend,dtype:t.dtype,shape:t.shape,bytes:r})),t instanceof rd||this.track(t)}incRef(t,n){this.trackTensor(t,n),this.backend.incRef(t.dataId)}removeDataId(t,n){this.state.tensorInfo.has(t)&&this.state.tensorInfo.get(t).backend===n&&(this.state.tensorInfo.delete(t),this.state.numDataBuffers--)}disposeTensor(t){if(!this.state.tensorInfo.has(t.dataId))return;let n=this.state.tensorInfo.get(t.dataId);if(this.state.numTensors--,t.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),t.dtype!=="complex64"&&t.dtype!=="string"){let r=t.size*yw(t.dtype);this.state.numBytes-=r}n.backend.disposeData(t.dataId)&&this.removeDataId(t.dataId,n.backend)}disposeVariables(){for(let t in this.state.registeredVariables){let n=this.state.registeredVariables[t];this.disposeVariable(n)}}disposeVariable(t){this.disposeTensor(t),this.state.registeredVariables[t.name]!=null&&delete this.state.registeredVariables[t.name]}memory(){let t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,t.reasons==null&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t}async profile(t){this.state.profiling=!0;let n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(a=>a.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(let a of this.state.activeProfile.kernels)a.kernelTimeMs=await a.kernelTimeMs,a.extraInfo=await a.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(t,n,r,a,i,o){let s={id:this.state.nextTapeNodeId++,kernelName:t,inputs:n,outputs:r,saved:i},u=rM(t);u!=null&&(a=u.gradFunc),a!=null&&(s.gradient=l=>(l=l.map((c,p)=>{if(c==null){let d=r[p],f=$w(d.size,d.dtype);return this.makeTensor(f,d.shape,d.dtype)}return c}),a(l.length>1?l:l[0],i,o))),this.state.activeTape.push(s)}keep(t){return t.kept=!0,t}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(t){let n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(n.name=t),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(t){let n=vB(t),r=new Set(n.map(i=>i.id));for(let i=0;i<this.state.activeScope.track.length;i++){let o=this.state.activeScope.track[i];!o.kept&&!r.has(o.id)&&o.dispose()}let a=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(i=>{!i.kept&&i.scopeId===a.id&&this.track(i)})}gradients(t,n,r,a=!1){if(se(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);let i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",t));se(i instanceof Da,()=>"The result y returned by f() must be a tensor.");let o=KBe(this.state.activeTape,n,i);if(!a&&o.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{let s={};s[i.id]=r??aLe(i.shape),XBe(s,o,l=>this.tidy(l),oLe);let u=n.map(l=>s[l.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(l=>{for(let c of l.saved)c.dispose()}),this.state.activeTape=null),{value:i,grads:u}})}customGrad(t){return se(bw(t),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{se(n.every(s=>s instanceof Da),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r,a={};n.forEach((s,u)=>{a[u]=s});let i=(s,u)=>(r=t(...n,u),se(r.value instanceof Da,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),se(bw(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),o=(s,u)=>{let l=r.gradFunc(s,u),c=Array.isArray(l)?l:[l];se(c.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),se(c.every(d=>d instanceof Da),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");let p={};return c.forEach((d,f)=>{p[f]=()=>d}),p};return this.runKernelFunc({forwardFunc:i,backwardsFunc:o,inputs:a})}}readSync(t){return this.state.tensorInfo.get(t).backend.readSync(t)}read(t){return this.state.tensorInfo.get(t).backend.read(t)}readToGPU(t,n){return this.state.tensorInfo.get(t).backend.readToGPU(t,n)}async time(t){let n=j0(),r=await this.backend.time(t);return r.wallMs=j0()-n,r}track(t){return this.state.activeScope!=null&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new K0;for(let t in this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}};Xh.nextTensorId=0;Xh.nextVariableId=0;function aLe(e){let t=uB(Xs(e),"float32");return oe.makeTensor(t,e,"float32")}function iLe(){let e=cB();if(e._tfengine==null){let t=new ww(e);e._tfengine=new Xh(t)}return zBe(e._tfengine.ENV),QBe(()=>e._tfengine),e._tfengine}var oe=iLe();function oLe(e,t){let n={a:e,b:t};return oe.runKernel(Ow,n)}function sLe(e,t){let n=e;if(uo(e))return t==="string"?[]:[e.length];if(hB(e)){let a=e.channels||"RGBA";return[e.height,e.width*a.length]}else if(mB(e))return[e.buffer.size/(t==null?4:yw(t))];if(!Array.isArray(e))return[];let r=[];for(;Array.isArray(n)||uo(n)&&t!=="string";)r.push(n.length),n=n[0];return Array.isArray(e)&&In().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&yB(e,r,[]),r}function yB(e,t,n){if(n=n||[],!Array.isArray(e)&&!uo(e)){se(t.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`);return}se(t.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${e.length} elements`),se(e.length===t[0],()=>`Element arr[${n.join("][")}] should have ${t[0]} elements, but has ${e.length} elements`);let r=t.slice(1);for(let a=0;a<e.length;++a)yB(e[a],r,n.concat(a))}function uM(e,t,n,r){if(e!=="string_or_numeric"){if(e==null)throw new Error("Expected dtype cannot be null.");if(e!=="numeric"&&e!==t||e==="numeric"&&t==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${e} tensor, but got ${t} tensor`)}}function ne(e,t,n,r="numeric"){if(e instanceof pe())return uM(r,e.dtype,t,n),e;let a=t2(e);if(a!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),uM(r,a,t,n),e==null||!uo(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string"){let u=e==null?"null":e.constructor.name;throw new Error(`Argument '${t}' passed to '${n}' must be a Tensor or TensorLike, but got '${u}'`)}let i=sLe(e,a);!uo(e)&&!Array.isArray(e)&&(e=[e]);let s=a!=="string"?dB(e,a):Kh(e,[],!0);return oe.makeTensor(s,i,a)}function bB(e,t,n,r="numeric"){if(!Array.isArray(e))throw new Error(`Argument ${t} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return e.map((i,o)=>ne(i,`${t}[${o}]`,n,r))}var uLe="__op";function ce(e){let t=Object.keys(e);if(t.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+uLe;let a=(...i)=>{oe.startScope(n);try{let o=r(...i);return Vw(o)&&console.error("Cannot return a Promise inside of tidy."),oe.endScope(o),o}catch(o){throw oe.endScope(null),o}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}function lLe(e,t){let n=ne(e,"x","cast");if(!FBe(t))throw new Error(`Failed to cast to unknown dtype ${t}`);if(t==="string"&&n.dtype!=="string"||t!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");let r={x:n},a={dtype:t};return oe.runKernel(Mw,r,a)}var kt=ce({cast_:lLe});function cLe(e,t){let n=ne(e,"a","mul"),r=ne(t,"b","mul");[n,r]=Br(n,r);let a={a:n,b:r};return oe.runKernel(xP,a)}var Je=ce({mul_:cLe});function pLe(e,t=0){let r={x:ne(e,"x","step")},a={alpha:t};return oe.runKernel(iB,r,a)}var n2=ce({step_:pLe});var wB={kernelName:TM,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Je(e,n2(kt(n,"float32"),-1))}}};function dLe(e,t){let n=ne(e,"a","floorDiv"),r=ne(t,"b","floorDiv");[n,r]=Br(n,r);let a={a:n,b:r};return oe.runKernel(nP,a)}var xB=ce({floorDiv_:dLe});function fLe(e,t){let n=ne(e,"a","div"),r=ne(t,"b","div");if([n,r]=Br(n,r),n.dtype==="int32"&&r.dtype==="int32")return xB(n,r);let a={a:n,b:r},i={};return oe.runKernel(XM,a,i)}var dr=ce({div_:fLe});function hLe(e){let n={x:ne(e,"x","neg")};return oe.runKernel(SP,n)}var ga=ce({neg_:hLe});function mLe(e,t,n,r){if(r==null)r=t2(e);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(mB(e)||hB(e)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return oe.backend.createTensorFromGPUData(e,t||n,r)}if(!uo(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){n1(t);let a=Xs(t),i=Xs(n);se(a===i,()=>`Based on the provided shape, [${t}], the tensor should have ${a} values but has ${i}`);for(let o=0;o<n.length;++o){let s=n[o],u=o===n.length-1?s!==Xs(t.slice(o)):!0;se(n[o]===t[o]||!u,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${t}). `)}}return!uo(e)&&!Array.isArray(e)&&(e=[e]),t=t||n,e=r!=="string"?dB(e,r):Kh(e,[],!0),oe.makeTensor(e,t,r)}function Pr(e,t){if((uo(e)&&t!=="string"||Array.isArray(e))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&uo(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return mLe(e,[],[],t)}function vLe(e){let n={x:ne(e,"x","sqrt","float32")};return oe.runKernel(jP,n)}var Ku=ce({sqrt_:vLe});function gLe(e){let t=ne(e,"x","square"),n={};return oe.runKernel("Square",{x:t},n)}var Yr=ce({square_:gLe});function yLe(e,t){let n=ne(e,"a","sub"),r=ne(t,"b","sub");[n,r]=Br(n,r);let a={a:n,b:r};return oe.runKernel(QP,a)}var aa=ce({sub_:yLe});var bLe={kernelName:EM,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>{let r=Yr(kt(n,"float32")),a=Ku(aa(Pr(1),r));return ga(dr(e,a))}}}};var wLe={kernelName:IM,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>{let r=Ku(aa(Yr(kt(n,"float32")),1));return dr(e,r)}}}};function Jr(e,t){let n=[];for(let r=0;r<t.length;r++){let a=e[e.length-r-1],i=t.length-r-1,o=t[i];(a==null||a===1&&o>1)&&n.unshift(i)}return n}function fr(e,t){let n=Math.max(e.length,t.length),r=new Array(n);for(let a=0;a<n;a++){let i=e[e.length-a-1];i==null&&(i=1);let o=t[t.length-a-1];if(o==null&&(o=1),i===1)r[n-a-1]=o;else if(o===1)r[n-a-1]=i;else if(i!==o){let s=`Operands could not be broadcast together with shapes ${e} and ${t}.`;throw Error(s)}else r[n-a-1]=i}return r}function xLe(e,t){let r={x:ne(e,"x","reshape","string_or_numeric")},a={shape:t};return oe.runKernel(FP,r,a)}var ve=ce({reshape_:xLe});function SLe(e,t=null,n=!1){let r=ne(e,"x","sum");r.dtype==="bool"&&(r=kt(r,"int32"));let a={x:r},i={axis:t,keepDims:n};return oe.runKernel(KP,a,i)}var Gt=ce({sum_:SLe});var kLe={kernelName:Ow,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=fr(n.shape,r.shape);return{a:()=>{let s=e,u=Jr(n.shape,a);return u.length>0&&(s=Gt(s,u)),ve(s,n.shape)},b:()=>{let s=e,u=Jr(r.shape,a);return u.length>0&&(s=Gt(s,u)),ve(s,r.shape)}}}};var NLe={kernelName:BPe,saveAllInputs:!0,gradFunc:(e,t)=>{let n={};return t.forEach((r,a)=>{n[a]=()=>e.clone()}),n}};function TLe(e){let n={x:ne(e,"x","zerosLike")};return oe.runKernel(aB,n)}var Kn=ce({zerosLike_:TLe});var ELe={kernelName:CM,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Kn(n)}}};var ILe={kernelName:DM,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Kn(n)}}};var CLe={kernelName:_M,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>dr(e,Ku(aa(Pr(1),Yr(kt(n,"float32")))))}}};function DLe(e,t){let n=ne(e,"a","add"),r=ne(t,"b","add");[n,r]=Br(n,r);let a={a:n,b:r};return oe.runKernel(Ow,a)}var so=ce({add_:DLe});var _Le={kernelName:AM,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>{let r=Ku(so(Pr(1),Yr(kt(n,"float32"))));return dr(e,r)}}}};var ALe={kernelName:OM,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=fr(n.shape,r.shape);return{a:()=>{let s=so(Yr(n),Yr(r)),u=Je(e,dr(r,s)),l=Jr(n.shape,a);return l.length>0&&(u=Gt(u,l)),ve(u,n.shape)},b:()=>{let s=so(Yr(n),Yr(r)),u=ga(Je(e,dr(n,s))),l=Jr(r.shape,a);return l.length>0&&(u=Gt(u,l)),ve(u,r.shape)}}}};var FLe={kernelName:FM,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>dr(e,so(Yr(kt(n,"float32")),1))}}};var RLe={kernelName:RM,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>dr(e,aa(Pr(1),Yr(kt(n,"float32"))))}}};function OLe(e,t,n,r,a,i,o="channelsLast"){let[s,u]=Yh(t),l;if(o==="channelsLast")l=[s,u,e[3],e[3]];else if(o==="channelsFirst")l=[s,u,e[1],e[1]];else throw new Error(`Unknown dataFormat ${o}`);return MLe(e,l,n,r,a,i,!1,o)}function MLe(e,t,n,r,a,i,o=!1,s="channelsLast"){let[u,l,c,p]=[-1,-1,-1,-1];if(s==="channelsLast")[u,l,c,p]=e;else if(s==="channelsFirst")[u,p,l,c]=e;else throw new Error(`Unknown dataFormat ${s}`);let[d,f,,h]=t,[m,v]=Yh(n),[g,y]=Yh(r),w=Cw(d,g),b=Cw(f,y),{padInfo:x,outHeight:k,outWidth:N}=LLe(a,l,c,m,v,w,b,i,s),E=o?h*p:h,C;return s==="channelsFirst"?C=[u,E,k,N]:s==="channelsLast"&&(C=[u,k,N,E]),{batchSize:u,dataFormat:s,inHeight:l,inWidth:c,inChannels:p,outHeight:k,outWidth:N,outChannels:E,padInfo:x,strideHeight:m,strideWidth:v,filterHeight:d,filterWidth:f,effectiveFilterHeight:w,effectiveFilterWidth:b,dilationHeight:g,dilationWidth:y,inShape:e,outShape:C,filterShape:t}}function PLe(e,t,n,r,a){r==null&&(r=BLe(e,t,n));let i=e[0],o=e[1],s=X0((i-t+2*r)/n+1,a),u=X0((o-t+2*r)/n+1,a);return[s,u]}function BLe(e,t,n,r=1){let a=Cw(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function Yh(e){return typeof e=="number"?[e,e,e]:e.length===2?[e[0],e[1],1]:e}function Cw(e,t){return t<=1?e:e+(e-1)*(t-1)}function LLe(e,t,n,r,a,i,o,s,u){let l,c,p;if(typeof e=="number"){l={top:e,bottom:e,left:e,right:e,type:e===0?"VALID":"NUMBER"};let f=PLe([t,n],i,r,e,s);c=f[0],p=f[1]}else if(e==="same"){c=Math.ceil(t/r),p=Math.ceil(n/a);let d=Math.max(0,(c-1)*r+i-t),f=Math.max(0,(p-1)*a+o-n),h=Math.floor(d/2),m=d-h,v=Math.floor(f/2),g=f-v;l={top:h,bottom:m,left:v,right:g,type:"SAME"}}else if(e==="valid")l={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-i+1)/r),p=Math.ceil((n-o+1)/a);else if(typeof e=="object"){let d=u==="channelsLast"?e[1][0]:e[2][0],f=u==="channelsLast"?e[1][1]:e[2][1],h=u==="channelsLast"?e[2][0]:e[3][0],m=u==="channelsLast"?e[2][1]:e[3][1];l={top:d,bottom:f,left:h,right:m,type:d===0&&f===0&&h===0&&m===0?"VALID":"EXPLICIT"},c=X0((t-i+d+f)/r+1,s),p=X0((n-o+h+m)/a+1,s)}else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:l,outHeight:c,outWidth:p}}function X0(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error(`Unknown roundingMode ${t}`)}}function Jh(e){let[t,n,r]=Yh(e);return t===1&&n===1&&r===1}function ud(e,t){return Jh(e)||Jh(t)}function Y0(e){return Yh(e).every(t=>t>0)}function Bo(e,t,n){if(n!=null){if(typeof t=="string")throw Error(`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);if(typeof t=="number")se(jh(t),()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);else if(typeof t=="object")t.forEach(r=>{r.forEach(a=>{se(jh(a),()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${a}.`)})});else throw Error(`Error in ${e}: Unknown padding parameter: ${t}`)}}function zLe(e,t,n,r,a,i){let o=ne(e,"dy","avgPool3dGrad"),s=ne(t,"input","avgPool3dGrad"),u=o,l=s,c=!1;s.rank===4&&(c=!0,u=ve(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),l=ve(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),se(u.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),se(l.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${l.rank}.`),Bo("avgPool3dGrad",a,i);let p={dy:u,input:l},d={filterSize:n,strides:r,pad:a,dimRoundingMode:i},f=oe.runKernel(WPe,p,d);return c?ve(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}var $Le=ce({avgPool3dGrad_:zLe});var VLe={kernelName:VPe,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{filterSize:a,strides:i,pad:o,dimRoundingMode:s}=n;return{x:()=>$Le(e,r,a,i,o,s)}}};function WLe(e,t,n,r,a){let i=ne(e,"dy","avgPoolGrad"),o=ne(t,"input","avgPoolGrad");se(o.rank===i.rank,()=>`Rank of input (${o.rank}) does not match rank of dy (${i.rank})`);let s=o,u=i,l=!1;o.rank===3&&(l=!0,s=ve(o,[1,o.shape[0],o.shape[1],o.shape[2]]),u=ve(i,[1,i.shape[0],i.shape[1],i.shape[2]])),se(u.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${u.rank}.`),se(s.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${s.rank}.`);let c={dy:u,input:s},p={filterSize:n,strides:r,pad:a},d=oe.runKernel($Pe,c,p);return l?ve(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var ULe=ce({avgPoolGrad_:WLe});var GLe={kernelName:MM,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{filterSize:a,strides:i,pad:o}=n;return{x:()=>ULe(e,r,a,i,o)}}};function qLe(e,t,n=!1,r=!1){let a=ne(e,"a","matMul"),i=ne(t,"b","matMul");[a,i]=Br(a,i);let o={a,b:i},s={transposeA:n,transposeB:r};return oe.runKernel(PM,o,s)}var Si=ce({matMul_:qLe});var HLe={kernelName:PM,inputsToSave:["a","b"],gradFunc:(e,t,n)=>{let[r,a]=t,{transposeA:i,transposeB:o}=n;return!i&&!o?{a:()=>Si(e,a,!1,!0),b:()=>Si(r,e,!0,!1)}:!i&&o?{a:()=>Si(e,a,!1,!1),b:()=>Si(e,r,!0,!1)}:i&&!o?{a:()=>Si(a,e,!1,!0),b:()=>Si(r,e,!1,!1)}:{a:()=>Si(a,e,!0,!0),b:()=>Si(e,r,!0,!0)}}};function jLe(e,t,n){let r=ne(e,"x","spaceToBatchND");se(r.rank>=1+t.length,()=>`input rank ${r.rank} should be > than [blockShape] ${t.length}`),se(n.length===t.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${t.length}`),se(r.shape.reduce((o,s,u)=>u>0&&u<=t.length?o&&(s+n[u-1][0]+n[u-1][1])%t[u-1]===0:o,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${t.toString()}`);let a={x:r},i={blockShape:t,paddings:n};return oe.runKernel(XP,a,i)}var Gw=ce({spaceToBatchND_:jLe});var KLe={kernelName:BM,gradFunc:(e,t,n)=>{let{blockShape:r,crops:a}=n;return{x:()=>Gw(e,r,a)}}};var XLe={kernelName:UPe,gradFunc:(e,t,n)=>{let r=n,a=r.inputShape,i=r.shape,o=Array.from(i);for(let u=a.length-1;u>=0;u--)if(a[u]===i[u])o[u]=1;else if(a[u]!==1)throw new Error(`broadcastTo(): [${a}] cannot be broadcast to [${i}].`);let s=[];for(let u=0;u<o.length;u++)o[u]>1&&s.push(u);return{x:()=>Gt(e,s,!0)}}};var YLe={kernelName:Mw,gradFunc:e=>({x:()=>e.clone()})};var JLe={kernelName:LM,gradFunc:e=>({x:()=>Kn(e)})};function ZLe(e,t){let n=ne(e,"a","greaterEqual","string_or_numeric"),r=ne(t,"b","greaterEqual","string_or_numeric");[n,r]=Br(n,r),fr(n.shape,r.shape);let a={a:n,b:r};return oe.runKernel(iP,a)}var r2=ce({greaterEqual_:ZLe});function QLe(e,t){let n=ne(e,"a","lessEqual","string_or_numeric"),r=ne(t,"b","lessEqual","string_or_numeric");[n,r]=Br(n,r),fr(n.shape,r.shape);let a={a:n,b:r};return oe.runKernel(lBe,a)}var a2=ce({lessEqual_:QLe});function eze(e,t){let n=ne(e,"a","logicalAnd","bool"),r=ne(t,"b","logicalAnd","bool");fr(n.shape,r.shape);let a={a:n,b:r};return oe.runKernel(cBe,a)}var Zh=ce({logicalAnd_:eze});function tze(e){let n={x:ne(e,"x","clone","string_or_numeric")};return oe.runKernel(Pw,n)}var SB=ce({clone_:tze});function nze(e,t){let n=ne(e,"broadcastTo","x"),r=n.shape;if(n1(t),t.length<n.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${n.rank}.`);if(t.length>n.rank){let l=n.shape.slice();for(;l.length<t.length;)l.unshift(1);n=ve(n,l)}let a=n.shape,i=Array.from(t);for(let l=t.length-1;l>=0;l--)if(a[l]===t[l])i[l]=1;else if(n.shape[l]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${t}].`);if(i.map((l,c)=>l>1?c:-1).filter(l=>l>=0).length===0)return SB(n);let s={x:n},u={reps:i};return oe.runKernel(Bw,s,u)}var q0=ce({broadcastTo_:nze});function rze(e,t,n){let r=ne(t,"a","where"),a=ne(n,"b","where"),i=ne(e,"condition","where","bool"),o=fr(fr(i.shape,r.shape),a.shape),s=q0(i,o),u=q0(r,o),l=q0(a,o),c={condition:s,t:u,e:l};return oe.runKernel(zP,c)}var Ys=ce({where_:rze});var aze={kernelName:zM,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{clipValueMin:a,clipValueMax:i}=n;return{x:()=>Ys(Zh(r2(r,a),a2(r,i)),e,Kn(e))}}};var ize={kernelName:$M,inputsToSave:["x"],gradFunc:wB.gradFunc};function oze(e,t,n=0){let a={x:ne(e,"x","split")},i={numOrSizeSplits:t,axis:n};return oe.runKernel(YP,a,i)}var J0=ce({split_:oze});var sze={kernelName:VM,saveAllInputs:!0,gradFunc:(e,t,n)=>{let r=t.map(u=>u.shape),{axis:a}=n,i=hs(a,t[0].shape)[0],o=r.map(u=>u[i]);return J0(e,o,i).map(u=>()=>u)}};function uze(e,t,n,r,a,i="NHWC",o){let s=e;e.rank===3&&(s=ve(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let u=t;u.rank===3&&(u=ve(t,[1,t.shape[0],t.shape[1],t.shape[2]])),se(s.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${s.shape}.`),se(u.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${u.shape}.`),se(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);let l=i==="NHWC"?s.shape[3]:s.shape[1],c=i==="NHWC"?u.shape[3]:u.shape[1];se(l===n[2],()=>`Error in conv2dDerFilter: depth of input ${l}) must match input depth in filter (${n[2]}.`),se(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`),Bo("conv2dDerFilter",a,o);let p={x:s,dy:u},d={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,filterShape:n};return oe.runKernel(qPe,p,d)}var kB=ce({conv2DBackpropFilter_:uze});function lze(e,t,n,r,a,i="NHWC",o){se(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let s=e,u=t,l=!1;t.rank===3&&(l=!0,u=ve(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),se(s.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${s.length}.`),se(u.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${u.rank}`),se(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);let c=i==="NHWC"?s[3]:s[1],p=i==="NHWC"?u.shape[3]:u.shape[1];se(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`),se(p===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${p}) must match output depth for filter ${n.shape[3]}.`),Bo("conv2dDerInput",a,o);let d={dy:u,filter:n},f={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,inputShape:s},h=oe.runKernel(UM,d,f);return l?ve(h,[h.shape[1],h.shape[2],h.shape[3]]):h}var NB=ce({conv2DBackpropInput_:lze});var cze={kernelName:WM,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{let[r,a]=t,{dilations:i,strides:o,pad:s,dataFormat:u}=n;return se(Jh(i),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`),{x:()=>NB(r.shape,e,a,o,s,u),filter:()=>kB(r,e,a.shape,o,s,u)}}};function pze(e,t,n,r,a="NHWC",i=[1,1],o){let s=ne(e,"x","conv2d","float32"),u=ne(t,"filter","conv2d","float32"),l=s,c=!1;s.rank===3&&(c=!0,l=ve(s,[1,s.shape[0],s.shape[1],s.shape[2]])),se(l.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${l.rank}.`),se(u.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${u.rank}.`),Bo("conv2d",r,o);let p=a==="NHWC"?l.shape[3]:l.shape[1];se(p===u.shape[2],()=>`Error in conv2d: depth of input (${p}) must match input depth for filter ${u.shape[2]}.`),se(ud(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),se(Y0(i),()=>"Error in conv2D: Dilated rates should be larger than 0."),se(Y0(n),()=>"Error in conv2D: Strides should be larger than 0.");let d={x:l,filter:u},f={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},h=oe.runKernel(WM,d,f);return c?ve(h,[h.shape[1],h.shape[2],h.shape[3]]):h}var i2=ce({conv2d_:pze});var dze={kernelName:UM,inputsToSave:["dy","filter"],gradFunc:(e,t,n)=>{let[r,a]=t,{strides:i,pad:o,dataFormat:s,dimRoundingMode:u}=n;return{dy:()=>i2(e,a,i,o,s,1,u),filter:()=>kB(e,r,a.shape,i,o,s,u)}}};function fze(e,t,n,r,a){let i=e;e.rank===4&&(i=ve(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let o=t;o.rank===4&&(o=ve(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),se(i.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${i.shape}.`),se(o.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${o.shape}.`),se(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),se(i.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${i.shape[4]}) must match input depth in filter (${n[3]}.`),se(o.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${o.shape[4]}) must match output depth for filter (${n[4]}).`);let s={x:i,dy:o},u={strides:r,pad:a,filterShape:n};return oe.runKernel(jPe,s,u)}var hze=ce({conv3DBackpropFilter_:fze});function mze(e,t,n,r,a){se(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let i=e,o=t,s=!1;t.rank===4&&(s=!0,o=ve(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),i=[1,e[0],e[1],e[2],e[3]]);let u=i[4],l=o.shape[4];se(i.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${i.length}.`),se(o.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),se(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),se(u===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[3]}.`),se(l===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${l}) must match output depth for filter ${n.shape[4]}.`);let c={dy:o,filter:n},p={pad:a,strides:r,inputShape:i},d=oe.runKernel(KPe,c,p);return s?ve(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}var vze=ce({conv3DBackpropInput_:mze});var gze={kernelName:HPe,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{let{dilations:r,strides:a,pad:i}=n;se(Jh(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);let[o,s]=t;return{x:()=>vze(o.shape,e,s,a,i),filter:()=>hze(o,e,s.shape,a,i)}}};function yze(e){let n={x:ne(e,"x","sin","float32")};return oe.runKernel(WP,n)}var TB=ce({sin_:yze});var bze={kernelName:GM,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Je(ga(TB(kt(n,"float32"))),e)}}};function wze(e){let n={x:ne(e,"x","sinh")};return oe.runKernel(UP,n)}var EB=ce({sinh_:wze});var xze={kernelName:qM,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Je(EB(kt(n,"float32")),e)}}};function Sze(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function kze(e,t,n){let r=e.length+t.length,a=[],i=0,o=0;for(let s=0;s<r;s++)n.indexOf(s)===-1?a.push(e[i++]):a.push(t[o++]);return a}function Nze(e,t){let n=[],r=e.length;for(let i=0;i<r;i++)t.indexOf(i)===-1&&n.push(e[i]);let a=t.map(i=>e[i]);return[n,a]}function Z0(e,t){let n=t.map(r=>1);return kze(e,n,t)}function IB(e,t){if(Sze(e,t))return null;let n=[];for(let r=0;r<t;++r)e.indexOf(r)===-1&&n.push(r);return e.forEach(r=>n.push(r)),n}function qw(e){return e.map((t,n)=>[n,t]).sort((t,n)=>t[1]-n[1]).map(t=>t[0])}function Tze(e,t=0,n=!1,r=!1){let i={x:ne(e,"x","cumsum")},o={axis:t,exclusive:n,reverse:r};return oe.runKernel(HM,i,o)}var CB=ce({cumsum_:Tze});function Eze(e){In().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}eLe(Eze);function Ize(e,t){return oe.tidy(e,t)}function lM(e){vB(e).forEach(n=>n.dispose())}function Cze(e,t){let n=ne(e,"real","complex"),r=ne(t,"imag","complex");DBe(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);let a={real:n,imag:r};return oe.runKernel(GPe,a)}var ad=ce({complex_:Cze});function Dze(e){let n={input:ne(e,"input","imag")};return oe.runKernel(sBe,n)}var Hw=ce({imag_:Dze});function _ze(e){let n={input:ne(e,"input","real")};return oe.runKernel(bBe,n)}var Q0=ce({real_:_ze});function Aze(e,t,n){let r=ne(e,"x","transpose");if(t==null&&(t=r.shape.map((o,s)=>s).reverse()),se(r.rank===t.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${t}.`),t.forEach(o=>{se(o>=0&&o<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${t}`)}),r.rank<=1)return r.clone();let a={x:r},i={perm:t};return r.dtype==="complex64"?Ize(()=>{let o=Q0(r),s=Hw(r);return o=oe.runKernel(W0,{x:o},i),s=oe.runKernel(W0,{x:s},i),n&&(s=ga(s)),ad(o,s)}):oe.runKernel(W0,a,i)}var gc=ce({transpose_:Aze});var Fze={kernelName:HM,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{axis:a,exclusive:i,reverse:o}=n;return{x:()=>{let s=IB([a],r.rank),u=CB(e,a,i,!o);return s!=null&&(u=gc(u,s)),u}}}};function Rze(e,t,n,r,a,i=[1,1],o){let s=e;e.rank===3&&(s=ve(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let u=t;u.rank===3&&(u=ve(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l={x:s,dy:u},c={strides:r,pad:a,dimRoundingMode:o,dilations:i,filterShape:n};return oe.runKernel(JPe,l,c)}var Oze=ce({depthwiseConv2dNativeBackpropFilter_:Rze});function Mze(e,t,n,r,a,i=[1,1],o){let s=t,u=!1;t.rank===3&&(u=!0,s=ve(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l={dy:s,filter:n},c={strides:r,pad:a,dimRoundingMode:o,dilations:i,inputShape:e},p=oe.runKernel(ZPe,l,c);return u?ve(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var Pze=ce({depthwiseConv2dNativeBackpropInput_:Mze});var Bze={kernelName:jM,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{let{dilations:r,strides:a,pad:i,dimRoundingMode:o}=n,s=r??[1,1];se(Jh(s),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${s}'`);let[u,l]=t;return se(u.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${u.rank}.`),se(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${l.rank}.`),se(u.shape[3]===l.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${u.shape[3]}) must match the inChannels dimension in filter ${l.shape[2]}.`),se(ud(a,s),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${a} and dilations '${s}'.`),Bo("depthwiseConv2d",i,o),{x:()=>Pze(u.shape,e,l,a,i,s,o),filter:()=>Oze(u,e,l.shape,a,i,s,o)}}};var Lze={kernelName:KM,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{let[r,a]=t,i={x:r,filter:a,dy:e},o={x:r,filter:a,dy:e};return{x:()=>oe.runKernel(QPe,i,n),filter:()=>oe.runKernel(eBe,o,n)}}};var zze={kernelName:YM,outputsToSave:[!0],gradFunc:(e,t)=>{let[n]=t,r={dy:e,y:n};return{x:()=>oe.runKernel(tBe,r)}}};function $ze(e){let n={x:ne(e,"x","exp")};return oe.runKernel(ZM,n)}var Xu=ce({exp_:$ze});var Vze={kernelName:JM,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t,r=Je(Xu(ga(Yr(n))),2/Math.sqrt(Math.PI));return{x:()=>Je(e,r)}}};var Wze={kernelName:ZM,outputsToSave:[!0],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Je(e,n)}}};var Uze={kernelName:QM,inputsToSave:["input"],gradFunc:(e,t)=>{let[n]=t;return{input:()=>ve(e,n.shape)}}};var Gze={kernelName:eP,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Je(e,Xu(n))}}};var qze={kernelName:tP,gradFunc:e=>({x:()=>Kn(e)})};var Hze={kernelName:nP,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=fr(n.shape,r.shape);return{a:()=>{let s=dr(e,kt(r,"float32")),u=Jr(n.shape,a);return u.length>0?ve(Gt(s,u),n.shape):s},b:()=>{let s=Je(e,kt(n,"float32")),u=Jr(r.shape,a);u.length>0&&(s=ve(Gt(s,u),r.shape));let l=Yr(r);return ga(dr(s,kt(l,"float32")))}}}};function jze(e){let n={x:ne(e,"x","rsqrt","float32")};return oe.runKernel(LP,n)}var DB=ce({rsqrt_:jze});function Kze(e,t){let n=ne(e,"x","tile","string_or_numeric");se(n.rank===t.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${t}.`);let r={x:n},a={reps:t};return oe.runKernel(Bw,r,a)}var _B=ce({tile_:Kze});var Xze={kernelName:rP,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,t,n)=>{let{varianceEpsilon:r}=n,[a,i,o,s]=t,u=s??Pr(1),l=Jr(i.shape,a.shape),c=[];if(i.rank===1){for(let b=0;b<a.shape.length-1;++b)c.push(a.shape[b]);c.push(1)}let p=aa(a,i),d=Je(e,u),f=DB(so(o,Pr(r))),h=Je(Je(Je(f,f),f),Pr(-.5));return{x:()=>i.rank===1?ve(Je(Je(e,_B(ve(f,[1,1,1,i.shape[0]]),c)),u),a.shape):ve(Je(Je(e,f),u),a.shape),mean:()=>{let b=Je(Je(f,Pr(-1)),d);return i.rank===1&&(b=Gt(b,l)),ve(b,i.shape)},variance:()=>{let b=Je(Je(h,p),d);return i.rank===1&&(b=Gt(b,l)),ve(b,i.shape)},scale:()=>{let b=Je(p,f),x=Je(e,b);return i.rank===1&&(x=Gt(x,l)),ve(x,i.shape)},offset:()=>{let b=e;return i.rank===1&&(b=Gt(b,l)),ve(b,i.shape)}}}};function Yze(e,t=0){let n=bB(e,"tensors","stack","string_or_numeric");se(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&se(t<=n[0].rank,()=>"Axis must be <= rank of the tensor");let r=n,a={axis:t};return oe.runKernel(TP,r,a)}var jw=ce({stack_:Yze});function Jze(e,t,n){let r=ne(e,"x","unsortedSegmentSum"),a=ne(t,"segmentIds","unsortedSegmentSum","int32");se(jh(n),()=>"numSegments must be of dtype int");let i={x:r,segmentIds:a},o={numSegments:n};return oe.runKernel(rB,i,o)}var AB=ce({unsortedSegmentSum_:Jze});var Zze={kernelName:aP,inputsToSave:["x","indices"],gradFunc:(e,t,n)=>{let[r,a]=t,{axis:i,batchDims:o}=n,s=hs(i,r.shape)[0],u=(l,c,p)=>()=>{let d=l.shape,f=c.size,h=d.slice(0,s),m=h.length,v=d.slice(i,d.length).slice(1),g=v.length,y=cM(0,m),w=cM(m+1,m+1+g),b=pM([h,[f],v]),x=ve(p,b),k=ve(c,[f]),N=pM([[m],y,w]),E=gc(x,N),C=AB(E,k,l.shape[s]),R=qw(N);return C=gc(C,R),C};if(o===1){let l=r.shape[0],c=r.split(l,0);return{x:()=>jw(c.map((f,h)=>u(f,a.slice(h,1),e.slice(h,1))())).reshape(r.shape),indices:()=>a}}else return{x:u(r,a,e),indices:()=>a}}};function cM(e,t){let n=[];for(let r=e;r<t;++r)n.push(r);return n}function pM(e){let t=[];for(let n=0;n<e.length;++n)for(let r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var Qze={kernelName:iP,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t;return{a:()=>Kn(n),b:()=>Kn(r)}}};var e$e={kernelName:Pw,gradFunc:e=>({x:()=>kt(e,"float32")})};var t$e={kernelName:oP,gradFunc:e=>({x:()=>Kn(e)})};var n$e={kernelName:sP,gradFunc:e=>({x:()=>Kn(e)})};var r$e={kernelName:uP,gradFunc:e=>({x:()=>Kn(e)})};function a$e(e,t){let n=ne(e,"a","greater","string_or_numeric"),r=ne(t,"b","greater","string_or_numeric");[n,r]=Br(n,r),fr(n.shape,r.shape);let a={a:n,b:r};return oe.runKernel(iBe,a)}var ld=ce({greater_:a$e});var i$e={kernelName:lP,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{alpha:a}=n,i=ld(r,0);return{x:()=>Ys(i,e,Je(e,a))}}};var o$e={kernelName:pP,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>dr(e,so(n,1))}}};var s$e={kernelName:cP,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>dr(e,kt(n,"float32"))}}};var u$e={kernelName:fBe,inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r]=t,{axis:a}=n;return{logits:()=>{let o=Xu(r);return aa(e,Je(Gt(e,a,!0),o))}}}};function l$e(e,t,n,r=5,a=1,i=1,o=.5){let s={x:e,y:t,dy:n},u={depthRadius:r,bias:a,alpha:i,beta:o};return oe.runKernel(hBe,s,u)}var c$e=ce({localResponseNormalizationBackprop_:l$e});var p$e={kernelName:dP,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r,a]=t,{depthRadius:i,bias:o,alpha:s,beta:u}=n;return{x:()=>c$e(r,a,e,i,o,s,u)}}};function d$e(e,t){let n=ne(e,"a","equal","string_or_numeric"),r=ne(t,"b","equal","string_or_numeric");[n,r]=Br(n,r),fr(n.shape,r.shape);let a={a:n,b:r};return oe.runKernel(nBe,a)}var Kw=ce({equal_:d$e});function FB(e,t,n,r){return t.rank<n.rank&&(t=ve(t,Z0(t.shape,r))),e.rank<n.rank&&(e=ve(e,Z0(e.shape,r))),{x:()=>Je(e,kt(Kw(n,t),e.dtype))}}var dM={kernelName:fP,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let r=n,{reductionIndices:a}=r,i=t[0],o=t[1],s=hs(a,i.shape),u=FB(e,o,i,s);return{x:()=>u.x()}}};function f$e(e,t){let n=ne(e,"a","less","string_or_numeric"),r=ne(t,"b","less","string_or_numeric");[n,r]=Br(n,r),fr(n.shape,r.shape);let a={a:n,b:r};return oe.runKernel(uBe,a)}var RB=ce({less_:f$e});var h$e={kernelName:hP,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t;return{a:()=>Je(e,kt(r2(n,r),"float32")),b:()=>Je(e,kt(RB(n,r),"float32"))}}};function m$e(e,t,n,r,a,i,o){let s=ne(e,"dy","maxPool3dGrad"),u=ne(t,"input","maxPool3dGrad"),l=ne(n,"output","maxPool3dGrad"),c=s,p=u,d=l,f=!1;u.rank===4&&(f=!0,c=ve(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),p=ve(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),d=ve(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),se(c.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`),se(p.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${p.rank}.`),se(d.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${d.rank}.`),Bo("maxPool3dGrad",i,o);let h={dy:c,input:p,output:d},m={filterSize:r,strides:a,pad:i,dimRoundingMode:o},v=oe.runKernel(gBe,h,m);return f?ve(v,[v.shape[1],v.shape[2],v.shape[3],v.shape[4]]):v}var v$e=ce({maxPool3dGrad_:m$e});var g$e={kernelName:vBe,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r,a]=t,{filterSize:i,strides:o,pad:s,dimRoundingMode:u}=n;return{x:()=>v$e(e,r,a,i,o,s,u)}}};function y$e(e,t,n,r,a,i,o){let s=ne(e,"dy","maxPoolGrad"),u=ne(t,"input","maxPoolGrad"),l=ne(n,"output","maxPoolGrad");se(u.rank===s.rank,()=>`Rank of input (${u.rank}) does not match rank of dy (${s.rank})`),se(s.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${s.rank}.`),se(u.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${u.rank}.`),Bo("maxPoolGrad",i,o);let c={dy:s,input:u,output:l},p={filterSize:r,strides:a,pad:i,dimRoundingMode:o};return oe.runKernel(mBe,c,p)}var b$e=ce({maxPoolGrad_:y$e});var w$e={kernelName:mP,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r,a]=t,{filterSize:i,strides:o,pad:s}=n;return{x:()=>b$e(e,r,a,i,o,s)}}};function Qh(e,t="float32"){if(n1(e),t==="complex64"){let r=Qh(e,"float32"),a=Qh(e,"float32");return ad(r,a)}let n=$w(Xs(e),t);return oe.makeTensor(n,e,t)}function o2(e,t="float32"){if(n1(e),t==="complex64"){let r=o2(e,"float32"),a=Qh(e,"float32");return ad(r,a)}let n=uB(Xs(e),t);return oe.makeTensor(n,e,t)}var x$e={kernelName:vP,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{axis:a}=n,i=hs(a,r.shape),s=Nze(r.shape,i)[1],u=Xs(s);return{x:()=>{let c=r.shape.slice();i.forEach(f=>{c[f]=1});let p=ve(e,c);return dr(Je(p,o2(r.shape,"float32")),u)}}}};var S$e={kernelName:gP,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let r=n,{axis:a}=r,[i,o]=t,s=hs(a,i.shape),u=FB(e,o,i,s);return{x:()=>u.x()}}};var k$e={kernelName:yP,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t;return{a:()=>Je(e,kt(a2(n,r),"float32")),b:()=>Je(e,kt(ld(n,r),"float32"))}}};function N$e(e,t,n){let r=ne(e,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");let a={x:r},i={begin:t,size:n};return oe.runKernel(VP,a,i)}var fs=ce({slice_:N$e});var T$e={kernelName:bP,inputsToSave:["x"],gradFunc:(e,t,n)=>{let r=t[0],{paddings:a}=n,i=a.map(o=>o[0]);return{x:()=>fs(e,i,r.shape)}}};function E$e(e){let n={x:ne(e,"x","floor","float32")};return oe.runKernel(tP,n)}var OB=ce({floor_:E$e});var I$e={kernelName:wP,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=fr(n.shape,r.shape);return{a:()=>{let s=Jr(n.shape,a);return s.length>0?ve(Gt(e,s),n.shape):e},b:()=>{let s=Je(e,ga(OB(dr(n,r)))),u=Jr(r.shape,a);return u.length>0?ve(Gt(s,u),r.shape):s}}}};var C$e={kernelName:xP,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=fr(n.shape,r.shape);return{a:()=>{let s=Je(e,kt(r,"float32")),u=Jr(n.shape,a);return u.length>0?ve(Gt(s,u),n.shape):s},b:()=>{let s=Je(e,kt(n,"float32")),u=Jr(r.shape,a);return u.length>0?ve(Gt(s,u),r.shape):s}}}};var D$e={kernelName:SP,gradFunc:e=>({x:()=>ga(e)})};var _$e={kernelName:NP,inputsToSave:["indices"],gradFunc:(e,t)=>{let n=t[0];return{indices:()=>Qh(n.shape,"float32")}}};var A$e={kernelName:kP,gradFunc:e=>({x:()=>Kn(e)})};function F$e(e,t=0){let n=ne(e,"x","unstack","string_or_numeric");se(t>=-n.shape.length&&t<n.shape.length,()=>`Axis = ${t} is not in [-${n.shape.length}, ${n.shape.length})`);let r={value:n},a={axis:t};return oe.runKernel(nB,r,a)}var MB=ce({unstack_:F$e});var R$e={kernelName:TP,saveAllInputs:!0,gradFunc:(e,t,n)=>{let{axis:r}=n;return MB(e,r).map(i=>()=>i)}};var fM={kernelName:EP,inputsToSave:["x"],gradFunc:(e,t,n)=>{let r=t[0],{paddings:a}=n,i=a.map(o=>o[0]);return{x:()=>fs(e,i,r.shape)}}};function O$e(e){let n={x:ne(e,"x","log","float32")};return oe.runKernel(cP,n)}var s2=ce({log_:O$e});function M$e(e,t){let n=ne(e,"base","pow"),r=ne(t,"exp","pow");[n,r]=Br(n,r);let a={a:n,b:r};return oe.runKernel(IP,a)}var u2=ce({pow_:M$e});var P$e={kernelName:IP,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,t)=>{let[n,r,a]=t,i=n,o=r,s=fr(i.shape,o.shape);return{a:()=>{let c=kt(o,"float32"),p=Je(e,Je(c,u2(i,aa(c,Pr(1))))),d=Jr(i.shape,s);return d.length>0&&(p=Gt(p,d)),ve(p,i.shape)},b:()=>{let c=ld(i,0),p=Ys(c,s2(i),Kn(i)),d=Je(e,Je(a,p)),f=Jr(o.shape,s);return f.length>0&&(d=Gt(d,f)),ve(d,o.shape)}}}};var B$e={kernelName:CP,inputsToSave:["x","alpha"],gradFunc:(e,t)=>{let[n,r]=t,a=ld(n,0);return{x:()=>Ys(a,e,Je(e,r)),alpha:()=>{let i=Ys(a,Kn(e),Je(e,n)),o=Jr(r.shape,e.shape);return o.length>0&&(i=Gt(i,o)),ve(i,r.shape)}}}};function L$e(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var _a=In();_a.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});_a.registerFlag("IS_BROWSER",()=>L$e());_a.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");_a.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));_a.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));_a.registerFlag("PROD",()=>!1);_a.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>_a.getBool("DEBUG"));_a.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);_a.registerFlag("IS_TEST",()=>!1);_a.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>_a.getBool("DEBUG"));_a.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);_a.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);_a.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);var yc=class e{static join(t){return new e(t).slice()}constructor(t){if(this.shards=[],this.previousShardIndex=0,t==null||(t instanceof Array||(t=[t]),t=t.map(r=>uo(r)?r.buffer:r),t.length===0))return;this.bufferUniformSize=t[0].byteLength;let n=0;for(let r=0;r<t.length;r++){let a=t[r];r!==t.length-1&&a.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);let i=n+a.byteLength;this.shards.push({buffer:a,start:n,end:i}),n=i}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(t=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(t=isNaN(Number(t))?0:t,n=isNaN(Number(n))?0:n,t=Math.max(0,t),n=Math.min(this.byteLength,n),n<=t)return new ArrayBuffer(0);let r=this.findShardForByte(t);if(r===-1)throw new Error(`Could not find start shard for byte ${t}`);let a=n-t,i=new ArrayBuffer(a),o=new Uint8Array(i),s=0;for(let u=r;u<this.shards.length;u++){let l=this.shards[u],p=t+s-l.start,d=s,h=Math.min(n,l.end)-l.start,m=new Uint8Array(l.buffer,p,h-p);if(o.set(m,d),s+=m.length,n<l.end)break}return i}findShardForByte(t){if(this.shards.length===0||t<0||t>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(t/this.bufferUniformSize),this.previousShardIndex;function n(a){return t<a.start?-1:t>=a.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;let r=z$e(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}};function z$e(e,t){let n=0,r=e.length;for(;n<=r;){let a=Math.floor((r-n)/2)+n,i=t(e[a]);if(i===0)return a;i<0?r=a:n=a+1}return-1}var Xw=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function hM(e){return Xw?Buffer.byteLength(e,"utf8"):new Blob([e]).size}function $$e(e){if(Xw)return Buffer.from(e).toString("base64");let t=new Uint8Array(e),n="";for(let r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function V$e(e){if(Xw){let r=Buffer.from(e,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}let t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;++r)n.set([t.charCodeAt(r)],r);return n.buffer}function PB(e,t){let n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return e.signature!=null&&(n.signature=e.signature),e.userDefinedMetadata!=null&&(n.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(n.modelInitializer=e.modelInitializer),e.initializerSignature!=null&&(n.initializerSignature=e.initializerSignature),e.trainingConfig!=null&&(n.trainingConfig=e.trainingConfig),n}function W$e(e,t,n){let r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(e.trainingConfig!=null&&(r.trainingConfig=e.trainingConfig),e.weightsManifest!=null){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return e.signature!=null&&(r.signature=e.signature),e.userDefinedMetadata!=null&&(r.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(r.modelInitializer=e.modelInitializer),e.initializerSignature!=null&&(r.initializerSignature=e.initializerSignature),r}async function U$e(e,t){let n,r;return e.weightsManifest!=null&&([n,r]=await t(e.weightsManifest)),W$e(e,n,r)}function l2(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:e.modelTopology==null?0:hM(JSON.stringify(e.modelTopology)),weightSpecsBytes:e.weightSpecs==null?0:hM(JSON.stringify(e.weightSpecs)),weightDataBytes:e.weightData==null?0:new yc(e.weightData).byteLength}}function mM(e){let t=[];for(let n of e)t.push(...n.weights);return t}var Js=class e{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return e.instance==null&&(e.instance=new e),e.instance}static registerSaveRouter(t){e.getInstance().saveRouters.push(t)}static registerLoadRouter(t){e.getInstance().loadRouters.push(t)}static getSaveHandlers(t){return e.getHandlers(t,"save")}static getLoadHandlers(t,n){return e.getHandlers(t,"load",n)}static getHandlers(t,n,r){let a=[];return(n==="load"?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach(o=>{let s=o(t,r);s!==null&&a.push(s)}),a}};var G$e="tensorflowjs",q$e=1,Hh="models_store",H0="model_info_store";function H$e(){if(!In().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");let e=typeof window>"u"?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function j$e(e){let t=e.result;t.createObjectStore(Hh,{keyPath:"modelPath"}),t.createObjectStore(H0,{keyPath:"modelPath"})}var id=class{constructor(t){if(this.indexedDB=H$e(),t==null||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,t)}async load(){return this.databaseAction(this.modelPath)}databaseAction(t,n){return new Promise((r,a)=>{let i=this.indexedDB.open(G$e,q$e);i.onupgradeneeded=()=>j$e(i),i.onsuccess=()=>{let o=i.result;if(n==null){let s=o.transaction(Hh,"readonly"),l=s.objectStore(Hh).get(this.modelPath);l.onsuccess=()=>{if(l.result==null)return o.close(),a(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(l.result.modelArtifacts)},l.onerror=c=>(o.close(),a(l.error)),s.oncomplete=()=>o.close()}else{n.weightData=yc.join(n.weightData);let s=l2(n),u=o.transaction(H0,"readwrite"),l=u.objectStore(H0),c;try{c=l.put({modelPath:this.modelPath,modelArtifactsInfo:s})}catch(d){return a(d)}let p;c.onsuccess=()=>{p=o.transaction(Hh,"readwrite");let d=p.objectStore(Hh),f;try{f=d.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:s})}catch(h){return a(h)}f.onsuccess=()=>r({modelArtifactsInfo:s}),f.onerror=h=>{l=u.objectStore(H0);let m=l.delete(this.modelPath);m.onsuccess=()=>(o.close(),a(f.error)),m.onerror=v=>(o.close(),a(f.error))}},c.onerror=d=>(o.close(),a(c.error)),u.oncomplete=()=>{p==null?o.close():p.oncomplete=()=>o.close()}}},i.onerror=o=>a(i.error)})}};id.URL_SCHEME="indexeddb://";var BB=e=>In().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(id.URL_SCHEME)?K$e(e.slice(id.URL_SCHEME.length)):null;Js.registerSaveRouter(BB);Js.registerLoadRouter(BB);function K$e(e){return new id(e)}var Wh="/",Uh="tensorflowjs_models",X$e="info",Y$e="model_topology",J$e="weight_specs",Z$e="weight_data",Q$e="model_metadata";function eVe(e){return{info:[Uh,e,X$e].join(Wh),topology:[Uh,e,Y$e].join(Wh),weightSpecs:[Uh,e,J$e].join(Wh),weightData:[Uh,e,Z$e].join(Wh),modelMetadata:[Uh,e,Q$e].join(Wh)}}function tVe(e){for(let t of Object.values(e))window.localStorage.removeItem(t)}var od=class{constructor(t){if(!In().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,t==null||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=eVe(this.modelPath)}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{let n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=l2(t),i=yc.join(t.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,$$e(i));let o={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:t.signature!=null?t.signature:void 0,userDefinedMetadata:t.userDefinedMetadata!=null?t.userDefinedMetadata:void 0,modelInitializer:t.modelInitializer!=null?t.modelInitializer:void 0,initializerSignature:t.initializerSignature!=null?t.initializerSignature:void 0,trainingConfig:t.trainingConfig!=null?t.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:a}}catch{throw tVe(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${a.modelTopologyBytes}, weightSpecsBytes=${a.weightSpecsBytes}, weightDataBytes=${a.weightDataBytes}.`)}}}async load(){let t=JSON.parse(this.LS.getItem(this.keys.info));if(t==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(t.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");let n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;let a=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(a==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=a;let i=this.LS.getItem(this.keys.modelMetadata);if(i!=null){let s=JSON.parse(i);n.format=s.format,n.generatedBy=s.generatedBy,n.convertedBy=s.convertedBy,s.signature!=null&&(n.signature=s.signature),s.userDefinedMetadata!=null&&(n.userDefinedMetadata=s.userDefinedMetadata),s.modelInitializer!=null&&(n.modelInitializer=s.modelInitializer),s.initializerSignature!=null&&(n.initializerSignature=s.initializerSignature),s.trainingConfig!=null&&(n.trainingConfig=s.trainingConfig)}let o=this.LS.getItem(this.keys.weightData);if(o==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=V$e(o),n}};od.URL_SCHEME="localstorage://";var LB=e=>In().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(od.URL_SCHEME)?nVe(e.slice(od.URL_SCHEME.length)):null;Js.registerSaveRouter(LB);Js.registerLoadRouter(LB);function nVe(e){return new od(e)}var rVe="model",aVe=".json",iVe=".weights.bin";function vM(e){return new Promise(t=>setTimeout(t)).then(e)}var sd=class e{constructor(t){if(!In().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),(t==null||t.length===0)&&(t=rVe),this.modelJsonFileName=t+aVe,this.weightDataFileName=t+iVe}async save(t){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");let n=yc.join(t.weightData),r=window.URL.createObjectURL(new Blob([n],{type:"application/octet-stream"}));if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{let a=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],i=PB(t,a),o=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),s=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(s.download=this.modelJsonFileName,s.href=o,await vM(()=>s.dispatchEvent(new MouseEvent("click"))),t.weightData!=null){let u=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;u.download=this.weightDataFileName,u.href=r,await vM(()=>u.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:l2(t)}}}};sd.URL_SCHEME="downloads://";var oVe=e=>In().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(sd.URL_SCHEME)?sVe(e.slice(sd.URL_SCHEME.length)):null;Js.registerSaveRouter(oVe);function sVe(e="model"){return new sd(e)}function gM(e,t,n,r){o(e),n=n??0,r=r??1,s(n,r);let a=0,i=u=>(u.then(l=>{let c=n+ ++a/e.length*(r-n);return t(c),l}),u);function o(u){se(u!=null&&Array.isArray(u)&&u.length>0,()=>"promises must be a none empty array")}function s(u,l){se(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${u}`),se(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${l}`),se(l>=u,()=>`startFraction must be no more than endFraction, but got startFraction ${u} and endFraction ${l}`)}return Promise.all(e.map(i))}async function uVe(e,t){t==null&&(t={});let n=t.fetchFunc==null?In().platform.fetch:t.fetchFunc,r=e.map(p=>n(p,t.requestInit,{isBinary:!0})),s=(t.onProgress==null?await Promise.all(r):await gM(r,t.onProgress,0,.5)).map(p=>p.arrayBuffer());return t.onProgress==null?await Promise.all(s):await gM(s,t.onProgress,.5,1)}function lVe(e,t){var n;let r=t.fetchFunc==null?In().platform.fetch:t.fetchFunc,a=0,i;return(n=t.onProgress)===null||n===void 0||n.call(t,0),new ReadableStream({pull:async o=>{for(var s;a<e.length;){i||(i=(await r(e[a],t.requestInit,{isBinary:!0})).body.getReader());let{done:u,value:l}=await i.read();if(u){a++,i=void 0,(s=t.onProgress)===null||s===void 0||s.call(t,a/e.length);continue}o.enqueue(l);return}o.close()}})}var cVe="application/octet-stream",pVe="application/json",e1=class{constructor(t,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(se(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=In().platform.fetch,se(t!=null&&t.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(t)&&se(t.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${t.length}).`),this.path=t,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{},this.loadOptions=n}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");let n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;let r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],a=PB(t,r);if(n.body.append("model.json",new Blob([JSON.stringify(a)],{type:pVe}),"model.json"),t.weightData!=null){let o=yc.join(t.weightData);n.body.append("model.weights.bin",new Blob([o],{type:cVe}),"model.weights.bin")}let i=await this.fetch(this.path,n);if(i.ok)return{modelArtifactsInfo:l2(t),responses:[i]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${i.status}.`)}async loadModelJSON(){let t=await this.fetch(this.path,this.requestInit);if(!t.ok)throw new Error(`Request to ${this.path} failed with status code ${t.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await t.json()}catch{let o=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?o+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":o+=" Please make sure the server is serving valid JSON for this request.",new Error(o)}let r=n.modelTopology,a=n.weightsManifest;if(r==null&&a==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return n}async load(){if(this.loadOptions.streamWeights)return this.loadStream();let t=await this.loadModelJSON();return U$e(t,n=>this.loadWeights(n))}async loadStream(){let t=await this.loadModelJSON(),n=await this.getWeightUrls(t.weightsManifest),r=mM(t.weightsManifest),a=()=>lVe(n,this.loadOptions);return Object.assign(Object.assign({},t),{weightSpecs:r,getWeightStream:a})}async getWeightUrls(t){let n=Array.isArray(this.path)?this.path[1]:this.path,[r,a]=dVe(n),i=this.weightPathPrefix||r,o=[],s=[];for(let u of t)for(let l of u.paths)this.weightUrlConverter!=null?s.push(this.weightUrlConverter(l)):o.push(i+l+a);return this.weightUrlConverter&&o.push(...await Promise.all(s)),o}async loadWeights(t){let n=await this.getWeightUrls(t),r=mM(t),a=await uVe(n,this.loadOptions);return[r,a]}};e1.URL_SCHEME_REGEX=/^https?:\/\//;function dVe(e){let t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),r=e.substring(0,t),a=n>t?e.substring(n):"";return[r+"/",a]}function yM(e){return e.match(e1.URL_SCHEME_REGEX)!=null}var zB=(e,t)=>{if(typeof fetch>"u"&&(t==null||t.fetchFunc==null))return null;{let n=!0;if(Array.isArray(e)?n=e.every(r=>yM(r)):n=yM(e),n)return fVe(e,t)}return null};Js.registerSaveRouter(zB);Js.registerLoadRouter(zB);function fVe(e,t){return new e1(e,t)}function hVe(e,t,n=1,r=0,a="int32"){if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);let o={indices:ne(e,"indices","oneHot","int32")},s={dtype:a,depth:t,onValue:n,offValue:r};return oe.runKernel(NP,o,s)}var mVe=ce({oneHot_:hVe});function vVe(e,t,n){let r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${t.shape}, shape: ${e}, sliceDim: ${r}, and batchDim: ${a}.`;if(n.rank<a)throw new Error(i+` update.rank < ${a}. `);if(e.length<r+(n.rank-a))throw new Error(i+` Output shape length < ${r+(n.rank-a)}`);if(n.rank!==a+e.length-r)throw new Error(i+` update.rank != ${a+e.length-r}`);for(let o=0;o<a;++o)if(n.shape[o]!==t.shape[o])throw new Error(i+` updates.shape[${o}] (${n.shape[o]}) != indices.shape[${o}] (${t.shape[o]}).`);for(let o=0;o<n.rank-a;++o)if(n.shape[o+a]!==e[o+r])throw new Error(i+` updates.shape[${o+a}] (${n.shape[o+a]}) != shape[${o+a}] (${e[o+a]})`)}function gVe(e,t,n){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${t.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(t.size===0)throw new Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(e.size===0)throw new Error(`Updates specified for empty output. updates shape: ${e.shape}`)}vVe(n,t,e)}function yVe(e,t,n){let r,a=e.shape.length;typeof t=="number"?r=[t,...new Array(a-1).fill(0)]:t.length<a?r=t.concat(new Array(a-t.length).fill(0)):r=t.slice(),r.forEach(o=>{se(o!==-1,()=>"slice() does not support negative begin indexing.")});let i;return n==null?i=new Array(a).fill(-1):typeof n=="number"?i=[n,...new Array(a-1).fill(-1)]:n.length<a?i=n.concat(new Array(a-n.length).fill(-1)):i=n,i=i.map((o,s)=>o>=0?o:(se(o===-1,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${s}.`),e.shape[s]-r[s])),[r,i]}var Dw=class{getClassName(){return this.constructor.className}static fromConfig(t,n){return new t(n)}};function bVe(e){let t=ne(e,"x","abs");if(t.dtype==="complex64"){let n={x:t};return oe.runKernel($M,n)}else{let n={x:t};return oe.runKernel(TM,n)}}var Ks=ce({abs_:bVe});function wVe(e){let n={x:ne(e,"x","acos")};return oe.runKernel(EM,n)}var xVe=ce({acos_:wVe});function SVe(e){let n={x:ne(e,"x","acosh")};return oe.runKernel(IM,n)}var kVe=ce({acosh_:SVe});function NVe(e,t=null,n=!1){let a={x:ne(e,"x","all","bool")},i={axis:t,keepDims:n};return oe.runKernel(LPe,a,i)}var TVe=ce({all_:NVe});function EVe(e,t=null,n=!1){let a={x:ne(e,"x","any","bool")},i={axis:t,keepDims:n};return oe.runKernel(zPe,a,i)}var IVe=ce({any_:EVe});function CVe(e,t=0){let r={x:ne(e,"x","argMax")},a={axis:t};return oe.runKernel(CM,r,a)}var DVe=ce({argMax_:CVe});function _Ve(e,t=0){let r={x:ne(e,"x","argMin")},a={axis:t};return oe.runKernel(DM,r,a)}var AVe=ce({argMin_:_Ve});function FVe(e){let n={x:ne(e,"x","asin")};return oe.runKernel(_M,n)}var RVe=ce({asin_:FVe});function OVe(e){let n={x:ne(e,"x","asinh")};return oe.runKernel(AM,n)}var MVe=ce({asinh_:OVe});function PVe(e){let n={x:ne(e,"x","atan")};return oe.runKernel(FM,n)}var BVe=ce({atan_:PVe});function LVe(e,t){let n=ne(e,"a","atan2"),r=ne(t,"b","atan2");[n,r]=Br(n,r);let a={a:n,b:r};return oe.runKernel(OM,a)}var zVe=ce({atan2_:LVe});function $Ve(e){let n={x:ne(e,"x","atanh")};return oe.runKernel(RM,n)}var VVe=ce({atanh_:$Ve});function WVe(e,t,n,r,a){let i=ne(e,"x","avgPool","float32"),o=1;se(ud(n,o),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`);let s=i,u=!1;i.rank===3&&(u=!0,s=ve(i,[1,i.shape[0],i.shape[1],i.shape[2]])),se(s.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${s.rank}.`),Bo("avgPool",r,a);let l={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a},p=oe.runKernel(MM,l,c);return p=kt(p,i.dtype),u?ve(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var $B=ce({avgPool_:WVe});function UVe(e,t=0){se(e.length>=1,()=>"Pass at least one tensor to concat");let n=bB(e,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(i=>{if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${i.dtype}. `)}),n.length===1)return SB(n[0]);let r=n,a={axis:t};return oe.runKernel(VM,r,a)}var t1=ce({concat_:UVe});function GVe(e){let n={x:ne(e,"x","sigmoid","float32")};return oe.runKernel(qP,n)}var Yw=ce({sigmoid_:GVe});function qVe(e){let n={x:ne(e,"x","tanh","float32")};return oe.runKernel(tB,n)}var HVe=ce({tanh_:qVe});function jVe(e,t,n){let r=ne(e,"x","batchToSpaceND"),a=t.reduce((s,u)=>s*u);se(r.rank>=1+t.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${t.length}`),se(n.length===t.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${t.length}`),se(r.shape[0]%a===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${a}`);let i={x:r},o={blockShape:t,crops:n};return oe.runKernel(BM,i,o)}var Jw=ce({batchToSpaceND_:jVe});function KVe(e){let t;return e.rank===0||e.rank===1?t=ve(e,[1,1,1,e.size]):e.rank===2?t=ve(e,[1,1,e.shape[0],e.shape[1]]):e.rank===3?t=ve(e,[1,e.shape[0],e.shape[1],e.shape[2]]):t=e,t}function XVe(e,t,n,r,a,i){i==null&&(i=.001);let o=ne(e,"x","batchNorm"),s=ne(t,"mean","batchNorm"),u=ne(n,"variance","batchNorm"),l;a!=null&&(l=ne(a,"scale","batchNorm"));let c;r!=null&&(c=ne(r,"offset","batchNorm")),se(s.rank===u.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),se(c==null||s.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),se(l==null||s.rank===l.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let d={x:KVe(o),scale:l,offset:c,mean:s,variance:u},f={varianceEpsilon:i},h=oe.runKernel(rP,d,f);return ve(h,o.shape)}var YVe=ce({batchNorm_:XVe});function JVe(e){let n={x:ne(e,"x","ceil","float32")};return oe.runKernel(LM,n)}var ZVe=ce({ceil_:JVe});function QVe(e,t,n){n1(e),n=n||t2(t);let r={shape:e,value:t,dtype:n};return oe.runKernel(aBe,{},r)}function eWe(e,t,n){let r=ne(e,"x","clipByValue");if(se(t<=n,()=>`Error in clip: min (${t}) must be less than or equal to max (${n}).`),t===n)return QVe(r.shape,t,r.dtype);let a={x:r},i={clipValueMin:t,clipValueMax:n};return oe.runKernel(zM,a,i)}var tWe=ce({clipByValue_:eWe});function nWe(e,t,n,r,a="NWC",i=1,o){let s=ne(e,"x","conv1d"),u=ne(t,"filter","conv1d"),l=s,c=!1;s.rank===2&&(c=!0,l=ve(s,[1,s.shape[0],s.shape[1]])),se(l.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${l.rank}.`),se(u.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${u.rank}.`),Bo("conv1d",r,o),se(l.shape[2]===u.shape[1],()=>`Error in conv1d: depth of input (${l.shape[2]}) must match input depth for filter ${u.shape[1]}.`),se(ud(n,i),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${i}'`),se(Y0(i),()=>"Error in conv1D: Dilated rates should be larger than 0."),se(Y0(n),()=>"Error in conv1D: Stride should be larger than 0."),se(a==="NWC",()=>`Error in conv1d: got dataFormat of ${a} but only NWC is currently supported.`);let p=ve(u,[1,u.shape[0],u.shape[1],u.shape[2]]),d=ve(l,[l.shape[0],1,l.shape[1],l.shape[2]]),v=i2(d,p,[1,n],r,"NHWC",[1,i],o);return c?ve(v,[v.shape[2],v.shape[3]]):ve(v,[v.shape[0],v.shape[2],v.shape[3]])}var rWe=ce({conv1d_:nWe});function aWe(e,t,n,r,a,i){let o=ne(e,"x","conv2dTranspose"),s=ne(t,"filter","conv2dTranspose");return NB(n,o,s,r,a,"NHWC",i)}var iWe=ce({conv2dTranspose_:aWe});function oWe(e){let n={x:ne(e,"x","cos","float32")};return oe.runKernel(GM,n)}var Zw=ce({cos_:oWe});function sWe(e){let n={x:ne(e,"x","cosh","float32")};return oe.runKernel(qM,n)}var VB=ce({cosh_:sWe});function uWe(e,t=0,n=!1,r=!1){let i={x:ne(e,"x","cumprod")},o={axis:t,exclusive:n,reverse:r};return oe.runKernel(XPe,i,o)}var _w=ce({cumprod_:uWe});function lWe(e,t,n="NHWC"){let r=ne(e,"x","depthToSpace","float32"),a=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],o=n==="NHWC"?r.shape[3]:r.shape[1];se(t>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${t}`),se(a*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${a} and ${t}  for depthToSpace with input shape
    ${r.shape}`),se(i*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${t} for depthToSpace with input shape
        ${r.shape}`),se(o%(t*t)===0,()=>`Dimension size must be evenly divisible by ${t*t} but is ${o} for depthToSpace with input shape ${r.shape}`);let s={x:r},u={blockSize:t,dataFormat:n};return oe.runKernel(YPe,s,u)}var cWe=ce({depthToSpace_:lWe});function pWe(e,t,n,r,a="NHWC",i=[1,1],o){let s=ne(e,"x","depthwiseConv2d","float32"),u=ne(t,"filter","depthwiseConv2d","float32"),l=s,c=!1;s.rank===3&&(c=!0,l=ve(s,[1,s.shape[0],s.shape[1],s.shape[2]])),se(l.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${l.rank}.`),se(u.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${u.rank}.`);let p=a==="NHWC"?l.shape[3]:l.shape[1];se(p===u.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${p}) must match the inChannels dimension in filter ${u.shape[2]}.`),Bo("depthwiseConv2d",r,o);let d={x:l,filter:u},f={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},h=oe.runKernel(jM,d,f);return c?ve(h,[h.shape[1],h.shape[2],h.shape[3]]):h}var WB=ce({depthwiseConv2d_:pWe});function dWe(e,t,n,r,a=[1,1],i="NHWC"){let o=ne(e,"x","dilation2d"),s=ne(t,"filter","dilation2d");se(o.rank===3||o.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),se(s.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${s.rank}.`),se(i==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`);let u=o,l=!1;o.rank===3&&(u=ve(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=!0),se(u.shape[3]===s.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${u.shape[3]} vs ${s.shape[2]}`);let c={x:u,filter:s},p={strides:n,pad:r,dilations:a},d=oe.runKernel(KM,c,p);return l?ve(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var fWe=ce({dilation2d_:dWe});function hWe(e,t){let n=ne(e,"a","div"),r=ne(t,"b","div");[n,r]=Br(n,r);let a=dr(n,r),i=Kn(a),o=Kw(r,i);return Ys(o,i,a)}var mWe=ce({divNoNan_:hWe});function vWe(e,t){let n=ne(e,"t1","dot"),r=ne(t,"t2","dot");se((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);let a=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];if(se(a===i,()=>`Error in dot: inner dimensions of inputs must match, but got ${a} and ${i}.`),n.rank===1&&r.rank===1){let o=ve(n,[1,-1]),s=ve(r,[-1,1]),u=Si(o,s);return ve(u,[])}else if(n.rank===1&&r.rank===2){let o=ve(n,[1,-1]),s=ve(r,[r.shape[0],r.shape[1]]),u=Si(o,s);return ve(u,[u.size])}else if(n.rank===2&&r.rank===1){let o=ve(r,[-1,1]),s=Si(n,o);return ve(s,[s.size])}else{let o=ve(r,[r.shape[0],r.shape[1]]);return Si(n,o)}}var gWe=ce({dot_:vWe});function yWe(e){let n={x:ne(e,"x","elu","float32")};return oe.runKernel(YM,n)}var bWe=ce({elu_:yWe});function wWe(e){let t=ne(e,"x","erf");se(t.dtype==="int32"||t.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),t.dtype==="int32"&&(t=kt(t,"float32"));let n={x:t};return oe.runKernel(JM,n)}var xWe=ce({erf_:wWe});function SWe(e,t=null,n=!1){let a={x:ne(e,"x","max")},i={reductionIndices:t,keepDims:n};return oe.runKernel(fP,a,i)}var nd=ce({max_:SWe});function kWe(e,t=null,n=!1){let a={x:ne(e,"x","min")},i={axis:t,keepDims:n};return oe.runKernel(gP,a,i)}var Aw=ce({min_:kWe});function NWe(e,t="euclidean",n=null,r=!1){e=ne(e,"x","norm");let a=UB(e,t,n),i=a.shape;if(r){let o=hs(n,e.shape);i=Z0(a.shape,o)}return ve(a,i)}function UB(e,t,n=null){if(e.rank===0)return Ks(e);if(e.rank!==1&&n===null)return UB(ve(e,[-1]),t,n);if(e.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(t===1)return Gt(Ks(e),n);if(t===1/0)return nd(Ks(e),n);if(t===-1/0)return Aw(Ks(e),n);if(t==="euclidean"||t===2)return Ku(Gt(u2(Ks(e),Pr(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}if(Array.isArray(n)&&n.length===2){if(t===1)return nd(Gt(Ks(e),n[0]),n[1]-1);if(t===1/0)return nd(Gt(Ks(e),n[1]),n[0]);if(t===-1/0)return Aw(Gt(Ks(e),n[1]),n[0]);if(t==="fro"||t==="euclidean")return Ku(Gt(Yr(e),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}var GB=ce({norm_:NWe});function TWe(e,t=null,n=!1){return GB(e,"euclidean",t,n)}var EWe=ce({euclideanNorm_:TWe});function IWe(e,t=0){let n=ne(e,"x","expandDims","string_or_numeric");se(t<=n.rank,()=>"Axis must be <= rank of the tensor");let r={input:n},a={dim:t};return oe.runKernel(QM,r,a)}var qB=ce({expandDims_:IWe});function CWe(e){let n={x:ne(e,"x","expm1")};return oe.runKernel(eP,n)}var DWe=ce({expm1_:CWe});function _We(e,t,n=0,r=0){let a=ne(e,"x","gather"),i=ne(t,"indices","gather","int32"),o={x:a,indices:i},s={axis:n,batchDims:r};return oe.runKernel(aP,o,s)}var HB=ce({gather_:_We});function AWe(e){let n={x:ne(e,"x","isFinite")};return oe.runKernel(oP,n)}var FWe=ce({isFinite_:AWe});function RWe(e){let n={x:ne(e,"x","isInf")};return oe.runKernel(sP,n)}var OWe=ce({isInf_:RWe});function MWe(e){let n={x:ne(e,"x","isNaN")};return oe.runKernel(uP,n)}var PWe=ce({isNaN_:MWe});function BWe(e,t=.2){let r={x:ne(e,"x","leakyRelu")},a={alpha:t};return oe.runKernel(lP,r,a)}var LWe=ce({leakyRelu_:BWe});function zWe(e,t=5,n=1,r=1,a=.5){let i=ne(e,"x","localResponseNormalization");se(i.rank===4||i.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${i.rank}.`),se(jh(t),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`);let o=i,s=!1;i.rank===3&&(s=!0,o=ve(i,[1,i.shape[0],i.shape[1],i.shape[2]]));let u={x:o},l={depthRadius:t,bias:n,alpha:r,beta:a},c=oe.runKernel(dP,u,l);return s?ve(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var $We=ce({localResponseNormalization_:zWe});function VWe(e){let n={x:ne(e,"x","log1p")};return oe.runKernel(pP,n)}var WWe=ce({log1p_:VWe});function UWe(e,t){se(bw(e),()=>"The f passed in variableGrads(f) must be a function"),se(t==null||Array.isArray(t)&&t.every(l=>l instanceof rd),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");let n=t!=null;if(!n){t=[];for(let l in oe.registeredVariables)t.push(oe.registeredVariables[l])}let r=n?t.filter(l=>!l.trainable):null,a=t.length;t=t.filter(l=>l.trainable),se(t.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${a} variables is trainable.`);let i=!0,{value:o,grads:s}=oe.gradients(e,t,null,i);se(s.some(l=>l!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),se(o.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);let u={};return t.forEach((l,c)=>{s[c]!=null&&(u[l.name]=s[c])}),r?.forEach(l=>u[l.name]=null),{value:o,grads:u}}function jB(e){return oe.customGrad(e)}function GWe(e){let n={x:ne(e,"x","softplus")};return oe.runKernel(HP,n)}var KB=ce({softplus_:GWe});function qWe(e){let t=ne(e,"x","logSigmoid");return jB(r=>({value:ga(KB(ga(r))),gradFunc:o=>Je(o,Yw(ga(r)))}))(t)}var HWe=ce({logSigmoid_:qWe});function jWe(e,t=-1){let n=ne(e,"logits","logSoftmax");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${t}`);return jB((a,i)=>{let s=nd(a,t,!0),u=aa(a,s),l=aa(kt(u,"float32"),s2(Gt(Xu(u),t,!0)));return i([l]),{value:l,gradFunc:(p,d)=>{let[f]=d,h=!0,m=Xu(f);return aa(p,Je(Gt(p,t,h),m))}}})(n)}var KWe=ce({logSoftmax_:jWe});function XWe(e,t=null,n=!1){let r=ne(e,"x","logSumExp"),a=hs(t,r.shape),i=nd(r,a,!0),o=aa(r,i),s=Xu(o),u=Gt(s,a),l=s2(u),c=so(ve(i,l.shape),l);if(n){let p=Z0(c.shape,a);return ve(c,p)}return c}var YWe=ce({logSumExp_:XWe});function JWe(e){let n={x:ne(e,"x","logicalNot","bool")};return oe.runKernel(pBe,n)}var Qw=ce({logicalNot_:JWe});function ZWe(e,t){let n=ne(e,"a","logicalOr","bool"),r=ne(t,"b","logicalOr","bool");fr(n.shape,r.shape);let a={a:n,b:r};return oe.runKernel(dBe,a)}var XB=ce({logicalOr_:ZWe});function QWe(e,t){let n=ne(e,"a","logicalXor","bool"),r=ne(t,"b","logicalXor","bool");return fr(n.shape,r.shape),Zh(XB(e,t),Qw(Zh(e,t)))}var eUe=ce({logicalXor_:QWe});function tUe(e,t,n,r,a){let i=ne(e,"x","maxPool"),o=1,s=i,u=!1;i.rank===3&&(u=!0,s=ve(i,[1,i.shape[0],i.shape[1],i.shape[2]])),se(s.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${s.rank}.`),se(ud(n,o),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),Bo("maxPool",r,a);let l={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a},p=oe.runKernel(mP,l,c);return u?ve(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var YB=ce({maxPool_:tUe});function nUe(e,t){let n=ne(e,"a","maximum"),r=ne(t,"b","maximum");[n,r]=Br(n,r),n.dtype==="bool"&&(n=kt(n,"int32"),r=kt(r,"int32")),fr(n.shape,r.shape);let a={a:n,b:r};return oe.runKernel(hP,a)}var JB=ce({maximum_:nUe});function rUe(e,t=null,n=!1){let a={x:ne(e,"x","mean")},i={axis:t,keepDims:n};return oe.runKernel(vP,a,i)}var aUe=ce({mean_:rUe});function iUe(e,t){let n=ne(e,"a","minimum"),r=ne(t,"b","minimum");[n,r]=Br(n,r),n.dtype==="bool"&&(n=kt(n,"int32"),r=kt(r,"int32")),fr(n.shape,r.shape);let a={a:n,b:r};return oe.runKernel(yP,a)}var oUe=ce({minimum_:iUe});function sUe(e,t,n){se(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);let r=ne(e,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");se(t.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${t.length}.`);let a=n==="reflect"?1:0;for(let s=0;s<r.rank;s++)se(t[s].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),se(t[s][0]>=0&&t[s][0]<=r.shape[s]-a&&t[s][1]>=0&&t[s][1]<=r.shape[s]-a,()=>`Padding in dimension ${s} cannot be greater than or equal to ${r.shape[s]-a} or less than 0 for input of shape ${r.shape}`);let i={paddings:t,mode:n},o={x:r};return oe.runKernel(bP,o,i)}var uUe=ce({mirrorPad_:sUe});function lUe(e,t){let n=ne(e,"a","mod"),r=ne(t,"b","mod");[n,r]=Br(n,r);let a={a:n,b:r};return oe.runKernel(wP,a)}var cUe=ce({mod_:lUe});function pUe(e,t){let n=ne(e,"a","notEqual","string_or_numeric"),r=ne(t,"b","notEqual","string_or_numeric");[n,r]=Br(n,r),fr(n.shape,r.shape);let a={a:n,b:r};return oe.runKernel(yBe,a)}var dUe=ce({notEqual_:pUe});function fUe(e){let n={x:ne(e,"x","onesLike")};return oe.runKernel(kP,n)}var hUe=ce({onesLike_:fUe});function mUe(e,t,n=0){let r=ne(e,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");let a={paddings:t,constantValue:n},i={x:r};return oe.runKernel(EP,i,a)}var ZB=ce({pad_:mUe});function vUe(e,t,n,r,a,i,o){a==null&&(a=[1,1]),i==null&&(i=1),r===0&&(r="valid");let s=ne(e,"x","maxPool"),u=s,l=!1;s.rank===3&&(l=!0,u=ve(s,[1,s.shape[0],s.shape[1],s.shape[2]])),se(ud(i,a),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${i} and dilations '${a}'`);let c=OLe(u.shape,t,i,a,r),p=[c.dilationHeight,c.dilationWidth],d;r==="same"?d=yUe([c.filterHeight,c.filterWidth],p):d=[[0,0],[0,0]];let f=p[0]===1&&p[1]===1,[h,m]=gUe([c.inHeight,c.inWidth],p,d),v=f?r:"valid",g=f?u:Gw(u,p,h),w=(n==="avg"?()=>$B(g,t,i,v,o):()=>YB(g,t,i,v,o))(),b=f?w:Jw(w,p,m);return l?ve(b,[b.shape[1],b.shape[2],b.shape[3]]):b}function gUe(e,t,n){let r=n.map(c=>c[0]),a=n.map(c=>c[1]),i=e.concat(r,a),o=t.map((c,p)=>(c-i[p]%c)%c),s=a.map((c,p)=>c+o[p]),u=t.map((c,p)=>[r[p],s[p]]),l=t.map((c,p)=>[0,o[p]]);return[u,l]}function yUe(e,t){let r=e.map((o,s)=>o+(o-1)*(t[s]-1)).map(o=>o-1),a=r.map(o=>Math.floor(o/2)),i=r.map((o,s)=>o-a[s]);return r.map((o,s)=>[a[s],i[s]])}var bUe=ce({pool_:vUe});function wUe(e,t){let n=ne(e,"x","prelu"),r=ne(t,"alpha","prelu"),a={x:n,alpha:r};return oe.runKernel(CP,a)}var xUe=ce({prelu_:wUe});function SUe(e,t=null,n=!1){let r=ne(e,"x","prod");r.dtype==="bool"&&(r=kt(r,"int32"));let a={x:r},i={axis:t,keepDims:n};return oe.runKernel(DP,a,i)}var kUe=ce({prod_:SUe});var bc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e5={exports:{}},iYe=e5.exports;(function(e){(function(t,n,r){function a(u){var l=this,c=s();l.next=function(){var p=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=p-(l.c=p|0)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(u),l.s0<0&&(l.s0+=1),l.s1-=c(u),l.s1<0&&(l.s1+=1),l.s2-=c(u),l.s2<0&&(l.s2+=1),c=null}function i(u,l){return l.c=u.c,l.s0=u.s0,l.s1=u.s1,l.s2=u.s2,l}function o(u,l){var c=new a(u),p=l&&l.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,p&&(typeof p=="object"&&i(p,c),d.state=function(){return i(c,{})}),d}function s(){var u=4022871197,l=function(c){c=String(c);for(var p=0;p<c.length;p++){u+=c.charCodeAt(p);var d=.02519603282416938*u;u=d>>>0,d-=u,d*=u,u=d>>>0,d-=u,u+=d*4294967296}return(u>>>0)*23283064365386963e-26};return l}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.alea=o})(bc,e,!1)})(e5);var NUe=e5.exports,t5={exports:{}},oYe=t5.exports;(function(e){(function(t,n,r){function a(s){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var p=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^p^p>>>8},s===(s|0)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,u.next()}function i(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u}function o(s,u){var l=new a(s),c=u&&u.state,p=function(){return(l.next()>>>0)/4294967296};return p.double=function(){do var d=l.next()>>>11,f=(l.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},p.int32=l.next,p.quick=p,c&&(typeof c=="object"&&i(c,l),p.state=function(){return i(l,{})}),p}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor128=o})(bc,e,!1)})(t5);var TUe=t5.exports,n5={exports:{}},sYe=n5.exports;(function(e){(function(t,n,r){function a(s){var u=this,l="";u.next=function(){var p=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^(p^p<<1))|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,s===(s|0)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,c==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function i(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u.v=s.v,u.d=s.d,u}function o(s,u){var l=new a(s),c=u&&u.state,p=function(){return(l.next()>>>0)/4294967296};return p.double=function(){do var d=l.next()>>>11,f=(l.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},p.int32=l.next,p.quick=p,c&&(typeof c=="object"&&i(c,l),p.state=function(){return i(l,{})}),p}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorwow=o})(bc,e,!1)})(n5);var EUe=n5.exports,r5={exports:{}},uYe=r5.exports;(function(e){(function(t,n,r){function a(s){var u=this;u.next=function(){var c=u.x,p=u.i,d,f,h;return d=c[p],d^=d>>>7,f=d^d<<24,d=c[p+1&7],f^=d^d>>>10,d=c[p+3&7],f^=d^d>>>3,d=c[p+4&7],f^=d^d<<7,d=c[p+7&7],d=d^d<<13,f^=d^d<<9,c[p]=f,u.i=p+1&7,f};function l(c,p){var d,f,h=[];if(p===(p|0))f=h[0]=p;else for(p=""+p,d=0;d<p.length;++d)h[d&7]=h[d&7]<<15^p.charCodeAt(d)+h[d+1&7]<<13;for(;h.length<8;)h.push(0);for(d=0;d<8&&h[d]===0;++d);for(d==8?f=h[7]=-1:f=h[d],c.x=h,c.i=0,d=256;d>0;--d)c.next()}l(u,s)}function i(s,u){return u.x=s.x.slice(),u.i=s.i,u}function o(s,u){s==null&&(s=+new Date);var l=new a(s),c=u&&u.state,p=function(){return(l.next()>>>0)/4294967296};return p.double=function(){do var d=l.next()>>>11,f=(l.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},p.int32=l.next,p.quick=p,c&&(c.x&&i(c,l),p.state=function(){return i(l,{})}),p}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorshift7=o})(bc,e,!1)})(r5);var IUe=r5.exports,a5={exports:{}},lYe=a5.exports;(function(e){(function(t,n,r){function a(s){var u=this;u.next=function(){var c=u.w,p=u.X,d=u.i,f,h;return u.w=c=c+1640531527|0,h=p[d+34&127],f=p[d=d+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,h=p[d]=h^f,u.i=d,h+(c^c>>>16)|0};function l(c,p){var d,f,h,m,v,g=[],y=128;for(p===(p|0)?(f=p,p=null):(p=p+"\0",f=0,y=Math.max(y,p.length)),h=0,m=-32;m<y;++m)p&&(f^=p.charCodeAt((m+32)%p.length)),m===0&&(v=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,m>=0&&(v=v+1640531527|0,d=g[m&127]^=f+v,h=d==0?h+1:0);for(h>=128&&(g[(p&&p.length||0)&127]=-1),h=127,m=4*128;m>0;--m)f=g[h+34&127],d=g[h=h+1&127],f^=f<<13,d^=d<<17,f^=f>>>15,d^=d>>>12,g[h]=f^d;c.w=v,c.X=g,c.i=h}l(u,s)}function i(s,u){return u.i=s.i,u.w=s.w,u.X=s.X.slice(),u}function o(s,u){s==null&&(s=+new Date);var l=new a(s),c=u&&u.state,p=function(){return(l.next()>>>0)/4294967296};return p.double=function(){do var d=l.next()>>>11,f=(l.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},p.int32=l.next,p.quick=p,c&&(c.X&&i(c,l),p.state=function(){return i(l,{})}),p}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor4096=o})(bc,e,!1)})(a5);var CUe=a5.exports,i5={exports:{}},cYe=i5.exports;(function(e){(function(t,n,r){function a(s){var u=this,l="";u.next=function(){var p=u.b,d=u.c,f=u.d,h=u.a;return p=p<<25^p>>>7^d,d=d-f|0,f=f<<24^f>>>8^h,h=h-p|0,u.b=p=p<<20^p>>>12^d,u.c=d=d-f|0,u.d=f<<16^d>>>16^h,u.a=h-p|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,s===Math.floor(s)?(u.a=s/4294967296|0,u.b=s|0):l+=s;for(var c=0;c<l.length+20;c++)u.b^=l.charCodeAt(c)|0,u.next()}function i(s,u){return u.a=s.a,u.b=s.b,u.c=s.c,u.d=s.d,u}function o(s,u){var l=new a(s),c=u&&u.state,p=function(){return(l.next()>>>0)/4294967296};return p.double=function(){do var d=l.next()>>>11,f=(l.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},p.int32=l.next,p.quick=p,c&&(typeof c=="object"&&i(c,l),p.state=function(){return i(l,{})}),p}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.tychei=o})(bc,e,!1)})(i5);var DUe=i5.exports,o5={exports:{}},pYe=o5.exports;(function(e){(function(t,n,r){var a=256,i=6,o=52,s="random",u=r.pow(a,i),l=r.pow(2,o),c=l*2,p=a-1,d;function f(b,x,k){var N=[];x=x==!0?{entropy:!0}:x||{};var E=g(v(x.entropy?[b,w(n)]:b??y(),3),N),C=new h(N),R=function(){for(var A=C.g(i),M=u,$=0;A<l;)A=(A+$)*a,M*=a,$=C.g(1);for(;A>=c;)A/=2,M/=2,$>>>=1;return(A+$)/M};return R.int32=function(){return C.g(4)|0},R.quick=function(){return C.g(4)/4294967296},R.double=R,g(w(C.S),n),(x.pass||k||function(A,M,$,z){return z&&(z.S&&m(z,C),A.state=function(){return m(C,{})}),$?(r[s]=A,M):A})(R,E,"global"in x?x.global:this==r,x.state)}function h(b){var x,k=b.length,N=this,E=0,C=N.i=N.j=0,R=N.S=[];for(k||(b=[k++]);E<a;)R[E]=E++;for(E=0;E<a;E++)R[E]=R[C=p&C+b[E%k]+(x=R[E])],R[C]=x;(N.g=function(A){for(var M,$=0,z=N.i,L=N.j,B=N.S;A--;)M=B[z=p&z+1],$=$*a+B[p&(B[z]=B[L=p&L+M])+(B[L]=M)];return N.i=z,N.j=L,$})(a)}function m(b,x){return x.i=b.i,x.j=b.j,x.S=b.S.slice(),x}function v(b,x){var k=[],N=typeof b,E;if(x&&N=="object")for(E in b)try{k.push(v(b[E],x-1))}catch{}return k.length?k:N=="string"?b:b+"\0"}function g(b,x){for(var k=b+"",N,E=0;E<k.length;)x[p&E]=p&(N^=x[p&E]*19)+k.charCodeAt(E++);return w(x)}function y(){try{var b;return d&&(b=d.randomBytes)?b=b(a):(b=new Uint8Array(a),(t.crypto||t.msCrypto).getRandomValues(b)),w(b)}catch{var x=t.navigator,k=x&&x.plugins;return[+new Date,t,k,t.screen,w(n)]}}function w(b){return String.fromCharCode.apply(0,b)}if(g(r.random(),n),e.exports){e.exports=f;try{d=require("crypto")}catch{}}else r["seed"+s]=f})(typeof self<"u"?self:bc,[],Math)})(o5);var _Ue=o5.exports,AUe=NUe,FUe=TUe,RUe=EUe,OUe=IUe,MUe=CUe,PUe=DUe,cd=_Ue;cd.alea=AUe;cd.xor128=FUe;cd.xorwow=RUe;cd.xorshift7=OUe;cd.xor4096=MUe;cd.tychei=PUe;function BUe(e){let n={x:ne(e,"x","reciprocal")};return oe.runKernel(_P,n)}var LUe=ce({reciprocal_:BUe});function zUe(e){let n={x:ne(e,"x","relu")};return oe.runKernel(AP,n)}var $Ue=ce({relu_:zUe});function VUe(e){let n={x:ne(e,"x","relu6")};return oe.runKernel(MP,n)}var WUe=ce({relu6_:VUe});function UUe(e,t){let r={x:ne(e,"x","reverse")},a={dims:t};return oe.runKernel(PP,r,a)}var e2=ce({reverse_:UUe});function GUe(e){let n={x:ne(e,"x","round")};return oe.runKernel(BP,n)}var qUe=ce({round_:GUe});function HUe(e){let n={x:ne(e,"x","selu")};return oe.runKernel($P,n)}var jUe=ce({selu_:HUe});function KUe(e,t,n,r,a,i=[1,1],o="NHWC"){let s=ne(e,"x","separableConv2d"),u=ne(t,"depthwiseFilter","separableConv2d"),l=ne(n,"pointwiseFilter","separableConv2d"),c=s,p=!1;if(s.rank===3&&(p=!0,c=ve(s,[1,s.shape[0],s.shape[1],s.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");se(c.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),se(u.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${u.rank}.`),se(l.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${u.rank}.`),se(l.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${l.shape[0]}.`),se(l.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${l.shape[1]}.`);let d=u.shape[2],f=u.shape[3];se(l.shape[2]===d*f,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${d*f}, but got ${l.shape[2]}.`);let h=WB(c,u,r,a,o,i),v=i2(h,l,1,"valid",o);return p?ve(v,[v.shape[1],v.shape[2],v.shape[3]]):v}var XUe=ce({separableConv2d_:KUe});function YUe(e){let n={x:ne(e,"x","sign")};return oe.runKernel(GP,n)}var JUe=ce({sign_:YUe});function ZUe(e,t=-1){let n=ne(e,"logits","softmax","float32");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${t}`);let r={logits:n},a={dim:t};return oe.runKernel(JP,r,a)}var QUe=ce({softmax_:ZUe});function eGe(e){se(e.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${e.dtype}.`);let t={input:e};return oe.runKernel(rBe,t)}var QB=ce({fft_:eGe});function tGe(e){se(e.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${e.dtype}.`);let t={input:e};return oe.runKernel(oBe,t)}var Fw=ce({ifft_:tGe});function nGe(e){let t=e.shape[e.shape.length-1],n=e.size/t,r;if(t<=2){let a=ve(e,[n,t]);r=Fw(a)}else{let a=[n,2*(t-1)],i=ve(Q0(e),[n,t]),o=ve(Hw(e),[n,t]),s=e2(fs(i,[0,1],[n,t-2]),1),u=Je(e2(fs(o,[0,1],[n,t-2]),1),Pr(-1)),l=t1([i,s],1),c=t1([o,u],1),p=ve(ad(l,c),[a[0],a[1]]);r=Fw(p)}if(r=Q0(r),e.rank===3&&e.shape[0]!==0){let a=r,i=e.shape[0];r=ve(r,[i,r.shape[0]/i,r.shape[1]]),a.dispose()}return r}var rGe=ce({irfft_:nGe});function aGe(e,t){se(e.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${e.dtype}`);let n=e.shape[e.shape.length-1],r=e.size/n,a;if(t!=null&&t<n){let h=e.shape.map(v=>0),m=e.shape.map(v=>v);m[e.shape.length-1]=t,a=fs(e,h,m),n=t}else if(t!=null&&t>n){let h=e.shape.map(m=>m);h[e.shape.length-1]=t-n,a=t1([e,Qh(h)],e.shape.length-1),n=t}else a=e;let i=Kn(a),o=ve(ad(a,i),[r,n]),s=QB(o),u=Math.floor(n/2)+1,l=Q0(s),c=Hw(s),p=J0(l,[u,n-u],l.shape.length-1),d=J0(c,[u,n-u],c.shape.length-1),f=a.shape.slice();return f[a.shape.length-1]=u,ve(ad(p[0],d[0]),f)}var iGe=ce({rfft_:aGe});function oGe(e,t){let n=ne(e,"a","squaredDifference"),r=ne(t,"b","squaredDifference");[n,r]=Br(n,r),fr(n.shape,r.shape);let a={a:n,b:r},i={};return oe.runKernel(ZP,a,i)}var sGe=ce({squaredDifference_:oGe});function uGe(e,t){let n=ne(e,"x","squeeze","string_or_numeric");return ve(n,_Be(n.shape,t).newShape)}var lGe=ce({squeeze_:uGe});function cGe(e,t,n,r,a=0,i=0,o=0,s=0,u=0){let c={x:ne(e,"x","stridedSlice","string_or_numeric")},p={begin:t,end:n,strides:r,beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u};return oe.runKernel(NBe,c,p)}var pGe=ce({stridedSlice_:cGe});function dGe(e){let n={x:ne(e,"x","tan","float32")};return oe.runKernel(eB,n)}var fGe=ce({tan_:dGe});function hGe(e,t,n){let r=ne(e,"tensor","tensorScatterupdate"),a=ne(t,"indices","tensorScatterupdate","int32"),i=ne(n,"updates","tensorScatterupdate");if(gVe(i,a,r.shape),r.dtype!==i.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${i.dtype}.`);let o={tensor:r,indices:a,updates:i},s={};return oe.runKernel(SBe,o,s)}var dYe=ce({tensorScatterUpdate_:hGe});function mGe(e,t=1,n=!0){let r=ne(e,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");let a=r.shape[r.shape.length-1];if(t<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${t}`);if(t>a)throw new Error(`'k' passed to topk() must be <= the last dimension (${a}) but got ${t}`);let i={x:r},o={k:t,sorted:n},[s,u]=oe.runKernel(TBe,i,o);return{values:s,indices:u}}var vGe=ce({topk_:mGe});function gGe(e,t=0){let n=ne(e,"x","unique","string_or_numeric");se(n.rank>0,()=>"The input tensor must be at least 1D");let r={x:n},a={axis:t},[i,o]=oe.runKernel(EBe,r,a);return{values:i,indices:o}}var yGe=ce({unique_:gGe});function bGe(e,t,n=!1,r=!1){let a=ne(e,"images","resizeBilinear");se(a.rank===3||a.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${a.rank}.`),se(t.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`),se(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=a,o=!1;a.rank===3&&(o=!0,i=ve(a,[1,a.shape[0],a.shape[1],a.shape[2]]));let[]=t,s={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},l=oe.runKernel(OP,s,u);return o?ve(l,[l.shape[1],l.shape[2],l.shape[3]]):l}var wGe=ce({resizeBilinear_:bGe});function xGe(e,t,n=!1,r=!1){let a=ne(e,"images","resizeNearestNeighbor");se(a.rank===3||a.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${a.rank}.`),se(t.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`),se(a.dtype==="float32"||a.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),se(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=a,o=!1;a.rank===3&&(o=!0,i=ve(a,[1,a.shape[0],a.shape[1],a.shape[2]]));let[]=t,s={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},l=oe.runKernel(RP,s,u);return o?ve(l,[l.shape[1],l.shape[2],l.shape[3]]):l}var SGe=ce({resizeNearestNeighbor_:xGe});var bM;(function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(bM||(bM={}));var Rw=class extends Dw{minimize(t,n=!1,r){let{value:a,grads:i}=this.computeGradients(t,r);if(r!=null){let o=r.map(s=>({name:s.name,tensor:i[s.name]}));this.applyGradients(o)}else this.applyGradients(i);return lM(i),n?a:(a.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(t,n){return UWe(t,n)}dispose(){this.iterations_!=null&&lM(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Pr(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(t){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(t){return this.iterations_=(await t[0].tensor.data())[0],t.slice(1)}};Object.defineProperty(Rw,Symbol.hasInstance,{value:e=>e.minimize!=null&&e.computeGradients!=null&&e.applyGradients!=null});var wM;(function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"})(wM||(wM={}));var kGe=1.7580993408473768,NGe=1.0507009873554805;function TGe(e,t,n){let r=e.shape.slice();r[n]=1;let a=ve(t,r),i=_w(e,n,!0,!1),o=_w(e,n,!0,!0),s=Je(i,o);return Je(a,s)}function EGe(e,t,n){let r=e.shape.length,a=r-n.length,i=IB(n,r),o=e;i!=null&&(o=gc(e,i));let s=o.shape.slice(),l=s.splice(r-n.length,n.length).reduce((d,f)=>d*f,1);s.push(l);let c=o.reshape(s),p=TGe(c,t,a);if(p=p.reshape(o.shape),i!=null){let d=qw(i);p=gc(p,d)}return p}var IGe={kernelName:DP,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{axis:a}=n,i=[];return a==null?i=r.shape.map((o,s)=>s):typeof a=="number"?i=[a]:i=a,{x:()=>EGe(r,e,i)}}};var CGe={kernelName:XM,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=fr(n.shape,r.shape);return{a:()=>{let s=dr(e,kt(r,"float32")),u=Jr(n.shape,a);return u.length>0?ve(Gt(s,u),n.shape):s},b:()=>{let s=Je(e,kt(n,"float32")),u=Jr(r.shape,a);u.length>0&&(s=ve(Gt(s,u),r.shape));let l=Yr(r);return ga(dr(s,kt(l,"float32")))}}}};var DGe={kernelName:_P,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>dr(e,ga(Yr(n)))}}};var _Ge={kernelName:MP,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t,r=Je(a2(n,6),n2(n));return{x:()=>Je(e,kt(r,"float32"))}}};var AGe={kernelName:AP,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Je(e,kt(n2(n),"float32"))}}};var FGe={kernelName:FP,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>ve(e,n.shape)}}};var RGe={kernelName:OP,inputsToSave:["images"],gradFunc:(e,t,n)=>{let[r]=t,a={dy:e,images:r};return{images:()=>oe.runKernel(xBe,a,n)}}};var OGe={kernelName:RP,inputsToSave:["images"],gradFunc:(e,t,n)=>{let[r]=t,a={dy:e,images:r};return{images:()=>oe.runKernel(wBe,a,n)}}};var MGe={kernelName:PP,gradFunc:(e,t,n)=>{let{dims:r}=n,a=hs(r,e.shape);return{x:()=>e2(e,a)}}};var PGe={kernelName:BP,gradFunc:e=>({x:()=>Kn(e)})};var BGe={kernelName:LP,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>ga(dr(e,Je(u2(n,1.5),2)))}}};var LGe={kernelName:zP,inputsToSave:["condition"],gradFunc:(e,t)=>{let[n]=t;return{condition:()=>kt(Kn(n),"float32"),t:()=>Je(e,kt(n,e.dtype)),e:()=>Je(e,kt(Qw(n),e.dtype))}}};var zGe={kernelName:$P,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>{let r=ld(n,Pr(0)),a=Pr(kGe),i=Pr(NGe),o=Je(e,i),s=Je(Je(e,a),Xu(kt(n,"float32")));return Ys(r,o,s)}}}};var $Ge={kernelName:qP,outputsToSave:[!0],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Je(e,Je(n,aa(Pr(1),n)))}}};var VGe={kernelName:GP,gradFunc:e=>({x:()=>Kn(e)})};var WGe={kernelName:WP,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Je(Zw(kt(n,"float32")),e)}}};var UGe={kernelName:UP,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Je(VB(kt(n,"float32")),e)}}};var GGe={kernelName:VP,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{begin:a,size:i}=n,o=r.shape,[s,u]=yVe(r,a,i),l=[];for(let c=0;c<e.rank;c++)l.push([s[c],o[c]-s[c]-u[c]]);return{x:()=>ZB(e,l)}}};var qGe={kernelName:JP,outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r]=t,{dim:a}=n,i=!0,o=Je(e,r);return{logits:()=>aa(o,Je(Gt(o,[a],i),r))}}};var HGe={kernelName:HP,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Je(e,Yw(n))}}};var xM={kernelName:XP,gradFunc:(e,t,n)=>{let{blockShape:r,paddings:a}=n;return{x:()=>Jw(e,r,a)}}};var SM={kernelName:YP,gradFunc:(e,t,n)=>{let{axis:r}=n;return{x:()=>t1(e,r)}}};var jGe={kernelName:jP,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>dr(e,Je(Ku(kt(n,"float32")),2))}}};var KGe={kernelName:kBe,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Je(e,Je(kt(n,"float32"),2))}}};var XGe={kernelName:ZP,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=Pr(2);return{a:()=>Je(e,Je(a,aa(n,r))),b:()=>Je(e,Je(a,aa(r,n)))}}};var YGe={kernelName:iB,gradFunc:e=>({x:()=>Kn(e)})};var JGe={kernelName:QP,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=fr(n.shape,r.shape);return{a:()=>{let s=e,u=Jr(n.shape,a);return u.length>0&&(s=Gt(s,u)),ve(s,n.shape)},b:()=>{let s=e,u=Jr(r.shape,a);return u.length>0&&(s=Gt(s,u)),ve(ga(s),r.shape)}}}};var ZGe={kernelName:KP,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,a=r.shape.slice(),{axis:i}=n;hs(i,r.shape).forEach(l=>{a[l]=1});let s=ve(e,a),u=Je(s,o2(r.shape,"float32"));return{x:()=>u}}};var QGe={kernelName:eB,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>dr(e,Yr(Zw(n)))}}};var eqe={kernelName:tB,outputsToSave:[!0],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Je(aa(Pr(1),Yr(n)),e)}}};var tqe={kernelName:Bw,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{reps:a}=n;return{x:()=>{let o=Kn(r);if(r.rank===1)for(let s=0;s<a[0];++s)o=so(o,fs(e,[s*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let s=0;s<a[0];++s)for(let u=0;u<a[1];++u)o=so(o,fs(e,[s*r.shape[0],u*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let s=0;s<a[0];++s)for(let u=0;u<a[1];++u)for(let l=0;l<a[2];++l)o=so(o,fs(e,[s*r.shape[0],u*r.shape[1],l*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let s=0;s<a[0];++s)for(let u=0;u<a[1];++u)for(let l=0;l<a[2];++l)for(let c=0;c<a[3];++c)o=so(o,fs(e,[s*r.shape[0],u*r.shape[1],l*r.shape[2],c*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return o}}}};var nqe={kernelName:W0,gradFunc:(e,t,n)=>{let r=n,{perm:a}=r,i=qw(a);return{x:()=>gc(e,i)}}};var rqe={kernelName:nB,gradFunc:(e,t,n)=>{let r=n,{axis:a}=r;return{value:()=>jw(e,a)}}};var aqe={kernelName:rB,inputsToSave:["segmentIds"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>iqe(e,n)}}};function iqe(e,t){let n=JB(t,Kn(t)),r=HB(e,n),a=r2(t,Pr(0,"int32")),i=r.rank-a.rank;for(let s=0;s<i;++s)a=qB(a,s+1);a=Zh(a,o2(r.shape,"bool"));let o=Kn(r);return Ys(a,r,o)}var oqe={kernelName:aB,gradFunc:e=>({x:()=>Kn(e)})};var sqe=[wB,bLe,wLe,kLe,NLe,ELe,ILe,CLe,_Le,ALe,FLe,RLe,VLe,GLe,HLe,KLe,XLe,YLe,JLe,aze,ize,sze,dze,cze,gze,bze,xze,Fze,Bze,Lze,CGe,zze,Vze,Wze,Uze,Gze,Hze,qze,Xze,Zze,Qze,e$e,t$e,n$e,r$e,i$e,o$e,s$e,u$e,p$e,dM,dM,h$e,g$e,w$e,x$e,S$e,k$e,T$e,I$e,C$e,D$e,_$e,A$e,R$e,fM,fM,P$e,B$e,IGe,DGe,_Ge,AGe,FGe,RGe,OGe,MGe,PGe,BGe,LGe,zGe,$Ge,VGe,WGe,UGe,GGe,qGe,HGe,xM,xM,SM,SM,jGe,XGe,KGe,YGe,JGe,ZGe,QGe,eqe,tqe,nqe,rqe,aqe,oqe];for(let e of sqe)VBe(e);pe().prototype.abs=function(){return this.throwIfDisposed(),Ks(this)};pe().prototype.acos=function(){return this.throwIfDisposed(),xVe(this)};pe().prototype.acosh=function(){return this.throwIfDisposed(),kVe(this)};pe().prototype.add=function(e){return this.throwIfDisposed(),so(this,e)};pe().prototype.all=function(e,t){return this.throwIfDisposed(),TVe(this,e,t)};pe().prototype.any=function(e,t){return this.throwIfDisposed(),IVe(this,e,t)};pe().prototype.argMax=function(e){return this.throwIfDisposed(),DVe(this,e)};pe().prototype.argMin=function(e){return this.throwIfDisposed(),AVe(this,e)};pe().prototype.asScalar=function(){return this.throwIfDisposed(),se(this.size===1,()=>"The array must have only 1 element."),ve(this,[])};pe().prototype.asType=function(e){return this.throwIfDisposed(),kt(this,e)};pe().prototype.as1D=function(){return this.throwIfDisposed(),ve(this,[this.size])};pe().prototype.as2D=function(e,t){return this.throwIfDisposed(),ve(this,[e,t])};pe().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),ve(this,[e,t,n])};pe().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),ve(this,[e,t,n,r])};pe().prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),ve(this,[e,t,n,r,a])};pe().prototype.asin=function(){return this.throwIfDisposed(),RVe(this)};pe().prototype.asinh=function(){return this.throwIfDisposed(),MVe(this)};pe().prototype.atan=function(){return this.throwIfDisposed(),BVe(this)};pe().prototype.atan2=function(e){return this.throwIfDisposed(),zVe(this,e)};pe().prototype.atanh=function(){return this.throwIfDisposed(),VVe(this)};pe().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),$B(this,e,t,n,r)};pe().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),Jw(this,e,t)};pe().prototype.batchNorm=function(e,t,n,r,a){return this.throwIfDisposed(),YVe(this,e,t,n,r,a)};pe().prototype.broadcastTo=function(e){return this.throwIfDisposed(),q0(this,e)};pe().prototype.cast=function(e){return this.throwIfDisposed(),kt(this,e)};pe().prototype.ceil=function(){return this.throwIfDisposed(),ZVe(this)};pe().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),tWe(this,e,t)};pe().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof Da&&(e=[e]),t1([this,...e],t)};pe().prototype.conv1d=function(e,t,n,r,a,i){return this.throwIfDisposed(),rWe(this,e,t,n,r,a,i)};pe().prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),iWe(this,e,t,n,r,a)};pe().prototype.conv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),i2(this,e,t,n,r,a,i)};pe().prototype.cos=function(){return this.throwIfDisposed(),Zw(this)};pe().prototype.cosh=function(){return this.throwIfDisposed(),VB(this)};pe().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),_w(this,e,t,n)};pe().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),CB(this,e,t,n)};pe().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),cWe(this,e,t)};pe().prototype.depthwiseConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),WB(this,e,t,n,r,a,i)};pe().prototype.dilation2d=function(e,t,n,r,a){return this.throwIfDisposed(),fWe(this,e,t,n,r,a)};pe().prototype.divNoNan=function(e){return this.throwIfDisposed(),mWe(this,e)};pe().prototype.div=function(e){return this.throwIfDisposed(),dr(this,e)};pe().prototype.dot=function(e){return this.throwIfDisposed(),gWe(this,e)};pe().prototype.elu=function(){return this.throwIfDisposed(),bWe(this)};pe().prototype.equal=function(e){return this.throwIfDisposed(),Kw(this,e)};pe().prototype.erf=function(){return this.throwIfDisposed(),xWe(this)};pe().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),EWe(this,e,t)};pe().prototype.exp=function(){return this.throwIfDisposed(),Xu(this)};pe().prototype.expandDims=function(e){return this.throwIfDisposed(),qB(this,e)};pe().prototype.expm1=function(){return this.throwIfDisposed(),DWe(this)};pe().prototype.fft=function(){return this.throwIfDisposed(),QB(this)};pe().prototype.flatten=function(){return this.throwIfDisposed(),ve(this,[this.size])};pe().prototype.floor=function(){return this.throwIfDisposed(),OB(this)};pe().prototype.floorDiv=function(e){return this.throwIfDisposed(),xB(this,e)};pe().prototype.gather=function(e,t,n){return this.throwIfDisposed(),HB(this,e,t,n)};pe().prototype.greaterEqual=function(e){return this.throwIfDisposed(),r2(this,e)};pe().prototype.greater=function(e){return this.throwIfDisposed(),ld(this,e)};pe().prototype.ifft=function(){return this.throwIfDisposed(),Fw(this)};pe().prototype.irfft=function(){return this.throwIfDisposed(),rGe(this)};pe().prototype.isFinite=function(){return this.throwIfDisposed(),FWe(this)};pe().prototype.isInf=function(){return this.throwIfDisposed(),OWe(this)};pe().prototype.isNaN=function(){return this.throwIfDisposed(),PWe(this)};pe().prototype.leakyRelu=function(e){return this.throwIfDisposed(),LWe(this,e)};pe().prototype.lessEqual=function(e){return this.throwIfDisposed(),a2(this,e)};pe().prototype.less=function(e){return this.throwIfDisposed(),RB(this,e)};pe().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),$We(this,e,t,n,r)};pe().prototype.logSigmoid=function(){return this.throwIfDisposed(),HWe(this)};pe().prototype.logSoftmax=function(e){return this.throwIfDisposed(),KWe(this,e)};pe().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),YWe(this,e,t)};pe().prototype.log=function(){return this.throwIfDisposed(),s2(this)};pe().prototype.log1p=function(){return this.throwIfDisposed(),WWe(this)};pe().prototype.logicalAnd=function(e){return this.throwIfDisposed(),Zh(this,e)};pe().prototype.logicalNot=function(){return this.throwIfDisposed(),Qw(this)};pe().prototype.logicalOr=function(e){return this.throwIfDisposed(),XB(this,e)};pe().prototype.logicalXor=function(e){return this.throwIfDisposed(),eUe(this,e)};pe().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),Si(this,e,t,n)};pe().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),YB(this,e,t,n,r)};pe().prototype.max=function(e,t){return this.throwIfDisposed(),nd(this,e,t)};pe().prototype.maximum=function(e){return this.throwIfDisposed(),JB(this,e)};pe().prototype.mean=function(e,t){return this.throwIfDisposed(),aUe(this,e,t)};pe().prototype.min=function(e,t){return this.throwIfDisposed(),Aw(this,e,t)};pe().prototype.minimum=function(e){return this.throwIfDisposed(),oUe(this,e)};pe().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),uUe(this,e,t)};pe().prototype.mod=function(e){return this.throwIfDisposed(),cUe(this,e)};pe().prototype.mul=function(e){return this.throwIfDisposed(),Je(this,e)};pe().prototype.neg=function(){return this.throwIfDisposed(),ga(this)};pe().prototype.norm=function(e,t,n){return this.throwIfDisposed(),GB(this,e,t,n)};pe().prototype.notEqual=function(e){return this.throwIfDisposed(),dUe(this,e)};pe().prototype.oneHot=function(e,t=1,n=0){return this.throwIfDisposed(),mVe(this,e,t,n)};pe().prototype.onesLike=function(){return this.throwIfDisposed(),hUe(this)};pe().prototype.pad=function(e,t){return this.throwIfDisposed(),ZB(this,e,t)};pe().prototype.pool=function(e,t,n,r,a,i){return this.throwIfDisposed(),bUe(this,e,t,n,r,a,i)};pe().prototype.pow=function(e){return this.throwIfDisposed(),u2(this,e)};pe().prototype.prelu=function(e){return this.throwIfDisposed(),xUe(this,e)};pe().prototype.prod=function(e,t){return this.throwIfDisposed(),kUe(this,e,t)};pe().prototype.reciprocal=function(){return this.throwIfDisposed(),LUe(this)};pe().prototype.relu=function(){return this.throwIfDisposed(),$Ue(this)};pe().prototype.relu6=function(){return this.throwIfDisposed(),WUe(this)};pe().prototype.reshapeAs=function(e){return this.throwIfDisposed(),ve(this,e.shape)};pe().prototype.reshape=function(e){return this.throwIfDisposed(),ve(this,e)};pe().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),wGe(this,e,t,n)};pe().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),SGe(this,e,t,n)};pe().prototype.reverse=function(e){return this.throwIfDisposed(),e2(this,e)};pe().prototype.rfft=function(){return this.throwIfDisposed(),iGe(this)};pe().prototype.round=function(){return this.throwIfDisposed(),qUe(this)};pe().prototype.rsqrt=function(){return this.throwIfDisposed(),DB(this)};pe().prototype.selu=function(){return this.throwIfDisposed(),jUe(this)};pe().prototype.separableConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),XUe(this,e,t,n,r,a,i)};pe().prototype.sigmoid=function(){return this.throwIfDisposed(),Yw(this)};pe().prototype.sign=function(){return this.throwIfDisposed(),JUe(this)};pe().prototype.sin=function(){return this.throwIfDisposed(),TB(this)};pe().prototype.sinh=function(){return this.throwIfDisposed(),EB(this)};pe().prototype.slice=function(e,t){return this.throwIfDisposed(),fs(this,e,t)};pe().prototype.softmax=function(e){return this.throwIfDisposed(),QUe(this,e)};pe().prototype.softplus=function(){return this.throwIfDisposed(),KB(this)};pe().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),Gw(this,e,t)};pe().prototype.split=function(e,t){return this.throwIfDisposed(),J0(this,e,t)};pe().prototype.sqrt=function(){return this.throwIfDisposed(),Ku(this)};pe().prototype.square=function(){return this.throwIfDisposed(),Yr(this)};pe().prototype.squaredDifference=function(e){return this.throwIfDisposed(),sGe(this,e)};pe().prototype.squeeze=function(e){return this.throwIfDisposed(),lGe(this,e)};pe().prototype.stack=function(e,t){this.throwIfDisposed();let n=e instanceof Da?[this,e]:[this,...e];return jw(n,t)};pe().prototype.step=function(e){return this.throwIfDisposed(),n2(this,e)};pe().prototype.stridedSlice=function(e,t,n,r,a,i,o,s){return this.throwIfDisposed(),pGe(this,e,t,n,r,a,i,o,s)};pe().prototype.sub=function(e){return this.throwIfDisposed(),aa(this,e)};pe().prototype.sum=function(e,t){return this.throwIfDisposed(),Gt(this,e,t)};pe().prototype.tan=function(){return this.throwIfDisposed(),fGe(this)};pe().prototype.tanh=function(){return this.throwIfDisposed(),HVe(this)};pe().prototype.tile=function(e){return this.throwIfDisposed(),_B(this,e)};pe().prototype.toBool=function(){return this.throwIfDisposed(),kt(this,"bool")};pe().prototype.toFloat=function(){return this.throwIfDisposed(),kt(this,"float32")};pe().prototype.toInt=function(){return this.throwIfDisposed(),kt(this,"int32")};pe().prototype.topk=function(e,t){return this.throwIfDisposed(),vGe(this,e,t)};pe().prototype.transpose=function(e){return this.throwIfDisposed(),gc(this,e)};pe().prototype.unique=function(e){return this.throwIfDisposed(),yGe(this,e)};pe().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),AB(this,e,t)};pe().prototype.unstack=function(e){return this.throwIfDisposed(),MB(this,e)};pe().prototype.where=function(e,t){return this.throwIfDisposed(),Ys(e,this,t)};pe().prototype.zerosLike=function(){return this.throwIfDisposed(),Kn(this)};var uqe="4.21.0";var lqe={"tfjs-core":dw.version_core,"tfjs-backend-cpu":mw.version_cpu,"tfjs-backend-webgl":vw.version_webgl,"tfjs-data":kM.version_data,"tfjs-layers":fw.version_layers,"tfjs-converter":hw.version_converter,tfjs:uqe};ki.data=PPe;ki.version=lqe;Object.keys(dw).forEach(function(e){e!=="default"&&!ki.hasOwnProperty(e)&&Object.defineProperty(ki,e,{enumerable:!0,get:function(){return dw[e]}})});Object.keys(fw).forEach(function(e){e!=="default"&&!ki.hasOwnProperty(e)&&Object.defineProperty(ki,e,{enumerable:!0,get:function(){return fw[e]}})});Object.keys(hw).forEach(function(e){e!=="default"&&!ki.hasOwnProperty(e)&&Object.defineProperty(ki,e,{enumerable:!0,get:function(){return hw[e]}})});Object.keys(mw).forEach(function(e){e!=="default"&&!ki.hasOwnProperty(e)&&Object.defineProperty(ki,e,{enumerable:!0,get:function(){return mw[e]}})});Object.keys(vw).forEach(function(e){e!=="default"&&!ki.hasOwnProperty(e)&&Object.defineProperty(ki,e,{enumerable:!0,get:function(){return vw[e]}})})});var FXe={};Xz(FXe,{helpers:()=>Oz,metrics:()=>Mz,models:()=>Pz});module.exports=Yz(FXe);var Jz=Object.defineProperty,Zz=(e,t,n)=>t in e?Jz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,i8=(e,t,n)=>(Zz(e,typeof t!="symbol"?t+"":t,n),n);function Be(e){return typeof e=="number"&&!isNaN(e)||typeof e=="bigint"}var Qz=new Function(`
  try {
    return this === window
  } catch(e) {}

  try {
    return typeof importScripts !== "undefined"
  } catch(e) {}

  return false
`),ou=class extends Error{constructor(e){Qz()?super(e):super(`

\x1B[31m`+e+`
\x1B[0m`)}};function Z(e,t){if(!e)throw new ou(t)}var o8=[Array,ArrayBuffer,BigInt64Array,BigUint64Array,Float32Array,Float64Array,Int16Array,Int32Array,Int8Array,Uint16Array,Uint32Array,Uint8Array,Uint8ClampedArray];function Qe(e){return e===null||typeof e>"u"}var e$=o8.map(e=>e.name);function Ce(e){try{return e instanceof Array?!0:Qe(e.constructor)?!1:o8.indexOf(e.constructor)>-1||e$.indexOf(e.constructor.name)>-1}catch{return!1}}function et(e){try{return!!e._symbol&&e._symbol===Symbol.for("@jrc03c/js-math-tools/dataframe")}catch{return!1}}function Jn(e){return typeof e=="function"}function jo(e){return typeof e=="object"&&!Qe(e)&&!Ce(e)}function ot(e){try{return!!e._symbol&&e._symbol===Symbol.for("@jrc03c/js-math-tools/series")}catch{return!1}}function Mc(e,t){if(et(e)){let i=Mc(e.values,t);return i.length>0&&Be(i[0])&&i[0]>=0&&i[0]<e.index.length&&(i[0]=e.index[i[0]]),i.length>1&&Be(i[1])&&i[1]>=0&&i[1]<e.columns.length&&(i[1]=e.columns[i[1]]),i}if(ot(e)){let i=Mc(e.values,t);return i.length>0&&Be(i[0])&&i[0]>=0&&i[0]<e.index.length&&(i[0]=e.index[i[0]]),i}if(Z(jo(e)||Ce(e),"You must pass (1) an object, array, Series, or DataFrame and (2) a function or value into the `indexOf` function!"),!Jn(t)){let i=t;t=o=>o===i}function n(i,o,s){if(s=s||[],s.indexOf(i)>-1)return null;if(jo(i)){s.push(i);let u=Object.keys(i).concat(Object.getOwnPropertySymbols(i));for(let l=0;l<u.length;l++){let c=u[l],p=i[c];if(o(p))return[c];let d=n(p,o,s);if(d&&d.length>0)return[c].concat(d)}}else if(Ce(i)){s.push(i);for(let u=0;u<i.length;u++){let l=i[u];if(o(l))return[u];let c=n(l,o,s);if(c&&c.length>0)return[u].concat(c)}}else if(o(i))return[];return null}function r(i){try{return t(i)}catch{return!1}}let a=n(e,r);return a&&a.length>0?a:null}function Qr(e){function t(n){if(typeof n=="object"){if(n===null)return null;if(Ce(n))return n instanceof Array?n.map(a=>Qr(a)):n.slice();if(ot(n)){let a=n.copy();return a.values=Qr(a.values),a}if(et(n)){let a=n.copy();return a.values=Qr(n.values),a}if(n instanceof Date)return new Date(n.getTime());n=Pc(n);let r={};return Object.keys(n).concat(Object.getOwnPropertySymbols(n)).forEach(a=>{r[a]=Qr(n[a])}),r}else return n}return t(Pc(e))}function Pc(e){function t(a,i,o){if(i=i||[],o=o||"",i.indexOf(a)>-1){let s=o.split("/").slice(o.startsWith("/")?1:0);if(s.some((l,c)=>{let p=s.slice(0,s.length-c-1),d=n;return p.forEach(f=>{d=d[f]}),d===a}))return`<reference to "${n===a?"/":"/"+Mc(n,a).join("/")}">`}return typeof a=="object"?a===null?null:(i.push(a),Ce(a)?typeof a.constructor<"u"&&a.constructor.name!=="Array"?a.slice():a.map((s,u)=>t(s,i,o+"/"+u)):(Object.keys(a).concat(Object.getOwnPropertySymbols(a)).forEach(s=>{a[s]=t(a[s],i,o+"/"+s.toString())}),a)):a}let n=e,r=t(n);if(et(e)){let a=e.copy();a._values=r.values,a._columns=r.columns,a._index=r.index,r=a}if(ot(e)){let a=e.copy();a.name=r.name,a._values=r.values,a._index=r.index,r=a}return r}function Ts(e){return e instanceof Date&&e.toString()!=="Invalid Date"}var Y5=["number","int","float","bigint"];function la(e,t){function n(r,a){let i=typeof r,o=typeof a;if(i!==o&&!Y5.includes(i)&&!Y5.includes(o))return!1;if(i==="undefined"&&o==="undefined")return!0;if(i==="boolean"||i==="symbol")return r===a;if(i==="number"||i==="bigint")try{let s=r.toString(),u=a.toString();return s===u}catch{return!1}if(i==="string"||i==="function")return r===a;if(i==="object"){if(r===null||a===null)return r===null&&a===null;{if(Ts(r))return Ts(a)?r.getTime()===a.getTime():!1;if(Ts(a))return!1;if(r instanceof RegExp&&a instanceof RegExp)return r.toString()===a.toString();if(Ce(r)!==Ce(a))return!1;let s=Object.keys(r).concat(Object.getOwnPropertySymbols(r)),u=Object.keys(a).concat(Object.getOwnPropertySymbols(a));if(s.length!==u.length)return!1;for(let l=0;l<s.length;l++){let c=s[l];if(!n(r[c],a[c]))return!1}return!0}}}try{return n(e,t)}catch{return n(Pc(e),Pc(t))}}function Vd(e){let t="abcdefg1234567890",n="";for(;n.length<e;)n+=t[Math.floor(Math.random()*t.length)];return n}var t$=Vd(16),n$=Vd(16),r$=Vd(16),a$=Vd(16),i$=Vd(16),o$=class{constructor(){this.clear()}get counts(){return this.values.map(e=>this.get(e))}get values(){return Object.values(this.valuesDict)}clear(){return this.countsDict={},this.valuesDict={},this}count(e){for(let t of e)Ce(t)?this.count(t):this.increment(t);return this}delete(e){let t=this.getStandardizedKey(e);return delete this.countsDict[t],delete this.valuesDict[t],this}get(e){return this.countsDict[this.getStandardizedKey(e)]||0}getStandardizedKey(e){return typeof e=="object"&&e===null?t$:Qe(e)?n$:Jn(e)?e.toString():typeof e=="symbol"?e.toString()+" - "+i$:e===1/0?r$:e===-1/0?a$:typeof e=="bigint"?e.toString():et(e)?e.toJSONString():ot(e)?JSON.stringify(e.toObject()):JSON.stringify(e)}has(e){return!Qe(this.countsDict[this.getStandardizedKey(e)])}increment(e){return this.set(e,this.get(e)+1)}set(e,t){let n=this.getStandardizedKey(e);return this.countsDict[n]=t,this.valuesDict[n]=e,this}toArray(){return this.values.map(e=>({value:e,count:this.get(e)}))}toObject(){let e={};return this.values.forEach(t=>{e[t]=this.get(t)}),e}};function Pa(e){if(et(e)||ot(e))return Pa(e.values);Z(Ce(e),"The `flatten` function only works on arrays, Series, and DataFrames!");function t(n){let r=[];return n.forEach(a=>{Ce(a)?r=r.concat(t(a)):r.push(a)}),r}return t(e)}function ui(e,t){t=t||{};let n=new o$,r={},a=Pa(e),i=[],o=-1/0,s=1/0,u=!1,l=0;for(let p of a){if(typeof p=="bigint"&&(u=!0),!t.shouldDropNaNs||Be(p))try{p>o&&(o=p),p<s&&(s=p),l+=Number(p),i.push(p)}catch{o=NaN,s=NaN,l=NaN}n.increment(p)}let c=l/i.length;if(r.counts=n,r.max=o,r.mean=c,r.min=s,r.n=a.length,r.sum=l,isNaN(r.mean)&&(r.max=NaN,r.min=NaN),t.shouldDropNaNs&&(r.nWithoutNaNs=i.length),t.mode){let p=Array.from(n.values.map(h=>[h,n.get(h)])).toSorted((h,m)=>m[1]-h[1]),d=p[0][1],f=[];for(let h of p)if(h[1]==d)f.push(h[0]);else break;r.mode=f.toSorted()}if(t.median)if(isNaN(c))r.median=NaN;else{let p=i.toSorted((f,h)=>Number(f)-Number(h)),d=Math.floor(p.length/2);if(p.length%2===0){let f=p[d-1],h=p[d];if(r.median=(Number(f)+Number(h))/2,u&&typeof f=="bigint"&&typeof h=="bigint")try{r.median=BigInt(r.median)}catch{}}else r.median=p[d]}if(t.stdev||t.variance){let p=0;for(let f of i)p+=Math.pow(Number(f)-c,2);p/=i.length;let d=Math.sqrt(p);r.stdev=d,r.variance=p}if(u){try{r.sum=BigInt(r.sum)}catch{}try{r.mean=BigInt(r.mean)}catch{}t.mode&&(r.mode=r.mode.map(p=>{try{return BigInt(p)}catch{return p}}))}return r}function G1(e,t){let{counts:n}=ui(e);return Qe(t)||(Jn(t)?n.values.forEach(r=>{t(r)||n.delete(r)}):n.values.forEach(r=>{la(r,t)||n.delete(r)})),n}function L2(e){if(et(e)||ot(e))return L2(e.values);if(Ce(e)){let t=!1,n=!1,r=null;for(let a of e){if(L2(a))return!0;if(Ce(a)){if(r===null)r=a.length;else if(a.length!==r)return!0;t=!0}else n=!0;if(t&&n)return!0}}return!1}function Wd(e){return L2(Pc(e))}function K1(e){if(et(e)||ot(e))return K1(e.values);Z(Ce(e),"The `isNested` function only works on arrays, Series, and DataFrames!");for(let t=0;t<e.length;t++)if(Ce(e[t]))return!0;return!1}var Fc="You must pass a natural number or a one-dimensional array of natural numbers into the `ndarray` function!";function ho(e){Z(!Qe(e),Fc),Ce(e)||(e=[e]),Z(!K1(e),Fc),Z(e.length>0,Fc);let t=e[0];if(typeof t=="bigint"&&(t=Number(t)),Z(Be(t),Fc),Z(t>=0,Fc),Z(Math.floor(t)===t,Fc),Z(t!==1/0,"We can't create an array containing an infinite number of values!"),e.length===1){let n=[];for(let r=0;r<t;r++)n.push(void 0);return n}else{let n=[];for(let r=0;r<t;r++)n.push(ho(e.slice(1)));return n}}function Ho(e){if(et(e)||ot(e)){let n=e.copy();return n.values=Ho(n.values),n.index=Ho(n.index),n}Z(Ce(e),"The `reverse` function only works on arrays, Series, and DataFrames!");let t=[];for(let n=e.length-1;n>=0;n--)t.push(e[n]);return t}function ir(e,t,n=1){Z(!Qe(e)&&!Qe(t)&&!Qe(n),"You must pass two numbers and optionally a step value to the `range` function!"),Z(Be(e)&&Be(t)&&Be(n),"You must pass two numbers and optionally a step value to the `range` function!"),Z(n>0,"The step value must be greater than 0! (NOTE: The step value is a magnitude; it does not indicate direction.)");let r=!1,a=typeof e=="bigint"||typeof t=="bigint"||typeof n=="bigint";if(e=Number(e),t=Number(t),n=Number(n),e>t){r=!0;let o=e;e=t+n,t=o+n}let i=[];for(let o=e;o<t;o+=n)if(a)try{i.push(BigInt(o))}catch{i.push(o)}else i.push(o);return r&&(i=Ho(i)),i}function Ud(e){let t="abcdefg1234567890",n="";for(;n.length<e;)n+=t[Math.floor(Math.random()*t.length)];return n}var s$=Ud(256),u$=Ud(256),l$=Ud(256),c$=Ud(256),p$=Ud(256);function Ai(e){if(et(e)||ot(e))return Ai(e.values);Z(Ce(e),"The `set` function only works on arrays, Series, and DataFrames!");let t=[],n={};return Pa(e).forEach(r=>{let a=typeof r=="object"&&r===null?s$:Qe(r)?u$:Jn(r)?r.toString():typeof r=="symbol"?r.toString()+" - "+p$:r===1/0?l$:r===-1/0?c$:typeof r=="bigint"?r.toString():et(r)?r.toJSONString():ot(r)?JSON.stringify(r.toObject()):JSON.stringify(r);n[a]||t.push(r),n[a]=!0}),t}function s8(e){if(Ce(e)){let t=s8(e[0]);return[e.length].concat(t||[])}else return}function it(e){return et(e)||ot(e)?it(e.values):(Z(Ce(e),"The `shape` function only works on arrays, Series, and DataFrames!"),s8(e))}function u8(e,t,n){if(Qe(n)&&(n=0),Z(n===0||n===1||n==="vertical"||n==="horizontal",'The only valid axis values for use when appending data to a DataFrame are 0, 1, "vertical", and "horizontal". Note that 0 == "horizontal" and 1 == "vertical".'),Ce(t)){Z(!Wd(t),"The array of data you're trying to append to this DataFrame is jagged!");let r=it(t);if(r.length===1)if(n===0){let a=e.copy();a._values.push(t);let i=Math.max(e.shape[1],r[0]);for(a._values.forEach(o=>{for(;o.length<i;)o.push(void 0)});a._index.length<a._values.length;)a._index.push("row"+a._index.length);for(;a._columns.length<i;)a._columns.push("col"+a._columns.length);return a}else{let a=Math.max(e.shape[0],r[0]),i=e.copy();for(ir(0,a).forEach(o=>{o>=i._values.length&&i._values.push(ho(e.shape[1])),i._values[o].push(t[o])});i._index.length<i._values.length;)i._index.push("row"+i._index.length);for(;i._columns.length<i._values[0].length;)i._columns.push("col"+i._columns.length);return i}else if(r.length===2)if(n===0){let a=Math.max(...t.map(o=>o.length).concat([e.shape[1]])),i=e.copy();for(i._values=i._values.concat(t).map(o=>{for(;o.length<a;)o.push(void 0);return o});i._index.length<i._values.length;)i._index.push("row"+i._index.length);for(;i._columns.length<a;)i._columns.push("col"+i._columns.length);return i}else{let a=Math.max(...t.map(s=>s.length))+e.shape[1],i=Math.max(e.shape[0],r[0]),o=e.copy();for(ir(0,i).forEach(s=>{for(s>=o._values.length&&o._values.push(ho(e.shape[1])),o._values[s]=o._values[s].concat(t[s]);o._values[s].length<a;)o._values[s].push(void 0)});o._index.length<o._values.length;)o._index.push("row"+o._index.length);for(;o._columns.length<a;)o._columns.push("col"+o._columns.length);return o}else throw new ou("Only 1- and 2-dimensional arrays can be appended to a DataFrame!")}else if(ot(t)){let r=u8(e,t.values,n);return n===0?r.index[r.index.length-1]=r.index.indexOf(t.name)>-1?t.name+" (2)":t.name:r.columns[r.columns.length-1]=r.columns.indexOf(t.name)>-1?t.name+" (2)":t.name,r}else if(et(t))if(n===0){let r=e.copy(),a=Ai(r._columns.concat(t._columns)).length;for(r._values.forEach(i=>{for(;i.length<a;)i.push(void 0)}),t.apply(i=>{let o=i.copy(),s=[];r._columns.forEach(u=>{let l=o._index.indexOf(u);l>-1?(s.push(o._values[l]),o._values.splice(l,1),o._index.splice(l,1)):s.push(void 0)}),r._values.push(s.concat(o._values))},1),r._columns=r._columns.concat(t._columns.filter(i=>r._columns.indexOf(i)<0));r._index.length<r._values.length;){let i="row"+r._index.length;r._index.push(i+(e._index.indexOf(i)>-1?" (2)":""))}return r}else{let r=e.copy();return r._index.forEach((a,i)=>{let o=t._index.indexOf(a);o>-1?r._values[i]=r._values[i].concat(t._values[o]):r._values[i]=r._values[i].concat(ho(t.shape[1]))}),t._index.forEach((a,i)=>{r._index.indexOf(a)<0&&(r._index.push(a),r._values.push(ho(r._columns.length).concat(t._values[i])))}),r._columns=r._columns.concat(t._columns.map(a=>a+(r._columns.indexOf(a)>-1?" (2)":""))),r}else throw new ou("Only 1- or 2-dimensional arrays, Series, and DataFrames can be appended to a DataFrame!")}function d$(e,t,n,r,a){if(a=a||0,Z(Jn(r),"The first parameter to the `apply` method must be a function."),Z(a===0||a===1,"The second parameter to the `apply` method (the `axis`) must be 0 or 1."),a===0){let i={},o;if(n.columns.forEach((s,u)=>{let l=new t(n.values.map(p=>p[u]));l.name=s,l.index=n.index;let c=r(l,u,n);c instanceof t?i[s]=c.values:i[s]=c,Qe(o)&&(o=c instanceof t||Ce(c))}),o){let s=new e(i);return s.index=n.index,s}else{let s=new t(n.columns.map(u=>i[u]));return s.index=n.columns,s}}else if(a===1){let i,o=n.values.map((s,u)=>{let l=new t(s);l.name=n.index[u],l.index=n.columns;let c=r(l,u,n);return Qe(i)&&(i=c instanceof t||Ce(c)),c instanceof t?c.values:c});if(i){let s=new e(o);return s.index=n.index,s.columns=n.columns,s}else{let s=new t(o);return s.index=n.index,s}}}function hn(e){return typeof e=="string"}function f$(e,t,n,r,a){let i=s=>s instanceof e,o=s=>s instanceof t;if(Qe(a)){if(i(r))return n.append(r,1);if(o(r))return n.append(r,1);if(jo(r)){let s=Math.max(...Object.keys(r).concat(Object.getOwnPropertySymbols(r)).map(u=>r[u].length));return Object.keys(r).concat(Object.getOwnPropertySymbols(r)).forEach(u=>{for(;r[u].length<s;)r[u].push(void 0)}),n.append(new e(r),1)}else throw new ou("You must pass a DataFrame, Series, or object into the `assign` method!")}else{Z(hn(r),"If passing two arguments into the `assign` method, then the first argument must be a string name!"),Z(Ce(a)&&!Wd(a)&&it(a).length===1,"If passing two arguments into the `assign` method, then the second argument must be a 1-dimensional array!");let s=n.append(a,1);return s.columns[s.columns.length-1]=r,s}}function h$(e,t){if(t.isEmpty)return new e;let n=new e(Qr(t.values));return n.columns=t.columns.slice(),n.index=t.index.slice(),n}function m$(e,t,n,r,a){Qe(r)&&(r=[]),Qe(a)&&(a=[]),(hn(r)||Be(r))&&(r=[r]),(hn(a)||Be(a))&&(a=[a]),Z(Ce(r),"The `drop` method only works on 1-dimensional arrays of numerical indices and/or strings."),Z(Ce(a),"The `drop` method only works on 1-dimensional arrays of numerical indices and/or strings."),Z(it(r).length===1,"The `drop` method only works on 1-dimensional arrays of numerical indices and/or strings."),Z(it(a).length===1,"The `drop` method only works on 1-dimensional arrays of numerical indices and/or strings.");let i,o;n.index.forEach((u,l)=>{r.indexOf(u)<0&&r.indexOf(l)<0&&(i||(i=[]),i.push(u))}),n.columns.forEach((u,l)=>{a.indexOf(u)<0&&a.indexOf(l)<0&&(o||(o=[]),o.push(u))});let s=n.get(i,o);if(s instanceof t){let u=new e;u=u.assign(s),n.index.indexOf(s.name)>-1&&(u=u.transpose()),s=u}return s}function l8(e){return Be(e)&&(e>=0?Math.floor(e)===e:Math.ceil(e)===e)}function Bc(e){return l8(e)&&e>=0}function v$(e,t,n,r,a,i){r=r||0,Z(r===0||r===1,"The first parameter of the `dropMissing` method (the `axis`) must be 0 or 1."),i=i||0,Z(Bc(i),"The third parameter of the `dropMissing` method (the `threshold`) should be a whole number (meaning that data should be dropped if it contains more than `threshold` null values)."),a=i>0?"none":a||"any",Z(a==="any"||a==="all"||a==="none","The second parameter of the `dropMissing` method (the `condition` parameter, which indicates the condition under which data should be dropped) should be 'any' or 'all' (meaning that if 'any' of the data contains null values, then it should be dropped; or that if 'all' of the data contains null values, then it should be dropped).");function o(l){if(i>0){let c=0;for(let p=0;p<l.length;p++){let d=l[p];if(Qe(d)&&c++,c>=i)return[]}}else if(a==="any")for(let c=0;c<l.length;c++){let p=l[c];if(Qe(p))return[]}else if(a==="all"){for(let c=0;c<l.length;c++){let p=l[c];if(!Qe(p))return l}return[]}return l}let s=n.copy(),u=Math.random().toString();if(r===0){s=s.assign(u,s.index);let l=s.values.map(o).filter(p=>p.length>0);if(it(l).length<2)return new e;s.values=l;let c=s.get(null,u);if(Qe(c))return new e;hn(c)&&(c=[c]),c instanceof t&&(c=c.values),s.index=c,s=s.drop(null,u)}else if(r===1){let l={};if(s.columns.forEach((p,d)=>{let f=s.values.map(m=>m[d]),h=o(f);h.length>0&&(l[p]=h)}),Object.keys(l).length+Object.getOwnPropertySymbols(l).length===0)return new e;let c=new e(l);return c.index=s.index,c}return s}function j2(e){if(et(e)||ot(e))return e.dropNaN(...Object.values(arguments).slice(1));Z(Ce(e),"The `dropNaN` function only works on arrays, Series, and DataFrames!");let t=[];return e.forEach(n=>{try{return t.push(j2(n))}catch{if(Be(n))return t.push(n)}}),t}function g$(e,t,n,r,a){n=n||0,Z(n===0||n===1,"The first parameter of the `dropNaN` method (the `axis`) must be 0 or 1."),a=a||0,Z(Bc(a),"The third parameter of the `dropNaN` method (the `threshold`) should be a whole number (meaning that data should be dropped if it contains more than `threshold` NaN values)."),r=a>0?"none":r||"any",Z(r==="any"||r==="all"||r==="none","The second parameter of the `dropNaN` method (the `condition` parameter, which indicates the condition under which data should be dropped) should be 'any' or 'all' (meaning that if 'any' of the data contains NaN values, then it should be dropped; or that if 'all' of the data contains NaN values, then it should be dropped).");function i(s){let u=j2(s);return a>0?s.length-u.length<a:r==="any"?u.length===s.length:r==="all"?u.length>0:!0}let o=t.copy();if(n===0){let s=o.index.filter(u=>{let l=o.get(u,null).values;return i(l)});return s.length>0?o.get(s,null):new e}else if(n===1){let s=o.columns.filter(u=>{let l=o.get(null,u).values;return i(l)});return s.length>0?o.get(null,s):new e}return o}function J5(e){let t={};return Pa(e).forEach((n,r)=>{t[n]=r}),t}function Rc(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e)).sort((t,n)=>e[t]-e[n])}function y$(e,t,n,r,a){Z(Jn(r),"The `filter` method takes a single parameter: a function that is used to filter the values."),Qe(a)&&(a=0),Z(a===0||a===1,"The `axis` parameter to the `filter` method must be 0 or 1.");let i=n.copy();if(i.isEmpty)return i;let o=J5(i.index),s=J5(i.columns);if(a===0){let u=0,l=i.values.filter((c,p)=>{let d=new t(c);d.name=n.index[p],d.index=n.columns;let f=r(d,p,n);return f?u++:delete o[i.index[p]],f});if(u===0)return new e;if(u===1){let c=new t(l[0]);return c.name=Rc(o)[0],c.index=Rc(s),c}i.values=l,i.index=Rc(o)}else if(a===1){i=i.transpose();let u=0,l=i.values.filter((c,p)=>{let d=new t(c);d.name=n.columns[p],d.index=n.index;let f=r(d,p,n);return f?u++:delete s[i.index[p]],f});if(u===0)return new e;if(u===1){let c=new t(l[0]);return c.name=Rc(s)[0],c.index=Rc(o),c}i.values=l,i.index=Rc(s),i=i.transpose()}return i}function b$(e,t,n){(hn(t)||Be(t))&&(t=[t]),(hn(n)||Be(n))&&(n=[n]);for(let a in t)typeof t[a]=="bigint"&&(t[a]=Number(t[a]));for(let a in n)typeof n[a]=="bigint"&&(n[a]=Number(n[a]));let r=Ai((t||[]).concat(n||[]).map(a=>typeof a));return Z(r.length<=2,"Only whole numbers and/or strings are allowed in `get` arrays!"),r.length===1&&Z(r[0]==="string"||r[0]==="number","Only whole numbers and/or strings are allowed in `get` arrays!"),r.length===2&&(Z(r.indexOf("string")>-1,"Only whole numbers and/or strings are allowed in `get` arrays!"),Z(r.indexOf("number")>-1,"Only whole numbers and/or strings are allowed in `get` arrays!")),Qe(t)||(t=t.map(a=>{if(hn(a))return Z(e.index.indexOf(a)>-1,`Row "${a}" does not exist!`),a;if(Be(a))return Z(a>=0,`Index ${a} is out of bounds!`),Z(Math.floor(a)===a,"Row numbers must be integers!"),Z(a<e.index.length,`Index ${a} is out of bounds!`),e.index[a]})),Qe(n)||(n=n.map(a=>{if(hn(a))return Z(e.columns.indexOf(a)>-1,`Column "${a}" does not exist!`),a;if(Be(a))return Z(a>=0,`Column ${a} is out of bounds!`),Z(Math.floor(a)===a,"Column numbers must be integers!"),Z(a<e.columns.length,`Column ${a} is out of bounds!`),e.columns[a]})),e.getSubsetByNames(t,n)}function w$(e,t){try{return e<t?-1:e>t?1:0}catch{return e=typeof e=="object"&&e!==null?JSON.stringify(e):e.toString(),t=typeof t=="object"&&t!==null?JSON.stringify(t):t.toString(),e<t?-1:e>t?1:0}}function sl(e,t){if(Qe(t)&&(t=w$),et(e)||ot(e))return e.sort(...Object.values(arguments).slice(1));Z(Ce(e),"The `sort` function only works on arrays, Series, and DataFrames!"),Z(Jn(t),"The second parameter of the `sort` function must be a comparison function!");let n=e.slice();return n.sort(t),n}function x$(e){let t=e.toLowerCase(),n="";for(let a=0;a<t.length;a++){let i=t[a];i.match(/[a-z0-9]/g)?n+=i:n+=" "}let r=n.split(" ").filter(a=>a.length>0);return r[0]+r.slice(1).map(a=>a[0].toUpperCase()+a.substring(1)).join("")}function Z5(e,t,n){Qe(n)?n=t.columns:hn(n)&&(n=[n]);let r={};n.forEach(i=>{Z(hn(i),"You must pass either a string or a one-dimensional array of strings into the `getDummies` (AKA `oneHotEncode`) method!");let o=t.columns.indexOf(i);Z(o>-1,`The given DataFrame does not have a column called "${i}"!`);let s=t.values.map(l=>l[o]),u=sl(Ai(s));s.forEach(l=>{u.forEach(c=>{let p=i+"_"+x$(c.toString());r[p]||(r[p]=[]),l===c?r[p].push(1):r[p].push(0)})})});let a=new e(r);return a.index=t.index,a}function S$(e,t,n){let r=e.shape;Qe(t)&&(t=ir(0,r[0])),Qe(n)&&(n=ir(0,r[1])),Be(t)&&(t=[t]),Be(n)&&(n=[n]),Z(Ce(t)&&Ce(n),"The `rowIndices` and `colIndices` parameters must be 1-dimensional arrays of whole numbers."),Z(it(t).length===1&&it(n).length===1,"The `rowIndices` and `colIndices` parameters must be 1-dimensional arrays of whole numbers."),Z(t.length>0,"The `rowIndices` array must contain at least one index."),Z(n.length>0,"The `colIndices` array must contain at least one index."),t.forEach(o=>{Z(Bc(o),"The `rowIndices` and `colIndices` parameters must be 1-dimensional arrays of whole numbers."),Z(o<e.index.length,`The row index ${o} is out of bounds.`)}),n.forEach(o=>{Z(Bc(o),"The `rowIndices` and `colIndices` parameters must be 1-dimensional arrays of whole numbers."),Z(o<e.columns.length,`The column index ${o} is out of bounds.`)});let a=t.map(o=>e.index[o]),i=n.map(o=>e.columns[o]);return e.getSubsetByNames(a,i)}function k$(e,t,n,r,a){Qe(r)&&(r=n.index),Qe(a)&&(a=n.columns),hn(r)&&(r=[r]),hn(a)&&(a=[a]),Z(Ce(r)&&Ce(a),"The `rows` and `cols` parameters must be 1-dimensional arrays of strings."),Z(it(r).length===1&&it(a).length===1,"The `rows` and `cols` parameters must be 1-dimensional arrays of strings."),Z(r.length>0,"The `rows` array must contain at least one row name."),Z(a.length>0,"The `cols` array must contain at least one column name."),r.forEach(s=>{Z(hn(s),"The `rows` and `cols` parameters must be 1-dimensional arrays of strings."),Z(n.index.indexOf(s)>-1,`The row name "${s}" does not exist in the list of rows.`)}),a.forEach(s=>{Z(hn(s),"The `rows` and `cols` parameters must be 1-dimensional arrays of strings."),Z(n.columns.indexOf(s)>-1,`The column name "${s}" does not exist in the list of columns.`)});let i=r.map(s=>a.map(u=>n.values[n.index.indexOf(s)][n.columns.indexOf(u)]));if(r.length===1&&a.length===1)return i[0][0];if(r.length===1){let s=new t(i[0]);return s.name=r[0],s.index=a,s}if(a.length===1){let s=new t(i.map(u=>u[0]));return s.name=a[0],s.index=r,s}let o=new e(i);return o.columns=a,o.index=r,o}function N$(e,t,n){function r(d,f){return hn(d)&&d.length>f?d.substring(0,f-3)+"...":d}if(n.isEmpty)return console.table({}),console.log("Shape:",[0,0],`
`),n;let a=typeof window>"u"?20:10,i=Math.floor(a/2),o=typeof process>"u"?10:Math.floor(process.stdout.columns/24)-1,s=Math.floor(o/2),u=a>n.index.length?null:ir(0,i).concat(ir(n.index.length-i,n.index.length)),l=o>n.columns.length?null:ir(0,s).concat(ir(n.columns.length-s,n.columns.length)),c=n.get(u,l);c instanceof t&&(n.shape[0]===1?(c=new e([c.values]),c.index=n.index,c.columns=new t(n.columns).get(l).values):n.shape[1]===1&&(c=new e([c.values]).transpose(),c.index=new t(n.index).get(u).values,c.columns=n.columns)),a<=n.index.length&&(c._index.splice(i,0,"..."),c._values.splice(i,0,ir(0,c.columns.length).map(()=>"..."))),o<=n.columns.length&&(c._columns.splice(s,0,"..."),c._values=c._values.map(d=>(d.splice(s,0,"..."),d)));let p=28;return c instanceof t?(c.values=c.values.map(d=>r(d,p)),c.name=r(c.name,p),c.index=c.index.map(d=>r(d,p))):(c.values=c.values.map(d=>d.map(f=>r(f,p))),c.columns=c.columns.map(d=>r(d,p)),c.index=c.index.map(d=>r(d,p))),console.table(c.toDetailedObject()),console.log("Shape:",n.shape,`
`),n}function Oc(e,t){Z(Be(e),"The `leftPad` function only works on numbers!");let n=e.toString();for(;n.length<t;)n="0"+n;return n}function T$(e,t){let n=t?e:e.copy();return n.index=ir(0,e.shape[0]).map(r=>"row"+Oc(r,(n.index.length-1).toString().length)),n}function Gd(e,t){if(et(e)||ot(e))return Gd(e.values,t);Z(Ce(e),"The `product` function only works on arrays, Series, and DataFrames!");try{if(e.length===0)return NaN;let n=Pa(e),r=!1,a=1;for(let i of n){if(!Be(i))if(t)i=1;else return NaN;typeof i=="bigint"&&(r=!0,i=Number(i)),a*=i}if(r)try{return BigInt(a)}catch{}return a}catch{return NaN}}function E$(e){return l8(e)&&e>0}function Ld(e,t){if(et(e)||ot(e))return Ld(e.values,t);if(Z(Ce(e),"The first argument passed into the `reshape` function must be an array!"),Be(t)&&(t=[t]),Z(Ce(t),"The second argument passed into the `reshape` function must be a whole number or a one-dimensional array of whole numbers!"),Z(it(t).length===1,"The first argument passed into the `reshape` function must be a whole number or a one-dimensional array of whole numbers!"),t=t.map(i=>(typeof i=="bigint"&&(i=Number(i)),Z(E$(i),"The first argument passed into the `reshape` function must be a whole number or a one-dimensional array of whole numbers!"),Number(i))),t.length===0)return Pa(e);let n=Pa(e);if(t.length===1&&t[0]===n.length)return n;Z(Gd(t)===n.length,"The new shape doesn't match the number of values available in `x` (the first argument passed into the `reshape` function)!");let r=[],a=Math.floor(n.length/t[0]);for(let i=0;i<t[0];i++){let o=n.slice(i*a,(i+1)*a);r.push(Ld(o,t.slice(1)))}return r}var c8=Math.pow(2,64),Fn=[];p8(Math.floor(Math.random()*c8));function I$(e,t){e=ua(e);function n(){e+=ua("0x9e3779b97f4a7c15");let a=Qr(e);return a=(a^a>>BigInt(30))*ua("0xbf58476d1ce4e5b9"),a=(a^a>>BigInt(27))*ua("0x94d049bb133111eb"),a^a>>BigInt(31)}let r=[];for(let a=0;a<t;a++)r.push(n());return r}function ua(e){return BigInt.asUintN(64,BigInt(e))}function Q5(e,t){return e=ua(e),t=BigInt(t),ua(ua(e<<t)|ua(e>>ua(BigInt(64)-t)))}function p8(e){if(typeof e=="bigint"&&(e=Number(e)),Qe(e))return Qr(Fn);{Z(Be(e),"If passing a value into the `seed` function, then that value must be an integer!");let t=I$(Math.floor(e),4);Fn[0]=t[0],Fn[1]=t[1],Fn[2]=t[2],Fn[3]=t[3]}}function e8(){let e=ua(Q5(Fn[0]+Fn[3],23)+Fn[0]),t=ua(Fn[1]<<BigInt(17));return Fn[2]=ua(Fn[2]^Fn[0]),Fn[3]=ua(Fn[3]^Fn[1]),Fn[1]=ua(Fn[1]^Fn[2]),Fn[0]=ua(Fn[0]^Fn[3]),Fn[2]=ua(Fn[2]^t),Fn[3]=Q5(Fn[3],45),Math.floor(Number(e))/c8}function Fi(e){return Qe(e)?e8():(Ce(e)||(e=[e]),Ld(ho(Gd(e)).map(e8),e))}function q1(e){if(et(e)||ot(e))return e.shuffle(...Object.values(arguments).slice(1));Z(Ce(e),"The `shuffle` function only works on arrays, Series, and DataFrames!");let t=[],n=e.slice();for(let r=0;r<e.length;r++){let a=Math.floor(Fi()*n.length);t.push(n.splice(a,1)[0])}return t}function C$(e,t){return Qe(t)&&(t=0),Z(t===0||t===1,"The `axis` parameter to the `shuffle` must be 0, 1, or undefined."),e.get(t===0?q1(e.index):null,t===1?q1(e.columns):null)}function ol(e){return typeof e=="boolean"}function D$(e,t,n){return Jn(t)?_$(e,t,n):A$(e,t,n)}function _$(e,t,n){if(n=Qe(n)?0:n,Z(Jn(t),"When sorting a DataFrame using a function, the first argument to the `sort` method must be a function!"),Z(Be(n),"When sorting a DataFrame using a function, the second argument to the `sort` method must be null, undefined, 0, or 1 to indicate the axis along which the data should be sorted! An axis of 0 means that the rows will be sorted relative to each other, whereas an axis of 1 means that the columns will be sorted relative to each other."),n===0){let r=sl(e.index,(a,i)=>t(e.get(a,null),e.get(i,null)));return e.get(r,null)}else{let r=sl(e.columns,(a,i)=>t(e.get(null,a),e.get(null,i)));return e.get(null,r)}}function A$(e,t,n){let r=e.copy(),a=Fi().toString();r=r.assign(a,r.index),Qe(t)&&(t=[a],n=[!0]),(Be(t)||hn(t))&&(t=[t],(ol(n)||hn(n))&&(n=[n])),Z(Ce(t),"The first parameter of the `sort` method must be (1) a string or index representing a column name or index, respectively; (2) a 1-dimensional array of strings and/or indices; or (3) null."),Z(it(t).length===1,"The first parameter of the `sort` method must be (1) a string or index representing a column name or index, respectively; (2) a 1-dimensional array of strings and/or indices; or (3) null."),Qe(n)&&(n=ir(0,t.length).map(()=>!0)),Z(Ce(n),"The second parameter of the `sort` method must be (1) a string or boolean representing the sort direction ('ascending' / 'descending', or true / false); (2) a 1-dimensional array of strings and/or booleans; or (3) null."),Z(it(n).length===1,"The second parameter of the `sort` method must be (1) a string or boolean representing the sort direction ('ascending' / 'descending', or true / false); (2) a 1-dimensional array of strings and/or booleans; or (3) null."),Z(t.length===n.length,"The arrays passed into the `sort` method must be equal in length."),t=t.map(o=>{if(Z(hn(o)||Be(o),"Column references can either be column names (as strings) or column indices (as whole numbers)."),hn(o)){let s=r.columns.indexOf(o);return Z(s>-1,`The column "${o}" does not exist!`),s}if(Be(o))return Z(Bc(o),"Column indices must be whole numbers!"),Z(o<r.columns.length,`The index ${o} is out of bounds!`),o}),n=n.map(o=>{if(Z(hn(o)||ol(o),"Direction references can either be strings ('ascending' or 'descending') or booleans (true or false)."),hn(o)){let s=o.trim().toLowerCase();return Z(s==="ascending"||s==="descending","Direction references can either be strings ('ascending' or 'descending') or booleans (true or false)."),s==="ascending"}if(ol(o))return o}),r.values=sl(r.values,(o,s)=>{let u=0;for(;o[t[u]]===s[t[u]]&&u<t.length;)u++;let l=n[u];if(o[t[u]]===s[t[u]])return 0;if(o[t[u]]<s[t[u]])return l?-1:1;if(o[t[u]]>s[t[u]])return l?1:-1});let i=r.columns.indexOf(a);return r.index=r.values.map(o=>o[i]),r=r.dropColumns(a),r}function F$(e,t){Qe(t)?t=0:Z(t===0||t===1,"The axis parameter of the `toDetailedObject` method must be undefined, 0, or 1. An axis of 0 indicates that the returned object should be organized first by rows and then by columns. An axis of 1 indicates that the returned object should be organized first by columns and then by rows.");let n={};return t===0?e.index.forEach((r,a)=>{let i={};e.columns.forEach((o,s)=>{i[o]=e.values[a][s]}),n[r]=i}):e.columns.forEach((r,a)=>{let i={};e.index.forEach((o,s)=>{i[o]=e.values[s][a]}),n[r]=i}),n}function d8(e,t){return JSON.stringify(e.toObject(t))}async function R$(e,t,n){let r=d8(e,n),a=!1,i=!1,o,s;try{let u=t;if(t.includes("/")){let c=t.split("/");u=c[c.length-1]}let l=document.createElement("a");l.href=`data:application/json;charset=utf-8,${encodeURIComponent(r)}`,l.download=u,l.dispatchEvent(new MouseEvent("click")),a=!0}catch(u){o=u}try{let u=await import("node:fs"),l=await import("node:path");u.writeFileSync(l.resolve(t),r,"utf8"),i=!0}catch(u){s=u}if(!a&&!i)throw typeof window<"u"?new ou(o):typeof module<"u"?new ou(s):new ou("I don't know what's going wrong, but it doesn't seem like you're in Node or the browser, and we couldn't download and/or write the file to disk!");return e}function O$(e){let t={};return e.columns.forEach(n=>{t[n]=e.get(n).values}),t}function Es(e){if(et(e)||ot(e))return e.transpose();Z(Ce(e),"The `transpose` function only works on arrays, Series, and DataFrames!");let t=it(e);if(Z(t.length<=2,"I'm not smart enough to know how to transpose arrays that have more than 2 dimensions. Sorry for the inconvenience! Please only pass 1- or 2-dimensional arrays into the `transpose` function!"),t.length===1)return Ho(e);if(t.length===2){let n=ho(Ho(t));for(let r=0;r<t[0];r++)for(let a=0;a<t[1];a++)n[a][r]=e[r][a];return n}}function f8(e,t,n){if(ot(n))return new e(t.values.concat(n.values));if(Ce(n)){let r=it(n);Z(r.length===1&&!K1(r),"Only vectors can be appended to Series!");let a=t.copy();return n.forEach((i,o)=>{a._values.push(i),a._index.push("item"+(t.values.length+o))}),a}return f8(t,[n])}function M$(e,t){Z(Jn(t),"The parameter to the `apply` method must be a function.");let n=e.copy();return n._values=n._values.map((r,a)=>t(r,a)),n}function P$(e){let t=e.copy(),n=[];return t._values=t.values.filter((r,a)=>Qe(r)?!1:(n.push(t.index[a]),!0)),t._index=n,t}function B$(e,t){let n=[],r=[];t.values.forEach((i,o)=>{Be(i)&&(r.push(i),n.push(t.index[o]))});let a=new e(r);return a.name=t.name,a.index=n,a}function L$(e,t,n){let r=t.copy(),a=Qr(r.index),i=[],o=r.values.filter((s,u)=>{let l=n(s,u,r.values);return l||i.push(r.index[u]),l});return i.forEach(s=>{a.splice(a.indexOf(s),1)}),o.length===0?(r=new e,r.name=t.name,r):(r.values=o,r.index=a,r)}function z$(e,t){(hn(t)||Be(t))&&(t=[t]);for(let r in t)typeof t[r]=="bigint"&&(t[r]=Number(t[r]));let n=Ai((t||[]).map(r=>typeof r));return Z(n.length<=2,"Only whole numbers and/or strings are allowed in `get` arrays!"),n.length===1&&Z(n[0]==="string"||n[0]==="number","Only whole numbers and/or strings are allowed in `get` arrays!"),n.length===2&&(Z(n.indexOf("string")>-1,"Only whole numbers and/or strings are allowed in `get` arrays!"),Z(n.indexOf("number")>-1,"Only whole numbers and/or strings are allowed in `get` arrays!")),Qe(t)||(t=t.map(r=>{if(typeof r=="string")return Z(e.index.indexOf(r)>-1,`Index "${r}" does not exist!`),r;if(typeof r=="number")return Z(r>=0,`Index ${r} is out of bounds!`),Z(Math.floor(r)===r,"Indices must be integers!"),Z(r<e.index.length,`Index ${r} is out of bounds!`),e.index[r]})),e.getSubsetByNames(t)}function $$(e,t){let n=e.shape;Qe(t)&&(t=ir(0,n[0])),Z(Ce(t),"The `indices` array must be 1-dimensional array of whole numbers."),Z(it(t).length===1,"The `indices` array must be a 1-dimensional array of whole numbers."),Z(t.length>0,"The `indices` array must contain at least one index."),t.forEach(a=>{Z(Bc(a),"The `indices` array must be a 1-dimensional array of whole numbers."),Z(a<e.index.length,`The row index ${a} is out of bounds.`)});let r=t.map(a=>e.index[a]);return e.getSubsetByNames(r)}function V$(e,t,n){Qe(n)&&(n=t.index),Z(Ce(n),"The `indices` array must be a 1-dimensional array of strings."),Z(it(n).length===1,"The `indices` array must be a 1-dimensional array of strings."),Z(n.length>0,"The `indices` array must contain at least one index name."),n.forEach(i=>{Z(hn(i),"The `indices` array must contain only strings."),Z(t.index.indexOf(i)>-1,`The name "${i}" does not exist in the index.`)});let r=n.map(i=>t.values[t.index.indexOf(i)]);if(r.length===1)return r[0];let a=new e(r);return a.index=n,a.name=t.name,a}function W$(e){let t=e.copy(),n=typeof window>"u"?20:10;if(t.index.length>n){t=t.get(ir(0,n/2).concat(ir(t.index.length-n/2,t.index.length)));let a=Qr(t.index);a.splice(Math.floor(a.length/2),0,"..."),t.values.push("..."),t.index.push("..."),t=t.get(a)}let r={};return t.values.forEach((a,i)=>{let o={};o[t.name]=a,r[t.index[i]]=o}),console.table(r),console.log("Shape:",e.shape,`
`),e}function U$(e){let t=e.copy();return t.get(q1(t.index))}function G$(e,t,n){n=n||((u,l)=>u<l?-1:1),Z(Qe(n)||Jn(n),"You must pass undefined, null, or a comparison function as the second argument to the `sort` method!");let r=Es([t.values,t.index]),a=sl(r,(u,l)=>n(u[0],l[0])),i=[],o=[];a.forEach(u=>{i.push(u[0]),o.push(u[1])});let s=new e;return s._values=i,s._index=o,s.name=t.name,s}function q$(e,t){let n=Es([t.values,t.index]);n=Es(sl(n,(a,i)=>{if(a[1]===i[1])return 0;if(a[1]<i[1])return-1;if(a[1]>i[1])return 1}));let r=new e(n[0]);return r.index=n[1],r.name=t.name,r}function H$(e){let t={};return t[e.name]={},e.index.forEach((n,r)=>{t[e.name][n]=e.values[r]}),t}var t8=Symbol.for("@jrc03c/js-math-tools/series");function j$(e){class t{static[Symbol.hasInstance](r){try{return!!r._symbol&&r._symbol===t8}catch{return!1}}constructor(r){if(this.name="data",Object.defineProperty(this,"_symbol",{configurable:!1,enumerable:!1,writable:!1,value:t8}),Object.defineProperty(this,"_values",{value:[],configurable:!0,enumerable:!1,writable:!0}),Object.defineProperty(this,"values",{configurable:!0,enumerable:!0,get(){return this._values},set(a){Z(Ce(a),"The new values must be a 1-dimensional array!");let i=it(a);Z(i.length===1,"The new array of values must be 1-dimensional!"),i[0]<this._index.length?this._index=this._index.slice(0,i[0]):i[0]>this._index.length&&(this._index=this._index.concat(ir(this._index.length,i[0]).map(o=>"item"+Oc(o,(a.length-1).toString().length)))),this._values=a}}),Object.defineProperty(this,"_index",{value:[],configurable:!0,enumerable:!1,writable:!0}),Object.defineProperty(this,"index",{configurable:!0,enumerable:!0,get(){return this._index},set(a){Z(Ce(a),"The new index must be a 1-dimensional array of strings!"),Z(a.length===this.shape[0],"The new index must be the same length as the old index!"),Z(it(a).length===1,"The new index must be a 1-dimensional array of strings!"),a.forEach(i=>{Z(hn(i),"All of the row names must be strings!")}),this._index=a}}),r){if(r instanceof t)this.name=r.name,this.values=Qr(r.values),this.index=Qr(r.index);else if(Ce(r)){let a=it(r);Z(a.length===1,"When passing an array into the constructor of a Series, the array must be 1-dimensional!"),this.values=r}else if(r instanceof Object){let a=Object.keys(r).concat(Object.getOwnPropertySymbols(r)).map(s=>s.toString());Z(a.length===1,"When passing an object into the constructor of a Series, the object must have only 1 key-value pair, where the key is the name of the data and the value is the 1-dimensional array of values!");let i=a[0],o=r[i];Z(it(o).length===1,"When passing an object into the constructor of a Series, the object must have only 1 key-value pair, where the key is the name of the data and the value is the 1-dimensional array of values!"),this.name=i,this.values=o.slice()}}}get shape(){return it(this.values)}get length(){return this.shape[0]}get isEmpty(){return this.values.filter(r=>!Qe(r)).length===0}clear(){let r=this.copy();return r.values.forEach((a,i)=>{r.values[i]=void 0}),r}get(r){return z$(this,r)}getSubsetByNames(r){return V$(t,this,r)}getSubsetByIndices(r){return $$(this,r)}loc(r){return this.getSubsetByNames(r)}iloc(r){return this.getSubsetByIndices(r)}reverse(){let r=new t(Ho(this.values));return r.index=Ho(this.index),r.name=this.name,r}resetIndex(){let r=this.copy();return r.index=ir(0,this.shape[0]).map(a=>"item"+Oc(a,(r.index.length-1).toString().length)),r}copy(){let r=new t;return r._values=Qr(this.values),r._index=Qr(this.index),r.name=this.name,r}append(r){return f8(t,this,r)}apply(r){return M$(this,r)}concat(r){return this.append(r)}dropMissing(r,a){return P$(this,r,a)}dropNaN(){return B$(t,this)}toObject(){return H$(this)}print(){return W$(this)}shuffle(){return U$(this)}sort(r){return G$(t,this,r)}sortByIndex(){return q$(t,this)}filter(r){return L$(t,this,r)}toDataFrame(){let r=new e(Es([this.values]));return r.columns=[this.name],r.index=this.index,r}transpose(){let r=this.copy();return r.values=Ho(r.values),r.index=Ho(r.index),r}getDummies(){return this.toDataFrame().getDummies()}oneHotEncode(){return this.getDummies()}}return t}var n8=Symbol.for("@jrc03c/js-math-tools/dataframe");function L1(e){let t="abcdefghijklmnopqrstuvwxyz1234567890",n="";for(let r=0;r<e;r++)n+=t[Math.floor(Fi()*t.length)];return n}var Yn=class{static[Symbol.hasInstance](e){try{return!!e._symbol&&e._symbol===n8}catch{return!1}}constructor(e){if(Object.defineProperty(this,"_symbol",{configurable:!1,enumerable:!1,writable:!1,value:n8}),Object.defineProperty(this,"_values",{value:[],configurable:!0,enumerable:!1,writable:!0}),Object.defineProperty(this,"values",{configurable:!0,enumerable:!0,get(){return this._values.length===0||!Qe(this._values[0])&&this._values[0].length===0?[[]]:this._values},set(t){Z(Ce(t),"The new values must be a 2-dimensional array!");let n=it(t);Z(n.length===2,"The new array of values must be 2-dimensional!"),n[0]<this._index.length?this._index=this._index.slice(0,n[0]):n[0]>this._index.length&&(this._index=this._index.concat(ir(this._index.length,n[0]).map(r=>"row"+Oc(r,(n[0]-1).toString().length)))),n[1]<this._columns.length?this._columns=this._columns.slice(0,n[1]):n[1]>this._columns.length&&(this._columns=this._columns.concat(ir(this._columns.length,n[1]).map(r=>"col"+Oc(r,(n[1]-1).toString().length)))),this._values=t}}),Object.defineProperty(this,"_columns",{value:[],configurable:!0,enumerable:!1,writable:!0}),Object.defineProperty(this,"columns",{configurable:!0,enumerable:!0,get(){return this._columns},set(t){Z(Ce(t),"The new columns list must be a 1-dimensional array of strings!"),Z(this.isEmpty||t.length===this.shape[1],"The new columns list must be the same length as the old columns list!"),Z(it(t).length===1,"The new columns list must be a 1-dimensional array of strings!"),t=t.map(r=>(typeof r!="string"&&(r=JSON.stringify(r)||r.toString()),r.trim().length===0?"untitled_"+L1(8):r.trim()));let n=(()=>{let r=G1(t),a={};return r.values.forEach(i=>{a[i]=r.get(i)}),a})();t=t.map(r=>n[r]>1?r+"_"+L1(8):r),this._columns=t}}),Object.defineProperty(this,"_index",{value:[],configurable:!0,enumerable:!1,writable:!0}),Object.defineProperty(this,"index",{configurable:!0,enumerable:!0,get(){return this._index},set(t){Z(Ce(t),"The new index must be a 1-dimensional array of strings!"),Z(this.isEmpty||t.length===this.shape[0],"The new index must be the same length as the old index!"),Z(it(t).length===1,"The new index must be a 1-dimensional array of strings!"),t=t.map(r=>(typeof r!="string"&&(r=JSON.stringify(r)||r.toString()),r.trim().length===0?"untitled_"+L1(8):r.trim()));let n=(()=>{let r=G1(t),a={};return r.values.forEach(i=>{a[i]=r.get(i)}),a})();t=t.map(r=>n[r]>1?r+"_"+L1(8):r),this._index=t}}),Z(Qe(e)||jo(e)||Ce(e),"The `data` passed into the constructor of a DataFrame must be either (1) an object where the key-value pairs are (respectively) column names and 1-dimensional arrays of values, or (2) a 2-dimensional array of values."),e)if(e instanceof Yn)this.values=Qr(e.values),this.columns=Qr(e.columns),this.index=Qr(e.index);else if(Ce(e)){let t=it(e);Z(t.length===2,"The `data` array passed into the constructor of a DataFrame must be 2-dimensional!"),Z(!Wd(e),"The 2-dimensional array passed into the constructor of a DataFrame must not contain sub-arrays (i.e., rows) of different lengths!"),this.values=e}else{this._columns=Object.keys(e).concat(Object.getOwnPropertySymbols(e)).map(i=>i.toString());let t=[],n=null,r=null;this._columns.forEach(i=>{Qe(r)&&(n=i,r=e[i].length),Z(e[i].length===r,`The object passed into the DataFrame constructor contains arrays of different lengths! The key "${n}" points to an array containing ${r} items, and the key "${i}" points to an array containing ${e[i].length} items.`),r=e[i].length;let o=e[i];t.push(o)}),this._values=Es(t);let a=it(this.values);this._index=ir(0,a[0]).map(i=>"row"+Oc(i,(a[0]-1).toString().length))}}get shape(){return it(this.values)}get length(){return this.shape[0]}get width(){return this.shape[1]}get rows(){return this.index}set rows(e){this.index=e}get isEmpty(){return this.values.length===0||this.values.every(e=>e.length===0)}clear(){let e=new Yn(ho(this.shape));return e.columns=this.columns.slice(),e.index=this.index.slice(),e}get(e,t){if(arguments.length===0)return this;if(arguments.length===1)try{return this.get(null,e)}catch{return this.get(e,null)}return b$(this,e,t)}getSubsetByNames(e,t){return k$(Yn,wa,this,e,t)}getSubsetByIndices(e,t){return S$(this,e,t)}getDummies(e){return Z5(Yn,this,e)}oneHotEncode(e){return Z5(Yn,this,e)}transpose(){let e=new Yn(Es(this.values));return e.columns=this.index.slice(),e.index=this.columns.slice(),e}get T(){return this.transpose()}resetIndex(e){return T$(this,e)}copy(){return h$(Yn,this)}assign(e,t){return f$(Yn,wa,this,e,t)}apply(e,t){return d$(Yn,wa,this,e,t)}dropMissing(e,t,n){return v$(Yn,wa,this,e,t,n)}dropNaN(e,t,n){return g$(Yn,this,e,t,n)}drop(e,t){return m$(Yn,wa,this,e,t)}dropColumns(e){return this.drop(null,e)}dropRows(e){return this.drop(e,null)}toDetailedObject(e){return F$(this,e)}toObject(){return O$(this)}toJSONString(e){return d8(this,e)}saveAsJSON(e,t){return R$(this,e,t)}print(){return N$(Yn,wa,this)}sort(e,t){return D$(this,e,t)}sortByIndex(){return this.sort()}filter(e,t){return y$(Yn,wa,this,e,t)}shuffle(e){return C$(this,e)}append(e,t){return u8(this,e,t)}concat(e,t){return this.append(e,t)}join(e,t){return this.append(e,t)}toString(){return JSON.stringify(this)}},wa=j$(Yn);function X1(e,t){return ui(e,{shouldDropNaNs:t}).max}function on(e){return Z(Jn(e),"You must pass a function into the `vectorize` function!"),function t(){let n,r,a=[],i=[],o=Object.keys(arguments).filter(s=>{let u=arguments[s];return Ce(u)?!0:ot(u)?(n=!0,a.push(u),!0):et(u)?(r=!0,i.push(u),!0):!1}).map(s=>arguments[s]);if(o.slice(0,-1).forEach((s,u)=>{Z(la(Ce(s)?it(s):s.shape,Ce(o[u+1])?it(o[u+1]):o[u+1].shape),`When passing multiple arrays into the \`${e.name}\` function, all of the arrays must have the same shape!`)}),o.length>0){let s=X1(o.map(l=>l.length?l.length:l.values.length)),u=ir(0,s).map(l=>{let c=Object.keys(arguments).map(p=>Ce(arguments[p])?arguments[p][l]:ot(arguments[p])||et(arguments[p])?arguments[p].values[l]:arguments[p]);return t(...c)});if(r)try{if(i.length===1&&la(it(i[0]),it(u))){let l=new Yn(u);return l.index=i[0].index.slice(),l.columns=i[0].columns.slice(),l}else return new Yn(u)}catch{return u}if(n)try{if(a.length===1&&a[0].length===u.length){let l=new wa(u);return l.name=a[0].name,l.index=a[0].index.slice(),l}else return new wa(u)}catch{return u}return u}else return e(...arguments)}}function K$(e){try{return Be(e)?typeof e=="bigint"?e<0?-e:e:Math.abs(e):NaN}catch{return NaN}}var K2=on(K$);function X$(){try{let e=0,t=!1,n=Object.values(arguments);for(let r of n){if(!Be(r))return NaN;typeof r=="bigint"&&(t=!0,r=Number(r)),e+=r}if(t)try{return BigInt(e)}catch{}return e}catch{return NaN}}var Lc=on(X$);function Y$(e,t){try{return t(e)}catch{return NaN}}var zc=on(Y$);function J$(e){try{return Be(e)?(typeof e=="bigint"&&(e=Number(e)),Math.acos(e)):NaN}catch{return NaN}}var Z$=on(J$);function Q$(e){try{return Be(e)?(typeof e=="bigint"&&(e=Number(e)),Math.asin(e)):NaN}catch{return NaN}}var eV=on(Q$);function tV(e){try{return Be(e)?(typeof e=="bigint"&&(e=Number(e)),Math.atan(e)):NaN}catch{return NaN}}var nV=on(tV);function z2(e,t){if(et(e)){let n=z2(e.values,t);return[e.index[n[0]],e.columns[n[1]]]}if(ot(e)){let n=z2(e.values,t);return e.index[n]}Z(Ce(e),"The `argmax` function only works on arrays, Series, and DataFrames!");try{let n=Mc(e,X1(e,t));return n?n.length===0?void 0:n.length===1?n[0]:n:void 0}catch{return}}function h8(e,t){return ui(e,{shouldDropNaNs:t}).min}function zd(e,t){if(et(e)){let n=zd(e.values,t);return[e.index[n[0]],e.columns[n[1]]]}if(ot(e)){let n=zd(e.values,t);return e.index[n]}Z(Ce(e),"The `argmin` function only works on arrays, Series, and DataFrames!");try{let n=Mc(e,h8(e,t));return n?n.length===0?void 0:n.length===1?n[0]:n:void 0}catch{return}}function si(e,t){if(et(e)||ot(e))return e.apply(n=>si(n,t));if(Ce(e))return e.map(n=>si(n,t));if(t==="null")return null;if(t==="number"){if(Qe(e))return NaN;let n=si(e,"boolean");if(ol(n))return n?1:0;try{JSON.parse(e)}catch{let i=si(e,"date");if(Ts(i))return i.getTime()}let r=parseFloat(e);return isNaN(r)?NaN:r}if(t==="int"){let n=si(e,"number");return n>=0?Math.floor(n):Math.ceil(n)}if(t==="float")return si(e,"number");if(t==="bigint")return typeof e=="bigint"?e:BigInt(si(e,"int"));if(t==="boolean"){if(ol(e))return e;if(Be(e))return e===0?!1:e===1?!0:null;try{let n=(typeof e=="object"?e.toString()==="null"?"false":JSON.stringify(e):e.toString()).trim().toLowerCase();return n==="true"||n==="yes"||n==="y"?!0:n==="false"||n==="no"||n==="n"?!1:null}catch{return null}}if(t==="date"){if(Ts(e))return e;if(Qe(e))return null;let n=parseFloat(e);if(!isNaN(n)){let a=new Date(e);return Ts(a)?a:null}let r=Date.parse(e);return isNaN(r)?null:new Date(r)}if(t==="object"){if(jo(e))return e;let n=si(e,"boolean");if(ol(n))return null;try{let a=si(e,"number");if(Be(a))return JSON.parse(e),null}catch{}let r=si(e,"date");if(r)return r;try{let a=JSON.parse(e);return Ce(a)?a.map(i=>si(i,t)):a}catch{return null}}if(t==="string")return Qe(e)?la(e,void 0)?"undefined":"null":e instanceof Date?e.toJSON():typeof e=="object"?e===null?"null":JSON.stringify(e):e.toString()}function rV(e){try{return Be(e)?typeof e=="bigint"?e:Math.ceil(e):NaN}catch{return NaN}}var aV=on(rV);function iV(e,t){try{if(!Be(e))return NaN;if(typeof e=="bigint")return e;if(Qe(t))t=1e-10;else if(!Be(t))return NaN;return K2(e)<t?0:e}catch{return NaN}}var oV=on(iV);function $2(e){if(et(e)||ot(e)){let t=e.copy();return t.values=$2(t.values),t}if(Ce(e))return e.map(t=>$2(t));try{let t=JSON.parse(e);return Be(t)?typeof t=="bigint"?Number(t):t>=0?Math.floor(t):Math.ceil(t):NaN}catch{return NaN}}var li=on($2);function m8(e,t,n){try{return Be(e)?Be(t)?Be(n)?typeof e=="bigint"?BigInt(m8(li(e),t,n)):e<t?t:e>n?n:e:NaN:NaN:NaN}catch{return NaN}}var sV=on(m8);function H1(e,t){function*n(r,a){if(a>r.length)yield r;else if(a<=0)yield[];else if(r.length<2)yield r;else for(let i=0;i<r.length;i++){let o=r[i],s=r.slice(i+1);if(!(s.length<a-1)&&a-1>=0)for(let u of H1(s,a-1))yield[o].concat(u)}}return et(e)||ot(e)?H1(e.values,t):(Z(Ce(e),"The `combinations` function only works on arrays, Series, and DataFrames!"),Z(Be(t)&&li(t)===t&&t>=0,"`r` must be a non-negative integer!"),n(Pa(e),t))}function v8(e,t){let n=[];for(let r of H1(e,t))n.push(r.slice());return n}function g8(){let e=Object.values(arguments).map(n=>et(n)||ot(n)?Ai(n.values):(Z(Ce(n),"The `intersect` function only works on arrays, Series, and DataFrames!"),Ai(n)));return Ai(e).filter(n=>e.every(r=>r.findIndex(a=>la(a,n))>-1))}var Md=class{constructor(e){Z(Qe(e)||e===Md.DROP_NAN_MODE||e===Md.DROP_MISSING_MODE,"The `mode` value passed into the `IndexMatcher` constructor must be undefined or one of [IndexMatcher.DROP_NAN_MODE, IndexMatcher.DROP_MISSING_MODE]! (By default, the mode is `Indexer.DROP_MISSING_MODE`.)"),this.mode=Qe(e)?Md.DROP_NAN_MODE:e,this.index=null}fit(){let e=[];return Object.values(arguments).forEach(t=>{if(Ce(t)){let n=it(t);if(n.length===1)t=new wa(t);else if(n.length===2)t=new Yn(t);else throw new Error("The `IndexMatcher.fit` method only works on arrays, Series, and DataFrames!")}Z(et(t)||ot(t),"The `IndexMatcher.fit` method only works on arrays, Series, and DataFrames!"),this.mode===Md.DROP_MISSING_MODE?e.push(t.dropMissing().index):e.push(t.dropNaN().index)}),this.index=g8(...e),this}transform(){Z(!!this.index,"The IndexMatcher hasn't been fitted yet! Please call the `fit` method before calling the `transform` method.");let e=Object.values(arguments).map(t=>{if(Ce(t)){let n=it(t);if(n.length===1)return new wa(t).get(this.index).values;if(n.length===2)return new Yn(t).get(this.index,null).values;throw new Error("The `IndexMatcher.fit` method only works on arrays, Series, and DataFrames!")}return Z(et(t)||ot(t),"The `IndexMatcher.fit` method only works on arrays, Series, and DataFrames!"),t.get(this.index,null)});return e.length===1?e[0]:e}fitAndTransform(){return this.fit(...arguments).transform(...arguments)}},Y1=Md;i8(Y1,"DROP_NAN_MODE","DROP_NAN_MODE");i8(Y1,"DROP_MISSING_MODE","DROP_MISSING_MODE");function Bd(e,t,n,r){if(ot(e))return Bd(e.values,t,n,r);if(ot(t))return Bd(e,t.values,n,r);if(Z(Ce(e)&&Ce(t)&&it(e).length===1&&it(t).length===1,"The `covariance` function only works on 1-dimensional arrays and Series!"),Z(e.length===t.length,"The two arrays or Series passed into the `covariance` function must have the same length!"),n)return Bd(...new Y1().fitAndTransform(e,t),!1,r);try{let a=ui(e,{stdev:r}),i=ui(t,{stdev:r}),o=Number(a.mean),s=Number(i.mean);if(!Be(o)||!Be(s))return NaN;let u=Math.max(e.length,t.length),l=0;for(let c=0;c<u;c++){let p=e[c],d=t[c];if(!Be(p))return NaN;if(!Be(d))return NaN;typeof p=="bigint"&&(p=Number(p)),typeof d=="bigint"&&(d=Number(d)),l+=(p-o)*(d-s)}return r?[l/e.length,a,i]:l/e.length}catch{return NaN}}function V2(e,t,n){if(ot(e))return V2(e.values,t,n);if(ot(t))return V2(e,t.values,n);Z(Ce(e)&&Ce(t)&&it(e).length===1&&it(t).length===1,"The `correl` function only works on 1-dimensional arrays and Series!"),Z(e.length===t.length,"The two arrays or Series passed into the `correl` function must have the same length!");try{let[a,i,o]=Bd(e,t,n,!0),s=i.stdev*o.stdev;return a/s}catch{return NaN}}function uV(e){try{return Be(e)?(typeof e=="bigint"&&(e=Number(e)),Math.cos(e)):NaN}catch{return NaN}}var lV=on(uV),cV=Object.freeze({boolean:"boolean",date:"date",null:"null",number:"number",object:"object",string:"string"});function W2(e,t){if(et(e)||ot(e))return W2(e.values,t);if(et(t)||ot(t))return W2(e,t.values);Z(Ce(e)&&Ce(t),"The `diff` function only works on arrays, Series, and DataFrames!");let n=Ai(e),r=Ai(t),a=[];return n.forEach(i=>{r.findIndex(o=>la(o,i))<0&&a.push(i)}),a}function y8(e,t){try{if(!Be(e))return NaN;if(!Be(t))return NaN;if(typeof e=="bigint"||typeof t=="bigint"){let n=y8(Number(e),Number(t));try{return BigInt(n)}catch{return n}}return Math.pow(e,t)}catch{return NaN}}var X2=on(y8);function b8(e){try{if(!Be(e))return NaN;if(typeof e=="bigint"){let t=b8(Number(e));try{return BigInt(t)}catch{return t}}return Math.sqrt(e)}catch{return NaN}}var w8=on(b8);function pV(){try{let e=Object.values(arguments);if(e.length===0)return NaN;let t=!1,n=1;for(let r of e){if(!Be(r))return NaN;typeof r=="bigint"&&(t=!0,r=Number(r)),n*=r}if(t)try{return BigInt(n)}catch{}return n}catch{return NaN}}var x8=on(pV);function su(){return x8(...arguments)}function S8(e,t){return Lc(e,su(t,-1))}function Y2(e,t){return ui(e,{shouldDropNaNs:t}).sum}function $d(e,t){if(Be(e)&&Be(t))return K2(e-t);if(et(e)||ot(e))return $d(e.values,t);if(et(t)||ot(t))return $d(e,t.values);Ce(e)&&Ce(t)&&Z(la(it(e),it(t)),"If passing two arrays, Series, or DataFrames into the `distance` function, then those objects must have the same shape!");try{return w8(Y2(X2(S8(e,t),2)))}catch{return NaN}}function dV(e,t){return su(e,X2(t,-1))}function Ns(e,t){if(et(e)){let a=Ns(e.values,t);if(it(a).length===1){let i=new wa(a);return i.name=ot(t)?t.name:i.name,i.index=e.index.slice(),i}else{let i=new Yn(a);return i.index=e.index.slice(),et(t)&&(i.columns=t.columns.slice()),i}}if(et(t)){let a=Ns(e,t.values);if(it(a).length===1){let i=new wa(a);return i.name=ot(e)?e.name:i.name,i.index=t.columns.slice(),i}else{let i=new Yn(a);return i.columns=t.columns.slice(),i}}if(ot(e))return Ns(e.values,t);if(ot(t))return Ns(e,t.values);Z(Ce(e)&&Ce(t),"The `dot` function only works on arrays, Series, and DataFrames!");let n=it(e),r=it(t);if(Z(n.length<=2&&r.length<=2,"I'm not smart enough to know how to get the dot-product of arrays that have more than 2 dimensions. Sorry for the inconvenience! Please only pass 1- or 2-dimensional arrays into the `dot` function!"),Z(n[n.length-1]===r[0],`There's a dimension misalignment in the two arrays you passed into the \`dot\` function. (${n[n.length-1]} !== ${r[0]})`),n.length===1&&r.length===1)return Y2(su(e,t));if(n.length===1&&r.length===2)return Es(t).map(a=>Ns(e,a));if(n.length===2&&r.length===1)return e.map(a=>Ns(a,t));if(n.length===2&&r.length===2){let a=Es(t),i=[];for(let o=0;o<e.length;o++){let s=[];for(let u=0;u<a.length;u++)s.push(Ns(e[o],a[u]));i.push(s)}return i}}function J2(e){if(et(e)||ot(e))return e.dropMissing(...Object.values(arguments).slice(1));Z(Ce(e),"The `dropMissing` function only works on arrays, Series, and DataFrames!");let t=[];return e.forEach(n=>{try{return t.push(J2(n))}catch{Qe(n)||t.push(n)}}),t}function $1(e,t){if(et(e)||ot(e))return $1(e.values,t);if(et(t)||ot(t))return $1(e,t.values);Z(Ce(e)&&Ce(t),"The `dropMissingPairwise` function only works on arrays, Series, and DataFrames!"),Z(la(it(e),it(t)),"The two arrays, Series, and/or DataFrames passed into the `dropMissingPairwise` function must have the same shape!");let n=[],r=[];for(let a=0;a<e.length;a++)try{let[i,o]=$1(e[a],t[a]);n.push(i),r.push(o)}catch{!Qe(e[a])&&!Qe(t[a])&&(n.push(e[a]),r.push(t[a]))}return[n,r]}function V1(e,t){if(et(e)||ot(e))return V1(e.values,t);if(et(t)||ot(t))return V1(e,t.values);Z(Ce(e)&&Ce(t),"The `dropNaNPairwise` only works on arrays, Series, and DataFrames!"),Z(la(it(e),it(t)),"The two arrays, Series, and/or DataFrames passed into the `dropNaNPairwise` must have the same shape!");let n=[],r=[];for(let a=0;a<e.length;a++)try{let[i,o]=V1(e[a],t[a]);n.push(i),r.push(o)}catch{Be(e[a])&&Be(t[a])&&(n.push(e[a]),r.push(t[a]))}return[n,r]}function fV(e){return J2(e)}function j1(e,t){if(et(e)||ot(e))return j1(e.values,t);Z(Ce(e),"The first argument passed into the `every` function must be an array, Series, or DataFrame!"),Z(Jn(t),"The second argument passed into the `every` function must be a function!");for(let n of e)if(Ce(n)){if(!j1(n,t))return!1}else if(!t(n))return!1;return!0}function hV(e){try{if(!Be(e))return NaN;if(typeof e=="bigint"){if(e===0n)return 1n;e=Number(e)}return Math.exp(e)}catch{return NaN}}var mV=on(hV);function U2(e){try{return typeof e=="bigint"?BigInt(U2(li(e))):e!==li(e)?NaN:e<=1?1:e*U2(e-1)}catch{return NaN}}var vV=on(U2);function G2(e,t){if(et(e)||ot(e))return G2(e.values,t);if(Z(jo(e)||Ce(e),"You must pass (1) an object, array, Series, or DataFrame and (2) a function or value into the `find` function!"),!Jn(t)){let a=t;t=i=>i===a}function n(a,i,o){if(o=o||[],o.indexOf(a)>-1)return null;if(jo(a)){o.push(a);let s=Object.keys(a).concat(Object.getOwnPropertySymbols(a));for(let u=0;u<s.length;u++){let l=s[u],c=a[l];if(i(c))return c;let p=n(c,i,o);if(p)return p}}else if(Ce(a)){o.push(a);for(let s=0;s<a.length;s++){let u=a[s];if(i(u))return u;let l=n(u,i,o);if(l)return l}}else if(i(a))return a;return null}function r(a){try{return t(a)}catch{return!1}}return n(e,r)}function q2(e,t){if(et(e)||ot(e))return q2(e.values,t);if(Z(jo(e)||Ce(e),"You must pass (1) an object, array, Series, or DataFrame and (2) a function or value into the `findAll` function!"),!Jn(t)){let i=t;t=o=>o===i}function n(i,o,s){if(s=s||[],s.indexOf(i)>-1)return null;if(jo(i)){s.push(i);let u=Object.keys(i).concat(Object.getOwnPropertySymbols(i)),l=[];for(let c=0;c<u.length;c++){let p=u[c],d=i[p],f=!1;o(d)&&(l.push(d),f=!0);let h=n(d,o,s);h&&h.length>0&&h.slice(f?1:0).forEach(m=>l.push(m))}return l}else if(Ce(i)){s.push(i);let u=[];for(let l=0;l<i.length;l++){let c=i[l],p=!1;o(c)&&(u.push(c),p=!0);let d=n(c,o,s);d&&d.length>0&&d.slice(p?1:0).forEach(f=>u.push(f))}return u}else if(o(i))return[i];return null}function r(i){try{return t(i)}catch{return!1}}let a=n(e,r);return a&&a.length>0?a:null}function gV(e){try{if(e==="Infinity")return 1/0;if(e==="-Infinity")return-1/0;let t=JSON.parse(e);return Be(t)?t:NaN}catch{return NaN}}var Ko=on(gV);function yV(e){try{return Be(e)?typeof e=="bigint"?e:Math.floor(e):NaN}catch{return NaN}}var bV=on(yV);function Z2(e){Be(e)&&(e=[e]);let t=[],n=Gd(e);for(let r=0;r<n;r++)t.push(0);return Ld(t,e)}function wV(e){typeof e=="bigint"&&(e=li(e)),Z(!Qe(e),"You must pass an integer greater than 0 (representing the size) into the `identity` function!"),Z(Be(e),"You must pass an integer greater than 0 (representing the size) into the `identity` function!"),Z(li(e)===e,"You must pass an integer greater than 0 (representing the size) into the `identity` function!"),Z(e>0,"You must pass an integer greater than 0 (representing the size) into the `identity` function!");let t=Z2([e,e]);for(let n=0;n<e;n++)t[n][n]=1;return t}var xV=["true","false","yes","no"],SV=["null","none","nan","na","n/a","","undefined"];function z1(e){return e.type==="number"&&(typeof e.value<"u"?e.isInteger=li(e.value)===e.value:e.isInteger=j1(e.values,t=>Be(t)?li(t)===t:!0)),e}function W1(e){if(et(e)){let i=e.copy(),o=W1(e.values);return i.values=o.values,z1({type:o.type,values:i})}if(ot(e)){let i=e.copy(),o=W1(e.values);return i.values=o.values,z1({type:o.type,values:i})}if(!Ce(e)){let i=W1([e]);return i.value=i.values[0],delete i.values,z1(i)}Z(Ce(e),"The `inferType` function only works on arrays, Series, and DataFrames!");let t=Pa(e).map(i=>{if(i===void 0)return"null";try{if(typeof i=="object"){let u=new Date(i.getTime());if(Ts(u))return"date"}}catch{}hn(i)||(typeof i=="bigint"?i=i.toString()+"n":i=JSON.stringify(i));let s=i.toLowerCase().trim();if(SV.indexOf(s)>-1)return"null";if(xV.indexOf(s)>-1)return"boolean";try{if(i.match(/^-?\d+n$/g))return"bigint";let u=JSON.parse(i);return Be(u)?"number":typeof u=="object"?Ce(u)?"string":"object":"string"}catch{let l=new Date(i);return Ts(l)?"date":"string"}}),n=G1(t),a=n.values.toSorted((i,o)=>n.get(o)-n.get(i))[0];return z1({type:a,values:zc(e,i=>si(i,a))})}function U1(e){if(et(e)){let n=e.copy();return n.values=U1(n.values),n}Z(Ce(e),"The `inverse` function only works on square 2-dimensional arrays or DataFrames!");let t=it(e);if(Z(t.length===2,"The array passed into the `inverse` function must be exactly two-dimensional and square!"),Z(t[0]===t[1],"The array passed into the `inverse` function must be exactly two-dimensional and square!"),Z(t[0]>=0,"The array passed into the `inverse` function must be exactly two-dimensional and square!"),t[0]===0)return e;if(t[0]===1){Z(e[0][0]!==0,"This matrix cannot be inverted!");let n=e[0][0];return typeof n=="bigint"&&(n=Number(n)),1/n}else if(t[0]===2){let n=e[0][0],r=e[0][1],a=e[1][0],i=e[1][1];typeof n=="bigint"&&(n=Number(n)),typeof r=="bigint"&&(r=Number(r)),typeof a=="bigint"&&(a=Number(a)),typeof i=="bigint"&&(i=Number(i));let o=n*i-r*a;Z(o!==0,"This matrix cannot be inverted!");let s=[[i,-r],[-a,n]];return su(s,1/o)}else if(t[0]>1){let n=(r,a)=>Be(r)||Be(a)?su(r,a):Ns(r,a);for(let r=1;r<t[0]-1;r++)try{let a=e.slice(0,r).map(m=>m.slice(0,r)),i=e.slice(0,r).map(m=>m.slice(r,t[0])),o=e.slice(r,t[0]).map(m=>m.slice(0,r)),s=e.slice(r,t[0]).map(m=>m.slice(r,t[0])),u=U1(a),l=U1(Lc(s,n(-1,n(n(o,u),i)))),c=Lc(u,n(n(n(n(u,i),l),o),u)),p=n(-1,n(n(u,i),l)),d=n(-1,n(n(l,o),u)),f=l;return c.map((m,v)=>m.concat(p[v])).concat(d.map((m,v)=>m.concat(f[v])))}catch{}Z(!1,"This matrix cannot be inverted!")}}var kV=new Function(`
    try {
      return this === window
    } catch(e) {}

    try {
      return !!importScripts
    } catch(e){}

    return false
  `);function k8(e,t,n){try{if(!Be(e))return NaN;if(!Be(t))return NaN;if(!Be(n))return NaN;if(typeof e=="bigint"||typeof t=="bigint"){let r=k8(Number(e),Number(t),n);try{return BigInt(r)}catch{return r}}return n*(t-e)+e}catch{return NaN}}var NV=on(k8);function N8(e,t){try{if(t=Qe(t)?Math.E:t,!Be(e))return NaN;if(!Be(t))return NaN;if(typeof e=="bigint"||typeof t=="bigint"){let n=N8(Number(e),Number(t));try{return BigInt(n)}catch{return n}}return Math.log(e)/Math.log(t)}catch{return NaN}}var TV=on(N8);function EV(e,t){return ui(e,{shouldDropNaNs:t}).mean}function IV(e,t){return ui(e,{shouldDropNaNs:t,median:!0}).median}function T8(e,t){try{if(!Be(e))return NaN;if(!Be(t))return NaN;if(typeof e=="bigint"||typeof t=="bigint"){let n=T8(Number(e),Number(t));try{return BigInt(n)}catch{return n}}return e%t}catch{return NaN}}var CV=on(T8);function DV(e,t){return ui(e,{shouldDropNaNs:t,mode:!0}).mode}function r8(){let e=Fi(),t=Fi();return Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*t)}function Q2(e){return Qe(e)?r8():zc(ho(e),r8)}function _V(e){return zc(ho(e),()=>1)}function eg(e,t){function*n(r,a){if(a=a||r.length,r.length===1){yield[r];return}for(let i of v8(r,a)){if(!i.slice)continue;let o=Z2(i.length);yield i;let s=1;for(;s<i.length;)if(o[s]<s){if(s%2===0){let u=i[0];i[0]=i[s],i[s]=u}else{let u=i[o[s]];i[o[s]]=i[s],i[s]=u}yield i,o[s]+=1,s=1}else o[s]=0,s+=1}}return et(e)||ot(e)?eg(e.values,t):(Z(Ce(e),"The `permutations` function only works on arrays, Series, and DataFrames!"),Qe(t)&&(t=e.length),Z(Be(t)&&li(t)===t&&t>=0,"`r` must be a non-negative integer!"),n(Pa(e),t))}function AV(e,t){let n=[];for(let r of eg(e,t))n.push(r.slice());return n}function FV(){Object.keys(arguments).forEach(e=>{let t=arguments[e];if(Ce(t))if(Wd(t))console.log(t);else{let n=it(t);n.length===1?new wa(t).print():n.length==2?new Yn(t).print():console.log(t)}else et(t)||ot(t)?t.print():console.log(t)})}var RV=on((e,t,n,r,a)=>{try{let i=!1;for(let l of[e,t,n,r,a]){if(!Be(l))return NaN;typeof l=="bigint"&&(i=!0)}i&&(e=Number(e),t=Number(t),n=Number(n),r=Number(r),a=Number(a));let o=(a-r)*(e-t),s=n-t;if(s===0)return NaN;let u=o/s+r;if(i)try{return BigInt(u)}catch{}return u}catch{return NaN}});function OV(e,t,n,r,a){if(Ce(e)&&Qe(r)&&Qe(a)){r=t,a=n;let i=ui(e);t=i.min,n=i.max}return RV(e,t,n,r,a)}function MV(e){try{return Be(e)?typeof e=="bigint"?e:Math.round(e):NaN}catch{return NaN}}var PV=on(MV);function E8(e){try{return Be(e)?typeof e=="bigint"?BigInt(E8(Number(e))):e<0?-1:e>0?1:0:NaN}catch{return NaN}}var BV=on(E8);function LV(e){try{return Be(e)?(typeof e=="bigint"&&(e=Number(e)),Math.sin(e)):NaN}catch{return NaN}}var zV=on(LV);function H2(e,t){if(et(e)||ot(e))return H2(e.values,t);Z(Ce(e),"The first argument passed into the `some` function must be an array, Series, or DataFrame!"),Z(Jn(t),"The second argument passed into the `some` function must be a function!");for(let n of e)if(Ce(n)){if(H2(n,t))return!0}else if(t(n))return!0;return!1}function I8(e,t){return ui(e,{shouldDropNaNs:t,stdev:!0}).stdev}function $V(e){return I8(e)}function VV(e){try{return Be(e)?(typeof e=="bigint"&&(e=Number(e)),Math.tan(e)):NaN}catch{return NaN}}var WV=on(VV);function a8(e,t){Z(Jn(e),"`fn` must be a function!");let n=new Date;return t?e(...t):e(),new Date-n}async function UV(e,t){Z(Jn(e),"`fn` must be a function!");let n=new Date;return t?await e(...t):await e(),new Date-n}function GV(){return Ai([...arguments].map(e=>Ce(e)?e:et(e)||ot(e)?e.values:[e]))}function qV(e,t){return ui(e,{shouldDropNaNs:t,variance:!0}).variance}function HV(){let e=[],t=Object.values(arguments).map(n=>((et(n)||ot(n))&&(n=n.values),Z(Ce(n),"The `zip` function only works on arrays, Series, and DataFrames!"),n));return ir(0,X1(t.map(n=>n.length))).forEach(n=>{let r=[];t.forEach(a=>{let i=a[n];r.push(Qe(i)?void 0:i)}),e.push(r)}),e}var Pd={abs:K2,add:Lc,apply:zc,arccos:Z$,arcsin:eV,arctan:nV,argmax:z2,argmin:zd,assert:Z,cast:si,ceil:aV,chop:oV,clamp:sV,combinations:v8,combinationsIterator:H1,copy:Qr,correl:V2,cos:lV,count:G1,covariance:Bd,DataFrame:Yn,dataTypes:cV,decycle:Pc,diff:W2,distance:$d,divide:dV,dot:Ns,dropMissing:J2,dropMissingPairwise:$1,dropNaN:j2,dropNaNPairwise:V1,dropUndefined:fV,every:j1,exp:mV,factorial:vV,find:G2,findAll:q2,flatten:Pa,float:Ko,floor:bV,identity:wV,IndexMatcher:Y1,indexOf:Mc,inferType:W1,int:li,intersect:g8,inverse:U1,isArray:Ce,isBoolean:ol,isBrowser:kV,isDataFrame:et,isDate:Ts,isEqual:la,isFunction:Jn,isJagged:Wd,isNested:K1,isNumber:Be,isObject:jo,isSeries:ot,isString:hn,isUndefined:Qe,lerp:NV,log:TV,MathError:ou,max:X1,mean:EV,median:IV,min:h8,mod:CV,mode:DV,multiply:x8,ndarray:ho,normal:Q2,ones:_V,permutations:AV,permutationsIterator:eg,pow:X2,print:FV,product:Gd,random:Fi,range:ir,remap:OV,reshape:Ld,reverse:Ho,round:PV,scale:su,seed:p8,Series:wa,set:Ai,shape:it,shuffle:q1,sign:BV,sin:zV,some:H2,sort:sl,sqrt:w8,stats:ui,std:I8,stdev:$V,subtract:S8,sum:Y2,tan:WV,timeAsync:UV,timeSync:a8,time:a8,transpose:Es,union:GV,variance:qV,vectorize:on,zeros:Z2,zip:HV,dump(){let e=typeof globalThis<"u"?globalThis:typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:void 0;if(!e)throw new Pd.MathError("Cannot dump functions into global scope because none of `globalThis`, `global`, `window`, or `self` exist in the current context!");Object.keys(Pd).forEach(t=>{try{Object.defineProperty(e,t,{configurable:!1,enumerable:!0,writable:!1,value:Pd[t]})}catch{e[t]=Pd[t]}})}};typeof window<"u"&&(window.JSMathTools=Pd);var wc=qo(r1(),1);function Lo(e){return Vn(e)?e.shape.length===2:et(e)?!0:Ce(e)&&it(e).length===2}function Vn(e){return e instanceof wc.Tensor}function eL(e){return Be(e)&&Math.floor(Number(e))===Number(e)&&e>=0&&e<1/0}function tL(e,t){return(0,wc.tidy)(()=>{Vn(e)&&(e=e.arraySync()),Vn(t)&&(t=t.arraySync());let n=[],r=t.slice();return e.forEach(a=>{let i=zd(r.map(o=>$d(a,o)));n.push(r[i]),r.splice(i,1)}),n.concat(r)})}function c2(e){return(0,wc.tidy)(()=>((et(e)||ot(e))&&(e=e.values),Vn(e)||(e=(0,wc.tensor)(e)),e.div(e.abs())))}var Ni=qo(r1(),1);function xc(e){return zc(e,t=>Number(t))}function pd(e,t,n){Vn(e)&&(e=e.arraySync()),(et(e)||ot(e))&&(e=e.values),Vn(t)&&(t=t.arraySync()),(et(t)||ot(t))&&(t=t.values),Z(la(it(e),it(t)),"`yPred` and `yTrue` must have the same shape!"),n&&(e=xc(e),t=xc(t));let r=(0,Ni.tidy)(()=>(0,Ni.tensor)(e).sub((0,Ni.tensor)(t)).pow(2).sum().arraySync());return isNaN(r)&&!n?pd(e,t,!0):r}function s5(e,t,n){Vn(e)&&(e=e.arraySync()),(et(e)||ot(e))&&(e=e.values),Vn(t)&&(t=t.arraySync()),(et(t)||ot(t))&&(t=t.values),Z(la(it(e),it(t)),"`yPred` and `yTrue` must have the same shape!"),n&&(e=xc(e),t=xc(t));let r=Pa(e),a=Pa(t),i=0;r.forEach((s,u)=>{s===a[u]&&i++});let o=i/r.length;return isNaN(o)&&!n?s5(r,a,!0):o}function p2(e,t,n,r){return(0,Ni.tidy)(()=>{Vn(e)&&(e=e.arraySync()),(et(e)||ot(e))&&(e=e.values),Vn(t)&&(t=t.arraySync()),(et(t)||ot(t))&&(t=t.values),Qe(n)&&(n=e),Vn(n)&&(n=n.arraySync()),(et(n)||ot(n))&&(n=n.values),typeof n=="number"&&(n=[n]),Z(la(it(e),it(t)),"`yTrue` and `yPred` must have the same shape!"),r&&(e=xc(e),t=xc(t),n=xc(n));let a=e,i=t,o=n;e=(0,Ni.tensor)(e),t=(0,Ni.tensor)(t),n=(0,Ni.tensor)(n);let s=e.sub(t).pow(2).sum(),u=e.sub(n.mean()).pow(2).sum(),l=(0,Ni.scalar)(1).sub(s.div(u)).arraySync();return isNaN(l)&&!r?p2(a,i,o,!0):l})}function nL(e,t,n){return(0,Ni.tidy)(()=>{let r=(0,Ni.scalar)(p2(e,t,n));return c2(r).mul(r.abs().sqrt()).arraySync()})}var cqe=Object.defineProperty,pqe=(e,t,n)=>t in e?cqe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,IL=(e,t,n)=>(pqe(e,typeof t!="symbol"?t+"":t,n),n);function _e(e){return typeof e=="number"&&!isNaN(e)||typeof e=="bigint"}var dqe=new Function(`
  try {
    return this === window
  } catch(e) {}

  try {
    return typeof importScripts !== "undefined"
  } catch(e) {}

  return false
`),Qs=class extends Error{constructor(e){dqe()?super(e):super(`

\x1B[31m`+e+`
\x1B[0m`)}};function U(e,t){if(!e)throw new Qs(t)}var CL=[Array,ArrayBuffer,BigInt64Array,BigUint64Array,Float32Array,Float64Array,Int16Array,Int32Array,Int8Array,Uint16Array,Uint32Array,Uint8Array,Uint8ClampedArray];function Me(e){return e===null||typeof e>"u"}var fqe=CL.map(e=>e.name);function me(e){try{return e instanceof Array?!0:Me(e.constructor)?!1:CL.indexOf(e.constructor)>-1||fqe.indexOf(e.constructor.name)>-1}catch{return!1}}function Pe(e){try{return!!e._symbol&&e._symbol===Symbol.for("@jrc03c/js-math-tools/dataframe")}catch{return!1}}function hr(e){return typeof e=="function"}function gs(e){return typeof e=="object"&&!Me(e)&&!me(e)}function ze(e){try{return!!e._symbol&&e._symbol===Symbol.for("@jrc03c/js-math-tools/series")}catch{return!1}}function bd(e,t){if(Pe(e)){let i=bd(e.values,t);return i.length>0&&_e(i[0])&&i[0]>=0&&i[0]<e.index.length&&(i[0]=e.index[i[0]]),i.length>1&&_e(i[1])&&i[1]>=0&&i[1]<e.columns.length&&(i[1]=e.columns[i[1]]),i}if(ze(e)){let i=bd(e.values,t);return i.length>0&&_e(i[0])&&i[0]>=0&&i[0]<e.index.length&&(i[0]=e.index[i[0]]),i}if(U(gs(e)||me(e),"You must pass (1) an object, array, Series, or DataFrame and (2) a function or value into the `indexOf` function!"),!hr(t)){let i=t;t=o=>o===i}function n(i,o,s){if(s=s||[],s.indexOf(i)>-1)return null;if(gs(i)){s.push(i);let u=Object.keys(i).concat(Object.getOwnPropertySymbols(i));for(let l=0;l<u.length;l++){let c=u[l],p=i[c];if(o(p))return[c];let d=n(p,o,s);if(d&&d.length>0)return[c].concat(d)}}else if(me(i)){s.push(i);for(let u=0;u<i.length;u++){let l=i[u];if(o(l))return[u];let c=n(l,o,s);if(c&&c.length>0)return[u].concat(c)}}else if(o(i))return[];return null}function r(i){try{return t(i)}catch{return!1}}let a=n(e,r);return a&&a.length>0?a:null}function Lr(e){function t(n){if(typeof n=="object"){if(n===null)return null;if(me(n))return n instanceof Array?n.map(a=>Lr(a)):n.slice();if(ze(n)){let a=n.copy();return a.values=Lr(a.values),a}if(Pe(n)){let a=n.copy();return a.values=Lr(n.values),a}if(n instanceof Date)return new Date(n.getTime());n=wd(n);let r={};return Object.keys(n).concat(Object.getOwnPropertySymbols(n)).forEach(a=>{r[a]=Lr(n[a])}),r}else return n}return t(wd(e))}function wd(e){function t(a,i,o){if(i=i||[],o=o||"",i.indexOf(a)>-1){let s=o.split("/").slice(o.startsWith("/")?1:0);if(s.some((l,c)=>{let p=s.slice(0,s.length-c-1),d=n;return p.forEach(f=>{d=d[f]}),d===a}))return`<reference to "${n===a?"/":"/"+bd(n,a).join("/")}">`}return typeof a=="object"?a===null?null:(i.push(a),me(a)?typeof a.constructor<"u"&&a.constructor.name!=="Array"?a.slice():a.map((s,u)=>t(s,i,o+"/"+u)):(Object.keys(a).concat(Object.getOwnPropertySymbols(a)).forEach(s=>{a[s]=t(a[s],i,o+"/"+s.toString())}),a)):a}let n=e,r=t(n);if(Pe(e)){let a=e.copy();a._values=r.values,a._columns=r.columns,a._index=r.index,r=a}if(ze(e)){let a=e.copy();a.name=r.name,a._values=r.values,a._index=r.index,r=a}return r}function eu(e){return e instanceof Date&&e.toString()!=="Invalid Date"}var rL=["number","int","float","bigint"];function Fa(e,t){function n(r,a){let i=typeof r,o=typeof a;if(i!==o&&!rL.includes(i)&&!rL.includes(o))return!1;if(i==="undefined"&&o==="undefined")return!0;if(i==="boolean"||i==="symbol")return r===a;if(i==="number"||i==="bigint")try{let s=r.toString(),u=a.toString();return s===u}catch{return!1}if(i==="string"||i==="function")return r===a;if(i==="object"){if(r===null||a===null)return r===null&&a===null;{if(eu(r))return eu(a)?r.getTime()===a.getTime():!1;if(eu(a))return!1;if(r instanceof RegExp&&a instanceof RegExp)return r.toString()===a.toString();if(me(r)!==me(a))return!1;let s=Object.keys(r).concat(Object.getOwnPropertySymbols(r)),u=Object.keys(a).concat(Object.getOwnPropertySymbols(a));if(s.length!==u.length)return!1;for(let l=0;l<s.length;l++){let c=s[l];if(!n(r[c],a[c]))return!1}return!0}}}try{return n(e,t)}catch{return n(wd(e),wd(t))}}function y1(e){let t="abcdefg1234567890",n="";for(;n.length<e;)n+=t[Math.floor(Math.random()*t.length)];return n}var hqe=y1(16),mqe=y1(16),vqe=y1(16),gqe=y1(16),yqe=y1(16),bqe=class{constructor(){this.clear()}get counts(){return this.values.map(e=>this.get(e))}get values(){return Object.values(this.valuesDict)}clear(){return this.countsDict={},this.valuesDict={},this}count(e){for(let t of e)me(t)?this.count(t):this.increment(t);return this}delete(e){let t=this.getStandardizedKey(e);return delete this.countsDict[t],delete this.valuesDict[t],this}get(e){return this.countsDict[this.getStandardizedKey(e)]||0}getStandardizedKey(e){return typeof e=="object"&&e===null?hqe:Me(e)?mqe:hr(e)?e.toString():typeof e=="symbol"?e.toString()+" - "+yqe:e===1/0?vqe:e===-1/0?gqe:typeof e=="bigint"?e.toString():Pe(e)?e.toJSONString():ze(e)?JSON.stringify(e.toObject()):JSON.stringify(e)}has(e){return!Me(this.countsDict[this.getStandardizedKey(e)])}increment(e){return this.set(e,this.get(e)+1)}set(e,t){let n=this.getStandardizedKey(e);return this.countsDict[n]=t,this.valuesDict[n]=e,this}toArray(){return this.values.map(e=>({value:e,count:this.get(e)}))}toObject(){let e={};return this.values.forEach(t=>{e[t]=this.get(t)}),e}};function zr(e){if(Pe(e)||ze(e))return zr(e.values);U(me(e),"The `flatten` function only works on arrays, Series, and DataFrames!");function t(n){let r=[];return n.forEach(a=>{me(a)?r=r.concat(t(a)):r.push(a)}),r}return t(e)}function Cn(e,t){t=t||{};let n=new bqe,r={},a=zr(e),i=[],o=-1/0,s=1/0,u=!1,l=0;for(let p of a){if(typeof p=="bigint"&&(u=!0),!t.shouldDropNaNs||_e(p))try{p>o&&(o=p),p<s&&(s=p),l+=Number(p),i.push(p)}catch{o=NaN,s=NaN,l=NaN}n.increment(p)}let c=l/i.length;if(r.counts=n,r.max=o,r.mean=c,r.min=s,r.n=a.length,r.sum=l,isNaN(r.mean)&&(r.max=NaN,r.min=NaN),t.shouldDropNaNs&&(r.nWithoutNaNs=i.length),t.mode){let p=Array.from(n.values.map(h=>[h,n.get(h)])).toSorted((h,m)=>m[1]-h[1]),d=p[0][1],f=[];for(let h of p)if(h[1]==d)f.push(h[0]);else break;r.mode=f.toSorted()}if(t.median)if(isNaN(c))r.median=NaN;else{let p=i.toSorted((f,h)=>Number(f)-Number(h)),d=Math.floor(p.length/2);if(p.length%2===0){let f=p[d-1],h=p[d];if(r.median=(Number(f)+Number(h))/2,u&&typeof f=="bigint"&&typeof h=="bigint")try{r.median=BigInt(r.median)}catch{}}else r.median=p[d]}if(t.stdev||t.variance){let p=0;for(let f of i)p+=Math.pow(Number(f)-c,2);p/=i.length;let d=Math.sqrt(p);r.stdev=d,r.variance=p}if(u){try{r.sum=BigInt(r.sum)}catch{}try{r.mean=BigInt(r.mean)}catch{}t.mode&&(r.mode=r.mode.map(p=>{try{return BigInt(p)}catch{return p}}))}return r}function xd(e,t){let{counts:n}=Cn(e);return Me(t)||(hr(t)?n.values.forEach(r=>{t(r)||n.delete(r)}):n.values.forEach(r=>{Fa(r,t)||n.delete(r)})),n}function c5(e){if(Pe(e)||ze(e))return c5(e.values);if(me(e)){let t=!1,n=!1,r=null;for(let a of e){if(c5(a))return!0;if(me(a)){if(r===null)r=a.length;else if(a.length!==r)return!0;t=!0}else n=!0;if(t&&n)return!0}}return!1}function co(e){return c5(wd(e))}function A2(e){if(Pe(e)||ze(e))return A2(e.values);U(me(e),"The `isNested` function only works on arrays, Series, and DataFrames!");for(let t=0;t<e.length;t++)if(me(e[t]))return!0;return!1}var dd="You must pass a natural number or a one-dimensional array of natural numbers into the `ndarray` function!";function Ii(e){U(!Me(e),dd),me(e)||(e=[e]),U(!A2(e),dd),U(e.length>0,dd);let t=e[0];if(typeof t=="bigint"&&(t=Number(t)),U(_e(t),dd),U(t>=0,dd),U(Math.floor(t)===t,dd),U(t!==1/0,"We can't create an array containing an infinite number of values!"),e.length===1){let n=[];for(let r=0;r<t;r++)n.push(void 0);return n}else{let n=[];for(let r=0;r<t;r++)n.push(Ii(e.slice(1)));return n}}function $o(e){if(Pe(e)||ze(e)){let n=e.copy();return n.values=$o(n.values),n.index=$o(n.index),n}U(me(e),"The `reverse` function only works on arrays, Series, and DataFrames!");let t=[];for(let n=e.length-1;n>=0;n--)t.push(e[n]);return t}function pn(e,t,n=1){U(!Me(e)&&!Me(t)&&!Me(n),"You must pass two numbers and optionally a step value to the `range` function!"),U(_e(e)&&_e(t)&&_e(n),"You must pass two numbers and optionally a step value to the `range` function!"),U(n>0,"The step value must be greater than 0! (NOTE: The step value is a magnitude; it does not indicate direction.)");let r=!1,a=typeof e=="bigint"||typeof t=="bigint"||typeof n=="bigint";if(e=Number(e),t=Number(t),n=Number(n),e>t){r=!0;let o=e;e=t+n,t=o+n}let i=[];for(let o=e;o<t;o+=n)if(a)try{i.push(BigInt(o))}catch{i.push(o)}else i.push(o);return r&&(i=$o(i)),i}function b1(e){let t="abcdefg1234567890",n="";for(;n.length<e;)n+=t[Math.floor(Math.random()*t.length)];return n}var wqe=b1(256),xqe=b1(256),Sqe=b1(256),kqe=b1(256),Nqe=b1(256);function ii(e){if(Pe(e)||ze(e))return ii(e.values);U(me(e),"The `set` function only works on arrays, Series, and DataFrames!");let t=[],n={};return zr(e).forEach(r=>{let a=typeof r=="object"&&r===null?wqe:Me(r)?xqe:hr(r)?r.toString():typeof r=="symbol"?r.toString()+" - "+Nqe:r===1/0?Sqe:r===-1/0?kqe:typeof r=="bigint"?r.toString():Pe(r)?r.toJSONString():ze(r)?JSON.stringify(r.toObject()):JSON.stringify(r);n[a]||t.push(r),n[a]=!0}),t}function DL(e){if(me(e)){let t=DL(e[0]);return[e.length].concat(t||[])}else return}function Ze(e){return Pe(e)||ze(e)?Ze(e.values):(U(me(e),"The `shape` function only works on arrays, Series, and DataFrames!"),DL(e))}function _L(e,t,n){if(Me(n)&&(n=0),U(n===0||n===1||n==="vertical"||n==="horizontal",'The only valid axis values for use when appending data to a DataFrame are 0, 1, "vertical", and "horizontal". Note that 0 == "horizontal" and 1 == "vertical".'),me(t)){U(!co(t),"The array of data you're trying to append to this DataFrame is jagged!");let r=Ze(t);if(r.length===1)if(n===0){let a=e.copy();a._values.push(t);let i=Math.max(e.shape[1],r[0]);for(a._values.forEach(o=>{for(;o.length<i;)o.push(void 0)});a._index.length<a._values.length;)a._index.push("row"+a._index.length);for(;a._columns.length<i;)a._columns.push("col"+a._columns.length);return a}else{let a=Math.max(e.shape[0],r[0]),i=e.copy();for(pn(0,a).forEach(o=>{o>=i._values.length&&i._values.push(Ii(e.shape[1])),i._values[o].push(t[o])});i._index.length<i._values.length;)i._index.push("row"+i._index.length);for(;i._columns.length<i._values[0].length;)i._columns.push("col"+i._columns.length);return i}else if(r.length===2)if(n===0){let a=Math.max(...t.map(o=>o.length).concat([e.shape[1]])),i=e.copy();for(i._values=i._values.concat(t).map(o=>{for(;o.length<a;)o.push(void 0);return o});i._index.length<i._values.length;)i._index.push("row"+i._index.length);for(;i._columns.length<a;)i._columns.push("col"+i._columns.length);return i}else{let a=Math.max(...t.map(s=>s.length))+e.shape[1],i=Math.max(e.shape[0],r[0]),o=e.copy();for(pn(0,i).forEach(s=>{for(s>=o._values.length&&o._values.push(Ii(e.shape[1])),o._values[s]=o._values[s].concat(t[s]);o._values[s].length<a;)o._values[s].push(void 0)});o._index.length<o._values.length;)o._index.push("row"+o._index.length);for(;o._columns.length<a;)o._columns.push("col"+o._columns.length);return o}else throw new Qs("Only 1- and 2-dimensional arrays can be appended to a DataFrame!")}else if(ze(t)){let r=_L(e,t.values,n);return n===0?r.index[r.index.length-1]=r.index.indexOf(t.name)>-1?t.name+" (2)":t.name:r.columns[r.columns.length-1]=r.columns.indexOf(t.name)>-1?t.name+" (2)":t.name,r}else if(Pe(t))if(n===0){let r=e.copy(),a=ii(r._columns.concat(t._columns)).length;for(r._values.forEach(i=>{for(;i.length<a;)i.push(void 0)}),t.apply(i=>{let o=i.copy(),s=[];r._columns.forEach(u=>{let l=o._index.indexOf(u);l>-1?(s.push(o._values[l]),o._values.splice(l,1),o._index.splice(l,1)):s.push(void 0)}),r._values.push(s.concat(o._values))},1),r._columns=r._columns.concat(t._columns.filter(i=>r._columns.indexOf(i)<0));r._index.length<r._values.length;){let i="row"+r._index.length;r._index.push(i+(e._index.indexOf(i)>-1?" (2)":""))}return r}else{let r=e.copy();return r._index.forEach((a,i)=>{let o=t._index.indexOf(a);o>-1?r._values[i]=r._values[i].concat(t._values[o]):r._values[i]=r._values[i].concat(Ii(t.shape[1]))}),t._index.forEach((a,i)=>{r._index.indexOf(a)<0&&(r._index.push(a),r._values.push(Ii(r._columns.length).concat(t._values[i])))}),r._columns=r._columns.concat(t._columns.map(a=>a+(r._columns.indexOf(a)>-1?" (2)":""))),r}else throw new Qs("Only 1- or 2-dimensional arrays, Series, and DataFrames can be appended to a DataFrame!")}function Tqe(e,t,n,r,a){if(a=a||0,U(hr(r),"The first parameter to the `apply` method must be a function."),U(a===0||a===1,"The second parameter to the `apply` method (the `axis`) must be 0 or 1."),a===0){let i={},o;if(n.columns.forEach((s,u)=>{let l=new t(n.values.map(p=>p[u]));l.name=s,l.index=n.index;let c=r(l,u,n);c instanceof t?i[s]=c.values:i[s]=c,Me(o)&&(o=c instanceof t||me(c))}),o){let s=new e(i);return s.index=n.index,s}else{let s=new t(n.columns.map(u=>i[u]));return s.index=n.columns,s}}else if(a===1){let i,o=n.values.map((s,u)=>{let l=new t(s);l.name=n.index[u],l.index=n.columns;let c=r(l,u,n);return Me(i)&&(i=c instanceof t||me(c)),c instanceof t?c.values:c});if(i){let s=new e(o);return s.index=n.index,s.columns=n.columns,s}else{let s=new t(o);return s.index=n.index,s}}}function cn(e){return typeof e=="string"}function Eqe(e,t,n,r,a){let i=s=>s instanceof e,o=s=>s instanceof t;if(Me(a)){if(i(r))return n.append(r,1);if(o(r))return n.append(r,1);if(gs(r)){let s=Math.max(...Object.keys(r).concat(Object.getOwnPropertySymbols(r)).map(u=>r[u].length));return Object.keys(r).concat(Object.getOwnPropertySymbols(r)).forEach(u=>{for(;r[u].length<s;)r[u].push(void 0)}),n.append(new e(r),1)}else throw new Qs("You must pass a DataFrame, Series, or object into the `assign` method!")}else{U(cn(r),"If passing two arguments into the `assign` method, then the first argument must be a string name!"),U(me(a)&&!co(a)&&Ze(a).length===1,"If passing two arguments into the `assign` method, then the second argument must be a 1-dimensional array!");let s=n.append(a,1);return s.columns[s.columns.length-1]=r,s}}function Iqe(e,t){if(t.isEmpty)return new e;let n=new e(Lr(t.values));return n.columns=t.columns.slice(),n.index=t.index.slice(),n}function Cqe(e,t,n,r,a){Me(r)&&(r=[]),Me(a)&&(a=[]),(cn(r)||_e(r))&&(r=[r]),(cn(a)||_e(a))&&(a=[a]),U(me(r),"The `drop` method only works on 1-dimensional arrays of numerical indices and/or strings."),U(me(a),"The `drop` method only works on 1-dimensional arrays of numerical indices and/or strings."),U(Ze(r).length===1,"The `drop` method only works on 1-dimensional arrays of numerical indices and/or strings."),U(Ze(a).length===1,"The `drop` method only works on 1-dimensional arrays of numerical indices and/or strings.");let i,o;n.index.forEach((u,l)=>{r.indexOf(u)<0&&r.indexOf(l)<0&&(i||(i=[]),i.push(u))}),n.columns.forEach((u,l)=>{a.indexOf(u)<0&&a.indexOf(l)<0&&(o||(o=[]),o.push(u))});let s=n.get(i,o);if(s instanceof t){let u=new e;u=u.assign(s),n.index.indexOf(s.name)>-1&&(u=u.transpose()),s=u}return s}function AL(e){return _e(e)&&(e>=0?Math.floor(e)===e:Math.ceil(e)===e)}function Sd(e){return AL(e)&&e>=0}function Dqe(e,t,n,r,a,i){r=r||0,U(r===0||r===1,"The first parameter of the `dropMissing` method (the `axis`) must be 0 or 1."),i=i||0,U(Sd(i),"The third parameter of the `dropMissing` method (the `threshold`) should be a whole number (meaning that data should be dropped if it contains more than `threshold` null values)."),a=i>0?"none":a||"any",U(a==="any"||a==="all"||a==="none","The second parameter of the `dropMissing` method (the `condition` parameter, which indicates the condition under which data should be dropped) should be 'any' or 'all' (meaning that if 'any' of the data contains null values, then it should be dropped; or that if 'all' of the data contains null values, then it should be dropped).");function o(l){if(i>0){let c=0;for(let p=0;p<l.length;p++){let d=l[p];if(Me(d)&&c++,c>=i)return[]}}else if(a==="any")for(let c=0;c<l.length;c++){let p=l[c];if(Me(p))return[]}else if(a==="all"){for(let c=0;c<l.length;c++){let p=l[c];if(!Me(p))return l}return[]}return l}let s=n.copy(),u=Math.random().toString();if(r===0){s=s.assign(u,s.index);let l=s.values.map(o).filter(p=>p.length>0);if(Ze(l).length<2)return new e;s.values=l;let c=s.get(null,u);if(Me(c))return new e;cn(c)&&(c=[c]),c instanceof t&&(c=c.values),s.index=c,s=s.drop(null,u)}else if(r===1){let l={};if(s.columns.forEach((p,d)=>{let f=s.values.map(m=>m[d]),h=o(f);h.length>0&&(l[p]=h)}),Object.keys(l).length+Object.getOwnPropertySymbols(l).length===0)return new e;let c=new e(l);return c.index=s.index,c}return s}function w1(e){if(Pe(e)||ze(e))return e.dropNaN(...Object.values(arguments).slice(1));U(me(e),"The `dropNaN` function only works on arrays, Series, and DataFrames!");let t=[];return e.forEach(n=>{try{return t.push(w1(n))}catch{if(_e(n))return t.push(n)}}),t}function _qe(e,t,n,r,a){n=n||0,U(n===0||n===1,"The first parameter of the `dropNaN` method (the `axis`) must be 0 or 1."),a=a||0,U(Sd(a),"The third parameter of the `dropNaN` method (the `threshold`) should be a whole number (meaning that data should be dropped if it contains more than `threshold` NaN values)."),r=a>0?"none":r||"any",U(r==="any"||r==="all"||r==="none","The second parameter of the `dropNaN` method (the `condition` parameter, which indicates the condition under which data should be dropped) should be 'any' or 'all' (meaning that if 'any' of the data contains NaN values, then it should be dropped; or that if 'all' of the data contains NaN values, then it should be dropped).");function i(s){let u=w1(s);return a>0?s.length-u.length<a:r==="any"?u.length===s.length:r==="all"?u.length>0:!0}let o=t.copy();if(n===0){let s=o.index.filter(u=>{let l=o.get(u,null).values;return i(l)});return s.length>0?o.get(s,null):new e}else if(n===1){let s=o.columns.filter(u=>{let l=o.get(null,u).values;return i(l)});return s.length>0?o.get(null,s):new e}return o}function aL(e){let t={};return zr(e).forEach((n,r)=>{t[n]=r}),t}function fd(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e)).sort((t,n)=>e[t]-e[n])}function Aqe(e,t,n,r,a){U(hr(r),"The `filter` method takes a single parameter: a function that is used to filter the values."),Me(a)&&(a=0),U(a===0||a===1,"The `axis` parameter to the `filter` method must be 0 or 1.");let i=n.copy();if(i.isEmpty)return i;let o=aL(i.index),s=aL(i.columns);if(a===0){let u=0,l=i.values.filter((c,p)=>{let d=new t(c);d.name=n.index[p],d.index=n.columns;let f=r(d,p,n);return f?u++:delete o[i.index[p]],f});if(u===0)return new e;if(u===1){let c=new t(l[0]);return c.name=fd(o)[0],c.index=fd(s),c}i.values=l,i.index=fd(o)}else if(a===1){i=i.transpose();let u=0,l=i.values.filter((c,p)=>{let d=new t(c);d.name=n.columns[p],d.index=n.index;let f=r(d,p,n);return f?u++:delete s[i.index[p]],f});if(u===0)return new e;if(u===1){let c=new t(l[0]);return c.name=fd(s)[0],c.index=fd(o),c}i.values=l,i.index=fd(s),i=i.transpose()}return i}function Fqe(e,t,n){(cn(t)||_e(t))&&(t=[t]),(cn(n)||_e(n))&&(n=[n]);for(let a in t)typeof t[a]=="bigint"&&(t[a]=Number(t[a]));for(let a in n)typeof n[a]=="bigint"&&(n[a]=Number(n[a]));let r=ii((t||[]).concat(n||[]).map(a=>typeof a));return U(r.length<=2,"Only whole numbers and/or strings are allowed in `get` arrays!"),r.length===1&&U(r[0]==="string"||r[0]==="number","Only whole numbers and/or strings are allowed in `get` arrays!"),r.length===2&&(U(r.indexOf("string")>-1,"Only whole numbers and/or strings are allowed in `get` arrays!"),U(r.indexOf("number")>-1,"Only whole numbers and/or strings are allowed in `get` arrays!")),Me(t)||(t=t.map(a=>{if(cn(a))return U(e.index.indexOf(a)>-1,`Row "${a}" does not exist!`),a;if(_e(a))return U(a>=0,`Index ${a} is out of bounds!`),U(Math.floor(a)===a,"Row numbers must be integers!"),U(a<e.index.length,`Index ${a} is out of bounds!`),e.index[a]})),Me(n)||(n=n.map(a=>{if(cn(a))return U(e.columns.indexOf(a)>-1,`Column "${a}" does not exist!`),a;if(_e(a))return U(a>=0,`Column ${a} is out of bounds!`),U(Math.floor(a)===a,"Column numbers must be integers!"),U(a<e.columns.length,`Column ${a} is out of bounds!`),e.columns[a]})),e.getSubsetByNames(t,n)}function Rqe(e,t){try{return e<t?-1:e>t?1:0}catch{return e=typeof e=="object"&&e!==null?JSON.stringify(e):e.toString(),t=typeof t=="object"&&t!==null?JSON.stringify(t):t.toString(),e<t?-1:e>t?1:0}}function ys(e,t){if(Me(t)&&(t=Rqe),Pe(e)||ze(e))return e.sort(...Object.values(arguments).slice(1));U(me(e),"The `sort` function only works on arrays, Series, and DataFrames!"),U(hr(t),"The second parameter of the `sort` function must be a comparison function!");let n=e.slice();return n.sort(t),n}function Oqe(e){let t=e.toLowerCase(),n="";for(let a=0;a<t.length;a++){let i=t[a];i.match(/[a-z0-9]/g)?n+=i:n+=" "}let r=n.split(" ").filter(a=>a.length>0);return r[0]+r.slice(1).map(a=>a[0].toUpperCase()+a.substring(1)).join("")}function iL(e,t,n){Me(n)?n=t.columns:cn(n)&&(n=[n]);let r={};n.forEach(i=>{U(cn(i),"You must pass either a string or a one-dimensional array of strings into the `getDummies` (AKA `oneHotEncode`) method!");let o=t.columns.indexOf(i);U(o>-1,`The given DataFrame does not have a column called "${i}"!`);let s=t.values.map(l=>l[o]),u=ys(ii(s));s.forEach(l=>{u.forEach(c=>{let p=i+"_"+Oqe(c.toString());r[p]||(r[p]=[]),l===c?r[p].push(1):r[p].push(0)})})});let a=new e(r);return a.index=t.index,a}function Mqe(e,t,n){let r=e.shape;Me(t)&&(t=pn(0,r[0])),Me(n)&&(n=pn(0,r[1])),_e(t)&&(t=[t]),_e(n)&&(n=[n]),U(me(t)&&me(n),"The `rowIndices` and `colIndices` parameters must be 1-dimensional arrays of whole numbers."),U(Ze(t).length===1&&Ze(n).length===1,"The `rowIndices` and `colIndices` parameters must be 1-dimensional arrays of whole numbers."),U(t.length>0,"The `rowIndices` array must contain at least one index."),U(n.length>0,"The `colIndices` array must contain at least one index."),t.forEach(o=>{U(Sd(o),"The `rowIndices` and `colIndices` parameters must be 1-dimensional arrays of whole numbers."),U(o<e.index.length,`The row index ${o} is out of bounds.`)}),n.forEach(o=>{U(Sd(o),"The `rowIndices` and `colIndices` parameters must be 1-dimensional arrays of whole numbers."),U(o<e.columns.length,`The column index ${o} is out of bounds.`)});let a=t.map(o=>e.index[o]),i=n.map(o=>e.columns[o]);return e.getSubsetByNames(a,i)}function Pqe(e,t,n,r,a){Me(r)&&(r=n.index),Me(a)&&(a=n.columns),cn(r)&&(r=[r]),cn(a)&&(a=[a]),U(me(r)&&me(a),"The `rows` and `cols` parameters must be 1-dimensional arrays of strings."),U(Ze(r).length===1&&Ze(a).length===1,"The `rows` and `cols` parameters must be 1-dimensional arrays of strings."),U(r.length>0,"The `rows` array must contain at least one row name."),U(a.length>0,"The `cols` array must contain at least one column name."),r.forEach(s=>{U(cn(s),"The `rows` and `cols` parameters must be 1-dimensional arrays of strings."),U(n.index.indexOf(s)>-1,`The row name "${s}" does not exist in the list of rows.`)}),a.forEach(s=>{U(cn(s),"The `rows` and `cols` parameters must be 1-dimensional arrays of strings."),U(n.columns.indexOf(s)>-1,`The column name "${s}" does not exist in the list of columns.`)});let i=r.map(s=>a.map(u=>n.values[n.index.indexOf(s)][n.columns.indexOf(u)]));if(r.length===1&&a.length===1)return i[0][0];if(r.length===1){let s=new t(i[0]);return s.name=r[0],s.index=a,s}if(a.length===1){let s=new t(i.map(u=>u[0]));return s.name=a[0],s.index=r,s}let o=new e(i);return o.columns=a,o.index=r,o}function Bqe(e,t,n){function r(d,f){return cn(d)&&d.length>f?d.substring(0,f-3)+"...":d}if(n.isEmpty)return console.table({}),console.log("Shape:",[0,0],`
`),n;let a=typeof window>"u"?20:10,i=Math.floor(a/2),o=typeof process>"u"?10:Math.floor(process.stdout.columns/24)-1,s=Math.floor(o/2),u=a>n.index.length?null:pn(0,i).concat(pn(n.index.length-i,n.index.length)),l=o>n.columns.length?null:pn(0,s).concat(pn(n.columns.length-s,n.columns.length)),c=n.get(u,l);c instanceof t&&(n.shape[0]===1?(c=new e([c.values]),c.index=n.index,c.columns=new t(n.columns).get(l).values):n.shape[1]===1&&(c=new e([c.values]).transpose(),c.index=new t(n.index).get(u).values,c.columns=n.columns)),a<=n.index.length&&(c._index.splice(i,0,"..."),c._values.splice(i,0,pn(0,c.columns.length).map(()=>"..."))),o<=n.columns.length&&(c._columns.splice(s,0,"..."),c._values=c._values.map(d=>(d.splice(s,0,"..."),d)));let p=28;return c instanceof t?(c.values=c.values.map(d=>r(d,p)),c.name=r(c.name,p),c.index=c.index.map(d=>r(d,p))):(c.values=c.values.map(d=>d.map(f=>r(f,p))),c.columns=c.columns.map(d=>r(d,p)),c.index=c.index.map(d=>r(d,p))),console.table(c.toDetailedObject()),console.log("Shape:",n.shape,`
`),n}function vd(e,t){U(_e(e),"The `leftPad` function only works on numbers!");let n=e.toString();for(;n.length<t;)n="0"+n;return n}function Lqe(e,t){let n=t?e:e.copy();return n.index=pn(0,e.shape[0]).map(r=>"row"+vd(r,(n.index.length-1).toString().length)),n}function x1(e,t){if(Pe(e)||ze(e))return x1(e.values,t);U(me(e),"The `product` function only works on arrays, Series, and DataFrames!");try{if(e.length===0)return NaN;let n=zr(e),r=!1,a=1;for(let i of n){if(!_e(i))if(t)i=1;else return NaN;typeof i=="bigint"&&(r=!0,i=Number(i)),a*=i}if(r)try{return BigInt(a)}catch{}return a}catch{return NaN}}function zqe(e){return AL(e)&&e>0}function f1(e,t){if(Pe(e)||ze(e))return f1(e.values,t);if(U(me(e),"The first argument passed into the `reshape` function must be an array!"),_e(t)&&(t=[t]),U(me(t),"The second argument passed into the `reshape` function must be a whole number or a one-dimensional array of whole numbers!"),U(Ze(t).length===1,"The first argument passed into the `reshape` function must be a whole number or a one-dimensional array of whole numbers!"),t=t.map(i=>(typeof i=="bigint"&&(i=Number(i)),U(zqe(i),"The first argument passed into the `reshape` function must be a whole number or a one-dimensional array of whole numbers!"),Number(i))),t.length===0)return zr(e);let n=zr(e);if(t.length===1&&t[0]===n.length)return n;U(x1(t)===n.length,"The new shape doesn't match the number of values available in `x` (the first argument passed into the `reshape` function)!");let r=[],a=Math.floor(n.length/t[0]);for(let i=0;i<t[0];i++){let o=n.slice(i*a,(i+1)*a);r.push(f1(o,t.slice(1)))}return r}var FL=Math.pow(2,64),Wn=[];RL(Math.floor(Math.random()*FL));function $qe(e,t){e=ya(e);function n(){e+=ya("0x9e3779b97f4a7c15");let a=Lr(e);return a=(a^a>>BigInt(30))*ya("0xbf58476d1ce4e5b9"),a=(a^a>>BigInt(27))*ya("0x94d049bb133111eb"),a^a>>BigInt(31)}let r=[];for(let a=0;a<t;a++)r.push(n());return r}function ya(e){return BigInt.asUintN(64,BigInt(e))}function oL(e,t){return e=ya(e),t=BigInt(t),ya(ya(e<<t)|ya(e>>ya(BigInt(64)-t)))}function RL(e){if(typeof e=="bigint"&&(e=Number(e)),Me(e))return Lr(Wn);{U(_e(e),"If passing a value into the `seed` function, then that value must be an integer!");let t=$qe(Math.floor(e),4);Wn[0]=t[0],Wn[1]=t[1],Wn[2]=t[2],Wn[3]=t[3]}}function sL(){let e=ya(oL(Wn[0]+Wn[3],23)+Wn[0]),t=ya(Wn[1]<<BigInt(17));return Wn[2]=ya(Wn[2]^Wn[0]),Wn[3]=ya(Wn[3]^Wn[1]),Wn[1]=ya(Wn[1]^Wn[2]),Wn[0]=ya(Wn[0]^Wn[3]),Wn[2]=ya(Wn[2]^t),Wn[3]=oL(Wn[3],45),Math.floor(Number(e))/FL}function nu(e){return Me(e)?sL():(me(e)||(e=[e]),f1(Ii(x1(e)).map(sL),e))}function kd(e){if(Pe(e)||ze(e))return e.shuffle(...Object.values(arguments).slice(1));U(me(e),"The `shuffle` function only works on arrays, Series, and DataFrames!");let t=[],n=e.slice();for(let r=0;r<e.length;r++){let a=Math.floor(nu()*n.length);t.push(n.splice(a,1)[0])}return t}function Vqe(e,t){return Me(t)&&(t=0),U(t===0||t===1,"The `axis` parameter to the `shuffle` must be 0, 1, or undefined."),e.get(t===0?kd(e.index):null,t===1?kd(e.columns):null)}function vs(e){return typeof e=="boolean"}function Wqe(e,t,n){return hr(t)?Uqe(e,t,n):Gqe(e,t,n)}function Uqe(e,t,n){if(n=Me(n)?0:n,U(hr(t),"When sorting a DataFrame using a function, the first argument to the `sort` method must be a function!"),U(_e(n),"When sorting a DataFrame using a function, the second argument to the `sort` method must be null, undefined, 0, or 1 to indicate the axis along which the data should be sorted! An axis of 0 means that the rows will be sorted relative to each other, whereas an axis of 1 means that the columns will be sorted relative to each other."),n===0){let r=ys(e.index,(a,i)=>t(e.get(a,null),e.get(i,null)));return e.get(r,null)}else{let r=ys(e.columns,(a,i)=>t(e.get(null,a),e.get(null,i)));return e.get(null,r)}}function Gqe(e,t,n){let r=e.copy(),a=nu().toString();r=r.assign(a,r.index),Me(t)&&(t=[a],n=[!0]),(_e(t)||cn(t))&&(t=[t],(vs(n)||cn(n))&&(n=[n])),U(me(t),"The first parameter of the `sort` method must be (1) a string or index representing a column name or index, respectively; (2) a 1-dimensional array of strings and/or indices; or (3) null."),U(Ze(t).length===1,"The first parameter of the `sort` method must be (1) a string or index representing a column name or index, respectively; (2) a 1-dimensional array of strings and/or indices; or (3) null."),Me(n)&&(n=pn(0,t.length).map(()=>!0)),U(me(n),"The second parameter of the `sort` method must be (1) a string or boolean representing the sort direction ('ascending' / 'descending', or true / false); (2) a 1-dimensional array of strings and/or booleans; or (3) null."),U(Ze(n).length===1,"The second parameter of the `sort` method must be (1) a string or boolean representing the sort direction ('ascending' / 'descending', or true / false); (2) a 1-dimensional array of strings and/or booleans; or (3) null."),U(t.length===n.length,"The arrays passed into the `sort` method must be equal in length."),t=t.map(o=>{if(U(cn(o)||_e(o),"Column references can either be column names (as strings) or column indices (as whole numbers)."),cn(o)){let s=r.columns.indexOf(o);return U(s>-1,`The column "${o}" does not exist!`),s}if(_e(o))return U(Sd(o),"Column indices must be whole numbers!"),U(o<r.columns.length,`The index ${o} is out of bounds!`),o}),n=n.map(o=>{if(U(cn(o)||vs(o),"Direction references can either be strings ('ascending' or 'descending') or booleans (true or false)."),cn(o)){let s=o.trim().toLowerCase();return U(s==="ascending"||s==="descending","Direction references can either be strings ('ascending' or 'descending') or booleans (true or false)."),s==="ascending"}if(vs(o))return o}),r.values=ys(r.values,(o,s)=>{let u=0;for(;o[t[u]]===s[t[u]]&&u<t.length;)u++;let l=n[u];if(o[t[u]]===s[t[u]])return 0;if(o[t[u]]<s[t[u]])return l?-1:1;if(o[t[u]]>s[t[u]])return l?1:-1});let i=r.columns.indexOf(a);return r.index=r.values.map(o=>o[i]),r=r.dropColumns(a),r}function qqe(e,t){Me(t)?t=0:U(t===0||t===1,"The axis parameter of the `toDetailedObject` method must be undefined, 0, or 1. An axis of 0 indicates that the returned object should be organized first by rows and then by columns. An axis of 1 indicates that the returned object should be organized first by columns and then by rows.");let n={};return t===0?e.index.forEach((r,a)=>{let i={};e.columns.forEach((o,s)=>{i[o]=e.values[a][s]}),n[r]=i}):e.columns.forEach((r,a)=>{let i={};e.index.forEach((o,s)=>{i[o]=e.values[s][a]}),n[r]=i}),n}function OL(e,t){return JSON.stringify(e.toObject(t))}async function Hqe(e,t,n){let r=OL(e,n),a=!1,i=!1,o,s;try{let u=t;if(t.includes("/")){let c=t.split("/");u=c[c.length-1]}let l=document.createElement("a");l.href=`data:application/json;charset=utf-8,${encodeURIComponent(r)}`,l.download=u,l.dispatchEvent(new MouseEvent("click")),a=!0}catch(u){o=u}try{let u=await import("node:fs"),l=await import("node:path");u.writeFileSync(l.resolve(t),r,"utf8"),i=!0}catch(u){s=u}if(!a&&!i)throw typeof window<"u"?new Qs(o):typeof module<"u"?new Qs(s):new Qs("I don't know what's going wrong, but it doesn't seem like you're in Node or the browser, and we couldn't download and/or write the file to disk!");return e}function jqe(e){let t={};return e.columns.forEach(n=>{t[n]=e.get(n).values}),t}function Ci(e){if(Pe(e)||ze(e))return e.transpose();U(me(e),"The `transpose` function only works on arrays, Series, and DataFrames!");let t=Ze(e);if(U(t.length<=2,"I'm not smart enough to know how to transpose arrays that have more than 2 dimensions. Sorry for the inconvenience! Please only pass 1- or 2-dimensional arrays into the `transpose` function!"),t.length===1)return $o(e);if(t.length===2){let n=Ii($o(t));for(let r=0;r<t[0];r++)for(let a=0;a<t[1];a++)n[a][r]=e[r][a];return n}}function ML(e,t,n){if(ze(n))return new e(t.values.concat(n.values));if(me(n)){let r=Ze(n);U(r.length===1&&!A2(r),"Only vectors can be appended to Series!");let a=t.copy();return n.forEach((i,o)=>{a._values.push(i),a._index.push("item"+(t.values.length+o))}),a}return ML(t,[n])}function Kqe(e,t){U(hr(t),"The parameter to the `apply` method must be a function.");let n=e.copy();return n._values=n._values.map((r,a)=>t(r,a)),n}function Xqe(e){let t=e.copy(),n=[];return t._values=t.values.filter((r,a)=>Me(r)?!1:(n.push(t.index[a]),!0)),t._index=n,t}function Yqe(e,t){let n=[],r=[];t.values.forEach((i,o)=>{_e(i)&&(r.push(i),n.push(t.index[o]))});let a=new e(r);return a.name=t.name,a.index=n,a}function Jqe(e,t,n){let r=t.copy(),a=Lr(r.index),i=[],o=r.values.filter((s,u)=>{let l=n(s,u,r.values);return l||i.push(r.index[u]),l});return i.forEach(s=>{a.splice(a.indexOf(s),1)}),o.length===0?(r=new e,r.name=t.name,r):(r.values=o,r.index=a,r)}function Zqe(e,t){(cn(t)||_e(t))&&(t=[t]);for(let r in t)typeof t[r]=="bigint"&&(t[r]=Number(t[r]));let n=ii((t||[]).map(r=>typeof r));return U(n.length<=2,"Only whole numbers and/or strings are allowed in `get` arrays!"),n.length===1&&U(n[0]==="string"||n[0]==="number","Only whole numbers and/or strings are allowed in `get` arrays!"),n.length===2&&(U(n.indexOf("string")>-1,"Only whole numbers and/or strings are allowed in `get` arrays!"),U(n.indexOf("number")>-1,"Only whole numbers and/or strings are allowed in `get` arrays!")),Me(t)||(t=t.map(r=>{if(typeof r=="string")return U(e.index.indexOf(r)>-1,`Index "${r}" does not exist!`),r;if(typeof r=="number")return U(r>=0,`Index ${r} is out of bounds!`),U(Math.floor(r)===r,"Indices must be integers!"),U(r<e.index.length,`Index ${r} is out of bounds!`),e.index[r]})),e.getSubsetByNames(t)}function Qqe(e,t){let n=e.shape;Me(t)&&(t=pn(0,n[0])),U(me(t),"The `indices` array must be 1-dimensional array of whole numbers."),U(Ze(t).length===1,"The `indices` array must be a 1-dimensional array of whole numbers."),U(t.length>0,"The `indices` array must contain at least one index."),t.forEach(a=>{U(Sd(a),"The `indices` array must be a 1-dimensional array of whole numbers."),U(a<e.index.length,`The row index ${a} is out of bounds.`)});let r=t.map(a=>e.index[a]);return e.getSubsetByNames(r)}function eHe(e,t,n){Me(n)&&(n=t.index),U(me(n),"The `indices` array must be a 1-dimensional array of strings."),U(Ze(n).length===1,"The `indices` array must be a 1-dimensional array of strings."),U(n.length>0,"The `indices` array must contain at least one index name."),n.forEach(i=>{U(cn(i),"The `indices` array must contain only strings."),U(t.index.indexOf(i)>-1,`The name "${i}" does not exist in the index.`)});let r=n.map(i=>t.values[t.index.indexOf(i)]);if(r.length===1)return r[0];let a=new e(r);return a.index=n,a.name=t.name,a}function tHe(e){let t=e.copy(),n=typeof window>"u"?20:10;if(t.index.length>n){t=t.get(pn(0,n/2).concat(pn(t.index.length-n/2,t.index.length)));let a=Lr(t.index);a.splice(Math.floor(a.length/2),0,"..."),t.values.push("..."),t.index.push("..."),t=t.get(a)}let r={};return t.values.forEach((a,i)=>{let o={};o[t.name]=a,r[t.index[i]]=o}),console.table(r),console.log("Shape:",e.shape,`
`),e}function nHe(e){let t=e.copy();return t.get(kd(t.index))}function rHe(e,t,n){n=n||((u,l)=>u<l?-1:1),U(Me(n)||hr(n),"You must pass undefined, null, or a comparison function as the second argument to the `sort` method!");let r=Ci([t.values,t.index]),a=ys(r,(u,l)=>n(u[0],l[0])),i=[],o=[];a.forEach(u=>{i.push(u[0]),o.push(u[1])});let s=new e;return s._values=i,s._index=o,s.name=t.name,s}function aHe(e,t){let n=Ci([t.values,t.index]);n=Ci(ys(n,(a,i)=>{if(a[1]===i[1])return 0;if(a[1]<i[1])return-1;if(a[1]>i[1])return 1}));let r=new e(n[0]);return r.index=n[1],r.name=t.name,r}function iHe(e){let t={};return t[e.name]={},e.index.forEach((n,r)=>{t[e.name][n]=e.values[r]}),t}var uL=Symbol.for("@jrc03c/js-math-tools/series");function oHe(e){class t{static[Symbol.hasInstance](r){try{return!!r._symbol&&r._symbol===uL}catch{return!1}}constructor(r){if(this.name="data",Object.defineProperty(this,"_symbol",{configurable:!1,enumerable:!1,writable:!1,value:uL}),Object.defineProperty(this,"_values",{value:[],configurable:!0,enumerable:!1,writable:!0}),Object.defineProperty(this,"values",{configurable:!0,enumerable:!0,get(){return this._values},set(a){U(me(a),"The new values must be a 1-dimensional array!");let i=Ze(a);U(i.length===1,"The new array of values must be 1-dimensional!"),i[0]<this._index.length?this._index=this._index.slice(0,i[0]):i[0]>this._index.length&&(this._index=this._index.concat(pn(this._index.length,i[0]).map(o=>"item"+vd(o,(a.length-1).toString().length)))),this._values=a}}),Object.defineProperty(this,"_index",{value:[],configurable:!0,enumerable:!1,writable:!0}),Object.defineProperty(this,"index",{configurable:!0,enumerable:!0,get(){return this._index},set(a){U(me(a),"The new index must be a 1-dimensional array of strings!"),U(a.length===this.shape[0],"The new index must be the same length as the old index!"),U(Ze(a).length===1,"The new index must be a 1-dimensional array of strings!"),a.forEach(i=>{U(cn(i),"All of the row names must be strings!")}),this._index=a}}),r){if(r instanceof t)this.name=r.name,this.values=Lr(r.values),this.index=Lr(r.index);else if(me(r)){let a=Ze(r);U(a.length===1,"When passing an array into the constructor of a Series, the array must be 1-dimensional!"),this.values=r}else if(r instanceof Object){let a=Object.keys(r).concat(Object.getOwnPropertySymbols(r)).map(s=>s.toString());U(a.length===1,"When passing an object into the constructor of a Series, the object must have only 1 key-value pair, where the key is the name of the data and the value is the 1-dimensional array of values!");let i=a[0],o=r[i];U(Ze(o).length===1,"When passing an object into the constructor of a Series, the object must have only 1 key-value pair, where the key is the name of the data and the value is the 1-dimensional array of values!"),this.name=i,this.values=o.slice()}}}get shape(){return Ze(this.values)}get length(){return this.shape[0]}get isEmpty(){return this.values.filter(r=>!Me(r)).length===0}clear(){let r=this.copy();return r.values.forEach((a,i)=>{r.values[i]=void 0}),r}get(r){return Zqe(this,r)}getSubsetByNames(r){return eHe(t,this,r)}getSubsetByIndices(r){return Qqe(this,r)}loc(r){return this.getSubsetByNames(r)}iloc(r){return this.getSubsetByIndices(r)}reverse(){let r=new t($o(this.values));return r.index=$o(this.index),r.name=this.name,r}resetIndex(){let r=this.copy();return r.index=pn(0,this.shape[0]).map(a=>"item"+vd(a,(r.index.length-1).toString().length)),r}copy(){let r=new t;return r._values=Lr(this.values),r._index=Lr(this.index),r.name=this.name,r}append(r){return ML(t,this,r)}apply(r){return Kqe(this,r)}concat(r){return this.append(r)}dropMissing(r,a){return Xqe(this,r,a)}dropNaN(){return Yqe(t,this)}toObject(){return iHe(this)}print(){return tHe(this)}shuffle(){return nHe(this)}sort(r){return rHe(t,this,r)}sortByIndex(){return aHe(t,this)}filter(r){return Jqe(t,this,r)}toDataFrame(){let r=new e(Ci([this.values]));return r.columns=[this.name],r.index=this.index,r}transpose(){let r=this.copy();return r.values=$o(r.values),r.index=$o(r.index),r}getDummies(){return this.toDataFrame().getDummies()}oneHotEncode(){return this.getDummies()}}return t}var lL=Symbol.for("@jrc03c/js-math-tools/dataframe");function d2(e){let t="abcdefghijklmnopqrstuvwxyz1234567890",n="";for(let r=0;r<e;r++)n+=t[Math.floor(nu()*t.length)];return n}var Rt=class{static[Symbol.hasInstance](e){try{return!!e._symbol&&e._symbol===lL}catch{return!1}}constructor(e){if(Object.defineProperty(this,"_symbol",{configurable:!1,enumerable:!1,writable:!1,value:lL}),Object.defineProperty(this,"_values",{value:[],configurable:!0,enumerable:!1,writable:!0}),Object.defineProperty(this,"values",{configurable:!0,enumerable:!0,get(){return this._values.length===0||!Me(this._values[0])&&this._values[0].length===0?[[]]:this._values},set(t){U(me(t),"The new values must be a 2-dimensional array!");let n=Ze(t);U(n.length===2,"The new array of values must be 2-dimensional!"),n[0]<this._index.length?this._index=this._index.slice(0,n[0]):n[0]>this._index.length&&(this._index=this._index.concat(pn(this._index.length,n[0]).map(r=>"row"+vd(r,(n[0]-1).toString().length)))),n[1]<this._columns.length?this._columns=this._columns.slice(0,n[1]):n[1]>this._columns.length&&(this._columns=this._columns.concat(pn(this._columns.length,n[1]).map(r=>"col"+vd(r,(n[1]-1).toString().length)))),this._values=t}}),Object.defineProperty(this,"_columns",{value:[],configurable:!0,enumerable:!1,writable:!0}),Object.defineProperty(this,"columns",{configurable:!0,enumerable:!0,get(){return this._columns},set(t){U(me(t),"The new columns list must be a 1-dimensional array of strings!"),U(this.isEmpty||t.length===this.shape[1],"The new columns list must be the same length as the old columns list!"),U(Ze(t).length===1,"The new columns list must be a 1-dimensional array of strings!"),t=t.map(r=>(typeof r!="string"&&(r=JSON.stringify(r)||r.toString()),r.trim().length===0?"untitled_"+d2(8):r.trim()));let n=(()=>{let r=xd(t),a={};return r.values.forEach(i=>{a[i]=r.get(i)}),a})();t=t.map(r=>n[r]>1?r+"_"+d2(8):r),this._columns=t}}),Object.defineProperty(this,"_index",{value:[],configurable:!0,enumerable:!1,writable:!0}),Object.defineProperty(this,"index",{configurable:!0,enumerable:!0,get(){return this._index},set(t){U(me(t),"The new index must be a 1-dimensional array of strings!"),U(this.isEmpty||t.length===this.shape[0],"The new index must be the same length as the old index!"),U(Ze(t).length===1,"The new index must be a 1-dimensional array of strings!"),t=t.map(r=>(typeof r!="string"&&(r=JSON.stringify(r)||r.toString()),r.trim().length===0?"untitled_"+d2(8):r.trim()));let n=(()=>{let r=xd(t),a={};return r.values.forEach(i=>{a[i]=r.get(i)}),a})();t=t.map(r=>n[r]>1?r+"_"+d2(8):r),this._index=t}}),U(Me(e)||gs(e)||me(e),"The `data` passed into the constructor of a DataFrame must be either (1) an object where the key-value pairs are (respectively) column names and 1-dimensional arrays of values, or (2) a 2-dimensional array of values."),e)if(e instanceof Rt)this.values=Lr(e.values),this.columns=Lr(e.columns),this.index=Lr(e.index);else if(me(e)){let t=Ze(e);U(t.length===2,"The `data` array passed into the constructor of a DataFrame must be 2-dimensional!"),U(!co(e),"The 2-dimensional array passed into the constructor of a DataFrame must not contain sub-arrays (i.e., rows) of different lengths!"),this.values=e}else{this._columns=Object.keys(e).concat(Object.getOwnPropertySymbols(e)).map(i=>i.toString());let t=[],n=null,r=null;this._columns.forEach(i=>{Me(r)&&(n=i,r=e[i].length),U(e[i].length===r,`The object passed into the DataFrame constructor contains arrays of different lengths! The key "${n}" points to an array containing ${r} items, and the key "${i}" points to an array containing ${e[i].length} items.`),r=e[i].length;let o=e[i];t.push(o)}),this._values=Ci(t);let a=Ze(this.values);this._index=pn(0,a[0]).map(i=>"row"+vd(i,(a[0]-1).toString().length))}}get shape(){return Ze(this.values)}get length(){return this.shape[0]}get width(){return this.shape[1]}get rows(){return this.index}set rows(e){this.index=e}get isEmpty(){return this.values.length===0||this.values.every(e=>e.length===0)}clear(){let e=new Rt(Ii(this.shape));return e.columns=this.columns.slice(),e.index=this.index.slice(),e}get(e,t){if(arguments.length===0)return this;if(arguments.length===1)try{return this.get(null,e)}catch{return this.get(e,null)}return Fqe(this,e,t)}getSubsetByNames(e,t){return Pqe(Rt,Zr,this,e,t)}getSubsetByIndices(e,t){return Mqe(this,e,t)}getDummies(e){return iL(Rt,this,e)}oneHotEncode(e){return iL(Rt,this,e)}transpose(){let e=new Rt(Ci(this.values));return e.columns=this.index.slice(),e.index=this.columns.slice(),e}get T(){return this.transpose()}resetIndex(e){return Lqe(this,e)}copy(){return Iqe(Rt,this)}assign(e,t){return Eqe(Rt,Zr,this,e,t)}apply(e,t){return Tqe(Rt,Zr,this,e,t)}dropMissing(e,t,n){return Dqe(Rt,Zr,this,e,t,n)}dropNaN(e,t,n){return _qe(Rt,this,e,t,n)}drop(e,t){return Cqe(Rt,Zr,this,e,t)}dropColumns(e){return this.drop(null,e)}dropRows(e){return this.drop(e,null)}toDetailedObject(e){return qqe(this,e)}toObject(){return jqe(this)}toJSONString(e){return OL(this,e)}saveAsJSON(e,t){return Hqe(this,e,t)}print(){return Bqe(Rt,Zr,this)}sort(e,t){return Wqe(this,e,t)}sortByIndex(){return this.sort()}filter(e,t){return Aqe(Rt,Zr,this,e,t)}shuffle(e){return Vqe(this,e)}append(e,t){return _L(this,e,t)}concat(e,t){return this.append(e,t)}join(e,t){return this.append(e,t)}toString(){return JSON.stringify(this)}},Zr=oHe(Rt);function S1(e,t){return Cn(e,{shouldDropNaNs:t}).max}function dn(e){return U(hr(e),"You must pass a function into the `vectorize` function!"),function t(){let n,r,a=[],i=[],o=Object.keys(arguments).filter(s=>{let u=arguments[s];return me(u)?!0:ze(u)?(n=!0,a.push(u),!0):Pe(u)?(r=!0,i.push(u),!0):!1}).map(s=>arguments[s]);if(o.slice(0,-1).forEach((s,u)=>{U(Fa(me(s)?Ze(s):s.shape,me(o[u+1])?Ze(o[u+1]):o[u+1].shape),`When passing multiple arrays into the \`${e.name}\` function, all of the arrays must have the same shape!`)}),o.length>0){let s=S1(o.map(l=>l.length?l.length:l.values.length)),u=pn(0,s).map(l=>{let c=Object.keys(arguments).map(p=>me(arguments[p])?arguments[p][l]:ze(arguments[p])||Pe(arguments[p])?arguments[p].values[l]:arguments[p]);return t(...c)});if(r)try{if(i.length===1&&Fa(Ze(i[0]),Ze(u))){let l=new Rt(u);return l.index=i[0].index.slice(),l.columns=i[0].columns.slice(),l}else return new Rt(u)}catch{return u}if(n)try{if(a.length===1&&a[0].length===u.length){let l=new Zr(u);return l.name=a[0].name,l.index=a[0].index.slice(),l}else return new Zr(u)}catch{return u}return u}else return e(...arguments)}}function sHe(e){try{return _e(e)?typeof e=="bigint"?e<0?-e:e:Math.abs(e):NaN}catch{return NaN}}var ru=dn(sHe);function uHe(){try{let e=0,t=!1,n=Object.values(arguments);for(let r of n){if(!_e(r))return NaN;typeof r=="bigint"&&(t=!0,r=Number(r)),e+=r}if(t)try{return BigInt(e)}catch{}return e}catch{return NaN}}var Nd=dn(uHe);function lHe(e,t){try{return t(e)}catch{return NaN}}var Nc=dn(lHe);function cHe(e){try{return _e(e)?(typeof e=="bigint"&&(e=Number(e)),Math.acos(e)):NaN}catch{return NaN}}var pHe=dn(cHe);function dHe(e){try{return _e(e)?(typeof e=="bigint"&&(e=Number(e)),Math.asin(e)):NaN}catch{return NaN}}var fHe=dn(dHe);function hHe(e){try{return _e(e)?(typeof e=="bigint"&&(e=Number(e)),Math.atan(e)):NaN}catch{return NaN}}var mHe=dn(hHe);function h1(e,t){if(Pe(e)){let n=h1(e.values,t);return[e.index[n[0]],e.columns[n[1]]]}if(ze(e)){let n=h1(e.values,t);return e.index[n]}U(me(e),"The `argmax` function only works on arrays, Series, and DataFrames!");try{let n=bd(e,S1(e,t));return n?n.length===0?void 0:n.length===1?n[0]:n:void 0}catch{return}}function PL(e,t){return Cn(e,{shouldDropNaNs:t}).min}function Td(e,t){if(Pe(e)){let n=Td(e.values,t);return[e.index[n[0]],e.columns[n[1]]]}if(ze(e)){let n=Td(e.values,t);return e.index[n]}U(me(e),"The `argmin` function only works on arrays, Series, and DataFrames!");try{let n=bd(e,PL(e,t));return n?n.length===0?void 0:n.length===1?n[0]:n:void 0}catch{return}}function Ti(e,t){if(Pe(e)||ze(e))return e.apply(n=>Ti(n,t));if(me(e))return e.map(n=>Ti(n,t));if(t==="null")return null;if(t==="number"){if(Me(e))return NaN;let n=Ti(e,"boolean");if(vs(n))return n?1:0;try{JSON.parse(e)}catch{let i=Ti(e,"date");if(eu(i))return i.getTime()}let r=parseFloat(e);return isNaN(r)?NaN:r}if(t==="int"){let n=Ti(e,"number");return n>=0?Math.floor(n):Math.ceil(n)}if(t==="float")return Ti(e,"number");if(t==="bigint")return typeof e=="bigint"?e:BigInt(Ti(e,"int"));if(t==="boolean"){if(vs(e))return e;if(_e(e))return e===0?!1:e===1?!0:null;try{let n=(typeof e=="object"?e.toString()==="null"?"false":JSON.stringify(e):e.toString()).trim().toLowerCase();return n==="true"||n==="yes"||n==="y"?!0:n==="false"||n==="no"||n==="n"?!1:null}catch{return null}}if(t==="date"){if(eu(e))return e;if(Me(e))return null;let n=parseFloat(e);if(!isNaN(n)){let a=new Date(e);return eu(a)?a:null}let r=Date.parse(e);return isNaN(r)?null:new Date(r)}if(t==="object"){if(gs(e))return e;let n=Ti(e,"boolean");if(vs(n))return null;try{let a=Ti(e,"number");if(_e(a))return JSON.parse(e),null}catch{}let r=Ti(e,"date");if(r)return r;try{let a=JSON.parse(e);return me(a)?a.map(i=>Ti(i,t)):a}catch{return null}}if(t==="string")return Me(e)?Fa(e,void 0)?"undefined":"null":e instanceof Date?e.toJSON():typeof e=="object"?e===null?"null":JSON.stringify(e):e.toString()}function vHe(e){try{return _e(e)?typeof e=="bigint"?e:Math.ceil(e):NaN}catch{return NaN}}var gHe=dn(vHe);function yHe(e,t){try{if(!_e(e))return NaN;if(typeof e=="bigint")return e;if(Me(t))t=1e-10;else if(!_e(t))return NaN;return ru(e)<t?0:e}catch{return NaN}}var bHe=dn(yHe);function p5(e){if(Pe(e)||ze(e)){let t=e.copy();return t.values=p5(t.values),t}if(me(e))return e.map(t=>p5(t));try{let t=JSON.parse(e);return _e(t)?typeof t=="bigint"?Number(t):t>=0?Math.floor(t):Math.ceil(t):NaN}catch{return NaN}}var Uo=dn(p5);function BL(e,t,n){try{return _e(e)?_e(t)?_e(n)?typeof e=="bigint"?BigInt(BL(Uo(e),t,n)):e<t?t:e>n?n:e:NaN:NaN:NaN}catch{return NaN}}var F2=dn(BL);function S2(e,t){function*n(r,a){if(a>r.length)yield r;else if(a<=0)yield[];else if(r.length<2)yield r;else for(let i=0;i<r.length;i++){let o=r[i],s=r.slice(i+1);if(!(s.length<a-1)&&a-1>=0)for(let u of S2(s,a-1))yield[o].concat(u)}}return Pe(e)||ze(e)?S2(e.values,t):(U(me(e),"The `combinations` function only works on arrays, Series, and DataFrames!"),U(_e(t)&&Uo(t)===t&&t>=0,"`r` must be a non-negative integer!"),n(zr(e),t))}function LL(e,t){let n=[];for(let r of S2(e,t))n.push(r.slice());return n}function R5(){let e=Object.values(arguments).map(n=>Pe(n)||ze(n)?ii(n.values):(U(me(n),"The `intersect` function only works on arrays, Series, and DataFrames!"),ii(n)));return ii(e).filter(n=>e.every(r=>r.findIndex(a=>Fa(a,n))>-1))}var a1=class{constructor(e){U(Me(e)||e===a1.DROP_NAN_MODE||e===a1.DROP_MISSING_MODE,"The `mode` value passed into the `IndexMatcher` constructor must be undefined or one of [IndexMatcher.DROP_NAN_MODE, IndexMatcher.DROP_MISSING_MODE]! (By default, the mode is `Indexer.DROP_MISSING_MODE`.)"),this.mode=Me(e)?a1.DROP_NAN_MODE:e,this.index=null}fit(){let e=[];return Object.values(arguments).forEach(t=>{if(me(t)){let n=Ze(t);if(n.length===1)t=new Zr(t);else if(n.length===2)t=new Rt(t);else throw new Error("The `IndexMatcher.fit` method only works on arrays, Series, and DataFrames!")}U(Pe(t)||ze(t),"The `IndexMatcher.fit` method only works on arrays, Series, and DataFrames!"),this.mode===a1.DROP_MISSING_MODE?e.push(t.dropMissing().index):e.push(t.dropNaN().index)}),this.index=R5(...e),this}transform(){U(!!this.index,"The IndexMatcher hasn't been fitted yet! Please call the `fit` method before calling the `transform` method.");let e=Object.values(arguments).map(t=>{if(me(t)){let n=Ze(t);if(n.length===1)return new Zr(t).get(this.index).values;if(n.length===2)return new Rt(t).get(this.index,null).values;throw new Error("The `IndexMatcher.fit` method only works on arrays, Series, and DataFrames!")}return U(Pe(t)||ze(t),"The `IndexMatcher.fit` method only works on arrays, Series, and DataFrames!"),t.get(this.index,null)});return e.length===1?e[0]:e}fitAndTransform(){return this.fit(...arguments).transform(...arguments)}},k1=a1;IL(k1,"DROP_NAN_MODE","DROP_NAN_MODE");IL(k1,"DROP_MISSING_MODE","DROP_MISSING_MODE");function l1(e,t,n,r){if(ze(e))return l1(e.values,t,n,r);if(ze(t))return l1(e,t.values,n,r);if(U(me(e)&&me(t)&&Ze(e).length===1&&Ze(t).length===1,"The `covariance` function only works on 1-dimensional arrays and Series!"),U(e.length===t.length,"The two arrays or Series passed into the `covariance` function must have the same length!"),n)return l1(...new k1().fitAndTransform(e,t),!1,r);try{let a=Cn(e,{stdev:r}),i=Cn(t,{stdev:r}),o=Number(a.mean),s=Number(i.mean);if(!_e(o)||!_e(s))return NaN;let u=Math.max(e.length,t.length),l=0;for(let c=0;c<u;c++){let p=e[c],d=t[c];if(!_e(p))return NaN;if(!_e(d))return NaN;typeof p=="bigint"&&(p=Number(p)),typeof d=="bigint"&&(d=Number(d)),l+=(p-o)*(d-s)}return r?[l/e.length,a,i]:l/e.length}catch{return NaN}}function Qu(e,t,n){if(ze(e))return Qu(e.values,t,n);if(ze(t))return Qu(e,t.values,n);U(me(e)&&me(t)&&Ze(e).length===1&&Ze(t).length===1,"The `correl` function only works on 1-dimensional arrays and Series!"),U(e.length===t.length,"The two arrays or Series passed into the `correl` function must have the same length!");try{let[a,i,o]=l1(e,t,n,!0),s=i.stdev*o.stdev;return a/s}catch{return NaN}}function wHe(e){try{return _e(e)?(typeof e=="bigint"&&(e=Number(e)),Math.cos(e)):NaN}catch{return NaN}}var xHe=dn(wHe),SHe=Object.freeze({boolean:"boolean",date:"date",null:"null",number:"number",object:"object",string:"string"});function d5(e,t){if(Pe(e)||ze(e))return d5(e.values,t);if(Pe(t)||ze(t))return d5(e,t.values);U(me(e)&&me(t),"The `diff` function only works on arrays, Series, and DataFrames!");let n=ii(e),r=ii(t),a=[];return n.forEach(i=>{r.findIndex(o=>Fa(o,i))<0&&a.push(i)}),a}function zL(e,t){try{if(!_e(e))return NaN;if(!_e(t))return NaN;if(typeof e=="bigint"||typeof t=="bigint"){let n=zL(Number(e),Number(t));try{return BigInt(n)}catch{return n}}return Math.pow(e,t)}catch{return NaN}}var el=dn(zL);function $L(e){try{if(!_e(e))return NaN;if(typeof e=="bigint"){let t=$L(Number(e));try{return BigInt(t)}catch{return t}}return Math.sqrt(e)}catch{return NaN}}var N1=dn($L);function kHe(){try{let e=Object.values(arguments);if(e.length===0)return NaN;let t=!1,n=1;for(let r of e){if(!_e(r))return NaN;typeof r=="bigint"&&(t=!0,r=Number(r)),n*=r}if(t)try{return BigInt(n)}catch{}return n}catch{return NaN}}var VL=dn(kHe);function tl(){return VL(...arguments)}function nl(e,t){return Nd(e,tl(t,-1))}function au(e,t){return Cn(e,{shouldDropNaNs:t}).sum}function f5(e,t){if(_e(e)&&_e(t))return ru(e-t);if(Pe(e)||ze(e))return f5(e.values,t);if(Pe(t)||ze(t))return f5(e,t.values);me(e)&&me(t)&&U(Fa(Ze(e),Ze(t)),"If passing two arrays, Series, or DataFrames into the `distance` function, then those objects must have the same shape!");try{return N1(au(el(nl(e,t),2)))}catch{return NaN}}function T1(e,t){return tl(e,el(t,-1))}function zo(e,t){if(Pe(e)){let a=zo(e.values,t);if(Ze(a).length===1){let i=new Zr(a);return i.name=ze(t)?t.name:i.name,i.index=e.index.slice(),i}else{let i=new Rt(a);return i.index=e.index.slice(),Pe(t)&&(i.columns=t.columns.slice()),i}}if(Pe(t)){let a=zo(e,t.values);if(Ze(a).length===1){let i=new Zr(a);return i.name=ze(e)?e.name:i.name,i.index=t.columns.slice(),i}else{let i=new Rt(a);return i.columns=t.columns.slice(),i}}if(ze(e))return zo(e.values,t);if(ze(t))return zo(e,t.values);U(me(e)&&me(t),"The `dot` function only works on arrays, Series, and DataFrames!");let n=Ze(e),r=Ze(t);if(U(n.length<=2&&r.length<=2,"I'm not smart enough to know how to get the dot-product of arrays that have more than 2 dimensions. Sorry for the inconvenience! Please only pass 1- or 2-dimensional arrays into the `dot` function!"),U(n[n.length-1]===r[0],`There's a dimension misalignment in the two arrays you passed into the \`dot\` function. (${n[n.length-1]} !== ${r[0]})`),n.length===1&&r.length===1)return au(tl(e,t));if(n.length===1&&r.length===2)return Ci(t).map(a=>zo(e,a));if(n.length===2&&r.length===1)return e.map(a=>zo(a,t));if(n.length===2&&r.length===2){let a=Ci(t),i=[];for(let o=0;o<e.length;o++){let s=[];for(let u=0;u<a.length;u++)s.push(zo(e[o],a[u]));i.push(s)}return i}}function O5(e){if(Pe(e)||ze(e))return e.dropMissing(...Object.values(arguments).slice(1));U(me(e),"The `dropMissing` function only works on arrays, Series, and DataFrames!");let t=[];return e.forEach(n=>{try{return t.push(O5(n))}catch{Me(n)||t.push(n)}}),t}function v2(e,t){if(Pe(e)||ze(e))return v2(e.values,t);if(Pe(t)||ze(t))return v2(e,t.values);U(me(e)&&me(t),"The `dropMissingPairwise` function only works on arrays, Series, and DataFrames!"),U(Fa(Ze(e),Ze(t)),"The two arrays, Series, and/or DataFrames passed into the `dropMissingPairwise` function must have the same shape!");let n=[],r=[];for(let a=0;a<e.length;a++)try{let[i,o]=v2(e[a],t[a]);n.push(i),r.push(o)}catch{!Me(e[a])&&!Me(t[a])&&(n.push(e[a]),r.push(t[a]))}return[n,r]}function Ju(e,t){if(Pe(e)||ze(e))return Ju(e.values,t);if(Pe(t)||ze(t))return Ju(e,t.values);U(me(e)&&me(t),"The `dropNaNPairwise` only works on arrays, Series, and DataFrames!"),U(Fa(Ze(e),Ze(t)),"The two arrays, Series, and/or DataFrames passed into the `dropNaNPairwise` must have the same shape!");let n=[],r=[];for(let a=0;a<e.length;a++)try{let[i,o]=Ju(e[a],t[a]);n.push(i),r.push(o)}catch{_e(e[a])&&_e(t[a])&&(n.push(e[a]),r.push(t[a]))}return[n,r]}function NHe(e){return O5(e)}function k2(e,t){if(Pe(e)||ze(e))return k2(e.values,t);U(me(e),"The first argument passed into the `every` function must be an array, Series, or DataFrame!"),U(hr(t),"The second argument passed into the `every` function must be a function!");for(let n of e)if(me(n)){if(!k2(n,t))return!1}else if(!t(n))return!1;return!0}function THe(e){try{if(!_e(e))return NaN;if(typeof e=="bigint"){if(e===0n)return 1n;e=Number(e)}return Math.exp(e)}catch{return NaN}}var EHe=dn(THe);function h5(e){try{return typeof e=="bigint"?BigInt(h5(Uo(e))):e!==Uo(e)?NaN:e<=1?1:e*h5(e-1)}catch{return NaN}}var IHe=dn(h5);function m5(e,t){if(Pe(e)||ze(e))return m5(e.values,t);if(U(gs(e)||me(e),"You must pass (1) an object, array, Series, or DataFrame and (2) a function or value into the `find` function!"),!hr(t)){let a=t;t=i=>i===a}function n(a,i,o){if(o=o||[],o.indexOf(a)>-1)return null;if(gs(a)){o.push(a);let s=Object.keys(a).concat(Object.getOwnPropertySymbols(a));for(let u=0;u<s.length;u++){let l=s[u],c=a[l];if(i(c))return c;let p=n(c,i,o);if(p)return p}}else if(me(a)){o.push(a);for(let s=0;s<a.length;s++){let u=a[s];if(i(u))return u;let l=n(u,i,o);if(l)return l}}else if(i(a))return a;return null}function r(a){try{return t(a)}catch{return!1}}return n(e,r)}function v5(e,t){if(Pe(e)||ze(e))return v5(e.values,t);if(U(gs(e)||me(e),"You must pass (1) an object, array, Series, or DataFrame and (2) a function or value into the `findAll` function!"),!hr(t)){let i=t;t=o=>o===i}function n(i,o,s){if(s=s||[],s.indexOf(i)>-1)return null;if(gs(i)){s.push(i);let u=Object.keys(i).concat(Object.getOwnPropertySymbols(i)),l=[];for(let c=0;c<u.length;c++){let p=u[c],d=i[p],f=!1;o(d)&&(l.push(d),f=!0);let h=n(d,o,s);h&&h.length>0&&h.slice(f?1:0).forEach(m=>l.push(m))}return l}else if(me(i)){s.push(i);let u=[];for(let l=0;l<i.length;l++){let c=i[l],p=!1;o(c)&&(u.push(c),p=!0);let d=n(c,o,s);d&&d.length>0&&d.slice(p?1:0).forEach(f=>u.push(f))}return u}else if(o(i))return[i];return null}function r(i){try{return t(i)}catch{return!1}}let a=n(e,r);return a&&a.length>0?a:null}function CHe(e){try{if(e==="Infinity")return 1/0;if(e==="-Infinity")return-1/0;let t=JSON.parse(e);return _e(t)?t:NaN}catch{return NaN}}var DHe=dn(CHe);function _He(e){try{return _e(e)?typeof e=="bigint"?e:Math.floor(e):NaN}catch{return NaN}}var AHe=dn(_He);function Ed(e){_e(e)&&(e=[e]);let t=[],n=x1(e);for(let r=0;r<n;r++)t.push(0);return f1(t,e)}function FHe(e){typeof e=="bigint"&&(e=Uo(e)),U(!Me(e),"You must pass an integer greater than 0 (representing the size) into the `identity` function!"),U(_e(e),"You must pass an integer greater than 0 (representing the size) into the `identity` function!"),U(Uo(e)===e,"You must pass an integer greater than 0 (representing the size) into the `identity` function!"),U(e>0,"You must pass an integer greater than 0 (representing the size) into the `identity` function!");let t=Ed([e,e]);for(let n=0;n<e;n++)t[n][n]=1;return t}var RHe=["true","false","yes","no"],OHe=["null","none","nan","na","n/a","","undefined"];function f2(e){return e.type==="number"&&(typeof e.value<"u"?e.isInteger=Uo(e.value)===e.value:e.isInteger=k2(e.values,t=>_e(t)?Uo(t)===t:!0)),e}function c1(e){if(Pe(e)){let i=e.copy(),o=c1(e.values);return i.values=o.values,f2({type:o.type,values:i})}if(ze(e)){let i=e.copy(),o=c1(e.values);return i.values=o.values,f2({type:o.type,values:i})}if(!me(e)){let i=c1([e]);return i.value=i.values[0],delete i.values,f2(i)}U(me(e),"The `inferType` function only works on arrays, Series, and DataFrames!");let t=zr(e).map(i=>{if(i===void 0)return"null";try{if(typeof i=="object"){let u=new Date(i.getTime());if(eu(u))return"date"}}catch{}cn(i)||(typeof i=="bigint"?i=i.toString()+"n":i=JSON.stringify(i));let s=i.toLowerCase().trim();if(OHe.indexOf(s)>-1)return"null";if(RHe.indexOf(s)>-1)return"boolean";try{if(i.match(/^-?\d+n$/g))return"bigint";let u=JSON.parse(i);return _e(u)?"number":typeof u=="object"?me(u)?"string":"object":"string"}catch{let l=new Date(i);return eu(l)?"date":"string"}}),n=xd(t),a=n.values.toSorted((i,o)=>n.get(o)-n.get(i))[0];return f2({type:a,values:Nc(e,i=>Ti(i,a))})}function g2(e){if(Pe(e)){let n=e.copy();return n.values=g2(n.values),n}U(me(e),"The `inverse` function only works on square 2-dimensional arrays or DataFrames!");let t=Ze(e);if(U(t.length===2,"The array passed into the `inverse` function must be exactly two-dimensional and square!"),U(t[0]===t[1],"The array passed into the `inverse` function must be exactly two-dimensional and square!"),U(t[0]>=0,"The array passed into the `inverse` function must be exactly two-dimensional and square!"),t[0]===0)return e;if(t[0]===1){U(e[0][0]!==0,"This matrix cannot be inverted!");let n=e[0][0];return typeof n=="bigint"&&(n=Number(n)),1/n}else if(t[0]===2){let n=e[0][0],r=e[0][1],a=e[1][0],i=e[1][1];typeof n=="bigint"&&(n=Number(n)),typeof r=="bigint"&&(r=Number(r)),typeof a=="bigint"&&(a=Number(a)),typeof i=="bigint"&&(i=Number(i));let o=n*i-r*a;U(o!==0,"This matrix cannot be inverted!");let s=[[i,-r],[-a,n]];return tl(s,1/o)}else if(t[0]>1){let n=(r,a)=>_e(r)||_e(a)?tl(r,a):zo(r,a);for(let r=1;r<t[0]-1;r++)try{let a=e.slice(0,r).map(m=>m.slice(0,r)),i=e.slice(0,r).map(m=>m.slice(r,t[0])),o=e.slice(r,t[0]).map(m=>m.slice(0,r)),s=e.slice(r,t[0]).map(m=>m.slice(r,t[0])),u=g2(a),l=g2(Nd(s,n(-1,n(n(o,u),i)))),c=Nd(u,n(n(n(n(u,i),l),o),u)),p=n(-1,n(n(u,i),l)),d=n(-1,n(n(l,o),u)),f=l;return c.map((m,v)=>m.concat(p[v])).concat(d.map((m,v)=>m.concat(f[v])))}catch{}U(!1,"This matrix cannot be inverted!")}}var MHe=new Function(`
    try {
      return this === window
    } catch(e) {}

    try {
      return !!importScripts
    } catch(e){}

    return false
  `);function WL(e,t,n){try{if(!_e(e))return NaN;if(!_e(t))return NaN;if(!_e(n))return NaN;if(typeof e=="bigint"||typeof t=="bigint"){let r=WL(Number(e),Number(t),n);try{return BigInt(r)}catch{return r}}return n*(t-e)+e}catch{return NaN}}var PHe=dn(WL);function UL(e,t){try{if(t=Me(t)?Math.E:t,!_e(e))return NaN;if(!_e(t))return NaN;if(typeof e=="bigint"||typeof t=="bigint"){let n=UL(Number(e),Number(t));try{return BigInt(n)}catch{return n}}return Math.log(e)/Math.log(t)}catch{return NaN}}var GL=dn(UL);function qL(e,t){return Cn(e,{shouldDropNaNs:t}).mean}function BHe(e,t){return Cn(e,{shouldDropNaNs:t,median:!0}).median}function HL(e,t){try{if(!_e(e))return NaN;if(!_e(t))return NaN;if(typeof e=="bigint"||typeof t=="bigint"){let n=HL(Number(e),Number(t));try{return BigInt(n)}catch{return n}}return e%t}catch{return NaN}}var LHe=dn(HL);function zHe(e,t){return Cn(e,{shouldDropNaNs:t,mode:!0}).mode}function cL(){let e=nu(),t=nu();return Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*t)}function jL(e){return Me(e)?cL():Nc(Ii(e),cL)}function $He(e){return Nc(Ii(e),()=>1)}function M5(e,t){function*n(r,a){if(a=a||r.length,r.length===1){yield[r];return}for(let i of LL(r,a)){if(!i.slice)continue;let o=Ed(i.length);yield i;let s=1;for(;s<i.length;)if(o[s]<s){if(s%2===0){let u=i[0];i[0]=i[s],i[s]=u}else{let u=i[o[s]];i[o[s]]=i[s],i[s]=u}yield i,o[s]+=1,s=1}else o[s]=0,s+=1}}return Pe(e)||ze(e)?M5(e.values,t):(U(me(e),"The `permutations` function only works on arrays, Series, and DataFrames!"),Me(t)&&(t=e.length),U(_e(t)&&Uo(t)===t&&t>=0,"`r` must be a non-negative integer!"),n(zr(e),t))}function VHe(e,t){let n=[];for(let r of M5(e,t))n.push(r.slice());return n}function WHe(){Object.keys(arguments).forEach(e=>{let t=arguments[e];if(me(t))if(co(t))console.log(t);else{let n=Ze(t);n.length===1?new Zr(t).print():n.length==2?new Rt(t).print():console.log(t)}else Pe(t)||ze(t)?t.print():console.log(t)})}var UHe=dn((e,t,n,r,a)=>{try{let i=!1;for(let l of[e,t,n,r,a]){if(!_e(l))return NaN;typeof l=="bigint"&&(i=!0)}i&&(e=Number(e),t=Number(t),n=Number(n),r=Number(r),a=Number(a));let o=(a-r)*(e-t),s=n-t;if(s===0)return NaN;let u=o/s+r;if(i)try{return BigInt(u)}catch{}return u}catch{return NaN}});function KL(e,t,n,r,a){if(me(e)&&Me(r)&&Me(a)){r=t,a=n;let i=Cn(e);t=i.min,n=i.max}return UHe(e,t,n,r,a)}function GHe(e){try{return _e(e)?typeof e=="bigint"?e:Math.round(e):NaN}catch{return NaN}}var XL=dn(GHe);function YL(e){try{return _e(e)?typeof e=="bigint"?BigInt(YL(Number(e))):e<0?-1:e>0?1:0:NaN}catch{return NaN}}var JL=dn(YL);function qHe(e){try{return _e(e)?(typeof e=="bigint"&&(e=Number(e)),Math.sin(e)):NaN}catch{return NaN}}var HHe=dn(qHe);function g5(e,t){if(Pe(e)||ze(e))return g5(e.values,t);U(me(e),"The first argument passed into the `some` function must be an array, Series, or DataFrame!"),U(hr(t),"The second argument passed into the `some` function must be a function!");for(let n of e)if(me(n)){if(g5(n,t))return!0}else if(t(n))return!0;return!1}function ZL(e,t){return Cn(e,{shouldDropNaNs:t,stdev:!0}).stdev}function jHe(e){return ZL(e)}function KHe(e){try{return _e(e)?(typeof e=="bigint"&&(e=Number(e)),Math.tan(e)):NaN}catch{return NaN}}var XHe=dn(KHe);function pL(e,t){U(hr(e),"`fn` must be a function!");let n=new Date;return t?e(...t):e(),new Date-n}async function YHe(e,t){U(hr(e),"`fn` must be a function!");let n=new Date;return t?await e(...t):await e(),new Date-n}function JHe(){return ii([...arguments].map(e=>me(e)?e:Pe(e)||ze(e)?e.values:[e]))}function ZHe(e,t){return Cn(e,{shouldDropNaNs:t,variance:!0}).variance}function QHe(){let e=[],t=Object.values(arguments).map(n=>((Pe(n)||ze(n))&&(n=n.values),U(me(n),"The `zip` function only works on arrays, Series, and DataFrames!"),n));return pn(0,S1(t.map(n=>n.length))).forEach(n=>{let r=[];t.forEach(a=>{let i=a[n];r.push(Me(i)?void 0:i)}),e.push(r)}),e}var i1={abs:ru,add:Nd,apply:Nc,arccos:pHe,arcsin:fHe,arctan:mHe,argmax:h1,argmin:Td,assert:U,cast:Ti,ceil:gHe,chop:bHe,clamp:F2,combinations:LL,combinationsIterator:S2,copy:Lr,correl:Qu,cos:xHe,count:xd,covariance:l1,DataFrame:Rt,dataTypes:SHe,decycle:wd,diff:d5,distance:f5,divide:T1,dot:zo,dropMissing:O5,dropMissingPairwise:v2,dropNaN:w1,dropNaNPairwise:Ju,dropUndefined:NHe,every:k2,exp:EHe,factorial:IHe,find:m5,findAll:v5,flatten:zr,float:DHe,floor:AHe,identity:FHe,IndexMatcher:k1,indexOf:bd,inferType:c1,int:Uo,intersect:R5,inverse:g2,isArray:me,isBoolean:vs,isBrowser:MHe,isDataFrame:Pe,isDate:eu,isEqual:Fa,isFunction:hr,isJagged:co,isNested:A2,isNumber:_e,isObject:gs,isSeries:ze,isString:cn,isUndefined:Me,lerp:PHe,log:GL,MathError:Qs,max:S1,mean:qL,median:BHe,min:PL,mod:LHe,mode:zHe,multiply:VL,ndarray:Ii,normal:jL,ones:$He,permutations:VHe,permutationsIterator:M5,pow:el,print:WHe,product:x1,random:nu,range:pn,remap:KL,reshape:f1,reverse:$o,round:XL,scale:tl,seed:RL,Series:Zr,set:ii,shape:Ze,shuffle:kd,sign:JL,sin:HHe,some:g5,sort:ys,sqrt:N1,stats:Cn,std:ZL,stdev:jHe,subtract:nl,sum:au,tan:XHe,timeAsync:YHe,timeSync:pL,time:pL,transpose:Ci,union:JHe,variance:ZHe,vectorize:dn,zeros:Ed,zip:QHe,dump(){let e=typeof globalThis<"u"?globalThis:typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:void 0;if(!e)throw new i1.MathError("Cannot dump functions into global scope because none of `globalThis`, `global`, `window`, or `self` exist in the current context!");Object.keys(i1).forEach(t=>{try{Object.defineProperty(e,t,{configurable:!1,enumerable:!0,writable:!1,value:i1[t]})}catch{e[t]=i1[t]}})}};typeof window<"u"&&(window.JSMathTools=i1);function y5(e,t,n){if(ze(e))return y5(e.values,t);if(ze(t))return y5(e,t.values);if(U(me(e)&&me(t)&&Ze(e).length===1&&Ze(t).length===1,"The `cohensd` function only works on 1-dimensional arrays and Series!"),U(e.length===t.length,"Two arrays or Series passed into the `cohensd` function must have the same length!"),n){let r=new k1().fitAndTransform(e,t);e=r[0],t=r[1]}try{let r=Cn(e,{variance:!0}),a=Cn(t,{variance:!0}),i=r.mean,o=a.mean;return(i-o)/Math.sqrt((r.variance+a.variance)/2)}catch{return NaN}}function dL(e){return typeof e=="bigint"?e.toString()+"n":e}function P5(){if(arguments.length===1&&ze(arguments[0])){let{name:a,values:i}=arguments[0],o=P5(a,i),s=new Rt(o);return s.index=arguments[0].index.slice(),s}let[e,t]=arguments;U(cn(e),"When passing two arguments into the `getOneHotEncodings` function, the first argument must be a string representing the name of the variable being encoded!"),U(me(t)&&Ze(t).length===1,"When passing two arguments into the `getOneHotEncodings` function, the second argument must be a 1-dimensional array!");let n={};return ys(ii(t)).filter(a=>typeof a!="number"||a.toString()!=="NaN").filter(a=>!Me(a)).map(a=>e+"_"+dL(a)).slice(0,-1).forEach(a=>{n[a]=t.map(i=>a===e+"_"+dL(i)?1:typeof i=="number"&&i.toString()==="NaN"?NaN:Me(i)?NaN:0)}),n}function tu(e){return _e(e)&&e>=0&&Math.floor(e)===e&&e<1/0}function QL(e){if(typeof e!="string")throw new Error("`text` must be a string!");e=e.trim();let t="",n=!1;for(let r=0;r<e.length;r++){let a=e[r];a.match(/[A-Za-z0-9]/g)?(t.length===0?t+=a.toLowerCase():n?t+=a.toUpperCase():t+=a,n=!1):!a.includes("'")&&!a.includes("\u2019")&&!a.includes("\u275C")&&(n=!0)}return t}var eje=Object.defineProperty,tje=(e,t,n)=>t in e?eje(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ez=(e,t,n)=>(tje(e,typeof t!="symbol"?t+"":t,n),n);function He(e){return typeof e=="number"&&!isNaN(e)||typeof e=="bigint"}var nje=new Function(`
  try {
    return this === window
  } catch(e) {}

  try {
    return typeof importScripts !== "undefined"
  } catch(e) {}

  return false
`),Zu=class extends Error{constructor(e){nje()?super(e):super(`

\x1B[31m`+e+`
\x1B[0m`)}};function te(e,t){if(!e)throw new Zu(t)}var tz=[Array,ArrayBuffer,BigInt64Array,BigUint64Array,Float32Array,Float64Array,Int16Array,Int32Array,Int8Array,Uint16Array,Uint32Array,Uint8Array,Uint8ClampedArray];function lt(e){return e===null||typeof e>"u"}var rje=tz.map(e=>e.name);function Te(e){try{return e instanceof Array?!0:lt(e.constructor)?!1:tz.indexOf(e.constructor)>-1||rje.indexOf(e.constructor.name)>-1}catch{return!1}}function wt(e){try{return!!e._symbol&&e._symbol===Symbol.for("@jrc03c/js-math-tools/dataframe")}catch{return!1}}function $r(e){return typeof e=="function"}function bs(e){return typeof e=="object"&&!lt(e)&&!Te(e)}function vt(e){try{return!!e._symbol&&e._symbol===Symbol.for("@jrc03c/js-math-tools/series")}catch{return!1}}function Id(e,t){if(wt(e)){let i=Id(e.values,t);return i.length>0&&He(i[0])&&i[0]>=0&&i[0]<e.index.length&&(i[0]=e.index[i[0]]),i.length>1&&He(i[1])&&i[1]>=0&&i[1]<e.columns.length&&(i[1]=e.columns[i[1]]),i}if(vt(e)){let i=Id(e.values,t);return i.length>0&&He(i[0])&&i[0]>=0&&i[0]<e.index.length&&(i[0]=e.index[i[0]]),i}if(te(bs(e)||Te(e),"You must pass (1) an object, array, Series, or DataFrame and (2) a function or value into the `indexOf` function!"),!$r(t)){let i=t;t=o=>o===i}function n(i,o,s){if(s=s||[],s.indexOf(i)>-1)return null;if(bs(i)){s.push(i);let u=Object.keys(i).concat(Object.getOwnPropertySymbols(i));for(let l=0;l<u.length;l++){let c=u[l],p=i[c];if(o(p))return[c];let d=n(p,o,s);if(d&&d.length>0)return[c].concat(d)}}else if(Te(i)){s.push(i);for(let u=0;u<i.length;u++){let l=i[u];if(o(l))return[u];let c=n(l,o,s);if(c&&c.length>0)return[u].concat(c)}}else if(o(i))return[];return null}function r(i){try{return t(i)}catch{return!1}}let a=n(e,r);return a&&a.length>0?a:null}function ia(e){function t(n){if(typeof n=="object"){if(n===null)return null;if(Te(n))return n instanceof Array?n.map(a=>ia(a)):n.slice();if(vt(n)){let a=n.copy();return a.values=ia(a.values),a}if(wt(n)){let a=n.copy();return a.values=ia(n.values),a}if(n instanceof Date)return new Date(n.getTime());n=Tc(n);let r={};return Object.keys(n).concat(Object.getOwnPropertySymbols(n)).forEach(a=>{r[a]=ia(n[a])}),r}else return n}return t(Tc(e))}function Tc(e){function t(a,i,o){if(i=i||[],o=o||"",i.indexOf(a)>-1){let s=o.split("/").slice(o.startsWith("/")?1:0);if(s.some((l,c)=>{let p=s.slice(0,s.length-c-1),d=n;return p.forEach(f=>{d=d[f]}),d===a}))return`<reference to "${n===a?"/":"/"+Id(n,a).join("/")}">`}return typeof a=="object"?a===null?null:(i.push(a),Te(a)?typeof a.constructor<"u"&&a.constructor.name!=="Array"?a.slice():a.map((s,u)=>t(s,i,o+"/"+u)):(Object.keys(a).concat(Object.getOwnPropertySymbols(a)).forEach(s=>{a[s]=t(a[s],i,o+"/"+s.toString())}),a)):a}let n=e,r=t(n);if(wt(e)){let a=e.copy();a._values=r.values,a._columns=r.columns,a._index=r.index,r=a}if(vt(e)){let a=e.copy();a.name=r.name,a._values=r.values,a._index=r.index,r=a}return r}function Wo(e){return e instanceof Date&&e.toString()!=="Invalid Date"}var fL=["number","int","float","bigint"];function ws(e,t){function n(r,a){let i=typeof r,o=typeof a;if(i!==o&&!fL.includes(i)&&!fL.includes(o))return!1;if(i==="undefined"&&o==="undefined")return!0;if(i==="boolean"||i==="symbol")return r===a;if(i==="number"||i==="bigint")try{let s=r.toString(),u=a.toString();return s===u}catch{return!1}if(i==="string"||i==="function")return r===a;if(i==="object"){if(r===null||a===null)return r===null&&a===null;{if(Wo(r))return Wo(a)?r.getTime()===a.getTime():!1;if(Wo(a))return!1;if(r instanceof RegExp&&a instanceof RegExp)return r.toString()===a.toString();if(Te(r)!==Te(a))return!1;let s=Object.keys(r).concat(Object.getOwnPropertySymbols(r)),u=Object.keys(a).concat(Object.getOwnPropertySymbols(a));if(s.length!==u.length)return!1;for(let l=0;l<s.length;l++){let c=s[l];if(!n(r[c],a[c]))return!1}return!0}}}try{return n(e,t)}catch{return n(Tc(e),Tc(t))}}function E1(e){let t="abcdefg1234567890",n="";for(;n.length<e;)n+=t[Math.floor(Math.random()*t.length)];return n}var aje=E1(16),ije=E1(16),oje=E1(16),sje=E1(16),uje=E1(16),lje=class{constructor(){this.clear()}get counts(){return this.values.map(e=>this.get(e))}get values(){return Object.values(this.valuesDict)}clear(){return this.countsDict={},this.valuesDict={},this}count(e){for(let t of e)Te(t)?this.count(t):this.increment(t);return this}delete(e){let t=this.getStandardizedKey(e);return delete this.countsDict[t],delete this.valuesDict[t],this}get(e){return this.countsDict[this.getStandardizedKey(e)]||0}getStandardizedKey(e){return typeof e=="object"&&e===null?aje:lt(e)?ije:$r(e)?e.toString():typeof e=="symbol"?e.toString()+" - "+uje:e===1/0?oje:e===-1/0?sje:typeof e=="bigint"?e.toString():wt(e)?e.toJSONString():vt(e)?JSON.stringify(e.toObject()):JSON.stringify(e)}has(e){return!lt(this.countsDict[this.getStandardizedKey(e)])}increment(e){return this.set(e,this.get(e)+1)}set(e,t){let n=this.getStandardizedKey(e);return this.countsDict[n]=t,this.valuesDict[n]=e,this}toArray(){return this.values.map(e=>({value:e,count:this.get(e)}))}toObject(){let e={};return this.values.forEach(t=>{e[t]=this.get(t)}),e}};function Go(e){if(wt(e)||vt(e))return Go(e.values);te(Te(e),"The `flatten` function only works on arrays, Series, and DataFrames!");function t(n){let r=[];return n.forEach(a=>{Te(a)?r=r.concat(t(a)):r.push(a)}),r}return t(e)}function Di(e,t){t=t||{};let n=new lje,r={},a=Go(e),i=[],o=-1/0,s=1/0,u=!1,l=0;for(let p of a){if(typeof p=="bigint"&&(u=!0),!t.shouldDropNaNs||He(p))try{p>o&&(o=p),p<s&&(s=p),l+=Number(p),i.push(p)}catch{o=NaN,s=NaN,l=NaN}n.increment(p)}let c=l/i.length;if(r.counts=n,r.max=o,r.mean=c,r.min=s,r.n=a.length,r.sum=l,isNaN(r.mean)&&(r.max=NaN,r.min=NaN),t.shouldDropNaNs&&(r.nWithoutNaNs=i.length),t.mode){let p=Array.from(n.values.map(h=>[h,n.get(h)])).toSorted((h,m)=>m[1]-h[1]),d=p[0][1],f=[];for(let h of p)if(h[1]==d)f.push(h[0]);else break;r.mode=f.toSorted()}if(t.median)if(isNaN(c))r.median=NaN;else{let p=i.toSorted((f,h)=>Number(f)-Number(h)),d=Math.floor(p.length/2);if(p.length%2===0){let f=p[d-1],h=p[d];if(r.median=(Number(f)+Number(h))/2,u&&typeof f=="bigint"&&typeof h=="bigint")try{r.median=BigInt(r.median)}catch{}}else r.median=p[d]}if(t.stdev||t.variance){let p=0;for(let f of i)p+=Math.pow(Number(f)-c,2);p/=i.length;let d=Math.sqrt(p);r.stdev=d,r.variance=p}if(u){try{r.sum=BigInt(r.sum)}catch{}try{r.mean=BigInt(r.mean)}catch{}t.mode&&(r.mode=r.mode.map(p=>{try{return BigInt(p)}catch{return p}}))}return r}function N2(e,t){let{counts:n}=Di(e);return lt(t)||($r(t)?n.values.forEach(r=>{t(r)||n.delete(r)}):n.values.forEach(r=>{ws(r,t)||n.delete(r)})),n}function b5(e){if(wt(e)||vt(e))return b5(e.values);if(Te(e)){let t=!1,n=!1,r=null;for(let a of e){if(b5(a))return!0;if(Te(a)){if(r===null)r=a.length;else if(a.length!==r)return!0;t=!0}else n=!0;if(t&&n)return!0}}return!1}function I1(e){return b5(Tc(e))}function R2(e){if(wt(e)||vt(e))return R2(e.values);te(Te(e),"The `isNested` function only works on arrays, Series, and DataFrames!");for(let t=0;t<e.length;t++)if(Te(e[t]))return!0;return!1}var hd="You must pass a natural number or a one-dimensional array of natural numbers into the `ndarray` function!";function Vo(e){te(!lt(e),hd),Te(e)||(e=[e]),te(!R2(e),hd),te(e.length>0,hd);let t=e[0];if(typeof t=="bigint"&&(t=Number(t)),te(He(t),hd),te(t>=0,hd),te(Math.floor(t)===t,hd),te(t!==1/0,"We can't create an array containing an infinite number of values!"),e.length===1){let n=[];for(let r=0;r<t;r++)n.push(void 0);return n}else{let n=[];for(let r=0;r<t;r++)n.push(Vo(e.slice(1)));return n}}function ms(e){if(wt(e)||vt(e)){let n=e.copy();return n.values=ms(n.values),n.index=ms(n.index),n}te(Te(e),"The `reverse` function only works on arrays, Series, and DataFrames!");let t=[];for(let n=e.length-1;n>=0;n--)t.push(e[n]);return t}function nr(e,t,n=1){te(!lt(e)&&!lt(t)&&!lt(n),"You must pass two numbers and optionally a step value to the `range` function!"),te(He(e)&&He(t)&&He(n),"You must pass two numbers and optionally a step value to the `range` function!"),te(n>0,"The step value must be greater than 0! (NOTE: The step value is a magnitude; it does not indicate direction.)");let r=!1,a=typeof e=="bigint"||typeof t=="bigint"||typeof n=="bigint";if(e=Number(e),t=Number(t),n=Number(n),e>t){r=!0;let o=e;e=t+n,t=o+n}let i=[];for(let o=e;o<t;o+=n)if(a)try{i.push(BigInt(o))}catch{i.push(o)}else i.push(o);return r&&(i=ms(i)),i}function C1(e){let t="abcdefg1234567890",n="";for(;n.length<e;)n+=t[Math.floor(Math.random()*t.length)];return n}var cje=C1(256),pje=C1(256),dje=C1(256),fje=C1(256),hje=C1(256);function lo(e){if(wt(e)||vt(e))return lo(e.values);te(Te(e),"The `set` function only works on arrays, Series, and DataFrames!");let t=[],n={};return Go(e).forEach(r=>{let a=typeof r=="object"&&r===null?cje:lt(r)?pje:$r(r)?r.toString():typeof r=="symbol"?r.toString()+" - "+hje:r===1/0?dje:r===-1/0?fje:typeof r=="bigint"?r.toString():wt(r)?r.toJSONString():vt(r)?JSON.stringify(r.toObject()):JSON.stringify(r);n[a]||t.push(r),n[a]=!0}),t}function nz(e){if(Te(e)){let t=nz(e[0]);return[e.length].concat(t||[])}else return}function bt(e){return wt(e)||vt(e)?bt(e.values):(te(Te(e),"The `shape` function only works on arrays, Series, and DataFrames!"),nz(e))}function rz(e,t,n){if(lt(n)&&(n=0),te(n===0||n===1||n==="vertical"||n==="horizontal",'The only valid axis values for use when appending data to a DataFrame are 0, 1, "vertical", and "horizontal". Note that 0 == "horizontal" and 1 == "vertical".'),Te(t)){te(!I1(t),"The array of data you're trying to append to this DataFrame is jagged!");let r=bt(t);if(r.length===1)if(n===0){let a=e.copy();a._values.push(t);let i=Math.max(e.shape[1],r[0]);for(a._values.forEach(o=>{for(;o.length<i;)o.push(void 0)});a._index.length<a._values.length;)a._index.push("row"+a._index.length);for(;a._columns.length<i;)a._columns.push("col"+a._columns.length);return a}else{let a=Math.max(e.shape[0],r[0]),i=e.copy();for(nr(0,a).forEach(o=>{o>=i._values.length&&i._values.push(Vo(e.shape[1])),i._values[o].push(t[o])});i._index.length<i._values.length;)i._index.push("row"+i._index.length);for(;i._columns.length<i._values[0].length;)i._columns.push("col"+i._columns.length);return i}else if(r.length===2)if(n===0){let a=Math.max(...t.map(o=>o.length).concat([e.shape[1]])),i=e.copy();for(i._values=i._values.concat(t).map(o=>{for(;o.length<a;)o.push(void 0);return o});i._index.length<i._values.length;)i._index.push("row"+i._index.length);for(;i._columns.length<a;)i._columns.push("col"+i._columns.length);return i}else{let a=Math.max(...t.map(s=>s.length))+e.shape[1],i=Math.max(e.shape[0],r[0]),o=e.copy();for(nr(0,i).forEach(s=>{for(s>=o._values.length&&o._values.push(Vo(e.shape[1])),o._values[s]=o._values[s].concat(t[s]);o._values[s].length<a;)o._values[s].push(void 0)});o._index.length<o._values.length;)o._index.push("row"+o._index.length);for(;o._columns.length<a;)o._columns.push("col"+o._columns.length);return o}else throw new Zu("Only 1- and 2-dimensional arrays can be appended to a DataFrame!")}else if(vt(t)){let r=rz(e,t.values,n);return n===0?r.index[r.index.length-1]=r.index.indexOf(t.name)>-1?t.name+" (2)":t.name:r.columns[r.columns.length-1]=r.columns.indexOf(t.name)>-1?t.name+" (2)":t.name,r}else if(wt(t))if(n===0){let r=e.copy(),a=lo(r._columns.concat(t._columns)).length;for(r._values.forEach(i=>{for(;i.length<a;)i.push(void 0)}),t.apply(i=>{let o=i.copy(),s=[];r._columns.forEach(u=>{let l=o._index.indexOf(u);l>-1?(s.push(o._values[l]),o._values.splice(l,1),o._index.splice(l,1)):s.push(void 0)}),r._values.push(s.concat(o._values))},1),r._columns=r._columns.concat(t._columns.filter(i=>r._columns.indexOf(i)<0));r._index.length<r._values.length;){let i="row"+r._index.length;r._index.push(i+(e._index.indexOf(i)>-1?" (2)":""))}return r}else{let r=e.copy();return r._index.forEach((a,i)=>{let o=t._index.indexOf(a);o>-1?r._values[i]=r._values[i].concat(t._values[o]):r._values[i]=r._values[i].concat(Vo(t.shape[1]))}),t._index.forEach((a,i)=>{r._index.indexOf(a)<0&&(r._index.push(a),r._values.push(Vo(r._columns.length).concat(t._values[i])))}),r._columns=r._columns.concat(t._columns.map(a=>a+(r._columns.indexOf(a)>-1?" (2)":""))),r}else throw new Zu("Only 1- or 2-dimensional arrays, Series, and DataFrames can be appended to a DataFrame!")}function mje(e,t,n,r,a){if(a=a||0,te($r(r),"The first parameter to the `apply` method must be a function."),te(a===0||a===1,"The second parameter to the `apply` method (the `axis`) must be 0 or 1."),a===0){let i={},o;if(n.columns.forEach((s,u)=>{let l=new t(n.values.map(p=>p[u]));l.name=s,l.index=n.index;let c=r(l,u,n);c instanceof t?i[s]=c.values:i[s]=c,lt(o)&&(o=c instanceof t||Te(c))}),o){let s=new e(i);return s.index=n.index,s}else{let s=new t(n.columns.map(u=>i[u]));return s.index=n.columns,s}}else if(a===1){let i,o=n.values.map((s,u)=>{let l=new t(s);l.name=n.index[u],l.index=n.columns;let c=r(l,u,n);return lt(i)&&(i=c instanceof t||Te(c)),c instanceof t?c.values:c});if(i){let s=new e(o);return s.index=n.index,s.columns=n.columns,s}else{let s=new t(o);return s.index=n.index,s}}}function nn(e){return typeof e=="string"}function vje(e,t,n,r,a){let i=s=>s instanceof e,o=s=>s instanceof t;if(lt(a)){if(i(r))return n.append(r,1);if(o(r))return n.append(r,1);if(bs(r)){let s=Math.max(...Object.keys(r).concat(Object.getOwnPropertySymbols(r)).map(u=>r[u].length));return Object.keys(r).concat(Object.getOwnPropertySymbols(r)).forEach(u=>{for(;r[u].length<s;)r[u].push(void 0)}),n.append(new e(r),1)}else throw new Zu("You must pass a DataFrame, Series, or object into the `assign` method!")}else{te(nn(r),"If passing two arguments into the `assign` method, then the first argument must be a string name!"),te(Te(a)&&!I1(a)&&bt(a).length===1,"If passing two arguments into the `assign` method, then the second argument must be a 1-dimensional array!");let s=n.append(a,1);return s.columns[s.columns.length-1]=r,s}}function gje(e,t){if(t.isEmpty)return new e;let n=new e(ia(t.values));return n.columns=t.columns.slice(),n.index=t.index.slice(),n}function yje(e,t,n,r,a){lt(r)&&(r=[]),lt(a)&&(a=[]),(nn(r)||He(r))&&(r=[r]),(nn(a)||He(a))&&(a=[a]),te(Te(r),"The `drop` method only works on 1-dimensional arrays of numerical indices and/or strings."),te(Te(a),"The `drop` method only works on 1-dimensional arrays of numerical indices and/or strings."),te(bt(r).length===1,"The `drop` method only works on 1-dimensional arrays of numerical indices and/or strings."),te(bt(a).length===1,"The `drop` method only works on 1-dimensional arrays of numerical indices and/or strings.");let i,o;n.index.forEach((u,l)=>{r.indexOf(u)<0&&r.indexOf(l)<0&&(i||(i=[]),i.push(u))}),n.columns.forEach((u,l)=>{a.indexOf(u)<0&&a.indexOf(l)<0&&(o||(o=[]),o.push(u))});let s=n.get(i,o);if(s instanceof t){let u=new e;u=u.assign(s),n.index.indexOf(s.name)>-1&&(u=u.transpose()),s=u}return s}function az(e){return He(e)&&(e>=0?Math.floor(e)===e:Math.ceil(e)===e)}function Cd(e){return az(e)&&e>=0}function bje(e,t,n,r,a,i){r=r||0,te(r===0||r===1,"The first parameter of the `dropMissing` method (the `axis`) must be 0 or 1."),i=i||0,te(Cd(i),"The third parameter of the `dropMissing` method (the `threshold`) should be a whole number (meaning that data should be dropped if it contains more than `threshold` null values)."),a=i>0?"none":a||"any",te(a==="any"||a==="all"||a==="none","The second parameter of the `dropMissing` method (the `condition` parameter, which indicates the condition under which data should be dropped) should be 'any' or 'all' (meaning that if 'any' of the data contains null values, then it should be dropped; or that if 'all' of the data contains null values, then it should be dropped).");function o(l){if(i>0){let c=0;for(let p=0;p<l.length;p++){let d=l[p];if(lt(d)&&c++,c>=i)return[]}}else if(a==="any")for(let c=0;c<l.length;c++){let p=l[c];if(lt(p))return[]}else if(a==="all"){for(let c=0;c<l.length;c++){let p=l[c];if(!lt(p))return l}return[]}return l}let s=n.copy(),u=Math.random().toString();if(r===0){s=s.assign(u,s.index);let l=s.values.map(o).filter(p=>p.length>0);if(bt(l).length<2)return new e;s.values=l;let c=s.get(null,u);if(lt(c))return new e;nn(c)&&(c=[c]),c instanceof t&&(c=c.values),s.index=c,s=s.drop(null,u)}else if(r===1){let l={};if(s.columns.forEach((p,d)=>{let f=s.values.map(m=>m[d]),h=o(f);h.length>0&&(l[p]=h)}),Object.keys(l).length+Object.getOwnPropertySymbols(l).length===0)return new e;let c=new e(l);return c.index=s.index,c}return s}function B5(e){if(wt(e)||vt(e))return e.dropNaN(...Object.values(arguments).slice(1));te(Te(e),"The `dropNaN` function only works on arrays, Series, and DataFrames!");let t=[];return e.forEach(n=>{try{return t.push(B5(n))}catch{if(He(n))return t.push(n)}}),t}function wje(e,t,n,r,a){n=n||0,te(n===0||n===1,"The first parameter of the `dropNaN` method (the `axis`) must be 0 or 1."),a=a||0,te(Cd(a),"The third parameter of the `dropNaN` method (the `threshold`) should be a whole number (meaning that data should be dropped if it contains more than `threshold` NaN values)."),r=a>0?"none":r||"any",te(r==="any"||r==="all"||r==="none","The second parameter of the `dropNaN` method (the `condition` parameter, which indicates the condition under which data should be dropped) should be 'any' or 'all' (meaning that if 'any' of the data contains NaN values, then it should be dropped; or that if 'all' of the data contains NaN values, then it should be dropped).");function i(s){let u=B5(s);return a>0?s.length-u.length<a:r==="any"?u.length===s.length:r==="all"?u.length>0:!0}let o=t.copy();if(n===0){let s=o.index.filter(u=>{let l=o.get(u,null).values;return i(l)});return s.length>0?o.get(s,null):new e}else if(n===1){let s=o.columns.filter(u=>{let l=o.get(null,u).values;return i(l)});return s.length>0?o.get(null,s):new e}return o}function hL(e){let t={};return Go(e).forEach((n,r)=>{t[n]=r}),t}function md(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e)).sort((t,n)=>e[t]-e[n])}function xje(e,t,n,r,a){te($r(r),"The `filter` method takes a single parameter: a function that is used to filter the values."),lt(a)&&(a=0),te(a===0||a===1,"The `axis` parameter to the `filter` method must be 0 or 1.");let i=n.copy();if(i.isEmpty)return i;let o=hL(i.index),s=hL(i.columns);if(a===0){let u=0,l=i.values.filter((c,p)=>{let d=new t(c);d.name=n.index[p],d.index=n.columns;let f=r(d,p,n);return f?u++:delete o[i.index[p]],f});if(u===0)return new e;if(u===1){let c=new t(l[0]);return c.name=md(o)[0],c.index=md(s),c}i.values=l,i.index=md(o)}else if(a===1){i=i.transpose();let u=0,l=i.values.filter((c,p)=>{let d=new t(c);d.name=n.columns[p],d.index=n.index;let f=r(d,p,n);return f?u++:delete s[i.index[p]],f});if(u===0)return new e;if(u===1){let c=new t(l[0]);return c.name=md(s)[0],c.index=md(o),c}i.values=l,i.index=md(s),i=i.transpose()}return i}function Sje(e,t,n){(nn(t)||He(t))&&(t=[t]),(nn(n)||He(n))&&(n=[n]);for(let a in t)typeof t[a]=="bigint"&&(t[a]=Number(t[a]));for(let a in n)typeof n[a]=="bigint"&&(n[a]=Number(n[a]));let r=lo((t||[]).concat(n||[]).map(a=>typeof a));return te(r.length<=2,"Only whole numbers and/or strings are allowed in `get` arrays!"),r.length===1&&te(r[0]==="string"||r[0]==="number","Only whole numbers and/or strings are allowed in `get` arrays!"),r.length===2&&(te(r.indexOf("string")>-1,"Only whole numbers and/or strings are allowed in `get` arrays!"),te(r.indexOf("number")>-1,"Only whole numbers and/or strings are allowed in `get` arrays!")),lt(t)||(t=t.map(a=>{if(nn(a))return te(e.index.indexOf(a)>-1,`Row "${a}" does not exist!`),a;if(He(a))return te(a>=0,`Index ${a} is out of bounds!`),te(Math.floor(a)===a,"Row numbers must be integers!"),te(a<e.index.length,`Index ${a} is out of bounds!`),e.index[a]})),lt(n)||(n=n.map(a=>{if(nn(a))return te(e.columns.indexOf(a)>-1,`Column "${a}" does not exist!`),a;if(He(a))return te(a>=0,`Column ${a} is out of bounds!`),te(Math.floor(a)===a,"Column numbers must be integers!"),te(a<e.columns.length,`Column ${a} is out of bounds!`),e.columns[a]})),e.getSubsetByNames(t,n)}function kje(e,t){try{return e<t?-1:e>t?1:0}catch{return e=typeof e=="object"&&e!==null?JSON.stringify(e):e.toString(),t=typeof t=="object"&&t!==null?JSON.stringify(t):t.toString(),e<t?-1:e>t?1:0}}function Ec(e,t){if(lt(t)&&(t=kje),wt(e)||vt(e))return e.sort(...Object.values(arguments).slice(1));te(Te(e),"The `sort` function only works on arrays, Series, and DataFrames!"),te($r(t),"The second parameter of the `sort` function must be a comparison function!");let n=e.slice();return n.sort(t),n}function Nje(e){let t=e.toLowerCase(),n="";for(let a=0;a<t.length;a++){let i=t[a];i.match(/[a-z0-9]/g)?n+=i:n+=" "}let r=n.split(" ").filter(a=>a.length>0);return r[0]+r.slice(1).map(a=>a[0].toUpperCase()+a.substring(1)).join("")}function mL(e,t,n){lt(n)?n=t.columns:nn(n)&&(n=[n]);let r={};n.forEach(i=>{te(nn(i),"You must pass either a string or a one-dimensional array of strings into the `getDummies` (AKA `oneHotEncode`) method!");let o=t.columns.indexOf(i);te(o>-1,`The given DataFrame does not have a column called "${i}"!`);let s=t.values.map(l=>l[o]),u=Ec(lo(s));s.forEach(l=>{u.forEach(c=>{let p=i+"_"+Nje(c.toString());r[p]||(r[p]=[]),l===c?r[p].push(1):r[p].push(0)})})});let a=new e(r);return a.index=t.index,a}function Tje(e,t,n){let r=e.shape;lt(t)&&(t=nr(0,r[0])),lt(n)&&(n=nr(0,r[1])),He(t)&&(t=[t]),He(n)&&(n=[n]),te(Te(t)&&Te(n),"The `rowIndices` and `colIndices` parameters must be 1-dimensional arrays of whole numbers."),te(bt(t).length===1&&bt(n).length===1,"The `rowIndices` and `colIndices` parameters must be 1-dimensional arrays of whole numbers."),te(t.length>0,"The `rowIndices` array must contain at least one index."),te(n.length>0,"The `colIndices` array must contain at least one index."),t.forEach(o=>{te(Cd(o),"The `rowIndices` and `colIndices` parameters must be 1-dimensional arrays of whole numbers."),te(o<e.index.length,`The row index ${o} is out of bounds.`)}),n.forEach(o=>{te(Cd(o),"The `rowIndices` and `colIndices` parameters must be 1-dimensional arrays of whole numbers."),te(o<e.columns.length,`The column index ${o} is out of bounds.`)});let a=t.map(o=>e.index[o]),i=n.map(o=>e.columns[o]);return e.getSubsetByNames(a,i)}function Eje(e,t,n,r,a){lt(r)&&(r=n.index),lt(a)&&(a=n.columns),nn(r)&&(r=[r]),nn(a)&&(a=[a]),te(Te(r)&&Te(a),"The `rows` and `cols` parameters must be 1-dimensional arrays of strings."),te(bt(r).length===1&&bt(a).length===1,"The `rows` and `cols` parameters must be 1-dimensional arrays of strings."),te(r.length>0,"The `rows` array must contain at least one row name."),te(a.length>0,"The `cols` array must contain at least one column name."),r.forEach(s=>{te(nn(s),"The `rows` and `cols` parameters must be 1-dimensional arrays of strings."),te(n.index.indexOf(s)>-1,`The row name "${s}" does not exist in the list of rows.`)}),a.forEach(s=>{te(nn(s),"The `rows` and `cols` parameters must be 1-dimensional arrays of strings."),te(n.columns.indexOf(s)>-1,`The column name "${s}" does not exist in the list of columns.`)});let i=r.map(s=>a.map(u=>n.values[n.index.indexOf(s)][n.columns.indexOf(u)]));if(r.length===1&&a.length===1)return i[0][0];if(r.length===1){let s=new t(i[0]);return s.name=r[0],s.index=a,s}if(a.length===1){let s=new t(i.map(u=>u[0]));return s.name=a[0],s.index=r,s}let o=new e(i);return o.columns=a,o.index=r,o}function Ije(e,t,n){function r(d,f){return nn(d)&&d.length>f?d.substring(0,f-3)+"...":d}if(n.isEmpty)return console.table({}),console.log("Shape:",[0,0],`
`),n;let a=typeof window>"u"?20:10,i=Math.floor(a/2),o=typeof process>"u"?10:Math.floor(process.stdout.columns/24)-1,s=Math.floor(o/2),u=a>n.index.length?null:nr(0,i).concat(nr(n.index.length-i,n.index.length)),l=o>n.columns.length?null:nr(0,s).concat(nr(n.columns.length-s,n.columns.length)),c=n.get(u,l);c instanceof t&&(n.shape[0]===1?(c=new e([c.values]),c.index=n.index,c.columns=new t(n.columns).get(l).values):n.shape[1]===1&&(c=new e([c.values]).transpose(),c.index=new t(n.index).get(u).values,c.columns=n.columns)),a<=n.index.length&&(c._index.splice(i,0,"..."),c._values.splice(i,0,nr(0,c.columns.length).map(()=>"..."))),o<=n.columns.length&&(c._columns.splice(s,0,"..."),c._values=c._values.map(d=>(d.splice(s,0,"..."),d)));let p=28;return c instanceof t?(c.values=c.values.map(d=>r(d,p)),c.name=r(c.name,p),c.index=c.index.map(d=>r(d,p))):(c.values=c.values.map(d=>d.map(f=>r(f,p))),c.columns=c.columns.map(d=>r(d,p)),c.index=c.index.map(d=>r(d,p))),console.table(c.toDetailedObject()),console.log("Shape:",n.shape,`
`),n}function gd(e,t){te(He(e),"The `leftPad` function only works on numbers!");let n=e.toString();for(;n.length<t;)n="0"+n;return n}function Cje(e,t){let n=t?e:e.copy();return n.index=nr(0,e.shape[0]).map(r=>"row"+gd(r,(n.index.length-1).toString().length)),n}function D1(e,t){if(wt(e)||vt(e))return D1(e.values,t);te(Te(e),"The `product` function only works on arrays, Series, and DataFrames!");try{if(e.length===0)return NaN;let n=Go(e),r=!1,a=1;for(let i of n){if(!He(i))if(t)i=1;else return NaN;typeof i=="bigint"&&(r=!0,i=Number(i)),a*=i}if(r)try{return BigInt(a)}catch{}return a}catch{return NaN}}function Dje(e){return az(e)&&e>0}function m1(e,t){if(wt(e)||vt(e))return m1(e.values,t);if(te(Te(e),"The first argument passed into the `reshape` function must be an array!"),He(t)&&(t=[t]),te(Te(t),"The second argument passed into the `reshape` function must be a whole number or a one-dimensional array of whole numbers!"),te(bt(t).length===1,"The first argument passed into the `reshape` function must be a whole number or a one-dimensional array of whole numbers!"),t=t.map(i=>(typeof i=="bigint"&&(i=Number(i)),te(Dje(i),"The first argument passed into the `reshape` function must be a whole number or a one-dimensional array of whole numbers!"),Number(i))),t.length===0)return Go(e);let n=Go(e);if(t.length===1&&t[0]===n.length)return n;te(D1(t)===n.length,"The new shape doesn't match the number of values available in `x` (the first argument passed into the `reshape` function)!");let r=[],a=Math.floor(n.length/t[0]);for(let i=0;i<t[0];i++){let o=n.slice(i*a,(i+1)*a);r.push(m1(o,t.slice(1)))}return r}var iz=Math.pow(2,64),Un=[];oz(Math.floor(Math.random()*iz));function _je(e,t){e=ba(e);function n(){e+=ba("0x9e3779b97f4a7c15");let a=ia(e);return a=(a^a>>BigInt(30))*ba("0xbf58476d1ce4e5b9"),a=(a^a>>BigInt(27))*ba("0x94d049bb133111eb"),a^a>>BigInt(31)}let r=[];for(let a=0;a<t;a++)r.push(n());return r}function ba(e){return BigInt.asUintN(64,BigInt(e))}function vL(e,t){return e=ba(e),t=BigInt(t),ba(ba(e<<t)|ba(e>>ba(BigInt(64)-t)))}function oz(e){if(typeof e=="bigint"&&(e=Number(e)),lt(e))return ia(Un);{te(He(e),"If passing a value into the `seed` function, then that value must be an integer!");let t=_je(Math.floor(e),4);Un[0]=t[0],Un[1]=t[1],Un[2]=t[2],Un[3]=t[3]}}function gL(){let e=ba(vL(Un[0]+Un[3],23)+Un[0]),t=ba(Un[1]<<BigInt(17));return Un[2]=ba(Un[2]^Un[0]),Un[3]=ba(Un[3]^Un[1]),Un[1]=ba(Un[1]^Un[2]),Un[0]=ba(Un[0]^Un[3]),Un[2]=ba(Un[2]^t),Un[3]=vL(Un[3],45),Math.floor(Number(e))/iz}function Dd(e){return lt(e)?gL():(Te(e)||(e=[e]),m1(Vo(D1(e)).map(gL),e))}function T2(e){if(wt(e)||vt(e))return e.shuffle(...Object.values(arguments).slice(1));te(Te(e),"The `shuffle` function only works on arrays, Series, and DataFrames!");let t=[],n=e.slice();for(let r=0;r<e.length;r++){let a=Math.floor(Dd()*n.length);t.push(n.splice(a,1)[0])}return t}function Aje(e,t){return lt(t)&&(t=0),te(t===0||t===1,"The `axis` parameter to the `shuffle` must be 0, 1, or undefined."),e.get(t===0?T2(e.index):null,t===1?T2(e.columns):null)}function Sc(e){return typeof e=="boolean"}function Fje(e,t,n){return $r(t)?Rje(e,t,n):Oje(e,t,n)}function Rje(e,t,n){if(n=lt(n)?0:n,te($r(t),"When sorting a DataFrame using a function, the first argument to the `sort` method must be a function!"),te(He(n),"When sorting a DataFrame using a function, the second argument to the `sort` method must be null, undefined, 0, or 1 to indicate the axis along which the data should be sorted! An axis of 0 means that the rows will be sorted relative to each other, whereas an axis of 1 means that the columns will be sorted relative to each other."),n===0){let r=Ec(e.index,(a,i)=>t(e.get(a,null),e.get(i,null)));return e.get(r,null)}else{let r=Ec(e.columns,(a,i)=>t(e.get(null,a),e.get(null,i)));return e.get(null,r)}}function Oje(e,t,n){let r=e.copy(),a=Dd().toString();r=r.assign(a,r.index),lt(t)&&(t=[a],n=[!0]),(He(t)||nn(t))&&(t=[t],(Sc(n)||nn(n))&&(n=[n])),te(Te(t),"The first parameter of the `sort` method must be (1) a string or index representing a column name or index, respectively; (2) a 1-dimensional array of strings and/or indices; or (3) null."),te(bt(t).length===1,"The first parameter of the `sort` method must be (1) a string or index representing a column name or index, respectively; (2) a 1-dimensional array of strings and/or indices; or (3) null."),lt(n)&&(n=nr(0,t.length).map(()=>!0)),te(Te(n),"The second parameter of the `sort` method must be (1) a string or boolean representing the sort direction ('ascending' / 'descending', or true / false); (2) a 1-dimensional array of strings and/or booleans; or (3) null."),te(bt(n).length===1,"The second parameter of the `sort` method must be (1) a string or boolean representing the sort direction ('ascending' / 'descending', or true / false); (2) a 1-dimensional array of strings and/or booleans; or (3) null."),te(t.length===n.length,"The arrays passed into the `sort` method must be equal in length."),t=t.map(o=>{if(te(nn(o)||He(o),"Column references can either be column names (as strings) or column indices (as whole numbers)."),nn(o)){let s=r.columns.indexOf(o);return te(s>-1,`The column "${o}" does not exist!`),s}if(He(o))return te(Cd(o),"Column indices must be whole numbers!"),te(o<r.columns.length,`The index ${o} is out of bounds!`),o}),n=n.map(o=>{if(te(nn(o)||Sc(o),"Direction references can either be strings ('ascending' or 'descending') or booleans (true or false)."),nn(o)){let s=o.trim().toLowerCase();return te(s==="ascending"||s==="descending","Direction references can either be strings ('ascending' or 'descending') or booleans (true or false)."),s==="ascending"}if(Sc(o))return o}),r.values=Ec(r.values,(o,s)=>{let u=0;for(;o[t[u]]===s[t[u]]&&u<t.length;)u++;let l=n[u];if(o[t[u]]===s[t[u]])return 0;if(o[t[u]]<s[t[u]])return l?-1:1;if(o[t[u]]>s[t[u]])return l?1:-1});let i=r.columns.indexOf(a);return r.index=r.values.map(o=>o[i]),r=r.dropColumns(a),r}function Mje(e,t){lt(t)?t=0:te(t===0||t===1,"The axis parameter of the `toDetailedObject` method must be undefined, 0, or 1. An axis of 0 indicates that the returned object should be organized first by rows and then by columns. An axis of 1 indicates that the returned object should be organized first by columns and then by rows.");let n={};return t===0?e.index.forEach((r,a)=>{let i={};e.columns.forEach((o,s)=>{i[o]=e.values[a][s]}),n[r]=i}):e.columns.forEach((r,a)=>{let i={};e.index.forEach((o,s)=>{i[o]=e.values[s][a]}),n[r]=i}),n}function sz(e,t){return JSON.stringify(e.toObject(t))}async function Pje(e,t,n){let r=sz(e,n),a=!1,i=!1,o,s;try{let u=t;if(t.includes("/")){let c=t.split("/");u=c[c.length-1]}let l=document.createElement("a");l.href=`data:application/json;charset=utf-8,${encodeURIComponent(r)}`,l.download=u,l.dispatchEvent(new MouseEvent("click")),a=!0}catch(u){o=u}try{let u=await import("node:fs"),l=await import("node:path");u.writeFileSync(l.resolve(t),r,"utf8"),i=!0}catch(u){s=u}if(!a&&!i)throw typeof window<"u"?new Zu(o):typeof module<"u"?new Zu(s):new Zu("I don't know what's going wrong, but it doesn't seem like you're in Node or the browser, and we couldn't download and/or write the file to disk!");return e}function Bje(e){let t={};return e.columns.forEach(n=>{t[n]=e.get(n).values}),t}function iu(e){if(wt(e)||vt(e))return e.transpose();te(Te(e),"The `transpose` function only works on arrays, Series, and DataFrames!");let t=bt(e);if(te(t.length<=2,"I'm not smart enough to know how to transpose arrays that have more than 2 dimensions. Sorry for the inconvenience! Please only pass 1- or 2-dimensional arrays into the `transpose` function!"),t.length===1)return ms(e);if(t.length===2){let n=Vo(ms(t));for(let r=0;r<t[0];r++)for(let a=0;a<t[1];a++)n[a][r]=e[r][a];return n}}function uz(e,t,n){if(vt(n))return new e(t.values.concat(n.values));if(Te(n)){let r=bt(n);te(r.length===1&&!R2(r),"Only vectors can be appended to Series!");let a=t.copy();return n.forEach((i,o)=>{a._values.push(i),a._index.push("item"+(t.values.length+o))}),a}return uz(t,[n])}function Lje(e,t){te($r(t),"The parameter to the `apply` method must be a function.");let n=e.copy();return n._values=n._values.map((r,a)=>t(r,a)),n}function zje(e){let t=e.copy(),n=[];return t._values=t.values.filter((r,a)=>lt(r)?!1:(n.push(t.index[a]),!0)),t._index=n,t}function $je(e,t){let n=[],r=[];t.values.forEach((i,o)=>{He(i)&&(r.push(i),n.push(t.index[o]))});let a=new e(r);return a.name=t.name,a.index=n,a}function Vje(e,t,n){let r=t.copy(),a=ia(r.index),i=[],o=r.values.filter((s,u)=>{let l=n(s,u,r.values);return l||i.push(r.index[u]),l});return i.forEach(s=>{a.splice(a.indexOf(s),1)}),o.length===0?(r=new e,r.name=t.name,r):(r.values=o,r.index=a,r)}function Wje(e,t){(nn(t)||He(t))&&(t=[t]);for(let r in t)typeof t[r]=="bigint"&&(t[r]=Number(t[r]));let n=lo((t||[]).map(r=>typeof r));return te(n.length<=2,"Only whole numbers and/or strings are allowed in `get` arrays!"),n.length===1&&te(n[0]==="string"||n[0]==="number","Only whole numbers and/or strings are allowed in `get` arrays!"),n.length===2&&(te(n.indexOf("string")>-1,"Only whole numbers and/or strings are allowed in `get` arrays!"),te(n.indexOf("number")>-1,"Only whole numbers and/or strings are allowed in `get` arrays!")),lt(t)||(t=t.map(r=>{if(typeof r=="string")return te(e.index.indexOf(r)>-1,`Index "${r}" does not exist!`),r;if(typeof r=="number")return te(r>=0,`Index ${r} is out of bounds!`),te(Math.floor(r)===r,"Indices must be integers!"),te(r<e.index.length,`Index ${r} is out of bounds!`),e.index[r]})),e.getSubsetByNames(t)}function Uje(e,t){let n=e.shape;lt(t)&&(t=nr(0,n[0])),te(Te(t),"The `indices` array must be 1-dimensional array of whole numbers."),te(bt(t).length===1,"The `indices` array must be a 1-dimensional array of whole numbers."),te(t.length>0,"The `indices` array must contain at least one index."),t.forEach(a=>{te(Cd(a),"The `indices` array must be a 1-dimensional array of whole numbers."),te(a<e.index.length,`The row index ${a} is out of bounds.`)});let r=t.map(a=>e.index[a]);return e.getSubsetByNames(r)}function Gje(e,t,n){lt(n)&&(n=t.index),te(Te(n),"The `indices` array must be a 1-dimensional array of strings."),te(bt(n).length===1,"The `indices` array must be a 1-dimensional array of strings."),te(n.length>0,"The `indices` array must contain at least one index name."),n.forEach(i=>{te(nn(i),"The `indices` array must contain only strings."),te(t.index.indexOf(i)>-1,`The name "${i}" does not exist in the index.`)});let r=n.map(i=>t.values[t.index.indexOf(i)]);if(r.length===1)return r[0];let a=new e(r);return a.index=n,a.name=t.name,a}function qje(e){let t=e.copy(),n=typeof window>"u"?20:10;if(t.index.length>n){t=t.get(nr(0,n/2).concat(nr(t.index.length-n/2,t.index.length)));let a=ia(t.index);a.splice(Math.floor(a.length/2),0,"..."),t.values.push("..."),t.index.push("..."),t=t.get(a)}let r={};return t.values.forEach((a,i)=>{let o={};o[t.name]=a,r[t.index[i]]=o}),console.table(r),console.log("Shape:",e.shape,`
`),e}function Hje(e){let t=e.copy();return t.get(T2(t.index))}function jje(e,t,n){n=n||((u,l)=>u<l?-1:1),te(lt(n)||$r(n),"You must pass undefined, null, or a comparison function as the second argument to the `sort` method!");let r=iu([t.values,t.index]),a=Ec(r,(u,l)=>n(u[0],l[0])),i=[],o=[];a.forEach(u=>{i.push(u[0]),o.push(u[1])});let s=new e;return s._values=i,s._index=o,s.name=t.name,s}function Kje(e,t){let n=iu([t.values,t.index]);n=iu(Ec(n,(a,i)=>{if(a[1]===i[1])return 0;if(a[1]<i[1])return-1;if(a[1]>i[1])return 1}));let r=new e(n[0]);return r.index=n[1],r.name=t.name,r}function Xje(e){let t={};return t[e.name]={},e.index.forEach((n,r)=>{t[e.name][n]=e.values[r]}),t}var yL=Symbol.for("@jrc03c/js-math-tools/series");function Yje(e){class t{static[Symbol.hasInstance](r){try{return!!r._symbol&&r._symbol===yL}catch{return!1}}constructor(r){if(this.name="data",Object.defineProperty(this,"_symbol",{configurable:!1,enumerable:!1,writable:!1,value:yL}),Object.defineProperty(this,"_values",{value:[],configurable:!0,enumerable:!1,writable:!0}),Object.defineProperty(this,"values",{configurable:!0,enumerable:!0,get(){return this._values},set(a){te(Te(a),"The new values must be a 1-dimensional array!");let i=bt(a);te(i.length===1,"The new array of values must be 1-dimensional!"),i[0]<this._index.length?this._index=this._index.slice(0,i[0]):i[0]>this._index.length&&(this._index=this._index.concat(nr(this._index.length,i[0]).map(o=>"item"+gd(o,(a.length-1).toString().length)))),this._values=a}}),Object.defineProperty(this,"_index",{value:[],configurable:!0,enumerable:!1,writable:!0}),Object.defineProperty(this,"index",{configurable:!0,enumerable:!0,get(){return this._index},set(a){te(Te(a),"The new index must be a 1-dimensional array of strings!"),te(a.length===this.shape[0],"The new index must be the same length as the old index!"),te(bt(a).length===1,"The new index must be a 1-dimensional array of strings!"),a.forEach(i=>{te(nn(i),"All of the row names must be strings!")}),this._index=a}}),r){if(r instanceof t)this.name=r.name,this.values=ia(r.values),this.index=ia(r.index);else if(Te(r)){let a=bt(r);te(a.length===1,"When passing an array into the constructor of a Series, the array must be 1-dimensional!"),this.values=r}else if(r instanceof Object){let a=Object.keys(r).concat(Object.getOwnPropertySymbols(r)).map(s=>s.toString());te(a.length===1,"When passing an object into the constructor of a Series, the object must have only 1 key-value pair, where the key is the name of the data and the value is the 1-dimensional array of values!");let i=a[0],o=r[i];te(bt(o).length===1,"When passing an object into the constructor of a Series, the object must have only 1 key-value pair, where the key is the name of the data and the value is the 1-dimensional array of values!"),this.name=i,this.values=o.slice()}}}get shape(){return bt(this.values)}get length(){return this.shape[0]}get isEmpty(){return this.values.filter(r=>!lt(r)).length===0}clear(){let r=this.copy();return r.values.forEach((a,i)=>{r.values[i]=void 0}),r}get(r){return Wje(this,r)}getSubsetByNames(r){return Gje(t,this,r)}getSubsetByIndices(r){return Uje(this,r)}loc(r){return this.getSubsetByNames(r)}iloc(r){return this.getSubsetByIndices(r)}reverse(){let r=new t(ms(this.values));return r.index=ms(this.index),r.name=this.name,r}resetIndex(){let r=this.copy();return r.index=nr(0,this.shape[0]).map(a=>"item"+gd(a,(r.index.length-1).toString().length)),r}copy(){let r=new t;return r._values=ia(this.values),r._index=ia(this.index),r.name=this.name,r}append(r){return uz(t,this,r)}apply(r){return Lje(this,r)}concat(r){return this.append(r)}dropMissing(r,a){return zje(this,r,a)}dropNaN(){return $je(t,this)}toObject(){return Xje(this)}print(){return qje(this)}shuffle(){return Hje(this)}sort(r){return jje(t,this,r)}sortByIndex(){return Kje(t,this)}filter(r){return Vje(t,this,r)}toDataFrame(){let r=new e(iu([this.values]));return r.columns=[this.name],r.index=this.index,r}transpose(){let r=this.copy();return r.values=ms(r.values),r.index=ms(r.index),r}getDummies(){return this.toDataFrame().getDummies()}oneHotEncode(){return this.getDummies()}}return t}var bL=Symbol.for("@jrc03c/js-math-tools/dataframe");function h2(e){let t="abcdefghijklmnopqrstuvwxyz1234567890",n="";for(let r=0;r<e;r++)n+=t[Math.floor(Dd()*t.length)];return n}var tr=class{static[Symbol.hasInstance](e){try{return!!e._symbol&&e._symbol===bL}catch{return!1}}constructor(e){if(Object.defineProperty(this,"_symbol",{configurable:!1,enumerable:!1,writable:!1,value:bL}),Object.defineProperty(this,"_values",{value:[],configurable:!0,enumerable:!1,writable:!0}),Object.defineProperty(this,"values",{configurable:!0,enumerable:!0,get(){return this._values.length===0||!lt(this._values[0])&&this._values[0].length===0?[[]]:this._values},set(t){te(Te(t),"The new values must be a 2-dimensional array!");let n=bt(t);te(n.length===2,"The new array of values must be 2-dimensional!"),n[0]<this._index.length?this._index=this._index.slice(0,n[0]):n[0]>this._index.length&&(this._index=this._index.concat(nr(this._index.length,n[0]).map(r=>"row"+gd(r,(n[0]-1).toString().length)))),n[1]<this._columns.length?this._columns=this._columns.slice(0,n[1]):n[1]>this._columns.length&&(this._columns=this._columns.concat(nr(this._columns.length,n[1]).map(r=>"col"+gd(r,(n[1]-1).toString().length)))),this._values=t}}),Object.defineProperty(this,"_columns",{value:[],configurable:!0,enumerable:!1,writable:!0}),Object.defineProperty(this,"columns",{configurable:!0,enumerable:!0,get(){return this._columns},set(t){te(Te(t),"The new columns list must be a 1-dimensional array of strings!"),te(this.isEmpty||t.length===this.shape[1],"The new columns list must be the same length as the old columns list!"),te(bt(t).length===1,"The new columns list must be a 1-dimensional array of strings!"),t=t.map(r=>(typeof r!="string"&&(r=JSON.stringify(r)||r.toString()),r.trim().length===0?"untitled_"+h2(8):r.trim()));let n=(()=>{let r=N2(t),a={};return r.values.forEach(i=>{a[i]=r.get(i)}),a})();t=t.map(r=>n[r]>1?r+"_"+h2(8):r),this._columns=t}}),Object.defineProperty(this,"_index",{value:[],configurable:!0,enumerable:!1,writable:!0}),Object.defineProperty(this,"index",{configurable:!0,enumerable:!0,get(){return this._index},set(t){te(Te(t),"The new index must be a 1-dimensional array of strings!"),te(this.isEmpty||t.length===this.shape[0],"The new index must be the same length as the old index!"),te(bt(t).length===1,"The new index must be a 1-dimensional array of strings!"),t=t.map(r=>(typeof r!="string"&&(r=JSON.stringify(r)||r.toString()),r.trim().length===0?"untitled_"+h2(8):r.trim()));let n=(()=>{let r=N2(t),a={};return r.values.forEach(i=>{a[i]=r.get(i)}),a})();t=t.map(r=>n[r]>1?r+"_"+h2(8):r),this._index=t}}),te(lt(e)||bs(e)||Te(e),"The `data` passed into the constructor of a DataFrame must be either (1) an object where the key-value pairs are (respectively) column names and 1-dimensional arrays of values, or (2) a 2-dimensional array of values."),e)if(e instanceof tr)this.values=ia(e.values),this.columns=ia(e.columns),this.index=ia(e.index);else if(Te(e)){let t=bt(e);te(t.length===2,"The `data` array passed into the constructor of a DataFrame must be 2-dimensional!"),te(!I1(e),"The 2-dimensional array passed into the constructor of a DataFrame must not contain sub-arrays (i.e., rows) of different lengths!"),this.values=e}else{this._columns=Object.keys(e).concat(Object.getOwnPropertySymbols(e)).map(i=>i.toString());let t=[],n=null,r=null;this._columns.forEach(i=>{lt(r)&&(n=i,r=e[i].length),te(e[i].length===r,`The object passed into the DataFrame constructor contains arrays of different lengths! The key "${n}" points to an array containing ${r} items, and the key "${i}" points to an array containing ${e[i].length} items.`),r=e[i].length;let o=e[i];t.push(o)}),this._values=iu(t);let a=bt(this.values);this._index=nr(0,a[0]).map(i=>"row"+gd(i,(a[0]-1).toString().length))}}get shape(){return bt(this.values)}get length(){return this.shape[0]}get width(){return this.shape[1]}get rows(){return this.index}set rows(e){this.index=e}get isEmpty(){return this.values.length===0||this.values.every(e=>e.length===0)}clear(){let e=new tr(Vo(this.shape));return e.columns=this.columns.slice(),e.index=this.index.slice(),e}get(e,t){if(arguments.length===0)return this;if(arguments.length===1)try{return this.get(null,e)}catch{return this.get(e,null)}return Sje(this,e,t)}getSubsetByNames(e,t){return Eje(tr,Aa,this,e,t)}getSubsetByIndices(e,t){return Tje(this,e,t)}getDummies(e){return mL(tr,this,e)}oneHotEncode(e){return mL(tr,this,e)}transpose(){let e=new tr(iu(this.values));return e.columns=this.index.slice(),e.index=this.columns.slice(),e}get T(){return this.transpose()}resetIndex(e){return Cje(this,e)}copy(){return gje(tr,this)}assign(e,t){return vje(tr,Aa,this,e,t)}apply(e,t){return mje(tr,Aa,this,e,t)}dropMissing(e,t,n){return bje(tr,Aa,this,e,t,n)}dropNaN(e,t,n){return wje(tr,this,e,t,n)}drop(e,t){return yje(tr,Aa,this,e,t)}dropColumns(e){return this.drop(null,e)}dropRows(e){return this.drop(e,null)}toDetailedObject(e){return Mje(this,e)}toObject(){return Bje(this)}toJSONString(e){return sz(this,e)}saveAsJSON(e,t){return Pje(this,e,t)}print(){return Ije(tr,Aa,this)}sort(e,t){return Fje(this,e,t)}sortByIndex(){return this.sort()}filter(e,t){return xje(tr,Aa,this,e,t)}shuffle(e){return Aje(this,e)}append(e,t){return rz(this,e,t)}concat(e,t){return this.append(e,t)}join(e,t){return this.append(e,t)}toString(){return JSON.stringify(this)}},Aa=Yje(tr);function O2(e,t){return Di(e,{shouldDropNaNs:t}).max}function fn(e){return te($r(e),"You must pass a function into the `vectorize` function!"),function t(){let n,r,a=[],i=[],o=Object.keys(arguments).filter(s=>{let u=arguments[s];return Te(u)?!0:vt(u)?(n=!0,a.push(u),!0):wt(u)?(r=!0,i.push(u),!0):!1}).map(s=>arguments[s]);if(o.slice(0,-1).forEach((s,u)=>{te(ws(Te(s)?bt(s):s.shape,Te(o[u+1])?bt(o[u+1]):o[u+1].shape),`When passing multiple arrays into the \`${e.name}\` function, all of the arrays must have the same shape!`)}),o.length>0){let s=O2(o.map(l=>l.length?l.length:l.values.length)),u=nr(0,s).map(l=>{let c=Object.keys(arguments).map(p=>Te(arguments[p])?arguments[p][l]:vt(arguments[p])||wt(arguments[p])?arguments[p].values[l]:arguments[p]);return t(...c)});if(r)try{if(i.length===1&&ws(bt(i[0]),bt(u))){let l=new tr(u);return l.index=i[0].index.slice(),l.columns=i[0].columns.slice(),l}else return new tr(u)}catch{return u}if(n)try{if(a.length===1&&a[0].length===u.length){let l=new Aa(u);return l.name=a[0].name,l.index=a[0].index.slice(),l}else return new Aa(u)}catch{return u}return u}else return e(...arguments)}}function Jje(e){try{return He(e)?typeof e=="bigint"?e<0?-e:e:Math.abs(e):NaN}catch{return NaN}}var L5=fn(Jje);function Zje(){try{let e=0,t=!1,n=Object.values(arguments);for(let r of n){if(!He(r))return NaN;typeof r=="bigint"&&(t=!0,r=Number(r)),e+=r}if(t)try{return BigInt(e)}catch{}return e}catch{return NaN}}var E2=fn(Zje);function Qje(e,t){try{return t(e)}catch{return NaN}}var M2=fn(Qje);function eKe(e){try{return He(e)?(typeof e=="bigint"&&(e=Number(e)),Math.acos(e)):NaN}catch{return NaN}}var tKe=fn(eKe);function nKe(e){try{return He(e)?(typeof e=="bigint"&&(e=Number(e)),Math.asin(e)):NaN}catch{return NaN}}var rKe=fn(nKe);function aKe(e){try{return He(e)?(typeof e=="bigint"&&(e=Number(e)),Math.atan(e)):NaN}catch{return NaN}}var iKe=fn(aKe);function w5(e,t){if(wt(e)){let n=w5(e.values,t);return[e.index[n[0]],e.columns[n[1]]]}if(vt(e)){let n=w5(e.values,t);return e.index[n]}te(Te(e),"The `argmax` function only works on arrays, Series, and DataFrames!");try{let n=Id(e,O2(e,t));return n?n.length===0?void 0:n.length===1?n[0]:n:void 0}catch{return}}function lz(e,t){return Di(e,{shouldDropNaNs:t}).min}function x5(e,t){if(wt(e)){let n=x5(e.values,t);return[e.index[n[0]],e.columns[n[1]]]}if(vt(e)){let n=x5(e.values,t);return e.index[n]}te(Te(e),"The `argmin` function only works on arrays, Series, and DataFrames!");try{let n=Id(e,lz(e,t));return n?n.length===0?void 0:n.length===1?n[0]:n:void 0}catch{return}}function Ei(e,t){if(wt(e)||vt(e))return e.apply(n=>Ei(n,t));if(Te(e))return e.map(n=>Ei(n,t));if(t==="null")return null;if(t==="number"){if(lt(e))return NaN;let n=Ei(e,"boolean");if(Sc(n))return n?1:0;try{JSON.parse(e)}catch{let i=Ei(e,"date");if(Wo(i))return i.getTime()}let r=parseFloat(e);return isNaN(r)?NaN:r}if(t==="int"){let n=Ei(e,"number");return n>=0?Math.floor(n):Math.ceil(n)}if(t==="float")return Ei(e,"number");if(t==="bigint")return typeof e=="bigint"?e:BigInt(Ei(e,"int"));if(t==="boolean"){if(Sc(e))return e;if(He(e))return e===0?!1:e===1?!0:null;try{let n=(typeof e=="object"?e.toString()==="null"?"false":JSON.stringify(e):e.toString()).trim().toLowerCase();return n==="true"||n==="yes"||n==="y"?!0:n==="false"||n==="no"||n==="n"?!1:null}catch{return null}}if(t==="date"){if(Wo(e))return e;if(lt(e))return null;let n=parseFloat(e);if(!isNaN(n)){let a=new Date(e);return Wo(a)?a:null}let r=Date.parse(e);return isNaN(r)?null:new Date(r)}if(t==="object"){if(bs(e))return e;let n=Ei(e,"boolean");if(Sc(n))return null;try{let a=Ei(e,"number");if(He(a))return JSON.parse(e),null}catch{}let r=Ei(e,"date");if(r)return r;try{let a=JSON.parse(e);return Te(a)?a.map(i=>Ei(i,t)):a}catch{return null}}if(t==="string")return lt(e)?ws(e,void 0)?"undefined":"null":e instanceof Date?e.toJSON():typeof e=="object"?e===null?"null":JSON.stringify(e):e.toString()}function oKe(e){try{return He(e)?typeof e=="bigint"?e:Math.ceil(e):NaN}catch{return NaN}}var sKe=fn(oKe);function uKe(e,t){try{if(!He(e))return NaN;if(typeof e=="bigint")return e;if(lt(t))t=1e-10;else if(!He(t))return NaN;return L5(e)<t?0:e}catch{return NaN}}var lKe=fn(uKe);function S5(e){if(wt(e)||vt(e)){let t=e.copy();return t.values=S5(t.values),t}if(Te(e))return e.map(t=>S5(t));try{let t=JSON.parse(e);return He(t)?typeof t=="bigint"?Number(t):t>=0?Math.floor(t):Math.ceil(t):NaN}catch{return NaN}}var xs=fn(S5);function cz(e,t,n){try{return He(e)?He(t)?He(n)?typeof e=="bigint"?BigInt(cz(xs(e),t,n)):e<t?t:e>n?n:e:NaN:NaN:NaN}catch{return NaN}}var cKe=fn(cz);function I2(e,t){function*n(r,a){if(a>r.length)yield r;else if(a<=0)yield[];else if(r.length<2)yield r;else for(let i=0;i<r.length;i++){let o=r[i],s=r.slice(i+1);if(!(s.length<a-1)&&a-1>=0)for(let u of I2(s,a-1))yield[o].concat(u)}}return wt(e)||vt(e)?I2(e.values,t):(te(Te(e),"The `combinations` function only works on arrays, Series, and DataFrames!"),te(He(t)&&xs(t)===t&&t>=0,"`r` must be a non-negative integer!"),n(Go(e),t))}function pz(e,t){let n=[];for(let r of I2(e,t))n.push(r.slice());return n}function dz(){let e=Object.values(arguments).map(n=>wt(n)||vt(n)?lo(n.values):(te(Te(n),"The `intersect` function only works on arrays, Series, and DataFrames!"),lo(n)));return lo(e).filter(n=>e.every(r=>r.findIndex(a=>ws(a,n))>-1))}var o1=class{constructor(e){te(lt(e)||e===o1.DROP_NAN_MODE||e===o1.DROP_MISSING_MODE,"The `mode` value passed into the `IndexMatcher` constructor must be undefined or one of [IndexMatcher.DROP_NAN_MODE, IndexMatcher.DROP_MISSING_MODE]! (By default, the mode is `Indexer.DROP_MISSING_MODE`.)"),this.mode=lt(e)?o1.DROP_NAN_MODE:e,this.index=null}fit(){let e=[];return Object.values(arguments).forEach(t=>{if(Te(t)){let n=bt(t);if(n.length===1)t=new Aa(t);else if(n.length===2)t=new tr(t);else throw new Error("The `IndexMatcher.fit` method only works on arrays, Series, and DataFrames!")}te(wt(t)||vt(t),"The `IndexMatcher.fit` method only works on arrays, Series, and DataFrames!"),this.mode===o1.DROP_MISSING_MODE?e.push(t.dropMissing().index):e.push(t.dropNaN().index)}),this.index=dz(...e),this}transform(){te(!!this.index,"The IndexMatcher hasn't been fitted yet! Please call the `fit` method before calling the `transform` method.");let e=Object.values(arguments).map(t=>{if(Te(t)){let n=bt(t);if(n.length===1)return new Aa(t).get(this.index).values;if(n.length===2)return new tr(t).get(this.index,null).values;throw new Error("The `IndexMatcher.fit` method only works on arrays, Series, and DataFrames!")}return te(wt(t)||vt(t),"The `IndexMatcher.fit` method only works on arrays, Series, and DataFrames!"),t.get(this.index,null)});return e.length===1?e[0]:e}fitAndTransform(){return this.fit(...arguments).transform(...arguments)}},P2=o1;ez(P2,"DROP_NAN_MODE","DROP_NAN_MODE");ez(P2,"DROP_MISSING_MODE","DROP_MISSING_MODE");function p1(e,t,n,r){if(vt(e))return p1(e.values,t,n,r);if(vt(t))return p1(e,t.values,n,r);if(te(Te(e)&&Te(t)&&bt(e).length===1&&bt(t).length===1,"The `covariance` function only works on 1-dimensional arrays and Series!"),te(e.length===t.length,"The two arrays or Series passed into the `covariance` function must have the same length!"),n)return p1(...new P2().fitAndTransform(e,t),!1,r);try{let a=Di(e,{stdev:r}),i=Di(t,{stdev:r}),o=Number(a.mean),s=Number(i.mean);if(!He(o)||!He(s))return NaN;let u=Math.max(e.length,t.length),l=0;for(let c=0;c<u;c++){let p=e[c],d=t[c];if(!He(p))return NaN;if(!He(d))return NaN;typeof p=="bigint"&&(p=Number(p)),typeof d=="bigint"&&(d=Number(d)),l+=(p-o)*(d-s)}return r?[l/e.length,a,i]:l/e.length}catch{return NaN}}function k5(e,t,n){if(vt(e))return k5(e.values,t,n);if(vt(t))return k5(e,t.values,n);te(Te(e)&&Te(t)&&bt(e).length===1&&bt(t).length===1,"The `correl` function only works on 1-dimensional arrays and Series!"),te(e.length===t.length,"The two arrays or Series passed into the `correl` function must have the same length!");try{let[a,i,o]=p1(e,t,n,!0),s=i.stdev*o.stdev;return a/s}catch{return NaN}}function pKe(e){try{return He(e)?(typeof e=="bigint"&&(e=Number(e)),Math.cos(e)):NaN}catch{return NaN}}var dKe=fn(pKe),fKe=Object.freeze({boolean:"boolean",date:"date",null:"null",number:"number",object:"object",string:"string"});function N5(e,t){if(wt(e)||vt(e))return N5(e.values,t);if(wt(t)||vt(t))return N5(e,t.values);te(Te(e)&&Te(t),"The `diff` function only works on arrays, Series, and DataFrames!");let n=lo(e),r=lo(t),a=[];return n.forEach(i=>{r.findIndex(o=>ws(o,i))<0&&a.push(i)}),a}function fz(e,t){try{if(!He(e))return NaN;if(!He(t))return NaN;if(typeof e=="bigint"||typeof t=="bigint"){let n=fz(Number(e),Number(t));try{return BigInt(n)}catch{return n}}return Math.pow(e,t)}catch{return NaN}}var z5=fn(fz);function hz(e){try{if(!He(e))return NaN;if(typeof e=="bigint"){let t=hz(Number(e));try{return BigInt(t)}catch{return t}}return Math.sqrt(e)}catch{return NaN}}var mz=fn(hz);function hKe(){try{let e=Object.values(arguments);if(e.length===0)return NaN;let t=!1,n=1;for(let r of e){if(!He(r))return NaN;typeof r=="bigint"&&(t=!0,r=Number(r)),n*=r}if(t)try{return BigInt(n)}catch{}return n}catch{return NaN}}var vz=fn(hKe);function _d(){return vz(...arguments)}function gz(e,t){return E2(e,_d(t,-1))}function $5(e,t){return Di(e,{shouldDropNaNs:t}).sum}function T5(e,t){if(He(e)&&He(t))return L5(e-t);if(wt(e)||vt(e))return T5(e.values,t);if(wt(t)||vt(t))return T5(e,t.values);Te(e)&&Te(t)&&te(ws(bt(e),bt(t)),"If passing two arrays, Series, or DataFrames into the `distance` function, then those objects must have the same shape!");try{return mz($5(z5(gz(e,t),2)))}catch{return NaN}}function mKe(e,t){return _d(e,z5(t,-1))}function Zs(e,t){if(wt(e)){let a=Zs(e.values,t);if(bt(a).length===1){let i=new Aa(a);return i.name=vt(t)?t.name:i.name,i.index=e.index.slice(),i}else{let i=new tr(a);return i.index=e.index.slice(),wt(t)&&(i.columns=t.columns.slice()),i}}if(wt(t)){let a=Zs(e,t.values);if(bt(a).length===1){let i=new Aa(a);return i.name=vt(e)?e.name:i.name,i.index=t.columns.slice(),i}else{let i=new tr(a);return i.columns=t.columns.slice(),i}}if(vt(e))return Zs(e.values,t);if(vt(t))return Zs(e,t.values);te(Te(e)&&Te(t),"The `dot` function only works on arrays, Series, and DataFrames!");let n=bt(e),r=bt(t);if(te(n.length<=2&&r.length<=2,"I'm not smart enough to know how to get the dot-product of arrays that have more than 2 dimensions. Sorry for the inconvenience! Please only pass 1- or 2-dimensional arrays into the `dot` function!"),te(n[n.length-1]===r[0],`There's a dimension misalignment in the two arrays you passed into the \`dot\` function. (${n[n.length-1]} !== ${r[0]})`),n.length===1&&r.length===1)return $5(_d(e,t));if(n.length===1&&r.length===2)return iu(t).map(a=>Zs(e,a));if(n.length===2&&r.length===1)return e.map(a=>Zs(a,t));if(n.length===2&&r.length===2){let a=iu(t),i=[];for(let o=0;o<e.length;o++){let s=[];for(let u=0;u<a.length;u++)s.push(Zs(e[o],a[u]));i.push(s)}return i}}function V5(e){if(wt(e)||vt(e))return e.dropMissing(...Object.values(arguments).slice(1));te(Te(e),"The `dropMissing` function only works on arrays, Series, and DataFrames!");let t=[];return e.forEach(n=>{try{return t.push(V5(n))}catch{lt(n)||t.push(n)}}),t}function y2(e,t){if(wt(e)||vt(e))return y2(e.values,t);if(wt(t)||vt(t))return y2(e,t.values);te(Te(e)&&Te(t),"The `dropMissingPairwise` function only works on arrays, Series, and DataFrames!"),te(ws(bt(e),bt(t)),"The two arrays, Series, and/or DataFrames passed into the `dropMissingPairwise` function must have the same shape!");let n=[],r=[];for(let a=0;a<e.length;a++)try{let[i,o]=y2(e[a],t[a]);n.push(i),r.push(o)}catch{!lt(e[a])&&!lt(t[a])&&(n.push(e[a]),r.push(t[a]))}return[n,r]}function b2(e,t){if(wt(e)||vt(e))return b2(e.values,t);if(wt(t)||vt(t))return b2(e,t.values);te(Te(e)&&Te(t),"The `dropNaNPairwise` only works on arrays, Series, and DataFrames!"),te(ws(bt(e),bt(t)),"The two arrays, Series, and/or DataFrames passed into the `dropNaNPairwise` must have the same shape!");let n=[],r=[];for(let a=0;a<e.length;a++)try{let[i,o]=b2(e[a],t[a]);n.push(i),r.push(o)}catch{He(e[a])&&He(t[a])&&(n.push(e[a]),r.push(t[a]))}return[n,r]}function vKe(e){return V5(e)}function C2(e,t){if(wt(e)||vt(e))return C2(e.values,t);te(Te(e),"The first argument passed into the `every` function must be an array, Series, or DataFrame!"),te($r(t),"The second argument passed into the `every` function must be a function!");for(let n of e)if(Te(n)){if(!C2(n,t))return!1}else if(!t(n))return!1;return!0}function gKe(e){try{if(!He(e))return NaN;if(typeof e=="bigint"){if(e===0n)return 1n;e=Number(e)}return Math.exp(e)}catch{return NaN}}var yKe=fn(gKe);function E5(e){try{return typeof e=="bigint"?BigInt(E5(xs(e))):e!==xs(e)?NaN:e<=1?1:e*E5(e-1)}catch{return NaN}}var bKe=fn(E5);function I5(e,t){if(wt(e)||vt(e))return I5(e.values,t);if(te(bs(e)||Te(e),"You must pass (1) an object, array, Series, or DataFrame and (2) a function or value into the `find` function!"),!$r(t)){let a=t;t=i=>i===a}function n(a,i,o){if(o=o||[],o.indexOf(a)>-1)return null;if(bs(a)){o.push(a);let s=Object.keys(a).concat(Object.getOwnPropertySymbols(a));for(let u=0;u<s.length;u++){let l=s[u],c=a[l];if(i(c))return c;let p=n(c,i,o);if(p)return p}}else if(Te(a)){o.push(a);for(let s=0;s<a.length;s++){let u=a[s];if(i(u))return u;let l=n(u,i,o);if(l)return l}}else if(i(a))return a;return null}function r(a){try{return t(a)}catch{return!1}}return n(e,r)}function C5(e,t){if(wt(e)||vt(e))return C5(e.values,t);if(te(bs(e)||Te(e),"You must pass (1) an object, array, Series, or DataFrame and (2) a function or value into the `findAll` function!"),!$r(t)){let i=t;t=o=>o===i}function n(i,o,s){if(s=s||[],s.indexOf(i)>-1)return null;if(bs(i)){s.push(i);let u=Object.keys(i).concat(Object.getOwnPropertySymbols(i)),l=[];for(let c=0;c<u.length;c++){let p=u[c],d=i[p],f=!1;o(d)&&(l.push(d),f=!0);let h=n(d,o,s);h&&h.length>0&&h.slice(f?1:0).forEach(m=>l.push(m))}return l}else if(Te(i)){s.push(i);let u=[];for(let l=0;l<i.length;l++){let c=i[l],p=!1;o(c)&&(u.push(c),p=!0);let d=n(c,o,s);d&&d.length>0&&d.slice(p?1:0).forEach(f=>u.push(f))}return u}else if(o(i))return[i];return null}function r(i){try{return t(i)}catch{return!1}}let a=n(e,r);return a&&a.length>0?a:null}function wKe(e){try{if(e==="Infinity")return 1/0;if(e==="-Infinity")return-1/0;let t=JSON.parse(e);return He(t)?t:NaN}catch{return NaN}}var xKe=fn(wKe);function SKe(e){try{return He(e)?typeof e=="bigint"?e:Math.floor(e):NaN}catch{return NaN}}var kKe=fn(SKe);function W5(e){He(e)&&(e=[e]);let t=[],n=D1(e);for(let r=0;r<n;r++)t.push(0);return m1(t,e)}function NKe(e){typeof e=="bigint"&&(e=xs(e)),te(!lt(e),"You must pass an integer greater than 0 (representing the size) into the `identity` function!"),te(He(e),"You must pass an integer greater than 0 (representing the size) into the `identity` function!"),te(xs(e)===e,"You must pass an integer greater than 0 (representing the size) into the `identity` function!"),te(e>0,"You must pass an integer greater than 0 (representing the size) into the `identity` function!");let t=W5([e,e]);for(let n=0;n<e;n++)t[n][n]=1;return t}var TKe=["true","false","yes","no"],EKe=["null","none","nan","na","n/a","","undefined"];function m2(e){return e.type==="number"&&(typeof e.value<"u"?e.isInteger=xs(e.value)===e.value:e.isInteger=C2(e.values,t=>He(t)?xs(t)===t:!0)),e}function w2(e){if(wt(e)){let i=e.copy(),o=w2(e.values);return i.values=o.values,m2({type:o.type,values:i})}if(vt(e)){let i=e.copy(),o=w2(e.values);return i.values=o.values,m2({type:o.type,values:i})}if(!Te(e)){let i=w2([e]);return i.value=i.values[0],delete i.values,m2(i)}te(Te(e),"The `inferType` function only works on arrays, Series, and DataFrames!");let t=Go(e).map(i=>{if(i===void 0)return"null";try{if(typeof i=="object"){let u=new Date(i.getTime());if(Wo(u))return"date"}}catch{}nn(i)||(typeof i=="bigint"?i=i.toString()+"n":i=JSON.stringify(i));let s=i.toLowerCase().trim();if(EKe.indexOf(s)>-1)return"null";if(TKe.indexOf(s)>-1)return"boolean";try{if(i.match(/^-?\d+n$/g))return"bigint";let u=JSON.parse(i);return He(u)?"number":typeof u=="object"?Te(u)?"string":"object":"string"}catch{let l=new Date(i);return Wo(l)?"date":"string"}}),n=N2(t),a=n.values.toSorted((i,o)=>n.get(o)-n.get(i))[0];return m2({type:a,values:M2(e,i=>Ei(i,a))})}function x2(e){if(wt(e)){let n=e.copy();return n.values=x2(n.values),n}te(Te(e),"The `inverse` function only works on square 2-dimensional arrays or DataFrames!");let t=bt(e);if(te(t.length===2,"The array passed into the `inverse` function must be exactly two-dimensional and square!"),te(t[0]===t[1],"The array passed into the `inverse` function must be exactly two-dimensional and square!"),te(t[0]>=0,"The array passed into the `inverse` function must be exactly two-dimensional and square!"),t[0]===0)return e;if(t[0]===1){te(e[0][0]!==0,"This matrix cannot be inverted!");let n=e[0][0];return typeof n=="bigint"&&(n=Number(n)),1/n}else if(t[0]===2){let n=e[0][0],r=e[0][1],a=e[1][0],i=e[1][1];typeof n=="bigint"&&(n=Number(n)),typeof r=="bigint"&&(r=Number(r)),typeof a=="bigint"&&(a=Number(a)),typeof i=="bigint"&&(i=Number(i));let o=n*i-r*a;te(o!==0,"This matrix cannot be inverted!");let s=[[i,-r],[-a,n]];return _d(s,1/o)}else if(t[0]>1){let n=(r,a)=>He(r)||He(a)?_d(r,a):Zs(r,a);for(let r=1;r<t[0]-1;r++)try{let a=e.slice(0,r).map(m=>m.slice(0,r)),i=e.slice(0,r).map(m=>m.slice(r,t[0])),o=e.slice(r,t[0]).map(m=>m.slice(0,r)),s=e.slice(r,t[0]).map(m=>m.slice(r,t[0])),u=x2(a),l=x2(E2(s,n(-1,n(n(o,u),i)))),c=E2(u,n(n(n(n(u,i),l),o),u)),p=n(-1,n(n(u,i),l)),d=n(-1,n(n(l,o),u)),f=l;return c.map((m,v)=>m.concat(p[v])).concat(d.map((m,v)=>m.concat(f[v])))}catch{}te(!1,"This matrix cannot be inverted!")}}var IKe=new Function(`
    try {
      return this === window
    } catch(e) {}

    try {
      return !!importScripts
    } catch(e){}

    return false
  `);function yz(e,t,n){try{if(!He(e))return NaN;if(!He(t))return NaN;if(!He(n))return NaN;if(typeof e=="bigint"||typeof t=="bigint"){let r=yz(Number(e),Number(t),n);try{return BigInt(r)}catch{return r}}return n*(t-e)+e}catch{return NaN}}var CKe=fn(yz);function bz(e,t){try{if(t=lt(t)?Math.E:t,!He(e))return NaN;if(!He(t))return NaN;if(typeof e=="bigint"||typeof t=="bigint"){let n=bz(Number(e),Number(t));try{return BigInt(n)}catch{return n}}return Math.log(e)/Math.log(t)}catch{return NaN}}var DKe=fn(bz);function _Ke(e,t){return Di(e,{shouldDropNaNs:t}).mean}function AKe(e,t){return Di(e,{shouldDropNaNs:t,median:!0}).median}function wz(e,t){try{if(!He(e))return NaN;if(!He(t))return NaN;if(typeof e=="bigint"||typeof t=="bigint"){let n=wz(Number(e),Number(t));try{return BigInt(n)}catch{return n}}return e%t}catch{return NaN}}var FKe=fn(wz);function RKe(e,t){return Di(e,{shouldDropNaNs:t,mode:!0}).mode}function wL(){let e=Dd(),t=Dd();return Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*t)}function OKe(e){return lt(e)?wL():M2(Vo(e),wL)}function MKe(e){return M2(Vo(e),()=>1)}function U5(e,t){function*n(r,a){if(a=a||r.length,r.length===1){yield[r];return}for(let i of pz(r,a)){if(!i.slice)continue;let o=W5(i.length);yield i;let s=1;for(;s<i.length;)if(o[s]<s){if(s%2===0){let u=i[0];i[0]=i[s],i[s]=u}else{let u=i[o[s]];i[o[s]]=i[s],i[s]=u}yield i,o[s]+=1,s=1}else o[s]=0,s+=1}}return wt(e)||vt(e)?U5(e.values,t):(te(Te(e),"The `permutations` function only works on arrays, Series, and DataFrames!"),lt(t)&&(t=e.length),te(He(t)&&xs(t)===t&&t>=0,"`r` must be a non-negative integer!"),n(Go(e),t))}function PKe(e,t){let n=[];for(let r of U5(e,t))n.push(r.slice());return n}function BKe(){Object.keys(arguments).forEach(e=>{let t=arguments[e];if(Te(t))if(I1(t))console.log(t);else{let n=bt(t);n.length===1?new Aa(t).print():n.length==2?new tr(t).print():console.log(t)}else wt(t)||vt(t)?t.print():console.log(t)})}var LKe=fn((e,t,n,r,a)=>{try{let i=!1;for(let l of[e,t,n,r,a]){if(!He(l))return NaN;typeof l=="bigint"&&(i=!0)}i&&(e=Number(e),t=Number(t),n=Number(n),r=Number(r),a=Number(a));let o=(a-r)*(e-t),s=n-t;if(s===0)return NaN;let u=o/s+r;if(i)try{return BigInt(u)}catch{}return u}catch{return NaN}});function zKe(e,t,n,r,a){if(Te(e)&&lt(r)&&lt(a)){r=t,a=n;let i=Di(e);t=i.min,n=i.max}return LKe(e,t,n,r,a)}function $Ke(e){try{return He(e)?typeof e=="bigint"?e:Math.round(e):NaN}catch{return NaN}}var VKe=fn($Ke);function xz(e){try{return He(e)?typeof e=="bigint"?BigInt(xz(Number(e))):e<0?-1:e>0?1:0:NaN}catch{return NaN}}var WKe=fn(xz);function UKe(e){try{return He(e)?(typeof e=="bigint"&&(e=Number(e)),Math.sin(e)):NaN}catch{return NaN}}var GKe=fn(UKe);function D5(e,t){if(wt(e)||vt(e))return D5(e.values,t);te(Te(e),"The first argument passed into the `some` function must be an array, Series, or DataFrame!"),te($r(t),"The second argument passed into the `some` function must be a function!");for(let n of e)if(Te(n)){if(D5(n,t))return!0}else if(t(n))return!0;return!1}function Sz(e,t){return Di(e,{shouldDropNaNs:t,stdev:!0}).stdev}function qKe(e){return Sz(e)}function HKe(e){try{return He(e)?(typeof e=="bigint"&&(e=Number(e)),Math.tan(e)):NaN}catch{return NaN}}var jKe=fn(HKe);function xL(e,t){te($r(e),"`fn` must be a function!");let n=new Date;return t?e(...t):e(),new Date-n}async function KKe(e,t){te($r(e),"`fn` must be a function!");let n=new Date;return t?await e(...t):await e(),new Date-n}function XKe(){return lo([...arguments].map(e=>Te(e)?e:wt(e)||vt(e)?e.values:[e]))}function YKe(e,t){return Di(e,{shouldDropNaNs:t,variance:!0}).variance}function JKe(){let e=[],t=Object.values(arguments).map(n=>((wt(n)||vt(n))&&(n=n.values),te(Te(n),"The `zip` function only works on arrays, Series, and DataFrames!"),n));return nr(0,O2(t.map(n=>n.length))).forEach(n=>{let r=[];t.forEach(a=>{let i=a[n];r.push(lt(i)?void 0:i)}),e.push(r)}),e}var s1={abs:L5,add:E2,apply:M2,arccos:tKe,arcsin:rKe,arctan:iKe,argmax:w5,argmin:x5,assert:te,cast:Ei,ceil:sKe,chop:lKe,clamp:cKe,combinations:pz,combinationsIterator:I2,copy:ia,correl:k5,cos:dKe,count:N2,covariance:p1,DataFrame:tr,dataTypes:fKe,decycle:Tc,diff:N5,distance:T5,divide:mKe,dot:Zs,dropMissing:V5,dropMissingPairwise:y2,dropNaN:B5,dropNaNPairwise:b2,dropUndefined:vKe,every:C2,exp:yKe,factorial:bKe,find:I5,findAll:C5,flatten:Go,float:xKe,floor:kKe,identity:NKe,IndexMatcher:P2,indexOf:Id,inferType:w2,int:xs,intersect:dz,inverse:x2,isArray:Te,isBoolean:Sc,isBrowser:IKe,isDataFrame:wt,isDate:Wo,isEqual:ws,isFunction:$r,isJagged:I1,isNested:R2,isNumber:He,isObject:bs,isSeries:vt,isString:nn,isUndefined:lt,lerp:CKe,log:DKe,MathError:Zu,max:O2,mean:_Ke,median:AKe,min:lz,mod:FKe,mode:RKe,multiply:vz,ndarray:Vo,normal:OKe,ones:MKe,permutations:PKe,permutationsIterator:U5,pow:z5,print:BKe,product:D1,random:Dd,range:nr,remap:zKe,reshape:m1,reverse:ms,round:VKe,scale:_d,seed:oz,Series:Aa,set:lo,shape:bt,shuffle:T2,sign:WKe,sin:GKe,some:D5,sort:Ec,sqrt:mz,stats:Di,std:Sz,stdev:qKe,subtract:gz,sum:$5,tan:jKe,timeAsync:KKe,timeSync:xL,time:xL,transpose:iu,union:XKe,variance:YKe,vectorize:fn,zeros:W5,zip:JKe,dump(){let e=typeof globalThis<"u"?globalThis:typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:void 0;if(!e)throw new s1.MathError("Cannot dump functions into global scope because none of `globalThis`, `global`, `window`, or `self` exist in the current context!");Object.keys(s1).forEach(t=>{try{Object.defineProperty(e,t,{configurable:!1,enumerable:!0,writable:!1,value:s1[t]})}catch{e[t]=s1[t]}})}};typeof window<"u"&&(window.JSMathTools=s1);var ZKe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:void 0;function _5(e){let t=Symbol.for("@TypedArrayConstructor"),n="Symbol(@TypedArrayConstructor)",r=t in e?t:n in e?n:void 0;if(r){if(!("values"in e))throw new Error("The value passed into the `convertObjectToTypedArray` must have a 'values' property!");return e[r]==="ArrayBuffer"?new Uint8Array(e.values).buffer:new ZKe[e[r]](e.values)}if(Te(e)&&e.constructor.name==="Array")return e;throw new Error("The value passed into the `convertObjectToTypedArray` must be an object that can be converted into a typed array!")}function yd(e){if(e instanceof ArrayBuffer||e instanceof BigInt64Array||e instanceof BigUint64Array||e instanceof Float32Array||e instanceof Float64Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Int8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray)return{[Symbol.for("@TypedArrayConstructor")]:e.constructor.name,values:e instanceof ArrayBuffer?Array.from(new Uint8Array(e)):Array.from(e)};if(Te(e))return e.map(t=>{try{return yd(t)}catch{return t}});if(typeof e=="object"&e!==null){if(Wo(e))return new Date(e.getTime());let t={};return Object.keys(e).forEach(n=>{try{t[n]=yd(e[n])}catch{t[n]=e[n]}}),t}throw new Error("The value passed into the `convertTypedArrayToObject` function must be a typed array! Valid types include: ArrayBuffer, Float32Array, Float64Array, Int16Array, Int32Array, Int8Array, Uint16Array, Uint32Array, Uint8Array, and Uint8ClampedArray.")}function kz(e){return e=e.trim(),!!(e.match(/^-?\d+(\.\d+)?$/g)||e.match(/^-?\d+(\.\d+)?e-?\d+(\.\d+)?$/g)||e.match(/^-?\.\d+$/g)||e==="NaN")}var Nz="!\"#%&'()*+,-./:;<=>?@[]^_`{|}~\xA0\xA1\xA4\xA7\xA9\xAA\xAB\xAE\xB0\xB1\xB6\xB7\xBA\xBB\xBF\xD7\xF7\u0254\u0300\u0301\u0302\u0303\u037E\u0387\u055A\u055B\u055C\u055D\u055E\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A\u066B\u066C\u066D\u06D4\u0700\u0701\u0702\u0703\u0704\u0705\u0706\u0707\u0708\u0709\u070A\u070B\u070C\u070D\u07F7\u07F8\u07F9\u0830\u0831\u0832\u0833\u0834\u0835\u0836\u0837\u0838\u0839\u083A\u083B\u083C\u083D\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04\u0F05\u0F06\u0F07\u0F08\u0F09\u0F0A\u0F0B\u0F0C\u0F0D\u0F0E\u0F0F\u0F10\u0F11\u0F12\u0F14\u0F3A\u0F3B\u0F3C\u0F3D\u0F85\u0FD0\u0FD1\u0FD2\u0FD3\u0FD4\u0FD9\u0FDA\u104A\u104B\u104C\u104D\u104E\u104F\u10FB\u1360\u1361\u1362\u1363\u1364\u1365\u1366\u1367\u1368\u1400\u166E\u169B\u169C\u16EB\u16EC\u16ED\u1735\u1736\u17D4\u17D5\u17D6\u17D8\u17D9\u17DA\u1800\u1801\u1802\u1803\u1804\u1805\u1806\u1807\u1808\u1809\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0\u1AA1\u1AA2\u1AA3\u1AA4\u1AA5\u1AA6\u1AA8\u1AA9\u1AAA\u1AAB\u1AAC\u1AAD\u1B5A\u1B5B\u1B5C\u1B5D\u1B5E\u1B5F\u1B60\u1BFC\u1BFD\u1BFE\u1BFF\u1C3B\u1C3C\u1C3D\u1C3E\u1C3F\u1C7E\u1C7F\u1CC0\u1CC1\u1CC2\u1CC3\u1CC4\u1CC5\u1CC6\u1CC7\u1CD3\u2010\u2011\u2012\u2013\u2014\u2015\u2016\u2017\u2018\u2019\u201A\u201B\u201C\u201D\u201E\u201F\u2020\u2021\u2022\u2023\u2024\u2025\u2026\u2027\u2030\u2031\u2032\u2033\u2034\u2035\u2036\u2037\u2038\u2039\u203A\u203B\u203C\u203D\u203E\u203F\u2040\u2041\u2042\u2043\u2045\u2046\u2047\u2048\u2049\u204A\u204B\u204C\u204D\u204E\u204F\u2050\u2051\u2052\u2053\u2054\u2055\u2056\u2057\u2058\u2059\u205A\u205B\u205C\u205D\u205E\u207D\u207E\u208D\u208E\u2116\u2117\u2120\u2122\u212E\u2212\u2234\u2235\u2248\u2300\u2308\u2309\u230A\u230B\u2311\u2329\u232A\u2380\u25CA\u25CC\u261E\u2640\u2642\u26A5\u2766\u2767\u2768\u2769\u276A\u276B\u276C\u276D\u276E\u276F\u2770\u2771\u2772\u2773\u2774\u2775\u27C5\u27C6\u27E6\u27E7\u27E8\u27E9\u27EA\u27EB\u27EC\u27ED\u27EE\u27EF\u2983\u2984\u2985\u2986\u2987\u2988\u2989\u298A\u298B\u298C\u298D\u298E\u298F\u2990\u2991\u2992\u2993\u2994\u2995\u2996\u2997\u2998\u29D8\u29D9\u29DA\u29DB\u29FC\u29FD\u2CF9\u2CFA\u2CFB\u2CFC\u2CFE\u2CFF\u2D70\u2E00\u2E01\u2E02\u2E03\u2E04\u2E05\u2E06\u2E07\u2E08\u2E09\u2E0A\u2E0B\u2E0C\u2E0D\u2E0E\u2E0F\u2E10\u2E11\u2E12\u2E13\u2E14\u2E15\u2E16\u2E17\u2E18\u2E19\u2E1A\u2E1B\u2E1C\u2E1D\u2E1E\u2E1F\u2E20\u2E21\u2E22\u2E23\u2E24\u2E25\u2E26\u2E27\u2E28\u2E29\u2E2A\u2E2B\u2E2C\u2E2D\u2E2E\u2E30\u2E31\u2E32\u2E33\u2E34\u2E35\u2E36\u2E37\u2E38\u2E39\u2E3A\u2E3B\u2E3C\u2E3D\u2E3E\u2E3F\u2E40\u2E41\u2E42\u2E43\u2E44\u2E45\u2E46\u2E47\u2E48\u2E49\u2E4A\u2E4B\u2E4C\u2E4D\u2E4E\u2E4F\u2E52\u3001\u3002\u3003\u3008\u3009\u300A\u300B\u300C\u300D\u300E\u300F\u3010\u3011\u3014\u3015\u3016\u3017\u3018\u3019\u301A\u301B\u301C\u301D\u301E\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D\uA60E\uA60F\uA673\uA67E\uA6F2\uA6F3\uA6F4\uA6F5\uA6F6\uA6F7\uA874\uA875\uA876\uA877\uA8CE\uA8CF\uA8F8\uA8F9\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1\uA9C2\uA9C3\uA9C4\uA9C5\uA9C6\uA9C7\uA9C8\uA9C9\uA9CA\uA9CB\uA9CC\uA9CD\uA9DE\uA9DF\uAA5C\uAA5D\uAA5E\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uD800\uD801\uD802\uD803\uD804\uD805\uD806\uD807\uD809\uD81A\uD81B\uD82F\uD836\uD83A\u{1F03B}\uDC41\uDC42\uDC43\uDC44\uDC45\uDC47\uDC48\uDC49\uDC4A\uDC4B\uDC4C\uDC4D\uDC4E\uDC4F\uDC57\uDC5A\uDC5B\uDC5D\uDC70\uDC71\uDC72\uDC73\uDC74\uDC9F\uDCBB\uDCBC\uDCBE\uDCBF\uDCC0\uDCC1\uDCC6\uDD00\uDD01\uDD02\uDD1F\uDD2F\uDD3F\uDD40\uDD41\uDD42\uDD43\uDD44\uDD45\uDD46\uDD5E\uDD5F\uDD6F\uDD74\uDD75\uDDC1\uDDC2\uDDC3\uDDC4\uDDC5\uDDC6\uDDC7\uDDC8\uDDC9\uDDCA\uDDCB\uDDCC\uDDCD\uDDCE\uDDCF\uDDD0\uDDD1\uDDD2\uDDD3\uDDD4\uDDD5\uDDD6\uDDD7\uDDDB\uDDDD\uDDDE\uDDDF\uDDE2\uDE38\uDE39\uDE3A\uDE3B\uDE3C\uDE3D\uDE3F\uDE40\uDE41\uDE42\uDE43\uDE44\uDE45\uDE46\uDE50\uDE51\uDE52\uDE53\uDE54\uDE55\uDE56\uDE57\uDE58\uDE60\uDE61\uDE62\uDE63\uDE64\uDE65\uDE66\uDE67\uDE68\uDE69\uDE6A\uDE6B\uDE6C\uDE6E\uDE6F\uDE7F\uDE87\uDE88\uDE89\uDE8A\uDE8B\uDE97\uDE98\uDE99\uDE9A\uDE9B\uDE9C\uDE9E\uDE9F\uDEA0\uDEA1\uDEA2\uDEA9\uDEAD\uDEF0\uDEF1\uDEF2\uDEF3\uDEF4\uDEF5\uDEF6\uDEF7\uDEF8\uDF37\uDF38\uDF39\uDF3A\uDF3B\uDF3C\uDF3D\uDF3E\uDF3F\uDF44\uDF55\uDF56\uDF57\uDF58\uDF59\uDF99\uDF9A\uDF9B\uDF9C\uDF9F\uDFD0\uDFE2\uDFFF\uFD3F\uFE10\uFE11\uFE12\uFE13\uFE14\uFE15\uFE16\uFE17\uFE18\uFE19\uFE30\uFE31\uFE32\uFE33\uFE34\uFE35\uFE36\uFE37\uFE38\uFE39\uFE3A\uFE3B\uFE3C\uFE3D\uFE3E\uFE3F\uFE40\uFE41\uFE42\uFE43\uFE44\uFE45\uFE46\uFE47\uFE48\uFE49\uFE4A\uFE4B\uFE4C\uFE4D\uFE4E\uFE4F\uFE50\uFE51\uFE52\uFE54\uFE55\uFE56\uFE57\uFE58\uFE59\uFE5A\uFE5B\uFE5C\uFE5D\uFE5E\uFE5F\uFE60\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01\uFF02\uFF03\uFF05\uFF06\uFF07\uFF08\uFF09\uFF0A\uFF0C\uFF0D\uFF0E\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B\uFF3C\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F\uFF60\uFF61\uFF62\uFF63\uFF64\uFF65";function Tz(e,t,n){if(typeof e!="string")throw new Error("`text` must be a string!");if(typeof t!="string")throw new Error("`a` must be a string!");if(typeof n!="string")throw new Error("`b` must be a string!");return e.split(t).join(n)}var SL="  ",kL=" ";function G5(e){if(typeof e!="string")throw new Error("`text` must be a string!");let t="";for(let n=0;n<e.length;n++){let r=e[n].toLowerCase();Nz.includes(r)?t+=kL:t+=r}for(;t.includes(SL);)t=Tz(t,SL,kL);return t.trim()}function QKe(e,t){return t=t||"",e.split(`
`).map(n=>n.trim().length>0?t+n:n).join(`
`)}function eXe(e){if(typeof e!="string")throw new Error("`text` must be a string!");let t=G5(e).split(" ");return t.length===0?"":t.length===1?t[0]:t.join("-")}var NL={"@Infinity":1/0,"@NegativeInfinity":-1/0,"@NaN":NaN,"@undefined":void 0};function v1(e){if(typeof e=="object"){if(e===null)return e;if(Te(e))for(let t=0;t<e.length;t++)e[t]=v1(e[t]);else Object.keys(e).concat(Object.getOwnPropertySymbols(e)).forEach(t=>{e[t]=v1(e[t])});return e}else return typeof e>"u"||e==="Symbol(@undefined)"?void 0:e}function tXe(e){if(typeof e=="bigint")return e;if(typeof e=="string")if(e.match(/^\s*?-?\d+n\s*?$/g))try{return BigInt(e.split("n")[0])}catch{return NaN}else return NaN;else return NaN}function nXe(e){if(typeof e!="string")return typeof e=="number"?e:void 0;if(kz(e))return parseFloat(e)}function rXe(e){if(typeof e!="string")return;let t="@jrc03c/js-text-tools/newline-replacer";if(e=e.replaceAll(`
`,t),e.trim().match(/^("|')?Symbol\(@String\):.*?("|')?$/g)){let n=e.replace("Symbol(@String):","");if(n.match(/^".*?"$/g))try{return JSON.parse(n)}catch{n=n.substring(1,n.length-1)}return n=n.replaceAll(t,`
`),n}}function aXe(e){if(typeof e!="string")return typeof e=="symbol"?{out:e,isASymbol:!0}:void 0;if(e.trim().match(/^'?"?Symbol\(.*?\)"?'?$/g)){let t=e.replace(/^.*?Symbol\(/g,"").replace(/\).*?$/g,"");return t in NL?{out:NL[t],isASymbol:!0}:{out:Symbol.for(t),isASymbol:!0}}}function iXe(e){if(typeof e!="string")return e instanceof RegExp?e:void 0;let t=e.trim();if(t.match(/^\/.*?\/(d|g|i|m|s|u|v|y)*?$/g))try{let n=t.replace(/^\//g,"").replace(/\/(d|g|i|m|s|u|v|y)*?$/g,""),r=t.match(/\/(d|g|i|m|s|u|v|y)*?$/g).at(-1).split("/").at(-1);return new RegExp(n,r)}catch{}}function oXe(e){if(typeof e!="string")return typeof e=="object"?e:"Symbol(@undefined)";try{let t=JSON.parse(e,(n,r)=>{try{let a=D2(r);return typeof a>"u"?"Symbol(@undefined)":a}catch{return typeof r>"u"?"Symbol(@undefined)":r}});return Te(t)&&(t=v1(t)),t}catch{return e}}function sXe(e){if(typeof e!="string")return e instanceof Date&&e.toString()!=="Invalid Date"?e:void 0;try{let t=new Date(Date.parse(e));if(t.toString()!=="Invalid Date")return t}catch{}}function uXe(e){return typeof e=="object"?e!==null?v1(e):void 0:(Object.keys(e).concat(Object.getOwnPropertySymbols(e)).forEach(t=>{try{let n=t;try{t=D2(t)}catch{}e[t]=D2(e[n]),t!==n&&delete e[n]}catch{}}),v1(e))}function D2(e){function t(n){if(typeof n=="string"){let r=rXe(n);if(typeof r=="string")return r;let a=aXe(n);return r=a?a.out:void 0,a&&a.isASymbol||(r=iXe(n),r instanceof RegExp)||(r=tXe(n),typeof r=="bigint")||(r=nXe(n),typeof r=="number")||(r=sXe(n),r instanceof Date)?r:(r=oXe(n),typeof r<"u"?r==="Symbol(@undefined)"?void 0:r:n)}if(typeof n=="object"){if(n===null)return null;let r;try{if(r=_5(n),Te(r))return r}catch{}if(r=uXe(n),r)try{return _5(r)}catch{return r}return n}return n}return t(e)}function lXe(e){let t=QL(e);return t[0].toUpperCase()+t.slice(1)}function cXe(e){if(typeof e!="string")throw new Error("`text` must be a string!");let t=G5(e).split(" ");return t.length===0?"":t.length===1?t[0]:t.join("_")}function Yu(e,t){return!e||t<=0?"":nr(0,t).map(()=>e).join("")}function Ez(e,t){te(nn(t)||lt(t),"The second parameter to the `stringify` function must be undefined or a string!");let n=t?`
`:"";function r(a,i,o){return o=o||0,typeof a=="bigint"?JSON.stringify(a.toString()+"n"):typeof a=="number"?a===1/0?'"Symbol(@Infinity)"':a===-1/0?'"Symbol(@NegativeInfinity)"':isNaN(a)?'"Symbol(@NaN)"':a.toString():typeof a=="string"?JSON.stringify("Symbol(@String):"+a):typeof a=="boolean"?a.toString():typeof a>"u"?'"Symbol(@undefined)"':typeof a=="symbol"||typeof a=="function"?JSON.stringify(a.toString()):a instanceof RegExp?a.toString():typeof a=="object"?a===null?"null":Wo(a)?JSON.stringify(a.toJSON()):Te(a)?a.length===0?Yu(i,o-1)+"[]":a instanceof Array?Yu(i,o-1)+"["+n+a.map(s=>{let u=(()=>{try{return r(yd(s),i,o+1)}catch{return r(s,i,o+1)}})();return nn(u)&&(u=u.trim()),Yu(i,o+1)+u}).join(","+n)+n+Yu(i,o)+"]":r(yd(a),null,i):Object.keys(a).length+Object.getOwnPropertySymbols(a).length===0?Yu(i,o-1)+"{}":Yu(i,o-1)+"{"+n+Object.keys(a).concat(Object.getOwnPropertySymbols(a)).map(s=>{let u=(()=>{try{return r(yd(a[s]),i,o+1)}catch{return r(a[s],i,o+1)}})();nn(u)&&(u=u.trim());let l=typeof s=="symbol"?r(s):JSON.stringify(s);return Yu(i,o+1)+l+":"+(i?" ":"")+u}).join(","+n)+n+Yu(i,o)+"}":"undefined"}return r(Tc(e),t)}function pXe(e){let t=e.split(`
`),n=t.filter(a=>a.trim().length>0).map(a=>a.split("").findIndex(i=>!i.match(/\s/g))),r=Math.min(...n);return t.map(a=>a.substring(r)).join(`
`)}function dXe(e,t){if(typeof e!="string")throw new Error("The first argument to the `wrap` function must be a string!");if((typeof t>"u"||t===null)&&(typeof process<"u"&&typeof process.stdout<"u"&&typeof process.stdout.columns=="number"?t=process.stdout.columns>80?80:process.stdout.columns:t=80),isNaN(t)||typeof t!="number")throw new Error("The second argument to the `wrap` function must be undefined, null, or an integer!");let n=[];return e.split(`
`).forEach(r=>{if(r.trim().length===0)return n.push("");let a=r.split(/[^\s]/g)[0],i=r.replace(a,"").split(" "),o=a;i.forEach(s=>{let u=o+(o.trim().length>0?" ":"")+s;u.length>t?(n.push(o),o=a+s):o=u}),o.length>0&&n.push(o)}),n.join(`
`)}typeof window<"u"&&(window.JSTextTools={camelify:QL,convertObjectToTypedArray:_5,convertTypedArrayToObject:yd,indent:QKe,isANumberString:kz,kebabify:eXe,parse:D2,pascalify:lXe,punctuation:Nz,replaceAll:Tz,snakeify:cXe,stringify:Ez,strip:G5,unindent:pXe,wrap:dXe});function Iz(e,t){t=t||{};let n=_e(t.maxUniqueValues)?t.maxUniqueValues:7,r=_e(t.minNonMissingValues)?t.minNonMissingValues:15,a=_e(t.maxCorrelationThreshold)?t.maxCorrelationThreshold:1-1e-5,i=t.progress||null;if(me(e))return U(Ze(e).length===2&&!co(e),"The `convertToNumerical` function only works on non-jagged 2-dimensional arrays and DataFrames!"),Iz(new Rt(e));U(Pe(e),"You must pass a DataFrame into the `convertToNumerical` function!"),U(tu(n),"`maxUniqueValues` must be a whole number!"),U(tu(r),"`minNonMissingValues` must be a whole number!"),U(_e(a),"`maxCorrelationThreshold` must be a number!"),Me(i)||U(hr(i),"If defined, `progress` must be a function!");let o={},s=!0;return e.apply((u,l)=>{i&&i(l/e.columns.length);let c=c1(u.values);if(c.type==="boolean"&&(c.values=c.values.map(d=>d?1:0)),c.type==="date"&&(c.values=c.values.map(d=>{try{return d.getTime()}catch{return NaN}})),c.type==="null")return;c.type==="number"||c.type,c.type==="object"&&(c.values=c.values.map(d=>Ez(d))),c.type;let p=c.values.filter(d=>!Me(d));if(!(c.values.length-p.length>r.length)){if(c.type!=="boolean"){let d=ys(xd(p).toArray().filter(h=>!Me(h.value)&&_e(h.count)),(h,m)=>m.count-h.count);if(au(d.slice(0,n).map(h=>h.count),s)/p.length>=.9){if(d.length<2)return;let h=P5(u.name,c.values);for(;Object.keys(h).length>0;){let m=Object.keys(h)[0],v=h[m];delete h[m];let g=Object.keys(o);for(let y=0;y<g.length;y++){let w=o[g[y]];if(Qu(v,w,s)>a)return}o[m]=v}return}if(c.type==="object"||c.type==="string")return}if(c.type==="boolean"||c.type==="date"||c.type==="number"||c.type==="bigint"){let d=Object.keys(o);for(let f=0;f<d.length;f++){let h=o[d[f]];if(Qu(c.values,h,s)>a)return}o[u.name]=c.values}}}),new Rt(o)}function Cz(e){if(ze(e)){let a=new Rt(Cz(e.values));return a.index=e.index.slice(),a.columns=e.index.slice(),a}U(me(e),"The `diagonalize` function only works on 1-dimensional arrays and Series!");let t=Ze(e);U(t.length===1,"The `diagonalize` function only works on 1-dimensional arrays and Series!");let n=e.every(a=>typeof a=="bigint"),r=Ed([t[0],t[0]]);if(e.forEach((a,i)=>r[i][i]=a),n)for(let a=0;a<r.length;a++)for(let i=0;i<r[a].length;i++)try{r[a][i]=BigInt(r[a][i])}catch{}return r}function u5(e){let t="@jrc03c/js-data-science-helpers/get-correlation-matrix";return Object.defineProperty(e,t,{configurable:!1,enumerable:!1,writable:!1,value:Symbol.for(t)}),e}function A5(e,t,n){if(Me(t)&&(t=e),Pe(e)){let a=new Rt(A5(e.values,t));return a.index=e.columns.slice(),a.columns=Pe(t)?t.columns.slice():new Rt(t).columns.slice(),u5(a)}if(Pe(t)){let a=new Rt(A5(e,t.values));return a.index=Pe(e)?e.columns.slice():new Rt(e).columns.slice(),a.columns=t.columns.slice(),u5(a)}U(me(e)&&me(t),"The `getCorrelationMatrix` function only works on 2-dimensional arrays and DataFrames!"),U(!co(e)&&!co(t),"The `getCorrelationMatrix` function only works on non-jagged 2-dimensional arrays and DataFrames!"),U(e.length===t.length,'The dimensions of the matrices you passed into the `getCorrelationMatrix` function aren\'t compatible! ([shape(a).join(", ")] vs. [shape(b).join(", ")]) The function expects that you\'ll be comparing the columns of two matrices where the columns are all of the same length, so please make sure that the matrices are oriented accordingly.');let r=Ii([e[0].length,t[0].length]);for(let a=0;a<e[0].length;a++){let i=e.map(o=>o[a]);for(let o=0;o<t[0].length;o++){let s=t.map(u=>u[o]);n?r[a][o]=Qu(...Ju(i,s)):r[a][o]=Qu(i,s)}}return u5(F2(r,-1,1))}function fXe(e,t,n){t=Me(t)?1-1e-5:t,Pe(e)||(e=new Rt(e));let r=Ze(e);U((me(e)||Pe(e))&&r.length===2,"The first argument passed into the `getHighlyCorrelatedColumns` function must be a 2-dimensional array or DataFrame!"),U(_e(t)&&t>=-1&&t<=1,"The second argument passed into the `getHighlyCorrelatedColumns` must be a number in the range [-1, 1] representing the threshold above which two columns will be considered to be highly correlated!");let a={};n&&(e=e.dropNaN());for(let i=0;i<r[1]-1;i++)for(let o=i+1;o<r[1];o++){let s=e.columns[i],u=e.columns[o],l=Qu(e.get(s),e.get(u));l>t&&(a[s]||(a[s]=[]),a[s].push({column:u,correlation:l}),a[u]||(a[u]=[]),a[u].push({column:s,correlation:l}))}return Object.keys(a).forEach(i=>{a[i]=ys(a[i],(o,s)=>o.column<s.column?-1:1)}),a}function q5(e,t){return Pe(e)||ze(e)?q5(e.values):_e(e)?ru(e):me(e)?(t&&(e=w1(e)),N1(au(el(e,2)))):NaN}function hXe(e,t){let n=Cn(e,{shouldDropNaNs:t}),r=t?n.nWithoutNaNs:n.n;return n.counts.values.filter(a=>_e(a)||!t).map(a=>{let i=n.counts.get(a);return{value:a,count:i,percentage:i/r}})}var TL=[.5,.49601,.49202,.48803,.48405,.48006,.47608,.4721,.46812,.46414,.46017,.4562,.45224,.44828,.44433,.44038,.4364,.43251,.42858,.42465,.42074,.41683,.41294,.40905,.40517,.40129,.39743,.39358,.38974,.38591,.38209,.37828,.37448,.3707,.36693,.36317,.35942,.35569,.35197,.34827,.34458,.3409,.33724,.3336,.32997,.32636,.32276,.31918,.31561,.31207,.30854,.30503,.30153,.29806,.2946,.29116,.28774,.28434,.28096,.2776,.27425,.27093,.26763,.26435,.26109,.25785,.25463,.25143,.24825,.2451,.24196,.23885,.23576,.2327,.22965,.22663,.22363,.22065,.2177,.21476,.21186,.20897,.20611,.20327,.20045,.19766,.19489,.19215,.18943,.18673,.18406,.18141,.17879,.17619,.17361,.17106,.16853,.16602,.16354,.16109,.15866,.15625,.15386,.15151,.14917,.14686,.14457,.14231,.14007,.13786,.13567,.1335,.13136,.12924,.12714,.12507,.12302,.121,.119,.11702,.11507,.11314,.11123,.10935,.10749,.10565,.10383,.10204,.10027,.09853,.0968,.0951,.09342,.09176,.09012,.08851,.08692,.08534,.08379,.08226,.08076,.07927,.0778,.07636,.07493,.07353,.07215,.07078,.06944,.06811,.06681,.06552,.06426,.06301,.06178,.06057,.05938,.05821,.05705,.05592,.0548,.0537,.05262,.05155,.0505,.04947,.04846,.04746,.04648,.04551,.04457,.04363,.04272,.04182,.04093,.04006,.0392,.03836,.03754,.03673,.03593,.03515,.03438,.03362,.03288,.03216,.03144,.03074,.03005,.02938,.02872,.02807,.02743,.0268,.02619,.02559,.025,.02442,.02385,.0233,.02275,.02222,.02169,.02118,.02068,.02018,.0197,.01923,.01876,.01831,.01786,.01743,.017,.01659,.01618,.01578,.01539,.015,.01463,.01426,.0139,.01355,.01321,.01287,.01255,.01222,.01191,.0116,.0113,.01101,.01072,.01044,.01017,.0099,.00964,.00939,.00914,.00889,.00866,.00842,.0082,.00798,.00776,.00755,.00734,.00714,.00695,.00676,.00657,.00639,.00621,.00604,.00587,.0057,.00554,.00539,.00523,.00508,.00494,.0048,.00466,.00453,.0044,.00427,.00415,.00402,.00391,.00379,.00368,.00357,.00347,.00336,.00326,.00317,.00307,.00298,.00289,.0028,.00272,.00264,.00256,.00248,.0024,.00233,.00226,.00219,.00212,.00205,.00199,.00193,.00187,.00181,.00175,.00169,.00164,.00159,.00154,.00149,.00144,.00139,.00135,.00131,.00126,.00122,.00118,.00114,.00111,.00107,.00104,.001,97e-5,94e-5,9e-4,87e-5,84e-5,82e-5,79e-5,76e-5,74e-5,71e-5,69e-5,66e-5,64e-5,62e-5,6e-4,58e-5,56e-5,54e-5,52e-5,5e-4,48e-5,47e-5,45e-5,43e-5,42e-5,4e-4,39e-5,38e-5,36e-5,35e-5,34e-5,32e-5,31e-5,3e-4,29e-5,28e-5,27e-5,26e-5,25e-5,24e-5,23e-5,22e-5,22e-5,21e-5,2e-4,19e-5,19e-5,18e-5,17e-5,17e-5,16e-5,15e-5,15e-5,14e-5,14e-5,13e-5,13e-5,12e-5,12e-5,11e-5,11e-5,1e-4,1e-4,1e-4,9e-5,9e-5,8e-5,8e-5,8e-5,8e-5,7e-5,7e-5,7e-5,6e-5,6e-5,6e-5,6e-5,5e-5,5e-5,5e-5,5e-5,5e-5,4e-5,4e-5,4e-5,4e-5,4e-5,4e-5,3e-5,3e-5,3e-5,3e-5,3e-5,3e-5,3e-5,3e-5,2e-5,2e-5,2e-5,2e-5];function mXe(e){return ru(e)>4.1?0:TL[XL(KL(ru(e),0,4.1,0,TL.length))]}function g1(e,t,n){if(Pe(e)||ze(e))return g1(e.values,t);if(Pe(t)||ze(t))return g1(e,t.values);U(me(e)&&me(t)&&Fa(Ze(e),Ze(t)),"You must pass two identically-shaped arrays, Series, or DataFrames into the `pValue` function!");let[r,a]=n?Ju(zr(e),zr(t)):[zr(e),zr(t)];if(r.length===0||a.length===0)return NaN;let i=Cn(r,{stdev:!0}),o=Cn(a,{stdev:!0}),s=i.mean,u=o.mean,l=i.stdev,c=o.stdev,p=r.length,d=a.length,f=(s-u)/N1(l*l/p+c*c/d);return 2*mXe(f)}function l5(e){let t="@jrc03c/js-data-science-helpers/get-p-value-matrix";return Object.defineProperty(e,t,{configurable:!1,enumerable:!1,writable:!1,value:Symbol.for(t)}),e}function F5(e,t,n){if(Me(t)&&(t=e),Pe(e)){let a=new Rt(F5(e.values,t));return a.index=e.columns.slice(),a.columns=Pe(t)?t.columns.slice():new Rt(t).columns.slice(),l5(a)}if(Pe(t)){let a=new Rt(F5(e,t.values));return a.index=Pe(e)?e.columns.slice():new Rt(e).columns.slice(),a.columns=t.columns.slice(),l5(a)}U(me(e)&&me(t),"The `getPValueMatrix` function only works on 2-dimensional arrays and DataFrames!"),U(!co(e)&&!co(t),"The `getPValueMatrix` function only works on non-jagged 2-dimensional arrays and DataFrames!"),U(e.length===t.length,'The dimensions of the matrices you passed into the `getPValueMatrix` function aren\'t compatible! ([shape(a).join(", ")] vs. [shape(b).join(", ")]) The function expects that you\'ll be comparing the columns of two matrices where the columns are all of the same length, so please make sure that the matrices are oriented accordingly.');let r=Ii([e[0].length,t[0].length]);for(let a=0;a<e[0].length;a++){let i=e.map(o=>o[a]);for(let o=0;o<t[0].length;o++){let s=t.map(u=>u[o]);n?r[a][o]=g1(...Ju(i,s)):r[a][o]=g1(i,s)}}return l5(F2(r,0,1))}function Dz(e){if(me(e)){U(Ze(e).length===2&&!co(e),"The `hunterChainSort` function only works on non-jagged 2-dimensional arrays and DataFrames!");let o=new Rt(e);return o.index=o.columns.slice(),Dz(o).values}U(Pe(e),"You must pass a 2-dimensional array or DataFrame into the `hunterChainSort` function!");let t=!0,n=e.index.slice(),r=[];for(;n.length>1;)if(r.length===0){let o=n[h1(n.map(s=>au(el(e.values[e.index.indexOf(s)],2),t)),t)];n.splice(n.indexOf(o),1),r.push(o)}else{let o=r.at(-1),s=e.values[e.index.indexOf(o)].filter((l,c)=>n.includes(e.index[c])),u=n[h1(s,t)];n.splice(n.indexOf(u),1),r.push(u)}r.push(n[0]);let a=$o(r);return e.get(a,null)}var vXe=class u1{static DROP_NAN_MODE="DROP_NAN_MODE";static DROP_MISSING_MODE="DROP_MISSING_MODE";constructor(t){let n=this;U(Me(t)||t===u1.DROP_NAN_MODE||t===u1.DROP_MISSING_MODE,"The `mode` value passed into the `IndexMatcher` constructor must be undefined or one of [IndexMatcher.DROP_NAN_MODE, IndexMatcher.DROP_MISSING_MODE]! (By default, the mode is `Indexer.DROP_MISSING_MODE`.)"),n.mode=Me(t)?u1.DROP_MISSING_MODE:t,n.index=null}fit(){let t=this,n=[];return Object.values(arguments).forEach(r=>{U(Pe(r)||ze(r),"The `IndexMatcher` only works on Series and DataFrames! To drop NaN values in a pair-wise fashion from regular arrays, use the `dropNaNPairwise` function from the @jrc03c/js-math-tools library."),t.mode===u1.DROP_MISSING_MODE?n.push(r.dropMissing().index):n.push(r.dropNaN().index)}),t.index=R5(...n),t}transform(){let t=this;U(!!t.index,"The IndexMatcher hasn't been fitted yet! Please call the `fit` method before calling the `transform` method.");let n=Object.values(arguments).map(r=>(U(Pe(r)||ze(r),"The `IndexMatcher` only works on Series and DataFrames! To drop NaN values in a pair-wise fashion from regular arrays, use the `dropNaNPairwise` function from the @jrc03c/js-math-tools library."),r.get(t.index,null)));return n.length===1?n[0]:n}fitAndTransform(){return this.fit(...arguments).transform(...arguments)}};function _z(e,t){if(typeof e=="number")return e===0||e===1;if(typeof e=="bigint")return e===0n||e===1n;if(Pe(e)||ze(e))return _z(e.values,t);if(me(e)){t&&(e=w1(e));let r=xd(e).values.toSorted();return r.length===2&&Number(r[0])===0&&Number(r[1])===1||r.length===1&&(Number(r[0])===0||Number(r[0])===1)}return!1}function gXe(e){try{let t="@jrc03c/js-data-science-helpers/get-correlation-matrix";if(e[t]===Symbol.for(t))return!0;let n=Cn(e,{shouldDropNaNs:!0});return n.min>=-1&&n.max<=1}catch{return!1}}function yXe(e,t){(Pe(e)||ze(e))&&(e=e.values),(Pe(t)||ze(t))&&(t=t.values),U(Fa(Ze(e),Ze(t)),"`yPred` and `yTrue` must have the same shape!");let n=zr(e),r=zr(t),a=0;return n.forEach((i,o)=>{i===r[o]&&a++}),a/n.length}function H5(e){return me(e)&&Ze(e).length===2}function bXe(e,t){return e.map(n=>t[Td(t.map(r=>kc(n,r)))])}function kc(e,t){return au(el(nl(e,t),2),!0)}var Az=class{constructor(e){U(typeof e=="object","`config` must be an object! See the documentation for more information about the properties that the `config` object can contain."),U(tu(e.k),"`k` must be a whole number!"),U(tu(e.maxIterations)||Me(e.maxIterations),"`maxIterations` must be a whole number or undefined!"),U(tu(e.maxRestarts)||Me(e.maxRestarts),"`maxRestarts` must be a whole number or undefined!"),U(typeof e.tolerance=="number"||Me(e.tolerance),"`tolerance` must be a number or undefined!"),this.k=e.k,this.maxRestarts=e.maxRestarts||25,this.maxIterations=e.maxIterations||100,this.tolerance=e.tolerance||1e-4,this.centroids=null}initializeCentroids(e){return kd(e).slice(0,this.k)}getFitStepFunction(e,t){U(H5(e),"`x` must be a matrix!"),Pe(e)&&(e=e.values),Me(t)||U(hr(t),"If defined, `progress` must be a function!");let n=this.initializeCentroids(e),r={currentRestart:0,currentIteration:0,currentCentroids:n,bestCentroids:n,bestScore:-1/0,isFinished:!1};return()=>{let a=this.predict(e,r.currentCentroids),i=[],o=Ed(this.k);e.forEach((u,l)=>{let c=a[l];i[c]||(i[c]=Ed(u.length)),i[c]=Nd(i[c],u),o[c]++});let s=pn(0,this.k).map(u=>o[u]===0?Nd(r.currentCentroids[Math.floor(nu()*r.currentCentroids.length)],tl(.001,jL(r.currentCentroids[0].length))):T1(i[u],o[u]));if(kc(r.currentCentroids,s)<this.tolerance?r.currentIteration=this.maxIterations-1:r.currentCentroids=s,t&&t((r.currentRestart+r.currentIteration/this.maxIterations)/this.maxRestarts,this),r.currentIteration++,r.currentIteration>=this.maxIterations){let u=this.score(e,r.currentCentroids);if(u>r.bestScore&&(r.bestScore=u,r.bestCentroids=Lr(r.currentCentroids)),r.currentIteration=0,r.currentRestart++,r.currentRestart>=this.maxRestarts)r.isFinished=!0,this.centroids=r.bestCentroids,t&&t(1,this);else{let l=this.initializeCentroids(e);r.currentCentroids=l}}return r}}fit(e,t){let n=this.getFitStepFunction(e,t),r;for(;!r||!r.isFinished;)r=n();return this}predict(e,t){if(t=t||this.centroids,!t)throw new Error("No centroids were provided to the `predict` method, and the K-Means model hasn't been fitted yet. Please either pass centroids as a second parameter to the `predict` method or run the `fit` method first!");return e.map(n=>Td(t.map(r=>kc(n,r))))}score(e,t){if(t=t||this.centroids,!t)throw new Error("No centroids were provided to the `score` method, and the K-Means model hasn't been fitted yet. Please either pass centroids as a second parameter to the `score` method or run the `fit` method first!");let r=this.predict(e,t).map(a=>t[a]);return-kc(e,r)}},Fz=class extends Az{initializeCentroids(e){let n=[e[Math.floor(nu()*e.length)]];for(;n.length<this.k;){let r=e.map(i=>kc(i,n[Td(n.map(o=>kc(i,o)),!0)])),a=T1(r,S1(r,!0));n.push(e[a.findIndex(i=>nu()<i)])}return n}},wXe=class{constructor(e){Me(e)&&(e={}),U(typeof e=="object","`config` must be an object! See the documentation for more information about the properties that the `config` object can contain."),Me(e.ks)&&(e.ks=pn(1,16)),U(me(e.ks),"`ks` must be an array of whole numbers!"),e.ks.forEach(t=>{U(tu(t),"`ks` must be an array of whole numbers!")}),U(tu(e.maxIterations)||Me(e.maxIterations),"`maxIterations` must be a whole number or undefined!"),U(tu(e.maxRestarts)||Me(e.maxRestarts),"`maxRestarts` must be a whole number or undefined!"),U(typeof e.tolerance=="number"||Me(e.tolerance),"`tolerance` must be a number or undefined!"),this.ks=e.ks,this.maxRestarts=e.maxRestarts||25,this.maxIterations=e.maxIterations||100,this.tolerance=e.tolerance||1e-4,this.scoreStopRatio=e.scoreStopRatio||.85,this.modelClass=e.modelClass||Fz,this.fittedModel=null}getFitStepFunction(e,t){U(H5(e),"`x` must be a matrix!"),Pe(e)&&(e=e.values),Me(t)||U(hr(t),"If defined, `progress` must be a function!");let n={isFinished:!1,lastScore:-1/0,currentIndex:0};return()=>{let r=this.ks[n.currentIndex],a=new this.modelClass({k:r,maxRestarts:10,maxIterations:20});a.fit(e,o=>t?t((n.currentIndex+o)/(this.ks.length+1)):null);let i=a.score(e);return i/n.lastScore>this.scoreStopRatio?(n.isFinished=!0,n.currentIndex--):(n.lastScore=i,n.currentIndex+1>=this.ks.length?n.isFinished=!0:n.currentIndex++),n.isFinished&&(this.fittedModel=new this.modelClass({k:this.ks[n.currentIndex],maxRestarts:this.maxRestarts,maxIterations:this.maxIterations}),this.fittedModel.fit(e,o=>t?t((this.ks.length+o)/(this.ks.length+1)):null),t&&t(1)),n}}fit(e,t){let n=this.getFitStepFunction(e,t),r;for(;!r||!r.isFinished;)r=n();return this}predict(e,t){return this.fittedModel.predict(e,t)}score(e,t){return this.fittedModel.score(e,t)}get k(){return this.fittedModel.k}set k(e){throw new Error("You can't set the k-value manually! It has to be set automatically via the `fit` method.")}get centroids(){return this.fittedModel.centroids}set centroids(e){U(Fa(Ze(e),Ze(this.fittedModel.centroids)),"When assigning a new value to the `centroids` property, the new centroids must have the same shape as the old centroids!"),this.fittedModel.centroids=e}},xXe={accuracy:yXe,isMatrix:H5,orderCentroids:bXe,sse:kc},_1={helpers:xXe,KMeansMeta:wXe,KMeansNaive:Az,KMeansPlusPlus:Fz};function j5(e,t){if(Pe(e)||ze(e)){let i=e.copy();return i.values=j5(i.values),i}U(me(e),"The `normalize` function only works on arrays, Series, and DataFrames!");let n=Cn(e,{shouldDropNaNs:t,stdev:!0}),r=n.mean,a=n.stdev;return Nc(e,i=>(Number(i)-r)/a)}function d1(e,t){if(ze(e)){if(ze(t))return new Zr(d1(e.values,t.values));{let n=e.copy();return n.values=d1(e.values,t),n}}if(ze(t)){let n=t.copy();return n.values=d1(e,t.values),n}return U(me(e),"`project` only works on vectors!"),U(me(t),"`project` only works on vectors!"),U(Ze(e).length===1,"`project` only works on vectors!"),U(Ze(t).length===1,"`project` only works on vectors!"),tl(Number(zo(t,e))/Number(zo(t,t)),t)}function Rz(e){if(Pe(e)){let i=new Rt(Rz(e.values));return i.index=e.index.slice(),i.columns=e.columns.slice(),i}U(me(e)&&!co(e)&&Ze(e).length===2,"`orthonormalize` only works on matrices!");let t=Ci(e),n=[];t.forEach(i=>{let o=i;n.forEach(s=>{o=nl(o,d1(o,s))}),n.push(o)});let r=!0,a=n.map(i=>T1(i,q5(i,r)));return Ci(a)}function SXe(e){let t=e.counts.values;return t.length<3&&(t.length===2&&Fa(t.toSorted(),[0,1])||t.length===1&&(t[0]===0||t[0]===1))}function EL(e){let t=[];return e.counts.values.forEach(n=>{if(_e(n)){let r=e.counts.get(n);for(let a=0;a<r;a++)t.push(n)}}),t}var kXe=class{constructor(e){e=e||{},this.isAllowedToClip=Me(e.isAllowedToClip)?!0:e.isAllowedToClip,this.isAllowedToTakeTheLog=Me(e.isAllowedToTakeTheLog)?!1:e.isAllowedToTakeTheLog,this.maxScore=e.maxScore||5,U(vs(this.isAllowedToClip),"The `isAllowedToClip` property on the options object passed into the `OutlierMitigator` constructor must have a boolean value!"),U(vs(this.isAllowedToTakeTheLog),"The `isAllowedToTakeTheLog` property on the options object passed into the `OutlierMitigator` constructor must have a boolean value!"),U(_e(this.maxScore)&&this.maxScore>=0,"The `maxScore` property on the options object passed into the `OutlierMitigator` constructor must have a non-negative number value!"),this.mad=0,this.median=0}fit(e){if(Pe(e)||ze(e))return this.fit(e.values);if(U(me(e),"The `OutlierMitigator.fit` method only works on arrays, Series, and DataFrames!"),e.length===0)return;let t=Cn(e,{shouldDropNaNs:!0,median:!0});if(SXe(t))return this;let n=EL(t);return this.median=Number(t.median),this.mad=Number(Cn(ru(nl(n,this.median)),{median:!0}).median),this}fitAndTransform(){return this.fit(arguments[0]).transform(...arguments)}transform(){if(arguments.length>1)return Array.from(arguments).map(i=>this.transform(i));let e=arguments[0];if(Pe(e)||ze(e))return this.transform(e.values);U(me(e),"The `OutlierMitigator.transform` method only works on arrays, Series, and DataFrames!");let t=Cn(e,{shouldDropNaNs:!0}),n=EL(t),r=!1;if(this.mad===0){let i=[],o=[],s=-1/0,u=1/0;n.forEach(p=>{p<this.median?(i.push(p),p>s&&(s=p)):p>this.median&&(o.push(p),p<u&&(u=p))});let l=this.median,c=this.median;if(i.length>0&&(l=s),o.length>0&&(c=u),this.mad=(c-l)/2,this.mad===0)return e;r=(this.median-l)/this.mad>this.maxScore||(c-this.median)/this.mad>this.maxScore}if(Cn(T1(ru(nl(n,this.median)),this.mad)).max>this.maxScore||r){let i=null,o=Lr(e);return this.isAllowedToClip&&(o=Nc(o,s=>(s=_e(s)?F2(s,this.median-this.maxScore*this.mad,this.median+this.maxScore*this.mad):s,this.isAllowedToTakeTheLog&&_e(s)&&(i===null||s<i)&&(i=s),s))),this.isAllowedToTakeTheLog&&(i===null&&(i=Cn(o).min),o=Nc(o,s=>_e(s)?GL(s-i+1):s)),o}else return e}};function _2(e,t,n){if(Pe(e)||ze(e))return _2(e.values,t);if(Pe(t)||ze(t))return _2(e,t.values);if(U(me(e),"You must pass two same-shaped numerical arrays into the `rSquared` function!"),U(me(t),"You must pass two same-shaped numerical arrays into the `rSquared` function!"),U(Fa(Ze(e),Ze(t)),"You must pass two same-shaped numerical arrays into the `rSquared` function!"),n){let i=Ju(e,t);e=i[0],t=i[1]}let r=Number(au(el(nl(e,t),2))),a=Number(au(el(nl(e,qL(e)),2)));return a===0?NaN:1-r/a}function NXe(e,t,n){let r=_2(e,t,n);return JL(r)*N1(ru(r))}function TXe(){return j5(...arguments)}var EXe=class{constructor(e){e=e||{},this.means=[],this.stdevs=[],this.wasFittedOnAVector=!1,this.hasBeenFitted=!1,this.shouldIgnoreNaNs=typeof e.shouldIgnoreNaNs>"u"?!1:e.shouldIgnoreNaNs}_getDataArrayAndShape(e){if(Pe(e))return[e.values,e.shape];if(ze(e)){let n=Ci([e.values]);return[n,Ze(n)]}U(me(e),"`x` must be a 1- or 2-dimensional array, DataFrame, or Series!");let t=Ze(e);return U(t.length<3,"`x` must be a 1- or 2-dimensional array, DataFrame, or Series!"),t.length===1&&(t.push(1),e=Ci([e])),[e,t]}fit(e){let t=this._getDataArrayAndShape(e);e=t[0];let n=t[1];return this.wasFittedOnAVector=n.indexOf(1)>-1,this.means=[],this.stdevs=[],pn(0,n[1]).forEach(r=>{let a=e.map(o=>o[r]),i=Cn(a,{shouldDropNaNs:this.shouldIgnoreNaNs,stdev:!0});this.means.push(i.mean),this.stdevs.push(i.stdev)}),this.hasBeenFitted=!0,this}fitAndTransform(){return this.fit(arguments[0]).transform(...arguments)}transform(){let e=Array.from(arguments);if(e.length>1)return e.map(i=>this.transform(i));let t=e[0];if(!this.hasBeenFitted)throw new Error("This `StandardScaler` instance hasn't been trained on any data yet! Please use the `fit` method to train it before calling the `transform` method.");if(Pe(t)){let i=new Rt(this.transform(t.values));return i.columns=t.columns,i.index=t.index,i}if(ze(t)){let i=new Zr(this.transform(t.values));return i.name=t.name,i.index=t.index,i}let n=this._getDataArrayAndShape(t);t=n[0];let r=n[1];U(r[1]===this.means.length,"The data you passed into the `transform` function doesn't have the same number of columns as the data set on which this StandardScaler was fitted!");let a=t.map(i=>i.map((o,s)=>(Number(o)-Number(this.means[s]))/Number(this.stdevs[s])));return this.wasFittedOnAVector?zr(a):a}untransform(e){if(!this.hasBeenFitted)throw new Error("This `StandardScaler` instance hasn't been trained on any data yet! Please use the `fit` method to train it before calling the `transform` method.");if(Pe(e)){let a=new Rt(this.untransform(e.values));return a.columns=e.columns,a.index=e.index,a}if(ze(e)){let a=new Zr(this.untransform(e.values));return a.name=e.name,a.index=e.index,a}let t=this._getDataArrayAndShape(e);e=t[0];let n=t[1];U(n[1]===this.means.length,"The data you passed into the `untransform` function doesn't have the same number of columns as the data set on which this StandardScaler was fitted!");let r=e.map(a=>a.map((i,o)=>i*this.stdevs[o]+this.means[o]));return this.wasFittedOnAVector?zr(r):r}};function IXe(){let e=Array.from(arguments),t=e.filter(p=>me(p)||Pe(p)||ze(p)),n=e.find(p=>!t.includes(p)&&typeof p=="object")||{},r=Me(n.shouldShuffle)?!0:n.shouldShuffle,a=Me(n.testSize)?.1:n.testSize;U(vs(r),"If passing an options object to the `trainTestSplit` function and including a `shouldShuffle` property on that object, then the value of that property must be a boolean!"),U(_e(a)&&a>0&&a<1,"If passing an options object to the `trainTestSplit` function and including a `testSize` property on that object, then the value of that property must be a number between 0 and 1 (exclusive on both ends)!"),U(t.length>0,"You must pass at least one dataset into the `trainTestSplit` function!");let i=t.map(p=>Ze(p)[0]);U(ii(i).length===1,`All datasets passed into the \`trainTestSplit\` function must have the same length at their shallowest dimension! The lengths of the datasets you provided, though, are: ${i.join(", ")}`);let o=[],s=r?kd(pn(0,i[0])):pn(0,i[0]),u=Uo((1-a)*s.length),l=s.slice(0,u),c=s.slice(u);return t.forEach(p=>{if(Pe(p))o.push(p.get(l,null)),o.push(p.get(c,null));else if(ze(p))o.push(p.get(l)),o.push(p.get(c));else{let d=[],f=[];p.forEach((h,m)=>{l.includes(m)?d.push(h):f.push(h)}),o.push(d),o.push(f)}}),o}typeof window<"u"&&(window.JSDataScienceHelpers={cohensd:y5,convertToNumerical:Iz,diagonalize:Cz,getCorrelationMatrix:A5,getHighlyCorrelatedColumns:fXe,getMagnitude:q5,getOneHotEncodings:P5,getPercentages:hXe,getPValueMatrix:F5,hunterChainSort:Dz,IndexMatcher:vXe,isBinary:_z,isCorrelationMatrix:gXe,isWholeNumber:tu,KMeans:_1,MathError:Qs,normalize:j5,orthonormalize:Rz,OutlierMitigator:kXe,project:d1,pValue:g1,rScore:NXe,rSquared:_2,standardize:TXe,StandardScaler:EXe,trainTestSplit:IXe});var rl=qo(r1(),1);function A1(e){return new Promise((t,n)=>{try{let r=new Date;return setTimeout(()=>t(new Date-r),e)}catch(r){return n(r)}})}function CXe(e){let t=new Date,n=new Date;for(;n-t<e;)n=new Date;return new Date-t}typeof window<"u"&&(window.pause=A1,window.pauseAsync=A1,window.pauseSync=CXe);var po=qo(r1(),1),{KMeansNaive:DXe}=_1,Ic=class extends DXe{initializeCentroids(t){return et(t)&&(t=t.values),Vn(t)&&(t=t.arraySync()),(0,po.tensor)(super.initializeCentroids(Ko(t)))}getFitStepFunction(t,n){et(t)&&(t=t.values),Vn(t)&&(t=t.arraySync()),t=Ko(t),Z(Lo(t),"`x` must be a matrix!"),Qe(n)||Z(Jn(n),"If defined, `progress` must be a function!");let r=[],a=u=>(r.push(u),u),i=a((0,po.tensor)(t)),o=a(this.initializeCentroids(t)),s={currentRestart:0,currentIteration:0,currentCentroids:o,bestCentroids:o,bestScore:-1/0,isFinished:!1};return async()=>{try{let u=this.predict(i,s.currentCentroids),l=s.currentCentroids.arraySync(),c=[];for(let d=0;d<this.k;d++){let f=[];if(u.forEach((h,m)=>{h===d&&f.push(m)}),f.length===0)c.push(Lc(l[Math.floor(Fi()*l.length)],su(.01,Q2(t[0].length))));else{let h=a(i.gather(f));c.push(a(h.mean(0)))}}if(c=a((0,po.stack)(c)),pd(s.currentCentroids,c)<this.tolerance&&(s.currentIteration=this.maxIterations-1),s.currentIteration++,s.currentIteration>=this.maxIterations){s.currentRestart++;let d=this.score(i,c);d>s.bestScore&&(s.bestScore=d,s.bestCentroids=a(c.clone())),s.currentIteration=0,s.currentRestart>=this.maxRestarts?s.isFinished=!0:s.currentCentroids=a(this.initializeCentroids(t))}else s.currentCentroids=a(c.clone());return s.isFinished?(this.centroids=s.bestCentroids.arraySync(),s={isFinished:!0},r.forEach(d=>{try{d.dispose()}catch{}}),n&&(n(1,this),await A1(0))):(this.centroids=s.currentCentroids.arraySync(),n&&(n((s.currentRestart+s.currentIteration/this.maxIterations)/this.maxRestarts,this),await A1(0))),s}catch(u){throw r.forEach(l=>{try{l.dispose()}catch{}}),u}}}async fit(t,n){let r=this.getFitStepFunction(t,n),a;for(;!a||!a.isFinished;)a=await r();return this}predict(t,n){return(0,po.tidy)(()=>{Vn(t)&&(t=t.arraySync()),et(t)&&(t=t.values),t=Ko(t),Z(Lo(t),"`x` must be a matrix!"),n=n||this.centroids,Vn(n)||(n=(0,po.tensor)(n)),Z(it(t)[1]===n.shape[1],"`x` and `centroids` must have the same number of columns!");let r=(0,po.tensor)(t).expandDims(1),a=n.expandDims(0);return r.sub(a).pow(2).sum(2).argMin(1).arraySync()})}score(t,n){return(0,po.tidy)(()=>{Vn(t)&&(t=t.arraySync()),et(t)&&(t=t.values),t=Ko(t),Z(Lo(t),"`x` must be a matrix!"),n=n||this.centroids,Vn(n)||(n=(0,po.tensor)(n)),Z(Lo(n)||Qe(n),"`centroids` must be a matrix or undefined!"),Z(it(t)[1]===n.shape[1],"`x` and `centroids` must have the same number of columns!");let r=(0,po.tensor)(t),a=this.predict(r,n),i=n.gather(a).arraySync();return-pd(r,i)})}};var Cc=class extends Ic{initializeCentroids(t){return Vn(t)||(t=Ko(t)),Z(Lo(t),"`x` must be a matrix!"),(0,rl.tidy)(()=>{let n=(0,rl.tensor)(t),r=[li(Fi()*t.length)];for(;r.length<this.k;){let a=r.map(l=>t[l]),i=(0,rl.tensor)(this.predict(t,a),null,"int32"),o=(0,rl.tidy)(()=>(0,rl.tensor)(a).gather(i).sub(n).pow(2).sum(1)),s=o.div(o.max()).arraySync(),u=0;for(let l=0;l<1e4;l++){u=li(Fi()*s.length);let c=s[u];if(Fi()<c)break}r.push(u)}return(0,rl.tensor)(r.map(a=>t[a]))})}};var{KMeansMeta:_Xe}=_1,F1=class extends _Xe{constructor(t){super(t),t=t||{},this.modelClass=t.modelClass||Cc}get centroids(){return this.fittedModel.centroids}set centroids(t){Vn(t)&&(t=t.arraySync());let n=it(t);if(this.centroids){let r=this.centroids,a=it(r);Z(la(n,a),`The new centroids must have the same shape as the old centroids! (expected: [${a.join(", ")}], received: [${n.join(", ")}])`)}this.fittedModel||(this.fittedModel=new this.modelClass({k:n[0],maxIterations:this.maxIterations,maxRestarts:this.maxRestarts,tolerance:this.tolerance})),this.fittedModel.centroids=t}async fit(t,n){let r=this.getFitStepFunction(t,n),a;for(;!a||!a.isFinished;)a=await r();return this}getFitStepFunction(t,n){t=Ko(t),Z(Lo(t),"`x` must be a matrix!"),et(t)&&(t=t.values),Qe(n)||Z(Jn(n),"If defined, `progress` must be a function!");let r={isFinished:!1,lastScore:-1/0,currentIndex:0};return async()=>{let a=this.ks[r.currentIndex],i=new this.modelClass({k:a,maxRestarts:10,maxIterations:20});await i.fit(t,s=>n?n((r.currentIndex+s)/(this.ks.length+1)):null);let o=i.score(t);return o/r.lastScore>this.scoreStopRatio?(r.isFinished=!0,r.currentIndex--):(r.lastScore=o,r.currentIndex+1>=this.ks.length?r.isFinished=!0:r.currentIndex++),r.isFinished&&(this.fittedModel=new this.modelClass({k:this.ks[r.currentIndex],maxRestarts:this.maxRestarts,maxIterations:this.maxIterations}),await this.fittedModel.fit(t,s=>n?n((this.ks.length+s)/(this.ks.length+1)):null),n&&n(1)),r}}};var Oz={isMatrix:Lo,isTFTensor:Vn,isWholeNumber:eL,orderCentroids:tL,sign:c2},Mz={sse:pd,accuracy:s5,rSquared:p2,rScore:nL},Pz={TFKMeansMeta:F1,TFKMeansNaive:Ic,TFKMeansPlusPlus:Cc},AXe={helpers:Oz,metrics:Mz,models:Pz};typeof window<"u"&&(window.TFKMeans=AXe);0&&(module.exports={helpers,metrics,models});
/*! Bundled license information:

@tensorflow/tfjs-core/dist/tf-core.node.js:
  (**
   * @license
   * Copyright 2024 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2020 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2023 Google LLC.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2017 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2018 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2019 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2020 Google Inc. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2021 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2022 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the 'License');
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an 'AS IS' BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2022 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2022 Google LLC.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (** @license See the LICENSE file. *)

@tensorflow/tfjs-layers/dist/tf-layers.node.js:
  (**
   * @license
   * Copyright 2024 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2018 Google LLC
   *
   * Use of this source code is governed by an MIT-style
   * license that can be found in the LICENSE file or at
   * https://opensource.org/licenses/MIT.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Use of this source code is governed by an MIT-style
   * license that can be found in the LICENSE file or at
   * https://opensource.org/licenses/MIT.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2022 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2020 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2023 Google LLC.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2017 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2018 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2020 Google Inc. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2019 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2022 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the 'License');
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an 'AS IS' BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Use of this source code is governed by an MIT-style
   * license that can be found in the LICENSE file or at
   * https://opensource.org/licenses/MIT.
   * =============================================================================
   *)
  (** @license See the LICENSE file. *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Use of this source code is governed by an MIT-style
   * license that can be found in the LICENSE file or at
   * https://opensource.org/licenses/MIT.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2022 CodeSmith LLC
   *
   * Use of this source code is governed by an MIT-style
   * license that can be found in the LICENSE file or at
   * https://opensource.org/licenses/MIT.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2023 CodeSmith LLC
   *
   * Use of this source code is governed by an MIT-style
   * license that can be found in the LICENSE file or at
   * https://opensource.org/licenses/MIT.
   * =============================================================================
   *)

@tensorflow/tfjs-converter/dist/tf-converter.node.js:
  (**
   * @license
   * Copyright 2024 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2021 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2019 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2019 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2023 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2020 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2023 Google LLC.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2017 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2018 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2020 Google Inc. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2022 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the 'License');
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an 'AS IS' BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2022 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2022 Google LLC.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (** @license See the LICENSE file. *)

@tensorflow/tfjs-data/dist/tf-data.node.js:
  (**
   * @license
   * Copyright 2024 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2018 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *
   * =============================================================================
   *)
  (** @license See the LICENSE file. *)

@tensorflow/tfjs-backend-cpu/dist/tf-backend-cpu.node.js:
  (**
   * @license
   * Copyright 2024 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2019 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2020 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the License);
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an AS IS BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2020 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2023 Google LLC.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2022 Google LLC.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2021 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (** @license See the LICENSE file. *)
  (**
   * @license
   * Copyright 2022 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)

@tensorflow/tfjs-backend-webgl/dist/tf-backend-webgl.node.js:
  (**
   * @license
   * Copyright 2024 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2018 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2019 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2020 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the License);
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an AS IS BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2020 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2023 Google LLC.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2022 Google LLC.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2021 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2017 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (** @license See the LICENSE file. *)
  (**
   * @license
   * Copyright 2020 Google Inc. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2022 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)

@tensorflow/tfjs/dist/tf.node.js:
  (**
   * @license
   * Copyright 2024 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2020 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2017 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2018 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2019 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2023 Google LLC.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2021 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2020 Google Inc. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (** @license See the LICENSE file. *)
  (**
   * @license
   * Copyright 2022 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the 'License');
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an 'AS IS' BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2022 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2022 Google LLC.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2021 Google LLC. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * https://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
  (**
   * @license
   * Copyright 2022 Google Inc. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   * =============================================================================
   *)
*/
